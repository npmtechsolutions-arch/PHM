(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const x of u)if(x.type==="childList")for(const h of x.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function o(u){const x={};return u.integrity&&(x.integrity=u.integrity),u.referrerPolicy&&(x.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?x.credentials="include":u.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function i(u){if(u.ep)return;u.ep=!0;const x=o(u);fetch(u.href,x)}})();var nd={exports:{}},Fn={};var Gx;function Qg(){if(Gx)return Fn;Gx=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(i,u,x){var h=null;if(x!==void 0&&(h=""+x),u.key!==void 0&&(h=""+u.key),"key"in u){x={};for(var N in u)N!=="key"&&(x[N]=u[N])}else x=u;return u=x.ref,{$$typeof:n,type:i,key:h,ref:u!==void 0?u:null,props:x}}return Fn.Fragment=r,Fn.jsx=o,Fn.jsxs=o,Fn}var Fx;function Vg(){return Fx||(Fx=1,nd.exports=Qg()),nd.exports}var e=Vg(),rd={exports:{}},Te={};var $x;function Xg(){if($x)return Te;$x=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),h=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),w=Symbol.iterator;function _(E){return E===null||typeof E!="object"?null:(E=w&&E[w]||E["@@iterator"],typeof E=="function"?E:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function A(E,j,B){this.props=E,this.context=j,this.refs=b,this.updater=B||k}A.prototype.isReactComponent={},A.prototype.setState=function(E,j){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,j,"setState")},A.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function T(){}T.prototype=A.prototype;function q(E,j,B){this.props=E,this.context=j,this.refs=b,this.updater=B||k}var D=q.prototype=new T;D.constructor=q,S(D,A.prototype),D.isPureReactComponent=!0;var M=Array.isArray;function se(){}var Q={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function P(E,j,B){var F=B.ref;return{$$typeof:n,type:E,key:j,ref:F!==void 0?F:null,props:B}}function H(E,j){return P(E.type,j,E.props)}function Z(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function U(E){var j={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(B){return j[B]})}var W=/\/+/g;function te(E,j){return typeof E=="object"&&E!==null&&E.key!=null?U(""+E.key):j.toString(36)}function me(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(se,se):(E.status="pending",E.then(function(j){E.status==="pending"&&(E.status="fulfilled",E.value=j)},function(j){E.status==="pending"&&(E.status="rejected",E.reason=j)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function R(E,j,B,F,pe){var le=typeof E;(le==="undefined"||le==="boolean")&&(E=null);var be=!1;if(E===null)be=!0;else switch(le){case"bigint":case"string":case"number":be=!0;break;case"object":switch(E.$$typeof){case n:case r:be=!0;break;case p:return be=E._init,R(be(E._payload),j,B,F,pe)}}if(be)return pe=pe(E),be=F===""?"."+te(E,0):F,M(pe)?(B="",be!=null&&(B=be.replace(W,"$&/")+"/"),R(pe,j,B,"",function(ce){return ce})):pe!=null&&(Z(pe)&&(pe=H(pe,B+(pe.key==null||E&&E.key===pe.key?"":(""+pe.key).replace(W,"$&/")+"/")+be)),j.push(pe)),1;be=0;var Le=F===""?".":F+":";if(M(E))for(var ie=0;ie<E.length;ie++)F=E[ie],le=Le+te(F,ie),be+=R(F,j,B,le,pe);else if(ie=_(E),typeof ie=="function")for(E=ie.call(E),ie=0;!(F=E.next()).done;)F=F.value,le=Le+te(F,ie++),be+=R(F,j,B,le,pe);else if(le==="object"){if(typeof E.then=="function")return R(me(E),j,B,F,pe);throw j=String(E),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return be}function ee(E,j,B){if(E==null)return E;var F=[],pe=0;return R(E,F,"","",function(le){return j.call(B,le,pe++)}),F}function I(E){if(E._status===-1){var j=E._result;j=j(),j.then(function(B){(E._status===0||E._status===-1)&&(E._status=1,E._result=B)},function(B){(E._status===0||E._status===-1)&&(E._status=2,E._result=B)}),E._status===-1&&(E._status=0,E._result=j)}if(E._status===1)return E._result.default;throw E._result}var xe=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},L={map:ee,forEach:function(E,j,B){ee(E,function(){j.apply(this,arguments)},B)},count:function(E){var j=0;return ee(E,function(){j++}),j},toArray:function(E){return ee(E,function(j){return j})||[]},only:function(E){if(!Z(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Te.Activity=f,Te.Children=L,Te.Component=A,Te.Fragment=o,Te.Profiler=u,Te.PureComponent=q,Te.StrictMode=i,Te.Suspense=y,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Te.__COMPILER_RUNTIME={__proto__:null,c:function(E){return Q.H.useMemoCache(E)}},Te.cache=function(E){return function(){return E.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(E,j,B){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var F=S({},E.props),pe=E.key;if(j!=null)for(le in j.key!==void 0&&(pe=""+j.key),j)!O.call(j,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&j.ref===void 0||(F[le]=j[le]);var le=arguments.length-2;if(le===1)F.children=B;else if(1<le){for(var be=Array(le),Le=0;Le<le;Le++)be[Le]=arguments[Le+2];F.children=be}return P(E.type,pe,F)},Te.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:x,_context:E},E},Te.createElement=function(E,j,B){var F,pe={},le=null;if(j!=null)for(F in j.key!==void 0&&(le=""+j.key),j)O.call(j,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(pe[F]=j[F]);var be=arguments.length-2;if(be===1)pe.children=B;else if(1<be){for(var Le=Array(be),ie=0;ie<be;ie++)Le[ie]=arguments[ie+2];pe.children=Le}if(E&&E.defaultProps)for(F in be=E.defaultProps,be)pe[F]===void 0&&(pe[F]=be[F]);return P(E,le,pe)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(E){return{$$typeof:N,render:E}},Te.isValidElement=Z,Te.lazy=function(E){return{$$typeof:p,_payload:{_status:-1,_result:E},_init:I}},Te.memo=function(E,j){return{$$typeof:g,type:E,compare:j===void 0?null:j}},Te.startTransition=function(E){var j=Q.T,B={};Q.T=B;try{var F=E(),pe=Q.S;pe!==null&&pe(B,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(se,xe)}catch(le){xe(le)}finally{j!==null&&B.types!==null&&(j.types=B.types),Q.T=j}},Te.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Te.use=function(E){return Q.H.use(E)},Te.useActionState=function(E,j,B){return Q.H.useActionState(E,j,B)},Te.useCallback=function(E,j){return Q.H.useCallback(E,j)},Te.useContext=function(E){return Q.H.useContext(E)},Te.useDebugValue=function(){},Te.useDeferredValue=function(E,j){return Q.H.useDeferredValue(E,j)},Te.useEffect=function(E,j){return Q.H.useEffect(E,j)},Te.useEffectEvent=function(E){return Q.H.useEffectEvent(E)},Te.useId=function(){return Q.H.useId()},Te.useImperativeHandle=function(E,j,B){return Q.H.useImperativeHandle(E,j,B)},Te.useInsertionEffect=function(E,j){return Q.H.useInsertionEffect(E,j)},Te.useLayoutEffect=function(E,j){return Q.H.useLayoutEffect(E,j)},Te.useMemo=function(E,j){return Q.H.useMemo(E,j)},Te.useOptimistic=function(E,j){return Q.H.useOptimistic(E,j)},Te.useReducer=function(E,j,B){return Q.H.useReducer(E,j,B)},Te.useRef=function(E){return Q.H.useRef(E)},Te.useState=function(E){return Q.H.useState(E)},Te.useSyncExternalStore=function(E,j,B){return Q.H.useSyncExternalStore(E,j,B)},Te.useTransition=function(){return Q.H.useTransition()},Te.version="19.2.3",Te}var Yx;function Ad(){return Yx||(Yx=1,rd.exports=Xg()),rd.exports}var m=Ad(),id={exports:{}},$n={},cd={exports:{}},od={};var Px;function Zg(){return Px||(Px=1,(function(n){function r(R,ee){var I=R.length;R.push(ee);e:for(;0<I;){var xe=I-1>>>1,L=R[xe];if(0<u(L,ee))R[xe]=ee,R[I]=L,I=xe;else break e}}function o(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var ee=R[0],I=R.pop();if(I!==ee){R[0]=I;e:for(var xe=0,L=R.length,E=L>>>1;xe<E;){var j=2*(xe+1)-1,B=R[j],F=j+1,pe=R[F];if(0>u(B,I))F<L&&0>u(pe,B)?(R[xe]=pe,R[F]=I,xe=F):(R[xe]=B,R[j]=I,xe=j);else if(F<L&&0>u(pe,I))R[xe]=pe,R[F]=I,xe=F;else break e}}return ee}function u(R,ee){var I=R.sortIndex-ee.sortIndex;return I!==0?I:R.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;n.unstable_now=function(){return x.now()}}else{var h=Date,N=h.now();n.unstable_now=function(){return h.now()-N}}var y=[],g=[],p=1,f=null,w=3,_=!1,k=!1,S=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function D(R){for(var ee=o(g);ee!==null;){if(ee.callback===null)i(g);else if(ee.startTime<=R)i(g),ee.sortIndex=ee.expirationTime,r(y,ee);else break;ee=o(g)}}function M(R){if(S=!1,D(R),!k)if(o(y)!==null)k=!0,se||(se=!0,U());else{var ee=o(g);ee!==null&&me(M,ee.startTime-R)}}var se=!1,Q=-1,O=5,P=-1;function H(){return b?!0:!(n.unstable_now()-P<O)}function Z(){if(b=!1,se){var R=n.unstable_now();P=R;var ee=!0;try{e:{k=!1,S&&(S=!1,T(Q),Q=-1),_=!0;var I=w;try{t:{for(D(R),f=o(y);f!==null&&!(f.expirationTime>R&&H());){var xe=f.callback;if(typeof xe=="function"){f.callback=null,w=f.priorityLevel;var L=xe(f.expirationTime<=R);if(R=n.unstable_now(),typeof L=="function"){f.callback=L,D(R),ee=!0;break t}f===o(y)&&i(y),D(R)}else i(y);f=o(y)}if(f!==null)ee=!0;else{var E=o(g);E!==null&&me(M,E.startTime-R),ee=!1}}break e}finally{f=null,w=I,_=!1}ee=void 0}}finally{ee?U():se=!1}}}var U;if(typeof q=="function")U=function(){q(Z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,te=W.port2;W.port1.onmessage=Z,U=function(){te.postMessage(null)}}else U=function(){A(Z,0)};function me(R,ee){Q=A(function(){R(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(R){switch(w){case 1:case 2:case 3:var ee=3;break;default:ee=w}var I=w;w=ee;try{return R()}finally{w=I}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(R,ee){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var I=w;w=R;try{return ee()}finally{w=I}},n.unstable_scheduleCallback=function(R,ee,I){var xe=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?xe+I:xe):I=xe,R){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=I+L,R={id:p++,callback:ee,priorityLevel:R,startTime:I,expirationTime:L,sortIndex:-1},I>xe?(R.sortIndex=I,r(g,R),o(y)===null&&R===o(g)&&(S?(T(Q),Q=-1):S=!0,me(M,I-xe))):(R.sortIndex=L,r(y,R),k||_||(k=!0,se||(se=!0,U()))),R},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(R){var ee=w;return function(){var I=w;w=ee;try{return R.apply(this,arguments)}finally{w=I}}}})(od)),od}var Qx;function Ig(){return Qx||(Qx=1,cd.exports=Zg()),cd.exports}var dd={exports:{}},zt={};var Vx;function Kg(){if(Vx)return zt;Vx=1;var n=Ad();function r(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var i={d:{f:o,r:function(){throw Error(r(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},u=Symbol.for("react.portal");function x(y,g,p){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:f==null?null:""+f,children:y,containerInfo:g,implementation:p}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function N(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,zt.createPortal=function(y,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return x(y,g,null,p)},zt.flushSync=function(y){var g=h.T,p=i.p;try{if(h.T=null,i.p=2,y)return y()}finally{h.T=g,i.p=p,i.d.f()}},zt.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(y,g))},zt.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},zt.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var p=g.as,f=N(p,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?i.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:f,integrity:w,fetchPriority:_}):p==="script"&&i.d.X(y,{crossOrigin:f,integrity:w,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zt.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=N(g.as,g.crossOrigin);i.d.M(y,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(y)},zt.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,f=N(p,g.crossOrigin);i.d.L(y,p,{crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zt.preloadModule=function(y,g){if(typeof y=="string")if(g){var p=N(g.as,g.crossOrigin);i.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(y)},zt.requestFormReset=function(y){i.d.r(y)},zt.unstable_batchedUpdates=function(y,g){return y(g)},zt.useFormState=function(y,g,p){return h.H.useFormState(y,g,p)},zt.useFormStatus=function(){return h.H.useHostTransitionStatus()},zt.version="19.2.3",zt}var Xx;function Jg(){if(Xx)return dd.exports;Xx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),dd.exports=Kg(),dd.exports}var Zx;function Wg(){if(Zx)return $n;Zx=1;var n=Ig(),r=Ad(),o=Jg();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function h(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function N(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function y(t){if(x(t)!==t)throw Error(i(188))}function g(t){var a=t.alternate;if(!a){if(a=x(t),a===null)throw Error(i(188));return a!==t?null:t}for(var s=t,l=a;;){var c=s.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===s)return y(c),t;if(d===l)return y(c),a;d=d.sibling}throw Error(i(188))}if(s.return!==l.return)s=c,l=d;else{for(var v=!1,C=c.child;C;){if(C===s){v=!0,s=c,l=d;break}if(C===l){v=!0,l=c,s=d;break}C=C.sibling}if(!v){for(C=d.child;C;){if(C===s){v=!0,s=d,l=c;break}if(C===l){v=!0,l=d,s=c;break}C=C.sibling}if(!v)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?t:a}function p(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=p(t),a!==null)return a;t=t.sibling}return null}var f=Object.assign,w=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),q=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var W=Symbol.for("react.client.reference");function te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===W?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case S:return"Fragment";case A:return"Profiler";case b:return"StrictMode";case M:return"Suspense";case se:return"SuspenseList";case P:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case q:return t.displayName||"Context";case T:return(t._context.displayName||"Context")+".Consumer";case D:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q:return a=t.displayName||null,a!==null?a:te(t.type)||"Memo";case O:a=t._payload,t=t._init;try{return te(t(a))}catch{}}return null}var me=Array.isArray,R=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},xe=[],L=-1;function E(t){return{current:t}}function j(t){0>L||(t.current=xe[L],xe[L]=null,L--)}function B(t,a){L++,xe[L]=t.current,t.current=a}var F=E(null),pe=E(null),le=E(null),be=E(null);function Le(t,a){switch(B(le,a),B(pe,t),B(F,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?dx(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=dx(a),t=ux(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}j(F),B(F,t)}function ie(){j(F),j(pe),j(le)}function ce(t){t.memoizedState!==null&&B(be,t);var a=F.current,s=ux(a,t.type);a!==s&&(B(pe,t),B(F,s))}function Se(t){pe.current===t&&(j(F),j(pe)),be.current===t&&(j(be),qn._currentValue=I)}var ke,$;function ye(t){if(ke===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);ke=a&&a[1]||"",$=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+t+$}var ze=!1;function Tt(t,a){if(!t||ze)return"";ze=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ne){var J=ne}Reflect.construct(t,[],he)}else{try{he.call()}catch(ne){J=ne}t.call(he.prototype)}}else{try{throw Error()}catch(ne){J=ne}(he=t())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ne){if(ne&&J&&typeof ne.stack=="string")return[ne.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],C=d[1];if(v&&C){var z=v.split(`
`),K=C.split(`
`);for(c=l=0;l<z.length&&!z[l].includes("DetermineComponentFrameRoot");)l++;for(;c<K.length&&!K[c].includes("DetermineComponentFrameRoot");)c++;if(l===z.length||c===K.length)for(l=z.length-1,c=K.length-1;1<=l&&0<=c&&z[l]!==K[c];)c--;for(;1<=l&&0<=c;l--,c--)if(z[l]!==K[c]){if(l!==1||c!==1)do if(l--,c--,0>c||z[l]!==K[c]){var oe=`
`+z[l].replace(" at new "," at ");return t.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",t.displayName)),oe}while(1<=l&&0<=c);break}}}finally{ze=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?ye(s):""}function Ta(t,a){switch(t.tag){case 26:case 27:case 5:return ye(t.type);case 16:return ye("Lazy");case 13:return t.child!==a&&a!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Tt(t.type,!1);case 11:return Tt(t.type.render,!1);case 1:return Tt(t.type,!0);case 31:return ye("Activity");default:return""}}function Wa(t){try{var a="",s=null;do a+=Ta(t,s),s=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var es=Object.prototype.hasOwnProperty,ts=n.unstable_scheduleCallback,Da=n.unstable_cancelCallback,as=n.unstable_shouldYield,Zl=n.unstable_requestPaint,Dt=n.unstable_now,Ra=n.unstable_getCurrentPriorityLevel,nr=n.unstable_ImmediatePriority,Ut=n.unstable_UserBlockingPriority,el=n.unstable_NormalPriority,Yi=n.unstable_LowPriority,de=n.unstable_IdlePriority,Ee=n.log,De=n.unstable_setDisableYieldValue,$e=null,Xe=null;function Rt(t){if(typeof Ee=="function"&&De(t),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode($e,t)}catch{}}var Mt=Math.clz32?Math.clz32:rr,Pi=Math.log,lt=Math.LN2;function rr(t){return t>>>=0,t===0?32:31-(Pi(t)/lt|0)|0}var Cs=256,Es=262144,As=4194304;function Ts(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ir(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var c=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var C=l&134217727;return C!==0?(l=C&~d,l!==0?c=Ts(l):(v&=C,v!==0?c=Ts(v):s||(s=C&~t,s!==0&&(c=Ts(s))))):(C=l&~d,C!==0?c=Ts(C):v!==0?c=Ts(v):s||(s=l&~t,s!==0&&(c=Ts(s)))),c===0?0:a!==0&&a!==c&&(a&d)===0&&(d=c&-c,s=a&-a,d>=s||d===32&&(s&4194048)!==0)?a:c}function Il(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Rp(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pd(){var t=As;return As<<=1,(As&62914560)===0&&(As=4194304),t}function Qi(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Kl(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mp(t,a,s,l,c,d){var v=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var C=t.entanglements,z=t.expirationTimes,K=t.hiddenUpdates;for(s=v&~s;0<s;){var oe=31-Mt(s),he=1<<oe;C[oe]=0,z[oe]=-1;var J=K[oe];if(J!==null)for(K[oe]=null,oe=0;oe<J.length;oe++){var ne=J[oe];ne!==null&&(ne.lane&=-536870913)}s&=~he}l!==0&&Qd(t,l,0),d!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~a))}function Qd(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Mt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function Vd(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-Mt(s),c=1<<l;c&a|t[l]&a&&(t[l]|=a),s&=~c}}function Xd(t,a){var s=a&-a;return s=(s&42)!==0?1:Vi(s),(s&(t.suspendedLanes|a))!==0?0:s}function Vi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Xi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Zd(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:zx(t.type))}function Id(t,a){var s=ee.p;try{return ee.p=t,a()}finally{ee.p=s}}var ss=Math.random().toString(36).slice(2),kt="__reactFiber$"+ss,Ht="__reactProps$"+ss,tl="__reactContainer$"+ss,Zi="__reactEvents$"+ss,zp="__reactListeners$"+ss,Op="__reactHandles$"+ss,Kd="__reactResources$"+ss,Jl="__reactMarker$"+ss;function Ii(t){delete t[kt],delete t[Ht],delete t[Zi],delete t[zp],delete t[Op]}function al(t){var a=t[kt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[tl]||s[kt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=bx(t);t!==null;){if(s=t[kt])return s;t=bx(t)}return a}t=s,s=t.parentNode}return null}function sl(t){if(t=t[kt]||t[tl]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Wl(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function ll(t){var a=t[Kd];return a||(a=t[Kd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function jt(t){t[Jl]=!0}var Jd=new Set,Wd={};function Ds(t,a){nl(t,a),nl(t+"Capture",a)}function nl(t,a){for(Wd[t]=a,t=0;t<a.length;t++)Jd.add(a[t])}var Lp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eu={},tu={};function Up(t){return es.call(tu,t)?!0:es.call(eu,t)?!1:Lp.test(t)?tu[t]=!0:(eu[t]=!0,!1)}function cr(t,a,s){if(Up(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function or(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Ma(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}function ia(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function au(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qp(t,a,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,d=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return c.call(this)},set:function(v){s=""+v,d.call(this,v)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Ki(t){if(!t._valueTracker){var a=au(t)?"checked":"value";t._valueTracker=qp(t,a,""+t[a])}}function su(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=au(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function dr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Bp=/[\n"\\]/g;function ca(t){return t.replace(Bp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ji(t,a,s,l,c,d,v,C){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+ia(a)):t.value!==""+ia(a)&&(t.value=""+ia(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?Wi(t,v,ia(a)):s!=null?Wi(t,v,ia(s)):l!=null&&t.removeAttribute("value"),c==null&&d!=null&&(t.defaultChecked=!!d),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+ia(C):t.removeAttribute("name")}function lu(t,a,s,l,c,d,v,C){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),a!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||a!=null)){Ki(t);return}s=s!=null?""+ia(s):"",a=a!=null?""+ia(a):s,C||a===t.value||(t.value=a),t.defaultValue=a}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=C?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Ki(t)}function Wi(t,a,s){a==="number"&&dr(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function rl(t,a,s,l){if(t=t.options,a){a={};for(var c=0;c<s.length;c++)a["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=a.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&l&&(t[s].defaultSelected=!0)}else{for(s=""+ia(s),a=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}a!==null||t[c].disabled||(a=t[c])}a!==null&&(a.selected=!0)}}function nu(t,a,s){if(a!=null&&(a=""+ia(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+ia(s):""}function ru(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(i(92));if(me(l)){if(1<l.length)throw Error(i(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=ia(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),Ki(t)}function il(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var Hp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iu(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||Hp.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function cu(t,a,s){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in a)l=a[c],a.hasOwnProperty(c)&&s[c]!==l&&iu(t,c,l)}else for(var d in a)a.hasOwnProperty(d)&&iu(t,d,a[d])}function ec(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ur(t){return Fp.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function za(){}var tc=null;function ac(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cl=null,ol=null;function ou(t){var a=sl(t);if(a&&(t=a.stateNode)){var s=t[Ht]||null;e:switch(t=a.stateNode,a.type){case"input":if(Ji(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ca(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var c=l[Ht]||null;if(!c)throw Error(i(90));Ji(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&su(l)}break e;case"textarea":nu(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&rl(t,!!s.multiple,a,!1)}}}var sc=!1;function du(t,a,s){if(sc)return t(a,s);sc=!0;try{var l=t(a);return l}finally{if(sc=!1,(cl!==null||ol!==null)&&(Jr(),cl&&(a=cl,t=ol,ol=cl=null,ou(a),t)))for(a=0;a<t.length;a++)ou(t[a])}}function en(t,a){var s=t.stateNode;if(s===null)return null;var l=s[Ht]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(i(231,a,typeof s));return s}var Oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lc=!1;if(Oa)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){lc=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{lc=!1}var ls=null,nc=null,mr=null;function uu(){if(mr)return mr;var t,a=nc,s=a.length,l,c="value"in ls?ls.value:ls.textContent,d=c.length;for(t=0;t<s&&a[t]===c[t];t++);var v=s-t;for(l=1;l<=v&&a[s-l]===c[d-l];l++);return mr=c.slice(t,1<l?1-l:void 0)}function hr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function xr(){return!0}function mu(){return!1}function Gt(t){function a(s,l,c,d,v){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(s=t[C],this[C]=s?s(d):d[C]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?xr:mu,this.isPropagationStopped=mu,this}return f(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),a}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=Gt(Rs),an=f({},Rs,{view:0,detail:0}),$p=Gt(an),rc,ic,sn,fr=f({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sn&&(sn&&t.type==="mousemove"?(rc=t.screenX-sn.screenX,ic=t.screenY-sn.screenY):ic=rc=0,sn=t),rc)},movementY:function(t){return"movementY"in t?t.movementY:ic}}),hu=Gt(fr),Yp=f({},fr,{dataTransfer:0}),Pp=Gt(Yp),Qp=f({},an,{relatedTarget:0}),cc=Gt(Qp),Vp=f({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Xp=Gt(Vp),Zp=f({},Rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ip=Gt(Zp),Kp=f({},Rs,{data:0}),xu=Gt(Kp),Jp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ef={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tf(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=ef[t])?!!a[t]:!1}function oc(){return tf}var af=f({},an,{key:function(t){if(t.key){var a=Jp[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=hr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(t){return t.type==="keypress"?hr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sf=Gt(af),lf=f({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pu=Gt(lf),nf=f({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),rf=Gt(nf),cf=f({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),of=Gt(cf),df=f({},fr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uf=Gt(df),mf=f({},Rs,{newState:0,oldState:0}),hf=Gt(mf),xf=[9,13,27,32],dc=Oa&&"CompositionEvent"in window,ln=null;Oa&&"documentMode"in document&&(ln=document.documentMode);var pf=Oa&&"TextEvent"in window&&!ln,fu=Oa&&(!dc||ln&&8<ln&&11>=ln),gu=" ",bu=!1;function yu(t,a){switch(t){case"keyup":return xf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dl=!1;function ff(t,a){switch(t){case"compositionend":return vu(a);case"keypress":return a.which!==32?null:(bu=!0,gu);case"textInput":return t=a.data,t===gu&&bu?null:t;default:return null}}function gf(t,a){if(dl)return t==="compositionend"||!dc&&yu(t,a)?(t=uu(),mr=nc=ls=null,dl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return fu&&a.locale!=="ko"?null:a.data;default:return null}}var bf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ju(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!bf[t.type]:a==="textarea"}function Nu(t,a,s,l){cl?ol?ol.push(l):ol=[l]:cl=l,a=ni(a,"onChange"),0<a.length&&(s=new pr("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var nn=null,rn=null;function yf(t){lx(t,0)}function gr(t){var a=Wl(t);if(su(a))return t}function wu(t,a){if(t==="change")return a}var ku=!1;if(Oa){var uc;if(Oa){var mc="oninput"in document;if(!mc){var Su=document.createElement("div");Su.setAttribute("oninput","return;"),mc=typeof Su.oninput=="function"}uc=mc}else uc=!1;ku=uc&&(!document.documentMode||9<document.documentMode)}function _u(){nn&&(nn.detachEvent("onpropertychange",Cu),rn=nn=null)}function Cu(t){if(t.propertyName==="value"&&gr(rn)){var a=[];Nu(a,rn,t,ac(t)),du(yf,a)}}function vf(t,a,s){t==="focusin"?(_u(),nn=a,rn=s,nn.attachEvent("onpropertychange",Cu)):t==="focusout"&&_u()}function jf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gr(rn)}function Nf(t,a){if(t==="click")return gr(a)}function wf(t,a){if(t==="input"||t==="change")return gr(a)}function kf(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Kt=typeof Object.is=="function"?Object.is:kf;function cn(t,a){if(Kt(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!es.call(a,c)||!Kt(t[c],a[c]))return!1}return!0}function Eu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Au(t,a){var s=Eu(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Eu(s)}}function Tu(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Tu(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Du(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=dr(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=dr(t.document)}return a}function hc(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Sf=Oa&&"documentMode"in document&&11>=document.documentMode,ul=null,xc=null,on=null,pc=!1;function Ru(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;pc||ul==null||ul!==dr(l)||(l=ul,"selectionStart"in l&&hc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),on&&cn(on,l)||(on=l,l=ni(xc,"onSelect"),0<l.length&&(a=new pr("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=ul)))}function Ms(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var ml={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},fc={},Mu={};Oa&&(Mu=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function zs(t){if(fc[t])return fc[t];if(!ml[t])return t;var a=ml[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in Mu)return fc[t]=a[s];return t}var zu=zs("animationend"),Ou=zs("animationiteration"),Lu=zs("animationstart"),_f=zs("transitionrun"),Cf=zs("transitionstart"),Ef=zs("transitioncancel"),Uu=zs("transitionend"),qu=new Map,gc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gc.push("scrollEnd");function va(t,a){qu.set(t,a),Ds(a,[t])}var br=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},oa=[],hl=0,bc=0;function yr(){for(var t=hl,a=bc=hl=0;a<t;){var s=oa[a];oa[a++]=null;var l=oa[a];oa[a++]=null;var c=oa[a];oa[a++]=null;var d=oa[a];if(oa[a++]=null,l!==null&&c!==null){var v=l.pending;v===null?c.next=c:(c.next=v.next,v.next=c),l.pending=c}d!==0&&Bu(s,c,d)}}function vr(t,a,s,l){oa[hl++]=t,oa[hl++]=a,oa[hl++]=s,oa[hl++]=l,bc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function yc(t,a,s,l){return vr(t,a,s,l),jr(t)}function Os(t,a){return vr(t,null,null,a),jr(t)}function Bu(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var c=!1,d=t.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(c=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,c&&a!==null&&(c=31-Mt(s),t=d.hiddenUpdates,l=t[c],l===null?t[c]=[a]:l.push(a),a.lane=s|536870912),d):null}function jr(t){if(50<Dn)throw Dn=0,Ao=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var xl={};function Af(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,a,s,l){return new Af(t,a,s,l)}function vc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function La(t,a){var s=t.alternate;return s===null?(s=Jt(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Hu(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Nr(t,a,s,l,c,d){var v=0;if(l=t,typeof t=="function")vc(t)&&(v=1);else if(typeof t=="string")v=zg(t,s,F.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case P:return t=Jt(31,s,a,c),t.elementType=P,t.lanes=d,t;case S:return Ls(s.children,c,d,a);case b:v=8,c|=24;break;case A:return t=Jt(12,s,a,c|2),t.elementType=A,t.lanes=d,t;case M:return t=Jt(13,s,a,c),t.elementType=M,t.lanes=d,t;case se:return t=Jt(19,s,a,c),t.elementType=se,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:v=10;break e;case T:v=9;break e;case D:v=11;break e;case Q:v=14;break e;case O:v=16,l=null;break e}v=29,s=Error(i(130,t===null?"null":typeof t,"")),l=null}return a=Jt(v,s,a,c),a.elementType=t,a.type=l,a.lanes=d,a}function Ls(t,a,s,l){return t=Jt(7,t,l,a),t.lanes=s,t}function jc(t,a,s){return t=Jt(6,t,null,a),t.lanes=s,t}function Gu(t){var a=Jt(18,null,null,0);return a.stateNode=t,a}function Nc(t,a,s){return a=Jt(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Fu=new WeakMap;function da(t,a){if(typeof t=="object"&&t!==null){var s=Fu.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Wa(a)},Fu.set(t,a),a)}return{value:t,source:a,stack:Wa(a)}}var pl=[],fl=0,wr=null,dn=0,ua=[],ma=0,ns=null,ka=1,Sa="";function Ua(t,a){pl[fl++]=dn,pl[fl++]=wr,wr=t,dn=a}function $u(t,a,s){ua[ma++]=ka,ua[ma++]=Sa,ua[ma++]=ns,ns=t;var l=ka;t=Sa;var c=32-Mt(l)-1;l&=~(1<<c),s+=1;var d=32-Mt(a)+c;if(30<d){var v=c-c%5;d=(l&(1<<v)-1).toString(32),l>>=v,c-=v,ka=1<<32-Mt(a)+c|s<<c|l,Sa=d+t}else ka=1<<d|s<<c|l,Sa=t}function wc(t){t.return!==null&&(Ua(t,1),$u(t,1,0))}function kc(t){for(;t===wr;)wr=pl[--fl],pl[fl]=null,dn=pl[--fl],pl[fl]=null;for(;t===ns;)ns=ua[--ma],ua[ma]=null,Sa=ua[--ma],ua[ma]=null,ka=ua[--ma],ua[ma]=null}function Yu(t,a){ua[ma++]=ka,ua[ma++]=Sa,ua[ma++]=ns,ka=a.id,Sa=a.overflow,ns=t}var St=null,nt=null,Ge=!1,rs=null,ha=!1,Sc=Error(i(519));function is(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw un(da(a,t)),Sc}function Pu(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[kt]=t,a[Ht]=l,s){case"dialog":qe("cancel",a),qe("close",a);break;case"iframe":case"object":case"embed":qe("load",a);break;case"video":case"audio":for(s=0;s<Mn.length;s++)qe(Mn[s],a);break;case"source":qe("error",a);break;case"img":case"image":case"link":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"input":qe("invalid",a),lu(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":qe("invalid",a);break;case"textarea":qe("invalid",a),ru(a,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||cx(a.textContent,s)?(l.popover!=null&&(qe("beforetoggle",a),qe("toggle",a)),l.onScroll!=null&&qe("scroll",a),l.onScrollEnd!=null&&qe("scrollend",a),l.onClick!=null&&(a.onclick=za),a=!0):a=!1,a||is(t,!0)}function Qu(t){for(St=t.return;St;)switch(St.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:St=St.return}}function gl(t){if(t!==St)return!1;if(!Ge)return Qu(t),Ge=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Yo(t.type,t.memoizedProps)),s=!s),s&&nt&&is(t),Qu(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));nt=gx(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));nt=gx(t)}else a===27?(a=nt,js(t.type)?(t=Zo,Zo=null,nt=t):nt=a):nt=St?pa(t.stateNode.nextSibling):null;return!0}function Us(){nt=St=null,Ge=!1}function _c(){var t=rs;return t!==null&&(Pt===null?Pt=t:Pt.push.apply(Pt,t),rs=null),t}function un(t){rs===null?rs=[t]:rs.push(t)}var Cc=E(null),qs=null,qa=null;function cs(t,a,s){B(Cc,a._currentValue),a._currentValue=s}function Ba(t){t._currentValue=Cc.current,j(Cc)}function Ec(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function Ac(t,a,s,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var d=c.dependencies;if(d!==null){var v=c.child;d=d.firstContext;e:for(;d!==null;){var C=d;d=c;for(var z=0;z<a.length;z++)if(C.context===a[z]){d.lanes|=s,C=d.alternate,C!==null&&(C.lanes|=s),Ec(d.return,s,t),l||(v=null);break e}d=C.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(i(341));v.lanes|=s,d=v.alternate,d!==null&&(d.lanes|=s),Ec(v,s,t),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===t){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function bl(t,a,s,l){t=null;for(var c=a,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var C=c.type;Kt(c.pendingProps.value,v.value)||(t!==null?t.push(C):t=[C])}}else if(c===be.current){if(v=c.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(qn):t=[qn])}c=c.return}t!==null&&Ac(a,t,s,l),a.flags|=262144}function kr(t){for(t=t.firstContext;t!==null;){if(!Kt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Bs(t){qs=t,qa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function _t(t){return Vu(qs,t)}function Sr(t,a){return qs===null&&Bs(t),Vu(t,a)}function Vu(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},qa===null){if(t===null)throw Error(i(308));qa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else qa=qa.next=a;return s}var Tf=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},Df=n.unstable_scheduleCallback,Rf=n.unstable_NormalPriority,pt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tc(){return{controller:new Tf,data:new Map,refCount:0}}function mn(t){t.refCount--,t.refCount===0&&Df(Rf,function(){t.controller.abort()})}var hn=null,Dc=0,yl=0,vl=null;function Mf(t,a){if(hn===null){var s=hn=[];Dc=0,yl=Oo(),vl={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Dc++,a.then(Xu,Xu),a}function Xu(){if(--Dc===0&&hn!==null){vl!==null&&(vl.status="fulfilled");var t=hn;hn=null,yl=0,vl=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function zf(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var c=0;c<s.length;c++)(0,s[c])(a)},function(c){for(l.status="rejected",l.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),l}var Zu=R.S;R.S=function(t,a){Rh=Dt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Mf(t,a),Zu!==null&&Zu(t,a)};var Hs=E(null);function Rc(){var t=Hs.current;return t!==null?t:st.pooledCache}function _r(t,a){a===null?B(Hs,Hs.current):B(Hs,a.pool)}function Iu(){var t=Rc();return t===null?null:{parent:pt._currentValue,pool:t}}var jl=Error(i(460)),Mc=Error(i(474)),Cr=Error(i(542)),Er={then:function(){}};function Ku(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ju(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(za,za),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,em(t),t;default:if(typeof a.status=="string")a.then(za,za);else{if(t=st,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var c=a;c.status="fulfilled",c.value=l}},function(l){if(a.status==="pending"){var c=a;c.status="rejected",c.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,em(t),t}throw Fs=a,jl}}function Gs(t){try{var a=t._init;return a(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Fs=s,jl):s}}var Fs=null;function Wu(){if(Fs===null)throw Error(i(459));var t=Fs;return Fs=null,t}function em(t){if(t===jl||t===Cr)throw Error(i(483))}var Nl=null,xn=0;function Ar(t){var a=xn;return xn+=1,Nl===null&&(Nl=[]),Ju(Nl,t,a)}function pn(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Tr(t,a){throw a.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function tm(t){function a(Y,G){if(t){var X=Y.deletions;X===null?(Y.deletions=[G],Y.flags|=16):X.push(G)}}function s(Y,G){if(!t)return null;for(;G!==null;)a(Y,G),G=G.sibling;return null}function l(Y){for(var G=new Map;Y!==null;)Y.key!==null?G.set(Y.key,Y):G.set(Y.index,Y),Y=Y.sibling;return G}function c(Y,G){return Y=La(Y,G),Y.index=0,Y.sibling=null,Y}function d(Y,G,X){return Y.index=X,t?(X=Y.alternate,X!==null?(X=X.index,X<G?(Y.flags|=67108866,G):X):(Y.flags|=67108866,G)):(Y.flags|=1048576,G)}function v(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function C(Y,G,X,ue){return G===null||G.tag!==6?(G=jc(X,Y.mode,ue),G.return=Y,G):(G=c(G,X),G.return=Y,G)}function z(Y,G,X,ue){var _e=X.type;return _e===S?oe(Y,G,X.props.children,ue,X.key):G!==null&&(G.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===O&&Gs(_e)===G.type)?(G=c(G,X.props),pn(G,X),G.return=Y,G):(G=Nr(X.type,X.key,X.props,null,Y.mode,ue),pn(G,X),G.return=Y,G)}function K(Y,G,X,ue){return G===null||G.tag!==4||G.stateNode.containerInfo!==X.containerInfo||G.stateNode.implementation!==X.implementation?(G=Nc(X,Y.mode,ue),G.return=Y,G):(G=c(G,X.children||[]),G.return=Y,G)}function oe(Y,G,X,ue,_e){return G===null||G.tag!==7?(G=Ls(X,Y.mode,ue,_e),G.return=Y,G):(G=c(G,X),G.return=Y,G)}function he(Y,G,X){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=jc(""+G,Y.mode,X),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _:return X=Nr(G.type,G.key,G.props,null,Y.mode,X),pn(X,G),X.return=Y,X;case k:return G=Nc(G,Y.mode,X),G.return=Y,G;case O:return G=Gs(G),he(Y,G,X)}if(me(G)||U(G))return G=Ls(G,Y.mode,X,null),G.return=Y,G;if(typeof G.then=="function")return he(Y,Ar(G),X);if(G.$$typeof===q)return he(Y,Sr(Y,G),X);Tr(Y,G)}return null}function J(Y,G,X,ue){var _e=G!==null?G.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return _e!==null?null:C(Y,G,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case _:return X.key===_e?z(Y,G,X,ue):null;case k:return X.key===_e?K(Y,G,X,ue):null;case O:return X=Gs(X),J(Y,G,X,ue)}if(me(X)||U(X))return _e!==null?null:oe(Y,G,X,ue,null);if(typeof X.then=="function")return J(Y,G,Ar(X),ue);if(X.$$typeof===q)return J(Y,G,Sr(Y,X),ue);Tr(Y,X)}return null}function ne(Y,G,X,ue,_e){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(X)||null,C(G,Y,""+ue,_e);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case _:return Y=Y.get(ue.key===null?X:ue.key)||null,z(G,Y,ue,_e);case k:return Y=Y.get(ue.key===null?X:ue.key)||null,K(G,Y,ue,_e);case O:return ue=Gs(ue),ne(Y,G,X,ue,_e)}if(me(ue)||U(ue))return Y=Y.get(X)||null,oe(G,Y,ue,_e,null);if(typeof ue.then=="function")return ne(Y,G,X,Ar(ue),_e);if(ue.$$typeof===q)return ne(Y,G,X,Sr(G,ue),_e);Tr(G,ue)}return null}function Ne(Y,G,X,ue){for(var _e=null,Ye=null,we=G,Oe=G=0,He=null;we!==null&&Oe<X.length;Oe++){we.index>Oe?(He=we,we=null):He=we.sibling;var Pe=J(Y,we,X[Oe],ue);if(Pe===null){we===null&&(we=He);break}t&&we&&Pe.alternate===null&&a(Y,we),G=d(Pe,G,Oe),Ye===null?_e=Pe:Ye.sibling=Pe,Ye=Pe,we=He}if(Oe===X.length)return s(Y,we),Ge&&Ua(Y,Oe),_e;if(we===null){for(;Oe<X.length;Oe++)we=he(Y,X[Oe],ue),we!==null&&(G=d(we,G,Oe),Ye===null?_e=we:Ye.sibling=we,Ye=we);return Ge&&Ua(Y,Oe),_e}for(we=l(we);Oe<X.length;Oe++)He=ne(we,Y,Oe,X[Oe],ue),He!==null&&(t&&He.alternate!==null&&we.delete(He.key===null?Oe:He.key),G=d(He,G,Oe),Ye===null?_e=He:Ye.sibling=He,Ye=He);return t&&we.forEach(function(_s){return a(Y,_s)}),Ge&&Ua(Y,Oe),_e}function Ce(Y,G,X,ue){if(X==null)throw Error(i(151));for(var _e=null,Ye=null,we=G,Oe=G=0,He=null,Pe=X.next();we!==null&&!Pe.done;Oe++,Pe=X.next()){we.index>Oe?(He=we,we=null):He=we.sibling;var _s=J(Y,we,Pe.value,ue);if(_s===null){we===null&&(we=He);break}t&&we&&_s.alternate===null&&a(Y,we),G=d(_s,G,Oe),Ye===null?_e=_s:Ye.sibling=_s,Ye=_s,we=He}if(Pe.done)return s(Y,we),Ge&&Ua(Y,Oe),_e;if(we===null){for(;!Pe.done;Oe++,Pe=X.next())Pe=he(Y,Pe.value,ue),Pe!==null&&(G=d(Pe,G,Oe),Ye===null?_e=Pe:Ye.sibling=Pe,Ye=Pe);return Ge&&Ua(Y,Oe),_e}for(we=l(we);!Pe.done;Oe++,Pe=X.next())Pe=ne(we,Y,Oe,Pe.value,ue),Pe!==null&&(t&&Pe.alternate!==null&&we.delete(Pe.key===null?Oe:Pe.key),G=d(Pe,G,Oe),Ye===null?_e=Pe:Ye.sibling=Pe,Ye=Pe);return t&&we.forEach(function(Pg){return a(Y,Pg)}),Ge&&Ua(Y,Oe),_e}function at(Y,G,X,ue){if(typeof X=="object"&&X!==null&&X.type===S&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case _:e:{for(var _e=X.key;G!==null;){if(G.key===_e){if(_e=X.type,_e===S){if(G.tag===7){s(Y,G.sibling),ue=c(G,X.props.children),ue.return=Y,Y=ue;break e}}else if(G.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===O&&Gs(_e)===G.type){s(Y,G.sibling),ue=c(G,X.props),pn(ue,X),ue.return=Y,Y=ue;break e}s(Y,G);break}else a(Y,G);G=G.sibling}X.type===S?(ue=Ls(X.props.children,Y.mode,ue,X.key),ue.return=Y,Y=ue):(ue=Nr(X.type,X.key,X.props,null,Y.mode,ue),pn(ue,X),ue.return=Y,Y=ue)}return v(Y);case k:e:{for(_e=X.key;G!==null;){if(G.key===_e)if(G.tag===4&&G.stateNode.containerInfo===X.containerInfo&&G.stateNode.implementation===X.implementation){s(Y,G.sibling),ue=c(G,X.children||[]),ue.return=Y,Y=ue;break e}else{s(Y,G);break}else a(Y,G);G=G.sibling}ue=Nc(X,Y.mode,ue),ue.return=Y,Y=ue}return v(Y);case O:return X=Gs(X),at(Y,G,X,ue)}if(me(X))return Ne(Y,G,X,ue);if(U(X)){if(_e=U(X),typeof _e!="function")throw Error(i(150));return X=_e.call(X),Ce(Y,G,X,ue)}if(typeof X.then=="function")return at(Y,G,Ar(X),ue);if(X.$$typeof===q)return at(Y,G,Sr(Y,X),ue);Tr(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,G!==null&&G.tag===6?(s(Y,G.sibling),ue=c(G,X),ue.return=Y,Y=ue):(s(Y,G),ue=jc(X,Y.mode,ue),ue.return=Y,Y=ue),v(Y)):s(Y,G)}return function(Y,G,X,ue){try{xn=0;var _e=at(Y,G,X,ue);return Nl=null,_e}catch(we){if(we===jl||we===Cr)throw we;var Ye=Jt(29,we,null,Y.mode);return Ye.lanes=ue,Ye.return=Y,Ye}}}var $s=tm(!0),am=tm(!1),os=!1;function zc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oc(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ds(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function us(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var c=l.pending;return c===null?a.next=a:(a.next=c.next,c.next=a),l.pending=a,a=jr(t),Bu(t,null,s),a}return vr(t,l,a,s),jr(t)}function fn(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,Vd(t,s)}}function Lc(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var v={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?c=d=v:d=d.next=v,s=s.next}while(s!==null);d===null?c=d=a:d=d.next=a}else c=d=a;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var Uc=!1;function gn(){if(Uc){var t=vl;if(t!==null)throw t}}function bn(t,a,s,l){Uc=!1;var c=t.updateQueue;os=!1;var d=c.firstBaseUpdate,v=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var z=C,K=z.next;z.next=null,v===null?d=K:v.next=K,v=z;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,C=oe.lastBaseUpdate,C!==v&&(C===null?oe.firstBaseUpdate=K:C.next=K,oe.lastBaseUpdate=z))}if(d!==null){var he=c.baseState;v=0,oe=K=z=null,C=d;do{var J=C.lane&-536870913,ne=J!==C.lane;if(ne?(Be&J)===J:(l&J)===J){J!==0&&J===yl&&(Uc=!0),oe!==null&&(oe=oe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ne=t,Ce=C;J=a;var at=s;switch(Ce.tag){case 1:if(Ne=Ce.payload,typeof Ne=="function"){he=Ne.call(at,he,J);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ce.payload,J=typeof Ne=="function"?Ne.call(at,he,J):Ne,J==null)break e;he=f({},he,J);break e;case 2:os=!0}}J=C.callback,J!==null&&(t.flags|=64,ne&&(t.flags|=8192),ne=c.callbacks,ne===null?c.callbacks=[J]:ne.push(J))}else ne={lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},oe===null?(K=oe=ne,z=he):oe=oe.next=ne,v|=J;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;ne=C,C=ne.next,ne.next=null,c.lastBaseUpdate=ne,c.shared.pending=null}}while(!0);oe===null&&(z=he),c.baseState=z,c.firstBaseUpdate=K,c.lastBaseUpdate=oe,d===null&&(c.shared.lanes=0),fs|=v,t.lanes=v,t.memoizedState=he}}function sm(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function lm(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)sm(s[t],a)}var wl=E(null),Dr=E(0);function nm(t,a){t=Xa,B(Dr,t),B(wl,a),Xa=t|a.baseLanes}function qc(){B(Dr,Xa),B(wl,wl.current)}function Bc(){Xa=Dr.current,j(wl),j(Dr)}var Wt=E(null),xa=null;function ms(t){var a=t.alternate;B(ht,ht.current&1),B(Wt,t),xa===null&&(a===null||wl.current!==null||a.memoizedState!==null)&&(xa=t)}function Hc(t){B(ht,ht.current),B(Wt,t),xa===null&&(xa=t)}function rm(t){t.tag===22?(B(ht,ht.current),B(Wt,t),xa===null&&(xa=t)):hs()}function hs(){B(ht,ht.current),B(Wt,Wt.current)}function ea(t){j(Wt),xa===t&&(xa=null),j(ht)}var ht=E(0);function Rr(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Vo(s)||Xo(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ha=0,Re=null,et=null,ft=null,Mr=!1,kl=!1,Ys=!1,zr=0,yn=0,Sl=null,Of=0;function ot(){throw Error(i(321))}function Gc(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!Kt(t[s],a[s]))return!1;return!0}function Fc(t,a,s,l,c,d){return Ha=d,Re=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=t===null||t.memoizedState===null?$m:so,Ys=!1,d=s(l,c),Ys=!1,kl&&(d=cm(a,s,l,c)),im(t),d}function im(t){R.H=Nn;var a=et!==null&&et.next!==null;if(Ha=0,ft=et=Re=null,Mr=!1,yn=0,Sl=null,a)throw Error(i(300));t===null||gt||(t=t.dependencies,t!==null&&kr(t)&&(gt=!0))}function cm(t,a,s,l){Re=t;var c=0;do{if(kl&&(Sl=null),yn=0,kl=!1,25<=c)throw Error(i(301));if(c+=1,ft=et=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}R.H=Ym,d=a(s,l)}while(kl);return d}function Lf(){var t=R.H,a=t.useState()[0];return a=typeof a.then=="function"?vn(a):a,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(Re.flags|=1024),a}function $c(){var t=zr!==0;return zr=0,t}function Yc(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Pc(t){if(Mr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Mr=!1}Ha=0,ft=et=Re=null,kl=!1,yn=zr=0,Sl=null}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Re.memoizedState=ft=t:ft=ft.next=t,ft}function xt(){if(et===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var a=ft===null?Re.memoizedState:ft.next;if(a!==null)ft=a,et=t;else{if(t===null)throw Re.alternate===null?Error(i(467)):Error(i(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},ft===null?Re.memoizedState=ft=t:ft=ft.next=t}return ft}function Or(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vn(t){var a=yn;return yn+=1,Sl===null&&(Sl=[]),t=Ju(Sl,t,a),a=Re,(ft===null?a.memoizedState:ft.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?$m:so),t}function Lr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vn(t);if(t.$$typeof===q)return _t(t)}throw Error(i(438,String(t)))}function Qc(t){var a=null,s=Re.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(c){return c.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Or(),Re.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=H;return a.index++,s}function Ga(t,a){return typeof a=="function"?a(t):a}function Ur(t){var a=xt();return Vc(a,et,t)}function Vc(t,a,s){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=t.baseQueue,d=l.pending;if(d!==null){if(c!==null){var v=c.next;c.next=d.next,d.next=v}a.baseQueue=c=d,l.pending=null}if(d=t.baseState,c===null)t.memoizedState=d;else{a=c.next;var C=v=null,z=null,K=a,oe=!1;do{var he=K.lane&-536870913;if(he!==K.lane?(Be&he)===he:(Ha&he)===he){var J=K.revertLane;if(J===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),he===yl&&(oe=!0);else if((Ha&J)===J){K=K.next,J===yl&&(oe=!0);continue}else he={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(C=z=he,v=d):z=z.next=he,Re.lanes|=J,fs|=J;he=K.action,Ys&&s(d,he),d=K.hasEagerState?K.eagerState:s(d,he)}else J={lane:he,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(C=z=J,v=d):z=z.next=J,Re.lanes|=he,fs|=he;K=K.next}while(K!==null&&K!==a);if(z===null?v=d:z.next=C,!Kt(d,t.memoizedState)&&(gt=!0,oe&&(s=vl,s!==null)))throw s;t.memoizedState=d,t.baseState=v,t.baseQueue=z,l.lastRenderedState=d}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Xc(t){var a=xt(),s=a.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var l=s.dispatch,c=s.pending,d=a.memoizedState;if(c!==null){s.pending=null;var v=c=c.next;do d=t(d,v.action),v=v.next;while(v!==c);Kt(d,a.memoizedState)||(gt=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),s.lastRenderedState=d}return[d,l]}function om(t,a,s){var l=Re,c=xt(),d=Ge;if(d){if(s===void 0)throw Error(i(407));s=s()}else s=a();var v=!Kt((et||c).memoizedState,s);if(v&&(c.memoizedState=s,gt=!0),c=c.queue,Kc(mm.bind(null,l,c,t),[t]),c.getSnapshot!==a||v||ft!==null&&ft.memoizedState.tag&1){if(l.flags|=2048,_l(9,{destroy:void 0},um.bind(null,l,c,s,a),null),st===null)throw Error(i(349));d||(Ha&127)!==0||dm(l,a,s)}return s}function dm(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=Re.updateQueue,a===null?(a=Or(),Re.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function um(t,a,s,l){a.value=s,a.getSnapshot=l,hm(a)&&xm(t)}function mm(t,a,s){return s(function(){hm(a)&&xm(t)})}function hm(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!Kt(t,s)}catch{return!0}}function xm(t){var a=Os(t,2);a!==null&&Qt(a,t,2)}function Zc(t){var a=qt();if(typeof t=="function"){var s=t;if(t=s(),Ys){Rt(!0);try{s()}finally{Rt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},a}function pm(t,a,s,l){return t.baseState=s,Vc(t,et,typeof l=="function"?l:Ga)}function Uf(t,a,s,l,c){if(Hr(t))throw Error(i(485));if(t=a.action,t!==null){var d={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};R.T!==null?s(!0):d.isTransition=!1,l(d),s=a.pending,s===null?(d.next=a.pending=d,fm(a,d)):(d.next=s.next,a.pending=s.next=d)}}function fm(t,a){var s=a.action,l=a.payload,c=t.state;if(a.isTransition){var d=R.T,v={};R.T=v;try{var C=s(c,l),z=R.S;z!==null&&z(v,C),gm(t,a,C)}catch(K){Ic(t,a,K)}finally{d!==null&&v.types!==null&&(d.types=v.types),R.T=d}}else try{d=s(c,l),gm(t,a,d)}catch(K){Ic(t,a,K)}}function gm(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){bm(t,a,l)},function(l){return Ic(t,a,l)}):bm(t,a,s)}function bm(t,a,s){a.status="fulfilled",a.value=s,ym(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,fm(t,s)))}function Ic(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,ym(a),a=a.next;while(a!==l)}t.action=null}function ym(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function vm(t,a){return a}function jm(t,a){if(Ge){var s=st.formState;if(s!==null){e:{var l=Re;if(Ge){if(nt){t:{for(var c=nt,d=ha;c.nodeType!==8;){if(!d){c=null;break t}if(c=pa(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){nt=pa(c.nextSibling),l=c.data==="F!";break e}}is(l)}l=!1}l&&(a=s[0])}}return s=qt(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vm,lastRenderedState:a},s.queue=l,s=Hm.bind(null,Re,l),l.dispatch=s,l=Zc(!1),d=ao.bind(null,Re,!1,l.queue),l=qt(),c={state:a,dispatch:null,action:t,pending:null},l.queue=c,s=Uf.bind(null,Re,c,d,s),c.dispatch=s,l.memoizedState=t,[a,s,!1]}function Nm(t){var a=xt();return wm(a,et,t)}function wm(t,a,s){if(a=Vc(t,a,vm)[0],t=Ur(Ga)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=vn(a)}catch(v){throw v===jl?Cr:v}else l=a;a=xt();var c=a.queue,d=c.dispatch;return s!==a.memoizedState&&(Re.flags|=2048,_l(9,{destroy:void 0},qf.bind(null,c,s),null)),[l,d,t]}function qf(t,a){t.action=a}function km(t){var a=xt(),s=et;if(s!==null)return wm(a,s,t);xt(),a=a.memoizedState,s=xt();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function _l(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=Re.updateQueue,a===null&&(a=Or(),Re.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function Sm(){return xt().memoizedState}function qr(t,a,s,l){var c=qt();Re.flags|=t,c.memoizedState=_l(1|a,{destroy:void 0},s,l===void 0?null:l)}function Br(t,a,s,l){var c=xt();l=l===void 0?null:l;var d=c.memoizedState.inst;et!==null&&l!==null&&Gc(l,et.memoizedState.deps)?c.memoizedState=_l(a,d,s,l):(Re.flags|=t,c.memoizedState=_l(1|a,d,s,l))}function _m(t,a){qr(8390656,8,t,a)}function Kc(t,a){Br(2048,8,t,a)}function Bf(t){Re.flags|=4;var a=Re.updateQueue;if(a===null)a=Or(),Re.updateQueue=a,a.events=[t];else{var s=a.events;s===null?a.events=[t]:s.push(t)}}function Cm(t){var a=xt().memoizedState;return Bf({ref:a,nextImpl:t}),function(){if((Qe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Em(t,a){return Br(4,2,t,a)}function Am(t,a){return Br(4,4,t,a)}function Tm(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Dm(t,a,s){s=s!=null?s.concat([t]):null,Br(4,4,Tm.bind(null,a,t),s)}function Jc(){}function Rm(t,a){var s=xt();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&Gc(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function Mm(t,a){var s=xt();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&Gc(a,l[1]))return l[0];if(l=t(),Ys){Rt(!0);try{t()}finally{Rt(!1)}}return s.memoizedState=[l,a],l}function Wc(t,a,s){return s===void 0||(Ha&1073741824)!==0&&(Be&261930)===0?t.memoizedState=a:(t.memoizedState=s,t=zh(),Re.lanes|=t,fs|=t,s)}function zm(t,a,s,l){return Kt(s,a)?s:wl.current!==null?(t=Wc(t,s,l),Kt(t,a)||(gt=!0),t):(Ha&42)===0||(Ha&1073741824)!==0&&(Be&261930)===0?(gt=!0,t.memoizedState=s):(t=zh(),Re.lanes|=t,fs|=t,a)}function Om(t,a,s,l,c){var d=ee.p;ee.p=d!==0&&8>d?d:8;var v=R.T,C={};R.T=C,ao(t,!1,a,s);try{var z=c(),K=R.S;if(K!==null&&K(C,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var oe=zf(z,l);jn(t,a,oe,sa(t))}else jn(t,a,l,sa(t))}catch(he){jn(t,a,{then:function(){},status:"rejected",reason:he},sa())}finally{ee.p=d,v!==null&&C.types!==null&&(v.types=C.types),R.T=v}}function Hf(){}function eo(t,a,s,l){if(t.tag!==5)throw Error(i(476));var c=Lm(t).queue;Om(t,c,a,I,s===null?Hf:function(){return Um(t),s(l)})}function Lm(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:I},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Um(t){var a=Lm(t);a.next===null&&(a=t.alternate.memoizedState),jn(t,a.next.queue,{},sa())}function to(){return _t(qn)}function qm(){return xt().memoizedState}function Bm(){return xt().memoizedState}function Gf(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=sa();t=ds(s);var l=us(a,t,s);l!==null&&(Qt(l,a,s),fn(l,a,s)),a={cache:Tc()},t.payload=a;return}a=a.return}}function Ff(t,a,s){var l=sa();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Hr(t)?Gm(a,s):(s=yc(t,a,s,l),s!==null&&(Qt(s,t,l),Fm(s,a,l)))}function Hm(t,a,s){var l=sa();jn(t,a,s,l)}function jn(t,a,s,l){var c={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hr(t))Gm(a,c);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var v=a.lastRenderedState,C=d(v,s);if(c.hasEagerState=!0,c.eagerState=C,Kt(C,v))return vr(t,a,c,0),st===null&&yr(),!1}catch{}if(s=yc(t,a,c,l),s!==null)return Qt(s,t,l),Fm(s,a,l),!0}return!1}function ao(t,a,s,l){if(l={lane:2,revertLane:Oo(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Hr(t)){if(a)throw Error(i(479))}else a=yc(t,s,l,2),a!==null&&Qt(a,t,2)}function Hr(t){var a=t.alternate;return t===Re||a!==null&&a===Re}function Gm(t,a){kl=Mr=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function Fm(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,Vd(t,s)}}var Nn={readContext:_t,use:Lr,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};Nn.useEffectEvent=ot;var $m={readContext:_t,use:Lr,useCallback:function(t,a){return qt().memoizedState=[t,a===void 0?null:a],t},useContext:_t,useEffect:_m,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,qr(4194308,4,Tm.bind(null,a,t),s)},useLayoutEffect:function(t,a){return qr(4194308,4,t,a)},useInsertionEffect:function(t,a){qr(4,2,t,a)},useMemo:function(t,a){var s=qt();a=a===void 0?null:a;var l=t();if(Ys){Rt(!0);try{t()}finally{Rt(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=qt();if(s!==void 0){var c=s(a);if(Ys){Rt(!0);try{s(a)}finally{Rt(!1)}}}else c=a;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=Ff.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var a=qt();return t={current:t},a.memoizedState=t},useState:function(t){t=Zc(t);var a=t.queue,s=Hm.bind(null,Re,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Jc,useDeferredValue:function(t,a){var s=qt();return Wc(s,t,a)},useTransition:function(){var t=Zc(!1);return t=Om.bind(null,Re,t.queue,!0,!1),qt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=Re,c=qt();if(Ge){if(s===void 0)throw Error(i(407));s=s()}else{if(s=a(),st===null)throw Error(i(349));(Be&127)!==0||dm(l,a,s)}c.memoizedState=s;var d={value:s,getSnapshot:a};return c.queue=d,_m(mm.bind(null,l,d,t),[t]),l.flags|=2048,_l(9,{destroy:void 0},um.bind(null,l,d,s,a),null),s},useId:function(){var t=qt(),a=st.identifierPrefix;if(Ge){var s=Sa,l=ka;s=(l&~(1<<32-Mt(l)-1)).toString(32)+s,a="_"+a+"R_"+s,s=zr++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=Of++,a="_"+a+"r_"+s.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:to,useFormState:jm,useActionState:jm,useOptimistic:function(t){var a=qt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=ao.bind(null,Re,!0,s),s.dispatch=a,[t,a]},useMemoCache:Qc,useCacheRefresh:function(){return qt().memoizedState=Gf.bind(null,Re)},useEffectEvent:function(t){var a=qt(),s={impl:t};return a.memoizedState=s,function(){if((Qe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},so={readContext:_t,use:Lr,useCallback:Rm,useContext:_t,useEffect:Kc,useImperativeHandle:Dm,useInsertionEffect:Em,useLayoutEffect:Am,useMemo:Mm,useReducer:Ur,useRef:Sm,useState:function(){return Ur(Ga)},useDebugValue:Jc,useDeferredValue:function(t,a){var s=xt();return zm(s,et.memoizedState,t,a)},useTransition:function(){var t=Ur(Ga)[0],a=xt().memoizedState;return[typeof t=="boolean"?t:vn(t),a]},useSyncExternalStore:om,useId:qm,useHostTransitionStatus:to,useFormState:Nm,useActionState:Nm,useOptimistic:function(t,a){var s=xt();return pm(s,et,t,a)},useMemoCache:Qc,useCacheRefresh:Bm};so.useEffectEvent=Cm;var Ym={readContext:_t,use:Lr,useCallback:Rm,useContext:_t,useEffect:Kc,useImperativeHandle:Dm,useInsertionEffect:Em,useLayoutEffect:Am,useMemo:Mm,useReducer:Xc,useRef:Sm,useState:function(){return Xc(Ga)},useDebugValue:Jc,useDeferredValue:function(t,a){var s=xt();return et===null?Wc(s,t,a):zm(s,et.memoizedState,t,a)},useTransition:function(){var t=Xc(Ga)[0],a=xt().memoizedState;return[typeof t=="boolean"?t:vn(t),a]},useSyncExternalStore:om,useId:qm,useHostTransitionStatus:to,useFormState:km,useActionState:km,useOptimistic:function(t,a){var s=xt();return et!==null?pm(s,et,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Qc,useCacheRefresh:Bm};Ym.useEffectEvent=Cm;function lo(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:f({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var no={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=sa(),c=ds(l);c.payload=a,s!=null&&(c.callback=s),a=us(t,c,l),a!==null&&(Qt(a,t,l),fn(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=sa(),c=ds(l);c.tag=1,c.payload=a,s!=null&&(c.callback=s),a=us(t,c,l),a!==null&&(Qt(a,t,l),fn(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=sa(),l=ds(s);l.tag=2,a!=null&&(l.callback=a),a=us(t,l,s),a!==null&&(Qt(a,t,s),fn(a,t,s))}};function Pm(t,a,s,l,c,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):a.prototype&&a.prototype.isPureReactComponent?!cn(s,l)||!cn(c,d):!0}function Qm(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&no.enqueueReplaceState(a,a.state,null)}function Ps(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=f({},s));for(var c in t)s[c]===void 0&&(s[c]=t[c])}return s}function Vm(t){br(t)}function Xm(t){console.error(t)}function Zm(t){br(t)}function Gr(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Im(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function ro(t,a,s){return s=ds(s),s.tag=3,s.payload={element:null},s.callback=function(){Gr(t,a)},s}function Km(t){return t=ds(t),t.tag=3,t}function Jm(t,a,s,l){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var d=l.value;t.payload=function(){return c(d)},t.callback=function(){Im(a,s,l)}}var v=s.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Im(a,s,l),typeof c!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function $f(t,a,s,l,c){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&bl(a,s,c,!0),s=Wt.current,s!==null){switch(s.tag){case 31:case 13:return xa===null?Wr():s.alternate===null&&dt===0&&(dt=3),s.flags&=-257,s.flags|=65536,s.lanes=c,l===Er?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),Ro(t,l,c)),!1;case 22:return s.flags|=65536,l===Er?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),Ro(t,l,c)),!1}throw Error(i(435,s.tag))}return Ro(t,l,c),Wr(),!1}if(Ge)return a=Wt.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=c,l!==Sc&&(t=Error(i(422),{cause:l}),un(da(t,s)))):(l!==Sc&&(a=Error(i(423),{cause:l}),un(da(a,s))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=da(l,s),c=ro(t.stateNode,l,c),Lc(t,c),dt!==4&&(dt=2)),!1;var d=Error(i(520),{cause:l});if(d=da(d,s),Tn===null?Tn=[d]:Tn.push(d),dt!==4&&(dt=2),a===null)return!0;l=da(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=c&-c,s.lanes|=t,t=ro(s.stateNode,l,t),Lc(s,t),!1;case 1:if(a=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(gs===null||!gs.has(d))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Km(c),Jm(c,t,s,l),Lc(s,c),!1}s=s.return}while(s!==null);return!1}var io=Error(i(461)),gt=!1;function Ct(t,a,s,l){a.child=t===null?am(a,null,s,l):$s(a,t.child,s,l)}function Wm(t,a,s,l,c){s=s.render;var d=a.ref;if("ref"in l){var v={};for(var C in l)C!=="ref"&&(v[C]=l[C])}else v=l;return Bs(a),l=Fc(t,a,s,v,d,c),C=$c(),t!==null&&!gt?(Yc(t,a,c),Fa(t,a,c)):(Ge&&C&&wc(a),a.flags|=1,Ct(t,a,l,c),a.child)}function eh(t,a,s,l,c){if(t===null){var d=s.type;return typeof d=="function"&&!vc(d)&&d.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=d,th(t,a,d,l,c)):(t=Nr(s.type,null,l,a,a.mode,c),t.ref=a.ref,t.return=a,a.child=t)}if(d=t.child,!fo(t,c)){var v=d.memoizedProps;if(s=s.compare,s=s!==null?s:cn,s(v,l)&&t.ref===a.ref)return Fa(t,a,c)}return a.flags|=1,t=La(d,l),t.ref=a.ref,t.return=a,a.child=t}function th(t,a,s,l,c){if(t!==null){var d=t.memoizedProps;if(cn(d,l)&&t.ref===a.ref)if(gt=!1,a.pendingProps=l=d,fo(t,c))(t.flags&131072)!==0&&(gt=!0);else return a.lanes=t.lanes,Fa(t,a,c)}return co(t,a,s,l,c)}function ah(t,a,s,l){var c=l.children,d=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,t!==null){for(l=a.child=t.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~d}else l=0,a.child=null;return sh(t,a,d,s,l)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&_r(a,d!==null?d.cachePool:null),d!==null?nm(a,d):qc(),rm(a);else return l=a.lanes=536870912,sh(t,a,d!==null?d.baseLanes|s:s,s,l)}else d!==null?(_r(a,d.cachePool),nm(a,d),hs(),a.memoizedState=null):(t!==null&&_r(a,null),qc(),hs());return Ct(t,a,c,s),a.child}function wn(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function sh(t,a,s,l,c){var d=Rc();return d=d===null?null:{parent:pt._currentValue,pool:d},a.memoizedState={baseLanes:s,cachePool:d},t!==null&&_r(a,null),qc(),rm(a),t!==null&&bl(t,a,l,!0),a.childLanes=c,null}function Fr(t,a){return a=Yr({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function lh(t,a,s){return $s(a,t.child,null,s),t=Fr(a,a.pendingProps),t.flags|=2,ea(a),a.memoizedState=null,t}function Yf(t,a,s){var l=a.pendingProps,c=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ge){if(l.mode==="hidden")return t=Fr(a,l),a.lanes=536870912,wn(null,t);if(Hc(a),(t=nt)?(t=fx(t,ha),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ns!==null?{id:ka,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},s=Gu(t),s.return=a,a.child=s,St=a,nt=null)):t=null,t===null)throw is(a);return a.lanes=536870912,null}return Fr(a,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(Hc(a),c)if(a.flags&256)a.flags&=-257,a=lh(t,a,s);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(gt||bl(t,a,s,!1),c=(s&t.childLanes)!==0,gt||c){if(l=st,l!==null&&(v=Xd(l,s),v!==0&&v!==d.retryLane))throw d.retryLane=v,Os(t,v),Qt(l,t,v),io;Wr(),a=lh(t,a,s)}else t=d.treeContext,nt=pa(v.nextSibling),St=a,Ge=!0,rs=null,ha=!1,t!==null&&Yu(a,t),a=Fr(a,l),a.flags|=4096;return a}return t=La(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function $r(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function co(t,a,s,l,c){return Bs(a),s=Fc(t,a,s,l,void 0,c),l=$c(),t!==null&&!gt?(Yc(t,a,c),Fa(t,a,c)):(Ge&&l&&wc(a),a.flags|=1,Ct(t,a,s,c),a.child)}function nh(t,a,s,l,c,d){return Bs(a),a.updateQueue=null,s=cm(a,l,s,c),im(t),l=$c(),t!==null&&!gt?(Yc(t,a,d),Fa(t,a,d)):(Ge&&l&&wc(a),a.flags|=1,Ct(t,a,s,d),a.child)}function rh(t,a,s,l,c){if(Bs(a),a.stateNode===null){var d=xl,v=s.contextType;typeof v=="object"&&v!==null&&(d=_t(v)),d=new s(l,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=no,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=l,d.state=a.memoizedState,d.refs={},zc(a),v=s.contextType,d.context=typeof v=="object"&&v!==null?_t(v):xl,d.state=a.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(lo(a,s,v,l),d.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&no.enqueueReplaceState(d,d.state,null),bn(a,l,d,c),gn(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){d=a.stateNode;var C=a.memoizedProps,z=Ps(s,C);d.props=z;var K=d.context,oe=s.contextType;v=xl,typeof oe=="object"&&oe!==null&&(v=_t(oe));var he=s.getDerivedStateFromProps;oe=typeof he=="function"||typeof d.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,oe||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(C||K!==v)&&Qm(a,d,l,v),os=!1;var J=a.memoizedState;d.state=J,bn(a,l,d,c),gn(),K=a.memoizedState,C||J!==K||os?(typeof he=="function"&&(lo(a,s,he,l),K=a.memoizedState),(z=os||Pm(a,s,z,l,J,K,v))?(oe||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=K),d.props=l,d.state=K,d.context=v,l=z):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{d=a.stateNode,Oc(t,a),v=a.memoizedProps,oe=Ps(s,v),d.props=oe,he=a.pendingProps,J=d.context,K=s.contextType,z=xl,typeof K=="object"&&K!==null&&(z=_t(K)),C=s.getDerivedStateFromProps,(K=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==he||J!==z)&&Qm(a,d,l,z),os=!1,J=a.memoizedState,d.state=J,bn(a,l,d,c),gn();var ne=a.memoizedState;v!==he||J!==ne||os||t!==null&&t.dependencies!==null&&kr(t.dependencies)?(typeof C=="function"&&(lo(a,s,C,l),ne=a.memoizedState),(oe=os||Pm(a,s,oe,l,J,ne,z)||t!==null&&t.dependencies!==null&&kr(t.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ne,z),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ne,z)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=ne),d.props=l,d.state=ne,d.context=z,l=oe):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),l=!1)}return d=l,$r(t,a),l=(a.flags&128)!==0,d||l?(d=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,t!==null&&l?(a.child=$s(a,t.child,null,c),a.child=$s(a,null,s,c)):Ct(t,a,s,c),a.memoizedState=d.state,t=a.child):t=Fa(t,a,c),t}function ih(t,a,s,l){return Us(),a.flags|=256,Ct(t,a,s,l),a.child}var oo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uo(t){return{baseLanes:t,cachePool:Iu()}}function mo(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=aa),t}function ch(t,a,s){var l=a.pendingProps,c=!1,d=(a.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(ht.current&2)!==0),v&&(c=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ge){if(c?ms(a):hs(),(t=nt)?(t=fx(t,ha),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ns!==null?{id:ka,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},s=Gu(t),s.return=a,a.child=s,St=a,nt=null)):t=null,t===null)throw is(a);return Xo(t)?a.lanes=32:a.lanes=536870912,null}var C=l.children;return l=l.fallback,c?(hs(),c=a.mode,C=Yr({mode:"hidden",children:C},c),l=Ls(l,c,s,null),C.return=a,l.return=a,C.sibling=l,a.child=C,l=a.child,l.memoizedState=uo(s),l.childLanes=mo(t,v,s),a.memoizedState=oo,wn(null,l)):(ms(a),ho(a,C))}var z=t.memoizedState;if(z!==null&&(C=z.dehydrated,C!==null)){if(d)a.flags&256?(ms(a),a.flags&=-257,a=xo(t,a,s)):a.memoizedState!==null?(hs(),a.child=t.child,a.flags|=128,a=null):(hs(),C=l.fallback,c=a.mode,l=Yr({mode:"visible",children:l.children},c),C=Ls(C,c,s,null),C.flags|=2,l.return=a,C.return=a,l.sibling=C,a.child=l,$s(a,t.child,null,s),l=a.child,l.memoizedState=uo(s),l.childLanes=mo(t,v,s),a.memoizedState=oo,a=wn(null,l));else if(ms(a),Xo(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var K=v.dgst;v=K,l=Error(i(419)),l.stack="",l.digest=v,un({value:l,source:null,stack:null}),a=xo(t,a,s)}else if(gt||bl(t,a,s,!1),v=(s&t.childLanes)!==0,gt||v){if(v=st,v!==null&&(l=Xd(v,s),l!==0&&l!==z.retryLane))throw z.retryLane=l,Os(t,l),Qt(v,t,l),io;Vo(C)||Wr(),a=xo(t,a,s)}else Vo(C)?(a.flags|=192,a.child=t.child,a=null):(t=z.treeContext,nt=pa(C.nextSibling),St=a,Ge=!0,rs=null,ha=!1,t!==null&&Yu(a,t),a=ho(a,l.children),a.flags|=4096);return a}return c?(hs(),C=l.fallback,c=a.mode,z=t.child,K=z.sibling,l=La(z,{mode:"hidden",children:l.children}),l.subtreeFlags=z.subtreeFlags&65011712,K!==null?C=La(K,C):(C=Ls(C,c,s,null),C.flags|=2),C.return=a,l.return=a,l.sibling=C,a.child=l,wn(null,l),l=a.child,C=t.child.memoizedState,C===null?C=uo(s):(c=C.cachePool,c!==null?(z=pt._currentValue,c=c.parent!==z?{parent:z,pool:z}:c):c=Iu(),C={baseLanes:C.baseLanes|s,cachePool:c}),l.memoizedState=C,l.childLanes=mo(t,v,s),a.memoizedState=oo,wn(t.child,l)):(ms(a),s=t.child,t=s.sibling,s=La(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=s,a.memoizedState=null,s)}function ho(t,a){return a=Yr({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Yr(t,a){return t=Jt(22,t,null,a),t.lanes=0,t}function xo(t,a,s){return $s(a,t.child,null,s),t=ho(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function oh(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Ec(t.return,a,s)}function po(t,a,s,l,c,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c,treeForkCount:d}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=s,v.tailMode=c,v.treeForkCount=d)}function dh(t,a,s){var l=a.pendingProps,c=l.revealOrder,d=l.tail;l=l.children;var v=ht.current,C=(v&2)!==0;if(C?(v=v&1|2,a.flags|=128):v&=1,B(ht,v),Ct(t,a,l,s),l=Ge?dn:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oh(t,s,a);else if(t.tag===19)oh(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(c){case"forwards":for(s=a.child,c=null;s!==null;)t=s.alternate,t!==null&&Rr(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=a.child,a.child=null):(c=s.sibling,s.sibling=null),po(a,!1,c,s,d,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=a.child,a.child=null;c!==null;){if(t=c.alternate,t!==null&&Rr(t)===null){a.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}po(a,!0,s,null,d,l);break;case"together":po(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Fa(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),fs|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(bl(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,s=La(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=La(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function fo(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&kr(t)))}function Pf(t,a,s){switch(a.tag){case 3:Le(a,a.stateNode.containerInfo),cs(a,pt,t.memoizedState.cache),Us();break;case 27:case 5:ce(a);break;case 4:Le(a,a.stateNode.containerInfo);break;case 10:cs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Hc(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ms(a),a.flags|=128,null):(s&a.child.childLanes)!==0?ch(t,a,s):(ms(a),t=Fa(t,a,s),t!==null?t.sibling:null);ms(a);break;case 19:var c=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(bl(t,a,s,!1),l=(s&a.childLanes)!==0),c){if(l)return dh(t,a,s);a.flags|=128}if(c=a.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),B(ht,ht.current),l)break;return null;case 22:return a.lanes=0,ah(t,a,s,a.pendingProps);case 24:cs(a,pt,t.memoizedState.cache)}return Fa(t,a,s)}function uh(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)gt=!0;else{if(!fo(t,s)&&(a.flags&128)===0)return gt=!1,Pf(t,a,s);gt=(t.flags&131072)!==0}else gt=!1,Ge&&(a.flags&1048576)!==0&&$u(a,dn,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=Gs(a.elementType),a.type=t,typeof t=="function")vc(t)?(l=Ps(t,l),a.tag=1,a=rh(null,a,t,l,s)):(a.tag=0,a=co(null,a,t,l,s));else{if(t!=null){var c=t.$$typeof;if(c===D){a.tag=11,a=Wm(null,a,t,l,s);break e}else if(c===Q){a.tag=14,a=eh(null,a,t,l,s);break e}}throw a=te(t)||t,Error(i(306,a,""))}}return a;case 0:return co(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,c=Ps(l,a.pendingProps),rh(t,a,l,c,s);case 3:e:{if(Le(a,a.stateNode.containerInfo),t===null)throw Error(i(387));l=a.pendingProps;var d=a.memoizedState;c=d.element,Oc(t,a),bn(a,l,null,s);var v=a.memoizedState;if(l=v.cache,cs(a,pt,l),l!==d.cache&&Ac(a,[pt],s,!0),gn(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=ih(t,a,l,s);break e}else if(l!==c){c=da(Error(i(424)),a),un(c),a=ih(t,a,l,s);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,nt=pa(t.firstChild),St=a,Ge=!0,rs=null,ha=!0,s=am(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Us(),l===c){a=Fa(t,a,s);break e}Ct(t,a,l,s)}a=a.child}return a;case 26:return $r(t,a),t===null?(s=Nx(a.type,null,a.pendingProps,null))?a.memoizedState=s:Ge||(s=a.type,t=a.pendingProps,l=ri(le.current).createElement(s),l[kt]=a,l[Ht]=t,Et(l,s,t),jt(l),a.stateNode=l):a.memoizedState=Nx(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return ce(a),t===null&&Ge&&(l=a.stateNode=yx(a.type,a.pendingProps,le.current),St=a,ha=!0,c=nt,js(a.type)?(Zo=c,nt=pa(l.firstChild)):nt=c),Ct(t,a,a.pendingProps.children,s),$r(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ge&&((c=l=nt)&&(l=jg(l,a.type,a.pendingProps,ha),l!==null?(a.stateNode=l,St=a,nt=pa(l.firstChild),ha=!1,c=!0):c=!1),c||is(a)),ce(a),c=a.type,d=a.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Yo(c,d)?l=null:v!==null&&Yo(c,v)&&(a.flags|=32),a.memoizedState!==null&&(c=Fc(t,a,Lf,null,null,s),qn._currentValue=c),$r(t,a),Ct(t,a,l,s),a.child;case 6:return t===null&&Ge&&((t=s=nt)&&(s=Ng(s,a.pendingProps,ha),s!==null?(a.stateNode=s,St=a,nt=null,t=!0):t=!1),t||is(a)),null;case 13:return ch(t,a,s);case 4:return Le(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=$s(a,null,l,s):Ct(t,a,l,s),a.child;case 11:return Wm(t,a,a.type,a.pendingProps,s);case 7:return Ct(t,a,a.pendingProps,s),a.child;case 8:return Ct(t,a,a.pendingProps.children,s),a.child;case 12:return Ct(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,cs(a,a.type,l.value),Ct(t,a,l.children,s),a.child;case 9:return c=a.type._context,l=a.pendingProps.children,Bs(a),c=_t(c),l=l(c),a.flags|=1,Ct(t,a,l,s),a.child;case 14:return eh(t,a,a.type,a.pendingProps,s);case 15:return th(t,a,a.type,a.pendingProps,s);case 19:return dh(t,a,s);case 31:return Yf(t,a,s);case 22:return ah(t,a,s,a.pendingProps);case 24:return Bs(a),l=_t(pt),t===null?(c=Rc(),c===null&&(c=st,d=Tc(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=s),c=d),a.memoizedState={parent:l,cache:c},zc(a),cs(a,pt,c)):((t.lanes&s)!==0&&(Oc(t,a),bn(a,null,null,s),gn()),c=t.memoizedState,d=a.memoizedState,c.parent!==l?(c={parent:l,cache:l},a.memoizedState=c,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=c),cs(a,pt,l)):(l=d.cache,cs(a,pt,l),l!==c.cache&&Ac(a,[pt],s,!0))),Ct(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function $a(t){t.flags|=4}function go(t,a,s,l,c){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(c&335544128)===c)if(t.stateNode.complete)t.flags|=8192;else if(qh())t.flags|=8192;else throw Fs=Er,Mc}else t.flags&=-16777217}function mh(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Cx(a))if(qh())t.flags|=8192;else throw Fs=Er,Mc}function Pr(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Pd():536870912,t.lanes|=a,Tl|=a)}function kn(t,a){if(!Ge)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function rt(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function Qf(t,a,s){var l=a.pendingProps;switch(kc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(a),null;case 1:return rt(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ba(pt),ie(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(gl(a)?$a(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_c())),rt(a),null;case 26:var c=a.type,d=a.memoizedState;return t===null?($a(a),d!==null?(rt(a),mh(a,d)):(rt(a),go(a,c,null,l,s))):d?d!==t.memoizedState?($a(a),rt(a),mh(a,d)):(rt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&$a(a),rt(a),go(a,c,t,l,s)),null;case 27:if(Se(a),s=le.current,c=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&$a(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return rt(a),null}t=F.current,gl(a)?Pu(a):(t=yx(c,l,s),a.stateNode=t,$a(a))}return rt(a),null;case 5:if(Se(a),c=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&$a(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return rt(a),null}if(d=F.current,gl(a))Pu(a);else{var v=ri(le.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(c,{is:l.is}):v.createElement(c)}}d[kt]=a,d[Ht]=l;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=d;e:switch(Et(d,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$a(a)}}return rt(a),go(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,s),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&$a(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(i(166));if(t=le.current,gl(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,c=St,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[kt]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||cx(t.nodeValue,s)),t||is(a,!0)}else t=ri(t).createTextNode(l),t[kt]=a,a.stateNode=t}return rt(a),null;case 31:if(s=a.memoizedState,t===null||t.memoizedState!==null){if(l=gl(a),s!==null){if(t===null){if(!l)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[kt]=a}else Us(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;rt(a),t=!1}else s=_c(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return a.flags&256?(ea(a),a):(ea(a),null);if((a.flags&128)!==0)throw Error(i(558))}return rt(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=gl(a),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(i(318));if(c=a.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));c[kt]=a}else Us(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;rt(a),c=!1}else c=_c(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return a.flags&256?(ea(a),a):(ea(a),null)}return ea(a),(a.flags&128)!==0?(a.lanes=s,a):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=a.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048)),s!==t&&s&&(a.child.flags|=8192),Pr(a,a.updateQueue),rt(a),null);case 4:return ie(),t===null&&Bo(a.stateNode.containerInfo),rt(a),null;case 10:return Ba(a.type),rt(a),null;case 19:if(j(ht),l=a.memoizedState,l===null)return rt(a),null;if(c=(a.flags&128)!==0,d=l.rendering,d===null)if(c)kn(l,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(d=Rr(t),d!==null){for(a.flags|=128,kn(l,!1),t=d.updateQueue,a.updateQueue=t,Pr(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)Hu(s,t),s=s.sibling;return B(ht,ht.current&1|2),Ge&&Ua(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&Dt()>Ir&&(a.flags|=128,c=!0,kn(l,!1),a.lanes=4194304)}else{if(!c)if(t=Rr(d),t!==null){if(a.flags|=128,c=!0,t=t.updateQueue,a.updateQueue=t,Pr(a,t),kn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ge)return rt(a),null}else 2*Dt()-l.renderingStartTime>Ir&&s!==536870912&&(a.flags|=128,c=!0,kn(l,!1),a.lanes=4194304);l.isBackwards?(d.sibling=a.child,a.child=d):(t=l.last,t!==null?t.sibling=d:a.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Dt(),t.sibling=null,s=ht.current,B(ht,c?s&1|2:s&1),Ge&&Ua(a,l.treeForkCount),t):(rt(a),null);case 22:case 23:return ea(a),Bc(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(rt(a),a.subtreeFlags&6&&(a.flags|=8192)):rt(a),s=a.updateQueue,s!==null&&Pr(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&j(Hs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Ba(pt),rt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Vf(t,a){switch(kc(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ba(pt),ie(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Se(a),null;case 31:if(a.memoizedState!==null){if(ea(a),a.alternate===null)throw Error(i(340));Us()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(ea(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Us()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return j(ht),null;case 4:return ie(),null;case 10:return Ba(a.type),null;case 22:case 23:return ea(a),Bc(),t!==null&&j(Hs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ba(pt),null;case 25:return null;default:return null}}function hh(t,a){switch(kc(a),a.tag){case 3:Ba(pt),ie();break;case 26:case 27:case 5:Se(a);break;case 4:ie();break;case 31:a.memoizedState!==null&&ea(a);break;case 13:ea(a);break;case 19:j(ht);break;case 10:Ba(a.type);break;case 22:case 23:ea(a),Bc(),t!==null&&j(Hs);break;case 24:Ba(pt)}}function Sn(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&t)===t){l=void 0;var d=s.create,v=s.inst;l=d(),v.destroy=l}s=s.next}while(s!==c)}}catch(C){Je(a,a.return,C)}}function xs(t,a,s){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&t)===t){var v=l.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,c=a;var z=s,K=C;try{K()}catch(oe){Je(c,z,oe)}}}l=l.next}while(l!==d)}}catch(oe){Je(a,a.return,oe)}}function xh(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{lm(a,s)}catch(l){Je(t,t.return,l)}}}function ph(t,a,s){s.props=Ps(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Je(t,a,l)}}function _n(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(c){Je(t,a,c)}}function _a(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(c){Je(t,a,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){Je(t,a,c)}else s.current=null}function fh(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(c){Je(t,t.return,c)}}function bo(t,a,s){try{var l=t.stateNode;pg(l,t.type,s,a),l[Ht]=a}catch(c){Je(t,t.return,c)}}function gh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&js(t.type)||t.tag===4}function yo(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vo(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=za));else if(l!==4&&(l===27&&js(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(vo(t,a,s),t=t.sibling;t!==null;)vo(t,a,s),t=t.sibling}function Qr(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&js(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Qr(t,a,s),t=t.sibling;t!==null;)Qr(t,a,s),t=t.sibling}function bh(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Et(a,l,s),a[kt]=t,a[Ht]=s}catch(d){Je(t,t.return,d)}}var Ya=!1,bt=!1,jo=!1,yh=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Xf(t,a){if(t=t.containerInfo,Fo=hi,t=Du(t),hc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var v=0,C=-1,z=-1,K=0,oe=0,he=t,J=null;t:for(;;){for(var ne;he!==s||c!==0&&he.nodeType!==3||(C=v+c),he!==d||l!==0&&he.nodeType!==3||(z=v+l),he.nodeType===3&&(v+=he.nodeValue.length),(ne=he.firstChild)!==null;)J=he,he=ne;for(;;){if(he===t)break t;if(J===s&&++K===c&&(C=v),J===d&&++oe===l&&(z=v),(ne=he.nextSibling)!==null)break;he=J,J=he.parentNode}he=ne}s=C===-1||z===-1?null:{start:C,end:z}}else s=null}s=s||{start:0,end:0}}else s=null;for($o={focusedElem:t,selectionRange:s},hi=!1,Nt=a;Nt!==null;)if(a=Nt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Nt=t;else for(;Nt!==null;){switch(a=Nt,d=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)c=t[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,s=a,c=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var Ne=Ps(s.type,c);t=l.getSnapshotBeforeUpdate(Ne,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ce){Je(s,s.return,Ce)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Qo(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qo(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,Nt=t;break}Nt=a.return}}function vh(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Qa(t,s),l&4&&Sn(5,s);break;case 1:if(Qa(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(v){Je(s,s.return,v)}else{var c=Ps(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(c,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Je(s,s.return,v)}}l&64&&xh(s),l&512&&_n(s,s.return);break;case 3:if(Qa(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{lm(t,a)}catch(v){Je(s,s.return,v)}}break;case 27:a===null&&l&4&&bh(s);case 26:case 5:Qa(t,s),a===null&&l&4&&fh(s),l&512&&_n(s,s.return);break;case 12:Qa(t,s);break;case 31:Qa(t,s),l&4&&wh(t,s);break;case 13:Qa(t,s),l&4&&kh(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=sg.bind(null,s),wg(t,s))));break;case 22:if(l=s.memoizedState!==null||Ya,!l){a=a!==null&&a.memoizedState!==null||bt,c=Ya;var d=bt;Ya=l,(bt=a)&&!d?Va(t,s,(s.subtreeFlags&8772)!==0):Qa(t,s),Ya=c,bt=d}break;case 30:break;default:Qa(t,s)}}function jh(t){var a=t.alternate;a!==null&&(t.alternate=null,jh(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ii(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,Ft=!1;function Pa(t,a,s){for(s=s.child;s!==null;)Nh(t,a,s),s=s.sibling}function Nh(t,a,s){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount($e,s)}catch{}switch(s.tag){case 26:bt||_a(s,a),Pa(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:bt||_a(s,a);var l=it,c=Ft;js(s.type)&&(it=s.stateNode,Ft=!1),Pa(t,a,s),On(s.stateNode),it=l,Ft=c;break;case 5:bt||_a(s,a);case 6:if(l=it,c=Ft,it=null,Pa(t,a,s),it=l,Ft=c,it!==null)if(Ft)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(s.stateNode)}catch(d){Je(s,a,d)}else try{it.removeChild(s.stateNode)}catch(d){Je(s,a,d)}break;case 18:it!==null&&(Ft?(t=it,xx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),ql(t)):xx(it,s.stateNode));break;case 4:l=it,c=Ft,it=s.stateNode.containerInfo,Ft=!0,Pa(t,a,s),it=l,Ft=c;break;case 0:case 11:case 14:case 15:xs(2,s,a),bt||xs(4,s,a),Pa(t,a,s);break;case 1:bt||(_a(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&ph(s,a,l)),Pa(t,a,s);break;case 21:Pa(t,a,s);break;case 22:bt=(l=bt)||s.memoizedState!==null,Pa(t,a,s),bt=l;break;default:Pa(t,a,s)}}function wh(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ql(t)}catch(s){Je(a,a.return,s)}}}function kh(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ql(t)}catch(s){Je(a,a.return,s)}}function Zf(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new yh),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new yh),a;default:throw Error(i(435,t.tag))}}function Vr(t,a){var s=Zf(t);a.forEach(function(l){if(!s.has(l)){s.add(l);var c=lg.bind(null,t,l);l.then(c,c)}})}function $t(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l],d=t,v=a,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(js(C.type)){it=C.stateNode,Ft=!1;break e}break;case 5:it=C.stateNode,Ft=!1;break e;case 3:case 4:it=C.stateNode.containerInfo,Ft=!0;break e}C=C.return}if(it===null)throw Error(i(160));Nh(d,v,c),it=null,Ft=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Sh(a,t),a=a.sibling}var ja=null;function Sh(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:$t(a,t),Yt(t),l&4&&(xs(3,t,t.return),Sn(3,t),xs(5,t,t.return));break;case 1:$t(a,t),Yt(t),l&512&&(bt||s===null||_a(s,s.return)),l&64&&Ya&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var c=ja;if($t(a,t),Yt(t),l&512&&(bt||s===null||_a(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":d=c.getElementsByTagName("title")[0],(!d||d[Jl]||d[kt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(l),c.head.insertBefore(d,c.querySelector("head > title"))),Et(d,l,s),d[kt]=t,jt(d),l=d;break e;case"link":var v=Sx("link","href",c).get(l+(s.href||""));if(v){for(var C=0;C<v.length;C++)if(d=v[C],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){v.splice(C,1);break t}}d=c.createElement(l),Et(d,l,s),c.head.appendChild(d);break;case"meta":if(v=Sx("meta","content",c).get(l+(s.content||""))){for(C=0;C<v.length;C++)if(d=v[C],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){v.splice(C,1);break t}}d=c.createElement(l),Et(d,l,s),c.head.appendChild(d);break;default:throw Error(i(468,l))}d[kt]=t,jt(d),l=d}t.stateNode=l}else _x(c,t.type,t.stateNode);else t.stateNode=kx(c,l,t.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?_x(c,t.type,t.stateNode):kx(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&bo(t,t.memoizedProps,s.memoizedProps)}break;case 27:$t(a,t),Yt(t),l&512&&(bt||s===null||_a(s,s.return)),s!==null&&l&4&&bo(t,t.memoizedProps,s.memoizedProps);break;case 5:if($t(a,t),Yt(t),l&512&&(bt||s===null||_a(s,s.return)),t.flags&32){c=t.stateNode;try{il(c,"")}catch(Ne){Je(t,t.return,Ne)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,bo(t,c,s!==null?s.memoizedProps:c)),l&1024&&(jo=!0);break;case 6:if($t(a,t),Yt(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(Ne){Je(t,t.return,Ne)}}break;case 3:if(oi=null,c=ja,ja=ii(a.containerInfo),$t(a,t),ja=c,Yt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ql(a.containerInfo)}catch(Ne){Je(t,t.return,Ne)}jo&&(jo=!1,_h(t));break;case 4:l=ja,ja=ii(t.stateNode.containerInfo),$t(a,t),Yt(t),ja=l;break;case 12:$t(a,t),Yt(t);break;case 31:$t(a,t),Yt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vr(t,l)));break;case 13:$t(a,t),Yt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Zr=Dt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vr(t,l)));break;case 22:c=t.memoizedState!==null;var z=s!==null&&s.memoizedState!==null,K=Ya,oe=bt;if(Ya=K||c,bt=oe||z,$t(a,t),bt=oe,Ya=K,Yt(t),l&8192)e:for(a=t.stateNode,a._visibility=c?a._visibility&-2:a._visibility|1,c&&(s===null||z||Ya||bt||Qs(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){z=s=a;try{if(d=z.stateNode,c)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=z.stateNode;var he=z.memoizedProps.style,J=he!=null&&he.hasOwnProperty("display")?he.display:null;C.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ne){Je(z,z.return,Ne)}}}else if(a.tag===6){if(s===null){z=a;try{z.stateNode.nodeValue=c?"":z.memoizedProps}catch(Ne){Je(z,z.return,Ne)}}}else if(a.tag===18){if(s===null){z=a;try{var ne=z.stateNode;c?px(ne,!0):px(z.stateNode,!1)}catch(Ne){Je(z,z.return,Ne)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Vr(t,s))));break;case 19:$t(a,t),Yt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vr(t,l)));break;case 30:break;case 21:break;default:$t(a,t),Yt(t)}}function Yt(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(gh(l)){s=l;break}l=l.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var c=s.stateNode,d=yo(t);Qr(t,d,c);break;case 5:var v=s.stateNode;s.flags&32&&(il(v,""),s.flags&=-33);var C=yo(t);Qr(t,C,v);break;case 3:case 4:var z=s.stateNode.containerInfo,K=yo(t);vo(t,K,z);break;default:throw Error(i(161))}}catch(oe){Je(t,t.return,oe)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function _h(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;_h(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Qa(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)vh(t,a.alternate,a),a=a.sibling}function Qs(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:xs(4,a,a.return),Qs(a);break;case 1:_a(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&ph(a,a.return,s),Qs(a);break;case 27:On(a.stateNode);case 26:case 5:_a(a,a.return),Qs(a);break;case 22:a.memoizedState===null&&Qs(a);break;case 30:Qs(a);break;default:Qs(a)}t=t.sibling}}function Va(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,c=t,d=a,v=d.flags;switch(d.tag){case 0:case 11:case 15:Va(c,d,s),Sn(4,d);break;case 1:if(Va(c,d,s),l=d,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(K){Je(l,l.return,K)}if(l=d,c=l.updateQueue,c!==null){var C=l.stateNode;try{var z=c.shared.hiddenCallbacks;if(z!==null)for(c.shared.hiddenCallbacks=null,c=0;c<z.length;c++)sm(z[c],C)}catch(K){Je(l,l.return,K)}}s&&v&64&&xh(d),_n(d,d.return);break;case 27:bh(d);case 26:case 5:Va(c,d,s),s&&l===null&&v&4&&fh(d),_n(d,d.return);break;case 12:Va(c,d,s);break;case 31:Va(c,d,s),s&&v&4&&wh(c,d);break;case 13:Va(c,d,s),s&&v&4&&kh(c,d);break;case 22:d.memoizedState===null&&Va(c,d,s),_n(d,d.return);break;case 30:break;default:Va(c,d,s)}a=a.sibling}}function No(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&mn(s))}function wo(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&mn(t))}function Na(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ch(t,a,s,l),a=a.sibling}function Ch(t,a,s,l){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Na(t,a,s,l),c&2048&&Sn(9,a);break;case 1:Na(t,a,s,l);break;case 3:Na(t,a,s,l),c&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&mn(t)));break;case 12:if(c&2048){Na(t,a,s,l),t=a.stateNode;try{var d=a.memoizedProps,v=d.id,C=d.onPostCommit;typeof C=="function"&&C(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){Je(a,a.return,z)}}else Na(t,a,s,l);break;case 31:Na(t,a,s,l);break;case 13:Na(t,a,s,l);break;case 23:break;case 22:d=a.stateNode,v=a.alternate,a.memoizedState!==null?d._visibility&2?Na(t,a,s,l):Cn(t,a):d._visibility&2?Na(t,a,s,l):(d._visibility|=2,Cl(t,a,s,l,(a.subtreeFlags&10256)!==0||!1)),c&2048&&No(v,a);break;case 24:Na(t,a,s,l),c&2048&&wo(a.alternate,a);break;default:Na(t,a,s,l)}}function Cl(t,a,s,l,c){for(c=c&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var d=t,v=a,C=s,z=l,K=v.flags;switch(v.tag){case 0:case 11:case 15:Cl(d,v,C,z,c),Sn(8,v);break;case 23:break;case 22:var oe=v.stateNode;v.memoizedState!==null?oe._visibility&2?Cl(d,v,C,z,c):Cn(d,v):(oe._visibility|=2,Cl(d,v,C,z,c)),c&&K&2048&&No(v.alternate,v);break;case 24:Cl(d,v,C,z,c),c&&K&2048&&wo(v.alternate,v);break;default:Cl(d,v,C,z,c)}a=a.sibling}}function Cn(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,c=l.flags;switch(l.tag){case 22:Cn(s,l),c&2048&&No(l.alternate,l);break;case 24:Cn(s,l),c&2048&&wo(l.alternate,l);break;default:Cn(s,l)}a=a.sibling}}var En=8192;function El(t,a,s){if(t.subtreeFlags&En)for(t=t.child;t!==null;)Eh(t,a,s),t=t.sibling}function Eh(t,a,s){switch(t.tag){case 26:El(t,a,s),t.flags&En&&t.memoizedState!==null&&Og(s,ja,t.memoizedState,t.memoizedProps);break;case 5:El(t,a,s);break;case 3:case 4:var l=ja;ja=ii(t.stateNode.containerInfo),El(t,a,s),ja=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=En,En=16777216,El(t,a,s),En=l):El(t,a,s));break;default:El(t,a,s)}}function Ah(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function An(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Nt=l,Dh(l,t)}Ah(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Th(t),t=t.sibling}function Th(t){switch(t.tag){case 0:case 11:case 15:An(t),t.flags&2048&&xs(9,t,t.return);break;case 3:An(t);break;case 12:An(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Xr(t)):An(t);break;default:An(t)}}function Xr(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Nt=l,Dh(l,t)}Ah(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:xs(8,a,a.return),Xr(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Xr(a));break;default:Xr(a)}t=t.sibling}}function Dh(t,a){for(;Nt!==null;){var s=Nt;switch(s.tag){case 0:case 11:case 15:xs(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:mn(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Nt=l;else e:for(s=t;Nt!==null;){l=Nt;var c=l.sibling,d=l.return;if(jh(l),l===s){Nt=null;break e}if(c!==null){c.return=d,Nt=c;break e}Nt=d}}}var If={getCacheForType:function(t){var a=_t(pt),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s},cacheSignal:function(){return _t(pt).controller.signal}},Kf=typeof WeakMap=="function"?WeakMap:Map,Qe=0,st=null,Ue=null,Be=0,Ke=0,ta=null,ps=!1,Al=!1,ko=!1,Xa=0,dt=0,fs=0,Vs=0,So=0,aa=0,Tl=0,Tn=null,Pt=null,_o=!1,Zr=0,Rh=0,Ir=1/0,Kr=null,gs=null,yt=0,bs=null,Dl=null,Za=0,Co=0,Eo=null,Mh=null,Dn=0,Ao=null;function sa(){return(Qe&2)!==0&&Be!==0?Be&-Be:R.T!==null?Oo():Zd()}function zh(){if(aa===0)if((Be&536870912)===0||Ge){var t=Es;Es<<=1,(Es&3932160)===0&&(Es=262144),aa=t}else aa=536870912;return t=Wt.current,t!==null&&(t.flags|=32),aa}function Qt(t,a,s){(t===st&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)&&(Rl(t,0),ys(t,Be,aa,!1)),Kl(t,s),((Qe&2)===0||t!==st)&&(t===st&&((Qe&2)===0&&(Vs|=s),dt===4&&ys(t,Be,aa,!1)),Ca(t))}function Oh(t,a,s){if((Qe&6)!==0)throw Error(i(327));var l=!s&&(a&127)===0&&(a&t.expiredLanes)===0||Il(t,a),c=l?eg(t,a):Do(t,a,!0),d=l;do{if(c===0){Al&&!l&&ys(t,a,0,!1);break}else{if(s=t.current.alternate,d&&!Jf(s)){c=Do(t,a,!1),d=!1;continue}if(c===2){if(d=a,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var C=t;c=Tn;var z=C.current.memoizedState.isDehydrated;if(z&&(Rl(C,v).flags|=256),v=Do(C,v,!1),v!==2){if(ko&&!z){C.errorRecoveryDisabledLanes|=d,Vs|=d,c=4;break e}d=Pt,Pt=c,d!==null&&(Pt===null?Pt=d:Pt.push.apply(Pt,d))}c=v}if(d=!1,c!==2)continue}}if(c===1){Rl(t,0),ys(t,a,0,!0);break}e:{switch(l=t,d=c,d){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:ys(l,a,aa,!ps);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(c=Zr+300-Dt(),10<c)){if(ys(l,a,aa,!ps),ir(l,0,!0)!==0)break e;Za=a,l.timeoutHandle=mx(Lh.bind(null,l,s,Pt,Kr,_o,a,aa,Vs,Tl,ps,d,"Throttled",-0,0),c);break e}Lh(l,s,Pt,Kr,_o,a,aa,Vs,Tl,ps,d,null,-0,0)}}break}while(!0);Ca(t)}function Lh(t,a,s,l,c,d,v,C,z,K,oe,he,J,ne){if(t.timeoutHandle=-1,he=a.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:za},Eh(a,d,he);var Ne=(d&62914560)===d?Zr-Dt():(d&4194048)===d?Rh-Dt():0;if(Ne=Lg(he,Ne),Ne!==null){Za=d,t.cancelPendingCommit=Ne(Yh.bind(null,t,a,d,s,l,c,v,C,z,oe,he,null,J,ne)),ys(t,d,v,!K);return}}Yh(t,a,d,s,l,c,v,C,z)}function Jf(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var c=s[l],d=c.getSnapshot;c=c.value;try{if(!Kt(d(),c))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ys(t,a,s,l){a&=~So,a&=~Vs,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var c=a;0<c;){var d=31-Mt(c),v=1<<d;l[d]=-1,c&=~v}s!==0&&Qd(t,s,a)}function Jr(){return(Qe&6)===0?(Rn(0),!1):!0}function To(){if(Ue!==null){if(Ke===0)var t=Ue.return;else t=Ue,qa=qs=null,Pc(t),Nl=null,xn=0,t=Ue;for(;t!==null;)hh(t.alternate,t),t=t.return;Ue=null}}function Rl(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,bg(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Za=0,To(),st=t,Ue=s=La(t.current,null),Be=a,Ke=0,ta=null,ps=!1,Al=Il(t,a),ko=!1,Tl=aa=So=Vs=fs=dt=0,Pt=Tn=null,_o=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var c=31-Mt(l),d=1<<c;a|=t[c],l&=~d}return Xa=a,yr(),s}function Uh(t,a){Re=null,R.H=Nn,a===jl||a===Cr?(a=Wu(),Ke=3):a===Mc?(a=Wu(),Ke=4):Ke=a===io?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ta=a,Ue===null&&(dt=1,Gr(t,da(a,t.current)))}function qh(){var t=Wt.current;return t===null?!0:(Be&4194048)===Be?xa===null:(Be&62914560)===Be||(Be&536870912)!==0?t===xa:!1}function Bh(){var t=R.H;return R.H=Nn,t===null?Nn:t}function Hh(){var t=R.A;return R.A=If,t}function Wr(){dt=4,ps||(Be&4194048)!==Be&&Wt.current!==null||(Al=!0),(fs&134217727)===0&&(Vs&134217727)===0||st===null||ys(st,Be,aa,!1)}function Do(t,a,s){var l=Qe;Qe|=2;var c=Bh(),d=Hh();(st!==t||Be!==a)&&(Kr=null,Rl(t,a)),a=!1;var v=dt;e:do try{if(Ke!==0&&Ue!==null){var C=Ue,z=ta;switch(Ke){case 8:To(),v=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(a=!0);var K=Ke;if(Ke=0,ta=null,Ml(t,C,z,K),s&&Al){v=0;break e}break;default:K=Ke,Ke=0,ta=null,Ml(t,C,z,K)}}Wf(),v=dt;break}catch(oe){Uh(t,oe)}while(!0);return a&&t.shellSuspendCounter++,qa=qs=null,Qe=l,R.H=c,R.A=d,Ue===null&&(st=null,Be=0,yr()),v}function Wf(){for(;Ue!==null;)Gh(Ue)}function eg(t,a){var s=Qe;Qe|=2;var l=Bh(),c=Hh();st!==t||Be!==a?(Kr=null,Ir=Dt()+500,Rl(t,a)):Al=Il(t,a);e:do try{if(Ke!==0&&Ue!==null){a=Ue;var d=ta;t:switch(Ke){case 1:Ke=0,ta=null,Ml(t,a,d,1);break;case 2:case 9:if(Ku(d)){Ke=0,ta=null,Fh(a);break}a=function(){Ke!==2&&Ke!==9||st!==t||(Ke=7),Ca(t)},d.then(a,a);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Ku(d)?(Ke=0,ta=null,Fh(a)):(Ke=0,ta=null,Ml(t,a,d,7));break;case 5:var v=null;switch(Ue.tag){case 26:v=Ue.memoizedState;case 5:case 27:var C=Ue;if(v?Cx(v):C.stateNode.complete){Ke=0,ta=null;var z=C.sibling;if(z!==null)Ue=z;else{var K=C.return;K!==null?(Ue=K,ei(K)):Ue=null}break t}}Ke=0,ta=null,Ml(t,a,d,5);break;case 6:Ke=0,ta=null,Ml(t,a,d,6);break;case 8:To(),dt=6;break e;default:throw Error(i(462))}}tg();break}catch(oe){Uh(t,oe)}while(!0);return qa=qs=null,R.H=l,R.A=c,Qe=s,Ue!==null?0:(st=null,Be=0,yr(),dt)}function tg(){for(;Ue!==null&&!as();)Gh(Ue)}function Gh(t){var a=uh(t.alternate,t,Xa);t.memoizedProps=t.pendingProps,a===null?ei(t):Ue=a}function Fh(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=nh(s,a,a.pendingProps,a.type,void 0,Be);break;case 11:a=nh(s,a,a.pendingProps,a.type.render,a.ref,Be);break;case 5:Pc(a);default:hh(s,a),a=Ue=Hu(a,Xa),a=uh(s,a,Xa)}t.memoizedProps=t.pendingProps,a===null?ei(t):Ue=a}function Ml(t,a,s,l){qa=qs=null,Pc(a),Nl=null,xn=0;var c=a.return;try{if($f(t,c,a,s,Be)){dt=1,Gr(t,da(s,t.current)),Ue=null;return}}catch(d){if(c!==null)throw Ue=c,d;dt=1,Gr(t,da(s,t.current)),Ue=null;return}a.flags&32768?(Ge||l===1?t=!0:Al||(Be&536870912)!==0?t=!1:(ps=t=!0,(l===2||l===9||l===3||l===6)&&(l=Wt.current,l!==null&&l.tag===13&&(l.flags|=16384))),$h(a,t)):ei(a)}function ei(t){var a=t;do{if((a.flags&32768)!==0){$h(a,ps);return}t=a.return;var s=Qf(a.alternate,a,Xa);if(s!==null){Ue=s;return}if(a=a.sibling,a!==null){Ue=a;return}Ue=a=t}while(a!==null);dt===0&&(dt=5)}function $h(t,a){do{var s=Vf(t.alternate,t);if(s!==null){s.flags&=32767,Ue=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=s}while(t!==null);dt=6,Ue=null}function Yh(t,a,s,l,c,d,v,C,z){t.cancelPendingCommit=null;do ti();while(yt!==0);if((Qe&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(d=a.lanes|a.childLanes,d|=bc,Mp(t,s,d,v,C,z),t===st&&(Ue=st=null,Be=0),Dl=a,bs=t,Za=s,Co=d,Eo=c,Mh=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ng(el,function(){return Zh(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=R.T,R.T=null,c=ee.p,ee.p=2,v=Qe,Qe|=4;try{Xf(t,a,s)}finally{Qe=v,ee.p=c,R.T=l}}yt=1,Ph(),Qh(),Vh()}}function Ph(){if(yt===1){yt=0;var t=bs,a=Dl,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=R.T,R.T=null;var l=ee.p;ee.p=2;var c=Qe;Qe|=4;try{Sh(a,t);var d=$o,v=Du(t.containerInfo),C=d.focusedElem,z=d.selectionRange;if(v!==C&&C&&C.ownerDocument&&Tu(C.ownerDocument.documentElement,C)){if(z!==null&&hc(C)){var K=z.start,oe=z.end;if(oe===void 0&&(oe=K),"selectionStart"in C)C.selectionStart=K,C.selectionEnd=Math.min(oe,C.value.length);else{var he=C.ownerDocument||document,J=he&&he.defaultView||window;if(J.getSelection){var ne=J.getSelection(),Ne=C.textContent.length,Ce=Math.min(z.start,Ne),at=z.end===void 0?Ce:Math.min(z.end,Ne);!ne.extend&&Ce>at&&(v=at,at=Ce,Ce=v);var Y=Au(C,Ce),G=Au(C,at);if(Y&&G&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==G.node||ne.focusOffset!==G.offset)){var X=he.createRange();X.setStart(Y.node,Y.offset),ne.removeAllRanges(),Ce>at?(ne.addRange(X),ne.extend(G.node,G.offset)):(X.setEnd(G.node,G.offset),ne.addRange(X))}}}}for(he=[],ne=C;ne=ne.parentNode;)ne.nodeType===1&&he.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<he.length;C++){var ue=he[C];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}hi=!!Fo,$o=Fo=null}finally{Qe=c,ee.p=l,R.T=s}}t.current=a,yt=2}}function Qh(){if(yt===2){yt=0;var t=bs,a=Dl,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=R.T,R.T=null;var l=ee.p;ee.p=2;var c=Qe;Qe|=4;try{vh(t,a.alternate,a)}finally{Qe=c,ee.p=l,R.T=s}}yt=3}}function Vh(){if(yt===4||yt===3){yt=0,Zl();var t=bs,a=Dl,s=Za,l=Mh;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?yt=5:(yt=0,Dl=bs=null,Xh(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(gs=null),Xi(s),a=a.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot($e,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=R.T,c=ee.p,ee.p=2,R.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var C=l[v];d(C.value,{componentStack:C.stack})}}finally{R.T=a,ee.p=c}}(Za&3)!==0&&ti(),Ca(t),c=t.pendingLanes,(s&261930)!==0&&(c&42)!==0?t===Ao?Dn++:(Dn=0,Ao=t):Dn=0,Rn(0)}}function Xh(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,mn(a)))}function ti(){return Ph(),Qh(),Vh(),Zh()}function Zh(){if(yt!==5)return!1;var t=bs,a=Co;Co=0;var s=Xi(Za),l=R.T,c=ee.p;try{ee.p=32>s?32:s,R.T=null,s=Eo,Eo=null;var d=bs,v=Za;if(yt=0,Dl=bs=null,Za=0,(Qe&6)!==0)throw Error(i(331));var C=Qe;if(Qe|=4,Th(d.current),Ch(d,d.current,v,s),Qe=C,Rn(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot($e,d)}catch{}return!0}finally{ee.p=c,R.T=l,Xh(t,a)}}function Ih(t,a,s){a=da(s,a),a=ro(t.stateNode,a,2),t=us(t,a,2),t!==null&&(Kl(t,2),Ca(t))}function Je(t,a,s){if(t.tag===3)Ih(t,t,s);else for(;a!==null;){if(a.tag===3){Ih(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(gs===null||!gs.has(l))){t=da(s,t),s=Km(2),l=us(a,s,2),l!==null&&(Jm(s,l,a,t),Kl(l,2),Ca(l));break}}a=a.return}}function Ro(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Kf;var c=new Set;l.set(a,c)}else c=l.get(a),c===void 0&&(c=new Set,l.set(a,c));c.has(s)||(ko=!0,c.add(s),t=ag.bind(null,t,a,s),a.then(t,t))}function ag(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,st===t&&(Be&s)===s&&(dt===4||dt===3&&(Be&62914560)===Be&&300>Dt()-Zr?(Qe&2)===0&&Rl(t,0):So|=s,Tl===Be&&(Tl=0)),Ca(t)}function Kh(t,a){a===0&&(a=Pd()),t=Os(t,a),t!==null&&(Kl(t,a),Ca(t))}function sg(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),Kh(t,s)}function lg(t,a){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(a),Kh(t,s)}function ng(t,a){return ts(t,a)}var ai=null,zl=null,Mo=!1,si=!1,zo=!1,vs=0;function Ca(t){t!==zl&&t.next===null&&(zl===null?ai=zl=t:zl=zl.next=t),si=!0,Mo||(Mo=!0,ig())}function Rn(t,a){if(!zo&&si){zo=!0;do for(var s=!1,l=ai;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var d=0;else{var v=l.suspendedLanes,C=l.pingedLanes;d=(1<<31-Mt(42|t)+1)-1,d&=c&~(v&~C),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,tx(l,d))}else d=Be,d=ir(l,l===st?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Il(l,d)||(s=!0,tx(l,d));l=l.next}while(s);zo=!1}}function rg(){Jh()}function Jh(){si=Mo=!1;var t=0;vs!==0&&gg()&&(t=vs);for(var a=Dt(),s=null,l=ai;l!==null;){var c=l.next,d=Wh(l,a);d===0?(l.next=null,s===null?ai=c:s.next=c,c===null&&(zl=s)):(s=l,(t!==0||(d&3)!==0)&&(si=!0)),l=c}yt!==0&&yt!==5||Rn(t),vs!==0&&(vs=0)}function Wh(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Mt(d),C=1<<v,z=c[v];z===-1?((C&s)===0||(C&l)!==0)&&(c[v]=Rp(C,a)):z<=a&&(t.expiredLanes|=C),d&=~C}if(a=st,s=Be,s=ir(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Da(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Il(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&Da(l),Xi(s)){case 2:case 8:s=Ut;break;case 32:s=el;break;case 268435456:s=de;break;default:s=el}return l=ex.bind(null,t),s=ts(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&Da(l),t.callbackPriority=2,t.callbackNode=null,2}function ex(t,a){if(yt!==0&&yt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(ti()&&t.callbackNode!==s)return null;var l=Be;return l=ir(t,t===st?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Oh(t,l,a),Wh(t,Dt()),t.callbackNode!=null&&t.callbackNode===s?ex.bind(null,t):null)}function tx(t,a){if(ti())return null;Oh(t,a,!0)}function ig(){yg(function(){(Qe&6)!==0?ts(nr,rg):Jh()})}function Oo(){if(vs===0){var t=yl;t===0&&(t=Cs,Cs<<=1,(Cs&261888)===0&&(Cs=256)),vs=t}return vs}function ax(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ur(""+t)}function sx(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function cg(t,a,s,l,c){if(a==="submit"&&s&&s.stateNode===c){var d=ax((c[Ht]||null).action),v=l.submitter;v&&(a=(a=v[Ht]||null)?ax(a.formAction):v.getAttribute("formAction"),a!==null&&(d=a,v=null));var C=new pr("action","action",null,l,c);t.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(vs!==0){var z=v?sx(c,v):new FormData(c);eo(s,{pending:!0,data:z,method:c.method,action:d},null,z)}}else typeof d=="function"&&(C.preventDefault(),z=v?sx(c,v):new FormData(c),eo(s,{pending:!0,data:z,method:c.method,action:d},d,z))},currentTarget:c}]})}}for(var Lo=0;Lo<gc.length;Lo++){var Uo=gc[Lo],og=Uo.toLowerCase(),dg=Uo[0].toUpperCase()+Uo.slice(1);va(og,"on"+dg)}va(zu,"onAnimationEnd"),va(Ou,"onAnimationIteration"),va(Lu,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(_f,"onTransitionRun"),va(Cf,"onTransitionStart"),va(Ef,"onTransitionCancel"),va(Uu,"onTransitionEnd"),nl("onMouseEnter",["mouseout","mouseover"]),nl("onMouseLeave",["mouseout","mouseover"]),nl("onPointerEnter",["pointerout","pointerover"]),nl("onPointerLeave",["pointerout","pointerover"]),Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mn));function lx(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],c=l.event;l=l.listeners;e:{var d=void 0;if(a)for(var v=l.length-1;0<=v;v--){var C=l[v],z=C.instance,K=C.currentTarget;if(C=C.listener,z!==d&&c.isPropagationStopped())break e;d=C,c.currentTarget=K;try{d(c)}catch(oe){br(oe)}c.currentTarget=null,d=z}else for(v=0;v<l.length;v++){if(C=l[v],z=C.instance,K=C.currentTarget,C=C.listener,z!==d&&c.isPropagationStopped())break e;d=C,c.currentTarget=K;try{d(c)}catch(oe){br(oe)}c.currentTarget=null,d=z}}}}function qe(t,a){var s=a[Zi];s===void 0&&(s=a[Zi]=new Set);var l=t+"__bubble";s.has(l)||(nx(a,t,2,!1),s.add(l))}function qo(t,a,s){var l=0;a&&(l|=4),nx(s,t,l,a)}var li="_reactListening"+Math.random().toString(36).slice(2);function Bo(t){if(!t[li]){t[li]=!0,Jd.forEach(function(s){s!=="selectionchange"&&(ug.has(s)||qo(s,!1,t),qo(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[li]||(a[li]=!0,qo("selectionchange",!1,a))}}function nx(t,a,s,l){switch(zx(a)){case 2:var c=Bg;break;case 8:c=Hg;break;default:c=ed}s=c.bind(null,a,s,t),c=void 0,!lc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(a,s,{capture:!0,passive:c}):t.addEventListener(a,s,!0):c!==void 0?t.addEventListener(a,s,{passive:c}):t.addEventListener(a,s,!1)}function Ho(t,a,s,l,c){var d=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var C=l.stateNode.containerInfo;if(C===c)break;if(v===4)for(v=l.return;v!==null;){var z=v.tag;if((z===3||z===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;C!==null;){if(v=al(C),v===null)return;if(z=v.tag,z===5||z===6||z===26||z===27){l=d=v;continue e}C=C.parentNode}}l=l.return}du(function(){var K=d,oe=ac(s),he=[];e:{var J=qu.get(t);if(J!==void 0){var ne=pr,Ne=t;switch(t){case"keypress":if(hr(s)===0)break e;case"keydown":case"keyup":ne=sf;break;case"focusin":Ne="focus",ne=cc;break;case"focusout":Ne="blur",ne=cc;break;case"beforeblur":case"afterblur":ne=cc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Pp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=rf;break;case zu:case Ou:case Lu:ne=Xp;break;case Uu:ne=of;break;case"scroll":case"scrollend":ne=$p;break;case"wheel":ne=uf;break;case"copy":case"cut":case"paste":ne=Ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=pu;break;case"toggle":case"beforetoggle":ne=hf}var Ce=(a&4)!==0,at=!Ce&&(t==="scroll"||t==="scrollend"),Y=Ce?J!==null?J+"Capture":null:J;Ce=[];for(var G=K,X;G!==null;){var ue=G;if(X=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||X===null||Y===null||(ue=en(G,Y),ue!=null&&Ce.push(zn(G,ue,X))),at)break;G=G.return}0<Ce.length&&(J=new ne(J,Ne,null,s,oe),he.push({event:J,listeners:Ce}))}}if((a&7)===0){e:{if(J=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",J&&s!==tc&&(Ne=s.relatedTarget||s.fromElement)&&(al(Ne)||Ne[tl]))break e;if((ne||J)&&(J=oe.window===oe?oe:(J=oe.ownerDocument)?J.defaultView||J.parentWindow:window,ne?(Ne=s.relatedTarget||s.toElement,ne=K,Ne=Ne?al(Ne):null,Ne!==null&&(at=x(Ne),Ce=Ne.tag,Ne!==at||Ce!==5&&Ce!==27&&Ce!==6)&&(Ne=null)):(ne=null,Ne=K),ne!==Ne)){if(Ce=hu,ue="onMouseLeave",Y="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(Ce=pu,ue="onPointerLeave",Y="onPointerEnter",G="pointer"),at=ne==null?J:Wl(ne),X=Ne==null?J:Wl(Ne),J=new Ce(ue,G+"leave",ne,s,oe),J.target=at,J.relatedTarget=X,ue=null,al(oe)===K&&(Ce=new Ce(Y,G+"enter",Ne,s,oe),Ce.target=X,Ce.relatedTarget=at,ue=Ce),at=ue,ne&&Ne)t:{for(Ce=mg,Y=ne,G=Ne,X=0,ue=Y;ue;ue=Ce(ue))X++;ue=0;for(var _e=G;_e;_e=Ce(_e))ue++;for(;0<X-ue;)Y=Ce(Y),X--;for(;0<ue-X;)G=Ce(G),ue--;for(;X--;){if(Y===G||G!==null&&Y===G.alternate){Ce=Y;break t}Y=Ce(Y),G=Ce(G)}Ce=null}else Ce=null;ne!==null&&rx(he,J,ne,Ce,!1),Ne!==null&&at!==null&&rx(he,at,Ne,Ce,!0)}}e:{if(J=K?Wl(K):window,ne=J.nodeName&&J.nodeName.toLowerCase(),ne==="select"||ne==="input"&&J.type==="file")var Ye=wu;else if(ju(J))if(ku)Ye=wf;else{Ye=jf;var we=vf}else ne=J.nodeName,!ne||ne.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&ec(K.elementType)&&(Ye=wu):Ye=Nf;if(Ye&&(Ye=Ye(t,K))){Nu(he,Ye,s,oe);break e}we&&we(t,J,K),t==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&Wi(J,"number",J.value)}switch(we=K?Wl(K):window,t){case"focusin":(ju(we)||we.contentEditable==="true")&&(ul=we,xc=K,on=null);break;case"focusout":on=xc=ul=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,Ru(he,s,oe);break;case"selectionchange":if(Sf)break;case"keydown":case"keyup":Ru(he,s,oe)}var Oe;if(dc)e:{switch(t){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else dl?yu(t,s)&&(He="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(He="onCompositionStart");He&&(fu&&s.locale!=="ko"&&(dl||He!=="onCompositionStart"?He==="onCompositionEnd"&&dl&&(Oe=uu()):(ls=oe,nc="value"in ls?ls.value:ls.textContent,dl=!0)),we=ni(K,He),0<we.length&&(He=new xu(He,t,null,s,oe),he.push({event:He,listeners:we}),Oe?He.data=Oe:(Oe=vu(s),Oe!==null&&(He.data=Oe)))),(Oe=pf?ff(t,s):gf(t,s))&&(He=ni(K,"onBeforeInput"),0<He.length&&(we=new xu("onBeforeInput","beforeinput",null,s,oe),he.push({event:we,listeners:He}),we.data=Oe)),cg(he,t,K,s,oe)}lx(he,a)})}function zn(t,a,s){return{instance:t,listener:a,currentTarget:s}}function ni(t,a){for(var s=a+"Capture",l=[];t!==null;){var c=t,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=en(t,s),c!=null&&l.unshift(zn(t,c,d)),c=en(t,a),c!=null&&l.push(zn(t,c,d))),t.tag===3)return l;t=t.return}return[]}function mg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function rx(t,a,s,l,c){for(var d=a._reactName,v=[];s!==null&&s!==l;){var C=s,z=C.alternate,K=C.stateNode;if(C=C.tag,z!==null&&z===l)break;C!==5&&C!==26&&C!==27||K===null||(z=K,c?(K=en(s,d),K!=null&&v.unshift(zn(s,K,z))):c||(K=en(s,d),K!=null&&v.push(zn(s,K,z)))),s=s.return}v.length!==0&&t.push({event:a,listeners:v})}var hg=/\r\n?/g,xg=/\u0000|\uFFFD/g;function ix(t){return(typeof t=="string"?t:""+t).replace(hg,`
`).replace(xg,"")}function cx(t,a){return a=ix(a),ix(t)===a}function tt(t,a,s,l,c,d){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||il(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&il(t,""+l);break;case"className":or(t,"class",l);break;case"tabIndex":or(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":or(t,s,l);break;case"style":cu(t,l,d);break;case"data":if(a!=="object"){or(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ur(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(a!=="input"&&tt(t,a,"name",c.name,c,null),tt(t,a,"formEncType",c.formEncType,c,null),tt(t,a,"formMethod",c.formMethod,c,null),tt(t,a,"formTarget",c.formTarget,c,null)):(tt(t,a,"encType",c.encType,c,null),tt(t,a,"method",c.method,c,null),tt(t,a,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ur(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=za);break;case"onScroll":l!=null&&qe("scroll",t);break;case"onScrollEnd":l!=null&&qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=ur(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":qe("beforetoggle",t),qe("toggle",t),cr(t,"popover",l);break;case"xlinkActuate":Ma(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ma(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ma(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ma(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ma(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ma(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":cr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Gp.get(s)||s,cr(t,s,l))}}function Go(t,a,s,l,c,d){switch(s){case"style":cu(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"children":typeof l=="string"?il(t,l):(typeof l=="number"||typeof l=="bigint")&&il(t,""+l);break;case"onScroll":l!=null&&qe("scroll",t);break;case"onScrollEnd":l!=null&&qe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wd.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),a=s.slice(2,c?s.length-7:void 0),d=t[Ht]||null,d=d!=null?d[s]:null,typeof d=="function"&&t.removeEventListener(a,d,c),typeof l=="function")){typeof d!="function"&&d!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,c);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):cr(t,s,l)}}}function Et(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",t),qe("load",t);var l=!1,c=!1,d;for(d in s)if(s.hasOwnProperty(d)){var v=s[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tt(t,a,d,v,s,null)}}c&&tt(t,a,"srcSet",s.srcSet,s,null),l&&tt(t,a,"src",s.src,s,null);return;case"input":qe("invalid",t);var C=d=v=c=null,z=null,K=null;for(l in s)if(s.hasOwnProperty(l)){var oe=s[l];if(oe!=null)switch(l){case"name":c=oe;break;case"type":v=oe;break;case"checked":z=oe;break;case"defaultChecked":K=oe;break;case"value":d=oe;break;case"defaultValue":C=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,a));break;default:tt(t,a,l,oe,s,null)}}lu(t,d,C,z,K,v,c,!1);return;case"select":qe("invalid",t),l=v=d=null;for(c in s)if(s.hasOwnProperty(c)&&(C=s[c],C!=null))switch(c){case"value":d=C;break;case"defaultValue":v=C;break;case"multiple":l=C;default:tt(t,a,c,C,s,null)}a=d,s=v,t.multiple=!!l,a!=null?rl(t,!!l,a,!1):s!=null&&rl(t,!!l,s,!0);return;case"textarea":qe("invalid",t),d=c=l=null;for(v in s)if(s.hasOwnProperty(v)&&(C=s[v],C!=null))switch(v){case"value":l=C;break;case"defaultValue":c=C;break;case"children":d=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:tt(t,a,v,C,s,null)}ru(t,l,c,d);return;case"option":for(z in s)s.hasOwnProperty(z)&&(l=s[z],l!=null)&&(z==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":tt(t,a,z,l,s,null));return;case"dialog":qe("beforetoggle",t),qe("toggle",t),qe("cancel",t),qe("close",t);break;case"iframe":case"object":qe("load",t);break;case"video":case"audio":for(l=0;l<Mn.length;l++)qe(Mn[l],t);break;case"image":qe("error",t),qe("load",t);break;case"details":qe("toggle",t);break;case"embed":case"source":case"link":qe("error",t),qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in s)if(s.hasOwnProperty(K)&&(l=s[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tt(t,a,K,l,s,null)}return;default:if(ec(a)){for(oe in s)s.hasOwnProperty(oe)&&(l=s[oe],l!==void 0&&Go(t,a,oe,l,s,void 0));return}}for(C in s)s.hasOwnProperty(C)&&(l=s[C],l!=null&&tt(t,a,C,l,s,null))}function pg(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,v=null,C=null,z=null,K=null,oe=null;for(ne in s){var he=s[ne];if(s.hasOwnProperty(ne)&&he!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":z=he;default:l.hasOwnProperty(ne)||tt(t,a,ne,null,l,he)}}for(var J in l){var ne=l[J];if(he=s[J],l.hasOwnProperty(J)&&(ne!=null||he!=null))switch(J){case"type":d=ne;break;case"name":c=ne;break;case"checked":K=ne;break;case"defaultChecked":oe=ne;break;case"value":v=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ne!==he&&tt(t,a,J,ne,l,he)}}Ji(t,v,C,z,K,oe,d,c);return;case"select":ne=v=C=J=null;for(d in s)if(z=s[d],s.hasOwnProperty(d)&&z!=null)switch(d){case"value":break;case"multiple":ne=z;default:l.hasOwnProperty(d)||tt(t,a,d,null,l,z)}for(c in l)if(d=l[c],z=s[c],l.hasOwnProperty(c)&&(d!=null||z!=null))switch(c){case"value":J=d;break;case"defaultValue":C=d;break;case"multiple":v=d;default:d!==z&&tt(t,a,c,d,l,z)}a=C,s=v,l=ne,J!=null?rl(t,!!s,J,!1):!!l!=!!s&&(a!=null?rl(t,!!s,a,!0):rl(t,!!s,s?[]:"",!1));return;case"textarea":ne=J=null;for(C in s)if(c=s[C],s.hasOwnProperty(C)&&c!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:tt(t,a,C,null,l,c)}for(v in l)if(c=l[v],d=s[v],l.hasOwnProperty(v)&&(c!=null||d!=null))switch(v){case"value":J=c;break;case"defaultValue":ne=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(i(91));break;default:c!==d&&tt(t,a,v,c,l,d)}nu(t,J,ne);return;case"option":for(var Ne in s)J=s[Ne],s.hasOwnProperty(Ne)&&J!=null&&!l.hasOwnProperty(Ne)&&(Ne==="selected"?t.selected=!1:tt(t,a,Ne,null,l,J));for(z in l)J=l[z],ne=s[z],l.hasOwnProperty(z)&&J!==ne&&(J!=null||ne!=null)&&(z==="selected"?t.selected=J&&typeof J!="function"&&typeof J!="symbol":tt(t,a,z,J,l,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in s)J=s[Ce],s.hasOwnProperty(Ce)&&J!=null&&!l.hasOwnProperty(Ce)&&tt(t,a,Ce,null,l,J);for(K in l)if(J=l[K],ne=s[K],l.hasOwnProperty(K)&&J!==ne&&(J!=null||ne!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:tt(t,a,K,J,l,ne)}return;default:if(ec(a)){for(var at in s)J=s[at],s.hasOwnProperty(at)&&J!==void 0&&!l.hasOwnProperty(at)&&Go(t,a,at,void 0,l,J);for(oe in l)J=l[oe],ne=s[oe],!l.hasOwnProperty(oe)||J===ne||J===void 0&&ne===void 0||Go(t,a,oe,J,l,ne);return}}for(var Y in s)J=s[Y],s.hasOwnProperty(Y)&&J!=null&&!l.hasOwnProperty(Y)&&tt(t,a,Y,null,l,J);for(he in l)J=l[he],ne=s[he],!l.hasOwnProperty(he)||J===ne||J==null&&ne==null||tt(t,a,he,J,l,ne)}function ox(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var c=s[l],d=c.transferSize,v=c.initiatorType,C=c.duration;if(d&&C&&ox(v)){for(v=0,C=c.responseEnd,l+=1;l<s.length;l++){var z=s[l],K=z.startTime;if(K>C)break;var oe=z.transferSize,he=z.initiatorType;oe&&ox(he)&&(z=z.responseEnd,v+=oe*(z<C?1:(C-K)/(z-K)))}if(--l,a+=8*(d+v)/(c.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Fo=null,$o=null;function ri(t){return t.nodeType===9?t:t.ownerDocument}function dx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ux(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Yo(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Po=null;function gg(){var t=window.event;return t&&t.type==="popstate"?t===Po?!1:(Po=t,!0):(Po=null,!1)}var mx=typeof setTimeout=="function"?setTimeout:void 0,bg=typeof clearTimeout=="function"?clearTimeout:void 0,hx=typeof Promise=="function"?Promise:void 0,yg=typeof queueMicrotask=="function"?queueMicrotask:typeof hx<"u"?function(t){return hx.resolve(null).then(t).catch(vg)}:mx;function vg(t){setTimeout(function(){throw t})}function js(t){return t==="head"}function xx(t,a){var s=a,l=0;do{var c=s.nextSibling;if(t.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(c),ql(a);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")On(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,On(s);for(var d=s.firstChild;d;){var v=d.nextSibling,C=d.nodeName;d[Jl]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=v}}else s==="body"&&On(t.ownerDocument.body);s=c}while(s);ql(a)}function px(t,a){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function Qo(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Qo(s),Ii(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function jg(t,a,s,l){for(;t.nodeType===1;){var c=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Jl])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=pa(t.nextSibling),t===null)break}return null}function Ng(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=pa(t.nextSibling),t===null))return null;return t}function fx(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=pa(t.nextSibling),t===null))return null;return t}function Vo(t){return t.data==="$?"||t.data==="$~"}function Xo(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function wg(t,a){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||s.readyState!=="loading")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function pa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Zo=null;function gx(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(a===0)return pa(t.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}t=t.nextSibling}return null}function bx(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return t;a--}else s!=="/$"&&s!=="/&"||a++}t=t.previousSibling}return null}function yx(t,a,s){switch(a=ri(s),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function On(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ii(t)}var fa=new Map,vx=new Set;function ii(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ia=ee.d;ee.d={f:kg,r:Sg,D:_g,C:Cg,L:Eg,m:Ag,X:Dg,S:Tg,M:Rg};function kg(){var t=Ia.f(),a=Jr();return t||a}function Sg(t){var a=sl(t);a!==null&&a.tag===5&&a.type==="form"?Um(a):Ia.r(t)}var Ol=typeof document>"u"?null:document;function jx(t,a,s){var l=Ol;if(l&&typeof a=="string"&&a){var c=ca(a);c='link[rel="'+t+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),vx.has(c)||(vx.add(c),t={rel:t,crossOrigin:s,href:a},l.querySelector(c)===null&&(a=l.createElement("link"),Et(a,"link",t),jt(a),l.head.appendChild(a)))}}function _g(t){Ia.D(t),jx("dns-prefetch",t,null)}function Cg(t,a){Ia.C(t,a),jx("preconnect",t,a)}function Eg(t,a,s){Ia.L(t,a,s);var l=Ol;if(l&&t&&a){var c='link[rel="preload"][as="'+ca(a)+'"]';a==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+ca(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+ca(s.imageSizes)+'"]')):c+='[href="'+ca(t)+'"]';var d=c;switch(a){case"style":d=Ll(t);break;case"script":d=Ul(t)}fa.has(d)||(t=f({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),fa.set(d,t),l.querySelector(c)!==null||a==="style"&&l.querySelector(Ln(d))||a==="script"&&l.querySelector(Un(d))||(a=l.createElement("link"),Et(a,"link",t),jt(a),l.head.appendChild(a)))}}function Ag(t,a){Ia.m(t,a);var s=Ol;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",c='link[rel="modulepreload"][as="'+ca(l)+'"][href="'+ca(t)+'"]',d=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ul(t)}if(!fa.has(d)&&(t=f({rel:"modulepreload",href:t},a),fa.set(d,t),s.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Un(d)))return}l=s.createElement("link"),Et(l,"link",t),jt(l),s.head.appendChild(l)}}}function Tg(t,a,s){Ia.S(t,a,s);var l=Ol;if(l&&t){var c=ll(l).hoistableStyles,d=Ll(t);a=a||"default";var v=c.get(d);if(!v){var C={loading:0,preload:null};if(v=l.querySelector(Ln(d)))C.loading=5;else{t=f({rel:"stylesheet",href:t,"data-precedence":a},s),(s=fa.get(d))&&Io(t,s);var z=v=l.createElement("link");jt(z),Et(z,"link",t),z._p=new Promise(function(K,oe){z.onload=K,z.onerror=oe}),z.addEventListener("load",function(){C.loading|=1}),z.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ci(v,a,l)}v={type:"stylesheet",instance:v,count:1,state:C},c.set(d,v)}}}function Dg(t,a){Ia.X(t,a);var s=Ol;if(s&&t){var l=ll(s).hoistableScripts,c=Ul(t),d=l.get(c);d||(d=s.querySelector(Un(c)),d||(t=f({src:t,async:!0},a),(a=fa.get(c))&&Ko(t,a),d=s.createElement("script"),jt(d),Et(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function Rg(t,a){Ia.M(t,a);var s=Ol;if(s&&t){var l=ll(s).hoistableScripts,c=Ul(t),d=l.get(c);d||(d=s.querySelector(Un(c)),d||(t=f({src:t,async:!0,type:"module"},a),(a=fa.get(c))&&Ko(t,a),d=s.createElement("script"),jt(d),Et(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function Nx(t,a,s,l){var c=(c=le.current)?ii(c):null;if(!c)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Ll(s.href),s=ll(c).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ll(s.href);var d=ll(c).hoistableStyles,v=d.get(t);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=c.querySelector(Ln(t)))&&!d._p&&(v.instance=d,v.state.loading=5),fa.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},fa.set(t,s),d||Mg(c,t,s,v.state))),a&&l===null)throw Error(i(528,""));return v}if(a&&l!==null)throw Error(i(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ul(s),s=ll(c).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Ll(t){return'href="'+ca(t)+'"'}function Ln(t){return'link[rel="stylesheet"]['+t+"]"}function wx(t){return f({},t,{"data-precedence":t.precedence,precedence:null})}function Mg(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Et(a,"link",s),jt(a),t.head.appendChild(a))}function Ul(t){return'[src="'+ca(t)+'"]'}function Un(t){return"script[async]"+t}function kx(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+ca(s.href)+'"]');if(l)return a.instance=l,jt(l),l;var c=f({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),jt(l),Et(l,"style",c),ci(l,s.precedence,t),a.instance=l;case"stylesheet":c=Ll(s.href);var d=t.querySelector(Ln(c));if(d)return a.state.loading|=4,a.instance=d,jt(d),d;l=wx(s),(c=fa.get(c))&&Io(l,c),d=(t.ownerDocument||t).createElement("link"),jt(d);var v=d;return v._p=new Promise(function(C,z){v.onload=C,v.onerror=z}),Et(d,"link",l),a.state.loading|=4,ci(d,s.precedence,t),a.instance=d;case"script":return d=Ul(s.src),(c=t.querySelector(Un(d)))?(a.instance=c,jt(c),c):(l=s,(c=fa.get(d))&&(l=f({},s),Ko(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),jt(c),Et(c,"link",l),t.head.appendChild(c),a.instance=c);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,ci(l,s.precedence,t));return a.instance}function ci(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,d=c,v=0;v<l.length;v++){var C=l[v];if(C.dataset.precedence===a)d=C;else if(d!==c)break}d?d.parentNode.insertBefore(t,d.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Io(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Ko(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var oi=null;function Sx(t,a,s){if(oi===null){var l=new Map,c=oi=new Map;c.set(s,l)}else c=oi,l=c.get(s),l||(l=new Map,c.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),c=0;c<s.length;c++){var d=s[c];if(!(d[Jl]||d[kt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(a)||"";v=t+v;var C=l.get(v);C?C.push(d):l.set(v,[d])}}return l}function _x(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function zg(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Cx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Og(t,a,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=Ll(l.href),d=a.querySelector(Ln(c));if(d){a=d._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=di.bind(t),a.then(t,t)),s.state.loading|=4,s.instance=d,jt(d);return}d=a.ownerDocument||a,l=wx(l),(c=fa.get(c))&&Io(l,c),d=d.createElement("link"),jt(d);var v=d;v._p=new Promise(function(C,z){v.onload=C,v.onerror=z}),Et(d,"link",l),s.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=di.bind(t),a.addEventListener("load",s),a.addEventListener("error",s))}}var Jo=0;function Lg(t,a){return t.stylesheets&&t.count===0&&mi(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&mi(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+a);0<t.imgBytes&&Jo===0&&(Jo=62500*fg());var c=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&mi(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Jo?50:800)+a);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function di(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mi(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ui=null;function mi(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ui=new Map,a.forEach(Ug,t),ui=null,di.call(t))}function Ug(t,a){if(!(a.state.loading&4)){var s=ui.get(t);if(s)var l=s.get(null);else{s=new Map,ui.set(t,s);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var v=c[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(s.set(v.dataset.precedence,v),l=v)}l&&s.set(null,l)}c=a.instance,v=c.getAttribute("data-precedence"),d=s.get(v)||l,d===l&&s.set(null,c),s.set(v,c),this.count++,l=di.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),d?d.parentNode.insertBefore(c,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),a.state.loading|=4}}var qn={$$typeof:q,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function qg(t,a,s,l,c,d,v,C,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Ex(t,a,s,l,c,d,v,C,z,K,oe,he){return t=new qg(t,a,s,v,z,K,oe,he,C),a=1,d===!0&&(a|=24),d=Jt(3,null,null,a),t.current=d,d.stateNode=t,a=Tc(),a.refCount++,t.pooledCache=a,a.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:a},zc(d),t}function Ax(t){return t?(t=xl,t):xl}function Tx(t,a,s,l,c,d){c=Ax(c),l.context===null?l.context=c:l.pendingContext=c,l=ds(a),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=us(t,l,a),s!==null&&(Qt(s,t,a),fn(s,t,a))}function Dx(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Wo(t,a){Dx(t,a),(t=t.alternate)&&Dx(t,a)}function Rx(t){if(t.tag===13||t.tag===31){var a=Os(t,67108864);a!==null&&Qt(a,t,67108864),Wo(t,67108864)}}function Mx(t){if(t.tag===13||t.tag===31){var a=sa();a=Vi(a);var s=Os(t,a);s!==null&&Qt(s,t,a),Wo(t,a)}}var hi=!0;function Bg(t,a,s,l){var c=R.T;R.T=null;var d=ee.p;try{ee.p=2,ed(t,a,s,l)}finally{ee.p=d,R.T=c}}function Hg(t,a,s,l){var c=R.T;R.T=null;var d=ee.p;try{ee.p=8,ed(t,a,s,l)}finally{ee.p=d,R.T=c}}function ed(t,a,s,l){if(hi){var c=td(l);if(c===null)Ho(t,a,l,xi,s),Ox(t,l);else if(Fg(c,t,a,s,l))l.stopPropagation();else if(Ox(t,l),a&4&&-1<Gg.indexOf(t)){for(;c!==null;){var d=sl(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Ts(d.pendingLanes);if(v!==0){var C=d;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var z=1<<31-Mt(v);C.entanglements[1]|=z,v&=~z}Ca(d),(Qe&6)===0&&(Ir=Dt()+500,Rn(0))}}break;case 31:case 13:C=Os(d,2),C!==null&&Qt(C,d,2),Jr(),Wo(d,2)}if(d=td(l),d===null&&Ho(t,a,l,xi,s),d===c)break;c=d}c!==null&&l.stopPropagation()}else Ho(t,a,l,null,s)}}function td(t){return t=ac(t),ad(t)}var xi=null;function ad(t){if(xi=null,t=al(t),t!==null){var a=x(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=h(a),t!==null)return t;t=null}else if(s===31){if(t=N(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return xi=t,null}function zx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ra()){case nr:return 2;case Ut:return 8;case el:case Yi:return 32;case de:return 268435456;default:return 32}default:return 32}}var sd=!1,Ns=null,ws=null,ks=null,Bn=new Map,Hn=new Map,Ss=[],Gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ox(t,a){switch(t){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":Bn.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hn.delete(a.pointerId)}}function Gn(t,a,s,l,c,d){return t===null||t.nativeEvent!==d?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},a!==null&&(a=sl(a),a!==null&&Rx(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,c!==null&&a.indexOf(c)===-1&&a.push(c),t)}function Fg(t,a,s,l,c){switch(a){case"focusin":return Ns=Gn(Ns,t,a,s,l,c),!0;case"dragenter":return ws=Gn(ws,t,a,s,l,c),!0;case"mouseover":return ks=Gn(ks,t,a,s,l,c),!0;case"pointerover":var d=c.pointerId;return Bn.set(d,Gn(Bn.get(d)||null,t,a,s,l,c)),!0;case"gotpointercapture":return d=c.pointerId,Hn.set(d,Gn(Hn.get(d)||null,t,a,s,l,c)),!0}return!1}function Lx(t){var a=al(t.target);if(a!==null){var s=x(a);if(s!==null){if(a=s.tag,a===13){if(a=h(s),a!==null){t.blockedOn=a,Id(t.priority,function(){Mx(s)});return}}else if(a===31){if(a=N(s),a!==null){t.blockedOn=a,Id(t.priority,function(){Mx(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pi(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=td(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);tc=l,s.target.dispatchEvent(l),tc=null}else return a=sl(s),a!==null&&Rx(a),t.blockedOn=s,!1;a.shift()}return!0}function Ux(t,a,s){pi(t)&&s.delete(a)}function $g(){sd=!1,Ns!==null&&pi(Ns)&&(Ns=null),ws!==null&&pi(ws)&&(ws=null),ks!==null&&pi(ks)&&(ks=null),Bn.forEach(Ux),Hn.forEach(Ux)}function fi(t,a){t.blockedOn===a&&(t.blockedOn=null,sd||(sd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$g)))}var gi=null;function qx(t){gi!==t&&(gi=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gi===t&&(gi=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],c=t[a+2];if(typeof l!="function"){if(ad(l||s)===null)continue;break}var d=sl(s);d!==null&&(t.splice(a,3),a-=3,eo(d,{pending:!0,data:c,method:s.method,action:l},l,c))}}))}function ql(t){function a(z){return fi(z,t)}Ns!==null&&fi(Ns,t),ws!==null&&fi(ws,t),ks!==null&&fi(ks,t),Bn.forEach(a),Hn.forEach(a);for(var s=0;s<Ss.length;s++){var l=Ss[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ss.length&&(s=Ss[0],s.blockedOn===null);)Lx(s),s.blockedOn===null&&Ss.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var c=s[l],d=s[l+1],v=c[Ht]||null;if(typeof d=="function")v||qx(s);else if(v){var C=null;if(d&&d.hasAttribute("formAction")){if(c=d,v=d[Ht]||null)C=v.formAction;else if(ad(c)!==null)continue}else C=v.action;typeof C=="function"?s[l+1]=C:(s.splice(l,3),l-=3),qx(s)}}}function Bx(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return c=v})},focusReset:"manual",scroll:"manual"})}function a(){c!==null&&(c(),c=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),c!==null&&(c(),c=null)}}}function ld(t){this._internalRoot=t}bi.prototype.render=ld.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var s=a.current,l=sa();Tx(s,l,t,a,null,null)},bi.prototype.unmount=ld.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Tx(t.current,2,null,t,null,null),Jr(),a[tl]=null}};function bi(t){this._internalRoot=t}bi.prototype.unstable_scheduleHydration=function(t){if(t){var a=Zd();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Ss.length&&a!==0&&a<Ss[s].priority;s++);Ss.splice(s,0,t),s===0&&Lx(t)}};var Hx=r.version;if(Hx!=="19.2.3")throw Error(i(527,Hx,"19.2.3"));ee.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(a),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var Yg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{$e=yi.inject(Yg),Xe=yi}catch{}}return $n.createRoot=function(t,a){if(!u(t))throw Error(i(299));var s=!1,l="",c=Vm,d=Xm,v=Zm;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Ex(t,1,!1,null,null,s,l,null,c,d,v,Bx),t[tl]=a.current,Bo(t),new ld(a)},$n.hydrateRoot=function(t,a,s){if(!u(t))throw Error(i(299));var l=!1,c="",d=Vm,v=Xm,C=Zm,z=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.formState!==void 0&&(z=s.formState)),a=Ex(t,1,!0,a,s??null,l,c,z,d,v,C,Bx),a.context=Ax(null),s=a.current,l=sa(),l=Vi(l),c=ds(l),c.callback=null,us(s,c,l),s=l,a.current.lanes=s,Kl(a,s),Ca(a),t[tl]=a.current,Bo(t),new bi(a)},$n.version="19.2.3",$n}var Ix;function eb(){if(Ix)return id.exports;Ix=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),id.exports=Wg(),id.exports}var tb=eb();var Kx="popstate";function ab(n={}){function r(i,u){let{pathname:x,search:h,hash:N}=i.location;return vd("",{pathname:x,search:h,hash:N},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function o(i,u){return typeof u=="string"?u:Kn(u)}return lb(r,o,null,n)}function ct(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function la(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function sb(){return Math.random().toString(36).substring(2,10)}function Jx(n,r){return{usr:n.state,key:n.key,idx:r}}function vd(n,r,o=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof r=="string"?Yl(r):r,state:o,key:r&&r.key||i||sb()}}function Kn({pathname:n="/",search:r="",hash:o=""}){return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Yl(n){let r={};if(n){let o=n.indexOf("#");o>=0&&(r.hash=n.substring(o),n=n.substring(0,o));let i=n.indexOf("?");i>=0&&(r.search=n.substring(i),n=n.substring(0,i)),n&&(r.pathname=n)}return r}function lb(n,r,o,i={}){let{window:u=document.defaultView,v5Compat:x=!1}=i,h=u.history,N="POP",y=null,g=p();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function p(){return(h.state||{idx:null}).idx}function f(){N="POP";let b=p(),A=b==null?null:b-g;g=b,y&&y({action:N,location:S.location,delta:A})}function w(b,A){N="PUSH";let T=vd(S.location,b,A);g=p()+1;let q=Jx(T,g),D=S.createHref(T);try{h.pushState(q,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;u.location.assign(D)}x&&y&&y({action:N,location:S.location,delta:1})}function _(b,A){N="REPLACE";let T=vd(S.location,b,A);g=p();let q=Jx(T,g),D=S.createHref(T);h.replaceState(q,"",D),x&&y&&y({action:N,location:S.location,delta:0})}function k(b){return nb(b)}let S={get action(){return N},get location(){return n(u,h)},listen(b){if(y)throw new Error("A history only accepts one active listener");return u.addEventListener(Kx,f),y=b,()=>{u.removeEventListener(Kx,f),y=null}},createHref(b){return r(u,b)},createURL:k,encodeLocation(b){let A=k(b);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:w,replace:_,go(b){return h.go(b)}};return S}function nb(n,r=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),ct(o,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Kn(n);return i=i.replace(/ $/,"%20"),!r&&i.startsWith("//")&&(i=o+i),new URL(i,o)}function D0(n,r,o="/"){return rb(n,r,o,!1)}function rb(n,r,o,i){let u=typeof r=="string"?Yl(r):r,x=Ja(u.pathname||"/",o);if(x==null)return null;let h=R0(n);ib(h);let N=null;for(let y=0;N==null&&y<h.length;++y){let g=bb(x);N=fb(h[y],g,i)}return N}function R0(n,r=[],o=[],i="",u=!1){let x=(h,N,y=u,g)=>{let p={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:N,route:h};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&y)return;ct(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let f=Ka([i,p.relativePath]),w=o.concat(p);h.children&&h.children.length>0&&(ct(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),R0(h.children,r,w,f,y)),!(h.path==null&&!h.index)&&r.push({path:f,score:xb(f,h.index),routesMeta:w})};return n.forEach((h,N)=>{if(h.path===""||!h.path?.includes("?"))x(h,N);else for(let y of M0(h.path))x(h,N,!0,y)}),r}function M0(n){let r=n.split("/");if(r.length===0)return[];let[o,...i]=r,u=o.endsWith("?"),x=o.replace(/\?$/,"");if(i.length===0)return u?[x,""]:[x];let h=M0(i.join("/")),N=[];return N.push(...h.map(y=>y===""?x:[x,y].join("/"))),u&&N.push(...h),N.map(y=>n.startsWith("/")&&y===""?"/":y)}function ib(n){n.sort((r,o)=>r.score!==o.score?o.score-r.score:pb(r.routesMeta.map(i=>i.childrenIndex),o.routesMeta.map(i=>i.childrenIndex)))}var cb=/^:[\w-]+$/,ob=3,db=2,ub=1,mb=10,hb=-2,Wx=n=>n==="*";function xb(n,r){let o=n.split("/"),i=o.length;return o.some(Wx)&&(i+=hb),r&&(i+=db),o.filter(u=>!Wx(u)).reduce((u,x)=>u+(cb.test(x)?ob:x===""?ub:mb),i)}function pb(n,r){return n.length===r.length&&n.slice(0,-1).every((i,u)=>i===r[u])?n[n.length-1]-r[r.length-1]:0}function fb(n,r,o=!1){let{routesMeta:i}=n,u={},x="/",h=[];for(let N=0;N<i.length;++N){let y=i[N],g=N===i.length-1,p=x==="/"?r:r.slice(x.length)||"/",f=Ri({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},p),w=y.route;if(!f&&g&&o&&!i[i.length-1].route.index&&(f=Ri({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},p)),!f)return null;Object.assign(u,f.params),h.push({params:u,pathname:Ka([x,f.pathname]),pathnameBase:Nb(Ka([x,f.pathnameBase])),route:w}),f.pathnameBase!=="/"&&(x=Ka([x,f.pathnameBase]))}return h}function Ri(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[o,i]=gb(n.path,n.caseSensitive,n.end),u=r.match(o);if(!u)return null;let x=u[0],h=x.replace(/(.)\/+$/,"$1"),N=u.slice(1);return{params:i.reduce((g,{paramName:p,isOptional:f},w)=>{if(p==="*"){let k=N[w]||"";h=x.slice(0,x.length-k.length).replace(/(.)\/+$/,"$1")}const _=N[w];return f&&!_?g[p]=void 0:g[p]=(_||"").replace(/%2F/g,"/"),g},{}),pathname:x,pathnameBase:h,pattern:n}}function gb(n,r=!1,o=!0){la(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,N,y)=>(i.push({paramName:N,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,r?void 0:"i"),i]}function bb(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return la(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),n}}function Ja(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let o=r.endsWith("/")?r.length-1:r.length,i=n.charAt(o);return i&&i!=="/"?null:n.slice(o)||"/"}var z0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yb=n=>z0.test(n);function vb(n,r="/"){let{pathname:o,search:i="",hash:u=""}=typeof n=="string"?Yl(n):n,x;if(o)if(yb(o))x=o;else{if(o.includes("//")){let h=o;o=o.replace(/\/\/+/g,"/"),la(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${o}`)}o.startsWith("/")?x=e0(o.substring(1),"/"):x=e0(o,r)}else x=r;return{pathname:x,search:wb(i),hash:kb(u)}}function e0(n,r){let o=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?o.length>1&&o.pop():u!=="."&&o.push(u)}),o.length>1?o.join("/"):"/"}function ud(n,r,o,i){return`Cannot include a '${n}' character in a manually specified \`to.${r}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jb(n){return n.filter((r,o)=>o===0||r.route.path&&r.route.path.length>0)}function Td(n){let r=jb(n);return r.map((o,i)=>i===r.length-1?o.pathname:o.pathnameBase)}function Dd(n,r,o,i=!1){let u;typeof n=="string"?u=Yl(n):(u={...n},ct(!u.pathname||!u.pathname.includes("?"),ud("?","pathname","search",u)),ct(!u.pathname||!u.pathname.includes("#"),ud("#","pathname","hash",u)),ct(!u.search||!u.search.includes("#"),ud("#","search","hash",u)));let x=n===""||u.pathname==="",h=x?"/":u.pathname,N;if(h==null)N=o;else{let f=r.length-1;if(!i&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),f-=1;u.pathname=w.join("/")}N=f>=0?r[f]:"/"}let y=vb(u,N),g=h&&h!=="/"&&h.endsWith("/"),p=(x||h===".")&&o.endsWith("/");return!y.pathname.endsWith("/")&&(g||p)&&(y.pathname+="/"),y}var Ka=n=>n.join("/").replace(/\/\/+/g,"/"),Nb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Sb=class{constructor(n,r,o,i=!1){this.status=n,this.statusText=r||"",this.internal=i,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function _b(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Cb(n){return n.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var O0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function L0(n,r){let o=n;if(typeof o!="string"||!z0.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let i=o,u=!1;if(O0)try{let x=new URL(window.location.href),h=o.startsWith("//")?new URL(x.protocol+o):new URL(o),N=Ja(h.pathname,r);h.origin===x.origin&&N!=null?o=N+h.search+h.hash:u=!0}catch{la(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:u,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var U0=["POST","PUT","PATCH","DELETE"];new Set(U0);var Eb=["GET",...U0];new Set(Eb);var Pl=m.createContext(null);Pl.displayName="DataRouter";var Oi=m.createContext(null);Oi.displayName="DataRouterState";var Ab=m.createContext(!1),q0=m.createContext({isTransitioning:!1});q0.displayName="ViewTransition";var Tb=m.createContext(new Map);Tb.displayName="Fetchers";var Db=m.createContext(null);Db.displayName="Await";var na=m.createContext(null);na.displayName="Navigation";var Jn=m.createContext(null);Jn.displayName="Location";var ba=m.createContext({outlet:null,matches:[],isDataRoute:!1});ba.displayName="Route";var Rd=m.createContext(null);Rd.displayName="RouteError";var B0="REACT_ROUTER_ERROR",Rb="REDIRECT",Mb="ROUTE_ERROR_RESPONSE";function zb(n){if(n.startsWith(`${B0}:${Rb}:{`))try{let r=JSON.parse(n.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function Ob(n){if(n.startsWith(`${B0}:${Mb}:{`))try{let r=JSON.parse(n.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new Sb(r.status,r.statusText,r.data)}catch{}}function Lb(n,{relative:r}={}){ct(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:i}=m.useContext(na),{hash:u,pathname:x,search:h}=er(n,{relative:r}),N=x;return o!=="/"&&(N=x==="/"?o:Ka([o,x])),i.createHref({pathname:N,search:h,hash:u})}function Ql(){return m.useContext(Jn)!=null}function ya(){return ct(Ql(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Jn).location}var H0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function G0(n){m.useContext(na).static||m.useLayoutEffect(n)}function Fe(){let{isDataRoute:n}=m.useContext(ba);return n?Kb():Ub()}function Ub(){ct(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let n=m.useContext(Pl),{basename:r,navigator:o}=m.useContext(na),{matches:i}=m.useContext(ba),{pathname:u}=ya(),x=JSON.stringify(Td(i)),h=m.useRef(!1);return G0(()=>{h.current=!0}),m.useCallback((y,g={})=>{if(la(h.current,H0),!h.current)return;if(typeof y=="number"){o.go(y);return}let p=Dd(y,JSON.parse(x),u,g.relative==="path");n==null&&r!=="/"&&(p.pathname=p.pathname==="/"?r:Ka([r,p.pathname])),(g.replace?o.replace:o.push)(p,g.state,g)},[r,o,x,u,n])}var qb=m.createContext(null);function Bb(n){let r=m.useContext(ba).outlet;return m.useMemo(()=>r&&m.createElement(qb.Provider,{value:n},r),[r,n])}function Wn(){let{matches:n}=m.useContext(ba),r=n[n.length-1];return r?r.params:{}}function er(n,{relative:r}={}){let{matches:o}=m.useContext(ba),{pathname:i}=ya(),u=JSON.stringify(Td(o));return m.useMemo(()=>Dd(n,JSON.parse(u),i,r==="path"),[n,u,i,r])}function Hb(n,r){return F0(n,r)}function F0(n,r,o,i,u){ct(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:x}=m.useContext(na),{matches:h}=m.useContext(ba),N=h[h.length-1],y=N?N.params:{},g=N?N.pathname:"/",p=N?N.pathnameBase:"/",f=N&&N.route;{let T=f&&f.path||"";Y0(g,!f||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let w=ya(),_;if(r){let T=typeof r=="string"?Yl(r):r;ct(p==="/"||T.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),_=T}else _=w;let k=_.pathname||"/",S=k;if(p!=="/"){let T=p.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(T.length).join("/")}let b=D0(n,{pathname:S});la(f||b!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),la(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=Pb(b&&b.map(T=>Object.assign({},T,{params:Object.assign({},y,T.params),pathname:Ka([p,x.encodeLocation?x.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:Ka([p,x.encodeLocation?x.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),h,o,i,u);return r&&A?m.createElement(Jn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},A):A}function Gb(){let n=Ib(),r=_b(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),o=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:i},x={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:x},"ErrorBoundary")," or"," ",m.createElement("code",{style:x},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},r),o?m.createElement("pre",{style:u},o):null,h)}var Fb=m.createElement(Gb,null),$0=class extends m.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){this.props.onError?this.props.onError(n,r):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const o=Ob(n.digest);o&&(n=o)}let r=n!==void 0?m.createElement(ba.Provider,{value:this.props.routeContext},m.createElement(Rd.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?m.createElement($b,{error:n},r):r}};$0.contextType=Ab;var md=new WeakMap;function $b({children:n,error:r}){let{basename:o}=m.useContext(na);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let i=zb(r.digest);if(i){let u=md.get(r);if(u)throw u;let x=L0(i.location,o);if(O0&&!md.get(r))if(x.isExternal||i.reloadDocument)window.location.href=x.absoluteURL||x.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(x.to,{replace:i.replace}));throw md.set(r,h),h}return m.createElement("meta",{httpEquiv:"refresh",content:`0;url=${x.absoluteURL||x.to}`})}}return n}function Yb({routeContext:n,match:r,children:o}){let i=m.useContext(Pl);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(ba.Provider,{value:n},o)}function Pb(n,r=[],o=null,i=null,u=null){if(n==null){if(!o)return null;if(o.errors)n=o.matches;else if(r.length===0&&!o.initialized&&o.matches.length>0)n=o.matches;else return null}let x=n,h=o?.errors;if(h!=null){let p=x.findIndex(f=>f.route.id&&h?.[f.route.id]!==void 0);ct(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),x=x.slice(0,Math.min(x.length,p+1))}let N=!1,y=-1;if(o)for(let p=0;p<x.length;p++){let f=x[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(y=p),f.route.id){let{loaderData:w,errors:_}=o,k=f.route.loader&&!w.hasOwnProperty(f.route.id)&&(!_||_[f.route.id]===void 0);if(f.route.lazy||k){N=!0,y>=0?x=x.slice(0,y+1):x=[x[0]];break}}}let g=o&&i?(p,f)=>{i(p,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:Cb(o.matches),errorInfo:f})}:void 0;return x.reduceRight((p,f,w)=>{let _,k=!1,S=null,b=null;o&&(_=h&&f.route.id?h[f.route.id]:void 0,S=f.route.errorElement||Fb,N&&(y<0&&w===0?(Y0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,b=null):y===w&&(k=!0,b=f.route.hydrateFallbackElement||null)));let A=r.concat(x.slice(0,w+1)),T=()=>{let q;return _?q=S:k?q=b:f.route.Component?q=m.createElement(f.route.Component,null):f.route.element?q=f.route.element:q=p,m.createElement(Yb,{match:f,routeContext:{outlet:p,matches:A,isDataRoute:o!=null},children:q})};return o&&(f.route.ErrorBoundary||f.route.errorElement||w===0)?m.createElement($0,{location:o.location,revalidation:o.revalidation,component:S,error:_,children:T(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:g}):T()},null)}function Md(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qb(n){let r=m.useContext(Pl);return ct(r,Md(n)),r}function Vb(n){let r=m.useContext(Oi);return ct(r,Md(n)),r}function Xb(n){let r=m.useContext(ba);return ct(r,Md(n)),r}function zd(n){let r=Xb(n),o=r.matches[r.matches.length-1];return ct(o.route.id,`${n} can only be used on routes that contain a unique "id"`),o.route.id}function Zb(){return zd("useRouteId")}function Ib(){let n=m.useContext(Rd),r=Vb("useRouteError"),o=zd("useRouteError");return n!==void 0?n:r.errors?.[o]}function Kb(){let{router:n}=Qb("useNavigate"),r=zd("useNavigate"),o=m.useRef(!1);return G0(()=>{o.current=!0}),m.useCallback(async(u,x={})=>{la(o.current,H0),o.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:r,...x}))},[n,r])}var t0={};function Y0(n,r,o){!r&&!t0[n]&&(t0[n]=!0,la(!1,o))}m.memo(Jb);function Jb({routes:n,future:r,state:o,onError:i}){return F0(n,void 0,o,i,r)}function P0({to:n,replace:r,state:o,relative:i}){ct(Ql(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=m.useContext(na);la(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:x}=m.useContext(ba),{pathname:h}=ya(),N=Fe(),y=Dd(n,Td(x),h,i==="path"),g=JSON.stringify(y);return m.useEffect(()=>{N(JSON.parse(g),{replace:r,state:o,relative:i})},[N,g,i,r,o]),null}function Wb(n){return Bb(n.context)}function ve(n){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ey({basename:n="/",children:r=null,location:o,navigationType:i="POP",navigator:u,static:x=!1,unstable_useTransitions:h}){ct(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let N=n.replace(/^\/*/,"/"),y=m.useMemo(()=>({basename:N,navigator:u,static:x,unstable_useTransitions:h,future:{}}),[N,u,x,h]);typeof o=="string"&&(o=Yl(o));let{pathname:g="/",search:p="",hash:f="",state:w=null,key:_="default"}=o,k=m.useMemo(()=>{let S=Ja(g,N);return S==null?null:{location:{pathname:S,search:p,hash:f,state:w,key:_},navigationType:i}},[N,g,p,f,w,_,i]);return la(k!=null,`<Router basename="${N}"> is not able to match the URL "${g}${p}${f}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:m.createElement(na.Provider,{value:y},m.createElement(Jn.Provider,{children:r,value:k}))}function ty({children:n,location:r}){return Hb(jd(n),r)}function jd(n,r=[]){let o=[];return m.Children.forEach(n,(i,u)=>{if(!m.isValidElement(i))return;let x=[...r,u];if(i.type===m.Fragment){o.push.apply(o,jd(i.props.children,x));return}ct(i.type===ve,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||x.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=jd(i.props.children,x)),o.push(h)}),o}var _i="get",Ci="application/x-www-form-urlencoded";function Li(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ay(n){return Li(n)&&n.tagName.toLowerCase()==="button"}function sy(n){return Li(n)&&n.tagName.toLowerCase()==="form"}function ly(n){return Li(n)&&n.tagName.toLowerCase()==="input"}function ny(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ry(n,r){return n.button===0&&(!r||r==="_self")&&!ny(n)}function Nd(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((r,o)=>{let i=n[o];return r.concat(Array.isArray(i)?i.map(u=>[o,u]):[[o,i]])},[]))}function iy(n,r){let o=Nd(n);return r&&r.forEach((i,u)=>{o.has(u)||r.getAll(u).forEach(x=>{o.append(u,x)})}),o}var vi=null;function cy(){if(vi===null)try{new FormData(document.createElement("form"),0),vi=!1}catch{vi=!0}return vi}var oy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hd(n){return n!=null&&!oy.has(n)?(la(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ci}"`),null):n}function dy(n,r){let o,i,u,x,h;if(sy(n)){let N=n.getAttribute("action");i=N?Ja(N,r):null,o=n.getAttribute("method")||_i,u=hd(n.getAttribute("enctype"))||Ci,x=new FormData(n)}else if(ay(n)||ly(n)&&(n.type==="submit"||n.type==="image")){let N=n.form;if(N==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||N.getAttribute("action");if(i=y?Ja(y,r):null,o=n.getAttribute("formmethod")||N.getAttribute("method")||_i,u=hd(n.getAttribute("formenctype"))||hd(N.getAttribute("enctype"))||Ci,x=new FormData(N,n),!cy()){let{name:g,type:p,value:f}=n;if(p==="image"){let w=g?`${g}.`:"";x.append(`${w}x`,"0"),x.append(`${w}y`,"0")}else g&&x.append(g,f)}}else{if(Li(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=_i,i=null,u=Ci,h=n}return x&&u==="text/plain"&&(h=x,x=void 0),{action:i,method:o.toLowerCase(),encType:u,formData:x,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Od(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function uy(n,r,o){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${o}`:r&&Ja(i.pathname,r)==="/"?i.pathname=`${r.replace(/\/$/,"")}/_root.${o}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${o}`,i}async function my(n,r){if(n.id in r)return r[n.id];try{let o=await import(n.module);return r[n.id]=o,o}catch(o){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hy(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function xy(n,r,o){let i=await Promise.all(n.map(async u=>{let x=r.routes[u.route.id];if(x){let h=await my(x,o);return h.links?h.links():[]}return[]}));return by(i.flat(1).filter(hy).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function a0(n,r,o,i,u,x){let h=(y,g)=>o[g]?y.route.id!==o[g].route.id:!0,N=(y,g)=>o[g].pathname!==y.pathname||o[g].route.path?.endsWith("*")&&o[g].params["*"]!==y.params["*"];return x==="assets"?r.filter((y,g)=>h(y,g)||N(y,g)):x==="data"?r.filter((y,g)=>{let p=i.routes[y.route.id];if(!p||!p.hasLoader)return!1;if(h(y,g)||N(y,g))return!0;if(y.route.shouldRevalidate){let f=y.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function py(n,r,{includeHydrateFallback:o}={}){return fy(n.map(i=>{let u=r.routes[i.route.id];if(!u)return[];let x=[u.module];return u.clientActionModule&&(x=x.concat(u.clientActionModule)),u.clientLoaderModule&&(x=x.concat(u.clientLoaderModule)),o&&u.hydrateFallbackModule&&(x=x.concat(u.hydrateFallbackModule)),u.imports&&(x=x.concat(u.imports)),x}).flat(1))}function fy(n){return[...new Set(n)]}function gy(n){let r={},o=Object.keys(n).sort();for(let i of o)r[i]=n[i];return r}function by(n,r){let o=new Set;return new Set(r),n.reduce((i,u)=>{let x=JSON.stringify(gy(u));return o.has(x)||(o.add(x),i.push({key:x,link:u})),i},[])}function Q0(){let n=m.useContext(Pl);return Od(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yy(){let n=m.useContext(Oi);return Od(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ld=m.createContext(void 0);Ld.displayName="FrameworkContext";function V0(){let n=m.useContext(Ld);return Od(n,"You must render this element inside a <HydratedRouter> element"),n}function vy(n,r){let o=m.useContext(Ld),[i,u]=m.useState(!1),[x,h]=m.useState(!1),{onFocus:N,onBlur:y,onMouseEnter:g,onMouseLeave:p,onTouchStart:f}=r,w=m.useRef(null);m.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let S=A=>{A.forEach(T=>{h(T.isIntersecting)})},b=new IntersectionObserver(S,{threshold:.5});return w.current&&b.observe(w.current),()=>{b.disconnect()}}},[n]),m.useEffect(()=>{if(i){let S=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(S)}}},[i]);let _=()=>{u(!0)},k=()=>{u(!1),h(!1)};return o?n!=="intent"?[x,w,{}]:[x,w,{onFocus:Yn(N,_),onBlur:Yn(y,k),onMouseEnter:Yn(g,_),onMouseLeave:Yn(p,k),onTouchStart:Yn(f,_)}]:[!1,w,{}]}function Yn(n,r){return o=>{n&&n(o),o.defaultPrevented||r(o)}}function jy({page:n,...r}){let{router:o}=Q0(),i=m.useMemo(()=>D0(o.routes,n,o.basename),[o.routes,n,o.basename]);return i?m.createElement(wy,{page:n,matches:i,...r}):null}function Ny(n){let{manifest:r,routeModules:o}=V0(),[i,u]=m.useState([]);return m.useEffect(()=>{let x=!1;return xy(n,r,o).then(h=>{x||u(h)}),()=>{x=!0}},[n,r,o]),i}function wy({page:n,matches:r,...o}){let i=ya(),{manifest:u,routeModules:x}=V0(),{basename:h}=Q0(),{loaderData:N,matches:y}=yy(),g=m.useMemo(()=>a0(n,r,y,u,i,"data"),[n,r,y,u,i]),p=m.useMemo(()=>a0(n,r,y,u,i,"assets"),[n,r,y,u,i]),f=m.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let k=new Set,S=!1;if(r.forEach(A=>{let T=u.routes[A.route.id];!T||!T.hasLoader||(!g.some(q=>q.route.id===A.route.id)&&A.route.id in N&&x[A.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:k.add(A.route.id))}),k.size===0)return[];let b=uy(n,h,"data");return S&&k.size>0&&b.searchParams.set("_routes",r.filter(A=>k.has(A.route.id)).map(A=>A.route.id).join(",")),[b.pathname+b.search]},[h,N,i,u,g,r,n,x]),w=m.useMemo(()=>py(p,u),[p,u]),_=Ny(p);return m.createElement(m.Fragment,null,f.map(k=>m.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...o})),w.map(k=>m.createElement("link",{key:k,rel:"modulepreload",href:k,...o})),_.map(({key:k,link:S})=>m.createElement("link",{key:k,nonce:o.nonce,...S})))}function ky(...n){return r=>{n.forEach(o=>{typeof o=="function"?o(r):o!=null&&(o.current=r)})}}var Sy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sy&&(window.__reactRouterVersion="7.11.0")}catch{}function _y({basename:n,children:r,unstable_useTransitions:o,window:i}){let u=m.useRef();u.current==null&&(u.current=ab({window:i,v5Compat:!0}));let x=u.current,[h,N]=m.useState({action:x.action,location:x.location}),y=m.useCallback(g=>{o===!1?N(g):m.startTransition(()=>N(g))},[o]);return m.useLayoutEffect(()=>x.listen(y),[x,y]),m.createElement(ey,{basename:n,children:r,location:h.location,navigationType:h.action,navigator:x,unstable_useTransitions:o})}var X0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z0=m.forwardRef(function({onClick:r,discover:o="render",prefetch:i="none",relative:u,reloadDocument:x,replace:h,state:N,target:y,to:g,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:w,..._},k){let{basename:S,unstable_useTransitions:b}=m.useContext(na),A=typeof g=="string"&&X0.test(g),T=L0(g,S);g=T.to;let q=Lb(g,{relative:u}),[D,M,se]=vy(i,_),Q=Ay(g,{replace:h,state:N,target:y,preventScrollReset:p,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:w,unstable_useTransitions:b});function O(H){r&&r(H),H.defaultPrevented||Q(H)}let P=m.createElement("a",{..._,...se,href:T.absoluteURL||q,onClick:T.isExternal||x?r:O,ref:ky(k,M),target:y,"data-discover":!A&&o==="render"?"true":void 0});return D&&!A?m.createElement(m.Fragment,null,P,m.createElement(jy,{page:q})):P});Z0.displayName="Link";var wd=m.forwardRef(function({"aria-current":r="page",caseSensitive:o=!1,className:i="",end:u=!1,style:x,to:h,viewTransition:N,children:y,...g},p){let f=er(h,{relative:g.relative}),w=ya(),_=m.useContext(Oi),{navigator:k,basename:S}=m.useContext(na),b=_!=null&&Oy(f)&&N===!0,A=k.encodeLocation?k.encodeLocation(f).pathname:f.pathname,T=w.pathname,q=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;o||(T=T.toLowerCase(),q=q?q.toLowerCase():null,A=A.toLowerCase()),q&&S&&(q=Ja(q,S)||q);const D=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let M=T===A||!u&&T.startsWith(A)&&T.charAt(D)==="/",se=q!=null&&(q===A||!u&&q.startsWith(A)&&q.charAt(A.length)==="/"),Q={isActive:M,isPending:se,isTransitioning:b},O=M?r:void 0,P;typeof i=="function"?P=i(Q):P=[i,M?"active":null,se?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let H=typeof x=="function"?x(Q):x;return m.createElement(Z0,{...g,"aria-current":O,className:P,ref:p,style:H,to:h,viewTransition:N},typeof y=="function"?y(Q):y)});wd.displayName="NavLink";var Cy=m.forwardRef(({discover:n="render",fetcherKey:r,navigate:o,reloadDocument:i,replace:u,state:x,method:h=_i,action:N,onSubmit:y,relative:g,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:w,..._},k)=>{let{unstable_useTransitions:S}=m.useContext(na),b=My(),A=zy(N,{relative:g}),T=h.toLowerCase()==="get"?"get":"post",q=typeof N=="string"&&X0.test(N),D=M=>{if(y&&y(M),M.defaultPrevented)return;M.preventDefault();let se=M.nativeEvent.submitter,Q=se?.getAttribute("formmethod")||h,O=()=>b(se||M.currentTarget,{fetcherKey:r,method:Q,navigate:o,replace:u,state:x,relative:g,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:w});S&&o!==!1?m.startTransition(()=>O()):O()};return m.createElement("form",{ref:k,method:T,action:A,onSubmit:i?y:D,..._,"data-discover":!q&&n==="render"?"true":void 0})});Cy.displayName="Form";function Ey(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I0(n){let r=m.useContext(Pl);return ct(r,Ey(n)),r}function Ay(n,{target:r,replace:o,state:i,preventScrollReset:u,relative:x,viewTransition:h,unstable_defaultShouldRevalidate:N,unstable_useTransitions:y}={}){let g=Fe(),p=ya(),f=er(n,{relative:x});return m.useCallback(w=>{if(ry(w,r)){w.preventDefault();let _=o!==void 0?o:Kn(p)===Kn(f),k=()=>g(n,{replace:_,state:i,preventScrollReset:u,relative:x,viewTransition:h,unstable_defaultShouldRevalidate:N});y?m.startTransition(()=>k()):k()}},[p,g,f,o,i,r,n,u,x,h,N,y])}function Ty(n){la(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=m.useRef(Nd(n)),o=m.useRef(!1),i=ya(),u=m.useMemo(()=>iy(i.search,o.current?null:r.current),[i.search]),x=Fe(),h=m.useCallback((N,y)=>{const g=Nd(typeof N=="function"?N(new URLSearchParams(u)):N);o.current=!0,x("?"+g,y)},[x,u]);return[u,h]}var Dy=0,Ry=()=>`__${String(++Dy)}__`;function My(){let{router:n}=I0("useSubmit"),{basename:r}=m.useContext(na),o=Zb(),i=n.fetch,u=n.navigate;return m.useCallback(async(x,h={})=>{let{action:N,method:y,encType:g,formData:p,body:f}=dy(x,r);if(h.navigate===!1){let w=h.fetcherKey||Ry();await i(w,o,h.action||N,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:p,body:f,formMethod:h.method||y,formEncType:h.encType||g,flushSync:h.flushSync})}else await u(h.action||N,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:p,body:f,formMethod:h.method||y,formEncType:h.encType||g,replace:h.replace,state:h.state,fromRouteId:o,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,u,r,o])}function zy(n,{relative:r}={}){let{basename:o}=m.useContext(na),i=m.useContext(ba);ct(i,"useFormAction must be used inside a RouteContext");let[u]=i.matches.slice(-1),x={...er(n||".",{relative:r})},h=ya();if(n==null){x.search=h.search;let N=new URLSearchParams(x.search),y=N.getAll("index");if(y.some(p=>p==="")){N.delete("index"),y.filter(f=>f).forEach(f=>N.append("index",f));let p=N.toString();x.search=p?`?${p}`:""}}return(!n||n===".")&&u.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(x.pathname=x.pathname==="/"?o:Ka([o,x.pathname])),Kn(x)}function Oy(n,{relative:r}={}){let o=m.useContext(q0);ct(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=I0("useViewTransitionState"),u=er(n,{relative:r});if(!o.isTransitioning)return!1;let x=Ja(o.currentLocation.pathname,i)||o.currentLocation.pathname,h=Ja(o.nextLocation.pathname,i)||o.nextLocation.pathname;return Ri(u.pathname,h)!=null||Ri(u.pathname,x)!=null}function K0(n,r){return function(){return n.apply(r,arguments)}}const{toString:Ly}=Object.prototype,{getPrototypeOf:Ud}=Object,{iterator:Ui,toStringTag:J0}=Symbol,qi=(n=>r=>{const o=Ly.call(r);return n[o]||(n[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),wa=n=>(n=n.toLowerCase(),r=>qi(r)===n),Bi=n=>r=>typeof r===n,{isArray:Vl}=Array,Fl=Bi("undefined");function tr(n){return n!==null&&!Fl(n)&&n.constructor!==null&&!Fl(n.constructor)&&Vt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const W0=wa("ArrayBuffer");function Uy(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&W0(n.buffer),r}const qy=Bi("string"),Vt=Bi("function"),ep=Bi("number"),ar=n=>n!==null&&typeof n=="object",By=n=>n===!0||n===!1,Ei=n=>{if(qi(n)!=="object")return!1;const r=Ud(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(J0 in n)&&!(Ui in n)},Hy=n=>{if(!ar(n)||tr(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Gy=wa("Date"),Fy=wa("File"),$y=wa("Blob"),Yy=wa("FileList"),Py=n=>ar(n)&&Vt(n.pipe),Qy=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||Vt(n.append)&&((r=qi(n))==="formdata"||r==="object"&&Vt(n.toString)&&n.toString()==="[object FormData]"))},Vy=wa("URLSearchParams"),[Xy,Zy,Iy,Ky]=["ReadableStream","Request","Response","Headers"].map(wa),Jy=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sr(n,r,{allOwnKeys:o=!1}={}){if(n===null||typeof n>"u")return;let i,u;if(typeof n!="object"&&(n=[n]),Vl(n))for(i=0,u=n.length;i<u;i++)r.call(null,n[i],i,n);else{if(tr(n))return;const x=o?Object.getOwnPropertyNames(n):Object.keys(n),h=x.length;let N;for(i=0;i<h;i++)N=x[i],r.call(null,n[N],N,n)}}function tp(n,r){if(tr(n))return null;r=r.toLowerCase();const o=Object.keys(n);let i=o.length,u;for(;i-- >0;)if(u=o[i],r===u.toLowerCase())return u;return null}const Xs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ap=n=>!Fl(n)&&n!==Xs;function kd(){const{caseless:n,skipUndefined:r}=ap(this)&&this||{},o={},i=(u,x)=>{const h=n&&tp(o,x)||x;Ei(o[h])&&Ei(u)?o[h]=kd(o[h],u):Ei(u)?o[h]=kd({},u):Vl(u)?o[h]=u.slice():(!r||!Fl(u))&&(o[h]=u)};for(let u=0,x=arguments.length;u<x;u++)arguments[u]&&sr(arguments[u],i);return o}const Wy=(n,r,o,{allOwnKeys:i}={})=>(sr(r,(u,x)=>{o&&Vt(u)?n[x]=K0(u,o):n[x]=u},{allOwnKeys:i}),n),ev=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),tv=(n,r,o,i)=>{n.prototype=Object.create(r.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),o&&Object.assign(n.prototype,o)},av=(n,r,o,i)=>{let u,x,h;const N={};if(r=r||{},n==null)return r;do{for(u=Object.getOwnPropertyNames(n),x=u.length;x-- >0;)h=u[x],(!i||i(h,n,r))&&!N[h]&&(r[h]=n[h],N[h]=!0);n=o!==!1&&Ud(n)}while(n&&(!o||o(n,r))&&n!==Object.prototype);return r},sv=(n,r,o)=>{n=String(n),(o===void 0||o>n.length)&&(o=n.length),o-=r.length;const i=n.indexOf(r,o);return i!==-1&&i===o},lv=n=>{if(!n)return null;if(Vl(n))return n;let r=n.length;if(!ep(r))return null;const o=new Array(r);for(;r-- >0;)o[r]=n[r];return o},nv=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&Ud(Uint8Array)),rv=(n,r)=>{const i=(n&&n[Ui]).call(n);let u;for(;(u=i.next())&&!u.done;){const x=u.value;r.call(n,x[0],x[1])}},iv=(n,r)=>{let o;const i=[];for(;(o=n.exec(r))!==null;)i.push(o);return i},cv=wa("HTMLFormElement"),ov=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,i,u){return i.toUpperCase()+u}),s0=(({hasOwnProperty:n})=>(r,o)=>n.call(r,o))(Object.prototype),dv=wa("RegExp"),sp=(n,r)=>{const o=Object.getOwnPropertyDescriptors(n),i={};sr(o,(u,x)=>{let h;(h=r(u,x,n))!==!1&&(i[x]=h||u)}),Object.defineProperties(n,i)},uv=n=>{sp(n,(r,o)=>{if(Vt(n)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const i=n[o];if(Vt(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},mv=(n,r)=>{const o={},i=u=>{u.forEach(x=>{o[x]=!0})};return Vl(n)?i(n):i(String(n).split(r)),o},hv=()=>{},xv=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r;function pv(n){return!!(n&&Vt(n.append)&&n[J0]==="FormData"&&n[Ui])}const fv=n=>{const r=new Array(10),o=(i,u)=>{if(ar(i)){if(r.indexOf(i)>=0)return;if(tr(i))return i;if(!("toJSON"in i)){r[u]=i;const x=Vl(i)?[]:{};return sr(i,(h,N)=>{const y=o(h,u+1);!Fl(y)&&(x[N]=y)}),r[u]=void 0,x}}return i};return o(n,0)},gv=wa("AsyncFunction"),bv=n=>n&&(ar(n)||Vt(n))&&Vt(n.then)&&Vt(n.catch),lp=((n,r)=>n?setImmediate:r?((o,i)=>(Xs.addEventListener("message",({source:u,data:x})=>{u===Xs&&x===o&&i.length&&i.shift()()},!1),u=>{i.push(u),Xs.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Vt(Xs.postMessage)),yv=typeof queueMicrotask<"u"?queueMicrotask.bind(Xs):typeof process<"u"&&process.nextTick||lp,vv=n=>n!=null&&Vt(n[Ui]),ae={isArray:Vl,isArrayBuffer:W0,isBuffer:tr,isFormData:Qy,isArrayBufferView:Uy,isString:qy,isNumber:ep,isBoolean:By,isObject:ar,isPlainObject:Ei,isEmptyObject:Hy,isReadableStream:Xy,isRequest:Zy,isResponse:Iy,isHeaders:Ky,isUndefined:Fl,isDate:Gy,isFile:Fy,isBlob:$y,isRegExp:dv,isFunction:Vt,isStream:Py,isURLSearchParams:Vy,isTypedArray:nv,isFileList:Yy,forEach:sr,merge:kd,extend:Wy,trim:Jy,stripBOM:ev,inherits:tv,toFlatObject:av,kindOf:qi,kindOfTest:wa,endsWith:sv,toArray:lv,forEachEntry:rv,matchAll:iv,isHTMLForm:cv,hasOwnProperty:s0,hasOwnProp:s0,reduceDescriptors:sp,freezeMethods:uv,toObjectSet:mv,toCamelCase:ov,noop:hv,toFiniteNumber:xv,findKey:tp,global:Xs,isContextDefined:ap,isSpecCompliantForm:pv,toJSONObject:fv,isAsyncFn:gv,isThenable:bv,setImmediate:lp,asap:yv,isIterable:vv};function Me(n,r,o,i,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),o&&(this.config=o),i&&(this.request=i),u&&(this.response=u,this.status=u.status?u.status:null)}ae.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ae.toJSONObject(this.config),code:this.code,status:this.status}}});const np=Me.prototype,rp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{rp[n]={value:n}});Object.defineProperties(Me,rp);Object.defineProperty(np,"isAxiosError",{value:!0});Me.from=(n,r,o,i,u,x)=>{const h=Object.create(np);ae.toFlatObject(n,h,function(p){return p!==Error.prototype},g=>g!=="isAxiosError");const N=n&&n.message?n.message:"Error",y=r==null&&n?n.code:r;return Me.call(h,N,y,o,i,u),n&&h.cause==null&&Object.defineProperty(h,"cause",{value:n,configurable:!0}),h.name=n&&n.name||"Error",x&&Object.assign(h,x),h};const jv=null;function Sd(n){return ae.isPlainObject(n)||ae.isArray(n)}function ip(n){return ae.endsWith(n,"[]")?n.slice(0,-2):n}function l0(n,r,o){return n?n.concat(r).map(function(u,x){return u=ip(u),!o&&x?"["+u+"]":u}).join(o?".":""):r}function Nv(n){return ae.isArray(n)&&!n.some(Sd)}const wv=ae.toFlatObject(ae,{},null,function(r){return/^is[A-Z]/.test(r)});function Hi(n,r,o){if(!ae.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,o=ae.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,b){return!ae.isUndefined(b[S])});const i=o.metaTokens,u=o.visitor||p,x=o.dots,h=o.indexes,y=(o.Blob||typeof Blob<"u"&&Blob)&&ae.isSpecCompliantForm(r);if(!ae.isFunction(u))throw new TypeError("visitor must be a function");function g(k){if(k===null)return"";if(ae.isDate(k))return k.toISOString();if(ae.isBoolean(k))return k.toString();if(!y&&ae.isBlob(k))throw new Me("Blob is not supported. Use a Buffer instead.");return ae.isArrayBuffer(k)||ae.isTypedArray(k)?y&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function p(k,S,b){let A=k;if(k&&!b&&typeof k=="object"){if(ae.endsWith(S,"{}"))S=i?S:S.slice(0,-2),k=JSON.stringify(k);else if(ae.isArray(k)&&Nv(k)||(ae.isFileList(k)||ae.endsWith(S,"[]"))&&(A=ae.toArray(k)))return S=ip(S),A.forEach(function(q,D){!(ae.isUndefined(q)||q===null)&&r.append(h===!0?l0([S],D,x):h===null?S:S+"[]",g(q))}),!1}return Sd(k)?!0:(r.append(l0(b,S,x),g(k)),!1)}const f=[],w=Object.assign(wv,{defaultVisitor:p,convertValue:g,isVisitable:Sd});function _(k,S){if(!ae.isUndefined(k)){if(f.indexOf(k)!==-1)throw Error("Circular reference detected in "+S.join("."));f.push(k),ae.forEach(k,function(A,T){(!(ae.isUndefined(A)||A===null)&&u.call(r,A,ae.isString(T)?T.trim():T,S,w))===!0&&_(A,S?S.concat(T):[T])}),f.pop()}}if(!ae.isObject(n))throw new TypeError("data must be an object");return _(n),r}function n0(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function qd(n,r){this._pairs=[],n&&Hi(n,this,r)}const cp=qd.prototype;cp.append=function(r,o){this._pairs.push([r,o])};cp.toString=function(r){const o=r?function(i){return r.call(this,i,n0)}:n0;return this._pairs.map(function(u){return o(u[0])+"="+o(u[1])},"").join("&")};function kv(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function op(n,r,o){if(!r)return n;const i=o&&o.encode||kv;ae.isFunction(o)&&(o={serialize:o});const u=o&&o.serialize;let x;if(u?x=u(r,o):x=ae.isURLSearchParams(r)?r.toString():new qd(r,o).toString(i),x){const h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+x}return n}class r0{constructor(){this.handlers=[]}use(r,o,i){return this.handlers.push({fulfilled:r,rejected:o,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){ae.forEach(this.handlers,function(i){i!==null&&r(i)})}}const dp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sv=typeof URLSearchParams<"u"?URLSearchParams:qd,_v=typeof FormData<"u"?FormData:null,Cv=typeof Blob<"u"?Blob:null,Ev={isBrowser:!0,classes:{URLSearchParams:Sv,FormData:_v,Blob:Cv},protocols:["http","https","file","blob","url","data"]},Bd=typeof window<"u"&&typeof document<"u",_d=typeof navigator=="object"&&navigator||void 0,Av=Bd&&(!_d||["ReactNative","NativeScript","NS"].indexOf(_d.product)<0),Tv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Dv=Bd&&window.location.href||"http://localhost",Rv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bd,hasStandardBrowserEnv:Av,hasStandardBrowserWebWorkerEnv:Tv,navigator:_d,origin:Dv},Symbol.toStringTag,{value:"Module"})),Ot={...Rv,...Ev};function Mv(n,r){return Hi(n,new Ot.classes.URLSearchParams,{visitor:function(o,i,u,x){return Ot.isNode&&ae.isBuffer(o)?(this.append(i,o.toString("base64")),!1):x.defaultVisitor.apply(this,arguments)},...r})}function zv(n){return ae.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Ov(n){const r={},o=Object.keys(n);let i;const u=o.length;let x;for(i=0;i<u;i++)x=o[i],r[x]=n[x];return r}function up(n){function r(o,i,u,x){let h=o[x++];if(h==="__proto__")return!0;const N=Number.isFinite(+h),y=x>=o.length;return h=!h&&ae.isArray(u)?u.length:h,y?(ae.hasOwnProp(u,h)?u[h]=[u[h],i]:u[h]=i,!N):((!u[h]||!ae.isObject(u[h]))&&(u[h]=[]),r(o,i,u[h],x)&&ae.isArray(u[h])&&(u[h]=Ov(u[h])),!N)}if(ae.isFormData(n)&&ae.isFunction(n.entries)){const o={};return ae.forEachEntry(n,(i,u)=>{r(zv(i),u,o,0)}),o}return null}function Lv(n,r,o){if(ae.isString(n))try{return(r||JSON.parse)(n),ae.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(o||JSON.stringify)(n)}const lr={transitional:dp,adapter:["xhr","http","fetch"],transformRequest:[function(r,o){const i=o.getContentType()||"",u=i.indexOf("application/json")>-1,x=ae.isObject(r);if(x&&ae.isHTMLForm(r)&&(r=new FormData(r)),ae.isFormData(r))return u?JSON.stringify(up(r)):r;if(ae.isArrayBuffer(r)||ae.isBuffer(r)||ae.isStream(r)||ae.isFile(r)||ae.isBlob(r)||ae.isReadableStream(r))return r;if(ae.isArrayBufferView(r))return r.buffer;if(ae.isURLSearchParams(r))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let N;if(x){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Mv(r,this.formSerializer).toString();if((N=ae.isFileList(r))||i.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return Hi(N?{"files[]":r}:r,y&&new y,this.formSerializer)}}return x||u?(o.setContentType("application/json",!1),Lv(r)):r}],transformResponse:[function(r){const o=this.transitional||lr.transitional,i=o&&o.forcedJSONParsing,u=this.responseType==="json";if(ae.isResponse(r)||ae.isReadableStream(r))return r;if(r&&ae.isString(r)&&(i&&!this.responseType||u)){const h=!(o&&o.silentJSONParsing)&&u;try{return JSON.parse(r,this.parseReviver)}catch(N){if(h)throw N.name==="SyntaxError"?Me.from(N,Me.ERR_BAD_RESPONSE,this,null,this.response):N}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ot.classes.FormData,Blob:Ot.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ae.forEach(["delete","get","head","post","put","patch"],n=>{lr.headers[n]={}});const Uv=ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qv=n=>{const r={};let o,i,u;return n&&n.split(`
`).forEach(function(h){u=h.indexOf(":"),o=h.substring(0,u).trim().toLowerCase(),i=h.substring(u+1).trim(),!(!o||r[o]&&Uv[o])&&(o==="set-cookie"?r[o]?r[o].push(i):r[o]=[i]:r[o]=r[o]?r[o]+", "+i:i)}),r},i0=Symbol("internals");function Pn(n){return n&&String(n).trim().toLowerCase()}function Ai(n){return n===!1||n==null?n:ae.isArray(n)?n.map(Ai):String(n)}function Bv(n){const r=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=o.exec(n);)r[i[1]]=i[2];return r}const Hv=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function xd(n,r,o,i,u){if(ae.isFunction(i))return i.call(this,r,o);if(u&&(r=o),!!ae.isString(r)){if(ae.isString(i))return r.indexOf(i)!==-1;if(ae.isRegExp(i))return i.test(r)}}function Gv(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,o,i)=>o.toUpperCase()+i)}function Fv(n,r){const o=ae.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+o,{value:function(u,x,h){return this[i].call(this,r,u,x,h)},configurable:!0})})}let Xt=class{constructor(r){r&&this.set(r)}set(r,o,i){const u=this;function x(N,y,g){const p=Pn(y);if(!p)throw new Error("header name must be a non-empty string");const f=ae.findKey(u,p);(!f||u[f]===void 0||g===!0||g===void 0&&u[f]!==!1)&&(u[f||y]=Ai(N))}const h=(N,y)=>ae.forEach(N,(g,p)=>x(g,p,y));if(ae.isPlainObject(r)||r instanceof this.constructor)h(r,o);else if(ae.isString(r)&&(r=r.trim())&&!Hv(r))h(qv(r),o);else if(ae.isObject(r)&&ae.isIterable(r)){let N={},y,g;for(const p of r){if(!ae.isArray(p))throw TypeError("Object iterator must return a key-value pair");N[g=p[0]]=(y=N[g])?ae.isArray(y)?[...y,p[1]]:[y,p[1]]:p[1]}h(N,o)}else r!=null&&x(o,r,i);return this}get(r,o){if(r=Pn(r),r){const i=ae.findKey(this,r);if(i){const u=this[i];if(!o)return u;if(o===!0)return Bv(u);if(ae.isFunction(o))return o.call(this,u,i);if(ae.isRegExp(o))return o.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,o){if(r=Pn(r),r){const i=ae.findKey(this,r);return!!(i&&this[i]!==void 0&&(!o||xd(this,this[i],i,o)))}return!1}delete(r,o){const i=this;let u=!1;function x(h){if(h=Pn(h),h){const N=ae.findKey(i,h);N&&(!o||xd(i,i[N],N,o))&&(delete i[N],u=!0)}}return ae.isArray(r)?r.forEach(x):x(r),u}clear(r){const o=Object.keys(this);let i=o.length,u=!1;for(;i--;){const x=o[i];(!r||xd(this,this[x],x,r,!0))&&(delete this[x],u=!0)}return u}normalize(r){const o=this,i={};return ae.forEach(this,(u,x)=>{const h=ae.findKey(i,x);if(h){o[h]=Ai(u),delete o[x];return}const N=r?Gv(x):String(x).trim();N!==x&&delete o[x],o[N]=Ai(u),i[N]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const o=Object.create(null);return ae.forEach(this,(i,u)=>{i!=null&&i!==!1&&(o[u]=r&&ae.isArray(i)?i.join(", "):i)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,o])=>r+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...o){const i=new this(r);return o.forEach(u=>i.set(u)),i}static accessor(r){const i=(this[i0]=this[i0]={accessors:{}}).accessors,u=this.prototype;function x(h){const N=Pn(h);i[N]||(Fv(u,h),i[N]=!0)}return ae.isArray(r)?r.forEach(x):x(r),this}};Xt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ae.reduceDescriptors(Xt.prototype,({value:n},r)=>{let o=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(i){this[o]=i}}});ae.freezeMethods(Xt);function pd(n,r){const o=this||lr,i=r||o,u=Xt.from(i.headers);let x=i.data;return ae.forEach(n,function(N){x=N.call(o,x,u.normalize(),r?r.status:void 0)}),u.normalize(),x}function mp(n){return!!(n&&n.__CANCEL__)}function Xl(n,r,o){Me.call(this,n??"canceled",Me.ERR_CANCELED,r,o),this.name="CanceledError"}ae.inherits(Xl,Me,{__CANCEL__:!0});function hp(n,r,o){const i=o.config.validateStatus;!o.status||!i||i(o.status)?n(o):r(new Me("Request failed with status code "+o.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function $v(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function Yv(n,r){n=n||10;const o=new Array(n),i=new Array(n);let u=0,x=0,h;return r=r!==void 0?r:1e3,function(y){const g=Date.now(),p=i[x];h||(h=g),o[u]=y,i[u]=g;let f=x,w=0;for(;f!==u;)w+=o[f++],f=f%n;if(u=(u+1)%n,u===x&&(x=(x+1)%n),g-h<r)return;const _=p&&g-p;return _?Math.round(w*1e3/_):void 0}}function Pv(n,r){let o=0,i=1e3/r,u,x;const h=(g,p=Date.now())=>{o=p,u=null,x&&(clearTimeout(x),x=null),n(...g)};return[(...g)=>{const p=Date.now(),f=p-o;f>=i?h(g,p):(u=g,x||(x=setTimeout(()=>{x=null,h(u)},i-f)))},()=>u&&h(u)]}const Mi=(n,r,o=3)=>{let i=0;const u=Yv(50,250);return Pv(x=>{const h=x.loaded,N=x.lengthComputable?x.total:void 0,y=h-i,g=u(y),p=h<=N;i=h;const f={loaded:h,total:N,progress:N?h/N:void 0,bytes:y,rate:g||void 0,estimated:g&&N&&p?(N-h)/g:void 0,event:x,lengthComputable:N!=null,[r?"download":"upload"]:!0};n(f)},o)},c0=(n,r)=>{const o=n!=null;return[i=>r[0]({lengthComputable:o,total:n,loaded:i}),r[1]]},o0=n=>(...r)=>ae.asap(()=>n(...r)),Qv=Ot.hasStandardBrowserEnv?((n,r)=>o=>(o=new URL(o,Ot.origin),n.protocol===o.protocol&&n.host===o.host&&(r||n.port===o.port)))(new URL(Ot.origin),Ot.navigator&&/(msie|trident)/i.test(Ot.navigator.userAgent)):()=>!0,Vv=Ot.hasStandardBrowserEnv?{write(n,r,o,i,u,x,h){if(typeof document>"u")return;const N=[`${n}=${encodeURIComponent(r)}`];ae.isNumber(o)&&N.push(`expires=${new Date(o).toUTCString()}`),ae.isString(i)&&N.push(`path=${i}`),ae.isString(u)&&N.push(`domain=${u}`),x===!0&&N.push("secure"),ae.isString(h)&&N.push(`SameSite=${h}`),document.cookie=N.join("; ")},read(n){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Xv(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Zv(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function xp(n,r,o){let i=!Xv(r);return n&&(i||o==!1)?Zv(n,r):r}const d0=n=>n instanceof Xt?{...n}:n;function Js(n,r){r=r||{};const o={};function i(g,p,f,w){return ae.isPlainObject(g)&&ae.isPlainObject(p)?ae.merge.call({caseless:w},g,p):ae.isPlainObject(p)?ae.merge({},p):ae.isArray(p)?p.slice():p}function u(g,p,f,w){if(ae.isUndefined(p)){if(!ae.isUndefined(g))return i(void 0,g,f,w)}else return i(g,p,f,w)}function x(g,p){if(!ae.isUndefined(p))return i(void 0,p)}function h(g,p){if(ae.isUndefined(p)){if(!ae.isUndefined(g))return i(void 0,g)}else return i(void 0,p)}function N(g,p,f){if(f in r)return i(g,p);if(f in n)return i(void 0,g)}const y={url:x,method:x,data:x,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:N,headers:(g,p,f)=>u(d0(g),d0(p),f,!0)};return ae.forEach(Object.keys({...n,...r}),function(p){const f=y[p]||u,w=f(n[p],r[p],p);ae.isUndefined(w)&&f!==N||(o[p]=w)}),o}const pp=n=>{const r=Js({},n);let{data:o,withXSRFToken:i,xsrfHeaderName:u,xsrfCookieName:x,headers:h,auth:N}=r;if(r.headers=h=Xt.from(h),r.url=op(xp(r.baseURL,r.url,r.allowAbsoluteUrls),n.params,n.paramsSerializer),N&&h.set("Authorization","Basic "+btoa((N.username||"")+":"+(N.password?unescape(encodeURIComponent(N.password)):""))),ae.isFormData(o)){if(Ot.hasStandardBrowserEnv||Ot.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(ae.isFunction(o.getHeaders)){const y=o.getHeaders(),g=["content-type","content-length"];Object.entries(y).forEach(([p,f])=>{g.includes(p.toLowerCase())&&h.set(p,f)})}}if(Ot.hasStandardBrowserEnv&&(i&&ae.isFunction(i)&&(i=i(r)),i||i!==!1&&Qv(r.url))){const y=u&&x&&Vv.read(x);y&&h.set(u,y)}return r},Iv=typeof XMLHttpRequest<"u",Kv=Iv&&function(n){return new Promise(function(o,i){const u=pp(n);let x=u.data;const h=Xt.from(u.headers).normalize();let{responseType:N,onUploadProgress:y,onDownloadProgress:g}=u,p,f,w,_,k;function S(){_&&_(),k&&k(),u.cancelToken&&u.cancelToken.unsubscribe(p),u.signal&&u.signal.removeEventListener("abort",p)}let b=new XMLHttpRequest;b.open(u.method.toUpperCase(),u.url,!0),b.timeout=u.timeout;function A(){if(!b)return;const q=Xt.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),M={data:!N||N==="text"||N==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:q,config:n,request:b};hp(function(Q){o(Q),S()},function(Q){i(Q),S()},M),b=null}"onloadend"in b?b.onloadend=A:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(A)},b.onabort=function(){b&&(i(new Me("Request aborted",Me.ECONNABORTED,n,b)),b=null)},b.onerror=function(D){const M=D&&D.message?D.message:"Network Error",se=new Me(M,Me.ERR_NETWORK,n,b);se.event=D||null,i(se),b=null},b.ontimeout=function(){let D=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const M=u.transitional||dp;u.timeoutErrorMessage&&(D=u.timeoutErrorMessage),i(new Me(D,M.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,n,b)),b=null},x===void 0&&h.setContentType(null),"setRequestHeader"in b&&ae.forEach(h.toJSON(),function(D,M){b.setRequestHeader(M,D)}),ae.isUndefined(u.withCredentials)||(b.withCredentials=!!u.withCredentials),N&&N!=="json"&&(b.responseType=u.responseType),g&&([w,k]=Mi(g,!0),b.addEventListener("progress",w)),y&&b.upload&&([f,_]=Mi(y),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",_)),(u.cancelToken||u.signal)&&(p=q=>{b&&(i(!q||q.type?new Xl(null,n,b):q),b.abort(),b=null)},u.cancelToken&&u.cancelToken.subscribe(p),u.signal&&(u.signal.aborted?p():u.signal.addEventListener("abort",p)));const T=$v(u.url);if(T&&Ot.protocols.indexOf(T)===-1){i(new Me("Unsupported protocol "+T+":",Me.ERR_BAD_REQUEST,n));return}b.send(x||null)})},Jv=(n,r)=>{const{length:o}=n=n?n.filter(Boolean):[];if(r||o){let i=new AbortController,u;const x=function(g){if(!u){u=!0,N();const p=g instanceof Error?g:this.reason;i.abort(p instanceof Me?p:new Xl(p instanceof Error?p.message:p))}};let h=r&&setTimeout(()=>{h=null,x(new Me(`timeout ${r} of ms exceeded`,Me.ETIMEDOUT))},r);const N=()=>{n&&(h&&clearTimeout(h),h=null,n.forEach(g=>{g.unsubscribe?g.unsubscribe(x):g.removeEventListener("abort",x)}),n=null)};n.forEach(g=>g.addEventListener("abort",x));const{signal:y}=i;return y.unsubscribe=()=>ae.asap(N),y}},Wv=function*(n,r){let o=n.byteLength;if(o<r){yield n;return}let i=0,u;for(;i<o;)u=i+r,yield n.slice(i,u),i=u},ej=async function*(n,r){for await(const o of tj(n))yield*Wv(o,r)},tj=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:o,value:i}=await r.read();if(o)break;yield i}}finally{await r.cancel()}},u0=(n,r,o,i)=>{const u=ej(n,r);let x=0,h,N=y=>{h||(h=!0,i&&i(y))};return new ReadableStream({async pull(y){try{const{done:g,value:p}=await u.next();if(g){N(),y.close();return}let f=p.byteLength;if(o){let w=x+=f;o(w)}y.enqueue(new Uint8Array(p))}catch(g){throw N(g),g}},cancel(y){return N(y),u.return()}},{highWaterMark:2})},m0=64*1024,{isFunction:ji}=ae,aj=(({Request:n,Response:r})=>({Request:n,Response:r}))(ae.global),{ReadableStream:h0,TextEncoder:x0}=ae.global,p0=(n,...r)=>{try{return!!n(...r)}catch{return!1}},sj=n=>{n=ae.merge.call({skipUndefined:!0},aj,n);const{fetch:r,Request:o,Response:i}=n,u=r?ji(r):typeof fetch=="function",x=ji(o),h=ji(i);if(!u)return!1;const N=u&&ji(h0),y=u&&(typeof x0=="function"?(k=>S=>k.encode(S))(new x0):async k=>new Uint8Array(await new o(k).arrayBuffer())),g=x&&N&&p0(()=>{let k=!1;const S=new o(Ot.origin,{body:new h0,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!S}),p=h&&N&&p0(()=>ae.isReadableStream(new i("").body)),f={stream:p&&(k=>k.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!f[k]&&(f[k]=(S,b)=>{let A=S&&S[k];if(A)return A.call(S);throw new Me(`Response type '${k}' is not supported`,Me.ERR_NOT_SUPPORT,b)})});const w=async k=>{if(k==null)return 0;if(ae.isBlob(k))return k.size;if(ae.isSpecCompliantForm(k))return(await new o(Ot.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(ae.isArrayBufferView(k)||ae.isArrayBuffer(k))return k.byteLength;if(ae.isURLSearchParams(k)&&(k=k+""),ae.isString(k))return(await y(k)).byteLength},_=async(k,S)=>{const b=ae.toFiniteNumber(k.getContentLength());return b??w(S)};return async k=>{let{url:S,method:b,data:A,signal:T,cancelToken:q,timeout:D,onDownloadProgress:M,onUploadProgress:se,responseType:Q,headers:O,withCredentials:P="same-origin",fetchOptions:H}=pp(k),Z=r||fetch;Q=Q?(Q+"").toLowerCase():"text";let U=Jv([T,q&&q.toAbortSignal()],D),W=null;const te=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let me;try{if(se&&g&&b!=="get"&&b!=="head"&&(me=await _(O,A))!==0){let E=new o(S,{method:"POST",body:A,duplex:"half"}),j;if(ae.isFormData(A)&&(j=E.headers.get("content-type"))&&O.setContentType(j),E.body){const[B,F]=c0(me,Mi(o0(se)));A=u0(E.body,m0,B,F)}}ae.isString(P)||(P=P?"include":"omit");const R=x&&"credentials"in o.prototype,ee={...H,signal:U,method:b.toUpperCase(),headers:O.normalize().toJSON(),body:A,duplex:"half",credentials:R?P:void 0};W=x&&new o(S,ee);let I=await(x?Z(W,H):Z(S,ee));const xe=p&&(Q==="stream"||Q==="response");if(p&&(M||xe&&te)){const E={};["status","statusText","headers"].forEach(pe=>{E[pe]=I[pe]});const j=ae.toFiniteNumber(I.headers.get("content-length")),[B,F]=M&&c0(j,Mi(o0(M),!0))||[];I=new i(u0(I.body,m0,B,()=>{F&&F(),te&&te()}),E)}Q=Q||"text";let L=await f[ae.findKey(f,Q)||"text"](I,k);return!xe&&te&&te(),await new Promise((E,j)=>{hp(E,j,{data:L,headers:Xt.from(I.headers),status:I.status,statusText:I.statusText,config:k,request:W})})}catch(R){throw te&&te(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,k,W),{cause:R.cause||R}):Me.from(R,R&&R.code,k,W)}}},lj=new Map,fp=n=>{let r=n&&n.env||{};const{fetch:o,Request:i,Response:u}=r,x=[i,u,o];let h=x.length,N=h,y,g,p=lj;for(;N--;)y=x[N],g=p.get(y),g===void 0&&p.set(y,g=N?new Map:sj(r)),p=g;return g};fp();const Hd={http:jv,xhr:Kv,fetch:{get:fp}};ae.forEach(Hd,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const f0=n=>`- ${n}`,nj=n=>ae.isFunction(n)||n===null||n===!1;function rj(n,r){n=ae.isArray(n)?n:[n];const{length:o}=n;let i,u;const x={};for(let h=0;h<o;h++){i=n[h];let N;if(u=i,!nj(i)&&(u=Hd[(N=String(i)).toLowerCase()],u===void 0))throw new Me(`Unknown adapter '${N}'`);if(u&&(ae.isFunction(u)||(u=u.get(r))))break;x[N||"#"+h]=u}if(!u){const h=Object.entries(x).map(([y,g])=>`adapter ${y} `+(g===!1?"is not supported by the environment":"is not available in the build"));let N=o?h.length>1?`since :
`+h.map(f0).join(`
`):" "+f0(h[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+N,"ERR_NOT_SUPPORT")}return u}const gp={getAdapter:rj,adapters:Hd};function fd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Xl(null,n)}function g0(n){return fd(n),n.headers=Xt.from(n.headers),n.data=pd.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),gp.getAdapter(n.adapter||lr.adapter,n)(n).then(function(i){return fd(n),i.data=pd.call(n,n.transformResponse,i),i.headers=Xt.from(i.headers),i},function(i){return mp(i)||(fd(n),i&&i.response&&(i.response.data=pd.call(n,n.transformResponse,i.response),i.response.headers=Xt.from(i.response.headers))),Promise.reject(i)})}const bp="1.13.2",Gi={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{Gi[n]=function(i){return typeof i===n||"a"+(r<1?"n ":" ")+n}});const b0={};Gi.transitional=function(r,o,i){function u(x,h){return"[Axios v"+bp+"] Transitional option '"+x+"'"+h+(i?". "+i:"")}return(x,h,N)=>{if(r===!1)throw new Me(u(h," has been removed"+(o?" in "+o:"")),Me.ERR_DEPRECATED);return o&&!b0[h]&&(b0[h]=!0,console.warn(u(h," has been deprecated since v"+o+" and will be removed in the near future"))),r?r(x,h,N):!0}};Gi.spelling=function(r){return(o,i)=>(console.warn(`${i} is likely a misspelling of ${r}`),!0)};function ij(n,r,o){if(typeof n!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let u=i.length;for(;u-- >0;){const x=i[u],h=r[x];if(h){const N=n[x],y=N===void 0||h(N,x,n);if(y!==!0)throw new Me("option "+x+" must be "+y,Me.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new Me("Unknown option "+x,Me.ERR_BAD_OPTION)}}const Ti={assertOptions:ij,validators:Gi},Ea=Ti.validators;let Ks=class{constructor(r){this.defaults=r||{},this.interceptors={request:new r0,response:new r0}}async request(r,o){try{return await this._request(r,o)}catch(i){if(i instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const x=u.stack?u.stack.replace(/^.+\n/,""):"";try{i.stack?x&&!String(i.stack).endsWith(x.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+x):i.stack=x}catch{}}throw i}}_request(r,o){typeof r=="string"?(o=o||{},o.url=r):o=r||{},o=Js(this.defaults,o);const{transitional:i,paramsSerializer:u,headers:x}=o;i!==void 0&&Ti.assertOptions(i,{silentJSONParsing:Ea.transitional(Ea.boolean),forcedJSONParsing:Ea.transitional(Ea.boolean),clarifyTimeoutError:Ea.transitional(Ea.boolean)},!1),u!=null&&(ae.isFunction(u)?o.paramsSerializer={serialize:u}:Ti.assertOptions(u,{encode:Ea.function,serialize:Ea.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),Ti.assertOptions(o,{baseUrl:Ea.spelling("baseURL"),withXsrfToken:Ea.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let h=x&&ae.merge(x.common,x[o.method]);x&&ae.forEach(["delete","get","head","post","put","patch","common"],k=>{delete x[k]}),o.headers=Xt.concat(h,x);const N=[];let y=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(o)===!1||(y=y&&S.synchronous,N.unshift(S.fulfilled,S.rejected))});const g=[];this.interceptors.response.forEach(function(S){g.push(S.fulfilled,S.rejected)});let p,f=0,w;if(!y){const k=[g0.bind(this),void 0];for(k.unshift(...N),k.push(...g),w=k.length,p=Promise.resolve(o);f<w;)p=p.then(k[f++],k[f++]);return p}w=N.length;let _=o;for(;f<w;){const k=N[f++],S=N[f++];try{_=k(_)}catch(b){S.call(this,b);break}}try{p=g0.call(this,_)}catch(k){return Promise.reject(k)}for(f=0,w=g.length;f<w;)p=p.then(g[f++],g[f++]);return p}getUri(r){r=Js(this.defaults,r);const o=xp(r.baseURL,r.url,r.allowAbsoluteUrls);return op(o,r.params,r.paramsSerializer)}};ae.forEach(["delete","get","head","options"],function(r){Ks.prototype[r]=function(o,i){return this.request(Js(i||{},{method:r,url:o,data:(i||{}).data}))}});ae.forEach(["post","put","patch"],function(r){function o(i){return function(x,h,N){return this.request(Js(N||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:x,data:h}))}}Ks.prototype[r]=o(),Ks.prototype[r+"Form"]=o(!0)});let cj=class yp{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(x){o=x});const i=this;this.promise.then(u=>{if(!i._listeners)return;let x=i._listeners.length;for(;x-- >0;)i._listeners[x](u);i._listeners=null}),this.promise.then=u=>{let x;const h=new Promise(N=>{i.subscribe(N),x=N}).then(u);return h.cancel=function(){i.unsubscribe(x)},h},r(function(x,h,N){i.reason||(i.reason=new Xl(x,h,N),o(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const o=this._listeners.indexOf(r);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const r=new AbortController,o=i=>{r.abort(i)};return this.subscribe(o),r.signal.unsubscribe=()=>this.unsubscribe(o),r.signal}static source(){let r;return{token:new yp(function(u){r=u}),cancel:r}}};function oj(n){return function(o){return n.apply(null,o)}}function dj(n){return ae.isObject(n)&&n.isAxiosError===!0}const Cd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Cd).forEach(([n,r])=>{Cd[r]=n});function vp(n){const r=new Ks(n),o=K0(Ks.prototype.request,r);return ae.extend(o,Ks.prototype,r,{allOwnKeys:!0}),ae.extend(o,r,null,{allOwnKeys:!0}),o.create=function(u){return vp(Js(n,u))},o}const ut=vp(lr);ut.Axios=Ks;ut.CanceledError=Xl;ut.CancelToken=cj;ut.isCancel=mp;ut.VERSION=bp;ut.toFormData=Hi;ut.AxiosError=Me;ut.Cancel=ut.CanceledError;ut.all=function(r){return Promise.all(r)};ut.spread=oj;ut.isAxiosError=dj;ut.mergeConfig=Js;ut.AxiosHeaders=Xt;ut.formToJSON=n=>up(ae.isHTMLForm(n)?new FormData(n):n);ut.getAdapter=gp.getAdapter;ut.HttpStatusCode=Cd;ut.default=ut;const{Axios:qN,AxiosError:BN,CanceledError:HN,isCancel:GN,CancelToken:FN,VERSION:$N,all:YN,Cancel:PN,isAxiosError:QN,spread:VN,toFormData:XN,AxiosHeaders:ZN,HttpStatusCode:IN,formToJSON:KN,getAdapter:JN,mergeConfig:WN}=ut,uj="http://localhost:8000/api/v1",V=ut.create({baseURL:uj,headers:{"Content-Type":"application/json"}});V.interceptors.request.use(n=>{const r=localStorage.getItem("access_token");return r&&(n.headers.Authorization=`Bearer ${r}`),n},n=>Promise.reject(n));V.interceptors.response.use(n=>n,async n=>{const r=n.config;if(n.response?.status===401&&!r._retry&&!r.url?.includes("/auth/login")){r._retry=!0;try{const o=localStorage.getItem("refresh_token");if(o){const i=await ut.post("/api/v1/auth/refresh",{refresh_token:o}),{access_token:u}=i.data;return localStorage.setItem("access_token",u),r.headers.Authorization=`Bearer ${u}`,V(r)}}catch(o){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.pathname.includes("/login")||(window.location.href="/login?expired=true"),Promise.reject(o)}return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.pathname.includes("/login")||(window.location.href="/login?expired=true"),Promise.reject(n)}return Promise.reject(n)});const jp={login:(n,r)=>{const o=new URLSearchParams;return o.append("username",n),o.append("password",r),V.post("/auth/login",o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},logout:()=>V.post("/auth/logout"),refreshToken:n=>V.post("/auth/refresh",{refresh_token:n}),me:()=>V.get("/auth/me")},Hl={list:n=>V.get("/users",{params:n}),get:n=>V.get(`/users/${n}`),create:n=>V.post("/users",n),update:(n,r)=>V.put(`/users/${n}`,r),delete:n=>V.delete(`/users/${n}`),getStats:()=>V.get("/users/stats")},At={list:n=>V.get("/warehouses",{params:n}),get:n=>V.get(`/warehouses/${n}`),create:n=>V.post("/warehouses",n),update:(n,r)=>V.put(`/warehouses/${n}`,r),delete:n=>V.delete(`/warehouses/${n}`),getShops:n=>V.get(`/warehouses/${n}/shops`),getStock:(n,r)=>V.get(`/warehouses/${n}/stock`,{params:r})},vt={list:n=>V.get("/shops",{params:n}),get:n=>V.get(`/shops/${n}`),create:n=>V.post("/shops",n),update:(n,r)=>V.put(`/shops/${n}`,r),delete:n=>V.delete(`/shops/${n}`),getStats:()=>V.get("/shops/stats"),getStock:(n,r)=>V.get(`/shops/${n}/stock`,{params:r})},wt={list:n=>V.get("/medicines",{params:n}),get:n=>V.get(`/medicines/${n}`),create:n=>V.post("/medicines",n),update:(n,r)=>V.put(`/medicines/${n}`,r),delete:n=>V.delete(`/medicines/${n}`),getBatches:n=>V.get(`/medicines/${n}/batches`),createBatch:(n,r)=>V.post(`/medicines/${n}/batches`,r)},$l={getMovements:n=>V.get("/stock/movements",{params:n}),stockEntry:n=>V.post("/stock/entry",n),adjustStock:n=>V.post("/stock/adjust",n),getAlerts:n=>V.get("/stock/alerts",{params:{alert_type:n}})},Zs={list:n=>V.get("/purchase-requests",{params:n}),get:n=>V.get(`/purchase-requests/${n}`),create:n=>V.post("/purchase-requests",n),approve:(n,r)=>V.put(`/purchase-requests/${n}/approve`,r),reject:n=>V.put(`/purchase-requests/${n}/reject`)},Ws={list:n=>V.get("/dispatches",{params:n}),get:n=>V.get(`/dispatches/${n}`),create:n=>V.post("/dispatches",n),updateStatus:(n,r)=>V.put(`/dispatches/${n}/status`,{status:r})},Is={list:n=>V.get("/invoices",{params:n}),get:n=>V.get(`/invoices/${n}`),create:n=>V.post("/invoices",n),getItems:n=>V.get(`/invoices/${n}/items`),getReturns:n=>V.get("/invoices/returns",{params:n}),processReturn:(n,r)=>V.post(`/invoices/${n}/returns`,r)},Gl={list:n=>V.get("/customers",{params:n}),get:n=>V.get(`/customers/${n}`),create:n=>V.post("/customers",n),update:(n,r)=>V.put(`/customers/${n}`,r),getFollowups:n=>V.get(`/customers/${n}/followups`),createFollowup:(n,r)=>V.post(`/customers/${n}/followups`,r)},ga={list:n=>V.get("/employees",{params:n}),get:n=>V.get(`/employees/${n}`),create:n=>V.post("/employees",n),update:(n,r)=>V.put(`/employees/${n}`,r),delete:n=>V.delete(`/employees/${n}`),markAttendance:n=>V.post("/employees/attendance",n),getDailyAttendance:n=>V.get("/employees/attendance/daily",{params:{date:n}}),getAttendance:(n,r)=>V.get(`/employees/attendance/${n}`,{params:r}),submitAttendance:n=>V.post("/employees/attendance/submit",n),lockAttendance:n=>V.post("/employees/attendance/lock",n),unlockAttendance:n=>V.post("/employees/attendance/unlock",n),getSalaryRecords:n=>V.get("/employees/salary",{params:n}),processSalary:n=>V.post("/employees/salary/process",n)},In={getSales:n=>V.get("/reports/sales",{params:n}),getDailySales:n=>V.get("/reports/sales/daily",{params:n}),getMonthlySales:n=>V.get("/reports/sales/monthly",{params:n}),getInventory:n=>V.get("/reports/inventory",{params:n}),getProfitLoss:n=>V.get("/reports/profit-loss",{params:n}),getExpiry:n=>V.get("/reports/expiry",{params:n})},Ni={list:n=>V.get("/notifications",{params:n}),markRead:n=>V.put(`/notifications/${n}/read`),markAllRead:()=>V.put("/notifications/read-all"),delete:n=>V.delete(`/notifications/${n}`)},zi={get:()=>V.get("/settings"),update:n=>V.put("/settings",n),getTax:()=>V.get("/settings/tax"),updateTax:n=>V.put("/settings/tax",n),getTaxSummary:n=>V.get("/settings/tax/summary",{params:n}),getGstReport:n=>V.get("/settings/tax/gst",{params:n})},Zn={list:n=>V.get("/roles",{params:n}),listAssignable:()=>V.get("/roles/assignable"),get:n=>V.get(`/roles/${n}`),create:n=>V.post("/roles",n),update:(n,r)=>V.put(`/roles/${n}`,r),delete:n=>V.delete(`/roles/${n}`),addPermission:(n,r)=>V.post(`/roles/${n}/permissions/${r}`),removePermission:(n,r)=>V.delete(`/roles/${n}/permissions/${r}`),assignToUser:(n,r)=>V.post(`/roles/${n}/users/${r}`),removeFromUser:(n,r)=>V.delete(`/roles/${n}/users/${r}`)},mj={list:n=>V.get("/permissions",{params:n}),getModules:()=>V.get("/permissions/modules"),getMy:()=>V.get("/permissions/my"),get:n=>V.get(`/permissions/${n}`),create:n=>V.post("/permissions",n),delete:n=>V.delete(`/permissions/${n}`)},y0={getSummary:n=>V.get("/tax/summary",{params:n}),getGstReport:n=>V.get("/tax/gst",{params:n}),getVatReport:n=>V.get("/tax/vat",{params:n}),getPeriodReport:(n,r,o)=>V.get(`/tax/period/${n}/${r}`,{params:{shop_id:o}}),getSettings:()=>V.get("/tax/settings"),updateSettings:n=>V.put("/tax/settings",n)},Di={list:n=>V.get("/racks",{params:n}),get:n=>V.get(`/racks/${n}`),create:n=>V.post("/racks",n),update:(n,r)=>V.put(`/racks/${n}`,r),delete:n=>V.delete(`/racks/${n}`)},v0={list:n=>V.get("/audit-logs",{params:n}),getStats:()=>V.get("/audit-logs/stats")},j0={list:n=>V.get("/login-activity",{params:n}),getStats:()=>V.get("/login-activity/stats")},Ae={listCategories:n=>V.get("/masters/categories",{params:n}),createCategory:n=>V.post("/masters/categories",n),updateCategory:(n,r)=>V.put(`/masters/categories/${n}`,r),deleteCategory:n=>V.delete(`/masters/categories/${n}`),listUnits:n=>V.get("/masters/units",{params:n}),createUnit:n=>V.post("/masters/units",n),updateUnit:(n,r)=>V.put(`/masters/units/${n}`,r),deleteUnit:n=>V.delete(`/masters/units/${n}`),listHSN:n=>V.get("/masters/hsn",{params:n}),createHSN:n=>V.post("/masters/hsn",n),updateHSN:(n,r)=>V.put(`/masters/hsn/${n}`,r),deleteHSN:n=>V.delete(`/masters/hsn/${n}`),listGSTSlabs:n=>V.get("/masters/gst-slabs",{params:n}),createGSTSlab:n=>V.post("/masters/gst-slabs",n),updateGSTSlab:(n,r)=>V.put(`/masters/gst-slabs/${n}`,r),deleteGSTSlab:n=>V.delete(`/masters/gst-slabs/${n}`),listSuppliers:n=>V.get("/masters/suppliers",{params:n}),createSupplier:n=>V.post("/masters/suppliers",n),updateSupplier:(n,r)=>V.put(`/masters/suppliers/${n}`,r),deleteSupplier:n=>V.delete(`/masters/suppliers/${n}`),listAdjustmentReasons:n=>V.get("/masters/adjustment-reasons",{params:n}),createAdjustmentReason:n=>V.post("/masters/adjustment-reasons",n),updateAdjustmentReason:(n,r)=>V.put(`/masters/adjustment-reasons/${n}`,r),deleteAdjustmentReason:n=>V.delete(`/masters/adjustment-reasons/${n}`),listPaymentMethods:n=>V.get("/masters/payment-methods",{params:n}),createPaymentMethod:n=>V.post("/masters/payment-methods",n),updatePaymentMethod:(n,r)=>V.put(`/masters/payment-methods/${n}`,r),deletePaymentMethod:n=>V.delete(`/masters/payment-methods/${n}`),listMedicineTypes:n=>V.get("/masters/medicine-types",{params:n}),createMedicineType:n=>V.post("/masters/medicine-types",n),updateMedicineType:(n,r)=>V.put(`/masters/medicine-types/${n}`,r),deleteMedicineType:n=>V.delete(`/masters/medicine-types/${n}`),listBrands:n=>V.get("/masters/brands",{params:n}),createBrand:n=>V.post("/masters/brands",n),updateBrand:(n,r)=>V.put(`/masters/brands/${n}`,r),deleteBrand:n=>V.delete(`/masters/brands/${n}`),listManufacturers:n=>V.get("/masters/manufacturers",{params:n}),createManufacturer:n=>V.post("/masters/manufacturers",n),updateManufacturer:(n,r)=>V.put(`/masters/manufacturers/${n}`,r),deleteManufacturer:n=>V.delete(`/masters/manufacturers/${n}`)},Np=m.createContext(void 0);function hj({children:n}){const[r,o]=m.useState(null),[i,u]=m.useState(!0),x=async()=>{if(!localStorage.getItem("access_token")){o(null),u(!1);return}try{const y=await jp.me(),g={...y.data,permissions:y.data.permissions||[]};o(g)}catch(y){console.error("Failed to fetch user:",y),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),o(null)}finally{u(!1)}};m.useEffect(()=>{x()},[]);const h=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),o(null)};return e.jsx(Np.Provider,{value:{user:r,setUser:o,loading:i,logout:h,refreshUser:x},children:n})}function We(){const n=m.useContext(Np);if(n===void 0)throw new Error("useUser must be used within a UserProvider");return n}function xj(n,r){return n.includes(r)}function pj(n,r){return r.some(o=>n.includes(o))}function fj(n,r){return r.every(o=>n.includes(o))}function gj(n,r){return n.some(o=>o.startsWith(`${r}.`))}function bj(n,r){for(const o of n)if(o.startsWith(r)){const i=o.split(".");if(i.length>=3)return i[2]}return null}const N0={ROLES_VIEW:"roles.view",ROLES_MANAGE:"roles.manage"},wp=m.createContext(void 0);function yj({children:n}){const{user:r}=We(),o=r?.permissions??[],i=r?.role==="super_admin",u={permissions:o,hasPermission:x=>i?!0:xj(o,x),hasAnyPermission:x=>i?!0:pj(o,x),hasAllPermissions:x=>i?!0:fj(o,x),hasModuleAccess:x=>i?!0:gj(o,x),getScopeForPermission:x=>i?"global":bj(o,x)};return e.jsx(wp.Provider,{value:u,children:n})}function ra(){const n=m.useContext(wp);if(n===void 0)throw new Error("usePermissions must be used within a PermissionProvider");return n}const kp=m.createContext(null);function vj({children:n}){const[r,o]=m.useState(null),[i,u]=m.useState(!0),[x,h]=m.useState(null),N=m.useCallback(async()=>{const k=localStorage.getItem("access_token");if(console.log("[MasterData] Loading masters, token exists:",!!k),!k){console.warn("[MasterData] No access token, skipping load"),u(!1);return}try{u(!0),h(null),console.log("[MasterData] Fetching /unified-masters/all...");const S=await V.get("/unified-masters/all");console.log("[MasterData] API Response:",{status:S.status,hasData:!!S.data,keys:S.data?Object.keys(S.data):[],categoriesCount:S.data?.categories?.length||0,unitsCount:S.data?.units?.length||0,gstSlabsCount:S.data?.gst_slabs?.length||0}),S.data&&S.data.categories&&S.data.categories.length>0?(console.log("[MasterData] Using API data"),o(S.data)):(console.warn("[MasterData] API returned empty, using fallback"),o(y()))}catch(S){console.error("[MasterData] Failed to load:",S.response?.status,S.message),o(y())}finally{u(!1)}},[]),y=()=>({categories:[{id:"cat-1",name:"Antibiotics",is_active:!0},{id:"cat-2",name:"Painkillers",is_active:!0},{id:"cat-3",name:"Supplements",is_active:!0},{id:"cat-4",name:"General",is_active:!0}],units:[{id:"unit-1",name:"Strip",short_name:"stp",is_active:!0},{id:"unit-2",name:"Bottle",short_name:"btl",is_active:!0},{id:"unit-3",name:"Box",short_name:"box",is_active:!0},{id:"unit-4",name:"Vial",short_name:"vl",is_active:!0}],hsn_codes:[{id:"hsn-1",hsn_code:"3004",description:"Medicaments",gst_rate:12,cgst_rate:6,sgst_rate:6,igst_rate:12,is_active:!0},{id:"hsn-2",hsn_code:"3003",description:"Medicaments",gst_rate:5,cgst_rate:2.5,sgst_rate:2.5,igst_rate:5,is_active:!0}],medicine_types:[{id:"type-1",code:"tablet",name:"Tablet",is_active:!0,sort_order:1},{id:"type-2",code:"capsule",name:"Capsule",is_active:!0,sort_order:2},{id:"type-3",code:"syrup",name:"Syrup",is_active:!0,sort_order:3},{id:"type-4",code:"injection",name:"Injection",is_active:!0,sort_order:4}],gst_slabs:[{id:"gst-0",rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0,is_active:!0},{id:"gst-5",rate:5,cgst_rate:2.5,sgst_rate:2.5,igst_rate:5,is_active:!0},{id:"gst-12",rate:12,cgst_rate:6,sgst_rate:6,igst_rate:12,is_active:!0},{id:"gst-18",rate:18,cgst_rate:9,sgst_rate:9,igst_rate:18,is_active:!0},{id:"gst-28",rate:28,cgst_rate:14,sgst_rate:14,igst_rate:28,is_active:!0}],brands:[{id:"br-1",code:"GSK",name:"GSK",is_active:!0},{id:"br-2",code:"CIPLA",name:"Cipla",is_active:!0},{id:"br-3",code:"SUN",name:"Sun Pharma",is_active:!0}],manufacturers:[{id:"mfr-1",code:"GSK",name:"GlaxoSmithKline",is_active:!0},{id:"mfr-2",code:"CIPLA",name:"Cipla Ltd",is_active:!0},{id:"mfr-3",code:"SUN",name:"Sun Pharmaceutical Industries",is_active:!0}],genders:[{id:"gen-1",code:"male",name:"Male",is_active:!0},{id:"gen-2",code:"female",name:"Female",is_active:!0},{id:"gen-3",code:"other",name:"Other",is_active:!0}],employment_types:[{id:"emp-1",code:"full_time",name:"Full Time",is_active:!0},{id:"emp-2",code:"part_time",name:"Part Time",is_active:!0},{id:"emp-3",code:"contract",name:"Contract",is_active:!0},{id:"emp-4",code:"intern",name:"Intern",is_active:!0}],departments:[{id:"dept-1",code:"pharmacy",name:"Pharmacy",is_active:!0},{id:"dept-2",code:"warehouse",name:"Warehouse",is_active:!0},{id:"dept-3",code:"admin",name:"Administration",is_active:!0},{id:"dept-4",code:"hr",name:"Human Resources",is_active:!0},{id:"dept-5",code:"accounts",name:"Accounts",is_active:!0}],designations:[{id:"des-1",code:"pharmacist",name:"Pharmacist",is_active:!0,level:3},{id:"des-2",code:"cashier",name:"Cashier",is_active:!0,level:2},{id:"des-3",code:"manager",name:"Manager",is_active:!0,level:4},{id:"des-4",code:"assistant",name:"Assistant",is_active:!0,level:1},{id:"des-5",code:"supervisor",name:"Supervisor",is_active:!0,level:3}],urgency_levels:[{id:"urg-1",code:"low",name:"Low",is_active:!0,color:"green"},{id:"urg-2",code:"medium",name:"Medium",is_active:!0,color:"yellow"},{id:"urg-3",code:"high",name:"High",is_active:!0,color:"orange"},{id:"urg-4",code:"critical",name:"Critical",is_active:!0,color:"red"}],payment_methods:[{id:"pm-1",code:"cash",name:"Cash",is_active:!0,icon:""},{id:"pm-2",code:"card",name:"Card",is_active:!0,icon:""},{id:"pm-3",code:"upi",name:"UPI",is_active:!0,icon:""},{id:"pm-4",code:"credit",name:"Credit",is_active:!0,icon:""}],shop_types:[{id:"st-1",code:"retail",name:"Retail Pharmacy",is_active:!0},{id:"st-2",code:"hospital",name:"Hospital Pharmacy",is_active:!0}],customer_types:[{id:"ct-1",code:"regular",name:"Regular",is_active:!0,discount_percent:0,credit_limit:0},{id:"ct-2",code:"vip",name:"VIP",is_active:!0,discount_percent:10,credit_limit:5e4}],suppliers:[],statuses:[],roles:[],warehouses:[],shops:[],racks:[],adjustment_reasons:[]});m.useEffect(()=>{N();const k=S=>{S.key==="access_token"&&S.newValue&&N()};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[N]);const g=m.useCallback(k=>r?r[k]||[]:[],[r]),p=m.useCallback(k=>r?r.statuses.filter(S=>S.entity_type===k):[],[r]),f=m.useCallback((k,S)=>g(k).find(A=>A.code===S),[g]),w=m.useCallback((k,S)=>g(k).find(A=>A.id===S),[g]),_={masters:r,isLoading:i,error:x,refresh:N,getMaster:g,getStatusesByEntity:p,findByCode:f,findById:w};return e.jsx(kp.Provider,{value:_,children:n})}function mt(){const n=m.useContext(kp);if(!n)throw new Error("useMasterData must be used within a MasterDataProvider");return n}const Sp=m.createContext(void 0);function jj({children:n}){const{user:r}=We(),[o,i]=m.useState("global"),[u,x]=m.useState(null),[h,N]=m.useState([]),[y,g]=m.useState([]),[p,f]=m.useState(!0);m.useEffect(()=>{if(!r){f(!1);return}(async()=>{try{f(!0);let k=[],S=[];if(r.role==="super_admin"){const[T,q]=await Promise.all([At.list({size:500}),vt.list({size:500})]);k=T.data?.items||[],S=q.data?.items||[]}else r.warehouse_id?k=[(await At.get(r.warehouse_id)).data]:r.shop_id&&(S=[(await vt.get(r.shop_id)).data]);const b=k.map(T=>({id:T.id,type:"warehouse",name:T.name})),A=S.map(T=>({id:T.id,type:"shop",name:T.name}));N(b),g(A),r.role==="super_admin"?(i("global"),x(null)):r.warehouse_id?(i("warehouse"),x(b.find(T=>T.id===r.warehouse_id)||null)):r.shop_id?(i("shop"),x(A.find(T=>T.id===r.shop_id)||null)):(i("global"),x(null))}catch(k){console.error("Failed to initialize operational context",k)}finally{f(!1)}})()},[r]);const w=(_,k)=>{if(r?.role!=="super_admin"){console.warn("Attempted context switch by non-super-admin blocked.");return}i(_),x(k||null)};return e.jsx(Sp.Provider,{value:{scope:o,activeEntity:u,switchContext:w,availableWarehouses:h,availableShops:y,loading:p},children:n})}function Aa(){const n=m.useContext(Sp);if(n===void 0)throw new Error("useOperationalContext must be used within an OperationalProvider");return n}let wi=0;const Ed=new Set;let Bt=[];const Qn=n=>{Ed.forEach(r=>r(n))},Ze={success:n=>{const r={id:`toast-${wi++}`,message:n,type:"success"};Bt=[...Bt,r],Qn(Bt),setTimeout(()=>Ze.dismiss(r.id),5e3)},error:n=>{const r={id:`toast-${wi++}`,message:n,type:"error"};Bt=[...Bt,r],Qn(Bt),setTimeout(()=>Ze.dismiss(r.id),5e3)},warning:n=>{const r={id:`toast-${wi++}`,message:n,type:"warning"};Bt=[...Bt,r],Qn(Bt),setTimeout(()=>Ze.dismiss(r.id),5e3)},info:n=>{const r={id:`toast-${wi++}`,message:n,type:"info"};Bt=[...Bt,r],Qn(Bt),setTimeout(()=>Ze.dismiss(r.id),5e3)},dismiss:n=>{Bt=Bt.filter(r=>r.id!==n),Qn(Bt)}};function Nj(){const[n,r]=m.useState([]);return m.useEffect(()=>{const o=i=>r(i);return Ed.add(o),()=>{Ed.delete(o)}},[]),n}function wj(){const n=Nj(),r=i=>{switch(i){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";case"info":return"info"}},o=i=>{switch(i){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}};return e.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 max-w-md",children:n.map((i,u)=>e.jsxs("div",{className:`flex items-start gap-3 px-4 py-3 rounded-lg border shadow-lg backdrop-blur-sm animate-slideInRight ${o(i.type)}`,style:{animationDelay:`${u*50}ms`},children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:r(i.type)}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:i.message}),e.jsx("button",{onClick:()=>window.toast?.dismiss(i.id),className:"text-current opacity-60 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]},i.id))})}typeof window<"u"&&(window.toast=Ze);const ki=[{path:"/",label:"Dashboard",icon:"dashboard",permissions:["dashboard.view"]},{path:"/warehouses",label:"Warehouses",icon:"warehouse",permissions:["warehouses.view","warehouses.create"],children:[{path:"/warehouses",label:"View All Warehouses",icon:"list",permissions:["warehouses.view"]},{path:"/warehouses/add",label:"Add Warehouse",icon:"add_circle",permissions:["warehouses.create"]}]},{path:"/shops",label:"Medical Shops",icon:"storefront",permissions:["shops.view","shops.create"],children:[{path:"/shops",label:"View All Shops",icon:"list",permissions:["shops.view"]},{path:"/shops/add",label:"Add Shop",icon:"add_circle",permissions:["shops.create"]}]},{path:"/users-access",label:"Users & Access",icon:"manage_accounts",permissions:["users.view","users.view.warehouse","roles.view","login_activity.view"],excludeFromWarehouseAdmin:!0,children:[{path:"/users",label:"Users",icon:"people",permissions:["users.view","users.view.warehouse"]},{path:"/roles",label:"Roles & Permissions",icon:"admin_panel_settings",permissions:["roles.view","roles.manage"]},{path:"/login-activity",label:"Login Activity",icon:"history",permissions:["login_activity.view"]}]},{path:"/master-data",label:"Master Data",icon:"dataset",permissions:["gst.manage","hsn.manage","categories.manage","units.manage","suppliers.manage","brands.manage","manufacturers.manage","medicine_types.manage","adjustment_reasons.manage","payment_methods.manage","racks.manage","gst.view","hsn.view","categories.view","units.view","suppliers.view","brands.view","manufacturers.view","medicine_types.view","adjustment_reasons.view","payment_methods.view","racks.view"],children:[{path:"/gst-slabs",label:"GST / VAT Slabs",icon:"percent",permissions:["gst.manage","gst.view"]},{path:"/hsn",label:"HSN Codes",icon:"tag",permissions:["hsn.manage","hsn.view"],divider:!0},{path:"/categories",label:"Medicine Categories",icon:"category",permissions:["categories.manage","categories.view"],divider:!0},{path:"/medicine-types",label:"Medicine Types",icon:"medication",permissions:["medicine_types.manage","medicine_types.view"]},{path:"/brands",label:"Brands",icon:"label",permissions:["brands.manage","brands.view"]},{path:"/manufacturers",label:"Manufacturers",icon:"factory",permissions:["manufacturers.manage","manufacturers.view"]},{path:"/units",label:"Units / Packaging",icon:"straighten",permissions:["units.manage","units.view"]},{path:"/racks",label:"Rack Master",icon:"shelves",permissions:["racks.manage","racks.manage.warehouse","racks.view","racks.view.warehouse"],divider:!0},{path:"/adjustment-reasons",label:"Adjustment Reasons",icon:"edit_note",permissions:["adjustment_reasons.manage","adjustment_reasons.view"]},{path:"/suppliers",label:"Suppliers",icon:"local_shipping",permissions:["suppliers.manage","suppliers.view"],divider:!0},{path:"/payment-methods",label:"Payment Methods",icon:"payments",permissions:["payment_methods.manage","payment_methods.view"]}]},{path:"/medicines",label:"Medicine Master",icon:"medication",permissions:["medicines.view","medicines.create"],children:[{path:"/medicines",label:"View Medicines",icon:"list",permissions:["medicines.view"]},{path:"/medicines/add",label:"Add Medicine",icon:"add_circle",permissions:["medicines.create"]}]},{path:"/inventory-oversight",label:"Inventory Oversight",icon:"inventory_2",permissions:["inventory.view.global"],children:[{path:"/inventory-oversight",label:"Overview",icon:"analytics",permissions:["inventory.view.global"]},{path:"/inventory-oversight/expiry",label:"Expiry Monitoring",icon:"event_busy",permissions:["inventory.view.global"]},{path:"/inventory-oversight/dead-stock",label:"Dead Stock",icon:"warning",permissions:["inventory.view.global"]}]},{path:"/reports",label:"Reports",icon:"assessment",permissions:["reports.view.global","reports.view.warehouse","reports.view.shop"],children:[{path:"/reports/sales",label:"Sales Reports",icon:"bar_chart",permissions:["reports.view.global","reports.view.shop"]},{path:"/reports/inventory",label:"Inventory Reports",icon:"inventory",permissions:["reports.view.global","reports.view.warehouse"]},{path:"/reports/tax",label:"Tax Reports",icon:"receipt",permissions:["reports.view.global","reports.view.shop"]},{path:"/reports/expiry",label:"Expiry Reports",icon:"event_busy",permissions:["reports.view.global","reports.view.warehouse","reports.view.shop"]}]},{path:"/system",label:"System",icon:"settings",permissions:["audit.view","settings.manage"],children:[{path:"/audit-logs",label:"Audit Logs",icon:"history",permissions:["audit.view"]},{path:"/system/settings",label:"System Settings",icon:"tune",permissions:["settings.manage"]}]}],w0=[{path:"/shops/stock",label:"Stock Entry",icon:"add_box",permissions:["inventory.entry.warehouse","stock.entry.warehouse"],excludeFromSuperAdmin:!0},{path:"/inventory",label:"Inventory",icon:"inventory_2",permissions:["inventory.view.warehouse","inventory.view.shop"],excludeFromSuperAdmin:!0},{path:"/inventory/adjust",label:"Stock Adjustment",icon:"tune",permissions:["inventory.adjust.warehouse","stock.adjust.warehouse"],excludeFromSuperAdmin:!0},{path:"/dispatches",label:"Dispatches",icon:"local_shipping",permissions:["dispatches.view.warehouse","dispatches.view.shop","dispatches.manage.warehouse"],excludeFromSuperAdmin:!0},{path:"/purchase-requests",label:"Purchase Requests",icon:"shopping_cart",permissions:["purchase_requests.view.warehouse","purchase_requests.view.shop","purchase_requests.create.shop","purchase_requests.approve"],excludeFromSuperAdmin:!0},{path:"/employees",label:"Employees",icon:"badge",permissions:["employees.view.warehouse","employees.view.shop","employees.create.warehouse","employees.view"],excludeFromSuperAdmin:!0},{path:"/employees/attendance",label:"Attendance",icon:"event_available",permissions:["attendance.manage.warehouse","attendance.manage.shop","attendance.view.warehouse"],excludeFromSuperAdmin:!0,children:[{path:"/employees/attendance",label:"Attendance Marker",icon:"edit_calendar",permissions:["attendance.manage.warehouse","attendance.manage.shop"]},{path:"/employees/attendance/report",label:"Attendance Report",icon:"summarize",permissions:["attendance.view.warehouse","attendance.manage.warehouse"]}]},{path:"/employees/salary",label:"Salary",icon:"payments",permissions:["salary.manage.warehouse","salary.manage.shop","payroll.view.warehouse","payroll.process.warehouse"],excludeFromSuperAdmin:!0},{path:"/sales/pos",label:"POS Billing",icon:"point_of_sale",permissions:["billing.create.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/sales/invoices",label:"Invoices",icon:"receipt_long",permissions:["billing.view.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/sales/returns",label:"Returns & Refunds",icon:"assignment_return",permissions:["returns.view.shop","returns.create.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/customers",label:"Customers",icon:"people",permissions:["customers.view.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0}];function kj(){const n=ya(),{user:r}=We(),{hasAnyPermission:o}=ra(),[i,u]=m.useState(!1),[x,h]=m.useState([]),N=r?.role||"user",y=N==="super_admin",g=S=>N==="warehouse_admin"&&"excludeFromWarehouseAdmin"in S&&S.excludeFromWarehouseAdmin?!1:y?!0:S.permissions&&S.permissions.length>0?o(S.permissions):!0;m.useEffect(()=>{(y?ki:[...ki,...w0]).forEach(b=>{b.children&&b.children.some(T=>n.pathname===T.path||n.pathname.startsWith(T.path+"/"))&&!x.includes(b.path)&&h(T=>[...T,b.path])})},[n.pathname,y]),m.useEffect(()=>{const S=localStorage.getItem("sidebarCollapsed");S&&u(S==="true")},[]);const p=()=>{const S=!i;u(S),localStorage.setItem("sidebarCollapsed",String(S))},f=S=>{h(b=>b.includes(S)?b.filter(A=>A!==S):[...b,S])},w=S=>S.children?S.children.some(b=>n.pathname===b.path||n.pathname.startsWith(b.path+"/")):n.pathname===S.path,_=(S,b)=>{let A=S.label;S.path==="/dispatches"&&N!=="warehouse_admin"&&N!=="warehouse_employee"&&(A="Incoming Shipments");const T=S.children&&S.children.length>0,q=x.includes(S.path),D=w(S);return T&&!i?e.jsxs("div",{className:"animate-fadeIn",style:{animationDelay:`${b*20}ms`},children:[e.jsxs("button",{onClick:()=>f(S.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group
                            ${D?"bg-primary/10 text-primary dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[22px] transition-transform group-hover:scale-110",children:S.icon}),e.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:A}),e.jsx("span",{className:`material-symbols-outlined text-[18px] transition-transform ${q?"rotate-180":""}`,children:"expand_more"})]}),q&&e.jsx("div",{className:"mt-1 ml-4 pl-4 border-l-2 border-slate-200 dark:border-slate-700 space-y-0.5",children:S.children.filter(M=>g(M)).map(M=>e.jsxs("div",{children:[M.divider&&e.jsx("div",{className:"my-2 border-t border-slate-200 dark:border-slate-700"}),e.jsxs(wd,{to:M.path,end:M.path===S.path,className:({isActive:se})=>`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors text-sm
                                                ${se?"bg-primary text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:M.icon}),e.jsx("span",{className:"font-medium",children:M.label})]})]},M.path))})]},S.path):e.jsxs(wd,{to:S.path,end:S.path==="/",className:({isActive:M})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors group
                    ${M?"bg-primary text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}
                    ${i?"justify-center":""}`,style:{animationDelay:`${b*20}ms`},title:i?A:void 0,children:[e.jsx("span",{className:"material-symbols-outlined text-[22px] transition-transform group-hover:scale-110",children:S.icon}),!i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm font-medium flex-1",children:A}),S.badge&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-red-500 text-white rounded-full",children:S.badge})]})]},S.path)},k=()=>y?ki.filter(S=>g(S)):[...ki,...w0].filter(b=>g(b));return e.jsxs("aside",{className:`
                flex flex-col border-r border-slate-200 dark:border-slate-800 
                bg-white dark:bg-slate-900 transition-all duration-300 ease-in-out
                ${i?"w-20":"w-64"}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:`flex items-center gap-3 ${i?"justify-center w-full":""}`,children:[e.jsx("div",{className:"flex items-center justify-center size-10 rounded-lg bg-primary text-white",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"local_pharmacy"})}),!i&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight text-slate-900 dark:text-white",children:"PharmaEC"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:y?"Super Admin":"Management System"})]})]}),!i&&e.jsx("button",{onClick:p,className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Collapse sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})})]}),i&&e.jsx("button",{onClick:p,className:"mx-auto mt-3 p-2 rounded-lg text-slate-400 hover:text-primary hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Expand sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1 no-scrollbar",children:k().map((S,b)=>_(S,b))})]})}function Sj(){const[n,r]=m.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),[o,i]=m.useState(!1),[u,x]=m.useState(""),[h,N]=m.useState(null),y=m.useRef(null),g=Fe(),{user:p,logout:f}=We();m.useEffect(()=>{n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[n]),m.useEffect(()=>{(async()=>{if(!p){x(""),N(null);return}try{if(p.shop_id){const T=await vt.get(p.shop_id);x(T.data.name||"Unknown Shop"),N("shop")}else if(p.warehouse_id){const T=await At.get(p.warehouse_id);x(T.data.name||"Unknown Warehouse"),N("warehouse")}else x(""),N(null)}catch(T){console.error("Failed to fetch entity name:",T),x(""),N(null)}})()},[p]),m.useEffect(()=>{const A=T=>{y.current&&!y.current.contains(T.target)&&i(!1)};return o&&document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[o]);const w=()=>{r(!n)},_=()=>{f(),g("/login")},k=A=>A.split(" ").map(T=>T[0]).join("").toUpperCase().slice(0,2),S=A=>({super_admin:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",warehouse_admin:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",pharmacy_admin:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",hr_manager:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",pharmacist:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400"})[A]||"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300",b=A=>A.split("_").map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" ");return e.jsxs("header",{className:"flex h-14 items-center justify-between border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-6 sticky top-0 z-10",children:[e.jsx("div",{className:"flex items-center gap-2",children:u&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:`material-symbols-outlined text-[18px] ${h==="shop"?"text-blue-600 dark:text-blue-400":"text-amber-600 dark:text-amber-400"}`,children:h==="shop"?"store":"warehouse"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold leading-none",children:h==="shop"?"Shop":"Warehouse"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white leading-tight",children:u})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:w,className:"flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:n?"Switch to Light Mode":"Switch to Dark Mode",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:n?"light_mode":"dark_mode"})}),e.jsxs("button",{onClick:()=>g("/notifications"),className:"relative flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Notifications",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"notifications"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 rounded-full bg-red-500"})]}),e.jsx("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),p&&e.jsxs("div",{className:"relative",ref:y,children:[e.jsxs("button",{onClick:()=>i(!o),className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm shadow-sm",children:k(p.full_name||p.email)}),e.jsx("span",{className:`material-symbols-outlined text-slate-400 text-[18px] transition-transform ${o?"rotate-180":""}`,children:"expand_more"})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50",children:[e.jsxs("div",{className:"p-3 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-md",children:k(p.full_name||p.email)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white truncate",children:p.full_name||"User"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:p.email})]})]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${S(p.role)}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"badge"}),b(p.role)]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{i(!1),g("/settings")},className:"w-full flex items-center gap-2 px-3 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"person"}),e.jsx("span",{className:"text-sm font-medium",children:"My Profile"})]}),e.jsxs("button",{onClick:()=>{i(!1),g("/settings/application")},className:"w-full flex items-center gap-2 px-3 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"settings"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-1"}),e.jsxs("button",{onClick:_,className:"w-full flex items-center gap-2 px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"logout"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]})]})]})}function _j(){return e.jsxs("div",{className:"flex h-screen w-full bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[e.jsx(kj,{}),e.jsxs("div",{className:"flex flex-1 flex-col h-full overflow-hidden min-w-0",children:[e.jsx(Sj,{}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900 scroll-smooth",children:e.jsx("div",{className:"page-content animate-fadeIn p-6",children:e.jsx(Wb,{})})})]})]})}function Cj(){const[n,r]=m.useState(""),[o,i]=m.useState(""),[u,x]=m.useState(!1),[h,N]=m.useState(""),[y,g]=m.useState(!1),p=Fe(),{refreshUser:f}=We(),w=async _=>{_.preventDefault(),N(""),x(!0);try{const k=await jp.login(n,o),{access_token:S,refresh_token:b}=k.data;localStorage.setItem("access_token",S),localStorage.setItem("refresh_token",b),await f(),p("/")}catch(k){N(k.response?.data?.detail||"Login failed. Please check your credentials.")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-white rounded-full translate-x-1/3 translate-y-1/3"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-16 text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-12",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"medication"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PharmaEC"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"Enterprise Management"})]})]}),e.jsxs("h2",{className:"text-4xl font-bold leading-tight mb-6",children:["Complete Pharmacy",e.jsx("br",{}),"Management Solution"]}),e.jsx("p",{className:"text-blue-100 text-lg leading-relaxed mb-10 max-w-md",children:"Streamline your operations with our comprehensive platform for warehouses, medical shops, inventory, billing, and more."}),e.jsx("div",{className:"space-y-4",children:[{icon:"warehouse",text:"Multi-Warehouse Management"},{icon:"storefront",text:"Medical Shop Operations"},{icon:"inventory_2",text:"Real-time Inventory Tracking"},{icon:"receipt_long",text:"Integrated POS & Billing"}].map((_,k)=>e.jsxs("div",{className:"flex items-center gap-3 text-blue-100",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:_.icon})}),e.jsx("span",{children:_.text})]},k))})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-blue-600 mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"medication"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"PharmaEC"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Welcome back"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Please enter your credentials to continue"})]}),h&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm flex items-start gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-lg flex-shrink-0",children:"error"}),e.jsx("span",{children:h})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:n,onChange:_=>r(_.target.value),placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",value:o,onChange:_=>i(_.target.value),placeholder:"",required:!0,className:"w-full px-4 py-3 pr-12 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"}),e.jsx("button",{type:"button",onClick:()=>g(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:y?"visibility_off":"visibility"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500 focus:ring-offset-0"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-600/30 hover:shadow-blue-600/40 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign In",e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})]})})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-xl",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"info"}),"Demo Credentials"]}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"Email:"})," admin@pharmaec.com"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"Password:"})," admin123"]})]})]}),e.jsx("p",{className:"text-center text-slate-400 text-sm mt-8",children:" 2024 PharmaEC. All rights reserved."})]})})]})}function Ej(){const n=Fe(),{user:r}=We(),{scope:o,activeEntity:i}=Aa(),[u,x]=m.useState({warehouses:0,shops:0,medicines:0,invoices:0,customers:0,employees:0,revenue:0,lowStockItems:0,expiringItems:0,pendingRequests:0,dispatchedToday:0}),[h,N]=m.useState([]),[y,g]=m.useState([]),[p,f]=m.useState([]),[w,_]=m.useState(!0),[k,S]=m.useState(null),[b,A]=m.useState([]);m.useEffect(()=>{T()},[o,i]);const T=async()=>{try{_(!0),S(null);const O={};i?.type==="warehouse"&&(O.warehouse_id=i.id),i?.type==="shop"&&(O.shop_id=i.id);const[P,H,Z,U,W,te,me,R,ee,I]=await Promise.allSettled([At.list({page:1,size:1}),vt.list({page:1,size:1}),wt.list({page:1,size:1}),Is.list({page:1,size:5,...O}),Gl.list({page:1,size:1}),ga.list({page:1,size:1,...O}),In.getSales(),$l.getAlerts(),Zs.list({status:"pending",size:1,...O}),Ws.list({size:500,...O})]),xe=(be,Le)=>be.status==="fulfilled"&&(be.value.data?.[Le]||be.value.data?.total)||0,L=R.status==="fulfilled"?R.value.data?.alerts||[]:[],E=L.filter(be=>be.type==="low_stock").length,j=L.filter(be=>be.type==="expiring"||be.type==="expired").length,B=ee.status==="fulfilled"&&ee.value.data?.total||0,F=new Date().toISOString().split("T")[0],le=(I.status==="fulfilled"?I.value.data?.items||I.value.data||[]:[]).filter(be=>be.dispatch_date&&be.dispatch_date.startsWith(F)).length;x({warehouses:xe(P,"total"),shops:xe(H,"total"),medicines:xe(Z,"total"),invoices:U.status==="fulfilled"&&(U.value.data?.total||U.value.data?.items?.length)||0,customers:xe(W,"total"),employees:xe(te,"total"),revenue:me.status==="fulfilled"&&me.value.data?.total_sales||0,lowStockItems:E,expiringItems:j,pendingRequests:B,dispatchedToday:le}),U.status==="fulfilled"&&A((U.value.data?.items||U.value.data||[]).slice(0,5)),N(L.slice(0,5).map(be=>({id:be.id||Math.random().toString(),title:be.type==="low_stock"?`Low Stock - ${be.medicine_name} ${be.brand?`(${be.brand})`:""}`:`Expiry Alert - ${be.medicine_name} ${be.brand?`(${be.brand})`:""}`,description:be.type==="low_stock"?`Only ${be.current_quantity} units left`:`Expires in ${be.days_to_expiry} days`,time:"Recently",severity:be.type==="expired"?"critical":"warning",type:be.type}))),g([]),f([])}catch(O){console.error("Dashboard fetch error:",O),S("Failed to load dashboard data")}finally{_(!1)}},q=O=>O>=1e7?`${(O/1e7).toFixed(1)}Cr`:O>=1e5?`${(O/1e5).toFixed(1)}L`:O>=1e3?`${(O/1e3).toFixed(0)}K`:`${O}`,D=[{title:"Total Revenue",value:q(u.revenue),icon:"payments",color:"emerald",trend:"+12.5%",trendUp:!0,subtitle:"vs last month"},{title:"Warehouses",value:u.warehouses.toString(),icon:"warehouse",color:"blue",trend:"+2",trendUp:!0,subtitle:"Active locations"},{title:"Medical Shops",value:u.shops.toString(),icon:"storefront",color:"purple",trend:"+5",trendUp:!0,subtitle:"Connected shops"},{title:"Total Medicines",value:u.medicines.toString(),icon:"medication",color:"cyan",trend:"+1.2%",trendUp:!0,subtitle:"SKUs in catalog"}],M=[{title:"Low Stock Items",value:u.lowStockItems.toString(),icon:"inventory",color:"red",badge:"Action Required",badgeColor:"red",subtitle:"Below safety threshold"},{title:"Expiring Soon",value:u.expiringItems.toString(),icon:"schedule",color:"orange",badge:"Review Needed",badgeColor:"orange",subtitle:"Within 30 days"},{title:"Pending Requests",value:u.pendingRequests.toString(),icon:"assignment",color:"amber",badge:"Pending",badgeColor:"amber",subtitle:"Awaiting approval"},{title:"Dispatched Today",value:u.dispatchedToday.toString(),icon:"local_shipping",color:"teal",trend:"",trendUp:!0,subtitle:"Successfully shipped"}],se=[{label:"POS Billing",icon:"point_of_sale",path:"/sales/pos",color:"blue"},{label:"Add Stock",icon:"add_box",path:"/warehouses/stock",color:"green"},{label:"New Order",icon:"shopping_cart",path:"/purchase-requests",color:"purple"},{label:"Dispatches",icon:"local_shipping",path:"/dispatches",color:"orange"},{label:"Reports",icon:"bar_chart",path:"/reports/sales",color:"cyan"},{label:"Employees",icon:"badge",path:"/employees",color:"pink"}];if(w)return e.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-slate-200 border-t-primary mx-auto"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl animate-pulse",children:"dashboard"})})]}),e.jsx("p",{className:"text-slate-500 mt-4 font-medium",children:"Loading dashboard..."})]})});const Q=Math.max(...y.map(O=>O.amount),1);return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(()=>{const O=new Date().getHours();return O<12?"Good Morning":O<17?"Good Afternoon":"Good Evening"})(),", ",r?.full_name||"User"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400 text-[20px]",children:"business"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total Locations"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:u.warehouses+u.shops})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Overview of pharmacy operations"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:T,className:"btn btn-secondary",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"refresh"}),"Refresh"]}),o!=="global"&&e.jsxs("button",{onClick:()=>n("/sales/pos"),className:"btn btn-primary",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"add"}),"New Sale"]})]})]}),k&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3 animate-fadeIn",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:k}),e.jsx("button",{onClick:T,className:"ml-auto text-sm text-red-600 hover:text-red-800 font-medium",children:"Retry"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:D.map((O,P)=>e.jsxs("div",{className:"group relative overflow-hidden bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-fadeInUp",style:{animationDelay:`${P*100}ms`},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br opacity-5 group-hover:opacity-10 transition-opacity ${O.color==="emerald"?"from-emerald-400 to-emerald-600":O.color==="blue"?"from-blue-400 to-blue-600":O.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"}`}),e.jsxs("div",{className:"flex items-start justify-between mb-4 relative",children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-br ${O.color==="emerald"?"from-emerald-400 to-emerald-600":O.color==="blue"?"from-blue-400 to-blue-600":O.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"} group-hover:scale-110 transition-transform duration-300`,children:e.jsx("span",{className:"material-symbols-outlined text-white",style:{fontSize:28},children:O.icon})}),O.trend&&e.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${O.trendUp?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:14},children:O.trendUp?"trending_up":"trending_down"}),O.trend]})]}),e.jsx("h4",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1 relative",children:O.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-semibold mb-1 relative",children:O.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 relative",children:O.subtitle}),e.jsx("div",{className:`absolute -bottom-2 -right-2 w-24 h-24 rounded-full opacity-10 blur-2xl bg-gradient-to-br ${O.color==="emerald"?"from-emerald-400 to-emerald-600":O.color==="blue"?"from-blue-400 to-blue-600":O.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"}`})]},O.title))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:M.map(O=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400",style:{fontSize:20},children:O.icon})}),O.badge&&e.jsx("span",{className:"badge badge-warning",children:O.badge})]}),e.jsx("h4",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:O.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:O.title})]},O.title))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Sales Overview"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:q(u.revenue)}),e.jsx("span",{className:"text-sm text-emerald-600 font-medium bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded-full",children:"+12.5%"})]})]})}),e.jsx("div",{className:"h-64 flex items-end gap-4 px-4 border-b border-slate-100 dark:border-slate-700 pb-4",children:y.map((O,P)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-full max-w-[60px] bg-primary rounded-t-lg",style:{height:`${O.amount/Q*100}%`,minHeight:"20px"}}),e.jsx("span",{className:"text-xs font-medium text-slate-500",children:O.month})]},P))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Top Selling Medicine"}),e.jsx("div",{className:"space-y-4",children:p.map((O,P)=>{const H=Math.max(...p.map(U=>U.sales)),Z=O.sales/H*100;return e.jsxs("div",{className:"group animate-fadeInUp",style:{animationDelay:`${P*100}ms`},children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:O.name}),e.jsxs("span",{className:"text-slate-900 dark:text-white font-bold",children:["",(O.sales/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 w-full bg-slate-100 dark:bg-slate-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`${O.color} h-3 rounded-full transition-all duration-700 ease-out`,style:{width:`${Z}%`}})}),e.jsx("span",{className:"text-xs text-slate-500 font-medium w-12 text-right",children:O.quantity})]})]},O.name)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-gradient-to-r from-red-50 to-transparent dark:from-red-900/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"warning"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Stock Alerts"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-red-100 text-red-600 rounded-full",children:h.length})]}),e.jsx("button",{onClick:()=>n("/notifications"),className:"text-sm text-primary font-medium hover:underline",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-72 overflow-auto",children:h.length>0?h.map((O,P)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${P*50}ms`},children:[e.jsx("div",{className:`mt-0.5 h-3 w-3 rounded-full flex-shrink-0 ${O.severity==="critical"?"bg-red-500":"bg-amber-500"} animate-pulse`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:O.title}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-0.5",children:O.description})]}),e.jsx("button",{className:"px-3 py-1 text-xs font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:O.type==="low_stock"?"Restock":"Review"})]},O.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-green-500 mb-2",children:"check_circle"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"All Clear!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No stock alerts at this time"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"receipt_long"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Recent Invoices"})]}),e.jsx("button",{onClick:()=>n("/sales/invoices"),className:"text-sm text-primary font-medium hover:underline",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-72 overflow-auto",children:b.length>0?b.map((O,P)=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${P*50}ms`},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-[18px]",children:"receipt"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:O.invoice_number||`INV-${O.id}`}),e.jsx("p",{className:"text-xs text-slate-500",children:O.customer_name||"Walk-in Customer"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-600",children:q(O.total_amount||0)}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(O.created_at).toLocaleDateString()})]})]},O.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 mb-2",children:"receipt_long"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"No invoices yet"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create an invoice to get started"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:se.map((O,P)=>e.jsxs("button",{onClick:()=>n(O.path),className:"flex flex-col items-center gap-3 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-primary/50 transition-all hover:-translate-y-1 hover:shadow-lg group animate-fadeInUp",style:{animationDelay:`${P*50}ms`},children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-${O.color}-100 dark:bg-${O.color}-900/30 flex items-center justify-center group-hover:scale-110 transition-transform`,children:e.jsx("span",{className:`material-symbols-outlined text-${O.color}-600 dark:text-${O.color}-400 text-2xl`,children:O.icon})}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:O.label})]},O.label))})]})]})}function Gd({value:n,onChange:r,placeholder:o="Search...",className:i=""}){return e.jsxs("div",{className:`search-bar ${i}`,children:[e.jsx("span",{className:"material-symbols-outlined search-icon",children:"search"}),e.jsx("input",{type:"text",value:n,onChange:u=>r(u.target.value),placeholder:o,className:"search-input"}),n&&e.jsx("button",{onClick:()=>r(""),className:"clear-button",title:"Clear search",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})}),e.jsx("style",{children:`
                .search-bar {
                    position: relative;
                    display: flex;
                    align-items: center;
                    width: 100%;
                    max-width: 400px;
                }
                
                .search-icon {
                    position: absolute;
                    left: 12px;
                    color: #9ca3af;
                    font-size: 20px;
                }
                
                .search-input {
                    width: 100%;
                    padding: 10px 40px 10px 44px;
                    border: 1px solid #e5e7eb;
                    border-radius: 8px;
                    font-size: 14px;
                    transition: all 0.2s;
                }
                
                .search-input:focus {
                    outline: none;
                    border-color: #4a6cf7;
                    box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
                }
                
                .clear-button {
                    position: absolute;
                    right: 8px;
                    background: none;
                    border: none;
                    padding: 4px;
                    cursor: pointer;
                    color: #9ca3af;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                .clear-button:hover {
                    background: #f3f4f6;
                    color: #4b5563;
                }
                
                .clear-button .material-symbols-outlined {
                    font-size: 18px;
                }
            `})]})}function re({variant:n="primary",size:r="md",children:o,icon:i,loading:u,className:x="",disabled:h,...N}){let g="";switch(n){case"primary":g="btn-primary";break;case"secondary":g="btn-secondary";break;case"ghost":g="bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300 border-transparent shadow-none";break;case"danger":case"error":g="bg-red-50 text-red-600 hover:bg-red-100 border-red-200 shadow-sm";break;case"success":g="bg-green-50 text-green-600 hover:bg-green-100 border-green-200 shadow-sm";break;case"warning":g="bg-yellow-50 text-yellow-600 hover:bg-yellow-100 border-yellow-200 shadow-sm";break;case"info":g="bg-blue-50 text-blue-600 hover:bg-blue-100 border-blue-200 shadow-sm";break;case"outline":g="bg-transparent border border-slate-300 text-slate-700 hover:bg-slate-50";break;default:g="btn-primary"}let p="";switch(r){case"sm":p="px-3 py-1.5 text-sm h-8";break;case"lg":p="px-6 py-3 text-lg h-12";break;default:p="px-4 py-2"}return e.jsxs("button",{className:`btn ${g} ${p} ${x} flex items-center justify-center gap-2 transition-all font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed`,disabled:h||u,...N,children:[u?e.jsx("span",{className:`animate-spin rounded-full border-2 border-current border-t-transparent ${r==="sm"?"h-3 w-3":"h-4 w-4"}`}):i?e.jsx("span",{className:`material-symbols-outlined ${r==="sm"?"text-[18px]":"text-[20px]"}`,children:i}):null,o]})}function Aj({title:n,count:r,searchProps:o,onFilterClick:i,actions:u,className:x="",embedded:h=!1}){const N=h?`bg-white dark:bg-slate-800 px-4 py-3 border-b border-slate-100 dark:border-slate-700 ${x}`:`bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 px-4 py-3 ${x}`;return e.jsx("div",{className:N,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("h2",{className:"text-base font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[n,r!==void 0&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap sm:flex-nowrap",children:[o&&e.jsx("div",{className:"w-full sm:w-auto min-w-[220px]",children:e.jsx(Gd,{value:o.value,onChange:o.onChange,placeholder:o.placeholder||"Search...",className:"!w-full"})}),i&&e.jsx(re,{variant:"secondary",onClick:i,className:"!p-2",title:"Filter List",children:e.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-500",children:"filter_list"})}),u]})]})})}function Tj({data:n,columns:r,loading:o=!1,emptyMessage:i="No data available",zebra:u=!1,stickyHeader:x=!0,pagination:h,error:N,onRetry:y,headerSlot:g}){const p=()=>Array(5).fill(0).map((f,w)=>e.jsx("tr",{className:"animate-pulse border-b border-slate-100 dark:border-slate-800",children:r.map((_,k)=>e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4"})},k))},`skel-${w}`));return N?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center mb-3",children:e.jsx("span",{className:"material-symbols-outlined text-red-500 text-[24px]",children:"error"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"Failed to load data"}),e.jsx("p",{className:"text-sm mt-1 mb-4 max-w-xs",children:N}),y&&e.jsx("button",{onClick:y,className:"px-4 py-2 bg-white border border-slate-300 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[g&&e.jsx("div",{className:"border-b border-slate-100 dark:border-slate-700",children:g}),e.jsx("div",{className:"overflow-x-auto flex-1 relative",children:e.jsxs("table",{className:`w-full text-left text-sm ${u?"table-zebra":""} border-collapse`,children:[e.jsx("thead",{className:`bg-slate-50 dark:bg-slate-900/90 z-10 ${x?"sticky top-0":""}`,children:e.jsx("tr",{children:r.map((f,w)=>{const _=f.numeric||f.align==="right"?"text-right":f.align==="center"?"text-center":"text-left";return e.jsx("th",{className:`px-4 py-3 font-semibold text-slate-900 dark:text-white uppercase text-xs tracking-wider ${_} ${f.className||""}`,style:{width:f.width},children:f.header},w)})})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:o?p():n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:r.length,className:"px-4 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"inbox"})}),e.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-400",children:i})]})})}):n.map((f,w)=>e.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:r.map((_,k)=>{const S=_.render?_.render(f):f[_.key],b=_.numeric||_.align==="right"?"text-right":_.align==="center"?"text-center":"text-left";return e.jsx("td",{className:`px-4 py-3 text-slate-600 dark:text-slate-300 ${b} ${_.className||""}`,children:S},k)})},w))})]})}),h&&!o&&!N&&n.length>0&&e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50 px-4 py-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Showing ",e.jsx("span",{className:"font-medium",children:(h.currentPage-1)*h.pageSize+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(h.currentPage*h.pageSize,h.totalItems)})," of ",e.jsx("span",{className:"font-medium",children:h.totalItems})]}),h.onPageSizeChange&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Show:"}),e.jsx("select",{value:h.pageSize,onChange:f=>h.onPageSizeChange?.(Number(f.target.value)),className:"px-2 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(h.pageSizeOptions||[10,15,25,50]).map(f=>e.jsx("option",{value:f,children:f},f))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>h.onPageChange(Math.max(1,h.currentPage-1)),disabled:h.currentPage===1,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-800 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:border-transparent transition-all",title:"Previous Page",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})}),(()=>{const{currentPage:f,totalPages:w}=h,_=[];if(w<=7)for(let k=1;k<=w;k++)_.push(k);else{_.push(1),f>3&&_.push("...");const k=Math.max(2,f-1),S=Math.min(w-1,f+1);for(let b=k;b<=S;b++)_.includes(b)||_.push(b);f<w-2&&_.push("..."),_.includes(w)||_.push(w)}return _.map((k,S)=>k==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."},`ellipsis-${S}`):e.jsx("button",{onClick:()=>h.onPageChange(k),className:`min-w-[32px] h-8 px-2 rounded-lg text-sm font-medium transition-all ${f===k?"bg-blue-600 text-white shadow-sm":"hover:bg-white dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 border border-transparent hover:border-slate-200 dark:hover:border-slate-700"}`,children:k},k))})(),e.jsx("button",{onClick:()=>h.onPageChange(Math.min(h.totalPages,h.currentPage+1)),disabled:h.currentPage===h.totalPages,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-800 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:border-transparent transition-all",title:"Next Page",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})})]})]})]})}function Dj({title:n,subtitle:r,actions:o}){return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white capitalize tracking-tight",children:n}),r&&e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:r})]}),o]})}function Rj({children:n}){return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 animate-fadeIn",children:n})}function Mj({children:n,className:r="",loading:o=!1}){return o?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px] h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):e.jsx("div",{className:`space-y-6 max-w-[1600px] mx-auto ${r}`,children:n})}const ge=Object.assign(Mj,{Header:Dj,KPICards:Rj,ListControls:Aj,DataTable:Tj});function je({title:n,value:r,change:o,changeType:i="up",icon:u,onClick:x,isActive:h=!1,valueClassName:N,className:y=""}){const g={up:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10",down:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-500/10",neutral:"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-500/10"},p={up:"trending_up",down:"trending_down",neutral:"trending_flat"};return e.jsxs("div",{onClick:x,className:`
                flex flex-col gap-1 rounded-xl p-5 shadow-sm border transition-all duration-200
                ${x?"cursor-pointer hover:shadow-md hover:-translate-y-0.5":""}
                ${h?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 ring-1 ring-blue-500/30":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}
                ${y}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm font-medium ${h?"text-blue-700 dark:text-blue-300":"text-slate-500 dark:text-slate-400"}`,children:n}),e.jsx("span",{className:`material-symbols-outlined ${h?"text-blue-600 dark:text-blue-400":"text-slate-400"}`,children:u})]}),e.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[e.jsx("p",{className:`text-2xl font-bold ${N||(h?"text-blue-900 dark:text-blue-100":"text-slate-900 dark:text-white")}`,children:r}),o&&e.jsxs("span",{className:`flex items-center text-xs font-medium ${g[i]} px-1.5 py-0.5 rounded mb-1`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] mr-0.5",children:p[i]}),o]})]})]})}const zj={success:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",warning:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",error:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",info:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",secondary:"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",primary:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"};function Ve({children:n,variant:r,className:o=""}){return e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${zj[r]} ${o}`,children:n})}function Lt({isOpen:n,onClose:r,title:o,children:i,footer:u,maxWidth:x="md",size:h}){const N=h||x;if(!n)return null;const y={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:`modal-content w-full ${y[N]} mx-4`,onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:o}),e.jsx("button",{onClick:r,className:"p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"close"})})]}),e.jsx("div",{className:"p-6",children:i}),u&&e.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:u})]})})}function It({isOpen:n,onClose:r,onConfirm:o,title:i,message:u,confirmText:x="Confirm",cancelText:h="Cancel",variant:N="danger"}){if(!n)return null;const y=()=>{switch(N){case"danger":return"warning";case"warning":return"error";case"info":return"info";default:return"warning"}},p=(()=>{switch(N){case"danger":return{iconBg:"bg-red-100 dark:bg-red-900/30",iconText:"text-red-600 dark:text-red-400",buttonBg:"bg-red-600 hover:bg-red-700 shadow-red-500/20"};case"warning":return{iconBg:"bg-amber-100 dark:bg-amber-900/30",iconText:"text-amber-600 dark:text-amber-400",buttonBg:"bg-amber-600 hover:bg-amber-700 shadow-amber-500/20"};case"info":return{iconBg:"bg-blue-100 dark:bg-blue-900/30",iconText:"text-blue-600 dark:text-blue-400",buttonBg:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20"}}})();return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${p.iconBg} ${p.iconText} flex items-center justify-center mb-4`,children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:y()})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:i}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:u})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 font-medium transition-colors",children:h}),e.jsx("button",{onClick:o,className:`flex-1 px-4 py-2.5 text-white rounded-xl font-medium transition-colors shadow-lg ${p.buttonBg}`,children:x})]})]})})}function Oj(){const n=Fe(),{user:r}=We(),i=(r?.role||"user")==="super_admin",[u,x]=m.useState([]),[h,N]=m.useState(!0),[y,g]=m.useState(""),[p,f]=m.useState("all"),[w,_]=m.useState(1),[k,S]=m.useState(0),[b,A]=m.useState(0),[T,q]=m.useState(10),[D,M]=m.useState(null),[se,Q]=m.useState([]),[O,P]=m.useState(!1);m.useEffect(()=>{Z(),H()},[w,T,y,p]);const H=async()=>{try{const L=await At.list({status:"active",size:1});A(L.data.total||0)}catch(L){console.error("Failed to fetch stats",L)}},Z=async()=>{try{N(!0);const L={page:w,size:T};y&&(L.search=y),p!=="all"&&(L.status=p);const E=await At.list(L);x(E.data.items||[]),S(E.data.total||0)}catch(L){console.error("Failed to fetch warehouses:",L),x([])}finally{N(!1)}},U=async L=>{M(L),P(!0);try{const E=await vt.list({warehouse_id:L.id,size:100});Q(E.data.items||[])}catch(E){console.error("Failed to fetch connected shops:",E),Q([])}finally{P(!1)}},[W,te]=m.useState(!1),[me,R]=m.useState(null),ee=L=>{R(L),te(!0)},I=async()=>{if(me)try{await At.delete(me.id),window.toast?.success("Warehouse deleted successfully"),Z(),H()}catch(L){console.error("Failed to delete warehouse:",L),window.toast?.error(L.response?.data?.detail||"Failed to delete warehouse")}finally{te(!1),R(null)}},xe=[{header:"Warehouse",key:"name",render:L=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"warehouse"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:L.name}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:L.code})]})]})},{header:"Location",key:"city",render:L=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:L.city}),e.jsx("span",{className:"text-xs text-slate-500",children:L.state})]}),className:"hidden sm:table-cell"},{header:"Shops",key:"shop_count",render:L=>e.jsxs("div",{className:"flex items-center justify-center font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] mr-1 text-slate-400",children:"storefront"}),L.shop_count||0]}),align:"center"},{header:"Status",key:"status",render:L=>e.jsx(Ve,{variant:L.status==="active"?"success":L.status==="suspended"?"error":"secondary",children:L.status}),align:"center"},{header:"Actions",key:"id",render:L=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(re,{variant:"ghost",onClick:()=>U(L),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})}),e.jsx(re,{variant:"ghost",onClick:()=>n(`/warehouses/edit/${L.id}`),className:"!p-1.5 h-8 w-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20",title:"Edit Warehouse",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),i&&e.jsx(re,{variant:"ghost",onClick:()=>ee(L),className:"!p-1.5 h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",title:"Delete Warehouse",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Warehouses",subtitle:`Manage ${k} warehouses in your network`,actions:e.jsxs(re,{variant:"primary",onClick:()=>n("/warehouses/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Warehouse"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Warehouses",value:k,icon:"warehouse",onClick:()=>f("all"),isActive:p==="all"}),e.jsx(je,{title:"Active Warehouses",value:b,icon:"check_circle",onClick:()=>f("active"),isActive:p==="active",trend:"neutral"}),e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:"hidden lg:block"})]}),e.jsx(ge.DataTable,{columns:xe,data:u,loading:h,emptyMessage:"No warehouses found. Add your first warehouse.",pagination:{currentPage:w,totalPages:Math.ceil(k/T),onPageChange:_,totalItems:k,pageSize:T,onPageSizeChange:L=>{q(L),_(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Warehouse List",count:k,searchProps:{value:y,onChange:L=>{g(L),_(1)},placeholder:"Search warehouses..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:p,onChange:L=>{f(L.target.value),_(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})}),embedded:!0})}),e.jsx(Lt,{isOpen:!!D,onClose:()=>M(null),title:D?.name||"Warehouse Details",maxWidth:"lg",children:D&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Code"}),e.jsx("p",{className:"text-sm mt-1 font-mono",children:D.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Status"}),e.jsx(Ve,{variant:D.status==="active"?"success":"secondary",className:"mt-1",children:D.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Capacity"}),e.jsxs("p",{className:"text-sm mt-1",children:[D.capacity?.toLocaleString()||"-"," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"City"}),e.jsx("p",{className:"text-sm mt-1",children:D.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"State"}),e.jsx("p",{className:"text-sm mt-1",children:D.state})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Contact"}),e.jsx("p",{className:"text-sm mt-1",children:D.phone||"-"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-3",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Address"}),e.jsxs("p",{className:"text-sm mt-1",children:[D.address||"-"," - ",D.pincode]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4",children:["Connected Medical Shops (",se.length,")"]}),O?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):se.length>0?e.jsx("div",{className:"grid gap-3",children:se.map((L,E)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:L.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[L.city,", ",L.state]})]})]}),e.jsx(Ve,{variant:L.status==="active"?"success":"secondary",className:"text-xs",children:L.status})]},E))}):e.jsx("div",{className:"text-center py-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No medical shops connected to this warehouse."})})]})]})}),e.jsx(It,{isOpen:W,onClose:()=>te(!1),onConfirm:I,title:"Delete Warehouse",message:`Are you sure you want to delete "${me?.name}"? This action cannot be undone.`,confirmText:"Delete Warehouse"})]})}function Zt({title:n,description:r,subtitle:o,icon:i,actions:u,children:x,className:h="",loading:N=!1}){return e.jsxs("div",{className:`flex flex-col h-full ${h}`,children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6 sm:flex-row sm:items-end sm:justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-[24px]",children:i})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white capitalize",children:n}),(r||o)&&e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:r||o})]})]})}),u&&e.jsx("div",{className:"flex items-center gap-3",children:u})]}),e.jsx("div",{className:"flex-1",children:N?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px] h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):x})]})}function Ie({children:n,className:r="",padding:o,title:i,icon:u}){const x=o?{padding:o}:{};return e.jsxs("div",{className:`card ${r}`,style:x,children:[(i||u)&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[u&&e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400",children:u}),i&&e.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-white",children:i})]}),n]})}function fe({label:n,error:r,required:o,className:i="",...u}){return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[n,o&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{className:`input ${r?"border-red-500":""} ${i}`,...u}),r&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),r]})]})}function k0({label:n,error:r,options:o,placeholder:i,className:u="",...x}){return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[n,x.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:`input appearance-none ${r?"border-red-500":""} ${u}`,...x,children:[i&&e.jsx("option",{value:"",children:i}),o.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"expand_more"})})]}),r&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),r]})]})}function Fi({value:n,onChange:r,options:o,label:i,placeholder:u="Select...",error:x,required:h,disabled:N,className:y=""}){const[g,p]=m.useState(!1),[f,w]=m.useState(""),_=m.useRef(null);m.useEffect(()=>{const S=o.find(b=>b.value===n);S&&w(S.label)},[n,o]),m.useEffect(()=>{function S(b){if(_.current&&!_.current.contains(b.target)){p(!1);const A=o.find(T=>T.value===n);A?w(A.label):n||w("")}}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[_,n,o]);const k=o.filter(S=>{const b=S.label.toLowerCase().replace(/\s+/g,""),A=f.toLowerCase().replace(/\s+/g,"");if(b.includes(A))return!0;const T=f.toLowerCase().split(/\s+/).filter(D=>D.length>0),q=S.label.toLowerCase();return T.every(D=>q.includes(D))});return e.jsxs("div",{className:`w-full ${y}`,ref:_,children:[i&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[i,h&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:f,onChange:S=>{w(S.target.value),p(!0),S.target.value||r("")},onFocus:()=>p(!0),placeholder:u,disabled:N,className:`input w-full ${x?"border-red-500":""} ${N?"opacity-50 cursor-not-allowed":""}`}),g&&!N&&e.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-60 overflow-auto",children:k.length>0?k.map(S=>e.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 ${n===S.value?"bg-primary/10 text-primary font-medium":"text-slate-700 dark:text-slate-300"}`,onClick:()=>{r(S.value),w(S.label),p(!1)},children:S.label},S.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-slate-500 text-center",children:"No matches found"})})]}),x&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),x]})]})}function S0(){const n=Fe(),{activeEntity:r}=Aa(),[o,i]=m.useState([]),[u,x]=m.useState([]),[h,N]=m.useState([]),y=r?.type,g=r?.id||"",p=r?.name||"",[f,w]=m.useState(""),[_,k]=m.useState(""),[S,b]=m.useState(""),[A,T]=m.useState(""),[q,D]=m.useState(""),[M,se]=m.useState(""),[Q,O]=m.useState(""),[P,H]=m.useState(!1),[Z,U]=m.useState({type:"",text:""}),[W,te]=m.useState([]),[me,R]=m.useState("");m.useEffect(()=>{(!r||r.type!=="warehouse"&&r.type!=="shop")&&n("/")},[r,n]),m.useEffect(()=>{r&&(ee(),r.type==="warehouse"&&xe())},[r]),m.useEffect(()=>{f?I(f):x([]),k(""),b(""),D(""),R("")},[f]);const ee=async()=>{try{const ie=await wt.list({size:500});i(ie.data.items||ie.data)}catch(ie){console.error("Error loading medicines:",ie)}},I=async ie=>{try{const ce=await wt.getBatches(ie);let Se=[];ce.data&&(Array.isArray(ce.data)?Se=ce.data:ce.data.items&&Array.isArray(ce.data.items)?Se=ce.data.items:ce.data.data&&Array.isArray(ce.data.data)&&(Se=ce.data.data)),x(Se)}catch(ce){console.error("Error loading batches:",ce),x([])}},xe=async()=>{try{const ie=await Di.list({size:500});N(ie.data.items||[])}catch(ie){console.error("Error loading racks:",ie)}},L=ya(),[E,j]=m.useState(null),[B,F]=m.useState([]);m.useEffect(()=>{L.state?.dispatchId&&(j(L.state.dispatchId),pe(L.state.dispatchId))},[L.state]);const pe=async ie=>{try{H(!0);const ce=await Ws.get(ie);F(ce.data.items||[])}catch(ce){console.error("Failed to load dispatch",ce),U({type:"error",text:"Failed to load dispatch details"})}finally{H(!1)}},le=async(ie,ce,Se=!1)=>{try{H(!0),await $l.stockEntry({shop_id:g,medicine_id:ie.medicine_id,batch_number:ie.batch_number,expiry_date:ie.expiry_date,quantity:ie.quantity,purchase_price:ie.purchase_price||0,selling_price:ie.selling_price||0,rack_name:ie.rack_name||M,rack_number:ie.rack_number||Q});const ke=[...B];ke[ce].status="received",ke[ce].rack_name=ie.rack_name||M,ke[ce].rack_number=ie.rack_number||Q,F(ke),ke.every($=>$.status==="received")?(await Ws.updateStatus(E,"delivered"),U({type:"success",text:"All items received. Dispatch marked as Delivered."}),setTimeout(()=>n("/dispatches"),2e3)):Se||U({type:"success",text:"Item received successfully"})}catch(ke){console.error(ke),U({type:"error",text:"Failed to receive item"})}finally{H(!1)}},be=ie=>{if(R(ie),ie){const ce=u.find(Se=>Se.id===ie);ce&&(k(ce.batch_number),b(ce.expiry_date))}},Le=async ie=>{if(ie.preventDefault(),!g||!f||!_||!S||!A){U({type:"error",text:"Please fill all required fields"});return}H(!0);try{const ce={medicine_id:f,batch_number:_,expiry_date:S,quantity:parseInt(A),purchase_price:parseFloat(q)||0,selling_price:o.find(ke=>ke.id===f)?.selling_price||0};y==="warehouse"?(ce.warehouse_id=g,ce.rack_name=M||void 0,ce.rack_number=Q||void 0):ce.shop_id=g,await $l.stockEntry(ce);const Se=o.find(ke=>ke.id===f);te(ke=>[{medicine:Se?.name,batch:_,quantity:parseInt(A),rack:ce.rack_name?`${ce.rack_number||""} / ${ce.rack_name}`:"-",timestamp:new Date().toLocaleTimeString()},...ke.slice(0,9)]),U({type:"success",text:"Stock entry added successfully"}),T(""),D(""),se(""),O(""),k(""),b(""),w(""),R("")}catch(ce){U({type:"error",text:ce.response?.data?.detail||"Failed to add stock entry"})}finally{H(!1)}};return e.jsx(Zt,{title:`${y==="shop"?"Shop":"Warehouse"} Stock Entry`,description:`Add new inventory items to your ${y}`,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Ie,{title:"Add Stock",icon:"add_circle",children:[Z.text&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-start gap-3 ${Z.type==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:Z.type==="error"?"error":"check_circle"}),e.jsx("p",{children:Z.text})]}),E?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-xl mb-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Receiving Dispatch Shipment"}),e.jsxs("p",{className:"text-sm",children:["Verify and accept items below. Status: ",L.state?.status]})]}),e.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-xl mb-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Bulk Receive Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(fe,{label:"Global Rack No",value:Q,onChange:ie=>O(ie.target.value),placeholder:"Apply to all items",className:"bg-white"}),e.jsx(fe,{label:"Global Box Name",value:M,onChange:ie=>se(ie.target.value),placeholder:"Apply to all items",className:"bg-white"}),e.jsx("div",{className:"flex items-end",children:e.jsx(re,{onClick:async()=>{if(confirm("Receive all remaining items with these rack details?")){H(!0);try{const ie=B.filter(ce=>ce.status!=="received");for(const ce of ie){const Se=B.findIndex(ke=>ke===ce);await le(ce,Se,!0)}U({type:"success",text:"All items received successfully"}),setTimeout(()=>n("/dispatches"),1500)}catch(ie){console.error(ie)}finally{H(!1)}}},variant:"primary",className:"w-full justify-center",disabled:P||B.every(ie=>ie.status==="received"),children:"Receive All Remaining"})})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Enters the specified Rack/Box for all items and marks them as received. Individual inputs below override these if set."})]}),B.map((ie,ce)=>e.jsxs("div",{className:`p-4 rounded-xl border mb-4 ${ie.status==="received"?"bg-green-50 border-green-200 opacity-75":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-white text-lg",children:ie.medicine_name}),e.jsxs("div",{className:"text-sm text-slate-500",children:[ie.manufacturer,"  Batch: ",ie.batch_number]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Exp: ",ie.expiry_date,"  MRP: ",ie.mrp]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ie.quantity}),e.jsx("div",{className:"text-xs text-slate-500",children:"Qty"})]})]}),ie.status!=="received"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(fe,{label:"Rack No",value:ie.rack_number||"",onChange:Se=>{const ke=[...B];ke[ce].rack_number=Se.target.value,F(ke)},placeholder:Q||"R-01",className:"!text-sm"}),e.jsx(fe,{label:"Box Name",value:ie.rack_name||"",onChange:Se=>{const ke=[...B];ke[ce].rack_name=Se.target.value,F(ke)},placeholder:M||"Shelf A",className:"!text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(re,{onClick:()=>le(ie,ce),variant:"success",className:"w-full justify-center !py-2",disabled:P,children:"Accept"})})]}):e.jsxs("div",{className:"mt-2 flex items-center text-green-600 font-medium",children:[e.jsx("span",{className:"material-symbols-outlined mr-2",children:"check_circle"}),"Received to ",ie.rack_name||ie.rack_number||"Stock"]})]},ce)),B.length===0&&!P&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No items found in dispatch."})]}):e.jsxs("form",{onSubmit:Le,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-white mb-2 capitalize",children:y}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-700 dark:text-slate-300 font-medium flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:y==="warehouse"?"warehouse":"store"}),p]})]}),e.jsxs("div",{children:[e.jsx(Fi,{label:"Medicine *",value:f,onChange:ie=>w(ie),required:!0,options:o.map(ie=>({value:ie.id,label:`${ie.name} ${ie.brand?`(${ie.brand})`:""} - ${ie.manufacturer}`})),placeholder:"Select Medicine"}),f&&(()=>{const ie=o.find(ce=>ce.id===f);return ie?e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg text-sm grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between col-span-2 border-b border-blue-200 dark:border-blue-800 pb-2 mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Brand:"}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[ie.brand||"-"," (",ie.manufacturer,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Generic:"})," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:ie.generic_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"MRP:"})," ",e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["",ie.mrp]})]})]}):null})()]}),u.length>0&&e.jsx("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:e.jsx(k0,{label:"Quick Fill from Existing Batch (Optional)",value:me,onChange:ie=>be(ie.target.value),placeholder:"-- Use new batch details below --",options:u.map(ie=>({value:ie.id,label:`${ie.batch_number} (Exp: ${ie.expiry_date})`})),className:"!bg-white"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Batch Number *",value:_,onChange:ie=>k(ie.target.value.toUpperCase()),placeholder:"New or Existing Batch Number",required:!0,disabled:!f,className:"font-mono"}),e.jsx(fe,{label:"Expiry Date *",type:"date",value:S,onChange:ie=>b(ie.target.value),required:!0,disabled:!f})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Quantity *",type:"number",value:A,onChange:ie=>T(ie.target.value),placeholder:"Enter quantity",min:"1",required:!0}),e.jsx(fe,{label:"Purchase Price () *",type:"number",step:"0.01",value:q,onChange:ie=>D(ie.target.value),placeholder:"Enter purchase price",min:"0",required:!0})]}),y==="warehouse"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(k0,{label:"Rack No",value:h.find(ie=>ie.rack_number===Q)?.id||"",onChange:ie=>{const ce=h.find(Se=>Se.id===ie.target.value);ce&&O(ce.rack_number)},options:h.map(ie=>({value:ie.id,label:`${ie.rack_number} - ${ie.rack_name}`})),placeholder:"Select Rack"}),e.jsx(fe,{label:"Box Name / Location (Optional)",value:M,onChange:ie=>se(ie.target.value),placeholder:"e.g., Shelf A, Box 2"})]}),e.jsx(re,{type:"submit",variant:"primary",loading:P,className:"w-full justify-center",children:"Add Stock Entry"})]})]}),e.jsx(Ie,{title:"Recent Entries",icon:"history",className:"h-fit",children:W.length>0?e.jsx("ul",{className:"space-y-4",children:W.map((ie,ce)=>e.jsxs("li",{className:"flex justify-between items-start p-3 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 animate-fadeIn",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:ie.medicine}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded bg-white border border-slate-200 text-slate-600",children:["Batch: ",ie.batch]}),ie.rack&&ie.rack!=="-"&&e.jsxs(Ve,{variant:"info",className:"!py-0.5",children:[" ",ie.rack]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["+ ",ie.quantity]}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:ie.timestamp})]})]},ce))}):e.jsxs("div",{className:"text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-900/30 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"post_add"}),e.jsx("p",{children:"No recent entries"}),e.jsx("p",{className:"text-sm opacity-75",children:"Added stock will appear here"})]})})]})})}function $i({masterKey:n,value:r,onChange:o,placeholder:i="Select...",required:u=!1,disabled:x=!1,valueField:h="id",labelField:N="name",allowAdd:y=!1,onAdd:g,entityType:p,className:f="",style:w}){const{getMaster:_,getStatusesByEntity:k,isLoading:S}=mt();let b=[];n==="statuses"&&p?b=k(p):b=_(n);const A=M=>{const se=M.target.value;if(se==="__ADD_NEW__"&&g){g();return}o(se)},T=M=>h==="code"&&M.code!==void 0?M.code:M.id,q=M=>n==="hsn_codes"?`${M.hsn_code} - ${M.description?.substring(0,30)||""}`:n==="gst_slabs"?`${M.rate}%${M.description?` - ${M.description}`:""}`:n==="units"&&M.short_name?`${M.name} (${M.short_name})`:n==="payment_methods"&&M.icon?`${M.icon} ${M.name}`:M[N]||M.name||M.code||String(M.id),D=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${x||S?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:r,onChange:A,required:u,disabled:x||S,className:f||D,style:w,children:[e.jsx("option",{value:"",children:S?"Loading...":i}),b.map(M=>e.jsx("option",{value:T(M),children:q(M)},M.id)),y&&e.jsx("option",{value:"__ADD_NEW__",children:"+ Add New..."})]})}function Fd({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x,allowAdd:h,onAdd:N}){const{getMaster:y,isLoading:g}=mt(),p=y("categories"),f=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||g?"opacity-60 cursor-not-allowed":""}`,w=!g&&p.length===0;return e.jsxs("select",{value:n,onChange:_=>{const k=_.target.value;if(k==="__ADD_NEW__"&&N){N();return}r(k)},required:o,disabled:i||g||w,className:u||f,title:w?"No categories available. Please ask your Super Admin to add categories in Master Data Management  Medicine Categories":void 0,children:[e.jsx("option",{value:"",children:g?"Loading...":w?" No categories found - Contact Super Admin":x||"Select Category"}),p.map(_=>e.jsx("option",{value:_.name,children:_.name},_.id)),h&&e.jsx("option",{value:"__ADD_NEW__",children:"+ Add New..."})]})}function _p({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=mt(),y=h("medicine_types"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`,p=!N&&y.length===0;return e.jsxs("select",{value:n,onChange:f=>r(f.target.value),required:o,disabled:i||N||p,className:u||g,title:p?"No medicine types available. Please ask your Super Admin to add medicine types in Master Data Management  Medicine Types":void 0,children:[e.jsx("option",{value:"",children:N?"Loading...":p?" No medicine types found - Contact Super Admin":x||"Select Medicine Type"}),y.map(f=>e.jsx("option",{value:f.code,children:f.name},f.id))]})}function Cp({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=mt(),y=h("units"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`,p=!N&&y.length===0;return e.jsxs("select",{value:n,onChange:f=>r(f.target.value),required:o,disabled:i||N||p,className:u||g,title:p?"No units available. Please ask your Super Admin to add units in Master Data Management  Units":void 0,children:[e.jsx("option",{value:"",children:N?"Loading...":p?" No units found - Contact Super Admin":x||"Select Unit"}),y.map(f=>e.jsxs("option",{value:f.name,children:[f.name," (",f.short_name,")"]},f.id))]})}function Ep({value:n,onChange:r,required:o,disabled:i,className:u}){const{getMaster:x,isLoading:h}=mt(),N=x("gst_slabs"),y=!h&&N.length===0;return e.jsxs("select",{value:n,onChange:g=>r(Number(g.target.value)),required:o,disabled:i||h||y,className:u||"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",title:y?"No GST slabs available. Please ask your Super Admin to add GST slabs in Master Data Management  Tax & Finance Masters  GST/VAT":void 0,children:[y&&e.jsx("option",{value:"",children:" No GST slabs found - Contact Super Admin"}),N.map(g=>e.jsxs("option",{value:g.rate,children:[g.rate,"%",g.description?` - ${g.description}`:""]},g.id))]})}function Lj({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=mt(),y=h("hsn_codes"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`,p=!N&&y.length===0,f=w=>{const _=w.target.value,k=y.find(S=>S.hsn_code===_);r(_,k?.gst_rate)};return e.jsxs("select",{value:n,onChange:f,required:o,disabled:i||N||p,className:u||g,title:p?"No HSN codes available. Please ask your Super Admin to add HSN codes in Master Data  HSN Codes":void 0,children:[e.jsx("option",{value:"",children:N?"Loading...":p?" No HSN codes found - Contact Super Admin":x||"Select HSN Code"}),y.map(w=>e.jsxs("option",{value:w.hsn_code,children:[w.hsn_code," - ",w.description?.substring(0,40)||"No description"," (",w.gst_rate,"%)"]},w.id))]})}function Uj({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){return e.jsx($i,{masterKey:"customer_types",value:n,onChange:r,placeholder:x||"Select Customer Type",valueField:"code",required:o,disabled:i,className:u})}function Ap({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){const h=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}];return e.jsxs("select",{value:n,onChange:N=>r(N.target.value),required:o,disabled:i,className:u||"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:x||"Select Gender"}),h.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]})}function qj({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){const h=[{value:"full_time",label:"Full Time"},{value:"part_time",label:"Part Time"},{value:"contract",label:"Contract"},{value:"intern",label:"Intern"}];return e.jsxs("select",{value:n,onChange:N=>r(N.target.value),required:o,disabled:i,className:u||"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:x||"Select Employment Type"}),h.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]})}function Bj({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){return e.jsx($i,{masterKey:"urgency_levels",value:n,onChange:r,placeholder:x||"Select Urgency",valueField:"code",required:o,disabled:i,className:u})}function $d({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){return e.jsx($i,{masterKey:"warehouses",value:n,onChange:r,placeholder:x||"Select Warehouse",required:o,disabled:i,className:u})}function Yd({value:n,onChange:r,required:o,disabled:i,className:u,warehouseId:x}){const{getMaster:h,isLoading:N}=mt();let y=h("shops");return x&&(y=y.filter(g=>g.warehouse_id===x)),e.jsxs("select",{value:n,onChange:g=>r(g.target.value),required:o,disabled:i||N||y.length===0,className:u||"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"",children:N?"Loading...":y.length===0?" No shops found":"Select Shop"}),y.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (",g.code,")"]},g.id))]})}function Hj({value:n,onChange:r,entityType:o,required:i,disabled:u,className:x,placeholder:h}){return e.jsx($i,{masterKey:"statuses",value:n,onChange:r,placeholder:h||"Select Status",valueField:"code",entityType:o,required:i,disabled:u,className:x})}function Tp({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=mt(),y=h("brands"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:n,onChange:p=>r(p.target.value),required:o,disabled:i||N,className:u||g,children:[e.jsx("option",{value:"",children:N?"Loading...":x||"Select Brand"}),y.map(p=>e.jsx("option",{value:p.name,children:p.name},p.id))]})}function Dp({value:n,onChange:r,required:o,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=mt(),y=h("manufacturers"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:n,onChange:p=>r(p.target.value),required:o,disabled:i||N,className:u||g,children:[e.jsx("option",{value:"",children:N?"Loading...":x||"Select Manufacturer"}),y.map(p=>e.jsx("option",{value:p.name,children:p.name},p.id))]})}function Gj(){const n=Fe(),{user:r}=We(),{isLoading:o}=mt(),u=(r?.role||"user")==="super_admin",[x,h]=m.useState([]),[N,y]=m.useState(!0),[g,p]=m.useState(""),[f,w]=m.useState("all"),[_,k]=m.useState(1),[S,b]=m.useState(0),[A,T]=m.useState(10),[q,D]=m.useState({total:0,active:0,retail:0,hospital:0});m.useEffect(()=>{se()},[_,A,g,f]),m.useEffect(()=>{M()},[]);const M=async()=>{try{const te=await vt.getStats();D(te.data)}catch(te){console.error("Failed to fetch stats:",te)}},se=async()=>{try{y(!0);const te={page:_,size:A};g&&(te.search=g),f!=="all"&&f&&(te.status=f);const me=await vt.list(te);h(me.data.items||[]),b(me.data.total||0)}catch(te){console.error("Failed to fetch shops:",te),h([])}finally{y(!1)}},[Q,O]=m.useState(!1),[P,H]=m.useState(null),Z=te=>{H(te),O(!0)},U=async()=>{if(P)try{await vt.delete(P.id),window.toast?.success("Shop deleted successfully"),se(),M()}catch(te){console.error("Failed to delete shop:",te),window.toast?.error(te.response?.data?.detail||"Failed to delete shop")}finally{O(!1),H(null)}},W=[{header:"Shop",key:"name",render:te=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shadow-sm",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:te.name}),e.jsx("div",{className:"text-xs text-slate-500",children:te.phone})]})]})},{header:"Code",key:"code",render:te=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:te.code})},{header:"Type",key:"shop_type",render:te=>e.jsx(Ve,{variant:"secondary",className:"capitalize",children:te.shop_type}),className:"hidden md:table-cell"},{header:"Location",key:"city",render:te=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:te.city}),e.jsx("span",{className:"text-xs text-slate-500",children:te.state})]}),className:"hidden sm:table-cell"},{header:"Warehouse",key:"warehouse_name",render:te=>te.warehouse_name?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"warehouse"}),e.jsx("span",{children:te.warehouse_name})]}):e.jsxs("span",{className:"text-xs text-slate-400 italic flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link_off"}),"Unassigned"]}),className:"hidden lg:table-cell"},{header:"Status",key:"status",render:te=>e.jsx(Ve,{variant:te.status==="active"?"success":te.status==="suspended"?"error":"secondary",children:te.status}),align:"center"},{header:"Actions",key:"id",render:te=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(re,{variant:"ghost",onClick:()=>n(`/shops/${te.id}/edit`),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Shop",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),u&&e.jsx(re,{variant:"ghost",onClick:()=>Z(te),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",title:"Delete Shop",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(ge,{loading:o,children:[e.jsx(ge.Header,{title:"Medical Shops",subtitle:`Manage ${S} retail pharmacy locations`,actions:e.jsxs(re,{variant:"primary",onClick:()=>n("/shops/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add_business"}),"Add Shop"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Shops",value:q.total,icon:"storefront",onClick:()=>w("all"),isActive:f==="all"}),e.jsx(je,{title:"Active",value:q.active,icon:"check_circle",trend:"up",change:"+2 this month"}),e.jsx(je,{title:"Retail",value:q.retail,icon:"shopping_bag",trend:"neutral"}),e.jsx(je,{title:"Hospital",value:q.hospital,icon:"local_hospital",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:W,data:x,loading:N,emptyMessage:"No medical shops found in the system.",pagination:{currentPage:_,totalPages:Math.ceil(S/A),onPageChange:k,totalItems:S,pageSize:A,onPageSizeChange:te=>{T(te),k(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Shop List",count:S,searchProps:{value:g,onChange:te=>{p(te),k(1)},placeholder:"Search shops..."},actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Hj,{entityType:"shop",value:f,onChange:te=>{w(te),k(1)},placeholder:"All Status",className:"!w-40 !py-1.5 !text-sm !rounded-lg"})}),embedded:!0})}),e.jsx(It,{isOpen:Q,onClose:()=>O(!1),onConfirm:U,title:"Delete Shop",message:`Are you sure you want to delete "${P?.name}"? This action cannot be undone.`,confirmText:"Delete Shop"})]})}function Fj(){const n=Fe(),{user:r}=We(),i=(r?.role||"user")==="super_admin",[u,x]=m.useState([]),[h,N]=m.useState(!0),[y,g]=m.useState(""),[p,f]=m.useState(""),[w,_]=m.useState(1),[k,S]=m.useState(0),[b,A]=m.useState(10);m.useEffect(()=>{T()},[w,b,y,p]);const T=async()=>{try{N(!0);const Z={page:w,size:b};y&&(Z.search=y),p&&(Z.category=p);const U=await wt.list(Z);x(U.data.items||[]),S(U.data.total||0)}catch(Z){console.error("Failed to fetch medicines:",Z),x([])}finally{N(!1)}},[q,D]=m.useState(!1),[M,se]=m.useState(null),Q=Z=>{se(Z),D(!0)},O=async()=>{if(M)try{await wt.delete(M.id),window.toast?.success("Medicine deleted successfully"),T()}catch(Z){console.error("Failed to delete medicine:",Z),window.toast?.error(Z.response?.data?.detail||"Failed to delete medicine")}finally{D(!1),se(null)}},P={total:k,active:u.filter(Z=>Z.is_active).length,lowStock:u.filter(Z=>Z.total_stock<50).length,categories:new Set(u.map(Z=>Z.category).filter(Boolean)).size||0},H=[{header:"Medicine",key:"name",render:Z=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"medication"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:Z.name}),e.jsx("div",{className:"text-xs text-slate-500",children:Z.generic_name})]})]})},{header:"Mfg",key:"manufacturer",className:"hidden md:table-cell",render:Z=>e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-sm",children:Z.manufacturer})},{header:"Purchase",key:"purchase_price",align:"right",className:"hidden lg:table-cell",render:Z=>e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:["",Z.purchase_price?.toFixed(2)]})},{header:"MRP",key:"mrp",align:"right",className:"hidden sm:table-cell",render:Z=>e.jsxs("span",{className:"text-slate-500 dark:text-slate-400 line-through text-xs mr-2",children:["",Z.mrp.toFixed(2)]})},{header:"Sale Value",key:"selling_price",align:"right",render:Z=>e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:["",(Z.selling_price||Z.mrp).toFixed(2)]})},{header:"GST",key:"gst_rate",align:"center",className:"hidden xl:table-cell",render:Z=>e.jsxs(Ve,{variant:"secondary",children:[Z.gst_rate,"%"]})},{header:"Stock",key:"total_stock",align:"right",render:Z=>e.jsx("span",{className:`font-medium ${Z.total_stock<50?"text-red-600 dark:text-red-400":"text-slate-600 dark:text-slate-400"}`,children:Z.total_stock.toLocaleString()})},{header:"Status",key:"is_active",align:"center",className:"hidden sm:table-cell",render:Z=>e.jsx(Ve,{variant:Z.is_active?"success":"secondary",children:Z.is_active?"Active":"Inactive"})},{header:"Actions",key:"id",align:"right",render:Z=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(re,{variant:"ghost",onClick:()=>n(`/medicines/${Z.id}/edit`),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Medicine",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),i&&e.jsx(re,{variant:"ghost",onClick:()=>Q(Z),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",title:"Delete Medicine",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Medicines",subtitle:"Manage your medicine catalog",actions:e.jsxs(re,{variant:"primary",onClick:()=>n("/medicines/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Medicine"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Medicines",value:P.total,icon:"medication",onClick:()=>f(""),isActive:p===""}),e.jsx(je,{title:"Active",value:P.active,icon:"check_circle",trend:"neutral"}),e.jsx(je,{title:"Low Stock",value:P.lowStock,icon:"warning",trend:"down",changeType:"down"}),e.jsx(je,{title:"Categories",value:P.categories,icon:"category",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:H,data:u,loading:h,emptyMessage:"No medicines found. Add items to your catalog.",pagination:{currentPage:w,totalPages:Math.ceil(k/b),onPageChange:_,totalItems:k,pageSize:b,onPageSizeChange:Z=>{A(Z),_(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Medicine List",count:k,searchProps:{value:y,onChange:Z=>{g(Z),_(1)},placeholder:"Search medicines..."},actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Fd,{value:p,onChange:Z=>{f(Z),_(1)},className:"!w-48 !py-1.5 !text-sm !rounded-lg"})}),embedded:!0})}),e.jsx(It,{isOpen:q,onClose:()=>D(!1),onConfirm:O,title:"Delete Medicine",message:`Are you sure you want to delete "${M?.name}"? This action cannot be undone.`,confirmText:"Delete Medicine"})]})}function $j(){const{id:n}=Wn(),r=Fe(),[o,i]=m.useState(!0),[u,x]=m.useState(null),[h,N]=m.useState([]);m.useEffect(()=>{n&&y()},[n]);const y=async()=>{try{i(!0);const[f,w]=await Promise.all([wt.get(n),wt.getBatches(n)]);x(f.data),N(w.data?.batches||[])}catch(f){console.error("Failed to fetch medicine:",f)}finally{i(!1)}};if(o)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})});if(!u)return e.jsx(Zt,{title:"Medicine Not Found",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-300",children:"medication_off"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"The requested medicine could not be found."}),e.jsx(re,{variant:"primary",className:"mt-4",onClick:()=>r("/medicines"),children:"Back to Medicines"})]})});const g=Math.round((1-u.purchase_price/u.mrp)*100),p=h.reduce((f,w)=>f+w.quantity,0);return e.jsx(Zt,{title:u.name,description:`${u.generic_name}  ${u.manufacturer}`,actions:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(re,{variant:"secondary",onClick:()=>r(`/medicines/${u.id}/edit`),children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"edit"}),"Edit"]}),e.jsxs(re,{variant:"primary",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"add"}),"Add Stock"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(Ie,{title:"Basic Information",icon:"medication",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsx(Bl,{label:"Brand",value:u.brand||"-"}),e.jsx(Bl,{label:"Category",value:u.category}),e.jsx(Bl,{label:"Type",value:u.medicine_type}),e.jsx(Bl,{label:"Strength",value:u.strength||"-"}),e.jsx(Bl,{label:"Pack Size",value:`${u.pack_size} ${u.unit}`}),e.jsx(Bl,{label:"HSN Code",value:u.hsn_code||"-"})]}),u.composition&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Composition"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.composition})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[u.is_prescription_required&&e.jsxs(Ve,{variant:"error",className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"prescription"}),"Rx Required"]}),u.is_controlled&&e.jsxs(Ve,{variant:"warning",className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),"Controlled"]})]})]}),e.jsxs(Ie,{title:"Batch Information",icon:"inventory_2",padding:"0",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:["Total Batches: ",h.length]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-xs uppercase text-slate-500 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Batch No."}),e.jsx("th",{className:"px-6 py-3",children:"Mfg Date"}),e.jsx("th",{className:"px-6 py-3",children:"Exp Date"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Qty"}),e.jsx("th",{className:"px-6 py-3 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-500",children:"No batch information available"})}):h.map(f=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-xs font-medium text-primary",children:f.batch_number}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:f.manufacturing_date}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:f.expiry_date}),e.jsx("td",{className:"px-6 py-4 text-right font-medium text-slate-900 dark:text-white",children:f.quantity}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(Ve,{variant:f.is_expired?"error":f.days_to_expiry<60?"warning":"success",children:f.is_expired?"Expired":f.days_to_expiry<60?"Expiring Soon":"Active"})})]},f.id))})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ie,{title:"Pricing",icon:"payments",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"MRP"}),e.jsxs("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["",u.mrp.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Purchase Price"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["",u.purchase_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Profit Margin"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:[g,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"GST Rate"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:[u.gst_rate,"%"]})]})]})}),e.jsxs(Ie,{title:"Stock Summary",icon:"inventory",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:p}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Units in Stock"})]}),u.storage_conditions&&e.jsx("div",{className:"mt-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-600 dark:text-amber-400 text-[20px]",children:"thermostat"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-amber-800 dark:text-amber-300 mb-0.5",children:"Storage Conditions"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:u.storage_conditions})]})]})})]}),e.jsx(Ie,{title:"Location",icon:"location_on",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Rack Name"}),e.jsx("p",{className:"font-medium",children:u.rack_name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Rack Number"}),e.jsx("p",{className:"font-medium",children:u.rack_number||"-"})]})]})})]})]})})}function Bl({label:n,value:r}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:n}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",title:r,children:r||"-"})]})}function Yj(){const n=Fe(),{isLoading:r,refresh:o}=mt();m.useEffect(()=>{o()},[o]);const[i,u]=m.useState({name:"",generic_name:"",brand:"",manufacturer:"",medicine_type:"tablet",category:"",composition:"",strength:"",unit:"Strip",pack_size:10,hsn_code:"",gst_rate:12,mrp:0,purchase_price:0,selling_price:0,is_prescription_required:!1,is_controlled:!1,storage_conditions:""}),[x,h]=m.useState(!1),[N,y]=m.useState(""),g=async p=>{if(p.preventDefault(),y(""),!i.name||!i.category||i.mrp<=0){y("Please fill in all required fields (Name, Category, MRP)");return}h(!0);try{await wt.create(i),n("/medicines")}catch(f){console.error("Failed to create medicine:",f);const w=f.response?.data?.detail;if(Array.isArray(w)){const _=w.map(k=>`${k.loc?.slice(1).join(".")||"Unknown field"}: ${k.msg}`);y(_.join(", "))}else typeof w=="string"?y(w):typeof w=="object"&&w?.msg?y(w.msg):y("Failed to create medicine")}finally{h(!1)}};return e.jsx(Zt,{title:"Add New Medicine",description:"Create a new medicine in your catalog",loading:r,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:g,children:e.jsxs(Ie,{className:"space-y-6",children:[N&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:N}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Medicine Name *",value:i.name,onChange:p=>u({...i,name:p.target.value}),placeholder:"Paracetamol 500mg",required:!0}),e.jsx(fe,{label:"Generic Name",value:i.generic_name,onChange:p=>u({...i,generic_name:p.target.value}),placeholder:"Paracetamol"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Brand"}),e.jsx(Tp,{value:i.brand,onChange:p=>u({...i,brand:p}),disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Manufacturer"}),e.jsx(Dp,{value:i.manufacturer,onChange:p=>u({...i,manufacturer:p}),disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx(Fd,{value:i.category,onChange:p=>u({...i,category:p}),required:!0,disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Medicine Type"}),e.jsx(_p,{value:i.medicine_type,onChange:p=>u({...i,medicine_type:p}),disabled:r})]}),e.jsx(fe,{label:"Strength",value:i.strength,onChange:p=>u({...i,strength:p.target.value}),placeholder:"500mg"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Packaging"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit"}),e.jsx(Cp,{value:i.unit,onChange:p=>u({...i,unit:p}),disabled:r})]}),e.jsx(fe,{label:"Pack Size",type:"number",value:i.pack_size,onChange:p=>u({...i,pack_size:parseInt(p.target.value)||1}),min:"1"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"HSN Code"}),e.jsx(Lj,{value:i.hsn_code,onChange:(p,f)=>{u(w=>({...w,hsn_code:p,...f!==void 0?{gst_rate:f}:{}}))},disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(fe,{label:"MRP () *",type:"number",step:"0.01",value:i.mrp,onChange:p=>u({...i,mrp:parseFloat(p.target.value)||0}),min:"0",required:!0}),e.jsx(fe,{label:"Purchase Price ()",type:"number",step:"0.01",value:i.purchase_price,onChange:p=>u({...i,purchase_price:parseFloat(p.target.value)||0}),min:"0"}),e.jsx(fe,{label:"Sale Value ()",type:"number",step:"0.01",value:i.selling_price,onChange:p=>u({...i,selling_price:parseFloat(p.target.value)||0}),min:"0"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Rate (%)"}),e.jsx(Ep,{value:i.gst_rate,onChange:p=>u({...i,gst_rate:p}),disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Composition"}),e.jsx("textarea",{value:i.composition,onChange:p=>u({...i,composition:p.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2,placeholder:"Active ingredients..."})]}),e.jsx(fe,{label:"Storage Conditions",value:i.storage_conditions,onChange:p=>u({...i,storage_conditions:p.target.value}),placeholder:"Store below 25C"}),e.jsxs("div",{className:"flex gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_prescription_required,onChange:p=>u({...i,is_prescription_required:p.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Prescription Required"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_controlled,onChange:p=>u({...i,is_controlled:p.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Controlled Substance"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(re,{variant:"secondary",onClick:()=>n("/medicines"),type:"button",children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:x,children:x?"Creating...":"Create Medicine"})]})]})})})})}function Pj(){const n=Fe(),{id:r}=Wn(),{isLoading:o}=mt(),[i,u]=m.useState({name:"",generic_name:"",brand:"",manufacturer:"",medicine_type:"tablet",category:"",composition:"",strength:"",unit:"Strip",pack_size:10,hsn_code:"",gst_rate:12,mrp:0,purchase_price:0,selling_price:0,is_prescription_required:!1,is_controlled:!1,storage_conditions:"",rack_number:"",rack_name:""}),[x,h]=m.useState(!0),[N,y]=m.useState(!1),[g,p]=m.useState("");m.useEffect(()=>{r&&f(r)},[r]);const f=async _=>{try{h(!0);const S=(await wt.get(_)).data;u({name:S.name||"",generic_name:S.generic_name||"",brand:S.brand||"",manufacturer:S.manufacturer||"",medicine_type:S.medicine_type||"tablet",category:S.category||"",composition:S.composition||"",strength:S.strength||"",unit:S.unit||"Strip",pack_size:S.pack_size||10,hsn_code:S.hsn_code||"",gst_rate:S.gst_rate||12,mrp:S.mrp||0,purchase_price:S.purchase_price||0,selling_price:S.selling_price||0,is_prescription_required:S.is_prescription_required||!1,is_controlled:S.is_controlled||!1,storage_conditions:S.storage_conditions||"",rack_number:S.rack_number||"",rack_name:S.rack_name||""})}catch(k){console.error("Failed to fetch medicine:",k),p("Failed to load medicine details")}finally{h(!1)}},w=async _=>{if(_.preventDefault(),p(""),!i.name||!i.category||i.mrp<=0){p("Please fill in all required fields (Name, Category, MRP)");return}y(!0);try{r&&(await wt.update(r,i),n("/medicines"))}catch(k){console.error("Failed to update medicine:",k),p(k.response?.data?.detail||"Failed to update medicine")}finally{y(!1)}};return e.jsx(Zt,{title:"Edit Medicine",description:`Update information for ${i.name}`,loading:x||o,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:w,children:e.jsxs(Ie,{className:"space-y-6",children:[g&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:g}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Medicine Name *",value:i.name,onChange:_=>u({...i,name:_.target.value}),required:!0}),e.jsx(fe,{label:"Generic Name",value:i.generic_name,onChange:_=>u({...i,generic_name:_.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Brand"}),e.jsx(Tp,{value:i.brand,onChange:_=>u({...i,brand:_}),disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Manufacturer"}),e.jsx(Dp,{value:i.manufacturer,onChange:_=>u({...i,manufacturer:_}),disabled:o})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx(Fd,{value:i.category,onChange:_=>u({...i,category:_}),required:!0,disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Medicine Type"}),e.jsx(_p,{value:i.medicine_type,onChange:_=>u({...i,medicine_type:_}),disabled:o})]}),e.jsx(fe,{label:"Strength",value:i.strength,onChange:_=>u({...i,strength:_.target.value})})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Packaging"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit"}),e.jsx(Cp,{value:i.unit,onChange:_=>u({...i,unit:_}),disabled:o})]}),e.jsx(fe,{label:"Pack Size",type:"number",value:i.pack_size,onChange:_=>u({...i,pack_size:parseInt(_.target.value)||1}),min:"1"}),e.jsx(fe,{label:"HSN Code",value:i.hsn_code,onChange:_=>u({...i,hsn_code:_.target.value}),className:"font-mono"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(fe,{label:"MRP () *",type:"number",step:"0.01",value:i.mrp,onChange:_=>u({...i,mrp:parseFloat(_.target.value)||0}),min:"0",required:!0}),e.jsx(fe,{label:"Purchase Price ()",type:"number",step:"0.01",value:i.purchase_price,onChange:_=>u({...i,purchase_price:parseFloat(_.target.value)||0}),min:"0"}),e.jsx(fe,{label:"Sale Value ()",type:"number",step:"0.01",value:i.selling_price,onChange:_=>u({...i,selling_price:parseFloat(_.target.value)||0}),min:"0"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Rate (%)"}),e.jsx(Ep,{value:i.gst_rate,onChange:_=>u({...i,gst_rate:_}),disabled:o})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Storage Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Rack Name",value:i.rack_name,onChange:_=>u({...i,rack_name:_.target.value})}),e.jsx(fe,{label:"Rack Number",value:i.rack_number,onChange:_=>u({...i,rack_number:_.target.value}),placeholder:"12"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Composition"}),e.jsx("textarea",{value:i.composition,onChange:_=>u({...i,composition:_.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2})]}),e.jsx(fe,{label:"Storage Conditions",value:i.storage_conditions,onChange:_=>u({...i,storage_conditions:_.target.value})}),e.jsxs("div",{className:"flex gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_prescription_required,onChange:_=>u({...i,is_prescription_required:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Prescription Required"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_controlled,onChange:_=>u({...i,is_controlled:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Controlled Substance"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(re,{variant:"secondary",onClick:()=>n("/medicines"),type:"button",children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:N,children:N?"Updating...":"Update Medicine"})]})]})})})})}function Qj(){const{id:n}=Wn(),r=Fe(),[o,i]=m.useState(!0),[u,x]=m.useState(!1),[h,N]=m.useState(""),[y,g]=m.useState([]),[p,f]=m.useState({name:"",code:"",shop_type:"retail",license_number:"",gst_number:"",phone:"",email:"",address:"",city:"",state:"",pincode:"",warehouse_id:"",status:"active"});m.useEffect(()=>{w(),n&&_()},[n]);const w=async()=>{try{const b=await At.list({status:"active",size:100});g(b.data.items||[])}catch(b){console.error("Failed to fetch warehouses:",b)}},_=async()=>{try{i(!0);const b=await vt.get(n);f(b.data)}catch(b){console.error("Failed to fetch shop:",b),N("Failed to load shop details")}finally{i(!1)}},k=async b=>{if(b.preventDefault(),N(""),!p.name||!p.city||!p.state||!p.license_number){N("Please fill in all required fields");return}try{x(!0),await vt.update(n,p),r("/shops")}catch(A){console.error("Failed to update shop:",A),N(A.response?.data?.detail||"Failed to update shop")}finally{x(!1)}},S=(b,A)=>{f(T=>({...T,[b]:A}))};return o?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):e.jsx(Zt,{title:"Edit Medical Shop",description:`Update information for ${p.name}`,children:e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[h&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:h}),e.jsx(Ie,{title:"Basic Information",icon:"storefront",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Shop Name *",value:p.name||"",onChange:b=>S("name",b.target.value),required:!0}),e.jsx(fe,{label:"Shop Code",value:p.code||"",onChange:b=>S("code",b.target.value),className:"font-mono",disabled:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Shop Type"}),e.jsxs("select",{value:p.shop_type||"retail",onChange:b=>S("shop_type",b.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"hospital",children:"Hospital"}),e.jsx("option",{value:"clinic",children:"Clinic"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Linked Warehouse"}),e.jsxs("select",{value:p.warehouse_id||"",onChange:b=>S("warehouse_id",b.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),y.map(b=>e.jsxs("option",{value:b.id,children:[b.name," (",b.code,")"]},b.id))]})]})]})}),e.jsx(Ie,{title:"License & Tax Information",icon:"verified",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Pharmacy License Number *",value:p.license_number||"",onChange:b=>S("license_number",b.target.value),required:!0}),e.jsx(fe,{label:"GST Number",value:p.gst_number||"",onChange:b=>S("gst_number",b.target.value.toUpperCase()),className:"font-mono"})]})}),e.jsx(Ie,{title:"Contact Information",icon:"contact_phone",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Phone Number",type:"tel",value:p.phone||"",onChange:b=>S("phone",b.target.value)}),e.jsx(fe,{label:"Email Address",type:"email",value:p.email||"",onChange:b=>S("email",b.target.value)}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{rows:2,value:p.address||"",onChange:b=>S("address",b.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"})]}),e.jsx(fe,{label:"City *",value:p.city||"",onChange:b=>S("city",b.target.value),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"State *",value:p.state||"",onChange:b=>S("state",b.target.value),required:!0}),e.jsx(fe,{label:"Pincode",value:p.pincode||"",onChange:b=>S("pincode",b.target.value)})]})]})}),e.jsxs("div",{className:"lg:hidden flex justify-end gap-3 pt-4",children:[e.jsx(re,{variant:"secondary",onClick:()=>r("/shops"),type:"button",children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:u,children:u?"Saving...":"Save Changes"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ie,{title:"Shop Status",icon:"toggle_on",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Status"}),e.jsxs("select",{value:p.status||"active",onChange:b=>S("status",b.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Current operational status of this shop"})]})})}),e.jsx(Ie,{title:"Quick Stats",icon:"analytics",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Medicines"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:p.total_medicines||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Stock Value"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:["",(p.total_stock_value||0).toLocaleString()]})]})]})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Ie,{children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(re,{variant:"primary",type:"submit",loading:u,className:"w-full justify-center",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"save"}),u?"Saving...":"Save Changes"]}),e.jsx(re,{variant:"secondary",onClick:()=>r("/shops"),type:"button",className:"w-full justify-center",children:"Cancel"})]})})})]})]})})})}function Vj(){const n=Fe(),{isLoading:r,refresh:o}=mt();m.useEffect(()=>{o()},[o]);const[i,u]=m.useState({name:"",code:"",shop_type:"retail",license_number:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",gst_number:"",warehouse_id:""}),[x,h]=m.useState(!1),[N,y]=m.useState(""),g=async p=>{if(p.preventDefault(),y(""),!i.name||!i.code||!i.city||!i.state||!i.license_number||!i.warehouse_id){y("Please fill in all required fields (Name, Code, License Number, Warehouse, City, State)");return}h(!0);try{const f={...i,email:i.email||void 0,gst_number:i.gst_number||void 0,warehouse_id:i.warehouse_id};await vt.create(f),n("/shops")}catch(f){console.error("Failed to create shop:",f),y(f.response?.data?.detail||"Failed to create medical shop")}finally{h(!1)}};return e.jsx(Zt,{title:"Add New Medical Shop",description:"Create a new retail pharmacy location",loading:r,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:g,children:e.jsxs(Ie,{className:"space-y-6",children:[N&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:N}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Shop Name *",value:i.name,onChange:p=>u({...i,name:p.target.value}),placeholder:"GreenCross Pharmacy",required:!0}),e.jsx(fe,{label:"Code *",value:i.code,onChange:p=>u({...i,code:p.target.value.toUpperCase()}),placeholder:"GCP001",className:"font-mono",required:!0})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"License & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Shop Type"}),e.jsxs("select",{value:i.shop_type,onChange:p=>u({...i,shop_type:p.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"retail",children:"Retail Pharmacy"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"hospital",children:"Hospital Pharmacy"}),e.jsx("option",{value:"clinic",children:"Clinic Pharmacy"})]})]}),e.jsx(fe,{label:"License Number *",value:i.license_number,onChange:p=>u({...i,license_number:p.target.value}),placeholder:"PH-2024-001234",required:!0})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-5 border border-amber-200 dark:border-amber-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"warehouse"}),"Warehouse Mapping *"]}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400 mb-4",children:"Every medical shop must be linked to a warehouse. This determines the stock source for this shop."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Warehouse *"}),e.jsx($d,{value:i.warehouse_id,onChange:p=>u({...i,warehouse_id:p}),required:!0,className:`w-full ${i.warehouse_id?"":"border-amber-300 dark:border-amber-600"}`}),!i.warehouse_id&&e.jsxs("p",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),"Warehouse selection is mandatory for supply chain integrity"]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:i.address,onChange:p=>u({...i,address:p.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2,placeholder:"45 Main Street, Medical Complex"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(fe,{label:"City *",value:i.city,onChange:p=>u({...i,city:p.target.value}),placeholder:"Chennai",required:!0}),e.jsx(fe,{label:"State *",value:i.state,onChange:p=>u({...i,state:p.target.value}),placeholder:"Tamil Nadu",required:!0}),e.jsx(fe,{label:"Pincode",value:i.pincode,onChange:p=>u({...i,pincode:p.target.value}),placeholder:"600001"})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact & Tax Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Phone",type:"tel",value:i.phone,onChange:p=>u({...i,phone:p.target.value}),placeholder:"+91 9876543210"}),e.jsx(fe,{label:"Email",type:"email",value:i.email,onChange:p=>u({...i,email:p.target.value}),placeholder:"shop@example.com"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(fe,{label:"GST Number",value:i.gst_number,onChange:p=>u({...i,gst_number:p.target.value.toUpperCase()}),className:"font-mono",placeholder:"22AAAAA0000A1Z5"})})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(re,{variant:"secondary",onClick:()=>n("/shops"),type:"button",children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:x,children:x?"Creating...":"Create Shop"})]})]})})})})}function _0(){const[n,r]=m.useState(!0),[o,i]=m.useState(!1),[u,x]=m.useState("en-US"),[h,N]=m.useState("UTC-05:00"),[y,g]=m.useState("MM/DD/YYYY"),[p,f]=m.useState(30),[w,_]=m.useState(7.25),[k,S]=m.useState(!1),[b,A]=m.useState(!0),[T,q]=m.useState(!1),[D,M]=m.useState("helpdesk@pharmacore.io"),[se,Q]=m.useState("https://wiki.internal.pharma/support");m.useEffect(()=>{O()},[]);const O=async()=>{try{r(!0);const Z=(await zi.get()).data?.settings;Z&&(f(Z.session_timeout_minutes||30),_(Z.default_tax_rate||7.25),S(Z.maintenance_mode||!1),A(Z.global_inventory_search??!0),q(Z.auto_approve_low_risk||!1),M(Z.support_email||"helpdesk@pharmacore.io"),Q(Z.support_url||""))}catch(H){console.error("Failed to fetch settings:",H)}finally{r(!1)}},P=async()=>{try{i(!0),await zi.update({session_timeout_minutes:p,default_tax_rate:w,maintenance_mode:k,global_inventory_search:b,auto_approve_low_risk:T,support_email:D,support_url:se}),alert("Settings saved successfully!")}catch(H){console.error("Failed to save settings:",H),alert("Failed to save settings")}finally{i(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"max-w-5xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight mb-2",children:"Application Settings"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-2xl",children:"Configure global parameters, localization preferences, and system-wide defaults for your pharmacy network."})]}),e.jsxs("button",{onClick:P,disabled:o,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white px-5 py-2.5 rounded-lg font-semibold shadow-lg shadow-primary/20 transition-all active:scale-95 shrink-0 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:o?"sync":"save"}),o?"Saving...":"Save Changes"]})]}),e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-800 mb-8 overflow-x-auto",children:e.jsxs("nav",{className:"flex gap-8 min-w-max",children:[e.jsx("button",{className:"pb-3 border-b-2 border-primary text-primary font-semibold text-sm px-1 transition-colors",children:"General"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Localization"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Security"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Notifications"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"language"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Regional Settings"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Default System Language"}),e.jsxs("select",{value:u,onChange:H=>x(H.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"en-US",children:"English (United States)"}),e.jsx("option",{value:"es",children:"Spanish (Espaol)"}),e.jsx("option",{value:"fr",children:"French (Franais)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Timezone"}),e.jsxs("select",{value:h,onChange:H=>N(H.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"UTC-05:00",children:"UTC-05:00 (EST)"}),e.jsx("option",{value:"UTC-08:00",children:"UTC-08:00 (PST)"}),e.jsx("option",{value:"UTC+00:00",children:"UTC+00:00 (GMT)"}),e.jsx("option",{value:"UTC+05:30",children:"UTC+05:30 (IST)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Date Format"}),e.jsxs("select",{value:y,onChange:H=>g(H.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Currency Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 font-semibold",children:""}),e.jsx("input",{type:"text",value:"INR",readOnly:!0,className:"w-full pl-8 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded",children:"Locked"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Currency is locked to the organization's primary billing region."})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-purple-50 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"tune"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Operational Defaults"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",value:p,onChange:H=>f(parseInt(H.target.value)),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Auto-logout inactive users for security compliance."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Default Tax Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",value:w,onChange:H=>_(parseFloat(H.target.value)),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Pharmacy ID Prefix"}),e.jsx("input",{type:"text",defaultValue:"PHARM-",className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white uppercase"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Fiscal Year Start"}),e.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{children:"January 1st"}),e.jsx("option",{selected:!0,children:"April 1st"}),e.jsx("option",{children:"October 1st"})]})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-amber-50 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"flag"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Feature Flags"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(gd,{id:"maintenance_mode",title:"Maintenance Mode",description:"Disables access for all non-admin users immediately.",checked:k,onChange:S}),e.jsx(gd,{id:"global_search",title:"Global Inventory Search",description:"Allow pharmacists to search stock across all connected locations.",checked:b,onChange:A}),e.jsx(gd,{id:"auto_approve",title:"Auto-Approve Low Risk Orders",description:"System automatically approves refills for Class C drugs.",checked:T,onChange:q})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-green-50 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"support_agent"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Support Configuration"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Support Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"mail"}),e.jsx("input",{type:"email",value:D,onChange:H=>M(H.target.value),className:"w-full pl-10 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Internal Help Desk URL"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"link"}),e.jsx("input",{type:"url",value:se,onChange:H=>Q(H.target.value),className:"w-full pl-10 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800/50 rounded-lg p-4 flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400 shrink-0",children:"info"}),e.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"These contact details will be displayed in the footer of all employee dashboards and on the login screen."})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-slate-200 dark:border-slate-800 text-center",children:e.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500",children:"System Version v2.4.0  Connected to Neon PostgreSQL"})})]})}function gd({title:n,description:r,checked:o,onChange:i}){return e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 dark:border-slate-800 pt-4 first:border-t-0 first:pt-0",children:[e.jsxs("div",{className:"pr-4",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900 dark:text-white",children:n}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:r})]}),e.jsx("button",{type:"button",role:"switch","aria-checked":o,onClick:()=>i(!o),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o?"translate-x-6":"translate-x-1"}`})})]})}function bd(){const[n,r]=m.useState(!0),[o,i]=m.useState(!1),[u,x]=m.useState("PharmaAdmin Central"),[h,N]=m.useState(!1),[y,g]=m.useState(!0),[p,f]=m.useState("high"),[w,_]=m.useState(30),[k,S]=m.useState(15),[b,A]=m.useState(60);m.useEffect(()=>{T()},[]);const T=async()=>{try{r(!0);const M=(await zi.get()).data?.settings;M&&(x(M.app_name||"PharmaAdmin Central"),N(M.maintenance_mode||!1),_(M.session_timeout_minutes||30),S(M.low_stock_threshold||15),A(M.expiry_warning_days||60))}catch(D){console.error("Failed to fetch settings:",D)}finally{r(!1)}},q=async()=>{try{i(!0),await zi.update({app_name:u,maintenance_mode:h,session_timeout_minutes:w,low_stock_threshold:k,expiry_warning_days:b}),alert("Settings saved successfully!")}catch(D){console.error("Failed to save settings:",D),alert("Failed to save settings")}finally{i(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-1 overflow-y-auto bg-background-light dark:bg-background-dark scroll-smooth",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6 md:p-10 pb-24",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 dark:text-white tracking-tight mb-2",children:"System Settings"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base max-w-2xl",children:"Configure global parameters, security protocols, and integration rules for the entire Pharmacy Management Platform."})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg text-sm font-bold text-slate-900 dark:text-white transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"history"}),"View Change Logs"]})]}),e.jsx("div",{className:"sticky top-0 z-10 bg-background-light dark:bg-background-dark pt-2 pb-4 mb-6",children:e.jsxs("div",{className:"flex overflow-x-auto border-b border-slate-300 dark:border-slate-700 gap-8",children:[e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-primary text-primary font-bold text-sm",children:"General Preferences"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Security Policies"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Inventory Rules"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Integrations & API"})]})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"tune"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"General Preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Platform Name"}),e.jsx("input",{type:"text",value:u,onChange:D=>x(D.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-500",children:"This name will appear in emails and dashboard headers."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Default Timezone"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{children:"(GMT+05:30) India Standard Time"}),e.jsx("option",{children:"(GMT-05:00) Eastern Time (US & Canada)"}),e.jsx("option",{children:"(GMT+00:00) London"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Date Format"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{children:"DD/MM/YYYY (e.g. 31/12/2024)"}),e.jsx("option",{children:"MM/DD/YYYY (e.g. 12/31/2024)"}),e.jsx("option",{children:"YYYY-MM-DD (e.g. 2024-12-31)"})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 pt-2 border-t border-slate-200 dark:border-slate-800 mt-2",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Maintenance Mode"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Prevent non-admin users from accessing the system during updates."})]}),e.jsx("button",{onClick:()=>N(!h),className:`relative w-11 h-6 rounded-full transition-colors ${h?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white transition-transform ${h?"translate-x-5":""}`})})]})})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"shield"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Security Policies"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex flex-col max-w-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Two-Factor Authentication (2FA)"}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"RECOMMENDED"})]}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:"Enforce 2FA for all administrator and manager level accounts across the network."})]}),e.jsx("button",{onClick:()=>g(!y),className:`relative w-11 h-6 rounded-full transition-colors ${y?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white transition-transform ${y?"translate-x-5":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Password Complexity"}),e.jsxs("select",{value:p,onChange:D=>f(D.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"high",children:"High (Min 12 chars, symbol, number, upper/lowercase)"}),e.jsx("option",{value:"medium",children:"Medium (Min 8 chars, number, upper/lowercase)"}),e.jsx("option",{value:"low",children:"Low (Min 6 chars)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",value:w,onChange:D=>_(parseInt(D.target.value)),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary"})]})]})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"inventory_2"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Inventory Rules"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("label",{className:"flex items-center justify-between text-sm font-bold text-slate-900 dark:text-white mb-4",children:["Low Stock Threshold Alert",e.jsx("span",{className:"material-symbols-outlined text-slate-500 text-[18px] cursor-help",title:"Triggers an alert when stock falls below this percentage of max capacity",children:"info"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"50",value:k,onChange:D=>S(parseInt(D.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-primary"}),e.jsxs("span",{className:"min-w-[3rem] text-center font-mono font-bold text-primary bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded",children:[k,"%"]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:["Trigger automated re-order suggestions when stock reaches ",k,"% of maximum capacity."]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("label",{className:"flex items-center justify-between text-sm font-bold text-slate-900 dark:text-white mb-4",children:"Drug Expiry Warning Window"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",value:b,onChange:D=>A(parseInt(D.target.value)),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2 text-sm focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Days before expiry"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:['Items will be flagged as "Near Expiry" on dashboards ',b," days before their expiration date."]})]})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 w-full bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 p-4 md:px-10 flex items-center justify-between z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"text-sm text-slate-500 hidden md:block",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"Database:"})," Connected to Neon PostgreSQL"]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-end",children:[e.jsx("button",{className:"px-6 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-200 font-bold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Discard"}),e.jsxs("button",{onClick:q,disabled:o,className:"px-6 py-2.5 rounded-lg bg-primary hover:bg-blue-700 text-white font-bold text-sm shadow-md transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:o?"sync":"save"}),o?"Saving...":"Save Changes"]})]})]})]})}function Xj(){const[n,r]=m.useState("current-month"),[o,i]=m.useState("all"),[u,x]=m.useState(!0),[h,N]=m.useState([]),[y,g]=m.useState({totalExpiring:0,totalExpired:0,totalLoss:0});m.useEffect(()=>{p()},[n,o]);const p=async()=>{try{x(!0);const _=(await In.getExpiry({days_ahead:60})).data;N(_.items||[]),g({totalExpiring:_.total_expiring_items||0,totalExpired:_.total_expired_items||0,totalLoss:_.total_loss_value||0})}catch(w){console.error("Failed to fetch expiry data:",w),N([]),g({totalExpiring:0,totalExpired:0,totalLoss:0})}finally{x(!1)}},f=[{label:"Total Expired Items",value:y.totalExpired.toString(),icon:"inventory_2",color:"red"},{label:"Total Expiring Soon",value:y.totalExpiring.toString(),icon:"schedule",color:"amber"},{label:"Estimated Loss",value:`${y.totalLoss.toLocaleString()}`,icon:"trending_down",color:"red"}];return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Expiry & Loss Report"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Real-time expiry data from database"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-semibold text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"refresh"}),"Refresh"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-primary text-white text-sm font-semibold hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"download"}),"Export Report"]})]})]}),e.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 p-4 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Period"}),e.jsxs("select",{value:n,onChange:w=>r(w.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm px-3 py-2 focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"current-month",children:"Current Month"}),e.jsx("option",{value:"last-month",children:"Last Month"}),e.jsx("option",{value:"current-quarter",children:"Current Quarter"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Location"}),e.jsx("select",{value:o,onChange:w=>i(w.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm px-3 py-2 focus:ring-1 focus:ring-primary",children:e.jsx("option",{value:"all",children:"All Locations"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:f.map((w,_)=>e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:w.label}),e.jsx("span",{className:`material-symbols-outlined text-${w.color}-500`,children:w.icon})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-2",children:w.value})]},_))}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Expiry Details"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:["Expired: ",h.filter(w=>w.status==="expired").length]}),e.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:["Expiring Soon: ",h.filter(w=>w.status==="expiring").length]})]})]}),u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):h.length===0?e.jsxs("div",{className:"py-16 text-center text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl mb-3 text-green-500",children:"check_circle"}),e.jsx("p",{className:"text-lg font-medium",children:"No expiring items"}),e.jsx("p",{className:"text-sm",children:"All medicines are within safe expiry dates"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-xs uppercase text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Medicine"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Batch No."}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Unit Cost"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Total Loss"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:h.map((w,_)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:w.name}),w.brand&&e.jsx("div",{className:"text-xs text-slate-500",children:w.brand})]}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400 font-mono text-xs",children:w.batch_number}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:w.expiry_date}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-900 dark:text-white font-medium",children:w.quantity}),e.jsxs("td",{className:"px-6 py-4 text-right text-slate-600 dark:text-slate-400",children:["",w.unit_cost?.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-red-600 dark:text-red-400",children:["",w.total_loss?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-center",children:w.status==="expired"?e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Expired"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:"Expiring"})})]},_))})]})}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-slate-500",children:["Showing ",h.length," items from database"]})})]})]})}function Si(){const[n,r]=m.useState("daily"),[o,i]=m.useState([]),[u,x]=m.useState(""),[h,N]=m.useState(new Date().toISOString().split("T")[0]),[y,g]=m.useState(new Date().getMonth()+1),[p,f]=m.useState(new Date().getFullYear()),[w,_]=m.useState(""),[k,S]=m.useState(""),[b,A]=m.useState(null),[T,q]=m.useState([]),[D,M]=m.useState(!1);m.useEffect(()=>{se()},[]),m.useEffect(()=>{Q()},[n,u,h,y,p]);const se=async()=>{try{const H=await vt.list({size:500});i(H.data.items||H.data)}catch(H){console.error("Error loading shops:",H)}},Q=async()=>{M(!0);try{let H;n==="daily"?H=await In.getDailySales({shop_id:u||void 0,date:h}):n==="monthly"?H=await In.getMonthlySales({shop_id:u||void 0,month:y,year:p}):H=await In.getSales({shop_id:u||void 0,date_from:w,date_to:k}),A(H.data),H.data.daily_breakdown&&q(H.data.daily_breakdown)}catch(H){console.error("Error loading report:",H)}finally{M(!1)}},O=H=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(H),P=()=>{const H=["Metric","Value"],Z=[["Total Sales",O(b?.total_sales||0)],["Total Invoices",b?.total_invoices||0],["Items Sold",b?.total_items_sold||0],["Average Order Value",O(b?.average_order_value||0)]],U=[H,...Z].map(R=>R.join(",")).join(`
`),W=new Blob([U],{type:"text/csv"}),te=URL.createObjectURL(W),me=document.createElement("a");me.href=te,me.download=`sales-report-${new Date().toISOString().split("T")[0]}.csv`,me.click()};return e.jsxs("div",{className:"sales-reports",children:[e.jsx("style",{children:`
                .sales-reports {
                    padding: 24px;
                    max-width: 1400px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .btn-export {
                    padding: 10px 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .btn-export:hover {
                    background: #059669;
                }
                .filters-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 20px;
                    margin-bottom: 24px;
                }
                .filters-row {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    align-items: flex-end;
                }
                .filter-group {
                    display: flex;
                    flex-direction: column;
                    gap: 6px;
                }
                .filter-group label {
                    font-size: 13px;
                    font-weight: 500;
                    color: #666;
                }
                .filter-group select,
                .filter-group input {
                    padding: 10px 12px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                    min-width: 160px;
                }
                .report-tabs {
                    display: flex;
                    gap: 8px;
                }
                .tab-btn {
                    padding: 10px 20px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.2s;
                }
                .tab-btn.active {
                    background: #4a6cf7;
                    color: white;
                    border-color: #4a6cf7;
                }
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 20px;
                    margin-bottom: 24px;
                }
                @media (max-width: 1024px) {
                    .stats-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }
                @media (max-width: 640px) {
                    .stats-grid {
                        grid-template-columns: 1fr;
                    }
                }
                .stat-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .stat-card.primary {
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    color: white;
                }
                .stat-icon {
                    width: 48px;
                    height: 48px;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    margin-bottom: 16px;
                }
                .stat-card:not(.primary) .stat-icon {
                    background: #f0f4ff;
                }
                .stat-card.primary .stat-icon {
                    background: rgba(255,255,255,0.2);
                }
                .stat-value {
                    font-size: 28px;
                    font-weight: 700;
                    margin-bottom: 4px;
                }
                .stat-label {
                    font-size: 14px;
                    opacity: 0.8;
                }
                .chart-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .chart-title {
                    font-size: 18px;
                    font-weight: 600;
                    margin: 0 0 20px 0;
                    color: #1a1a2e;
                }
                .chart-bars {
                    display: flex;
                    gap: 8px;
                    align-items: flex-end;
                    height: 200px;
                    padding-top: 20px;
                }
                .chart-bar-wrapper {
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 8px;
                }
                .chart-bar {
                    width: 100%;
                    max-width: 40px;
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    border-radius: 4px 4px 0 0;
                    min-height: 4px;
                    transition: height 0.3s ease;
                }
                .chart-label {
                    font-size: 11px;
                    color: #666;
                    text-align: center;
                }
                .loading-overlay {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Sales Reports"}),e.jsx("button",{className:"btn-export",onClick:P,children:"Export CSV"})]}),e.jsx("div",{className:"filters-card",children:e.jsxs("div",{className:"filters-row",children:[e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-btn ${n==="daily"?"active":""}`,onClick:()=>r("daily"),children:"Daily"}),e.jsx("button",{className:`tab-btn ${n==="monthly"?"active":""}`,onClick:()=>r("monthly"),children:"Monthly"}),e.jsx("button",{className:`tab-btn ${n==="custom"?"active":""}`,onClick:()=>r("custom"),children:"Custom Range"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Shop"}),e.jsxs("select",{value:u,onChange:H=>x(H.target.value),children:[e.jsx("option",{value:"",children:"All Shops"}),o.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),n==="daily"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:h,onChange:H=>N(H.target.value)})]}),n==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Month"}),e.jsx("select",{value:y,onChange:H=>g(Number(H.target.value)),children:Array.from({length:12},(H,Z)=>e.jsx("option",{value:Z+1,children:new Date(2e3,Z).toLocaleString("default",{month:"long"})},Z+1))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Year"}),e.jsx("select",{value:p,onChange:H=>f(Number(H.target.value)),children:Array.from({length:5},(H,Z)=>e.jsx("option",{value:new Date().getFullYear()-Z,children:new Date().getFullYear()-Z},Z))})]})]}),n==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From"}),e.jsx("input",{type:"date",value:w,onChange:H=>_(H.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To"}),e.jsx("input",{type:"date",value:k,onChange:H=>S(H.target.value)})]})]})]})}),D?e.jsx("div",{className:"loading-overlay",children:"Loading report data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:O(b?.total_sales||0)}),e.jsx("div",{className:"stat-label",children:"Total Sales"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:b?.total_invoices||0}),e.jsx("div",{className:"stat-label",children:"Invoices"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:b?.total_items_sold||0}),e.jsx("div",{className:"stat-label",children:"Items Sold"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:O(b?.average_order_value||0)}),e.jsx("div",{className:"stat-label",children:"Avg Order Value"})]})]}),T.length>0&&e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{className:"chart-title",children:"Daily Breakdown"}),e.jsx("div",{className:"chart-bars",children:T.slice(0,14).map((H,Z)=>{const U=Math.max(...T.map(te=>te.sales)),W=U>0?H.sales/U*180:4;return e.jsxs("div",{className:"chart-bar-wrapper",children:[e.jsx("div",{className:"chart-bar",style:{height:`${W}px`},title:`${O(H.sales)}`}),e.jsx("span",{className:"chart-label",children:new Date(H.date).getDate()})]},Z)})})]})]})]})}function Zj(){const[n,r]=m.useState("summary"),[o,i]=m.useState(new Date().getMonth()+1),[u,x]=m.useState(new Date().getFullYear()),[h,N]=m.useState(null),[y,g]=m.useState(null),[p,f]=m.useState(!0);m.useEffect(()=>{w()},[n,o,u]);const w=async()=>{f(!0);try{if(n==="summary"){const b=await V.get("/tax/summary",{params:{month:o,year:u}});N(b.data)}else if(n==="gst"){const b=await V.get("/tax/gst",{params:{month:o,year:u}});g(b.data)}}catch(b){console.error("Error loading tax report:",b)}finally{f(!1)}},_=b=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(b),k=b=>new Date(2e3,b-1).toLocaleString("default",{month:"long"}),S=()=>{let b=[],A="";n==="summary"&&h?(b=[["Tax Summary Report",`${k(o)} ${u}`],[""],["Metric","Amount"],["Total Sales",_(h.total_sales)],["Net Taxable Value",_(h.net_taxable_value)],["Total Tax Collected",_(h.total_tax_collected)],["GST Amount",_(h.gst_amount)],["VAT Amount",_(h.vat_amount)]],A=`tax-summary-${u}-${o}.csv`):n==="gst"&&y&&(b=[["GST Report",y.period],[""],["Component","Amount"],["Taxable Value",_(y.total_taxable_value)],["CGST",_(y.cgst_amount)],["SGST",_(y.sgst_amount)],["IGST",_(y.igst_amount)],["Total GST",_(y.total_gst)],["Invoice Count",y.invoice_count.toString()]],A=`gst-report-${u}-${o}.csv`);const T=b.map(se=>se.join(",")).join(`
`),q=new Blob([T],{type:"text/csv"}),D=URL.createObjectURL(q),M=document.createElement("a");M.href=D,M.download=A,M.click()};return e.jsxs("div",{className:"tax-reports",children:[e.jsx("style",{children:`
                .tax-reports {
                    padding: 24px;
                    max-width: 1200px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .btn-export {
                    padding: 10px 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .btn-export:hover {
                    background: #059669;
                }
                .controls-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 20px;
                    margin-bottom: 24px;
                }
                .controls-row {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    align-items: center;
                }
                .report-tabs {
                    display: flex;
                    gap: 8px;
                }
                .tab-btn {
                    padding: 10px 20px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.2s;
                }
                .tab-btn.active {
                    background: #4a6cf7;
                    color: white;
                    border-color: #4a6cf7;
                }
                .period-selector {
                    display: flex;
                    gap: 8px;
                    margin-left: auto;
                }
                .period-selector select {
                    padding: 10px 16px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                }
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin-bottom: 24px;
                }
                .stat-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .stat-card.primary {
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    color: white;
                }
                .stat-card.success {
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: white;
                }
                .stat-card.warning {
                    background: linear-gradient(135deg, #f59e0b, #d97706);
                    color: white;
                }
                .stat-icon {
                    font-size: 28px;
                    margin-bottom: 12px;
                }
                .stat-value {
                    font-size: 24px;
                    font-weight: 700;
                    margin-bottom: 4px;
                }
                .stat-label {
                    font-size: 13px;
                    opacity: 0.8;
                }
                .gst-breakdown {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .breakdown-title {
                    font-size: 18px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0 0 20px 0;
                    padding-bottom: 12px;
                    border-bottom: 1px solid #eee;
                }
                .breakdown-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 24px;
                }
                @media (max-width: 768px) {
                    .breakdown-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }
                .breakdown-item {
                    text-align: center;
                    padding: 20px;
                    background: #f8f9ff;
                    border-radius: 12px;
                }
                .breakdown-value {
                    font-size: 24px;
                    font-weight: 700;
                    color: #4a6cf7;
                    margin-bottom: 8px;
                }
                .breakdown-label {
                    font-size: 14px;
                    color: #666;
                    font-weight: 500;
                }
                .info-card {
                    background: #f0f8ff;
                    border: 1px solid #bfdbfe;
                    border-radius: 12px;
                    padding: 16px 20px;
                    margin-top: 24px;
                    display: flex;
                    gap: 12px;
                    align-items: flex-start;
                }
                .info-card-icon {
                    font-size: 20px;
                }
                .info-card-content h4 {
                    margin: 0 0 4px 0;
                    color: #1e40af;
                }
                .info-card-content p {
                    margin: 0;
                    color: #3b82f6;
                    font-size: 14px;
                }
                .loading {
                    text-align: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Tax Reports"}),e.jsx("button",{className:"btn-export",onClick:S,children:"Export for CA Filing"})]}),e.jsx("div",{className:"controls-card",children:e.jsxs("div",{className:"controls-row",children:[e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-btn ${n==="summary"?"active":""}`,onClick:()=>r("summary"),children:"Summary"}),e.jsx("button",{className:`tab-btn ${n==="gst"?"active":""}`,onClick:()=>r("gst"),children:"GST Report"}),e.jsx("button",{className:`tab-btn ${n==="vat"?"active":""}`,onClick:()=>r("vat"),children:"VAT Report"})]}),e.jsxs("div",{className:"period-selector",children:[e.jsx("select",{value:o,onChange:b=>i(Number(b.target.value)),children:Array.from({length:12},(b,A)=>e.jsx("option",{value:A+1,children:k(A+1)},A+1))}),e.jsx("select",{value:u,onChange:b=>x(Number(b.target.value)),children:Array.from({length:5},(b,A)=>e.jsx("option",{value:new Date().getFullYear()-A,children:new Date().getFullYear()-A},A))})]})]})}),p?e.jsx("div",{className:"loading",children:"Loading tax data..."}):n==="summary"&&h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:_(h.total_sales)}),e.jsx("div",{className:"stat-label",children:"Total Sales"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:_(h.net_taxable_value)}),e.jsx("div",{className:"stat-label",children:"Taxable Value"})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:_(h.total_tax_collected)}),e.jsx("div",{className:"stat-label",children:"Total Tax Collected"})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:_(h.gst_amount)}),e.jsx("div",{className:"stat-label",children:"GST Liability"})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("span",{className:"info-card-icon",children:""}),e.jsxs("div",{className:"info-card-content",children:[e.jsx("h4",{children:"Tax Filing Reminder"}),e.jsx("p",{children:"GST returns (GSTR-1, GSTR-3B) must be filed by the 11th and 20th of each month respectively."})]})]})]}):n==="gst"&&y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:_(y.total_taxable_value)}),e.jsx("div",{className:"stat-label",children:"Taxable Value"})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:_(y.total_gst)}),e.jsx("div",{className:"stat-label",children:"Total GST"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:y.invoice_count}),e.jsx("div",{className:"stat-label",children:"Invoices"})]})]}),e.jsxs("div",{className:"gst-breakdown",children:[e.jsx("h3",{className:"breakdown-title",children:"GST Component Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:_(y.cgst_amount)}),e.jsx("div",{className:"breakdown-label",children:"CGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:_(y.sgst_amount)}),e.jsx("div",{className:"breakdown-label",children:"SGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:_(y.igst_amount)}),e.jsx("div",{className:"breakdown-label",children:"IGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",style:{color:"#10b981"},children:_(y.total_gst)}),e.jsx("div",{className:"breakdown-label",children:"Total Payable"})]})]})]})]}):e.jsx("div",{className:"loading",children:"Select a report type to view data"})]})}function Ij(){const[n,r]=m.useState(""),[o,i]=m.useState(!1),[u,x]=m.useState(null),[h,N]=m.useState([]),[y,g]=m.useState([]),[p,f]=m.useState(!1);m.useEffect(()=>{w()},[]);const w=async()=>{try{f(!0);const b=await Is.getReturns({page:1,size:10});g(b.data?.data?.items||b.data?.items||[])}catch(b){console.error("Failed to fetch recent returns:",b),g([])}finally{f(!1)}},_=async()=>{if(!n.trim()){Ze.error("Please enter an invoice number");return}try{i(!0);const b=await Is.get(n),A=b.data?.data||b.data;if(!A){Ze.error("Invoice not found");return}x(A);const T=await Is.getItems(n),q=T.data?.data?.items||T.data?.items||[];N(q),q.length===0&&Ze.info("No items found for this invoice")}catch(b){console.error("Invoice not found:",b),Ze.error(b.response?.data?.detail||"Invoice not found"),x(null),N([])}finally{i(!1)}},k=async()=>{if(h.length===0){Ze.error("No items to return");return}try{i(!0),await Is.processReturn(u.id,{items:h.map(b=>({medicine_id:b.medicine_id,quantity:b.quantity,reason:b.reason||"Customer return"})),refund_method:"cash"}),Ze.success("Return processed successfully!"),x(null),N([]),r(""),w()}catch(b){console.error("Failed to process return:",b),Ze.error(b.response?.data?.detail||"Failed to process return")}finally{i(!1)}},S=h.reduce((b,A)=>b+(A.refund_amount||A.unit_price*A.quantity),0);return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"storefront"}),e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Return / Refund"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Process customer returns and issue refunds"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"receipt_long"}),"New Return Request"]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Original Invoice Number"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"search"}),e.jsx("input",{type:"text",value:n,onChange:b=>r(b.target.value),placeholder:"Enter invoice number (e.g., INV-2024-0001)",className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary",onKeyPress:b=>b.key==="Enter"&&_()})]}),e.jsx("button",{onClick:_,disabled:o,className:"px-5 py-2.5 rounded-lg bg-primary text-white font-semibold text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",children:o?"Searching...":"Find Invoice"})]})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Invoice"}),e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:u.id||u.invoice_number})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Date"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:u.date||new Date(u.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-sm",children:(u.customer_name||"C").split(" ").map(b=>b[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:u.customer_name||"Walk-in Customer"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:u.customer_phone||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-3",children:"Select Items to Return"}),h.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"inventory_2"}),e.jsx("p",{children:"No items found for this invoice"})]}):e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-xs uppercase text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-primary focus:ring-primary"})}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold",children:"Refund"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:h.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-slate-300 text-primary focus:ring-primary"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:b.medicine_name}),e.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400 font-mono text-xs",children:b.batch_number}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"number",defaultValue:b.quantity,min:"1",className:"w-16 text-center rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2 py-1 text-sm"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{className:"w-full rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2 py-1 text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("option",{children:"Wrong medication"}),e.jsx("option",{children:"Damaged packaging"}),e.jsx("option",{children:"Expired product"}),e.jsx("option",{children:"Customer changed mind"})]})}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-slate-900 dark:text-white",children:["",(b.refund_amount||b.unit_price*b.quantity).toFixed(2)]})]},b.id))})]})})]}),h.length>0&&e.jsxs("div",{className:"bg-primary/5 dark:bg-primary/10 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Refund Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["",S.toFixed(2)]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("select",{className:"rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-3 py-2 text-sm",children:[e.jsx("option",{children:"Cash Refund"}),e.jsx("option",{children:"Store Credit"}),e.jsx("option",{children:"Original Payment Method"})]})})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{x(null),N([])},className:"px-5 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 font-semibold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:k,disabled:o||h.length===0,className:"px-5 py-2.5 rounded-lg bg-primary text-white font-semibold text-sm hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check_circle"}),o?"Processing...":"Process Return"]})]})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm h-fit",children:[e.jsx("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"history"}),"Recent Returns"]})}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:p?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Loading..."})]}):y.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"assignment_return"}),e.jsx("p",{children:"No recent returns"})]}):y.map(b=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-mono text-sm font-medium text-primary",children:b.return_number||b.id}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${b.status==="completed"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"}`,children:b.status})]}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:b.customer_name||"Walk-in Customer"}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:b.created_at?new Date(b.created_at).toLocaleDateString():"N/A"}),e.jsxs("span",{children:[b.items_count||0," items  ",(b.refund_amount||0).toFixed(2)]})]})]},b.id))}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 text-center",children:e.jsx("button",{className:"text-sm text-primary font-medium hover:text-blue-700",children:"View All Returns"})})]})]})]})}function Kj(){const{user:n}=We(),r=n?.role||"",[o,i]=m.useState([]),[u,x]=m.useState(!0),[h,N]=m.useState(""),[y,g]=m.useState(!1),[p,f]=m.useState(null),[w,_]=m.useState(!1),[k,S]=m.useState("active"),[b,A]=m.useState("all"),[T,q]=m.useState(1),[D,M]=m.useState(0),[se,Q]=m.useState(10),[O,P]=m.useState({total:0,active:0,inactive:0,admins:0,by_role:{}}),[H,Z]=m.useState({email:"",full_name:"",phone:"",role:"",role_id:"",password:"",assigned_warehouse_id:"",assigned_shop_id:""}),[U,W]=m.useState([]),[te,me]=m.useState([]),[R,ee]=m.useState([]);m.useEffect(()=>{L(),xe()},[k,b,T,se]),m.useEffect(()=>{I()},[]);const I=async()=>{try{const $=await Hl.getStats();P($.data)}catch($){console.error("Failed to fetch user stats:",$)}},xe=async()=>{try{const[$,ye,ze]=await Promise.all([At.list({size:500}),vt.list({size:500}),Zn.listAssignable()]);W($.data?.items||$.data||[]),me(ye.data?.items||ye.data||[]);const Tt=ze.data?.roles||ze.data?.items||(Array.isArray(ze.data)?ze.data:[]);ee(Tt.filter(Ta=>Ta.name!=="super_admin"))}catch($){console.error("Failed to fetch entities:",$),ee([])}},L=async()=>{try{x(!0);const $={search:h,page:T,size:se};k!=="all"&&($.is_active=k==="active"),b!=="all"&&($.role=b);const ye=await Hl.list($);i(ye.data?.items||ye.data?.data||ye.data||[]),M(ye.data?.total||(ye.data?.items||ye.data?.data||ye.data||[]).length)}catch($){console.error("Failed to fetch users:",$)}finally{x(!1)}},E=()=>{f(null),Z({email:"",full_name:"",phone:"",role:"",role_id:"",password:"",assigned_warehouse_id:"",assigned_shop_id:""}),g(!0)},j=$=>{f($);const ye=R.find(ze=>ze.name===$.role);Z({email:$.email||"",full_name:$.full_name||"",phone:$.phone||"",role:$.role,role_id:ye?.id||"",password:"",assigned_warehouse_id:$.assigned_warehouse_id||"",assigned_shop_id:$.assigned_shop_id||""}),g(!0)},B=async $=>{$.preventDefault();try{console.log("Submitting user data:",H),p?(await Hl.update(p.id,H),window.toast?.success("User updated successfully")):(await Hl.create(H),window.toast?.success("User created successfully")),g(!1),L(),I()}catch(ye){console.error("Failed to save user:",ye),console.error("Error response:",ye.response?.data),console.error("Error status:",ye.response?.status);const ze=ye.response?.data?.detail?Array.isArray(ye.response.data.detail)?ye.response.data.detail.map(Tt=>`${Tt.loc.join(".")}: ${Tt.msg}`).join(", "):ye.response.data.detail:ye.message||"Failed to save user";window.toast?.error(ze)}},[F,pe]=m.useState(!1),[le,be]=m.useState(null),Le=$=>{be($),pe(!0)},ie=async()=>{if(le)try{await Hl.delete(le.id),window.toast?.success("User deleted successfully"),L(),I()}catch($){console.error("Failed to delete user:",$);const ye=$.response?.data?.detail||"Failed to delete user";window.toast?.error(ye)}finally{pe(!1),be(null)}},ce=$=>{switch($){case"super_admin":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300";case"admin":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";case"manager":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}},Se=($,ye="all")=>{S($),A(ye),q(1)},ke=[{header:"User",key:"full_name",render:$=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white text-sm font-medium shadow-sm",children:$.full_name?.charAt(0)||$.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:$.full_name||"N/A"}),e.jsx("div",{className:"text-xs text-slate-500",children:$.email})]})]})},{header:"Role",key:"role",render:$=>e.jsx("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-[11px] font-medium uppercase tracking-wide ${ce($.role)}`,children:$.role.replace("_"," ")})},{header:"Location",key:"assigned_shop_id",render:$=>{if($.role==="super_admin")return e.jsx("span",{className:"text-slate-400 italic",children:"Global Access"});if($.assigned_shop_id){const ye=te.find(ze=>ze.id===$.assigned_shop_id);return e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-blue-500",children:"store"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",title:ye?.name,children:ye?.name||"Unknown Shop"})]})}if($.assigned_warehouse_id){const ye=U.find(ze=>ze.id===$.assigned_warehouse_id);return e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-amber-500",children:"warehouse"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",title:ye?.name,children:ye?.name||"Unknown Warehouse"})]})}return e.jsx("span",{className:"text-slate-400",children:"-"})}},{header:"Status",key:"is_active",render:$=>e.jsx(Ve,{variant:$.is_active?"success":"error",children:$.is_active?"Active":"Inactive"}),align:"center"},{header:"Last Login",key:"last_login",render:$=>e.jsx("span",{className:"text-slate-500",children:$.last_login?new Date($.last_login).toLocaleDateString():"Never"})},{header:"Actions",key:"id",align:"right",render:$=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(re,{variant:"secondary",onClick:()=>j($),className:"!p-1.5 h-8 w-8 justify-center",title:"Edit User",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r==="super_admin"&&e.jsx(re,{variant:"secondary",onClick:()=>Le($),className:"!p-1.5 h-8 w-8 justify-center text-red-600 hover:bg-red-50 hover:text-red-700",title:"Delete User",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"User Management",subtitle:`Manage ${O.total} users across your organization`,actions:e.jsxs(re,{variant:"primary",onClick:E,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"person_add"}),"Add User"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Users",value:O.total,icon:"groups",onClick:()=>Se("all"),isActive:k==="all"&&b==="all"}),e.jsx(je,{title:"Active Users",value:O.active,icon:"check_circle",onClick:()=>Se("active"),isActive:k==="active",change:O.total>0?(O.active/O.total*100).toFixed(0)+"%":"0%",changeType:"up"}),e.jsx(je,{title:"Warehouse Admins",value:O.by_role?.warehouse_admin||0,icon:"warehouse",onClick:()=>Se("all","warehouse_admin"),isActive:b==="warehouse_admin"}),e.jsx(je,{title:"Shop Owners",value:O.by_role?.shop_owner||0,icon:"store",onClick:()=>Se("all","shop_owner"),isActive:b==="shop_owner"}),e.jsx(je,{title:"Pharmacists",value:O.by_role?.pharmacist||0,icon:"medication",onClick:()=>Se("all","pharmacist"),isActive:b==="pharmacist"}),e.jsx(je,{title:"Cashiers",value:O.by_role?.cashier||0,icon:"point_of_sale",onClick:()=>Se("all","cashier"),isActive:b==="cashier"}),e.jsx(je,{title:"Pharmacy Employees",value:O.by_role?.pharmacy_employee||0,icon:"local_pharmacy",onClick:()=>Se("all","pharmacy_employee"),isActive:b==="pharmacy_employee"}),e.jsx(je,{title:"Warehouse Employees",value:O.by_role?.warehouse_employee||0,icon:"inventory_2",onClick:()=>Se("all","warehouse_employee"),isActive:b==="warehouse_employee"})]}),e.jsx(ge.DataTable,{columns:ke,data:o,loading:u,emptyMessage:"No users found matching your criteria.",pagination:{currentPage:T,totalPages:Math.ceil(D/se),onPageChange:q,totalItems:D,pageSize:se,onPageSizeChange:$=>{Q($),q(1)}},headerSlot:e.jsx(ge.ListControls,{title:"User List",count:D||o.length,searchProps:{value:h,onChange:$=>{N($),q(1),L()}},onFilterClick:L,embedded:!0})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4",children:p?"Edit User":"Add User"}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:H.full_name,onChange:$=>Z({...H,full_name:$.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:H.email,onChange:$=>Z({...H,email:$.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:H.phone,onChange:$=>Z({...H,phone:$.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Role"}),e.jsxs("select",{value:H.role,onChange:$=>{const ye=$.target.value,ze=R.find(Tt=>Tt.name===ye);Z({...H,role:ye,role_id:ze?.id||"",assigned_warehouse_id:"",assigned_shop_id:""})},className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white appearance-none cursor-pointer",required:!0,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",className:"text-slate-500",children:"Select Role"}),R.map($=>e.jsx("option",{value:$.name,className:"text-slate-900 dark:text-white bg-white dark:bg-slate-800",children:$.name.replace(/_/g," ").replace(/\b\w/g,ye=>ye.toUpperCase())},$.id))]})]}),R.find($=>$.name===H.role)?.entity_type==="warehouse"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Assign to Warehouse"}),e.jsxs("select",{value:H.assigned_warehouse_id,onChange:$=>Z({...H,assigned_warehouse_id:$.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white appearance-none cursor-pointer",required:!0,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",className:"text-slate-500",children:"Select Warehouse"}),U.map($=>e.jsx("option",{value:$.id,className:"text-slate-900 dark:text-white bg-white dark:bg-slate-800",children:$.name},$.id))]})]}),R.find($=>$.name===H.role)?.entity_type==="shop"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Assign to Medical Shop"}),e.jsxs("select",{value:H.assigned_shop_id,onChange:$=>Z({...H,assigned_shop_id:$.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white appearance-none cursor-pointer",required:!0,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",className:"text-slate-500",children:"Select Shop"}),te.map($=>e.jsx("option",{value:$.id,className:"text-slate-900 dark:text-white bg-white dark:bg-slate-800",children:$.name},$.id))]})]}),!p&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Password ",e.jsx("span",{className:"text-xs text-slate-500",children:"(min. 8 characters)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:H.password,onChange:$=>Z({...H,password:$.target.value}),className:"w-full px-3 pr-10 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!p,minLength:8}),e.jsx("button",{type:"button",onClick:()=>_(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:w?"Hide password":"Show password",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:w?"visibility_off":"visibility"})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:p?"Update":"Create"})]})]})]})}),F&&le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"warning"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Delete User?"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Are you sure you want to delete ",e.jsx("strong",{children:le.full_name}),"? This action cannot be undone."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>pe(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ie,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl hover:bg-red-700 font-medium transition-colors shadow-lg shadow-red-500/20",children:"Delete User"})]})]})})]})}function Jj(){const{isLoading:n}=mt(),{user:r}=We(),{activeEntity:o,scope:i}=Aa(),[u,x]=m.useState([]),[h,N]=m.useState(!0),[y,g]=m.useState(""),[p,f]=m.useState(1),[w,_]=m.useState(0),[k,S]=m.useState(10),[b,A]=m.useState(!1),[T,q]=m.useState(null),[D,M]=m.useState({name:"",phone:"",email:"",address:"",customer_type:"regular",gender:""});m.useEffect(()=>{se()},[p,k,y]);const se=async()=>{try{N(!0);const U={page:p,size:k};y&&(U.search=y);const W=await Gl.list(U);x(W.data?.items||W.data?.data||[]),_(W.data?.total||0)}catch(U){console.error("Failed to fetch customers:",U),x([])}finally{N(!1)}},Q=()=>{q(null),M({name:"",phone:"",email:"",address:"",customer_type:"regular",gender:""}),A(!0)},O=U=>{q(U),M({name:U.name,phone:U.phone,email:U.email||"",address:U.address||"",customer_type:U.customer_type||"regular",gender:U.gender||""}),A(!0)},P=async U=>{U.preventDefault();try{if(T)await Gl.update(T.id,D);else{let W=r?.shop_id;i==="shop"&&o?.id&&(W=o.id),!W&&r?.role,await Gl.create({...D,shop_id:W,customer_type:(D.customer_type||"regular").toLowerCase()})}A(!1),se()}catch(W){console.error("Failed to save customer:",W)}},H=U=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(U),Z=[{header:"Customer",key:"name",render:U=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 font-semibold",children:U.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:U.name}),e.jsx("div",{className:"text-xs text-slate-500",children:U.phone})]})]})},{header:"Type",key:"customer_type",render:U=>e.jsx(Ve,{variant:U.customer_type==="premium"?"warning":"secondary",className:"capitalize",children:U.customer_type||"regular"})},{header:"Email / Address",key:"email",className:"hidden md:table-cell",render:U=>e.jsxs("div",{className:"text-sm",children:[U.email&&e.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:U.email}),U.address&&e.jsx("div",{className:"text-xs text-slate-500 truncate max-w-[200px]",children:U.address})]})},{header:"Total Spend",key:"total_purchases",align:"right",render:U=>e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:H(U.total_purchases||0)})},{header:"Last Visit",key:"last_visit",align:"right",render:U=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:U.last_visit?new Date(U.last_visit).toLocaleDateString():"-"})},{header:"Actions",key:"id",align:"right",render:U=>e.jsx(re,{variant:"ghost",onClick:()=>O(U),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Customer",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})})}];return e.jsxs(ge,{loading:n,children:[e.jsx(ge.Header,{title:"Customers",subtitle:"Manage customer profiles and history",actions:e.jsxs(re,{variant:"primary",onClick:Q,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Customer"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Customers",value:w,icon:"group",isActive:!0}),e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:"hidden lg:block"})]}),e.jsx(ge.DataTable,{columns:Z,data:u,loading:h,emptyMessage:"No customers found.",pagination:{currentPage:p,totalPages:Math.ceil(w/k),onPageChange:f,totalItems:w,pageSize:k,onPageSizeChange:U=>{S(U),f(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Customer List",count:w,searchProps:{value:y,onChange:U=>{g(U),f(1)},placeholder:"Search customers..."},embedded:!0})}),e.jsx(Lt,{isOpen:b,onClose:()=>A(!1),title:T?"Edit Customer":"Add Customer",children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:D.name,onChange:U=>M({...D,name:U.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",value:D.phone,onChange:U=>M({...D,phone:U.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Type"}),e.jsx(Uj,{value:D.customer_type,onChange:U=>M({...D,customer_type:U}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gender"}),e.jsx(Ap,{value:D.gender,onChange:U=>M({...D,gender:U}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:D.email,onChange:U=>M({...D,email:U.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Address"}),e.jsx("textarea",{value:D.address,onChange:U=>M({...D,address:U.target.value}),rows:2,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{type:"button",variant:"ghost",onClick:()=>A(!1),className:"flex-1",children:"Cancel"}),e.jsx(re,{type:"submit",variant:"primary",className:"flex-1",children:T?"Update":"Create"})]})]})})]})}const C0={name:"",email:"",password:"",phone:"",employment_type:"full_time",salary:0,shop_id:"",date_of_joining:new Date().toISOString().split("T")[0],address:"",emergency_contact:"",gender:"",hra_percent:40,allowances_percent:20,pf_percent:12,esi_percent:.75,esi_applicable:!0};function Wj(){const{user:n}=We(),{isLoading:r}=mt(),[o,i]=m.useState([]),[u,x]=m.useState(!0),[h,N]=m.useState(""),[y,g]=m.useState(""),[p,f]=m.useState(1),[w,_]=m.useState(0),[k,S]=m.useState(10),[b,A]=m.useState(!1),[T,q]=m.useState(null),[D,M]=m.useState(C0),[se,Q]=m.useState(!1),[O,P]=m.useState(""),[H,Z]=m.useState(null),[U,W]=m.useState(!1),[te,me]=m.useState(null),[R,ee]=m.useState(!1),[I,xe]=m.useState(""),L=n?.role==="warehouse_admin",E=n?.role==="super_admin";m.useEffect(()=>{j()},[y,p,k,h,I]);const j=async()=>{try{x(!0);const ce={page:p,size:k};h&&(ce.search=h),y&&(ce.department=y),I&&(ce.status=I);const Se=await ga.list(ce);i(Se.data.items||Se.data.data||Se.data||[]),_(Se.data.total||Se.data.length||0)}catch(ce){console.error(ce),i([])}finally{x(!1)}},B=()=>{q(null),M(C0),P(""),A(!0)},F=async ce=>{try{const ke=(await ga.get(ce.id)).data;q(ce),M({name:ke.name||"",email:ke.email||"",phone:ke.phone||"",employment_type:ke.employment_type||"full_time",salary:ke.basic_salary||0,shop_id:ke.shop_id||"",date_of_joining:ke.date_of_joining?.split("T")[0]||"",address:ke.address||"",emergency_contact:ke.emergency_contact||"",gender:ke.gender||"",hra_percent:ke.hra_percent||40,allowances_percent:ke.allowances_percent||20,pf_percent:ke.pf_percent||12,esi_percent:ke.esi_percent||.75,esi_applicable:ke.esi_applicable!==void 0?ke.esi_applicable:!0,password:""}),P(""),A(!0)}catch(Se){console.error("Failed to fetch employee details:",Se),alert("Failed to load employee details")}},pe=async ce=>{if(ce.preventDefault(),P(""),!D.name||!D.phone){P("Please fill in all required fields (Name, Phone)");return}if(!D.salary||D.salary<=0){P("Please enter a valid salary amount");return}Q(!0);try{const Se={name:D.name,phone:D.phone,employment_type:D.employment_type,date_of_joining:D.date_of_joining,basic_salary:Number(D.salary)||void 0,email:D.email||void 0,password:D.password||void 0,gender:D.gender||void 0,address:D.address||void 0,emergency_contact:D.emergency_contact||void 0,shop_id:D.shop_id||void 0,hra_percent:D.hra_percent,allowances_percent:D.allowances_percent,pf_percent:D.pf_percent,esi_percent:D.esi_percent,esi_applicable:D.esi_applicable};if(T)await ga.update(T.id,Se),A(!1),j();else{const ke=await ga.create(Se);ke.data?.data?.credentials&&Z(ke.data.data.credentials),A(!1),j()}}catch(Se){console.error("Failed to save employee:",Se);let ke="Failed to save employee";if(Se.response?.data?.detail){const $=Se.response.data.detail;Array.isArray($)?ke=$.map(ye=>`${ye.loc?.join(".")||"Field"}: ${ye.msg}`).join(", "):typeof $=="string"&&(ke=$)}P(ke)}finally{Q(!1)}},le=async()=>{if(te){ee(!0);try{await ga.delete(te.id),W(!1),me(null),j()}catch(ce){console.error("Failed to delete employee:",ce);let Se="Failed to delete employee";ce.response?.data?.detail&&(Se=ce.response.data.detail),alert(Se)}finally{ee(!1)}}},be=ce=>{me(ce),W(!0)},Le=ce=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(ce),ie=[{header:"Employee",key:"name",render:ce=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center text-violet-600 dark:text-violet-400 text-sm font-bold",children:ce.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:ce.name}),e.jsx("div",{className:"text-xs text-slate-500",children:ce.phone})]})]})},{header:"Department",key:"department",render:ce=>e.jsx(Ve,{variant:"secondary",className:"capitalize",children:ce.department})},{header:"Designation",key:"designation",className:"hidden sm:table-cell"},{header:"Salary",key:"basic_salary",render:ce=>e.jsx("span",{className:"font-medium font-mono text-slate-700 dark:text-slate-300",children:Le(ce.basic_salary||0)}),align:"right"},{header:"Status",key:"status",render:ce=>e.jsx(Ve,{variant:ce.status==="active"?"success":ce.status==="on_leave"?"warning":"error",children:ce.status||"Active"}),align:"center"},{header:"Actions",key:"id",render:ce=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(re,{variant:"ghost",onClick:()=>F(ce),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-blue-600",title:"Edit Employee",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx(re,{variant:"ghost",onClick:()=>be(ce),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-red-600",title:"Delete Employee",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(ge,{loading:r,children:[e.jsx(ge.Header,{title:"Employees",subtitle:"Manage staff, payroll, and assignments",actions:e.jsxs(re,{variant:"primary",onClick:B,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Employee"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"All Employees",value:I?"-":w,icon:"badge",onClick:()=>{xe(""),g("")},isActive:!I&&!y}),e.jsx(je,{title:"Active",value:I==="active"?w:"-",icon:"check_circle",onClick:()=>xe("active"),isActive:I==="active"}),e.jsx(je,{title:"On Leave",value:I==="on_leave"?w:"-",icon:"event_busy",onClick:()=>xe("on_leave"),isActive:I==="on_leave"}),e.jsx(je,{title:"Inactive",value:I==="inactive"?w:"-",icon:"cancel",onClick:()=>xe("inactive"),isActive:I==="inactive"}),E&&e.jsx(je,{title:"Terminated",value:I==="terminated"?w:"-",icon:"delete",onClick:()=>xe("terminated"),isActive:I==="terminated",className:"!bg-red-50 dark:!bg-red-900/10 !border-red-200 dark:!border-red-800"})]}),e.jsx(ge.DataTable,{columns:ie,data:o,loading:u,emptyMessage:"No employees found. Add your first employee.",pagination:{currentPage:p,totalPages:Math.ceil(w/k),onPageChange:f,totalItems:w,pageSize:k,onPageSizeChange:ce=>{S(ce),f(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Employee List",count:w,searchProps:{value:h,onChange:ce=>{N(ce),f(1)},placeholder:"Search employees..."},actions:null,embedded:!0})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800 z-10",children:e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:T?"Edit Employee":"Add New Employee"})}),e.jsxs("form",{onSubmit:pe,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[O&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),O]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:D.name,onChange:ce=>M({...D,name:ce.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:D.phone,onChange:ce=>M({...D,phone:ce.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Email"}),e.jsx("input",{type:"email",value:D.email,onChange:ce=>M({...D,email:ce.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors"})]}),!T&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Password"}),e.jsx("input",{type:"password",value:D.password,onChange:ce=>M({...D,password:ce.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",placeholder:"Enter password for user account"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Join Date"}),e.jsx("input",{type:"date",value:D.date_of_joining,onChange:ce=>M({...D,date_of_joining:ce.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Employment Type"}),e.jsx(qj,{value:D.employment_type,onChange:ce=>M({...D,employment_type:ce}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Gender"}),e.jsx(Ap,{value:D.gender,onChange:ce=>M({...D,gender:ce}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Salary ()"}),e.jsx("input",{type:"number",value:D.salary,onChange:ce=>M({...D,salary:parseFloat(ce.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono"})]}),!L&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Assigned Shop"}),e.jsx(Yd,{value:D.shop_id,onChange:ce=>M({...D,shop_id:ce}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"percent"}),"Salary Component Configuration"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"HRA %"}),e.jsx("input",{type:"number",value:D.hra_percent,onChange:ce=>M({...D,hra_percent:parseFloat(ce.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Allowances %"}),e.jsx("input",{type:"number",value:D.allowances_percent,onChange:ce=>M({...D,allowances_percent:parseFloat(ce.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"PF %"}),e.jsx("input",{type:"number",value:D.pf_percent,onChange:ce=>M({...D,pf_percent:parseFloat(ce.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"ESI %"}),e.jsx("input",{type:"number",value:D.esi_percent,onChange:ce=>M({...D,esi_percent:parseFloat(ce.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100",disabled:!D.esi_applicable})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.esi_applicable,onChange:ce=>M({...D,esi_applicable:ce.target.checked}),className:"rounded border-slate-300"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"ESI Applicable (only for salary < 21,000)"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Address"}),e.jsx("textarea",{value:D.address,onChange:ce=>M({...D,address:ce.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",rows:2})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx(re,{variant:"secondary",onClick:()=>A(!1),type:"button",children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",disabled:se,loading:se,children:T?"Update Employee":"Add Employee"})]})]})]})}),U&&te&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400 text-2xl",children:"warning"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Delete Employee"}),e.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mt-0.5",children:"info"}),e.jsxs("span",{children:["Are you sure you want to delete ",e.jsx("strong",{children:te.name}),'? The employee status will be set to "terminated".']})]})}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Employee Code:"}),e.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-white",children:te.employee_code||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Department:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:te.department})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Phone:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:te.phone})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx(re,{variant:"secondary",onClick:()=>{W(!1),me(null)},disabled:R,children:"Cancel"}),e.jsx(re,{variant:"primary",onClick:le,disabled:R,loading:R,className:"!bg-red-600 hover:!bg-red-700",children:"Delete Employee"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400 text-2xl",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Employee Created!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"User account credentials generated"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mt-0.5",children:"info"}),e.jsx("span",{children:"Please save these credentials securely and share them with the employee. They won't be shown again."})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:H.email,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 font-mono text-sm"}),e.jsx(re,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(H.email),className:"!p-2",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Temporary Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:H.temporary_password,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 font-mono text-sm font-bold"}),e.jsx(re,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(H.temporary_password),className:"!p-2",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:e.jsx(re,{variant:"primary",onClick:()=>Z(null),children:"Got It"})})]})})]})}function eN(){const[n,r]=m.useState(new Date().toISOString().split("T")[0]),[o,i]=m.useState({}),[u,x]=m.useState(null),[h,N]=m.useState(!0),[y,g]=m.useState(!1),[p,f]=m.useState({type:"",text:""}),[w,_]=m.useState("");m.useEffect(()=>{k()},[n]);const k=async()=>{try{N(!0);const M=(await ga.getDailyAttendance(n)).data;x(M);const se={};M.attendance.forEach(Q=>{const O=Q.check_in?Q.check_in.split("T")[1]?.substr(0,5):"09:00",P=Q.check_out?Q.check_out.split("T")[1]?.substr(0,5):"18:00";se[Q.employee_id]={employee_id:Q.employee_id,date:n,status:Q.status||"present",check_in:O,check_out:P}}),i(se)}catch(D){console.error("Error loading attendance:",D),f({type:"error",text:"Failed to load attendance records"})}finally{N(!1)}},S=(D,M,se)=>{i(Q=>({...Q,[D]:{...Q[D],[M]:se}}))},b=async()=>{g(!0);try{const D=Object.values(o);for(const M of D){const se={employee_id:M.employee_id,date:M.date,status:M.status,check_in:M.check_in?`${M.date}T${M.check_in}:00`:void 0,check_out:M.check_out?`${M.date}T${M.check_out}:00`:void 0};await ga.markAttendance(se)}f({type:"success",text:"Attendance saved as draft!"}),await k()}catch(D){let M="Failed to save attendance";if(D.response?.data?.detail){const se=D.response.data.detail;Array.isArray(se)?M=se.map(Q=>`${Q.loc?.join(".")||"Unknown field"}: ${Q.msg}`).join(", "):typeof se=="string"&&(M=se)}f({type:"error",text:M})}finally{g(!1)}},A=D=>{const M={not_marked:{icon:"",label:"Not Marked",color:"#f59e0b"},draft:{icon:"",label:"Draft",color:"#3b82f6"},submitted:{icon:"",label:"Submitted",color:"#10b981"},locked:{icon:"",label:"Locked",color:"#ef4444"}},{icon:se,label:Q,color:O}=M[D]||M.not_marked;return e.jsxs("div",{style:{display:"inline-block",padding:"6px 16px",borderRadius:"20px",background:O+"20",color:O,fontWeight:"bold",fontSize:"14px"},children:[se," ",Q]})},T=D=>{switch(D){case"present":return"#10b981";case"absent":return"#ef4444";case"half_day":return"#f59e0b";case"leave":return"#8b5cf6";default:return"#6b7280"}},q={present:Object.values(o).filter(D=>D.status==="present").length,absent:Object.values(o).filter(D=>D.status==="absent").length,half_day:Object.values(o).filter(D=>D.status==="half_day").length,leave:Object.values(o).filter(D=>D.status==="leave").length};return e.jsxs("div",{className:"attendance-marker",children:[e.jsxs("div",{className:"header",children:[e.jsx("h2",{children:"Attendance Marker"}),e.jsxs("div",{className:"header-controls",children:[e.jsx("input",{type:"date",value:n,onChange:D=>r(D.target.value),className:"date-picker"}),u&&A(u.date_status)]})]}),p.text&&e.jsx("div",{className:`message ${p.type}`,children:p.text}),e.jsx("div",{className:"controls-card",children:e.jsxs("div",{className:"stats-row",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#10b981"},children:q.present}),e.jsx("div",{className:"stat-label",children:"Present"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#ef4444"},children:q.absent}),e.jsx("div",{className:"stat-label",children:"Absent"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#f59e0b"},children:q.half_day}),e.jsx("div",{className:"stat-label",children:"Half Day"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#8b5cf6"},children:q.leave}),e.jsx("div",{className:"stat-label",children:"Leave"})]})]})}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(Gd,{value:w,onChange:_,placeholder:"Search employees by name or code..."})}),h?e.jsx("div",{className:"loading",children:"Loading employees..."}):e.jsxs("div",{className:"attendance-table",children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"})]})}),e.jsx("tbody",{children:u?.attendance.filter(D=>{if(!w)return!0;const M=w.toLowerCase();return D.employee_name.toLowerCase().includes(M)||D.employee_code.toLowerCase().includes(M)||D.department.toLowerCase().includes(M)}).map(D=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"employee-info",children:[e.jsx("div",{className:"employee-avatar",children:D.employee_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"employee-name",children:D.employee_name}),e.jsx("div",{className:"employee-code",children:D.employee_code})]})]})}),e.jsx("td",{children:D.employee_role}),e.jsx("td",{children:D.department}),e.jsx("td",{children:e.jsxs("select",{className:"status-select",value:o[D.employee_id]?.status||"present",onChange:M=>S(D.employee_id,"status",M.target.value),disabled:!1,style:{borderColor:T(o[D.employee_id]?.status||"present")},children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"half_day",children:"Half Day"}),e.jsx("option",{value:"leave",children:"Leave"})]})}),e.jsx("td",{children:e.jsx("input",{type:"time",className:"time-input",value:o[D.employee_id]?.check_in||"09:00",onChange:M=>S(D.employee_id,"check_in",M.target.value),disabled:o[D.employee_id]?.status==="absent"||o[D.employee_id]?.status==="leave"})}),e.jsx("td",{children:e.jsx("input",{type:"time",className:"time-input",value:o[D.employee_id]?.check_out||"18:00",onChange:M=>S(D.employee_id,"check_out",M.target.value),disabled:o[D.employee_id]?.status==="absent"||o[D.employee_id]?.status==="leave"})})]},D.employee_id))})]}),e.jsx("div",{className:"table-footer",children:e.jsx("button",{className:"btn-submit",onClick:b,disabled:y,children:y?"Saving...":"Save Attendance"})})]})]})}function tN(){const[n,r]=m.useState(new Date().toISOString().split("T")[0]),[o,i]=m.useState([]),[u,x]=m.useState(!0),[h,N]=m.useState("");m.useEffect(()=>{y()},[n]);const y=async()=>{try{x(!0);const f=(await ga.getDailyAttendance(n)).data.attendance.filter(w=>w.is_marked);i(f)}catch(p){console.error("Error loading attendance:",p)}finally{x(!1)}},g={present:o.filter(p=>p.status==="present").length,absent:o.filter(p=>p.status==="absent").length,half_day:o.filter(p=>p.status==="half_day").length,leave:o.filter(p=>p.status==="leave").length};return e.jsxs("div",{className:"attendance-marker",style:{padding:"24px"},children:[e.jsxs("div",{className:"header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{children:"Attendance Report"}),e.jsx("input",{type:"date",value:n,onChange:p=>r(p.target.value),className:"date-picker"})]}),e.jsxs("div",{className:"summary-cards",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"#d4edda",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#155724"},children:g.present}),e.jsx("div",{style:{color:"#155724",marginTop:"8px"},children:"Present"})]}),e.jsxs("div",{style:{background:"#f8d7da",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#721c24"},children:g.absent}),e.jsx("div",{style:{color:"#721c24",marginTop:"8px"},children:"Absent"})]}),e.jsxs("div",{style:{background:"#fff3cd",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#856404"},children:g.half_day}),e.jsx("div",{style:{color:"#856404",marginTop:"8px"},children:"Half Day"})]}),e.jsxs("div",{style:{background:"#e2e3e5",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#383d41"},children:g.leave}),e.jsx("div",{style:{color:"#383d41",marginTop:"8px"},children:"Leave"})]})]}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(Gd,{value:h,onChange:N,placeholder:"Search by name, code, or department..."})}),u?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsx("div",{className:"attendance-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"}),e.jsx("th",{children:"Working Hours"})]})}),e.jsx("tbody",{children:o.filter(p=>{if(!h)return!0;const f=h.toLowerCase();return p.employee_name.toLowerCase().includes(f)||p.employee_code.toLowerCase().includes(f)||p.department.toLowerCase().includes(f)}).length>0?o.filter(p=>{if(!h)return!0;const f=h.toLowerCase();return p.employee_name.toLowerCase().includes(f)||p.employee_code.toLowerCase().includes(f)||p.department.toLowerCase().includes(f)}).map(p=>e.jsxs("tr",{children:[e.jsx("td",{children:p.employee_name}),e.jsx("td",{children:p.employee_code}),e.jsx("td",{children:p.employee_role}),e.jsx("td",{children:p.department}),e.jsx("td",{children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",background:p.status==="present"?"#d4edda":p.status==="absent"?"#f8d7da":p.status==="half_day"?"#fff3cd":"#e2e3e5",color:p.status==="present"?"#155724":p.status==="absent"?"#721c24":p.status==="half_day"?"#856404":"#383d41"},children:p.status?.replace("_"," ").toUpperCase()})}),e.jsx("td",{children:p.check_in?new Date(p.check_in).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{children:p.check_out?new Date(p.check_out).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{children:p.working_hours?p.working_hours.toFixed(1)+"h":"-"})]},p.employee_id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:8,style:{textAlign:"center",padding:"40px",color:"#888"},children:["No attendance records found for ",n]})})})]})})]})}const Vn={HRA_PERCENTAGE:.4,ALLOWANCE_PERCENTAGE:.2,PF_PERCENTAGE:.12,ESI_PERCENTAGE:.0075,ESI_LIMIT:21e3};function aN(){const[n,r]=m.useState([]),[o,i]=m.useState([]),[u,x]=m.useState(new Date().getMonth()+1),[h,N]=m.useState(new Date().getFullYear()),[y,g]=m.useState(!0),[p,f]=m.useState(!1),[w,_]=m.useState(null),[k,S]=m.useState(!1),[b,A]=m.useState(!1),[T,q]=m.useState(""),[D,M]=m.useState("all"),[se,Q]=m.useState(1),[O,P]=m.useState(new Set),[H,Z]=m.useState(10);m.useEffect(()=>{U()},[]),m.useEffect(()=>{n.length>0&&W()},[u,h,n]);const U=async()=>{try{const $=await ga.list({size:500}),ye=$.data.items||$.data||[];r(ye.filter(ze=>ze.status==="active"))}catch($){console.error("Error loading employees:",$),Ze.error("Failed to load employees")}finally{g(!1)}},W=async()=>{try{const $=await ga.getSalaryRecords({month:u,year:h});i($.data||[])}catch($){console.error("Error loading salary records:",$),i([])}},te=($,ye)=>{const ze=ye?.basic_salary||$.basic_salary||0,Tt=ye?.hra||ze*Vn.HRA_PERCENTAGE,Ta=ye?.allowances||ze*Vn.ALLOWANCE_PERCENTAGE,Wa=ze+Tt+Ta,es=ye?.pf_deduction||ze*Vn.PF_PERCENTAGE,ts=ye?.esi_deduction||(ze<Vn.ESI_LIMIT?ze*Vn.ESI_PERCENTAGE:0),Da=ye?.tax_deduction||0,as=es+ts+Da,Zl=Wa-as;return{employee:$,record:ye||null,basic:ze,hra:Tt,allowances:Ta,grossEarnings:Wa,pf:es,esi:ts,tax:Da,totalDeductions:as,netSalary:Zl}},me=()=>{const $=new Map(o.map(ye=>[ye.employee_id,ye]));return n.map(ye=>te(ye,$.get(ye.id)))},R=()=>{if(O.size===0){Ze.error("Please select at least one employee to process salary");return}A(!0)},ee=async()=>{A(!1),f(!0);try{await ga.processSalary({month:u,year:h,employee_ids:Array.from(O)}),Ze.success(`Salary processed for ${O.size} employee(s)`),P(new Set),W()}catch($){Ze.error($.response?.data?.detail||"Failed to process salary")}finally{f(!1)}},I=$=>{P(ye=>{const ze=new Set(ye);return ze.has($)?ze.delete($):ze.add($),ze})},xe=()=>{O.size===pe.length?P(new Set):P(new Set(pe.map($=>$.employee.id)))},L=$=>{_($),S(!0)},E=$=>new Date(2e3,$-1).toLocaleString("default",{month:"long"}),j=$=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format($),B=$=>new Date($).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),F=me(),pe=F.filter($=>{const ye=$.employee.name.toLowerCase().includes(T.toLowerCase())||$.employee.employee_code.toLowerCase().includes(T.toLowerCase()),ze=D==="all"||D==="paid"&&$.record?.is_paid||D==="pending"&&!$.record?.is_paid;return ye&&ze}),le=pe.reduce(($,ye)=>$+ye.grossEarnings,0),be=pe.reduce(($,ye)=>$+ye.totalDeductions,0),Le=pe.reduce(($,ye)=>$+ye.netSalary,0),ie=pe.filter($=>$.record?.is_paid).length,ce=pe.filter($=>!$.record?.is_paid).length,Se=pe.slice((se-1)*H,se*H),ke=[{header:e.jsx("input",{type:"checkbox",checked:O.size>0&&O.size===pe.length,onChange:xe,className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),key:"select",width:"50px",render:$=>e.jsx("input",{type:"checkbox",checked:O.has($.employee.id),onChange:()=>I($.employee.id),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"})},{header:"Employee",key:"employee",render:$=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm",children:$.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:$.employee.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[$.employee.employee_code,"  ",$.employee.designation]})]})]})},{header:"Basic",key:"basic",align:"right",render:$=>e.jsx("span",{className:"font-mono text-sm text-slate-900 dark:text-white",children:j($.basic)})},{header:"HRA",key:"hra",align:"right",render:$=>e.jsx("span",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-400",children:j($.hra)})},{header:"Allowances",key:"allowances",align:"right",render:$=>e.jsx("span",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-400",children:j($.allowances)})},{header:"Gross",key:"grossEarnings",align:"right",render:$=>e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900 dark:text-white",children:j($.grossEarnings)})},{header:"Deductions",key:"totalDeductions",align:"right",render:$=>e.jsxs("span",{className:"font-mono text-sm text-red-600 dark:text-red-400",children:["-",j($.totalDeductions)]})},{header:"Net Salary",key:"netSalary",align:"right",render:$=>e.jsx("span",{className:"font-mono text-base font-bold text-blue-600 dark:text-blue-400",children:j($.netSalary)})},{header:"Status",key:"status",align:"center",render:$=>$.record?.is_paid?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Paid"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Pending"]})},{header:"Actions",key:"actions",align:"center",render:$=>e.jsx(re,{variant:"ghost",onClick:()=>L($),className:"!p-1.5 h-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"description"})})}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Salary Management",subtitle:"Process and manage employee salaries",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[O.size>0&&e.jsxs("span",{className:"px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg",children:[O.size," selected"]}),e.jsx(re,{variant:"primary",onClick:R,loading:p,disabled:y||O.size===0,icon:p?"hourglass_empty":"calculate",className:"bg-gradient-to-r from-blue-600 to-indigo-600",children:p?"Processing...":`Process Salary${O.size>0?` (${O.size})`:""}`})]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Employees",value:pe.length,icon:"group",isActive:!0}),e.jsx(je,{title:"Gross Payroll",value:j(le),icon:"trending_up",trend:"up",valueClassName:"text-emerald-600 dark:text-emerald-400"}),e.jsx(je,{title:"Total Deductions",value:j(be),icon:"trending_down",trend:"down",valueClassName:"text-red-600 dark:text-red-400"}),e.jsx(je,{title:"Net Payable",value:j(Le),icon:"payments",isActive:!0,valueClassName:"text-blue-600 dark:text-blue-400"})]}),e.jsx(ge.DataTable,{columns:ke,data:Se,loading:y,emptyMessage:"No employees found",pagination:{currentPage:se,totalPages:Math.ceil(pe.length/H),onPageChange:Q,totalItems:pe.length,pageSize:H,onPageSizeChange:$=>{Z($),Q(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Salary List",count:pe.length,searchProps:{value:T,onChange:$=>{q($),Q(1)},placeholder:"Search employees..."},actions:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-xl",children:"calendar_month"}),e.jsx("select",{value:u,onChange:$=>x(Number($.target.value)),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:Array.from({length:12},($,ye)=>e.jsx("option",{value:ye+1,children:E(ye+1)},ye+1))}),e.jsx("select",{value:h,onChange:$=>N(Number($.target.value)),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:Array.from({length:5},($,ye)=>{const ze=new Date().getFullYear()-ye;return e.jsx("option",{value:ze,children:ze},ze)})})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>M("all"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${D==="all"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["All (",F.length,")"]}),e.jsxs("button",{onClick:()=>M("paid"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${D==="paid"?"bg-white dark:bg-slate-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["Paid (",ie,")"]}),e.jsxs("button",{onClick:()=>M("pending"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${D==="pending"?"bg-white dark:bg-slate-600 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["Pending (",ce,")"]})]})]}),embedded:!0})}),k&&w&&e.jsx(Lt,{isOpen:k,onClose:()=>S(!1),title:"Salary Slip",maxWidth:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center pb-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-1",children:"Salary Slip"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[E(u)," ",h]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Employee Name"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Employee Code"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.employee_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Designation"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.designation})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Department"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.department})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-emerald-600 dark:text-emerald-400",children:"add_circle"}),"Earnings"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Basic Salary"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:j(w.basic)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"HRA (40%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:j(w.hra)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Allowances (20%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:j(w.allowances)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Gross Earnings"}),e.jsx("span",{className:"font-mono font-bold text-emerald-600 dark:text-emerald-400",children:j(w.grossEarnings)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400",children:"remove_circle"}),"Deductions"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"PF (12%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:j(w.pf)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"ESI (0.75%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:j(w.esi)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tax"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:j(w.tax)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Total Deductions"}),e.jsx("span",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:j(w.totalDeductions)})]})]})]})]}),e.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Net Salary"}),e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:j(w.netSalary)})]})}),w.record&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"info"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Payment Status:"})]}),w.record.is_paid?e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Paid"]}),w.record.paid_at&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["on ",B(w.record.paid_at)]})]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Pending"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"print"}),"Print Slip"]}),e.jsx("button",{onClick:()=>S(!1),className:"px-6 py-2.5 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 font-medium rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Close"})]})]})}),e.jsx(Lt,{isOpen:b,onClose:()=>A(!1),title:"Confirm Salary Processing",maxWidth:"sm",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg",children:[e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Attention Needed"}),e.jsx("p",{className:"text-sm opacity-90",children:"This action will generate salary records."})]})]}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-300 mb-6 text-center",children:["Are you sure you want to process salary for ",e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:O.size})," selected employee(s) for ",e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[E(u)," ",h]}),"?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(re,{variant:"secondary",onClick:()=>A(!1),className:"flex-1",children:"Cancel"}),e.jsx(re,{variant:"primary",onClick:ee,loading:p,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600",children:"Confirm Process"})]})]})})]})}function E0(){const[n,r]=m.useState([]),[o,i]=m.useState(!0),[u,x]=m.useState(""),[h,N]=m.useState(""),[y,g]=m.useState(1),[p,f]=m.useState(0),[w,_]=m.useState(10);m.useEffect(()=>{k()},[y,w,h,u]);const k=async()=>{try{i(!0);const T={page:y,size:w};h&&(T.search=h),u==="cancelled"?T.status="cancelled":(u==="completed"||u==="pending")&&(T.payment_status=u);const q=await Is.list(T);r(q.data?.items||q.data?.data||[]),f(q.data?.total||0)}catch(T){console.error(T),r([])}finally{i(!1)}},S=T=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(T),b={paid:n.filter(T=>T.payment_status==="completed").length,pending:n.filter(T=>T.payment_status==="pending").length,cancelled:n.filter(T=>T.payment_status==="cancelled").length},A=[{header:"Invoice #",key:"invoice_number",render:T=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"receipt_long"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:T.invoice_number}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(T.created_at).toLocaleDateString()})]})]})},{header:"Customer",key:"customer_name",render:T=>e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:T.customer_name||"Walk-in Customer"})},{header:"Shop",key:"shop_name",render:T=>T.shop_name||"N/A",className:"hidden md:table-cell"},{header:"Amount",key:"total_amount",align:"right",render:T=>e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:S(T.total_amount)})},{header:"Status",key:"payment_status",align:"center",render:T=>{const q=T.payment_status==="completed"?"success":T.payment_status==="cancelled"?"error":"warning";return e.jsx(Ve,{variant:q,className:"capitalize",children:T.payment_status==="completed"?"paid":T.payment_status})}},{header:"Actions",key:"id",align:"right",render:()=>e.jsx(re,{variant:"ghost",className:"!p-1.5 h-8 w-8 text-slate-500",title:"View Invoice",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Invoices",subtitle:"View and manage sales invoices"}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Invoices",value:p,icon:"receipt",onClick:()=>x(""),isActive:u===""}),e.jsx(je,{title:"Paid",value:b.paid,icon:"check_circle",onClick:()=>x("completed"),isActive:u==="completed",trend:"up"}),e.jsx(je,{title:"Pending",value:b.pending,icon:"pending",onClick:()=>x("pending"),isActive:u==="pending",trend:"neutral"}),e.jsx(je,{title:"Cancelled",value:b.cancelled,icon:"cancel",onClick:()=>x("cancelled"),isActive:u==="cancelled",trend:"down"})]}),e.jsx(ge.DataTable,{columns:A,data:n,loading:o,emptyMessage:"No invoices found.",pagination:{currentPage:y,totalPages:Math.ceil(p/w),onPageChange:g,totalItems:p,pageSize:w,onPageSizeChange:T=>{_(T),g(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Invoice List",count:p,searchProps:{value:h,onChange:T=>{N(T),g(1)},placeholder:"Search invoices..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:u,onChange:T=>{x(T.target.value),g(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"completed",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),embedded:!0})})]})}function A0(){const n=Fe(),{activeEntity:r}=Aa(),[o,i]=m.useState([]),[u,x]=m.useState(!0),[h,N]=m.useState(""),[y,g]=m.useState(""),[p,f]=m.useState(1),[w,_]=m.useState(0),[k,S]=m.useState(10),[b,A]=m.useState(null);m.useEffect(()=>{T()},[p,k,y,h]);const T=async()=>{try{x(!0);const P={page:p,size:k,status:h||void 0};y&&(P.search=y);const H=await Ws.list(P);i(H.data?.items||[]),_(H.data?.total||0)}catch(P){console.error(P),i([])}finally{x(!1)}},q=async(P,H)=>{try{A(P),await Ws.updateStatus(P,H),T()}catch(Z){console.error(Z),alert("Failed to update status")}finally{A(null)}},D={pending:o.filter(P=>P.status==="pending").length,inTransit:o.filter(P=>P.status==="in_transit").length,delivered:o.filter(P=>P.status==="delivered").length},M=[{header:"Dispatch #",key:"dispatch_number",render:P=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${P.status==="delivered"?"bg-green-100 text-green-600":P.status==="in_transit"?"bg-blue-100 text-blue-600":"bg-amber-100 text-amber-600"}`,children:e.jsx("span",{className:"material-symbols-outlined",children:P.status==="delivered"?"check_circle":P.status==="in_transit"?"local_shipping":"schedule"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:P.dispatch_number||P.id.slice(0,8)}),e.jsx("div",{className:"text-xs text-slate-500",children:P.dispatch_date?new Date(P.dispatch_date).toLocaleDateString():"Pending Date"})]})]})},{header:"From Warehouse",key:"warehouse_name",render:P=>P.warehouse_name||"N/A"},{header:"To Shop",key:"shop_name",render:P=>P.shop_name||"N/A"},{header:"Items",key:"total_items",render:P=>e.jsx("span",{className:"font-mono",children:P.total_items}),align:"center"},{header:"Status",key:"status",render:P=>{const H=P.status==="delivered"?"success":P.status==="cancelled"?"error":P.status==="in_transit"?"primary":"warning";return e.jsx(Ve,{variant:H,children:P.status.replace("_"," ")})},align:"center"},{header:"Actions",key:"id",align:"right",render:P=>e.jsxs("div",{className:"flex justify-end gap-2",children:[P.status==="pending"&&e.jsx(re,{variant:"primary",onClick:()=>q(P.id,"in_transit"),disabled:b===P.id,className:"!py-1 !px-2 !text-xs",children:"Start"}),r?.type==="shop"&&["pending","created","in_transit"].includes(P.status?.toLowerCase())&&e.jsx(re,{variant:"success",onClick:()=>n("/shops/stock",{state:{dispatchId:P.id}}),className:"!py-1 !px-2 !text-xs",children:"Receive Stock"}),e.jsx(re,{variant:"ghost",onClick:()=>n(`/dispatches/${P.id}`),className:"!p-1.5 h-8 w-8 text-slate-500",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})]})}],se=r?.type==="shop",Q=se?"Incoming Shipments":"Dispatch History",O=se?"View incoming stock shipments from warehouses":"Track warehouse to shop deliveries and shipments";return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:Q,subtitle:O,actions:!se&&e.jsxs(re,{variant:"primary",onClick:()=>n("/dispatches/create"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"New Dispatch"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:se?"Total Shipments":"Total Dispatches",value:w,icon:"local_shipping",onClick:()=>N(""),isActive:h===""}),e.jsx(je,{title:"Pending",value:D.pending,icon:"schedule",onClick:()=>N("pending"),isActive:h==="pending",trend:"neutral"}),e.jsx(je,{title:"In Transit",value:D.inTransit,icon:"near_me",onClick:()=>N("in_transit"),isActive:h==="in_transit",trend:"up"}),e.jsx(je,{title:"Delivered",value:D.delivered,icon:"check_circle",onClick:()=>N("delivered"),isActive:h==="delivered",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:M,data:o,loading:u,emptyMessage:se?"No incoming shipments found.":"No dispatches found.",pagination:{currentPage:p,totalPages:Math.ceil(w/k),onPageChange:f,totalItems:w,pageSize:k,onPageSizeChange:P=>{S(P),f(1)}},headerSlot:e.jsx(ge.ListControls,{title:se?"Incoming Shipments":"Dispatch List",count:w,searchProps:{value:y,onChange:P=>{g(P),f(1)},placeholder:"Search dispatches..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:h,onChange:P=>{N(P.target.value),f(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),embedded:!0})})]})}function sN(){const n=Fe(),{user:r}=We(),[o,i]=m.useState(!1),[u,x]=m.useState(""),[h,N]=m.useState(""),[y,g]=m.useState(""),[p,f]=m.useState(""),[w,_]=m.useState([]),[k,S]=m.useState([]),[b,A]=m.useState([]),[T,q]=m.useState([]);m.useEffect(()=>{Q(),O(),P()},[]);const[D]=Ty(),M=D.get("pr_id");m.useEffect(()=>{M&&se(M)},[M]);const se=async R=>{try{const ee=await Zs.get(R),I=ee.data||ee;N(I.warehouse_id),g(I.shop_id),f(`Fulfilled from PR-${I.request_number}`);const xe=[];for(const L of I.items||[]){let E=[];if(L.medicine_id)try{const j=await wt.getBatches(L.medicine_id);E=j.data?.batches||j.data||[]}catch(j){console.error(`Failed to fetch batches for ${L.medicine_id}`,j)}xe.push({medicine_id:L.medicine_id,medicine_name:L.medicine_name,medicine_search:L.medicine_name,batch_id:"",batch_number:"",quantity:L.quantity_approved||L.quantity_requested||0,available_batches:E})}_(xe)}catch(ee){console.error("Failed to load PR",ee),x("Failed to load purchase request")}};m.useEffect(()=>{!h&&r?.role==="warehouse_admin"&&r?.warehouse_id&&N(r.warehouse_id)},[r,h]);const Q=async()=>{try{const R=await At.list({size:500});S(R.data?.items||R.data||[])}catch(R){console.error("Failed to fetch warehouses",R)}},O=async()=>{try{const R=await vt.list({size:500});A(R.data?.items||R.data||[])}catch(R){console.error("Failed to fetch shops",R)}},P=async()=>{try{const R=await wt.list({size:500});q(R.data?.items||R.data||[])}catch(R){console.error("Failed to fetch medicines",R)}},H=()=>{_([...w,{medicine_id:"",batch_id:"",quantity:1,available_batches:[]}])},Z=R=>{_(w.filter((ee,I)=>I!==R))},U=async(R,ee,I)=>{const xe=[...w];if(ee==="medicine_id"){if(xe[R]={...xe[R],[ee]:I,batch_id:"",batch_number:"",available_stock:0,available_batches:[]},I){const L=T.find(E=>E.id===I);xe[R].medicine_name=L?.name,xe[R].brand=L?.brand;try{const E=await wt.getBatches(I),j=E.data?.batches||E.data||[];xe[R].available_batches=j.filter(B=>(B.quantity||0)>0)}catch(E){console.error("Failed to fetch batches",E)}}}else if(ee==="batch_id"){const L=xe[R].available_batches?.find(E=>E.id===I);xe[R].batch_id=I,xe[R].batch_number=L?.batch_number||"",xe[R].available_stock=L?.quantity||0,xe[R].quantity>(L?.quantity||0)&&(xe[R].quantity=L?.quantity||0)}else xe[R]={...xe[R],[ee]:I};_(xe)},W=()=>{if(!h)return x("Please select a warehouse"),!1;if(!y)return x("Please select a shop"),!1;if(w.length===0)return x("Please add at least one item"),!1;for(let R=0;R<w.length;R++){const ee=w[R];if(!ee.medicine_id||!ee.batch_id)return x(`Item ${R+1}: Please select medicine and batch`),!1;if(ee.quantity<=0)return x(`Item ${R+1}: Quantity must be greater than 0`),!1;if(ee.available_stock!==void 0&&ee.quantity>ee.available_stock)return x(`Item ${R+1}: Quantity (${ee.quantity}) exceeds available stock (${ee.available_stock})`),!1}return!0},te=async R=>{if(R.preventDefault(),x(""),!!W()){i(!0);try{const ee={warehouse_id:h,shop_id:y,notes:p||void 0,purchase_request_id:M||void 0,items:w.map(I=>({medicine_id:I.medicine_id,batch_id:I.batch_id,quantity:I.quantity}))};await Ws.create(ee),n("/dispatches")}catch(ee){console.error("Failed to create dispatch:",ee),x(ee.response?.data?.detail||"Failed to create dispatch")}finally{i(!1)}}},me=r?.role==="warehouse_admin";return e.jsx(Zt,{title:"Create New Dispatch",subtitle:"Create a dispatch from warehouse to shop",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),u]}),e.jsxs("form",{onSubmit:te,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"From Warehouse *"}),e.jsxs("select",{value:h,onChange:R=>N(R.target.value),disabled:me,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 disabled:opacity-50",required:!0,children:[e.jsx("option",{value:"",children:"Select Warehouse"}),k.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"To Shop *"}),e.jsxs("select",{value:y,onChange:R=>g(R.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Shop"}),b.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Dispatch Items"}),e.jsxs(re,{variant:"secondary",onClick:H,type:"button",disabled:!h,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-1",children:"add"}),"Add Item"]})]}),w.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:'No items added. Click "Add Item" to start.'}):e.jsx("div",{className:"space-y-3",children:w.map((R,ee)=>{const I=R.available_stock||0,xe=R.quantity||0;let L="bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700";return R.batch_id&&xe>I?L="bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":R.batch_id&&xe>0&&xe>=I*.8&&(L="bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"),e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${L}`,children:[e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Medicine"}),e.jsx(Fi,{value:R.medicine_id,onChange:E=>U(ee,"medicine_id",E),options:T.map(E=>({value:E.id,label:E.name})),placeholder:"Type medicine name..."})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Brand"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-300 h-[38px] flex items-center",children:R.brand||"-"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Batch"}),e.jsxs("select",{value:R.batch_id,onChange:E=>U(ee,"batch_id",E.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 h-[38px]",required:!0,disabled:!R.medicine_id,children:[e.jsx("option",{value:"",children:"Select Batch"}),(R.available_batches||[]).map(E=>e.jsxs("option",{value:E.id,children:[E.batch_number," (Exp: ",new Date(E.expiry_date).toLocaleDateString(),") - Qty: ",E.quantity]},E.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",value:R.quantity,onChange:E=>U(ee,"quantity",parseInt(E.target.value)||0),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 h-[38px]",placeholder:"Qty",min:"1",required:!0}),R.available_stock!==void 0&&e.jsxs("div",{className:`text-xs mt-1 ${xe>I?"text-red-600 font-bold":"text-slate-500"}`,children:["Max: ",R.available_stock,xe>I&&" (Insufficient Stock!)"]})]})]}),e.jsx(re,{variant:"ghost",onClick:()=>Z(ee),type:"button",className:"!p-1.5 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},ee)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:p,onChange:R=>f(R.target.value),rows:3,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",placeholder:"Add any special instructions or notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",onClick:()=>n("/dispatches"),type:"button",disabled:o,children:"Cancel"}),e.jsxs(re,{variant:"primary",type:"submit",disabled:o||w.length===0,loading:o,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"local_shipping"}),"Create Dispatch"]})]})]})]})})})}function lN(){const{id:n}=Wn(),r=Fe(),{activeEntity:o}=Aa(),[i,u]=m.useState(null),[x,h]=m.useState(!0);m.useEffect(()=>{n&&N()},[n]);const N=async()=>{try{h(!0);const g=await Ws.get(n);u(g.data)}catch(g){console.error(g)}finally{h(!1)}};if(x)return e.jsx("div",{className:"p-8",children:"Loading..."});if(!i)return e.jsx("div",{className:"p-8",children:"Dispatch not found"});const y=o?.type==="shop"&&["pending","created","in_transit"].includes(i.status.toLowerCase());return e.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Dispatch #",i.dispatch_number||i.id.slice(0,8)]}),e.jsxs("p",{className:"text-slate-500",children:["From ",i.warehouse_name," to ",i.shop_name]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{variant:i.status==="delivered"?"success":"primary",children:i.status.replace("_"," ")}),y&&e.jsx(re,{variant:"success",onClick:()=>r("/shops/stock",{state:{dispatchId:i.id}}),children:"Receive Stock"}),e.jsx(re,{variant:"ghost",onClick:()=>r(-1),children:"Back"})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase",children:"Quantity"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:i.items?.map((g,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-slate-900 dark:text-white font-medium",children:g.medicine_name}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:g.batch_number}),e.jsx("td",{className:"px-6 py-4 text-right font-mono text-slate-900 dark:text-white",children:g.quantity})]},p))})]})})]})}function nN(){const n=Fe(),{isLoading:r}=mt(),{user:o}=We(),i=o?.role,[u,x]=m.useState([]),[h,N]=m.useState(!0),[y,g]=m.useState(""),[p,f]=m.useState(""),[w,_]=m.useState(1),[k,S]=m.useState(0),[b,A]=m.useState(10),[T,q]=m.useState(!1),[D,M]=m.useState([]),[se,Q]=m.useState(!1),[O,P]=m.useState({shop_id:"",warehouse_id:"",priority:"medium",items:[{medicine_id:"",quantity:1}]});m.useEffect(()=>{H()},[w,b,p,y]),m.useEffect(()=>{T&&D.length===0&&(console.log("[PurchaseRequests] Fetching medicines..."),wt.list({size:1e3}).then(F=>{console.log("[PurchaseRequests] Medicines API response:",F.data);const pe=F.data?.items||(Array.isArray(F.data)?F.data:[]);console.log("[PurchaseRequests] Medicines loaded:",pe.length),M(pe)}).catch(F=>{console.error("[PurchaseRequests] Failed to load medicines:",F)}))},[T]);const H=async()=>{try{N(!0);const F={page:w,size:b,status:y||void 0};p&&(F.search=p);const pe=await Zs.list(F);x(pe.data?.items||[]),S(pe.data?.total||0)}catch(F){console.error(F),x([])}finally{N(!1)}},Z=async F=>{try{await Zs.approve(F,{}),H()}catch(pe){console.error(pe),alert("Failed to approve")}},U=async F=>{try{await Zs.reject(F),H()}catch(pe){console.error(pe),alert("Failed to reject")}},{activeEntity:W}=Aa(),te=W?.type==="shop";m.useEffect(()=>{T&&te&&W?.id&&P(F=>({...F,shop_id:W.id}))},[T,te,W]);const me=async()=>{if(!O.shop_id||!O.warehouse_id||O.items.length===0){alert("Please fill all required fields");return}try{Q(!0),await Zs.create({shop_id:O.shop_id,warehouse_id:O.warehouse_id,urgency:O.priority,items:O.items.filter(F=>F.medicine_id&&F.quantity>0).map(F=>({medicine_id:F.medicine_id,quantity_requested:F.quantity}))}),q(!1),P({shop_id:"",warehouse_id:"",priority:"medium",items:[{medicine_id:"",quantity:1}]}),H()}catch(F){console.error(F),alert(F.response?.data?.detail||"Failed to create request")}finally{Q(!1)}},R=()=>{P(F=>({...F,items:[...F.items,{medicine_id:"",quantity:1}]}))},ee=F=>{P(pe=>({...pe,items:pe.items.filter((le,be)=>be!==F)}))},I=(F,pe,le)=>{P(be=>({...be,items:be.items.map((Le,ie)=>ie===F?{...Le,[pe]:le}:Le)}))},xe={pending:u.filter(F=>F.status==="pending").length,approved:u.filter(F=>F.status==="approved").length,rejected:u.filter(F=>F.status==="rejected").length},L=[{header:"Request #",key:"request_number",render:F=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"shopping_cart"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:F.request_number||F.id.slice(0,8)}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(F.created_at).toLocaleDateString()})]})]})},{header:"Shop",key:"shop_name",render:F=>F.shop_name||"N/A"},{header:"Warehouse",key:"warehouse_name",render:F=>F.warehouse_name||"N/A"},{header:"Items",key:"total_items",render:F=>e.jsx("span",{className:"font-mono",children:F.total_items}),align:"center"},{header:"Priority",key:"priority",render:F=>e.jsx(Ve,{variant:F.priority==="urgent"||F.priority==="critical"?"error":F.priority==="high"?"warning":"secondary",children:F.priority||"Normal"}),align:"center"},{header:"Status",key:"status",render:F=>{const pe=F.status==="approved"?"success":F.status==="rejected"?"error":F.status==="dispatched"?"info":"warning";return e.jsx(Ve,{variant:pe,children:F.status})},align:"center"},{header:"Actions",key:"id",align:"right",render:F=>e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>j(F.id),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-slate-500",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"visibility"})}),F.status==="pending"&&(i==="warehouse_admin"||i==="warehouse_employee")&&e.jsxs(e.Fragment,{children:[e.jsx(re,{variant:"success",onClick:()=>Z(F.id),className:"!py-1 !px-2 !text-xs",children:"Approve"}),e.jsx(re,{variant:"danger",onClick:()=>U(F.id),className:"!py-1 !px-2 !text-xs",children:"Reject"})]}),F.status==="approved"&&(i==="warehouse_admin"||i==="warehouse_employee")&&e.jsx(re,{variant:"primary",onClick:()=>n(`/dispatches/create?pr_id=${F.id}`),className:"!py-1 !px-2 !text-xs",children:"Create Dispatch"})]})}],[E,j]=m.useState(null),B=F=>u.find(pe=>pe.id===F)?.status;return e.jsxs(ge,{loading:r,children:[e.jsx(ge.Header,{title:"Purchase Requests",subtitle:"Manage stock requests from shops to warehouses",actions:i!=="warehouse_admin"&&i!=="warehouse_employee"&&e.jsxs(re,{variant:"primary",onClick:()=>q(!0),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"New Request"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Requests",value:k,icon:"list_alt",onClick:()=>g(""),isActive:y===""}),e.jsx(je,{title:"Pending",value:xe.pending,icon:"pending",onClick:()=>g("pending"),isActive:y==="pending",trend:"neutral"}),e.jsx(je,{title:"Approved",value:xe.approved,icon:"check_circle",onClick:()=>g("approved"),isActive:y==="approved",trend:"up"}),e.jsx(je,{title:"Rejected",value:xe.rejected,icon:"cancel",onClick:()=>g("rejected"),isActive:y==="rejected",trend:"down"})]}),e.jsx(ge.DataTable,{columns:L,data:u,loading:h,emptyMessage:"No purchase requests found.",pagination:{currentPage:w,totalPages:Math.ceil(k/b),onPageChange:_,totalItems:k,pageSize:b,onPageSizeChange:F=>{A(F),_(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Request List",count:k,searchProps:{value:p,onChange:F=>{f(F),_(1)},placeholder:"Search requests..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:y,onChange:F=>{g(F.target.value),_(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"dispatched",children:"Dispatched"})]})}),embedded:!0})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-scaleIn border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800 z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"New Purchase Request"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create a stock request from a shop to warehouse"})]}),e.jsxs("div",{className:"p-6 space-y-4 overflow-visible",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[!te&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Shop *"}),e.jsx(Yd,{value:O.shop_id,onChange:F=>P(pe=>({...pe,shop_id:F})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Warehouse *"}),e.jsx($d,{value:O.warehouse_id,onChange:F=>P(pe=>({...pe,warehouse_id:F})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Priority"}),e.jsx(Bj,{value:O.priority,onChange:F=>P(pe=>({...pe,priority:F})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Items *"}),e.jsx("button",{onClick:R,className:"text-sm text-blue-600 font-medium hover:underline",children:"+ Add Item"})]}),e.jsx("div",{className:"space-y-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:O.items.map((F,pe)=>e.jsxs("div",{className:"flex gap-2 items-start py-2 border-b border-slate-100 dark:border-slate-800 last:border-0",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Medicine"}),e.jsx(Fi,{value:F.medicine_id,onChange:le=>{const be=D.find(Le=>Le.id===le);P(Le=>({...Le,items:Le.items.map((ie,ce)=>ce===pe?{...ie,medicine_id:le,brand:be?.brand}:ie)}))},options:D.map(le=>({value:le.id,label:le.name})),placeholder:"Select Medicine",className:"w-full"})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Brand"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-300 h-[38px] flex items-center truncate",children:F.brand||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:F.quantity,onChange:le=>I(pe,"quantity",parseInt(le.target.value)),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 h-[38px]",placeholder:"Qty"})]})]}),e.jsx("div",{className:"mt-6",children:O.items.length>1&&e.jsx("button",{onClick:()=>ee(pe),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg h-[38px] w-[38px] flex items-center justify-center transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})})})]},pe))})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300",children:"Cancel"}),e.jsx(re,{variant:"primary",onClick:me,disabled:se,children:se?"Creating...":"Create Request"})]})]})}),E&&e.jsx(rN,{requestId:E,onClose:()=>j(null),onApprove:()=>{j(null),Z(E)},onReject:()=>{j(null),U(E)},canAction:B(E)==="pending"&&(i==="warehouse_admin"||i==="warehouse_employee")})]})}function rN({requestId:n,onClose:r,onApprove:o,onReject:i,canAction:u}){const[x,h]=m.useState(null),[N,y]=m.useState(!0);return m.useEffect(()=>{Zs.get(n).then(g=>{h(g.data)}).catch(console.error).finally(()=>y(!1))},[n]),n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-scaleIn border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["#",x?.request_number||n.slice(0,8)]})]}),e.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"p-6",children:N?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"From Shop"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white text-lg",children:x.shop_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"To Warehouse"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white text-lg",children:x.warehouse_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"Status"}),e.jsx(Ve,{variant:x.status==="approved"?"success":x.status==="rejected"?"error":"warning",children:x.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"Date"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:new Date(x.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white mb-3",children:"Requested Items"}),e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qty"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:x.items?.map((g,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:g.medicine_name})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:g.quantity_requested})]},p))})]})})]})]}):e.jsx("div",{className:"text-center text-red-500",children:"Failed to load details"})}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Close"}),u&&x&&e.jsxs(e.Fragment,{children:[e.jsx(re,{variant:"danger",onClick:i,children:"Reject"}),e.jsx(re,{variant:"success",onClick:o,children:"Approve"})]})]})]})}):null}const iN=({shop:n,invoice:r,items:o,customer:i,user:u})=>{if(!n||!r)return null;const x=o.reduce((f,w)=>f+w.quantity,0),h=o.reduce((f,w)=>f+w.unit_price*w.quantity,0),N=o.reduce((f,w)=>f+w.discount_amount,0),y=f=>{try{return new Date(f).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"})}catch{return""}},g=f=>{try{return new Date(f).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return""}},p=f=>{try{return new Date(f).toLocaleDateString("en-GB",{month:"2-digit",year:"2-digit"})}catch{return""}};return e.jsxs("div",{className:"hidden print:block font-mono text-sm leading-tight p-2 w-[80mm] mx-auto bg-white text-black",children:[e.jsx("style",{children:`
                    @media print {
                        @page { size: 80mm auto; margin: 0mm; }
                        body * { visibility: hidden; }
                        .print\\:block, .print\\:block * { visibility: visible; }
                        .print\\:block { position: absolute; left: 0; top: 0; width: 100%; min-height: 100vh; }
                    }
                `}),e.jsxs("div",{className:"text-center border-b border-dashed border-black pb-2 mb-2",children:[e.jsx("h1",{className:"text-lg font-bold uppercase",children:n.name}),e.jsx("p",{children:n.address}),e.jsxs("p",{children:[n.city," - ",n.pincode]}),e.jsx("div",{className:"flex justify-center gap-4 mt-1",children:e.jsxs("p",{children:["Ph: ",n.phone]})}),e.jsxs("div",{className:"grid grid-cols-2 text-xs mt-1 text-left px-1",children:[e.jsxs("div",{children:["DL No: ",n.license_number||"N/A"]}),e.jsxs("div",{className:"text-right",children:["GST: ",n.gst_number||"N/A"]})]})]}),e.jsxs("div",{className:"border-b border-dashed border-black pb-2 mb-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:["Name: ",i?.name||"Walk-in"]}),e.jsxs("div",{children:["Bill No: ",r.invoice_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:["Doctor: ",i?.doctor_name||"Self"]}),e.jsxs("div",{children:["Date: ",y(r.created_at)]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{children:["Time: ",g(r.created_at)]})})]}),e.jsxs("table",{className:"w-full text-xs mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dashed border-black",children:[e.jsx("th",{className:"text-left w-6",children:"Sn"}),e.jsx("th",{className:"text-left",children:"Particulars"}),e.jsx("th",{className:"text-right w-8",children:"Qty"}),e.jsx("th",{className:"text-right w-12",children:"Batch"}),e.jsx("th",{className:"text-right w-10",children:"Exp"}),e.jsx("th",{className:"text-right w-12",children:"Amount"})]})}),e.jsx("tbody",{className:"leading-5",children:o.map((f,w)=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-top",children:w+1}),e.jsx("td",{className:"align-top pr-1",children:f.medicine_name}),e.jsx("td",{className:"align-top text-right",children:f.quantity}),e.jsx("td",{className:"align-top text-right",children:f.batch_number}),e.jsx("td",{className:"align-top text-right",children:p(f.expiry_date)}),e.jsx("td",{className:"align-top text-right",children:(f.unit_price*f.quantity).toFixed(2)})]},w))})]}),e.jsxs("div",{className:"border-t border-dashed border-black pt-2 mb-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["TOT ITEMS: ",o.length]}),e.jsxs("div",{className:"text-right w-40",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"SUB TOTAL"})," :",e.jsx("span",{children:h.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"DISCOUNT AMT"})," :",e.jsx("span",{children:N.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between border-t border-dashed border-black mt-1 pt-1 font-bold text-sm",children:[e.jsx("span",{children:"NET AMOUNT"})," :",e.jsx("span",{children:r.total_amount.toFixed(2)})]})]})]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("span",{children:["Tot QTY: ",x]}),e.jsx("span",{className:"float-right font-medium",children:"GST Included"})]})]}),e.jsxs("div",{className:"text-center text-xs mt-4",children:[e.jsx("p",{className:"font-bold",children:"THANK YOU GET WELL SOON"}),e.jsx("p",{className:"mt-1",children:"FREE HOME DELIVERY"}),e.jsx("p",{className:"font-bold text-sm mt-1",children:n.phone}),e.jsxs("div",{className:"flex justify-between mt-4 items-end",children:[e.jsx("span",{children:u?.full_name||"Staff"}),e.jsx("span",{children:"PHARMACIST SIGN"})]})]})]})};function cN({isOpen:n,onClose:r,medicineName:o,batches:i,onSelect:u}){const x=[...i].sort((p,f)=>new Date(p.expiry_date).getTime()-new Date(f.expiry_date).getTime()),h=p=>p?new Date(p).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"N/A",N=p=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(p),y=p=>new Date(p)<new Date,g=p=>{const f=new Date,_=new Date(p).getTime()-f.getTime(),k=Math.ceil(_/(1e3*60*60*24));return k>0&&k<=60};return e.jsx(Lt,{isOpen:n,onClose:r,title:`Select Batch - ${o}`,maxWidth:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Multiple batches found for this medicine. Please select one to proceed."}),e.jsx("div",{className:"max-h-96 overflow-y-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Batch #"}),e.jsx("th",{className:"px-4 py-3",children:"Expiry"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"MRP"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Stock"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:x.map(p=>{const f=y(p.expiry_date),w=g(p.expiry_date);return e.jsxs("tr",{className:`
                                            bg-white dark:bg-slate-800 
                                            ${f?"opacity-60 bg-slate-50 dark:bg-slate-900":"hover:bg-slate-50 dark:hover:bg-slate-700"}
                                        `,children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:p.batch_number}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-medium ${f?"text-red-500":w?"text-amber-500":"text-slate-700 dark:text-slate-300"}`,children:h(p.expiry_date)}),f&&e.jsx("span",{className:"text-[10px] text-red-500 font-bold uppercase",children:"Expired"}),w&&!f&&e.jsx("span",{className:"text-[10px] text-amber-500 font-bold uppercase",children:"Expiring Soon"})]})}),e.jsx("td",{className:"px-4 py-3 text-right text-slate-700 dark:text-slate-300",children:N(p.mrp)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium text-slate-900 dark:text-white",children:p.quantity}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx(re,{size:"sm",variant:f?"secondary":"primary",disabled:f||p.quantity<=0,onClick:()=>u(p),children:"Select"})})]},p.id)})})]})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(re,{variant:"ghost",onClick:r,children:"Cancel"})})]})})}function oN({onSelect:n,onNewCustomer:r,selectedCustomer:o}){const[i,u]=m.useState(""),[x,h]=m.useState([]),[N,y]=m.useState(!1),[g,p]=m.useState(!1),f=m.useRef(null);m.useEffect(()=>{function k(S){f.current&&!f.current.contains(S.target)&&p(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[f]),m.useEffect(()=>{const k=setTimeout(()=>{i.length>=2?w():h([])},300);return()=>clearTimeout(k)},[i]);const w=async()=>{y(!0);try{const k=await Gl.list({search:i,size:5});h(k.data?.items||k.data||[]),p(!0)}catch(k){console.error(k)}finally{y(!1)}},_=k=>{n(k),p(!1),u("")};return o?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-800 flex items-center justify-center text-blue-600 dark:text-blue-300 font-bold",children:o.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:o.name}),e.jsx("p",{className:"text-xs text-slate-500",children:o.phone})]})]}),e.jsx(re,{variant:"ghost",size:"sm",onClick:()=>n(null),children:"Change"})]}):e.jsxs("div",{className:"relative",ref:f,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Search customer by name or phone...",value:i,onChange:k=>{u(k.target.value),p(!0)},onFocus:()=>i.length>=2&&p(!0),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none"}),N&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"})]}),e.jsxs(re,{onClick:r,className:"whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-1",children:"person_add"}),"New"]})]}),g&&i.length>=2&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto",children:x.length>0?e.jsx("div",{className:"py-1",children:x.map(k=>e.jsxs("button",{onClick:()=>_(k),className:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center gap-3 border-b border-slate-50 dark:border-slate-700 last:border-b-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500 text-xs font-bold",children:k.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:k.name}),e.jsx("p",{className:"text-xs text-slate-500",children:k.phone})]}),k.loyalty_points&&k.loyalty_points>0&&e.jsxs("div",{className:"ml-auto text-xs text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:[k.loyalty_points," pts"]})]},k.id))}):e.jsxs("div",{className:"p-4 text-center text-slate-500 text-sm",children:[e.jsx("p",{children:"No customers found."}),e.jsx("button",{onClick:r,className:"text-blue-600 font-medium mt-1 hover:underline",children:"Create new customer?"})]})})]})}function dN({isOpen:n,onClose:r,onSuccess:o,shopId:i}){const[u,x]=m.useState(!1),[h,N]=m.useState({name:"",phone:"",email:"",address:"",city:"",pincode:""}),y=async g=>{g.preventDefault(),x(!0);try{console.log("Creating customer with shop_id:",i);const p=await Gl.create({...h,shop_id:i,customer_type:"regular"});Ze.success("Customer created successfully");const f=p.data?.data?.id||p.data?.id;o({id:f,...h,shop_id:i}),r()}catch(p){console.error("Failed to save customer:",p),console.error("Error response:",p.response?.data);const f=p.response?.data?.detail;let w="Failed to create customer";typeof f=="string"?w=f:Array.isArray(f)?w=f.map(_=>_.msg||_.message||"Validation error").join(", "):f&&(w=JSON.stringify(f)),Ze.error(w)}finally{x(!1)}};return e.jsx(Lt,{isOpen:n,onClose:r,title:"Add New Customer",maxWidth:"md",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx(fe,{label:"Customer Name",value:h.name,onChange:g=>N({...h,name:g.target.value}),required:!0,placeholder:"Enter full name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Phone Number",value:h.phone,onChange:g=>N({...h,phone:g.target.value}),required:!0,placeholder:"10-digit mobile",type:"tel"}),e.jsx(fe,{label:"Email (Optional)",value:h.email,onChange:g=>N({...h,email:g.target.value}),placeholder:"email@example.com",type:"email"})]}),e.jsx(fe,{label:"Address",value:h.address,onChange:g=>N({...h,address:g.target.value}),placeholder:"Street, locality"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"City",value:h.city,onChange:g=>N({...h,city:g.target.value}),placeholder:"City"}),e.jsx(fe,{label:"Pincode",value:h.pincode,onChange:g=>N({...h,pincode:g.target.value}),placeholder:"Pincode"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(re,{type:"button",variant:"secondary",onClick:r,className:"flex-1",children:"Cancel"}),e.jsx(re,{type:"submit",variant:"primary",loading:u,className:"flex-1",children:"Create Customer"})]})]})})}const uN=({isOpen:n,onClose:r,title:o,children:i,width:u="w-96"})=>(m.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),n?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),e.jsxs("div",{className:`absolute inset-y-0 right-0 ${u} bg-white dark:bg-slate-800 shadow-xl flex flex-col`,children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:o}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i})]})]}):null);function mN(){const n=Fe(),{user:r}=We(),{activeEntity:o}=Aa(),{isLoading:i}=mt();if(m.useEffect(()=>{(!o||o.type!=="shop")&&n("/")},[o,n]),!o||o.type!=="shop")return null;if(i)return e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-120px)]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})});const u=o.id,x=[{code:"cash",name:"Cash"},{code:"card",name:"Credit/Debit Card"},{code:"upi",name:"UPI / QR Code"},{code:"net_banking",name:"Net Banking"},{code:"cheque",name:"Cheque"},{code:"credit",name:"Credit (Postpaid)"}],[h,N]=m.useState(null),[y,g]=m.useState([]),[p,f]=m.useState(""),[w,_]=m.useState([]),[k,S]=m.useState("cash"),[b,A]=m.useState(!1),[T,q]=m.useState(null),[D,M]=m.useState(!1),[se,Q]=m.useState(!1),[O,P]=m.useState(null),[H,Z]=m.useState([]),[U,W]=m.useState(!1),[te,me]=m.useState(null),[R,ee]=m.useState([]),[I,xe]=m.useState(""),[L,E]=m.useState(""),[j,B]=m.useState(""),[F,pe]=m.useState(""),[le,be]=m.useState(""),Le=m.useRef(null);m.useEffect(()=>{const de=setTimeout(()=>{p.length>=2?ie():g([])},300);return()=>clearTimeout(de)},[p]),m.useEffect(()=>{u&&vt.get(u).then(de=>{N(de.data)}).catch(de=>console.error("Failed to fetch shop details",de))},[u]);const ie=async()=>{try{const de=new AbortController,Ee=setTimeout(()=>de.abort(),1e4),De=await wt.list({search:p,shop_id:u});clearTimeout(Ee),g(De.data?.items||De.data||[])}catch(de){console.error("Search error:",de),de.name==="AbortError"&&Ze.error("Search timed out. Please try again.")}},ce=async de=>{try{const $e=((await wt.getBatches(de.id)).data?.batches||[]).filter(Xe=>Xe.quantity>0);if($e.length===0){Ze.error("No stock available for this medicine");return}$e.length===1?ke(de,$e[0]):(P(de),Z($e),Q(!0))}catch(Ee){console.error(Ee),Ze.error("Failed to fetch batch details")}},Se=de=>{O&&(ke(O,de),Q(!1),P(null),Z([]))},ke=(de,Ee)=>{if(de.is_prescription_required&&!T){Ze.warning("Prescription required! Please select a customer first.");return}const De=w.findIndex($e=>$e.medicine.id===de.id&&$e.batch.id===Ee.id);if(De>=0){if(w[De].quantity+1>Ee.quantity){Ze.warning(`Only ${Ee.quantity} units available in this batch`);return}const Xe=[...w];Xe[De].quantity+=1,_(Xe)}else{const $e={medicine:de,batch:Ee,quantity:1,discount:0,tax_rate:de.gst_rate||12};_([...w,$e])}f(""),g([]),Le.current?.focus()},$=(de,Ee)=>{const De=w[de];if(Ee<=0){const $e=w.filter((Xe,Rt)=>Rt!==de);_($e)}else{if(Ee>De.batch.quantity){Ze.warning(`Only ${De.batch.quantity} units available`);return}const $e=[...w];$e[de].quantity=Ee,_($e)}},ye=(de,Ee)=>{const De=[...w];De[de].discount=Math.max(0,Ee),_(De)},ze=de=>{_(w.filter((Ee,De)=>De!==de))},Tt=de=>{const Ee=de.batch?.selling_price||de.batch?.mrp||0;return isNaN(Ee)?0:Ee},Ta=de=>{const Ee=Tt(de)*(de.quantity||0);return isNaN(Ee)?0:Ee},Wa=de=>{const Ee=de.discount||0;return isNaN(Ee)?0:Ee},es=de=>{const Ee=Ta(de)-Wa(de);return isNaN(Ee)?0:Ee},ts=de=>{const Ee=de.tax_rate||0,De=es(de)*(Ee/100);return isNaN(De)?0:De},Da=()=>{const de=w.reduce((Ee,De)=>Ee+Ta(De),0);return isNaN(de)?0:de},as=()=>{const de=w.reduce((Ee,De)=>Ee+Wa(De),0);return isNaN(de)?0:de},Zl=()=>{const de=Da()-as();return isNaN(de)?0:de},Dt=()=>{const de=w.reduce((Ee,De)=>Ee+ts(De),0);return isNaN(de)?0:de},Ra=()=>{const de=Zl()+Dt();return isNaN(de)?0:de},nr=()=>{const de=parseFloat(I||"0")-Ra();return isNaN(de)?0:de},Ut=de=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(de),el=()=>{const de=Ra(),Ee=I&&!isNaN(parseFloat(I))?parseFloat(I):de;if(de-Ee>1&&!T&&k!=="cash"&&k!=="credit")return{valid:!1,error:"Customer selection required for partial payment"};if(k==="credit")return T?le?{valid:!0}:{valid:!1,error:"Due date required for credit payment"}:{valid:!1,error:"Customer selection required for credit payment"};if(["upi","net_banking"].includes(k)&&!L)return{valid:!1,error:`${k==="upi"?"UPI":"Net Banking"} reference number required`};if(k==="card"&&!L)return{valid:!1,error:"Card transaction ID required"};if(k==="cheque"){if(!j)return{valid:!1,error:"Cheque number required"};if(!F)return{valid:!1,error:"Cheque date required"}}return{valid:!0}},Yi=async()=>{if(w.length===0)return Ze.warning("Cart is empty");const de=el();if(!de.valid){Ze.error(de.error);return}if(w.some(De=>De.medicine.is_prescription_required)&&!T){Ze.error("Customer selection required for prescription medicines!");return}A(!0);try{const De=Ra(),$e=I&&!isNaN(parseFloat(I))?parseFloat(I):De,Xe={shop_id:u,customer_id:T?.id,items:w.map(lt=>{const rr=Tt(lt)*lt.quantity,Cs=rr>0?lt.discount/rr*100:0,Es=lt.batch?.selling_price||lt.batch?.mrp||0,As=lt.tax_rate||12;return{medicine_id:lt.medicine.id,batch_id:lt.batch.id,quantity:Math.floor(lt.quantity)||1,unit_price:isNaN(Es)?0:Es,discount_percent:Number.isFinite(Cs)?Cs:0,tax_percent:isNaN(As)?12:As}}),payment_method:k,paid_amount:isNaN($e)?0:$e,discount_percent:0,payment_reference:L||void 0,cheque_number:j||void 0,cheque_date:F||void 0,due_date:le||void 0};console.log("=== Invoice Payload ==="),console.log("Total from getTotal():",De),console.log("Paid Amount:",$e),console.log("Items count:",Xe.items.length),console.log("Full Payload:",JSON.stringify(Xe,null,2)),console.log("======================");const Rt=await Is.create(Xe),Mt=Rt.data?.data||Rt.data;console.log("=== Invoice Response ==="),console.log("Full response:",Rt.data),console.log("Invoice data:",Mt),console.log("========================"),me(Mt);const Pi=w.map(lt=>({medicine_name:lt.medicine.name,batch_number:lt.batch.batch_number,expiry_date:lt.batch.expiry_date,quantity:lt.quantity,unit_price:lt.batch.selling_price||lt.batch.mrp,mrp:lt.batch.mrp,gst_rate:lt.tax_rate,discount_amount:lt.discount,total_amount:(lt.batch.selling_price||lt.batch.mrp)*lt.quantity-lt.discount}));ee(Pi),W(!0),_([]),q(null),xe(""),Ze.success("Invoice created successfully")}catch(De){console.error("Invoice creation error:",De);let $e="Failed to create invoice";if(De.code==="ECONNABORTED"||De.message?.includes("timeout"))$e="Request timed out. Please check your connection and try again.";else if(De.response?.data?.detail){const Xe=De.response.data.detail;Array.isArray(Xe)?$e=Xe.map(Rt=>Rt.msg||"Validation error").join(", "):typeof Xe=="object"?$e=Xe.msg||JSON.stringify(Xe):$e=String(Xe)}else De.response||($e="Network error. Please check your connection.");Ze.error($e)}finally{A(!1)}};return e.jsxs("div",{className:"flex h-[calc(100vh-120px)] gap-6",children:[e.jsx(cN,{isOpen:se,onClose:()=>Q(!1),medicineName:O?.name||"",batches:H,onSelect:Se}),e.jsx(dN,{isOpen:D,onClose:()=>M(!1),onSuccess:de=>{q(de),Ze.success("Customer added to sale")},shopId:u}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"POS Billing"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"shopping_cart"}),w.length," items"]})]}),e.jsxs("div",{className:"relative z-[20]",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400",children:"search"}),e.jsx("input",{ref:Le,type:"text",placeholder:"Search medicine by name, generic or brand...",value:p,onChange:de=>f(de.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-lg shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all",autoFocus:!0}),y.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-96 overflow-auto z-50",children:y.map(de=>e.jsxs("button",{onClick:()=>ce(de),className:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 flex justify-between items-center border-b border-slate-50 dark:border-slate-700 last:border-b-0 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:de.name}),e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400 font-medium",children:[de.stock_quantity," in stock"]})]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:[de.generic_name,de.brand&&`  ${de.brand}`,de.manufacturer&&`  ${de.manufacturer}`]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:Ut(de.mrp)}),e.jsx("p",{className:"text-xs text-slate-400",children:"MRP"})]})]},de.id))})]}),e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-sm",children:e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-500 uppercase w-32",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-24",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-24",children:"Disc"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-28",children:"Total"}),e.jsx("th",{className:"w-12"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:w.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-4 py-24 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"shopping_cart"})}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium mb-1",children:"Your cart is empty"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto",children:"Search for medicines above to add them to your billing cart."})]})}):w.map((de,Ee)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:de.medicine.name}),e.jsx("p",{className:"text-xs text-slate-500",children:de.medicine.generic_name})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:de.batch.batch_number}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Exp: ",new Date(de.batch.expiry_date).toLocaleDateString()]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>$(Ee,de.quantity-1),className:"w-7 h-7 rounded bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:"-"}),e.jsx("input",{type:"number",value:de.quantity,onChange:De=>$(Ee,parseInt(De.target.value)||1),className:"w-12 text-center font-medium border border-slate-200 dark:border-slate-700 rounded py-1 bg-transparent text-slate-900 dark:text-white text-sm"}),e.jsx("button",{onClick:()=>$(Ee,de.quantity+1),className:"w-7 h-7 rounded bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:"+"})]})}),e.jsxs("td",{className:"px-4 py-3 text-right text-slate-700 dark:text-slate-300 text-sm",children:[de.batch.selling_price&&de.batch.selling_price!==de.batch.mrp&&e.jsx("div",{className:"text-xs text-slate-400 line-through mr-1 inline-block",children:Ut(de.batch.mrp)}),Ut(de.batch.selling_price||de.batch.mrp)]}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("input",{type:"number",value:de.discount||"",onChange:De=>ye(Ee,parseFloat(De.target.value)||0),placeholder:"0",className:"w-16 text-right border border-slate-200 dark:border-slate-700 rounded py-1 px-2 bg-transparent text-sm focus:ring-1 focus:ring-blue-500 outline-none"})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-slate-900 dark:text-white text-sm",children:Ut((de.batch.selling_price||de.batch.mrp)*de.quantity-de.discount)}),e.jsx("td",{className:"px-2",children:e.jsx("button",{onClick:()=>ze(Ee),className:"text-slate-400 hover:text-red-500 rounded p-1 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})})]},`${de.medicine.id}-${de.batch.id}`))})]})})})]}),e.jsxs("div",{className:"w-96 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col shadow-sm max-h-[calc(100vh-120px)] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Checkout Details"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full font-medium",children:"Running"})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Customer"}),e.jsx(oN,{onSelect:q,selectedCustomer:T,onNewCustomer:()=>M(!0)})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:x?.map(de=>e.jsx("button",{onClick:()=>S(de.code),className:`py-2 px-3 rounded-lg text-sm font-medium border transition-all duration-200 ${k===de.code?"bg-blue-600 border-blue-600 text-white shadow-md":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:de.name})},de.code))||[e.jsx("button",{onClick:()=>S("cash"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${k==="cash"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"Cash"},"cash"),e.jsx("button",{onClick:()=>S("card"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${k==="card"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"Card"},"card"),e.jsx("button",{onClick:()=>S("upi"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${k==="upi"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"UPI"},"upi")]})]}),["upi","card","net_banking"].includes(k)&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[k==="card"?"Transaction ID":"Reference Number"," *"]}),e.jsx("input",{type:"text",value:L,onChange:de=>E(de.target.value),placeholder:`Enter ${k==="card"?"transaction ID":"reference number"}`,className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),k==="cheque"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Cheque Number *"}),e.jsx("input",{type:"text",value:j,onChange:de=>B(de.target.value),placeholder:"Enter cheque number",className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Cheque Date *"}),e.jsx("input",{type:"date",value:F,onChange:de=>pe(de.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),k==="credit"&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Due Date *"}),e.jsx("input",{type:"date",value:le,onChange:de=>be(de.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[k==="cash"?"Amount Received":"Amount Paid",k==="credit"&&" (Optional)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-medium z-10 pointer-events-none",children:""}),e.jsx("input",{type:"number",value:I,onChange:de=>xe(de.target.value),placeholder:Ra().toFixed(2),disabled:!["cash","credit"].includes(k),className:`w-full pl-8 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 text-lg font-semibold text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none ${["cash","credit"].includes(k)?"bg-slate-50 dark:bg-slate-900":"bg-slate-100 dark:bg-slate-900/50 cursor-not-allowed"}`})]}),k==="cash"&&parseFloat(I)>=Ra()&&Ra()>0&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 px-3 py-2 rounded-lg text-sm font-medium flex justify-between",children:[e.jsx("span",{children:"Change to Return:"}),e.jsx("span",{children:Ut(nr())})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"space-y-3 pt-6 border-t border-dashed border-slate-300 dark:border-slate-600",children:[e.jsxs("div",{className:"flex justify-between text-slate-600 dark:text-slate-400 text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:Ut(Da())})]}),as()>0&&e.jsxs("div",{className:"flex justify-between text-green-600 text-sm",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-medium",children:["-",Ut(as())]})]}),e.jsxs("div",{className:"flex justify-between text-slate-600 dark:text-slate-400 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:["GST (12%)",e.jsx("span",{className:"text-[10px] text-slate-400",children:"(Auto)"})]}),e.jsx("span",{className:"font-medium",children:Ut(Dt())})]}),e.jsxs("div",{className:"flex justify-between items-end pt-2",children:[e.jsx("span",{className:"text-slate-900 dark:text-white font-bold text-lg",children:"Total Amount"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:Ut(Ra())})]})]}),e.jsx("button",{onClick:Yi,disabled:b||w.length===0,className:"mt-6 w-full py-4 bg-slate-900 hover:bg-slate-800 text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-xl active:scale-[0.98]",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Complete Sale"}),e.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]}),e.jsx(uN,{isOpen:U,onClose:()=>{W(!1),me(null)},title:"Payment Receipt",width:"w-[400px]",children:te&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-4xl text-green-600 dark:text-green-400",children:"check_circle"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-slate-500",children:["Invoice #",te.invoice_number||"N/A"]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-500",children:"Customer"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:te.customer_id?T?.name:"Walk-in Customer"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-500",children:"Payment Method"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:String(te.payment_method||"").replace("_"," ")})]}),e.jsxs("div",{className:"pt-2 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Total Amount"}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Ut(Number(te.total_amount)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Amount Paid"}),e.jsx("span",{className:"font-bold text-green-600",children:Ut(Number(te.paid_amount)||0)})]}),(Number(te.balance_amount)||0)>0&&e.jsxs("div",{className:"flex justify-between items-center text-lg text-red-600 font-bold",children:[e.jsx("span",{children:"Balance Due"}),e.jsx("span",{children:Ut(Number(te.balance_amount)||0)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center justify-center gap-2 px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-xl font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"print"}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>{W(!1),me(null),_([]),q(null),xe(""),S("cash")},className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-blue-900/20",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"}),"New Sale"]})]})]})}),te&&e.jsx(iN,{shop:h,invoice:te,items:R,customer:T,user:r})]})}function hN(){const[n,r]=m.useState([]),[o,i]=m.useState(!0),[u,x]=m.useState("all"),[h,N]=m.useState("");m.useEffect(()=>{y()},[u,h]);const y=async()=>{i(!0);try{const b={size:50};u==="unread"&&(b.is_read=!1),u==="read"&&(b.is_read=!0),h&&(b.notification_type=h);const A=await Ni.list(b);r(A.data?.items||A.data||[])}catch(b){console.error("Error loading notifications:",b)}finally{i(!1)}},g=async b=>{try{await Ni.markRead(b),r(A=>A.map(T=>T.id===b?{...T,is_read:!0}:T))}catch(A){console.error("Error marking notification as read:",A)}},p=async()=>{try{await Ni.markAllRead(),r(b=>b.map(A=>({...A,is_read:!0})))}catch(b){console.error("Error marking all as read:",b)}},f=async b=>{try{await Ni.delete(b),r(A=>A.filter(T=>T.id!==b))}catch(A){console.error("Error deleting notification:",A)}},w=b=>{const A={low_stock:"",expiry_alert:"",order_received:"",dispatch_update:"",payment_received:"",system:"",default:""};return A[b]||A.default},_=b=>{const A={high:"#ef4444",medium:"#f59e0b",low:"#10b981"};return A[b]||A.medium},k=b=>{const A=new Date(b),q=new Date().getTime()-A.getTime();return q<6e4?"Just now":q<36e5?`${Math.floor(q/6e4)}m ago`:q<864e5?`${Math.floor(q/36e5)}h ago`:q<6048e5?`${Math.floor(q/864e5)}d ago`:A.toLocaleDateString()},S=Array.isArray(n)?n.filter(b=>!b.is_read).length:0;return e.jsxs("div",{className:"notifications-page",children:[e.jsx("style",{children:`
                .notifications-page {
                    padding: 24px;
                    max-width: 900px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-title {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                }
                .page-title h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .unread-badge {
                    background: #ef4444;
                    color: white;
                    padding: 4px 12px;
                    border-radius: 20px;
                    font-size: 13px;
                    font-weight: 600;
                }
                .btn-mark-all {
                    padding: 10px 20px;
                    background: #4a6cf7;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                }
                .btn-mark-all:hover {
                    background: #3b5ce4;
                }
                .btn-mark-all:disabled {
                    opacity: 0.5;
                    cursor: not-allowed;
                }
                .filters {
                    display: flex;
                    gap: 16px;
                    margin-bottom: 24px;
                }
                .filter-tabs {
                    display: flex;
                    background: #f0f4ff;
                    border-radius: 8px;
                    padding: 4px;
                }
                .filter-tab {
                    padding: 8px 16px;
                    border: none;
                    background: transparent;
                    border-radius: 6px;
                    cursor: pointer;
                    font-weight: 500;
                    color: #666;
                    transition: all 0.2s;
                }
                .filter-tab.active {
                    background: white;
                    color: #4a6cf7;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                }
                .type-filter {
                    padding: 8px 12px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                }
                .notifications-list {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                }
                .notification-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 16px;
                    display: flex;
                    gap: 16px;
                    transition: all 0.2s;
                    cursor: pointer;
                }
                .notification-card:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
                }
                .notification-card.unread {
                    border-left: 4px solid #4a6cf7;
                    background: #f8faff;
                }
                .notification-icon {
                    width: 48px;
                    height: 48px;
                    border-radius: 12px;
                    background: #f0f4ff;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    flex-shrink: 0;
                }
                .notification-content {
                    flex: 1;
                    min-width: 0;
                }
                .notification-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 4px;
                }
                .notification-title {
                    font-weight: 600;
                    color: #1a1a2e;
                    font-size: 15px;
                }
                .notification-time {
                    font-size: 12px;
                    color: #999;
                    white-space: nowrap;
                }
                .notification-message {
                    color: #666;
                    font-size: 14px;
                    line-height: 1.5;
                }
                .notification-meta {
                    display: flex;
                    gap: 12px;
                    margin-top: 8px;
                    align-items: center;
                }
                .priority-badge {
                    padding: 2px 8px;
                    border-radius: 4px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    color: white;
                }
                .type-badge {
                    padding: 2px 8px;
                    background: #e0e7ff;
                    color: #4a6cf7;
                    border-radius: 4px;
                    font-size: 11px;
                    font-weight: 500;
                }
                .notification-actions {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
                .action-btn {
                    padding: 6px 12px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 12px;
                    transition: all 0.2s;
                }
                .action-btn:hover {
                    background: #f5f5f5;
                }
                .action-btn.delete:hover {
                    background: #fee2e2;
                    border-color: #ef4444;
                    color: #ef4444;
                }
                .empty-state {
                    text-align: center;
                    padding: 60px 20px;
                    color: #999;
                }
                .empty-state-icon {
                    font-size: 64px;
                    margin-bottom: 16px;
                }
                .loading {
                    text-align: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"page-title",children:[e.jsx("h1",{children:" Notifications"}),S>0&&e.jsxs("span",{className:"unread-badge",children:[S," unread"]})]}),e.jsx("button",{className:"btn-mark-all",onClick:p,disabled:S===0,children:"Mark all as read"})]}),e.jsxs("div",{className:"filters",children:[e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:`filter-tab ${u==="all"?"active":""}`,onClick:()=>x("all"),children:"All"}),e.jsx("button",{className:`filter-tab ${u==="unread"?"active":""}`,onClick:()=>x("unread"),children:"Unread"}),e.jsx("button",{className:`filter-tab ${u==="read"?"active":""}`,onClick:()=>x("read"),children:"Read"})]}),e.jsxs("select",{className:"type-filter",value:h,onChange:b=>N(b.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"expiry_alert",children:"Expiry Alert"}),e.jsx("option",{value:"order_received",children:"Orders"}),e.jsx("option",{value:"dispatch_update",children:"Dispatch"}),e.jsx("option",{value:"payment_received",children:"Payments"}),e.jsx("option",{value:"system",children:"System"})]})]}),o?e.jsx("div",{className:"loading",children:"Loading notifications..."}):!Array.isArray(n)||n.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:""}),e.jsx("h3",{children:"No notifications"}),e.jsx("p",{children:"You're all caught up!"})]}):e.jsx("div",{className:"notifications-list",children:n.map(b=>e.jsxs("div",{className:`notification-card ${b.is_read?"":"unread"}`,onClick:()=>!b.is_read&&g(b.id),children:[e.jsx("div",{className:"notification-icon",children:w(b.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsxs("div",{className:"notification-header",children:[e.jsx("span",{className:"notification-title",children:b.title}),e.jsx("span",{className:"notification-time",children:k(b.created_at)})]}),e.jsx("p",{className:"notification-message",children:b.message}),e.jsxs("div",{className:"notification-meta",children:[e.jsx("span",{className:"priority-badge",style:{backgroundColor:_(b.priority)},children:b.priority}),e.jsx("span",{className:"type-badge",children:b.type.replace(/_/g," ")})]})]}),e.jsxs("div",{className:"notification-actions",onClick:A=>A.stopPropagation(),children:[!b.is_read&&e.jsx("button",{className:"action-btn",onClick:()=>g(b.id),children:" Read"}),e.jsx("button",{className:"action-btn delete",onClick:()=>f(b.id),children:""})]})]},b.id))})]})}function yd(){const{activeEntity:n,scope:r}=Aa(),[o,i]=m.useState("stock"),[u,x]=m.useState([]),[h,N]=m.useState([]),[y,g]=m.useState(!0),[p,f]=m.useState(""),[w,_]=m.useState(""),[k,S]=m.useState(""),[b,A]=m.useState(1),[T,q]=m.useState(0),[D,M]=m.useState(20);m.useEffect(()=>{o==="stock"?se():Q()},[o,b,D,p,w,k,n]);const se=async()=>{g(!0);try{let U;const W={page:b,size:D};if(k&&(W.search=k),n?.type==="warehouse")U=await At.getStock(n.id,W);else if(n?.type==="shop")U=await vt.getStock(n.id,W);else if(r==="global")if(p)U=await At.getStock(p,W);else{N([]),q(0),g(!1);return}U?.data&&(N(U.data.items||[]),q(U.data.total||0))}catch(U){console.error("Failed to fetch stock:",U),N([])}finally{g(!1)}},Q=async()=>{try{g(!0);const U={page:b,size:D};n?.type==="warehouse"?U.warehouse_id=n.id:n?.type==="shop"?U.shop_id=n.id:r==="global"&&p&&(U.warehouse_id=p),w&&(U.movement_type=w);const W=await $l.getMovements(U);let te=[];W.data&&(Array.isArray(W.data)?te=W.data:W.data.items&&Array.isArray(W.data.items)?te=W.data.items:W.data.data&&Array.isArray(W.data.data)&&(te=W.data.data)),x(te),q(W.data?.total||te.length)}catch(U){console.error("Failed to fetch movements:",U),x([]),q(0)}finally{g(!1)}},O=U=>{switch(U){case"in":return"success";case"out":return"error";case"transfer":return"info";case"adjustment":return"warning";default:return"secondary"}},P=U=>{switch(U){case"in":return"login";case"out":return"logout";case"transfer":return"swap_horiz";case"adjustment":return"tune";default:return"history"}},H=[{header:"Medicine Name",key:"medicine_name",render:U=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:U.medicine_name}),e.jsx("p",{className:"text-[11px] text-slate-500",children:U.medicine_code||"N/A"})]})},{header:"Brand",key:"brand",className:"hidden md:table-cell",render:U=>e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:U.brand||"-"})},{header:"Batch Info",key:"batch_number",render:U=>e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-xs bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:U.batch_number}),U.expiry_date&&e.jsxs("p",{className:"text-[10px] text-slate-500 mt-0.5",children:["Exp: ",new Date(U.expiry_date).toLocaleDateString()]})]})},{header:"Location",key:"rack_name",className:"hidden lg:table-cell",render:U=>e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:U.rack_name||U.rack_number?e.jsxs("span",{children:[U.rack_name," ",U.rack_number?`(${U.rack_number})`:""]}):e.jsx("span",{className:"italic text-slate-400",children:"No Rack"})})},{header:"Quantity",key:"quantity",align:"right",render:U=>e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:U.quantity.toLocaleString()})}],Z=[{header:"Details",key:"id",render:U=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[11px] font-mono text-slate-500",children:U.reference_type.toUpperCase()}),e.jsxs("span",{className:"text-[11px] text-slate-400",children:["By: ",U.performed_by||"System"]})]})},{header:"Product",key:"medicine_name",render:U=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:U.medicine_name}),e.jsxs("p",{className:"text-[11px] text-slate-500",children:["Batch: ",U.batch_number]})]})},{header:"Type",key:"movement_type",render:U=>e.jsxs(Ve,{variant:O(U.movement_type),className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:P(U.movement_type)}),e.jsx("span",{className:"capitalize",children:U.movement_type})]})},{header:"Qty",key:"quantity",align:"right",render:U=>e.jsxs("span",{className:`font-mono text-sm font-medium ${U.movement_type==="out"?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[U.movement_type==="out"?"-":"+",Math.abs(U.quantity)]})},{header:"Date",key:"created_at",align:"right",render:U=>e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:new Date(U.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-[10px] text-slate-400",children:new Date(U.created_at).toLocaleTimeString()})]})}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Inventory Management",subtitle:`Manage stock and view history ${r==="global"?"across all locations":n?.name?`for ${n.name}`:""}`,actions:e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>{i("stock"),A(1)},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${o==="stock"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Current Stock"}),e.jsx("button",{onClick:()=>{i("movements"),A(1)},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${o==="movements"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"History"})]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:o==="stock"?"Total Stock Items":"Total Movements",value:T,icon:o==="stock"?"inventory_2":"history",onClick:()=>{},isActive:!0}),e.jsx(je,{title:"Stock In",value:"-",icon:"login",trend:"neutral"}),e.jsx(je,{title:"Stock Out",value:"-",icon:"logout",trend:"neutral"}),e.jsx(je,{title:"Transfers",value:"-",icon:"swap_horiz",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:o==="stock"?H:Z,data:o==="stock"?h:u,loading:y,emptyMessage:o==="stock"?"No stock found in this location.":"No stock movements found.",pagination:{currentPage:b,totalPages:Math.ceil(T/D),onPageChange:A,totalItems:T,pageSize:D,onPageSizeChange:U=>{M(U),A(1)}},headerSlot:e.jsx(ge.ListControls,{title:o==="stock"?"Stock List":"Movement List",count:T,searchProps:o==="stock"?{value:k,onChange:U=>{S(U),A(1)},placeholder:"Search medicines..."}:void 0,actions:e.jsxs("div",{className:"flex items-center gap-2",children:[r==="global"&&e.jsxs("select",{value:p,onChange:U=>{f(U.target.value),A(1)},className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),e.jsx("option",{value:"WH001",children:"Central Warehouse"})]}),o==="movements"&&e.jsxs("select",{value:w,onChange:U=>{_(U.target.value),A(1)},className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"in",children:"Stock In"}),e.jsx("option",{value:"out",children:"Stock Out"}),e.jsx("option",{value:"transfer",children:"Transfer"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]})]}),embedded:!0})})]})}function xN(){const n=Fe(),{refresh:r}=mt(),[o,i]=m.useState({name:"",code:"",address:"",city:"",state:"",country:"India",pincode:"",phone:"",email:"",capacity:1e4}),[u,x]=m.useState(!1),[h,N]=m.useState(""),y=async g=>{if(g.preventDefault(),N(""),!o.name||!o.code||!o.city||!o.state){N("Please fill in all required fields (Name, Code, City, State)");return}x(!0);try{console.log("Sending warehouse data:",o),await At.create(o),await r(),n("/warehouses")}catch(p){console.error("Failed to create warehouse:",p),N(p.response?.data?.detail||"Failed to create warehouse")}finally{x(!1)}};return e.jsx(Zt,{title:"Add New Warehouse",description:"Create a new distribution center",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:y,children:e.jsxs(Ie,{className:"space-y-6",children:[h&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:h}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Warehouse Name *",value:o.name,onChange:g=>i({...o,name:g.target.value}),placeholder:"Main Warehouse",required:!0}),e.jsx(fe,{label:"Code *",value:o.code,onChange:g=>i({...o,code:g.target.value.toUpperCase()}),placeholder:"WH001",required:!0,className:"font-mono"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:o.address,onChange:g=>i({...o,address:g.target.value}),className:"input min-h-[80px] py-2",placeholder:"Street address..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"City *",value:o.city,onChange:g=>i({...o,city:g.target.value}),placeholder:"Chennai",required:!0}),e.jsx(fe,{label:"State *",value:o.state,onChange:g=>i({...o,state:g.target.value}),placeholder:"Tamil Nadu",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(fe,{label:"Pincode",value:o.pincode,onChange:g=>i({...o,pincode:g.target.value}),placeholder:"600001"}),e.jsx(fe,{label:"Phone",type:"tel",value:o.phone,onChange:g=>i({...o,phone:g.target.value}),placeholder:"+91 9876543210"}),e.jsx(fe,{label:"Capacity",type:"number",value:o.capacity,onChange:g=>i({...o,capacity:parseInt(g.target.value)||0}),placeholder:"10000"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(fe,{label:"Email",type:"email",value:o.email,onChange:g=>i({...o,email:g.target.value}),placeholder:"warehouse@example.com"})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>n("/warehouses"),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:u,children:u?"Creating...":"Create Warehouse"})]})]})})})})}function pN(){const n=Fe(),{id:r}=Wn(),[o,i]=m.useState(!0),[u,x]=m.useState({name:"",code:"",address:"",city:"",state:"",country:"India",pincode:"",phone:"",email:"",capacity:1e4}),[h,N]=m.useState(!1),[y,g]=m.useState("");m.useEffect(()=>{p()},[r]);const p=async()=>{try{const _=(await At.get(r)).data;x({name:_.name||"",code:_.code||"",address:_.address||"",city:_.city||"",state:_.state||"",country:_.country||"India",pincode:_.pincode||"",phone:_.phone||"",email:_.email||"",capacity:_.capacity||1e4})}catch(w){console.error("Failed to load warehouse:",w),g("Failed to load warehouse details")}finally{i(!1)}},f=async w=>{if(w.preventDefault(),g(""),!u.name||!u.code||!u.city||!u.state){g("Please fill in all required fields");return}N(!0);try{await At.update(r,u),n("/warehouses")}catch(_){console.error("Failed to update warehouse:",_),g(_.response?.data?.detail||"Failed to update warehouse")}finally{N(!1)}};return o?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):e.jsx(Zt,{title:"Edit Warehouse",description:"Update warehouse information",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:f,children:e.jsxs(Ie,{className:"space-y-6",children:[y&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:y}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Warehouse Name *",value:u.name,onChange:w=>x({...u,name:w.target.value}),required:!0}),e.jsx(fe,{label:"Code *",value:u.code,className:"font-mono bg-slate-100 dark:bg-slate-800",disabled:!0,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:u.address,onChange:w=>x({...u,address:w.target.value}),className:"input min-h-[80px] py-2",placeholder:"Address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"City *",value:u.city,onChange:w=>x({...u,city:w.target.value}),required:!0}),e.jsx(fe,{label:"State *",value:u.state,onChange:w=>x({...u,state:w.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(fe,{label:"Pincode",value:u.pincode,onChange:w=>x({...u,pincode:w.target.value})}),e.jsx(fe,{label:"Phone",type:"tel",value:u.phone,onChange:w=>x({...u,phone:w.target.value})}),e.jsx(fe,{label:"Capacity",type:"number",value:u.capacity,onChange:w=>x({...u,capacity:parseInt(w.target.value)||0})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(fe,{label:"Email",type:"email",value:u.email,onChange:w=>x({...u,email:w.target.value})})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>n("/warehouses"),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:h,children:h?"Updating...":"Update Warehouse"})]})]})})})})}function fN(){const[n,r]=m.useState([]),[o,i]=m.useState([]),[u,x]=m.useState([]),[h,N]=m.useState(null),[y,g]=m.useState([]),[p,f]=m.useState(!0),[w,_]=m.useState(!1);m.useEffect(()=>{k()},[]),m.useEffect(()=>{if(h){const A=o.filter(T=>T.warehouse_id===h.id);g(A)}else g([])},[h,o]),m.useEffect(()=>{x(o.filter(A=>!A.warehouse_id))},[o]);const k=async()=>{try{f(!0);const[A,T]=await Promise.all([At.list({size:500}),vt.list({size:500})]);r(A.data.items||[]),i(T.data.items||[])}catch(A){console.error("Failed to load data:",A)}finally{f(!1)}},S=async A=>{if(h){_(!0);try{await vt.update(A,{warehouse_id:h.id}),await k()}catch(T){console.error("Failed to assign shop:",T)}finally{_(!1)}}},b=async A=>{_(!0);try{await vt.update(A,{warehouse_id:null}),await k()}catch(T){console.error("Failed to unassign shop:",T)}finally{_(!1)}};return p?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"spinner"})}):e.jsx(Zt,{title:"Warehouse  Shop Mapping",description:"Assign medical shops to warehouses",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(Ie,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"warehouse"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:n.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total Warehouses"})]})]}),e.jsxs(Ie,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:o.filter(A=>A.warehouse_id).length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Assigned Shops"})]})]}),e.jsxs(Ie,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:u.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Unassigned Shops"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ie,{title:"Select Warehouse",icon:"warehouse",padding:"0",children:e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-[500px] overflow-auto",children:n.map(A=>e.jsx("button",{onClick:()=>N(A),className:`w-full p-4 text-left transition-colors ${h?.id===A.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-primary":"hover:bg-slate-50 dark:hover:bg-slate-800/50 border-l-4 border-transparent"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:A.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[A.code,"  ",A.city]})]}),e.jsxs(Ve,{variant:"info",children:[A.shop_count||0," shops"]})]})},A.id))})}),e.jsx(Ie,{title:h?`Shops in ${h.name}`:"Select a Warehouse",icon:"storefront",padding:"0",children:h?e.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50",children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-3",children:["Assigned Shops (",y.length,")"]}),y.length===0?e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No shops assigned yet"}):e.jsx("div",{className:"space-y-2",children:y.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:A.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[A.code,"  ",A.city]})]}),e.jsx(re,{variant:"secondary",onClick:()=>b(A.id),disabled:w,className:"!p-1.5 !h-8 text-red-500 hover:text-red-600 hover:bg-red-50",title:"Unassign Shop",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"link_off"})})]},A.id))})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-3",children:["Available to Assign (",u.length,")"]}),u.length===0?e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"All shops are assigned"}):e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-auto pr-2",children:u.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/30 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:A.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[A.code,"  ",A.city]})]}),e.jsxs(re,{variant:"primary",onClick:()=>S(A.id),disabled:w,className:"!px-3 !py-1 !text-xs gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:14},children:"link"}),"Assign"]})]},A.id))})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"arrow_back"}),e.jsx("p",{children:"Select a warehouse to manage shops"})]})})]})]})})}function gN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),[i,u]=m.useState([]),[x,h]=m.useState([]),[N,y]=m.useState(!0),[g,p]=m.useState(!1),[f,w]=m.useState(""),[_]=m.useState(""),[k,S]=m.useState({rack_name:"",rack_number:"",warehouse_id:""}),[b,A]=m.useState(!1),[T,q]=m.useState(""),[D,M]=m.useState(10),[se,Q]=m.useState(1);m.useEffect(()=>{n&&!r("racks.view")&&o("/")},[n,o,r]),m.useEffect(()=>{O()},[]);const O=async()=>{y(!0);try{const[E,j]=await Promise.all([At.list({size:500}),Di.list({size:500})]);h(E.data.items?.map(B=>({id:B.id,name:B.name}))||[]),u(j.data.items||[])}catch(E){console.error("Failed to load data:",E)}finally{y(!1)}},P=()=>{S({rack_name:"",rack_number:"",warehouse_id:""}),q(""),p(!0)},H=async E=>{if(E.preventDefault(),q(""),!k.rack_name||!k.rack_number){q("Rack Name and Rack Number are required");return}A(!0);try{await Di.create({rack_name:k.rack_name,rack_number:k.rack_number.toUpperCase(),warehouse_id:k.warehouse_id||void 0}),await O(),p(!1)}catch(j){q(j.response?.data?.detail||"Failed to add rack")}finally{A(!1)}},[Z,U]=m.useState(!1),[W,te]=m.useState(null),me=E=>{te(E),U(!0)},R=async()=>{if(W)try{await Di.delete(W.id),window.toast?.success("Rack deleted successfully"),await O()}catch(E){console.error("Failed to delete rack:",E),window.toast?.error(E.response?.data?.detail||"Failed to delete rack")}finally{U(!1),te(null)}},ee=i.filter(E=>{const j=!f||E.rack_name.toLowerCase().includes(f.toLowerCase())||E.rack_number.toLowerCase().includes(f.toLowerCase()),B=!_||E.warehouse_id===_;return j&&B}),I={total:i.length,warehouses:new Set(i.map(E=>E.warehouse_id).filter(Boolean)).size},xe=[{header:"Rack Name",key:"rack_name",render:E=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600 text-[18px]",children:"view_column"})}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:E.rack_name})]})},{header:"Rack Number",key:"rack_number",render:E=>e.jsx("span",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:E.rack_number})},{header:"Warehouse",key:"warehouse_name",render:E=>e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:E.warehouse_name||"-"})},{header:"Created",key:"created_at",render:E=>e.jsx("span",{className:"text-sm text-slate-500",children:new Date(E.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:E=>e.jsx("div",{className:"flex justify-end gap-1",children:r("racks.delete")&&e.jsx(re,{variant:"ghost",onClick:()=>me(E),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})})}],L=ee.slice((se-1)*D,se*D);return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Rack Master",subtitle:"Manage racks for physical stock location.",actions:r("racks.create")&&e.jsx(re,{variant:"primary",onClick:P,className:"bg-purple-600 hover:bg-purple-700 text-white shadow-purple-500/30",icon:"add",children:"Add Rack"})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Racks",value:I.total,icon:"view_column",isActive:!0}),e.jsx(je,{title:"Warehouses",value:I.warehouses,icon:"warehouse",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:xe,data:L,loading:N,emptyMessage:"No racks found.",pagination:{currentPage:se,totalPages:Math.ceil(ee.length/D),onPageChange:Q,totalItems:ee.length,pageSize:D,onPageSizeChange:E=>{M(E),Q(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Rack List",count:ee.length,searchProps:{value:f,onChange:E=>{w(E),Q(1)},placeholder:"Search racks..."},embedded:!0})}),e.jsx(Lt,{isOpen:g,onClose:()=>p(!1),title:"Add New Rack",size:"md",children:e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[T&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:T}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Rack Name *",value:k.rack_name,onChange:E=>S({...k,rack_name:E.target.value}),placeholder:"e.g., Rack A1",required:!0}),e.jsx(fe,{label:"Rack Number *",value:k.rack_number,onChange:E=>S({...k,rack_number:E.target.value.toUpperCase()}),placeholder:"e.g., RA1",required:!0,className:"font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Warehouse"}),e.jsxs("select",{value:k.warehouse_id,onChange:E=>S({...k,warehouse_id:E.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),x.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>p(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:b,className:"bg-purple-600 hover:bg-purple-700",children:b?"Adding...":"Add Rack"})]})]})}),e.jsx(It,{isOpen:Z,onClose:()=>U(!1),onConfirm:R,title:"Delete Rack",message:`Are you sure you want to delete "${W?.rack_name}"? This action cannot be undone.`,confirmText:"Delete Rack"})]})}function Xn(){const n=ya(),{activeEntity:r,scope:o}=Aa(),{isLoading:i}=mt(),u=()=>{const T=n.pathname;return T.includes("/expiry")?"expiry":T.includes("/dead-stock")?"dead-stock":T.includes("/shop")?"shop":"warehouse"},[x,h]=m.useState(u()),[N,y]=m.useState([]),[g,p]=m.useState(!0),[f,w]=m.useState(""),[_,k]=m.useState("");m.useEffect(()=>{h(u())},[n.pathname]),m.useEffect(()=>{r?.type==="warehouse"?w(r.id):r?.type==="shop"&&k(r.id)},[r]),m.useEffect(()=>{S()},[x,f,_,r]);const S=async()=>{p(!0);try{const D=((await $l.getAlerts()).data?.alerts||[]).map(M=>({id:M.id||Math.random().toString(),medicine_name:M.medicine_name,brand:M.brand,batch_number:M.batch_number||"N/A",quantity:M.current_quantity||0,location_type:M.location_type||"warehouse",location_name:M.location_name||"Unknown",expiry_date:M.expiry_date||"",days_to_expiry:M.days_to_expiry||0,last_movement:M.last_movement_date}));y(D)}catch(T){console.error("Failed to load stock data:",T),y([])}finally{p(!1)}},b=[{id:"warehouse",label:"Warehouse Stock",icon:"warehouse",description:"All warehouse inventory"},{id:"shop",label:"Shop Stock (Derived)",icon:"storefront",description:"Stock derived from dispatches"},{id:"expiry",label:"Expiry Monitoring",icon:"schedule",description:"Items expiring soon"},{id:"dead-stock",label:"Dead Stock",icon:"block",description:"No movement in 90+ days"}],A={totalItems:N.length,totalQuantity:N.reduce((T,q)=>T+q.quantity,0),expiringSoon:N.filter(T=>T.days_to_expiry>0&&T.days_to_expiry<=30).length,expired:N.filter(T=>T.days_to_expiry<=0).length};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-2 py-1 text-xs font-bold bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:"READ-ONLY"})}),e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Inventory Oversight"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Global view of all inventory across warehouses and shops. This is a read-only view for Super Admin oversight."}),r&&o!=="global"&&e.jsxs("div",{className:"mt-2 text-sm text-slate-500",children:["Viewing as: ",e.jsx("span",{className:"font-semibold",children:r.name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"inventory_2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A.totalItems}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Items"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"package_2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A.totalQuantity.toLocaleString()}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Quantity"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-orange-200 dark:border-orange-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-orange-600",children:"schedule"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:A.expiringSoon}),e.jsx("p",{className:"text-xs text-slate-500",children:"Expiring Soon"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:A.expired}),e.jsx("p",{className:"text-xs text-slate-500",children:"Expired"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:b.map(T=>e.jsxs("button",{onClick:()=>h(T.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${x===T.id?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:T.icon}),T.label]},T.id))})}),e.jsx("div",{className:"px-6 py-3 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.find(T=>T.id===x)?.description})}),e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[(x==="warehouse"||x==="expiry"||x==="dead-stock")&&e.jsx($d,{value:f,onChange:w,placeholder:"All Warehouses",className:"w-[200px]",disabled:o!=="global"&&r?.type==="warehouse"}),x==="shop"&&e.jsx(Yd,{value:_,onChange:k,placeholder:"All Shops",className:"w-[200px]",disabled:o!=="global"&&r?.type==="shop"}),e.jsx("button",{onClick:S,className:"px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"p-6",children:g?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):N.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:b.find(T=>T.id===x)?.icon}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No data available"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:x==="dead-stock"?"No dead stock items found. All items have recent movement.":"No inventory data matches your filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Brand"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase",children:"Quantity"}),(x==="expiry"||x==="dead-stock")&&e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-500 uppercase",children:x==="expiry"?"Expiry":"Last Movement"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:N.map((T,q)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${q*20}ms`},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:T.medicine_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:T.brand||"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:T.batch_number})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-slate-400",children:T.location_type==="warehouse"?"warehouse":"storefront"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:T.location_name})]})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono font-medium text-slate-900 dark:text-white",children:T.quantity.toLocaleString()}),x==="expiry"&&e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.days_to_expiry<=0?"bg-red-100 text-red-700":T.days_to_expiry<=30?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:T.days_to_expiry<=0?"Expired":`${T.days_to_expiry} days`})}),x==="dead-stock"&&e.jsx("td",{className:"px-4 py-3 text-center text-sm text-slate-500",children:T.last_movement?new Date(T.last_movement).toLocaleDateString():"Never"})]},T.id))})]})})}),e.jsx("div",{className:"px-6 py-4 bg-purple-50 dark:bg-purple-900/10 border-t border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 dark:text-purple-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"info"}),e.jsx("p",{className:"text-sm",children:"This is a read-only oversight view. To make inventory adjustments, use the operational modules."})]})})]})]})}function bN(){const n=Fe(),{activeEntity:r}=Aa(),[o,i]=m.useState([]),[u,x]=m.useState([]),[h,N]=m.useState(!1),[y,g]=m.useState(""),[p,f]=m.useState(""),[w,_]=m.useState("decrease"),[k,S]=m.useState(""),[b,A]=m.useState(""),[T,q]=m.useState(!1),[D,M]=m.useState({type:"",text:""});m.useEffect(()=>{se()},[]),m.useEffect(()=>{y?(Q(y),f("")):(x([]),N(!1))},[y]);const se=async()=>{try{const H=await wt.list({size:500});i(H.data.items||H.data)}catch(H){console.error("Error loading medicines:",H)}},Q=async H=>{N(!0);try{console.log("Loading batches for medicine:",H);const Z=await wt.getBatches(H);console.log("Batches API response:",Z.data);const U=Z.data?.batches||[];console.log("Extracted batches:",U),x(U),U.length===0?M({type:"error",text:"No batches found for this medicine. Please add stock first."}):D.type==="error"&&D.text.includes("No batches")&&M({type:"",text:""})}catch(Z){console.error("Error loading batches:",Z),console.error("Error details:",Z.response?.data),x([]),M({type:"error",text:Z.response?.data?.detail||"Failed to load batches"})}finally{N(!1)}},O=async H=>{if(H.preventDefault(),!y||!p||!k||!b){M({type:"error",text:"Please fill all required fields"});return}q(!0),M({type:"",text:""});try{await $l.adjustStock({medicine_id:y,batch_id:p,adjustment_type:w,quantity:parseInt(k),reason:b}),M({type:"success",text:"Stock adjusted successfully"}),S(""),A(""),Q(y)}catch(Z){M({type:"error",text:Z.response?.data?.detail||"Failed to adjust stock"})}finally{q(!1)}},P=u.find(H=>H.id===p);return e.jsxs("div",{className:"p-6 lg:p-8 max-w-4xl mx-auto animate-fadeIn",children:[e.jsxs("button",{onClick:()=>n("/inventory"),className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white mb-6 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back"}),e.jsx("span",{children:"Back to Inventory"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white",children:" Stock Adjustment"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Correct stock levels for damages, expiry, or corrections."}),r&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-sm font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:r.type==="warehouse"?"warehouse":"storefront"}),e.jsx("span",{children:r.name})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[D.text&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-start gap-3 ${D.type==="error"?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:D.type==="error"?"error":"check_circle"}),e.jsx("p",{children:D.text})]}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(Fi,{label:"Medicine *",value:y,onChange:H=>g(H),required:!0,options:o.map(H=>({value:H.id,label:`${H.name} ${H.brand?`(${H.brand})`:""}`})),placeholder:"Select Medicine"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Batch *"}),e.jsxs("select",{value:p,onChange:H=>f(H.target.value),required:!0,disabled:!y||h,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50 disabled:opacity-50",children:[e.jsx("option",{value:"",children:y?h?"Loading batches...":u.length===0?"No batches available":"Select Batch":"Select medicine first"}),u.map(H=>e.jsxs("option",{value:H.id,children:[H.batch_number," (Stock: ",H.quantity,", Exp: ",new Date(H.expiry_date).toLocaleDateString(),")"]},H.id))]}),y&&u.length===0&&!h&&e.jsxs("p",{className:"mt-2 text-sm text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"info"}),"No batches found for this medicine. Add stock first."]})]})]}),P&&e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Current Stock"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:P.quantity})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Expiry Date"}),e.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mt-1",children:P.expiry_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Adjustment Type"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl",children:[e.jsx("button",{type:"button",onClick:()=>_("decrease"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${w==="decrease"?"bg-white dark:bg-slate-700 text-red-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Decrease (-)"}),e.jsx("button",{type:"button",onClick:()=>_("increase"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${w==="increase"?"bg-white dark:bg-slate-700 text-green-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Increase (+)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quantity to Adjust *"}),e.jsx("input",{type:"number",value:k,onChange:H=>S(H.target.value),min:"1",placeholder:"Example: 5",required:!0,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Reason for Adjustment *"}),e.jsx("textarea",{value:b,onChange:H=>A(H.target.value),placeholder:"e.g. Broken in transit, Expired stock removal...",required:!0,rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50 resize-none"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:T,className:`w-full py-3 rounded-xl font-semibold text-white shadow-lg shadow-blue-500/20 transition-all active:scale-[0.98] ${T?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"}`,children:T?"Processing Adjustment...":"Confirm Adjustment"})})]})]})]})}function yN(){const[n,r]=m.useState([]),[o,i]=m.useState(!0),[u,x]=m.useState({total:0,creates:0,updates:0,deletes:0}),[h,N]=m.useState(""),[y,g]=m.useState(""),[p,f]=m.useState("");m.useEffect(()=>{w()},[h,y]);const w=async()=>{i(!0);try{const[b,A]=await Promise.all([v0.list({size:100,action:h||void 0,entity_type:y||void 0}),v0.getStats()]);r(b.data.items?.map(T=>({...T,timestamp:T.created_at,details:T.new_values||""}))||[]),x(A.data)}catch(b){console.error("Failed to load audit logs:",b)}finally{i(!1)}},_=b=>{switch(b?.toUpperCase()){case"CREATE":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"UPDATE":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"DELETE":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"LOGIN":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"LOGOUT":return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400"}},k=b=>{switch(b?.toLowerCase()){case"warehouse":return"warehouse";case"shop":return"storefront";case"medicine":return"medication";case"user":return"person";case"invoice":return"receipt";case"dispatch":return"local_shipping";case"batch":return"inventory";case"rack":return"view_column";default:return"description"}},S=n.filter(b=>!p||b.entity_name?.toLowerCase().includes(p.toLowerCase())||b.user_name?.toLowerCase().includes(p.toLowerCase()));return e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Audit Logs"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Complete audit trail of all system activities. Track who did what and when."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600",children:"history"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.total}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Logs"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-green-200 dark:border-green-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"add_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.creates}),e.jsx("p",{className:"text-xs text-slate-500",children:"Creates"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"edit"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.updates}),e.jsx("p",{className:"text-xs text-slate-500",children:"Updates"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"delete"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.deletes}),e.jsx("p",{className:"text-xs text-slate-500",children:"Deletes"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:p,onChange:b=>f(b.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})}),e.jsxs("select",{value:h,onChange:b=>N(b.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"CREATE",children:"Create"}),e.jsx("option",{value:"UPDATE",children:"Update"}),e.jsx("option",{value:"DELETE",children:"Delete"})]}),e.jsxs("select",{value:y,onChange:b=>g(b.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Entities"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"shop",children:"Shop"}),e.jsx("option",{value:"medicine",children:"Medicine"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"invoice",children:"Invoice"}),e.jsx("option",{value:"dispatch",children:"Dispatch"}),e.jsx("option",{value:"rack",children:"Rack"})]}),e.jsx("button",{onClick:w,className:"p-2.5 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Refresh",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:o?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):S.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"history"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No logs found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Adjust your filters to see more results"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Action"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Entity"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"IP"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:S.map((b,A)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${A*20}ms`},children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm text-slate-900 dark:text-white",children:new Date(b.timestamp||b.created_at).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(b.timestamp||b.created_at).toLocaleTimeString()})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:b.user_name||"System"}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:b.user_role?.replace("_"," ")||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${_(b.action)}`,children:b.action})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-slate-400",children:k(b.entity_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:b.entity_name||b.entity_id||"-"}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:b.entity_type})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-xs text-slate-500",children:b.ip_address||"-"})})]},b.id))})]})})})]})}function vN(){const[n,r]=m.useState([]),[o,i]=m.useState(!0),[u,x]=m.useState({total:0,successful:0,failed:0}),[h,N]=m.useState(""),[y,g]=m.useState(""),[p,f]=m.useState("");m.useEffect(()=>{w()},[h]);const w=async()=>{i(!0);try{const[S,b]=await Promise.all([j0.list({size:100,status:h||void 0}),j0.getStats()]);r(S.data.items||[]),x(b.data)}catch(S){console.error("Failed to load login activity:",S)}finally{i(!1)}},_=n.filter(S=>{const b=!p||S.user_name?.toLowerCase().includes(p.toLowerCase())||S.user_email?.toLowerCase().includes(p.toLowerCase()),A=!y||S.user_role===y;return b&&A}),k=n.filter(S=>S.action==="login_success"&&new Date(S.created_at).toDateString()===new Date().toDateString()).length;return e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Login Activity"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Monitor user login activity and identify security issues."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"login"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.total}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Logins"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-green-200 dark:border-green-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.successful}),e.jsx("p",{className:"text-xs text-slate-500",children:"Successful"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.failed}),e.jsx("p",{className:"text-xs text-slate-500",children:"Failed"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-purple-200 dark:border-purple-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"person"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:k}),e.jsx("p",{className:"text-xs text-slate-500",children:"Active Today"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:p,onChange:S=>f(S.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})}),e.jsxs("select",{value:h,onChange:S=>N(S.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Successful"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:y,onChange:S=>g(S.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"warehouse_admin",children:"Warehouse Admin"}),e.jsx("option",{value:"shop_owner",children:"Shop Owner"}),e.jsx("option",{value:"pharmacist",children:"Pharmacist"})]}),e.jsx("button",{onClick:w,className:"p-2.5 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Refresh",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:o?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):_.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"login"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No login records found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Adjust your filters to see more results"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Login Time"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"IP Address"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.map((S,b)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${b*20}ms`},children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:S.user_name||"Unknown"}),e.jsx("p",{className:"text-xs text-slate-500",children:S.user_email})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded-full capitalize",children:S.user_role?.replace("_"," ")||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-900 dark:text-white",children:new Date(S.created_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-slate-600 dark:text-slate-400",children:S.ip_address||"-"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${S.action==="login_success"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:S.action==="login_success"?"Success":"Failed"})})]},S.id))})]})})]})}function jN(){const{hasPermission:n}=ra(),{user:r}=We(),o=n(N0.ROLES_VIEW),i=n(N0.ROLES_MANAGE),[u,x]=m.useState([]),[h,N]=m.useState([]),[y,g]=m.useState([]),[p,f]=m.useState(!0),[w,_]=m.useState(!1),[k,S]=m.useState(null),[b,A]=m.useState({name:"",description:"",entity_type:"",permission_ids:[]}),[T,q]=m.useState(!1),[D,M]=m.useState("");m.useEffect(()=>{o&&r?se():o||f(!1)},[o,r]);const se=async()=>{f(!0);try{const[L,E,j]=await Promise.all([Zn.list(),mj.list(),Hl.list({size:500})]);let B=L.data.items||[];r?.role==="warehouse_admin"&&(B=B.filter(F=>F.name!=="super_admin"&&F.entity_type!=="shop")),x(B),N(E.data.items||[]),g(j.data.items||[])}catch(L){console.error("Failed to load data:",L)}finally{f(!1)}},Q=()=>{S(null),A({name:"",description:"",entity_type:null,permission_ids:[]}),M(""),_(!0)},O=L=>{S(L),A({name:L.name,description:L.description||"",entity_type:L.entity_type,permission_ids:L.permissions.map(E=>E.id)}),M(""),_(!0)},P=async L=>{if(L.preventDefault(),!b.name.trim()){M("Role name is required");return}q(!0),M("");try{k?await Zn.update(k.id,b):await Zn.create(b),_(!1),se()}catch(E){M(E.response?.data?.detail||"Failed to save role")}finally{q(!1)}},[H,Z]=m.useState(!1),[U,W]=m.useState(null),te=L=>{W(L),Z(!0)},me=async()=>{if(U)try{await Zn.delete(U.id),window.toast?.success("Role deleted successfully"),se()}catch(L){console.error("Failed to delete role:",L),window.toast?.error(L.response?.data?.detail||"Failed to delete role")}finally{Z(!1),W(null)}},R=L=>{A(E=>({...E,permission_ids:E.permission_ids.includes(L)?E.permission_ids.filter(j=>j!==L):[...E.permission_ids,L]}))},ee=L=>y.filter(E=>E.role===L),I=h.reduce((L,E)=>(L[E.module]||(L[E.module]=[]),L[E.module].push(E),L),{}),xe=L=>{switch(L){case"global":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"warehouse":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"shop":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}};return o?e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Roles & Permissions"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Manage user roles and their permissions. System roles cannot be modified."})]}),i&&e.jsxs("button",{onClick:Q,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-medium shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"add"}),"Create Role"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"admin_panel_settings"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"shield"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.filter(L=>L.is_system).length}),e.jsx("p",{className:"text-xs text-slate-500",children:"System Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"tune"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.filter(L=>!L.is_system).length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Custom Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"key"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Permissions"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:p?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-600"})}):u.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"admin_panel_settings"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No roles found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create your first role to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:u.map((L,E)=>{const j=ee(L.name);return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4 border border-slate-200 dark:border-slate-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors animate-fadeIn",style:{animationDelay:`${E*50}ms`},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${L.is_system?"bg-blue-100 dark:bg-blue-900/30":"bg-purple-100 dark:bg-purple-900/30"}`,children:e.jsx("span",{className:`material-symbols-outlined ${L.is_system?"text-blue-600":"text-purple-600"}`,children:L.is_system?"shield":"badge"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:L.name.replace(/_/g," ")}),e.jsxs("div",{className:"flex gap-1 mt-0.5",children:[L.is_system&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",children:"System"}),L.entity_type&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded capitalize ${xe(L.entity_type)}`,children:L.entity_type}),!L.entity_type&&!L.is_system&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",children:"Custom"})]})]})]}),!L.is_system&&i&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>O(L),className:"p-1.5 text-slate-400 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{onClick:()=>te(L),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-3 line-clamp-2",children:L.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"key"}),e.jsxs("span",{children:[L.permissions?.length||0," permissions"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"group"}),e.jsxs("span",{children:[j.length," users"]})]})]}),L.permissions&&L.permissions.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[L.permissions.slice(0,4).map(B=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${xe(B.scope)}`,title:B.code,children:B.action},B.id)),L.permissions.length>4&&e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-600 rounded-full",children:["+",L.permissions.length-4," more"]})]})})]},L.id)})})}),w&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate-scaleIn",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:k?"Edit Role":"Create New Role"}),k?.is_system&&e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:" System roles have limited editing options"})]}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-6 max-h-[calc(90vh-180px)] overflow-y-auto",children:[D&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:D}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:L=>A({...b,name:L.target.value}),placeholder:"e.g., Sales Manager",disabled:k?.is_system,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Entity Type"}),e.jsxs("select",{value:b.entity_type||"",onChange:L=>A({...b,entity_type:L.target.value||null}),disabled:k?.is_system,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[e.jsx("option",{value:"",children:"None (Global)"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"shop",children:"Shop"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:L=>A({...b,description:L.target.value}),placeholder:"Brief description of this role...",rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:["Permissions (",b.permission_ids.length," selected)"]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:Object.entries(I).map(([L,E])=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 capitalize",children:L.replace(/_/g," ")}),e.jsxs("span",{className:"text-xs text-slate-400",children:[E.length," permissions"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(j=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",title:j.description||j.code,children:[e.jsx("input",{type:"checkbox",checked:b.permission_ids.includes(j.id),onChange:()=>R(j.id),disabled:k?.is_system&&k?.name==="super_admin",className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 group-hover:text-slate-900 dark:group-hover:text-white",children:j.action}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${xe(j.scope)}`,children:j.scope})]},j.id))})]},L))})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-5 py-2.5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:P,disabled:T||k?.is_system&&k?.name==="super_admin",className:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-medium shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:T?"Saving...":k?"Update Role":"Create Role"})]})]})}),e.jsx(It,{isOpen:H,onClose:()=>Z(!1),onConfirm:me,title:"Delete Role",message:`Are you sure you want to delete "${U?.name}"? This action cannot be undone.`,confirmText:"Delete Role"})]}):e.jsx("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-12 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-red-500 mb-4",children:"block"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"You don't have permission to view roles and permissions."}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-2",children:"Contact your administrator if you need access."})]})})}function NN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,y]=m.useState(!1),[g,p]=m.useState(null),[f,w]=m.useState({name:"",description:"",parent_id:"",is_active:!0}),[_,k]=m.useState(!1),[S,b]=m.useState(""),[A,T]=m.useState(""),[q,D]=m.useState(10),[M,se]=m.useState(1);m.useEffect(()=>{n&&!r("categories.view")&&o("/")},[n,o,r]),m.useEffect(()=>{Q()},[]);const Q=async()=>{h(!0);try{const B=await Ae.listCategories();u(B.data.items||[])}catch(B){console.error("Failed to load categories:",B)}finally{h(!1)}},O=()=>{p(null),w({name:"",description:"",parent_id:"",is_active:!0}),b(""),y(!0)},P=B=>{p(B),w({name:B.name,description:B.description||"",parent_id:B.parent_id||"",is_active:B.is_active}),b(""),y(!0)},H=async B=>{try{await Ae.updateCategory(B.id,{is_active:!B.is_active}),window.toast?.success(`${B.name} ${B.is_active?"deactivated":"activated"}`),Q()}catch(F){window.toast?.error(F.response?.data?.detail||"Failed to update status")}},Z=async B=>{if(B.preventDefault(),!f.name.trim()){b("Category name is required");return}k(!0),b("");try{const F={...f,parent_id:f.parent_id||null};g?await Ae.updateCategory(g.id,F):await Ae.createCategory(F),y(!1),Q()}catch(F){b(F.response?.data?.detail||"Failed to save category")}finally{k(!1)}},[U,W]=m.useState(!1),[te,me]=m.useState(null),R=B=>{me(B),W(!0)},ee=async()=>{if(te)try{await Ae.deleteCategory(te.id),window.toast?.success("Category deleted successfully"),Q()}catch(B){console.error("Failed to delete category:",B),window.toast?.error(B.response?.data?.detail||"Failed to delete category")}finally{W(!1),me(null)}},I=i.filter(B=>B.name.toLowerCase().includes(A.toLowerCase())||B.description?.toLowerCase().includes(A.toLowerCase())),xe=B=>B?i.find(pe=>pe.id===B)?.name:null,L={total:i.length,active:i.filter(B=>B.is_active).length,subcategories:i.filter(B=>B.parent_id).length},E=[{header:"Category",key:"name",render:B=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-emerald-600 text-[18px]",children:"folder"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:B.name}),B.description&&e.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:B.description})]})]})},{header:"Parent",key:"parent_id",render:B=>{const F=xe(B.parent_id);return F?e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:F}):e.jsx("span",{className:"text-sm text-slate-400",children:""})}},{header:"Status",key:"is_active",align:"center",render:B=>e.jsx(Ve,{variant:B.is_active?"success":"secondary",children:B.is_active?"Active":"Inactive"})},{header:"Created",key:"created_at",render:B=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(B.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:B=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("categories.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>H(B),className:`!p-1.5 h-8 w-8 ${B.is_active?"text-amber-600":"text-green-600"}`,title:B.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:B.is_active?"toggle_on":"toggle_off"})}),r("categories.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>P(B),className:"!p-1.5 h-8 w-8 text-emerald-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("categories.delete")&&e.jsx(re,{variant:"ghost",onClick:()=>R(B),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],j=I.slice((M-1)*q,M*q);return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Categories",subtitle:"Manage medicine categories and subcategories.",actions:r("categories.create")&&e.jsx(re,{variant:"primary",onClick:O,className:"bg-gradient-to-r from-emerald-600 to-teal-600",icon:"add",children:"Add Category"})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Categories",value:L.total,icon:"category",isActive:!0}),e.jsx(je,{title:"Active",value:L.active,icon:"check_circle",trend:"neutral"}),e.jsx(je,{title:"Subcategories",value:L.subcategories,icon:"account_tree",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:E,data:j,loading:x,emptyMessage:"No categories found.",pagination:{currentPage:M,totalPages:Math.ceil(I.length/q),onPageChange:se,totalItems:I.length,pageSize:q,onPageSizeChange:B=>{D(B),se(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Category List",count:I.length,searchProps:{value:A,onChange:B=>{T(B),se(1)},placeholder:"Search categories..."},embedded:!0})}),e.jsx(Lt,{isOpen:N,onClose:()=>y(!1),title:g?"Edit Category":"Add Category",size:"md",children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsx(fe,{label:"Category Name *",value:f.name,onChange:B=>w({...f,name:B.target.value}),placeholder:"e.g., Antibiotics",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Parent Category"}),e.jsxs("select",{value:f.parent_id,onChange:B=>w({...f,parent_id:B.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),i.filter(B=>B.id!==g?.id&&!B.parent_id).map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:B=>w({...f,description:B.target.value}),placeholder:"Brief description...",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:B=>w({...f,is_active:B.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:_,className:"bg-gradient-to-r from-emerald-600 to-teal-600",children:_?"Saving...":"Save"})]})]})}),e.jsx(It,{isOpen:U,onClose:()=>W(!1),onConfirm:ee,title:"Delete Category",message:`Are you sure you want to delete "${te?.name}"? This action cannot be undone.`,confirmText:"Delete Category"})]})}function wN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,y]=m.useState(!1),[g,p]=m.useState(null),[f,w]=m.useState({name:"",short_name:"",description:"",is_active:!0}),[_,k]=m.useState(!1),[S,b]=m.useState(""),[A,T]=m.useState(""),[q,D]=m.useState(10),[M,se]=m.useState(1);m.useEffect(()=>{n&&!r("units.view")&&o("/")},[n,o,r]),m.useEffect(()=>{Q()},[]);const Q=async()=>{h(!0);try{const j=await Ae.listUnits();u(j.data.items||[])}catch(j){console.error("Failed to load units:",j)}finally{h(!1)}},O=()=>{p(null),w({name:"",short_name:"",description:"",is_active:!0}),b(""),y(!0)},P=j=>{p(j),w({name:j.name,short_name:j.short_name,description:j.description||"",is_active:j.is_active}),b(""),y(!0)},H=async j=>{try{await Ae.updateUnit(j.id,{is_active:!j.is_active}),window.toast?.success(`${j.name} ${j.is_active?"deactivated":"activated"}`),Q()}catch(B){window.toast?.error(B.response?.data?.detail||"Failed to update status")}},Z=async j=>{if(j.preventDefault(),!f.name.trim()||!f.short_name.trim()){b("Name and short name are required");return}k(!0),b("");try{g?await Ae.updateUnit(g.id,f):await Ae.createUnit(f),y(!1),Q()}catch(B){b(B.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,W]=m.useState(!1),[te,me]=m.useState(null),R=j=>{me(j),W(!0)},ee=async()=>{if(te)try{await Ae.deleteUnit(te.id),window.toast?.success("Unit deleted successfully"),Q()}catch(j){console.error("Failed to delete unit:",j),window.toast?.error(j.response?.data?.detail||"Failed to delete unit")}finally{W(!1),me(null)}},I=i.filter(j=>j.name.toLowerCase().includes(A.toLowerCase())),xe={total:i.length,active:i.filter(j=>j.is_active).length},L=[{header:"Unit Name",key:"name",render:j=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-xs",children:j.short_name.slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:j.name}),j.description&&e.jsx("p",{className:"text-xs text-slate-500",children:j.description})]})]})},{header:"Short Name",key:"short_name",render:j=>e.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs",children:j.short_name})},{header:"Status",key:"is_active",align:"center",render:j=>e.jsx(Ve,{variant:j.is_active?"success":"secondary",children:j.is_active?"Active":"Inactive"})},{header:"Created",key:"created_at",render:j=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(j.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:j=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("units.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>H(j),className:`!p-1.5 h-8 w-8 ${j.is_active?"text-amber-600":"text-green-600"}`,title:j.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:j.is_active?"toggle_on":"toggle_off"})}),r("units.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>P(j),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("units.delete")&&e.jsx(re,{variant:"ghost",onClick:()=>R(j),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],E=I.slice((M-1)*q,M*q);return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Units",subtitle:"Manage units of measurement.",actions:r("units.create")&&e.jsx(re,{variant:"primary",onClick:O,className:"bg-gradient-to-r from-blue-600 to-cyan-600",icon:"add",children:"Add Unit"})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Units",value:xe.total,icon:"straighten",isActive:!0}),e.jsx(je,{title:"Active",value:xe.active,icon:"check_circle",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:L,data:E,loading:x,emptyMessage:"No units found.",pagination:{currentPage:M,totalPages:Math.ceil(I.length/q),onPageChange:se,totalItems:I.length,pageSize:q,onPageSizeChange:j=>{D(j),se(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Unit List",count:I.length,searchProps:{value:A,onChange:j=>{T(j),se(1)},placeholder:"Search units..."},embedded:!0})}),e.jsx(Lt,{isOpen:N,onClose:()=>y(!1),title:g?"Edit Unit":"Add Unit",size:"sm",children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsx(fe,{label:"Name *",value:f.name,onChange:j=>w({...f,name:j.target.value}),placeholder:"e.g., Tablet",required:!0}),e.jsx(fe,{label:"Short Name *",value:f.short_name,onChange:j=>w({...f,short_name:j.target.value}),placeholder:"e.g., Tab",maxLength:10,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:j=>w({...f,description:j.target.value}),rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:j=>w({...f,is_active:j.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:_,className:"bg-gradient-to-r from-blue-600 to-cyan-600",children:_?"Saving...":"Save"})]})]})}),e.jsx(It,{isOpen:U,onClose:()=>W(!1),onConfirm:ee,title:"Delete Unit",message:`Are you sure you want to delete "${te?.name}"? This action cannot be undone.`,confirmText:"Delete Unit"})]})}function kN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),{getMaster:i,isLoading:u}=mt(),x=i("gst_slabs");console.log("GST Slabs Debug:",{mastersLoading:u,gstSlabs:x,count:x?.length});const[h,N]=m.useState([]),[y,g]=m.useState(!0),[p,f]=m.useState(!1),[w,_]=m.useState(null),[k,S]=m.useState({hsn_code:"",description:"",gst_slab_id:"",gst_rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0,is_active:!0}),[b,A]=m.useState(!1),[T,q]=m.useState(""),[D,M]=m.useState(""),[se,Q]=m.useState(10),[O,P]=m.useState(1),[H,Z]=m.useState(0);m.useEffect(()=>{n&&!r("hsn.view")&&o("/")},[n,o,r]),m.useEffect(()=>{U()},[O,se,D]);const U=async()=>{g(!0);try{const le=await Ae.listHSN({page:O,size:se,search:D});le.data&&Array.isArray(le.data.items)?(N(le.data.items),Z(le.data.total||0)):(N([]),Z(0))}catch(le){console.error("Failed to load HSN codes:",le),N([])}finally{g(!1)}},W=()=>{_(null),S({hsn_code:"",description:"",gst_slab_id:"",gst_rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0,is_active:!0}),q(""),f(!0)},te=le=>{_(le),S({hsn_code:le.hsn_code,description:le.description,gst_slab_id:le.gst_slab_id||"",gst_rate:le.gst_rate,cgst_rate:le.cgst_rate,sgst_rate:le.sgst_rate,igst_rate:le.igst_rate,is_active:le.is_active}),q(""),f(!0)},me=async le=>{try{await Ae.updateHSN(le.id,{is_active:!le.is_active}),window.toast?.success(`HSN ${le.hsn_code} ${le.is_active?"deactivated":"activated"}`),U()}catch(be){window.toast?.error(be.response?.data?.detail||"Failed to update status")}},R=le=>{const be=x.find(Le=>Le.id===le);be&&S({...k,gst_slab_id:le,gst_rate:be.rate,cgst_rate:be.rate/2,sgst_rate:be.rate/2,igst_rate:be.rate})},ee=async le=>{if(le.preventDefault(),!k.hsn_code.trim()||!k.description.trim()){q("HSN code and description are required");return}A(!0),q("");try{w?await Ae.updateHSN(w.id,k):await Ae.createHSN(k),f(!1),U()}catch(be){q(be.response?.data?.detail||"Failed to save")}finally{A(!1)}},[I,xe]=m.useState(!1),[L,E]=m.useState(null),j=le=>{E(le),xe(!0)},B=async()=>{if(L)try{await Ae.deleteHSN(L.id),window.toast?.success("HSN Code deleted successfully"),U()}catch(le){console.error("Failed to delete HSN Code:",le),window.toast?.error(le.response?.data?.detail||"Failed to delete HSN Code")}finally{xe(!1),E(null)}},F={total:H,gst5:h.filter(le=>le.gst_rate===5).length,gst12:h.filter(le=>le.gst_rate===12).length},pe=[{header:"HSN Code",key:"hsn_code",render:le=>e.jsx("span",{className:"font-mono font-semibold text-amber-600 dark:text-amber-500",children:le.hsn_code})},{header:"Description",key:"description",render:le=>e.jsx("span",{className:"text-slate-900 dark:text-white",children:le.description})},{header:"GST %",key:"gst_rate",align:"center",render:le=>e.jsxs(Ve,{variant:"warning",children:[le.gst_rate,"%"]})},{header:"CGST",key:"cgst_rate",align:"center",render:le=>e.jsxs("span",{className:"text-slate-500",children:[le.cgst_rate,"%"]})},{header:"SGST",key:"sgst_rate",align:"center",render:le=>e.jsxs("span",{className:"text-slate-500",children:[le.sgst_rate,"%"]})},{header:"Status",key:"is_active",align:"center",render:le=>e.jsx(Ve,{variant:le.is_active?"success":"secondary",children:le.is_active?"Active":"Inactive"})},{header:"Actions",key:"id",align:"right",render:le=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("hsn.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>me(le),className:`!p-1.5 h-8 w-8 ${le.is_active?"text-amber-600":"text-green-600"}`,title:le.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:le.is_active?"toggle_on":"toggle_off"})}),r("hsn.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>te(le),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("hsn.delete")&&e.jsx(re,{variant:"ghost",onClick:()=>j(le),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ge,{loading:u,children:[e.jsx(ge.Header,{title:"HSN Codes",subtitle:"Manage HSN codes with GST rates.",actions:r("hsn.create")&&e.jsx(re,{variant:"primary",onClick:W,className:"bg-gradient-to-r from-amber-600 to-orange-600",icon:"add",children:"Add HSN Code"})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total HSN Codes",value:F.total,icon:"tag",isActive:!0}),e.jsx(je,{title:"5% GST Items",value:F.gst5,icon:"percent",trend:"neutral"}),e.jsx(je,{title:"12% GST Items",value:F.gst12,icon:"percent",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:pe,data:h,loading:y,emptyMessage:"No HSN codes found.",pagination:{currentPage:O,totalPages:Math.ceil(H/se),onPageChange:P,totalItems:H,pageSize:se,onPageSizeChange:le=>{Q(le),P(1)}},headerSlot:e.jsx(ge.ListControls,{title:"HSN List",count:H,searchProps:{value:D,onChange:le=>{M(le),P(1)},placeholder:"Search HSN codes..."},embedded:!0})}),e.jsx(Lt,{isOpen:p,onClose:()=>f(!1),title:w?"Edit HSN Code":"Add HSN Code",size:"md",children:e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[T&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:T}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"HSN Code *",value:k.hsn_code,onChange:le=>S({...k,hsn_code:le.target.value}),placeholder:"e.g. 3004",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Slab *"}),e.jsxs("select",{value:k.gst_slab_id,onChange:le=>R(le.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Select GST Slab"}),x.map(le=>e.jsxs("option",{value:le.id,children:[le.rate,"% GST",le.description?` - ${le.description}`:""]},le.id))]})]})]}),e.jsx(fe,{label:"Description *",value:k.description,onChange:le=>S({...k,description:le.target.value}),placeholder:"e.g., Medicaments",required:!0}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-200 mb-3 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"Auto-calculated Tax Rates"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"Total"}),e.jsxs("div",{className:"mt-1 font-mono font-bold text-blue-600",children:[k.gst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"CGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.cgst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"SGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.sgst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"IGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.igst_rate,"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:k.is_active,onChange:le=>S({...k,is_active:le.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-amber-600 focus:ring-amber-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>f(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:b,className:"bg-gradient-to-r from-amber-600 to-orange-600",children:b?"Saving...":"Save"})]})]})}),e.jsx(It,{isOpen:I,onClose:()=>xe(!1),onConfirm:B,title:"Delete HSN Code",message:`Are you sure you want to delete HSN Code "${L?.hsn_code}"? This action cannot be undone.`,confirmText:"Delete HSN Code"})]})}function SN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),{getMaster:i,isLoading:u}=mt(),x=i("gst_slabs"),[h,N]=m.useState({enable_gst:!0,default_gst_rate:12,enable_vat:!1,default_vat_rate:5,tax_inclusive_pricing:!1,round_off_tax:!0,gst_number:"",business_name:"",business_address:""}),[y,g]=m.useState(!0),[p,f]=m.useState(!1),[w,_]=m.useState(!1);m.useEffect(()=>{n&&!r("gst.view")&&o("/")},[n,o,r]),m.useEffect(()=>{k()},[]);const k=async()=>{g(!0);try{const b=await y0.getSettings();b.data&&N(b.data)}catch(b){console.error("Failed to load tax settings:",b)}finally{g(!1)}},S=async()=>{f(!0);try{await y0.updateSettings(h),_(!0),setTimeout(()=>_(!1),3e3)}catch(b){console.error("Failed to save:",b),alert("Failed to save settings")}finally{f(!1)}};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"spinner"})}):e.jsx(Zt,{title:"GST / VAT Settings",description:"Configure tax settings for your business",icon:"receipt_long",actions:w?e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),"Saved Successfully"]}):void 0,loading:y||u,children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(Ie,{title:"GST Configuration",icon:"receipt_long",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Enable GST"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Apply GST to all transactions"})]}),e.jsx("button",{onClick:()=>N({...h,enable_gst:!h.enable_gst}),className:`relative w-12 h-6 rounded-full transition-colors ${h.enable_gst?"bg-orange-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h.enable_gst?"left-7":"left-1"}`})})]}),h.enable_gst&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Default GST Rate"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.length>0?x.map(b=>e.jsxs("button",{onClick:()=>N({...h,default_gst_rate:b.rate}),className:`px-4 py-2 rounded-xl font-medium transition-all ${h.default_gst_rate===b.rate?"bg-orange-500 text-white shadow-lg shadow-orange-500/25":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200"}`,children:[b.rate,"%"]},b.id)):e.jsx("div",{className:"text-sm text-slate-500 italic",children:"No GST slabs found. Check master data."})})]}),e.jsx(fe,{label:"GST Number (GSTIN)",value:h.gst_number,onChange:b=>N({...h,gst_number:b.target.value}),placeholder:"e.g., 29ABCDE1234F1Z5",className:"font-mono"})]})]})}),e.jsx(Ie,{title:"VAT Configuration",icon:"percent",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Enable VAT"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Apply VAT in addition to or instead of GST"})]}),e.jsx("button",{onClick:()=>N({...h,enable_vat:!h.enable_vat}),className:`relative w-12 h-6 rounded-full transition-colors ${h.enable_vat?"bg-purple-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h.enable_vat?"left-7":"left-1"}`})})]}),h.enable_vat&&e.jsx(fe,{label:"Default VAT Rate (%)",type:"number",value:h.default_vat_rate,onChange:b=>N({...h,default_vat_rate:Number(b.target.value)}),className:"w-32"})]})}),e.jsx(Ie,{title:"Pricing Options",icon:"tune",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Tax Inclusive Pricing"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Product prices already include tax"})]}),e.jsx("button",{onClick:()=>N({...h,tax_inclusive_pricing:!h.tax_inclusive_pricing}),className:`relative w-12 h-6 rounded-full transition-colors ${h.tax_inclusive_pricing?"bg-blue-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h.tax_inclusive_pricing?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Round Off Tax"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Round tax amounts to nearest rupee"})]}),e.jsx("button",{onClick:()=>N({...h,round_off_tax:!h.round_off_tax}),className:`relative w-12 h-6 rounded-full transition-colors ${h.round_off_tax?"bg-blue-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h.round_off_tax?"left-7":"left-1"}`})})]})]})}),e.jsx(Ie,{title:"Business Details",icon:"business",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{label:"Business Name",value:h.business_name,onChange:b=>N({...h,business_name:b.target.value}),placeholder:"Your business name"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Business Address"}),e.jsx("textarea",{value:h.business_address,onChange:b=>N({...h,business_address:b.target.value}),placeholder:"Full business address",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 resize-none"})]})]})}),e.jsx("div",{className:"flex justify-end",children:r("gst.edit")&&e.jsxs(re,{variant:"primary",onClick:S,loading:p,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"save"}),p?"Saving...":"Save Settings"]})})]})})}function _N(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),{refresh:i,isLoading:u}=mt(),[x,h]=m.useState([]),[N,y]=m.useState(!0),[g,p]=m.useState(!1),[f,w]=m.useState(null),[_,k]=m.useState({rate:0,description:"",is_active:!0}),[S,b]=m.useState(!1),[A,T]=m.useState("");m.useEffect(()=>{n&&!r("gst.view")&&o("/")},[n,o,r]),m.useEffect(()=>{q()},[]);const q=async()=>{y(!0);try{const me=await Ae.listGSTSlabs();h(me.data.items||[])}catch(me){console.error("Failed to load GST slabs:",me)}finally{y(!1)}},D=()=>{w(null),k({rate:0,description:"",is_active:!0}),T(""),p(!0)},M=me=>{w(me),k({rate:me.rate,description:me.description||"",is_active:me.is_active}),T(""),p(!0)},se=async me=>{try{await Ae.updateGSTSlab(me.id,{is_active:!me.is_active}),window.toast?.success(`GST ${me.rate}% ${me.is_active?"deactivated":"activated"}`),q(),i()}catch(R){window.toast?.error(R.response?.data?.detail||"Failed to update status")}},Q=async me=>{if(me.preventDefault(),_.rate<=0){T("GST rate must be greater than 0");return}b(!0),T("");try{f?await Ae.updateGSTSlab(f.id,_):await Ae.createGSTSlab(_),p(!1),q(),i()}catch(R){T(R.response?.data?.detail||"Failed to save GST slab")}finally{b(!1)}},[O,P]=m.useState(!1),[H,Z]=m.useState(null),U=me=>{Z(me),P(!0)},W=async()=>{if(H)try{await Ae.deleteGSTSlab(H.id),window.toast?.success("GST Slab deleted successfully"),q(),i()}catch(me){console.error("Failed to delete GST Slab:",me),window.toast?.error(me.response?.data?.detail||"Failed to delete GST Slab")}finally{P(!1),Z(null)}},te=[0,5,12,18,28];return e.jsxs(Zt,{title:"GST Slabs",description:"Manage GST tax rates for your products",actions:r("gst.create")&&e.jsxs(re,{variant:"primary",onClick:D,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add GST Slab"]}),loading:u,children:[e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"info"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"GST Slabs are Required"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"GST Slabs must be created before you can add HSN Codes or Medicines. Standard Indian GST rates are 0%, 5%, 12%, 18%, and 28%."})]})]})}),x.length===0&&!N&&r("gst.create")&&e.jsxs(Ie,{title:"Quick Setup",icon:"bolt",children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Click to quickly add standard GST slabs:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:te.map(me=>e.jsxs(re,{variant:"secondary",onClick:async()=>{try{await Ae.createGSTSlab({rate:me,description:`GST ${me}%`}),q(),i()}catch(R){console.error(R)}},children:["Add ",me,"%"]},me))})]}),e.jsx(Ie,{className:"!p-0",children:N?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"spinner"})}):x.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"percent"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No GST Slabs"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create GST slabs to enable HSN codes and medicines"}),r("gst.create")&&e.jsx(re,{variant:"primary",className:"mt-4",onClick:D,children:"Add First GST Slab"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Rate"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"CGST"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"SGST"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:x.map(me=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[me.rate,"%"]})}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:me.description||"-"}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:[(me.rate/2).toFixed(1),"%"]}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:[(me.rate/2).toFixed(1),"%"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(Ve,{variant:me.is_active?"success":"secondary",children:me.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[r("gst.edit")&&e.jsx(re,{variant:"secondary",onClick:()=>se(me),className:`!p-1.5 ${me.is_active?"text-amber-600":"text-green-600"}`,title:me.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:me.is_active?"toggle_on":"toggle_off"})}),r("gst.edit")&&e.jsx(re,{variant:"secondary",onClick:()=>M(me),className:"!p-1.5",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("gst.delete")&&e.jsx(re,{variant:"secondary",onClick:()=>U(me),className:"!p-1.5 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},me.id))})]})})]}),e.jsx(Lt,{isOpen:g,onClose:()=>p(!1),title:f?"Edit GST Slab":"Add GST Slab",children:e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[A&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:A}),e.jsx(fe,{label:"GST Rate (%)",type:"number",value:_.rate,onChange:me=>k({..._,rate:Number(me.target.value)}),placeholder:"e.g., 18",min:0,max:100,required:!0}),e.jsx(fe,{label:"Description (Optional)",value:_.description,onChange:me=>k({..._,description:me.target.value}),placeholder:"e.g., Standard GST Rate"}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase mb-2",children:"Tax Breakdown Preview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-primary",children:[_.rate,"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total GST"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[(_.rate/2).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"CGST"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[(_.rate/2).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"SGST"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:_.is_active,onChange:me=>k({..._,is_active:me.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>p(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:S,children:S?"Saving...":f?"Update":"Create"})]})]})}),e.jsx(It,{isOpen:O,onClose:()=>P(!1),onConfirm:W,title:"Delete GST Slab",message:`Are you sure you want to delete GST Slab "${H?.rate}%"? This action cannot be undone.`,confirmText:"Delete Slab"})]})}function CN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,y]=m.useState(!1),[g,p]=m.useState(null),[f,w]=m.useState({name:"",code:"",contact_person:"",phone:"",email:"",gst_number:"",address:"",city:"",state:"",pincode:"",is_active:!0}),[_,k]=m.useState(!1),[S,b]=m.useState(""),[A,T]=m.useState(""),[q,D]=m.useState(10),[M,se]=m.useState(1);m.useEffect(()=>{n&&!r("suppliers.view")&&o("/")},[n,o,r]),m.useEffect(()=>{Q()},[]);const Q=async()=>{h(!0);try{const j=await Ae.listSuppliers();u(j.data.items||[])}catch(j){console.error("Failed to load suppliers:",j),u([])}finally{h(!1)}},O=()=>{p(null),w({name:"",code:"",contact_person:"",phone:"",email:"",gst_number:"",address:"",city:"",state:"",pincode:"",is_active:!0}),b(""),y(!0)},P=j=>{p(j),w({name:j.name,code:j.code,contact_person:j.contact_person||"",phone:j.phone||"",email:j.email||"",gst_number:j.gst_number||"",address:j.address||"",city:j.city||"",state:j.state||"",pincode:j.pincode||"",is_active:j.is_active}),b(""),y(!0)},H=async j=>{try{await Ae.updateSupplier(j.id,{is_active:!j.is_active}),window.toast?.success(`${j.name} ${j.is_active?"deactivated":"activated"}`),Q()}catch(B){window.toast?.error(B.response?.data?.detail||"Failed to update status")}},Z=async j=>{if(j.preventDefault(),!f.name.trim()||!f.code.trim()){b("Name and code are required");return}k(!0),b("");try{g?await Ae.updateSupplier(g.id,f):await Ae.createSupplier(f),y(!1),Q()}catch(B){b(B.response?.data?.detail||"Failed to save supplier")}finally{k(!1)}},[U,W]=m.useState(!1),[te,me]=m.useState(null),R=j=>{me(j),W(!0)},ee=async()=>{if(te)try{await Ae.deleteSupplier(te.id),window.toast?.success("Supplier deleted successfully"),Q()}catch(j){console.error("Failed to delete supplier:",j),window.toast?.error(j.response?.data?.detail||"Failed to delete supplier")}finally{W(!1),me(null)}},I=i.filter(j=>j.name.toLowerCase().includes(A.toLowerCase())||j.code.toLowerCase().includes(A.toLowerCase())),xe={total:i.length,active:i.filter(j=>j.is_active).length,inactive:i.filter(j=>!j.is_active).length,cities:new Set(i.map(j=>j.city).filter(Boolean)).size},L=[{header:"Code",key:"code",render:j=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:j.code})},{header:"Supplier",key:"name",render:j=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:j.name}),e.jsx("div",{className:"text-xs text-slate-500",children:j.city||"No Location"})]})},{header:"Contact",key:"contact_person",render:j=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:j.contact_person}),e.jsx("div",{className:"text-xs text-slate-500",children:j.phone})]})},{header:"GST Number",key:"gst_number",render:j=>e.jsx("span",{className:"font-mono text-xs",children:j.gst_number||"-"}),className:"hidden md:table-cell"},{header:"Status",key:"is_active",render:j=>e.jsx(Ve,{variant:j.is_active?"success":"secondary",children:j.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",render:j=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("suppliers.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>H(j),className:`!p-1.5 h-8 w-8 ${j.is_active?"text-amber-600":"text-green-600"}`,title:j.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:j.is_active?"toggle_on":"toggle_off"})}),r("suppliers.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>P(j),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("suppliers.delete")&&e.jsx(re,{variant:"ghost",onClick:()=>R(j),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}],E=I.slice((M-1)*q,M*q);return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Suppliers",subtitle:"Manage suppliers for stock entry and purchase orders",actions:r("suppliers.create")&&e.jsxs(re,{variant:"primary",onClick:O,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Supplier"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Suppliers",value:xe.total,icon:"local_shipping",isActive:!0}),e.jsx(je,{title:"Active",value:xe.active,icon:"check_circle",trend:"neutral"}),e.jsx(je,{title:"Inactive",value:xe.inactive,icon:"cancel",trend:"neutral"}),e.jsx(je,{title:"Cities",value:xe.cities,icon:"location_city",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:L,data:E,loading:x,emptyMessage:"No suppliers found.",pagination:{currentPage:M,totalPages:Math.ceil(I.length/q),onPageChange:se,totalItems:I.length,pageSize:q,onPageSizeChange:j=>{D(j),se(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Supplier List",count:I.length,searchProps:{value:A,onChange:j=>{T(j),se(1)},placeholder:"Search suppliers..."},embedded:!0})}),e.jsx(Lt,{isOpen:N,onClose:()=>y(!1),title:g?"Edit Supplier":"Add Supplier",size:"lg",children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Supplier Code *",value:f.code,onChange:j=>w({...f,code:j.target.value}),placeholder:"SUP001",required:!0}),e.jsx(fe,{label:"Supplier Name *",value:f.name,onChange:j=>w({...f,name:j.target.value}),placeholder:"ABC Pharmaceuticals",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Contact Person",value:f.contact_person,onChange:j=>w({...f,contact_person:j.target.value}),placeholder:"John Doe"}),e.jsx(fe,{label:"Phone",value:f.phone,onChange:j=>w({...f,phone:j.target.value}),placeholder:"+91 9876543210"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Email",type:"email",value:f.email,onChange:j=>w({...f,email:j.target.value}),placeholder:"supplier@example.com"}),e.jsx(fe,{label:"GST Number",value:f.gst_number,onChange:j=>w({...f,gst_number:j.target.value}),placeholder:"29ABCDE1234F1Z5",className:"font-mono"})]}),e.jsx(fe,{label:"Address",value:f.address,onChange:j=>w({...f,address:j.target.value}),placeholder:"Street address"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(fe,{label:"City",value:f.city,onChange:j=>w({...f,city:j.target.value}),placeholder:"Mumbai"}),e.jsx(fe,{label:"State",value:f.state,onChange:j=>w({...f,state:j.target.value}),placeholder:"Maharashtra"}),e.jsx(fe,{label:"Pincode",value:f.pincode,onChange:j=>w({...f,pincode:j.target.value}),placeholder:"400001"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:j=>w({...f,is_active:j.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":"Save"})]})]})}),e.jsx(It,{isOpen:U,onClose:()=>W(!1),onConfirm:ee,title:"Delete Supplier",message:`Are you sure you want to delete "${te?.name}"? This action cannot be undone.`,confirmText:"Delete Supplier"})]})}function EN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,y]=m.useState(!1),[g,p]=m.useState(null),[f,w]=m.useState({name:"",code:"",description:"",adjustment_type:"decrease",is_active:!0}),[_,k]=m.useState(!1),[S,b]=m.useState(""),[A,T]=m.useState(""),[q,D]=m.useState(1),[M,se]=m.useState(10);m.useEffect(()=>{n&&!r("adjustment_reasons.view")&&o("/")},[n,o,r]),m.useEffect(()=>{Q()},[]);const Q=async()=>{h(!0);try{const j=await Ae.listAdjustmentReasons();u(j.data.items||[])}catch(j){console.error("Failed to load adjustment reasons:",j),i.length===0&&u([])}finally{h(!1)}},O=()=>{p(null),w({name:"",code:"",description:"",adjustment_type:"decrease",is_active:!0}),b(""),y(!0)},P=j=>{p(j),w({name:j.name,code:j.code,description:j.description||"",adjustment_type:j.adjustment_type,is_active:j.is_active}),b(""),y(!0)},H=async j=>{try{await Ae.updateAdjustmentReason(j.id,{is_active:!j.is_active}),window.toast?.success(`${j.name} ${j.is_active?"deactivated":"activated"}`),Q()}catch(B){window.toast?.error(B.response?.data?.detail||"Failed to update status")}},Z=async j=>{if(j.preventDefault(),!f.name.trim()||!f.code.trim()){b("Name and code are required");return}k(!0),b("");try{g?await Ae.updateAdjustmentReason(g.id,f):await Ae.createAdjustmentReason(f),y(!1),Q()}catch(B){b(B.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,W]=m.useState(!1),[te,me]=m.useState(null),R=j=>{me(j),W(!0)},ee=async()=>{if(te)try{await Ae.deleteAdjustmentReason(te.id),window.toast?.success("Adjustment reason deleted successfully"),Q()}catch(j){console.error("Failed to delete adjustment reason:",j),window.toast?.error(j.response?.data?.detail||"Failed to delete adjustment reason")}finally{W(!1),me(null)}},I=i.filter(j=>j.name.toLowerCase().includes(A.toLowerCase())||j.code.toLowerCase().includes(A.toLowerCase())),xe=I.slice((q-1)*M,q*M),L={total:i.length,increase:i.filter(j=>j.adjustment_type==="increase").length,decrease:i.filter(j=>j.adjustment_type==="decrease").length},E=[{header:"Code",key:"code",render:j=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:j.code})},{header:"Reason Name",key:"name",render:j=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:j.name}),j.description&&e.jsx("div",{className:"text-xs text-slate-500",children:j.description})]})},{header:"Type",key:"adjustment_type",render:j=>e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full ${j.adjustment_type==="increase"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:j.adjustment_type==="increase"?"arrow_upward":"arrow_downward"}),j.adjustment_type==="increase"?"Increase":"Decrease"]})},{header:"Actions",key:"id",align:"right",render:j=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("adjustment_reasons.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>H(j),className:`!p-1.5 h-8 w-8 ${j.is_active?"text-amber-600":"text-green-600"}`,title:j.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:j.is_active?"toggle_on":"toggle_off"})}),r("adjustment_reasons.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>P(j),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("adjustment_reasons.delete")&&e.jsx(re,{variant:"ghost",onClick:()=>R(j),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Adjustment Reasons",subtitle:"Manage stock adjustment reasons",actions:r("adjustment_reasons.create")&&e.jsxs(re,{variant:"primary",onClick:O,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Reason"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Reasons",value:L.total,icon:"swap_vert",isActive:!0}),e.jsx(je,{title:"Increase Types",value:L.increase,icon:"trending_up",trend:"up",valueClassName:"text-green-600"}),e.jsx(je,{title:"Decrease Types",value:L.decrease,icon:"trending_down",trend:"down",valueClassName:"text-red-600"})]}),e.jsx(ge.DataTable,{columns:E,data:xe,loading:x,emptyMessage:"No adjustment reasons found.",pagination:{currentPage:q,totalPages:Math.ceil(I.length/M),onPageChange:D,totalItems:I.length,pageSize:M,onPageSizeChange:j=>{se(j),D(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Reason List",count:I.length,searchProps:{value:A,onChange:j=>{T(j),D(1)},placeholder:"Search reasons..."},embedded:!0})}),e.jsx(Lt,{isOpen:N,onClose:()=>y(!1),title:g?"Edit Reason":"Add Reason",children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Code *",value:f.code,onChange:j=>w({...f,code:j.target.value}),placeholder:"DAMAGE",required:!0}),e.jsx(fe,{label:"Name *",value:f.name,onChange:j=>w({...f,name:j.target.value}),placeholder:"Damaged Goods",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Adjustment Type *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"radio",checked:f.adjustment_type==="decrease",onChange:()=>w({...f,adjustment_type:"decrease"}),className:"text-primary w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Decrease (Stock Out)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"radio",checked:f.adjustment_type==="increase",onChange:()=>w({...f,adjustment_type:"increase"}),className:"text-primary w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Increase (Stock In)"})]})]})]}),e.jsx(fe,{label:"Description",value:f.description,onChange:j=>w({...f,description:j.target.value}),placeholder:"Explain when this reason is used"}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:j=>w({...f,is_active:j.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":"Save"})]})]})}),e.jsx(It,{isOpen:U,onClose:()=>W(!1),onConfirm:ee,title:"Delete Adjustment Reason",message:`Are you sure you want to delete "${te?.name}"? This action cannot be undone.`,confirmText:"Delete Reason"})]})}function AN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,y]=m.useState(!1),[g,p]=m.useState(null),[f,w]=m.useState({name:"",code:"",icon:"payments",is_active:!0}),[_,k]=m.useState(!1),[S,b]=m.useState("");m.useEffect(()=>{n&&!r("payment_methods.view")&&o("/")},[n,o,r]),m.useEffect(()=>{A()},[]);const A=async()=>{h(!0);try{const W=await Ae.listPaymentMethods();u(W.data.items||[])}catch(W){console.error("Failed to load payment methods:",W),u([{id:"1",code:"CASH",name:"Cash",icon:"payments",is_active:!0,created_at:new Date().toISOString()},{id:"2",code:"CARD",name:"Credit/Debit Card",icon:"credit_card",is_active:!0,created_at:new Date().toISOString()},{id:"3",code:"UPI",name:"UPI",icon:"qr_code_scanner",is_active:!0,created_at:new Date().toISOString()},{id:"4",code:"WALLET",name:"Digital Wallet",icon:"account_balance_wallet",is_active:!0,created_at:new Date().toISOString()},{id:"5",code:"CREDIT",name:"Store Credit",icon:"receipt",is_active:!0,created_at:new Date().toISOString()}])}finally{h(!1)}},T=()=>{p(null),w({name:"",code:"",icon:"payments",is_active:!0}),b(""),y(!0)},q=W=>{p(W),w({name:W.name,code:W.code,icon:W.icon||"payments",is_active:W.is_active}),b(""),y(!0)},D=async W=>{try{await Ae.updatePaymentMethod(W.id,{is_active:!W.is_active}),window.toast?.success(`${W.name} ${W.is_active?"deactivated":"activated"}`),A()}catch(te){window.toast?.error(te.response?.data?.detail||"Failed to update status")}},M=async W=>{if(W.preventDefault(),!f.name.trim()||!f.code.trim()){b("Name and code are required");return}k(!0),b("");try{g?await Ae.updatePaymentMethod(g.id,f):await Ae.createPaymentMethod(f),y(!1),A()}catch(te){b(te.response?.data?.detail||"Failed to save")}finally{k(!1)}},[se,Q]=m.useState(!1),[O,P]=m.useState(null),H=W=>{P(W),Q(!0)},Z=async()=>{if(O)try{await Ae.deletePaymentMethod(O.id),window.toast?.success("Payment method deleted successfully"),A()}catch(W){console.error("Failed to delete payment method:",W),window.toast?.error(W.response?.data?.detail||"Failed to delete payment method")}finally{Q(!1),P(null)}},U=["payments","credit_card","qr_code_scanner","account_balance_wallet","receipt","account_balance"];return e.jsxs(Zt,{title:"Payment Methods",description:"Manage payment methods for billing and POS",icon:"credit_card",actions:r("payment_methods.create")&&e.jsxs(re,{variant:"primary",onClick:T,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Method"]}),children:[e.jsx(Ie,{className:"space-y-6",children:x?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):i.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 mb-3",children:"credit_card"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No payment methods"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Add payment methods to enable billing"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(W=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:W.icon||"payments"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:W.name}),e.jsx("p",{className:"text-sm text-slate-500 font-mono",children:W.code})]}),e.jsxs("div",{className:"flex gap-1",children:[r("payment_methods.edit")&&e.jsx("button",{onClick:()=>D(W),className:`p-1.5 rounded-lg ${W.is_active?"text-amber-500 hover:text-amber-600":"text-green-500 hover:text-green-600"}`,title:W.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:W.is_active?"toggle_on":"toggle_off"})}),r("payment_methods.edit")&&e.jsx("button",{onClick:()=>q(W),className:"p-1.5 text-slate-400 hover:text-primary rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("payment_methods.delete")&&e.jsx("button",{onClick:()=>H(W),className:"p-1.5 text-slate-400 hover:text-red-600 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})]},W.id))})}),e.jsx(Lt,{isOpen:N,onClose:()=>y(!1),title:g?"Edit Payment Method":"Add Payment Method",children:e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Code *",value:f.code,onChange:W=>w({...f,code:W.target.value}),placeholder:"CASH",required:!0}),e.jsx(fe,{label:"Name *",value:f.name,onChange:W=>w({...f,name:W.target.value}),placeholder:"Cash Payment",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Icon"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(W=>e.jsx("button",{type:"button",onClick:()=>w({...f,icon:W}),className:`p-3 rounded-lg border ${f.icon===W?"border-primary bg-primary/10":"border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:W})},W))})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:W=>w({...f,is_active:W.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":"Save"})]})]})}),e.jsx(It,{isOpen:se,onClose:()=>Q(!1),onConfirm:Z,title:"Delete Payment Method",message:`Are you sure you want to delete "${O?.name}"? This action cannot be undone.`,confirmText:"Delete Method"})]})}function TN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,y]=m.useState(!1),[g,p]=m.useState(null),[f,w]=m.useState({code:"",name:"",description:"",is_active:!0}),[_,k]=m.useState(!1),[S,b]=m.useState(""),[A,T]=m.useState(""),[q,D]=m.useState(1),[M,se]=m.useState(10);m.useEffect(()=>{n&&!r("medicine_types.view")&&o("/")},[n,o,r]),m.useEffect(()=>{Q()},[]);const Q=async()=>{h(!0);try{const j=await Ae.listMedicineTypes();u(j.data.items||[])}catch(j){console.error("Failed to load medicine types:",j)}finally{h(!1)}},O=()=>{p(null),w({code:"",name:"",description:"",is_active:!0}),b(""),y(!0)},P=j=>{p(j),w({code:j.code,name:j.name,description:j.description||"",is_active:j.is_active}),b(""),y(!0)},H=async j=>{try{await Ae.updateMedicineType(j.id,{is_active:!j.is_active}),window.toast?.success(`${j.name} ${j.is_active?"deactivated":"activated"}`),Q()}catch(B){window.toast?.error(B.response?.data?.detail||"Failed to update status")}},Z=async j=>{if(j.preventDefault(),!f.code||!f.name){b("Code and Name are required");return}k(!0),b("");try{g?await Ae.updateMedicineType(g.id,f):await Ae.createMedicineType(f),y(!1),Q()}catch(B){b(B.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,W]=m.useState(!1),[te,me]=m.useState(null),R=j=>{me(j),W(!0)},ee=async()=>{if(te)try{await Ae.deleteMedicineType(te.id),window.toast?.success("Medicine type deleted successfully"),Q()}catch(j){console.error("Failed to delete medicine type:",j),window.toast?.error(j.response?.data?.detail||"Failed to delete medicine type")}finally{W(!1),me(null)}},I=i.filter(j=>j.name.toLowerCase().includes(A.toLowerCase())||j.code.toLowerCase().includes(A.toLowerCase())),xe=I.slice((q-1)*M,q*M),L={total:i.length,active:i.filter(j=>j.is_active).length,inactive:i.filter(j=>!j.is_active).length},E=[{header:"Code",key:"code",render:j=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:j.code})},{header:"Type Name",key:"name",render:j=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:j.name}),j.description&&e.jsx("div",{className:"text-xs text-slate-500",children:j.description})]})},{header:"Status",key:"is_active",render:j=>e.jsx(Ve,{variant:j.is_active?"success":"secondary",children:j.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:j=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("medicine_types.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>H(j),className:`!p-1.5 h-8 w-8 ${j.is_active?"text-amber-600":"text-green-600"}`,title:j.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:j.is_active?"toggle_on":"toggle_off"})}),r("medicine_types.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>P(j),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("medicine_types.delete")&&e.jsx(re,{variant:"ghost",onClick:()=>R(j),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Medicine Types",subtitle:"Manage medicine form types (tablet, capsule, syrup, etc.)",actions:r("medicine_types.create")&&e.jsxs(re,{variant:"primary",onClick:O,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Type"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Types",value:L.total,icon:"medication",isActive:!0}),e.jsx(je,{title:"Active",value:L.active,icon:"check_circle",trend:"neutral"}),e.jsx(je,{title:"Inactive",value:L.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:E,data:xe,loading:x,emptyMessage:"No medicine types found.",pagination:{currentPage:q,totalPages:Math.ceil(I.length/M),onPageChange:D,totalItems:I.length,pageSize:M,onPageSizeChange:j=>{se(j),D(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Type List",count:I.length,searchProps:{value:A,onChange:j=>{T(j),D(1)},placeholder:"Search types..."},embedded:!0})}),e.jsx(Lt,{isOpen:N,onClose:()=>y(!1),title:g?"Edit Medicine Type":"Add Medicine Type",children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsx(fe,{label:"Code",value:f.code,onChange:j=>w({...f,code:j.target.value.toLowerCase()}),placeholder:"e.g., tablet",required:!0}),e.jsx(fe,{label:"Name",value:f.name,onChange:j=>w({...f,name:j.target.value}),placeholder:"e.g., Tablet",required:!0}),e.jsx(fe,{label:"Description (Optional)",value:f.description,onChange:j=>w({...f,description:j.target.value}),placeholder:"e.g., Solid oral dosage form"}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:j=>w({...f,is_active:j.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":g?"Update":"Create"})]})]})}),e.jsx(It,{isOpen:U,onClose:()=>W(!1),onConfirm:ee,title:"Delete Medicine Type",message:`Are you sure you want to delete "${te?.name}"? This action cannot be undone.`,confirmText:"Delete Type"})]})}function DN(){const{user:n}=We(),{hasPermission:r}=ra(),o=Fe(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,y]=m.useState(!1),[g,p]=m.useState(null),[f,w]=m.useState({code:"",name:"",description:"",is_active:!0}),[_,k]=m.useState(!1),[S,b]=m.useState(""),[A,T]=m.useState(""),[q,D]=m.useState(1),[M,se]=m.useState(10);m.useEffect(()=>{n&&!r("manufacturers.view")&&o("/")},[n,o,r]),m.useEffect(()=>{Q()},[]);const Q=async()=>{h(!0);try{const j=await Ae.listManufacturers();u(j.data.items||[])}catch(j){console.error("Failed to load manufacturers:",j)}finally{h(!1)}},O=()=>{p(null),w({code:"",name:"",description:"",is_active:!0}),b(""),y(!0)},P=j=>{p(j),w({code:j.code,name:j.name,description:j.description||"",is_active:j.is_active}),b(""),y(!0)},H=async j=>{try{await Ae.updateManufacturer(j.id,{is_active:!j.is_active}),window.toast?.success(`${j.name} ${j.is_active?"deactivated":"activated"}`),Q()}catch(B){window.toast?.error(B.response?.data?.detail||"Failed to update status")}},Z=async j=>{if(j.preventDefault(),!f.code||!f.name){b("Code and Name are required");return}k(!0),b("");try{g?await Ae.updateManufacturer(g.id,f):await Ae.createManufacturer(f),y(!1),Q()}catch(B){b(B.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,W]=m.useState(!1),[te,me]=m.useState(null),R=j=>{me(j),W(!0)},ee=async()=>{if(te)try{await Ae.deleteManufacturer(te.id),window.toast?.success("Manufacturer deleted successfully"),Q()}catch(j){console.error("Failed to delete manufacturer:",j),window.toast?.error(j.response?.data?.detail||"Failed to delete manufacturer")}finally{W(!1),me(null)}},I=i.filter(j=>j.name.toLowerCase().includes(A.toLowerCase())||j.code.toLowerCase().includes(A.toLowerCase())),xe=I.slice((q-1)*M,q*M),L={total:i.length,active:i.filter(j=>j.is_active).length,inactive:i.filter(j=>!j.is_active).length},E=[{header:"Code",key:"code",render:j=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:j.code})},{header:"Manufacturer",key:"name",render:j=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:j.name}),j.description&&e.jsx("div",{className:"text-xs text-slate-500",children:j.description})]})},{header:"Status",key:"is_active",render:j=>e.jsx(Ve,{variant:j.is_active?"success":"secondary",children:j.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:j=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("manufacturers.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>H(j),className:`!p-1.5 h-8 w-8 ${j.is_active?"text-amber-600":"text-green-600"}`,title:j.is_active?"Deactivate":"Activate",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:j.is_active?"toggle_on":"toggle_off"})}),r("manufacturers.edit")&&e.jsx(re,{variant:"ghost",onClick:()=>P(j),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("manufacturers.delete")&&e.jsx(re,{variant:"ghost",onClick:()=>R(j),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ge,{children:[e.jsx(ge.Header,{title:"Manufacturers",subtitle:"Manage medicine manufacturer masters",actions:r("manufacturers.create")&&e.jsxs(re,{variant:"primary",onClick:O,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Manufacturer"]})}),e.jsxs(ge.KPICards,{children:[e.jsx(je,{title:"Total Manufacturers",value:L.total,icon:"factory",isActive:!0}),e.jsx(je,{title:"Active",value:L.active,icon:"check_circle",trend:"neutral"}),e.jsx(je,{title:"Inactive",value:L.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(ge.DataTable,{columns:E,data:xe,loading:x,emptyMessage:"No manufacturers found.",pagination:{currentPage:q,totalPages:Math.ceil(I.length/M),onPageChange:D,totalItems:I.length,pageSize:M,onPageSizeChange:j=>{se(j),D(1)}},headerSlot:e.jsx(ge.ListControls,{title:"Manufacturer List",count:I.length,searchProps:{value:A,onChange:j=>{T(j),D(1)},placeholder:"Search manufacturers..."},embedded:!0})}),e.jsx(Lt,{isOpen:N,onClose:()=>y(!1),title:g?"Edit Manufacturer":"Add Manufacturer",children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsx(fe,{label:"Code",value:f.code,onChange:j=>w({...f,code:j.target.value.toLowerCase()}),placeholder:"e.g., sunpharma",required:!0}),e.jsx(fe,{label:"Name",value:f.name,onChange:j=>w({...f,name:j.target.value}),placeholder:"e.g., Sun Pharmaceutical",required:!0}),e.jsx(fe,{label:"Description (Optional)",value:f.description,onChange:j=>w({...f,description:j.target.value}),placeholder:"Manufacturer description"}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:j=>w({...f,is_active:j.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-700 dark:text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(re,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(re,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":g?"Update":"Create"})]})]})}),e.jsx(It,{isOpen:U,onClose:()=>W(!1),onConfirm:ee,title:"Delete Manufacturer",message:`Are you sure you want to delete "${te?.name}"? This action cannot be undone.`,confirmText:"Delete Manufacturer"})]})}function RN(){const n=Fe(),{logout:r}=We();return m.useEffect(()=>{const o=()=>{console.log("Session expired - redirecting to login"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),r(),n("/login",{replace:!0})};return window.addEventListener("auth:session-expired",o),()=>window.removeEventListener("auth:session-expired",o)},[n,r]),null}function MN({children:n}){const{user:r,loading:o}=We();return o?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Initializing..."})]})}):r?e.jsx(e.Fragment,{children:n}):e.jsx(P0,{to:"/login",replace:!0})}function zN(){return e.jsx(Ej,{})}function ON(){return e.jsx(hj,{children:e.jsx(yj,{children:e.jsx(vj,{children:e.jsxs(jj,{children:[e.jsx(wj,{}),e.jsxs(_y,{children:[e.jsxs(ty,{children:[e.jsx(ve,{path:"/login",element:e.jsx(Cj,{})}),e.jsxs(ve,{path:"/",element:e.jsx(MN,{children:e.jsx(_j,{})}),children:[e.jsx(ve,{index:!0,element:e.jsx(zN,{})}),e.jsx(ve,{path:"users",element:e.jsx(Kj,{})}),e.jsx(ve,{path:"roles",element:e.jsx(jN,{})}),e.jsx(ve,{path:"login-activity",element:e.jsx(vN,{})}),e.jsx(ve,{path:"warehouses",element:e.jsx(Oj,{})}),e.jsx(ve,{path:"warehouses/add",element:e.jsx(xN,{})}),e.jsx(ve,{path:"warehouses/edit/:id",element:e.jsx(pN,{})}),e.jsx(ve,{path:"warehouses/stock",element:e.jsx(S0,{})}),e.jsx(ve,{path:"shops",element:e.jsx(Gj,{})}),e.jsx(ve,{path:"shops/add",element:e.jsx(Vj,{})}),e.jsx(ve,{path:"shops/:id/edit",element:e.jsx(Qj,{})}),e.jsx(ve,{path:"shops/stock",element:e.jsx(S0,{})}),e.jsx(ve,{path:"warehouse-mapping",element:e.jsx(fN,{})}),e.jsx(ve,{path:"medicines",element:e.jsx(Fj,{})}),e.jsx(ve,{path:"medicines/add",element:e.jsx(Yj,{})}),e.jsx(ve,{path:"medicines/:id",element:e.jsx($j,{})}),e.jsx(ve,{path:"medicines/:id/edit",element:e.jsx(Pj,{})}),e.jsx(ve,{path:"categories",element:e.jsx(NN,{})}),e.jsx(ve,{path:"units",element:e.jsx(wN,{})}),e.jsx(ve,{path:"hsn",element:e.jsx(kN,{})}),e.jsx(ve,{path:"gst",element:e.jsx(SN,{})}),e.jsx(ve,{path:"gst-slabs",element:e.jsx(_N,{})}),e.jsx(ve,{path:"suppliers",element:e.jsx(CN,{})}),e.jsx(ve,{path:"adjustment-reasons",element:e.jsx(EN,{})}),e.jsx(ve,{path:"payment-methods",element:e.jsx(AN,{})}),e.jsx(ve,{path:"medicine-types",element:e.jsx(TN,{})}),e.jsx(ve,{path:"manufacturers",element:e.jsx(DN,{})}),e.jsx(ve,{path:"racks",element:e.jsx(gN,{})}),e.jsx(ve,{path:"inventory",element:e.jsx(yd,{})}),e.jsx(ve,{path:"inventory/adjust",element:e.jsx(bN,{})}),e.jsx(ve,{path:"inventory-oversight",element:e.jsx(Xn,{})}),e.jsx(ve,{path:"inventory-oversight/warehouse",element:e.jsx(Xn,{})}),e.jsx(ve,{path:"inventory-oversight/shop",element:e.jsx(Xn,{})}),e.jsx(ve,{path:"inventory-oversight/expiry",element:e.jsx(Xn,{})}),e.jsx(ve,{path:"inventory-oversight/dead-stock",element:e.jsx(Xn,{})}),e.jsx(ve,{path:"analytics/dispatch",element:e.jsx(A0,{})})," ",e.jsx(ve,{path:"analytics/demand",element:e.jsx(Si,{})})," ",e.jsx(ve,{path:"customers",element:e.jsx(Jj,{})}),e.jsx(ve,{path:"employees",element:e.jsx(Wj,{})}),e.jsx(ve,{path:"employees/attendance",element:e.jsx(eN,{})}),e.jsx(ve,{path:"employees/attendance/report",element:e.jsx(tN,{})}),e.jsx(ve,{path:"employees/salary",element:e.jsx(aN,{})}),e.jsx(ve,{path:"dispatches",element:e.jsx(A0,{})}),e.jsx(ve,{path:"dispatches/create",element:e.jsx(sN,{})}),e.jsx(ve,{path:"dispatches/:id",element:e.jsx(lN,{})}),e.jsx(ve,{path:"purchase-requests",element:e.jsx(nN,{})}),e.jsx(ve,{path:"sales",element:e.jsx(E0,{})}),e.jsx(ve,{path:"sales/pos",element:e.jsx(mN,{})}),e.jsx(ve,{path:"sales/invoices",element:e.jsx(E0,{})}),e.jsx(ve,{path:"sales/returns",element:e.jsx(Ij,{})}),e.jsx(ve,{path:"reports",element:e.jsx(Si,{})}),e.jsx(ve,{path:"reports/sales",element:e.jsx(Si,{})}),e.jsx(ve,{path:"reports/expiry",element:e.jsx(Xj,{})}),e.jsx(ve,{path:"reports/tax",element:e.jsx(Zj,{})}),e.jsx(ve,{path:"reports/inventory",element:e.jsx(yd,{})}),e.jsx(ve,{path:"reports/inventory-aging",element:e.jsx(yd,{})})," ",e.jsx(ve,{path:"reports/compliance",element:e.jsx(Si,{})})," ",e.jsx(ve,{path:"notifications",element:e.jsx(hN,{})}),e.jsx(ve,{path:"settings",element:e.jsx(_0,{})}),e.jsx(ve,{path:"settings/application",element:e.jsx(_0,{})}),e.jsx(ve,{path:"settings/system",element:e.jsx(bd,{})}),e.jsx(ve,{path:"feature-flags",element:e.jsx(bd,{})})," ",e.jsx(ve,{path:"audit-logs",element:e.jsx(yN,{})}),e.jsx(ve,{path:"backup-restore",element:e.jsx(bd,{})})," "]}),e.jsx(ve,{path:"*",element:e.jsx(P0,{to:"/",replace:!0})})]}),e.jsx(RN,{})]})]})})})})}const T0=localStorage.getItem("theme");T0==="dark"||!T0&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");tb.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(ON,{})}));
