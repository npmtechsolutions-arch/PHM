(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&i(x)}).observe(document,{childList:!0,subtree:!0});function c(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(u){if(u.ep)return;u.ep=!0;const h=c(u);fetch(u.href,h)}})();var nd={exports:{}},Qr={};var $x;function Xg(){if($x)return Qr;$x=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function c(i,u,h){var x=null;if(h!==void 0&&(x=""+h),u.key!==void 0&&(x=""+u.key),"key"in u){h={};for(var b in u)b!=="key"&&(h[b]=u[b])}else h=u;return u=h.ref,{$$typeof:l,type:i,key:x,ref:u!==void 0?u:null,props:h}}return Qr.Fragment=n,Qr.jsx=c,Qr.jsxs=c,Qr}var Yx;function Zg(){return Yx||(Yx=1,nd.exports=Xg()),nd.exports}var e=Zg(),id={exports:{}},Me={};var Qx;function Kg(){if(Qx)return Me;Qx=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),k=Symbol.iterator;function w(E){return E===null||typeof E!="object"?null:(E=k&&E[k]||E["@@iterator"],typeof E=="function"?E:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,j={};function T(E,L,_){this.props=E,this.context=L,this.refs=j,this.updater=_||N}T.prototype.isReactComponent={},T.prototype.setState=function(E,L){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,L,"setState")},T.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function S(){}S.prototype=T.prototype;function M(E,L,_){this.props=E,this.context=L,this.refs=j,this.updater=_||N}var O=M.prototype=new S;O.constructor=M,C(O,T.prototype),O.isPureReactComponent=!0;var R=Array.isArray;function G(){}var q={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function F(E,L,_){var H=_.ref;return{$$typeof:l,type:E,key:L,ref:H!==void 0?H:null,props:_}}function ue(E,L){return F(E.type,L,E.props)}function be(E){return typeof E=="object"&&E!==null&&E.$$typeof===l}function D(E){var L={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(_){return L[_]})}var V=/\/+/g;function ee(E,L){return typeof E=="object"&&E!==null&&E.key!=null?D(""+E.key):L.toString(36)}function Y(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(G,G):(E.status="pending",E.then(function(L){E.status==="pending"&&(E.status="fulfilled",E.value=L)},function(L){E.status==="pending"&&(E.status="rejected",E.reason=L)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function U(E,L,_,H,$){var le=typeof E;(le==="undefined"||le==="boolean")&&(E=null);var je=!1;if(E===null)je=!0;else switch(le){case"bigint":case"string":case"number":je=!0;break;case"object":switch(E.$$typeof){case l:case n:je=!0;break;case g:return je=E._init,U(je(E._payload),L,_,H,$)}}if(je)return $=$(E),je=H===""?"."+ee(E,0):H,R($)?(_="",je!=null&&(_=je.replace(V,"$&/")+"/"),U($,L,_,"",function(Ee){return Ee})):$!=null&&(be($)&&($=ue($,_+($.key==null||E&&E.key===$.key?"":(""+$.key).replace(V,"$&/")+"/")+je)),L.push($)),1;je=0;var he=H===""?".":H+":";if(R(E))for(var ne=0;ne<E.length;ne++)H=E[ne],le=he+ee(H,ne),je+=U(H,L,_,le,$);else if(ne=w(E),typeof ne=="function")for(E=ne.call(E),ne=0;!(H=E.next()).done;)H=H.value,le=he+ee(H,ne++),je+=U(H,L,_,le,$);else if(le==="object"){if(typeof E.then=="function")return U(Y(E),L,_,H,$);throw L=String(E),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return je}function se(E,L,_){if(E==null)return E;var H=[],$=0;return U(E,H,"","",function(le){return L.call(_,le,$++)}),H}function Z(E){if(E._status===-1){var L=E._result;L=L(),L.then(function(_){(E._status===0||E._status===-1)&&(E._status=1,E._result=_)},function(_){(E._status===0||E._status===-1)&&(E._status=2,E._result=_)}),E._status===-1&&(E._status=0,E._result=L)}if(E._status===1)return E._result.default;throw E._result}var P=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},I={map:se,forEach:function(E,L,_){se(E,function(){L.apply(this,arguments)},_)},count:function(E){var L=0;return se(E,function(){L++}),L},toArray:function(E){return se(E,function(L){return L})||[]},only:function(E){if(!be(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Me.Activity=f,Me.Children=I,Me.Component=T,Me.Fragment=c,Me.Profiler=u,Me.PureComponent=M,Me.StrictMode=i,Me.Suspense=v,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Me.__COMPILER_RUNTIME={__proto__:null,c:function(E){return q.H.useMemoCache(E)}},Me.cache=function(E){return function(){return E.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(E,L,_){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var H=C({},E.props),$=E.key;if(L!=null)for(le in L.key!==void 0&&($=""+L.key),L)!ce.call(L,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&L.ref===void 0||(H[le]=L[le]);var le=arguments.length-2;if(le===1)H.children=_;else if(1<le){for(var je=Array(le),he=0;he<le;he++)je[he]=arguments[he+2];H.children=je}return F(E.type,$,H)},Me.createContext=function(E){return E={$$typeof:x,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:h,_context:E},E},Me.createElement=function(E,L,_){var H,$={},le=null;if(L!=null)for(H in L.key!==void 0&&(le=""+L.key),L)ce.call(L,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&($[H]=L[H]);var je=arguments.length-2;if(je===1)$.children=_;else if(1<je){for(var he=Array(je),ne=0;ne<je;ne++)he[ne]=arguments[ne+2];$.children=he}if(E&&E.defaultProps)for(H in je=E.defaultProps,je)$[H]===void 0&&($[H]=je[H]);return F(E,le,$)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(E){return{$$typeof:b,render:E}},Me.isValidElement=be,Me.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:Z}},Me.memo=function(E,L){return{$$typeof:p,type:E,compare:L===void 0?null:L}},Me.startTransition=function(E){var L=q.T,_={};q.T=_;try{var H=E(),$=q.S;$!==null&&$(_,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(G,P)}catch(le){P(le)}finally{L!==null&&_.types!==null&&(L.types=_.types),q.T=L}},Me.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Me.use=function(E){return q.H.use(E)},Me.useActionState=function(E,L,_){return q.H.useActionState(E,L,_)},Me.useCallback=function(E,L){return q.H.useCallback(E,L)},Me.useContext=function(E){return q.H.useContext(E)},Me.useDebugValue=function(){},Me.useDeferredValue=function(E,L){return q.H.useDeferredValue(E,L)},Me.useEffect=function(E,L){return q.H.useEffect(E,L)},Me.useEffectEvent=function(E){return q.H.useEffectEvent(E)},Me.useId=function(){return q.H.useId()},Me.useImperativeHandle=function(E,L,_){return q.H.useImperativeHandle(E,L,_)},Me.useInsertionEffect=function(E,L){return q.H.useInsertionEffect(E,L)},Me.useLayoutEffect=function(E,L){return q.H.useLayoutEffect(E,L)},Me.useMemo=function(E,L){return q.H.useMemo(E,L)},Me.useOptimistic=function(E,L){return q.H.useOptimistic(E,L)},Me.useReducer=function(E,L,_){return q.H.useReducer(E,L,_)},Me.useRef=function(E){return q.H.useRef(E)},Me.useState=function(E){return q.H.useState(E)},Me.useSyncExternalStore=function(E,L,_){return q.H.useSyncExternalStore(E,L,_)},Me.useTransition=function(){return q.H.useTransition()},Me.version="19.2.3",Me}var Vx;function Dd(){return Vx||(Vx=1,id.exports=Kg()),id.exports}var m=Dd(),od={exports:{}},Vr={},cd={exports:{}},dd={};var Ix;function Jg(){return Ix||(Ix=1,(function(l){function n(U,se){var Z=U.length;U.push(se);e:for(;0<Z;){var P=Z-1>>>1,I=U[P];if(0<u(I,se))U[P]=se,U[Z]=I,Z=P;else break e}}function c(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var se=U[0],Z=U.pop();if(Z!==se){U[0]=Z;e:for(var P=0,I=U.length,E=I>>>1;P<E;){var L=2*(P+1)-1,_=U[L],H=L+1,$=U[H];if(0>u(_,Z))H<I&&0>u($,_)?(U[P]=$,U[H]=Z,P=H):(U[P]=_,U[L]=Z,P=L);else if(H<I&&0>u($,Z))U[P]=$,U[H]=Z,P=H;else break e}}return se}function u(U,se){var Z=U.sortIndex-se.sortIndex;return Z!==0?Z:U.id-se.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;l.unstable_now=function(){return h.now()}}else{var x=Date,b=x.now();l.unstable_now=function(){return x.now()-b}}var v=[],p=[],g=1,f=null,k=3,w=!1,N=!1,C=!1,j=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function O(U){for(var se=c(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=U)i(p),se.sortIndex=se.expirationTime,n(v,se);else break;se=c(p)}}function R(U){if(C=!1,O(U),!N)if(c(v)!==null)N=!0,G||(G=!0,D());else{var se=c(p);se!==null&&Y(R,se.startTime-U)}}var G=!1,q=-1,ce=5,F=-1;function ue(){return j?!0:!(l.unstable_now()-F<ce)}function be(){if(j=!1,G){var U=l.unstable_now();F=U;var se=!0;try{e:{N=!1,C&&(C=!1,S(q),q=-1),w=!0;var Z=k;try{t:{for(O(U),f=c(v);f!==null&&!(f.expirationTime>U&&ue());){var P=f.callback;if(typeof P=="function"){f.callback=null,k=f.priorityLevel;var I=P(f.expirationTime<=U);if(U=l.unstable_now(),typeof I=="function"){f.callback=I,O(U),se=!0;break t}f===c(v)&&i(v),O(U)}else i(v);f=c(v)}if(f!==null)se=!0;else{var E=c(p);E!==null&&Y(R,E.startTime-U),se=!1}}break e}finally{f=null,k=Z,w=!1}se=void 0}}finally{se?D():G=!1}}}var D;if(typeof M=="function")D=function(){M(be)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ee=V.port2;V.port1.onmessage=be,D=function(){ee.postMessage(null)}}else D=function(){T(be,0)};function Y(U,se){q=T(function(){U(l.unstable_now())},se)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(U){U.callback=null},l.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<U?Math.floor(1e3/U):5},l.unstable_getCurrentPriorityLevel=function(){return k},l.unstable_next=function(U){switch(k){case 1:case 2:case 3:var se=3;break;default:se=k}var Z=k;k=se;try{return U()}finally{k=Z}},l.unstable_requestPaint=function(){j=!0},l.unstable_runWithPriority=function(U,se){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=k;k=U;try{return se()}finally{k=Z}},l.unstable_scheduleCallback=function(U,se,Z){var P=l.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?P+Z:P):Z=P,U){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=Z+I,U={id:g++,callback:se,priorityLevel:U,startTime:Z,expirationTime:I,sortIndex:-1},Z>P?(U.sortIndex=Z,n(p,U),c(v)===null&&U===c(p)&&(C?(S(q),q=-1):C=!0,Y(R,Z-P))):(U.sortIndex=I,n(v,U),N||w||(N=!0,G||(G=!0,D()))),U},l.unstable_shouldYield=ue,l.unstable_wrapCallback=function(U){var se=k;return function(){var Z=k;k=se;try{return U.apply(this,arguments)}finally{k=Z}}}})(dd)),dd}var Xx;function Wg(){return Xx||(Xx=1,cd.exports=Jg()),cd.exports}var ud={exports:{}},Ht={};var Zx;function eb(){if(Zx)return Ht;Zx=1;var l=Dd();function n(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var i={d:{f:c,r:function(){throw Error(n(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},u=Symbol.for("react.portal");function h(v,p,g){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:f==null?null:""+f,children:v,containerInfo:p,implementation:g}}var x=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ht.createPortal=function(v,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return h(v,p,null,g)},Ht.flushSync=function(v){var p=x.T,g=i.p;try{if(x.T=null,i.p=2,v)return v()}finally{x.T=p,i.p=g,i.d.f()}},Ht.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(v,p))},Ht.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},Ht.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var g=p.as,f=b(g,p.crossOrigin),k=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:f,integrity:k,fetchPriority:w}):g==="script"&&i.d.X(v,{crossOrigin:f,integrity:k,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ht.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=b(p.as,p.crossOrigin);i.d.M(v,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(v)},Ht.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,f=b(g,p.crossOrigin);i.d.L(v,g,{crossOrigin:f,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ht.preloadModule=function(v,p){if(typeof v=="string")if(p){var g=b(p.as,p.crossOrigin);i.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(v)},Ht.requestFormReset=function(v){i.d.r(v)},Ht.unstable_batchedUpdates=function(v,p){return v(p)},Ht.useFormState=function(v,p,g){return x.H.useFormState(v,p,g)},Ht.useFormStatus=function(){return x.H.useHostTransitionStatus()},Ht.version="19.2.3",Ht}var Kx;function tb(){if(Kx)return ud.exports;Kx=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),ud.exports=eb(),ud.exports}var Jx;function ab(){if(Jx)return Vr;Jx=1;var l=Wg(),n=Dd(),c=tb();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function x(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function b(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function v(t){if(h(t)!==t)throw Error(i(188))}function p(t){var a=t.alternate;if(!a){if(a=h(t),a===null)throw Error(i(188));return a!==t?null:t}for(var s=t,r=a;;){var o=s.return;if(o===null)break;var d=o.alternate;if(d===null){if(r=o.return,r!==null){s=r;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===s)return v(o),t;if(d===r)return v(o),a;d=d.sibling}throw Error(i(188))}if(s.return!==r.return)s=o,r=d;else{for(var y=!1,A=o.child;A;){if(A===s){y=!0,s=o,r=d;break}if(A===r){y=!0,r=o,s=d;break}A=A.sibling}if(!y){for(A=d.child;A;){if(A===s){y=!0,s=d,r=o;break}if(A===r){y=!0,r=d,s=o;break}A=A.sibling}if(!y)throw Error(i(189))}}if(s.alternate!==r)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?t:a}function g(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=g(t),a!==null)return a;t=t.sibling}return null}var f=Object.assign,k=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function D(t){return t===null||typeof t!="object"?null:(t=be&&t[be]||t["@@iterator"],typeof t=="function"?t:null)}var V=Symbol.for("react.client.reference");function ee(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===V?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case T:return"Profiler";case j:return"StrictMode";case R:return"Suspense";case G:return"SuspenseList";case F:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case M:return t.displayName||"Context";case S:return(t._context.displayName||"Context")+".Consumer";case O:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q:return a=t.displayName||null,a!==null?a:ee(t.type)||"Memo";case ce:a=t._payload,t=t._init;try{return ee(t(a))}catch{}}return null}var Y=Array.isArray,U=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},P=[],I=-1;function E(t){return{current:t}}function L(t){0>I||(t.current=P[I],P[I]=null,I--)}function _(t,a){I++,P[I]=t.current,t.current=a}var H=E(null),$=E(null),le=E(null),je=E(null);function he(t,a){switch(_(le,a),_($,t),_(H,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?hx(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=hx(a),t=xx(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(H),_(H,t)}function ne(){L(H),L($),L(le)}function Ee(t){t.memoizedState!==null&&_(je,t);var a=H.current,s=xx(a,t.type);a!==s&&(_($,t),_(H,s))}function de(t){$.current===t&&(L(H),L($)),je.current===t&&(L(je),Fr._currentValue=Z)}var X,ae;function ve(t){if(X===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);X=a&&a[1]||"",ae=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+X+t+ae}var ke=!1;function Ct(t,a){if(!t||ke)return"";ke=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(a){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(oe){var te=oe}Reflect.construct(t,[],fe)}else{try{fe.call()}catch(oe){te=oe}t.call(fe.prototype)}}else{try{throw Error()}catch(oe){te=oe}(fe=t())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(oe){if(oe&&te&&typeof oe.stack=="string")return[oe.stack,te.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=r.DetermineComponentFrameRoot(),y=d[0],A=d[1];if(y&&A){var z=y.split(`
`),W=A.split(`
`);for(o=r=0;r<z.length&&!z[r].includes("DetermineComponentFrameRoot");)r++;for(;o<W.length&&!W[o].includes("DetermineComponentFrameRoot");)o++;if(r===z.length||o===W.length)for(r=z.length-1,o=W.length-1;1<=r&&0<=o&&z[r]!==W[o];)o--;for(;1<=r&&0<=o;r--,o--)if(z[r]!==W[o]){if(r!==1||o!==1)do if(r--,o--,0>o||z[r]!==W[o]){var xe=`
`+z[r].replace(" at new "," at ");return t.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",t.displayName)),xe}while(1<=r&&0<=o);break}}}finally{ke=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?ve(s):""}function qs(t,a){switch(t.tag){case 26:case 27:case 5:return ve(t.type);case 16:return ve("Lazy");case 13:return t.child!==a&&a!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return Ct(t.type,!1);case 11:return Ct(t.type.render,!1);case 1:return Ct(t.type,!0);case 31:return ve("Activity");default:return""}}function Ha(t){try{var a="",s=null;do a+=qs(t,s),s=t,t=t.return;while(t);return a}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var ma=Object.prototype.hasOwnProperty,za=l.unstable_scheduleCallback,Ea=l.unstable_cancelCallback,st=l.unstable_shouldYield,jt=l.unstable_requestPaint,Ke=l.unstable_now,Aa=l.unstable_getCurrentPriorityLevel,Vt=l.unstable_ImmediatePriority,Bs=l.unstable_UserBlockingPriority,lt=l.unstable_NormalPriority,us=l.unstable_LowPriority,xt=l.unstable_IdlePriority,Ga=l.log,Qi=l.unstable_setDisableYieldValue,me=null,_e=null;function De(t){if(typeof Ga=="function"&&Qi(t),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(me,t)}catch{}}var ze=Math.clz32?Math.clz32:ol,it=Math.log,bt=Math.LN2;function ol(t){return t>>>=0,t===0?32:31-(it(t)/bt|0)|0}var Hs=256,Re=262144,ha=4194304;function xa(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ft(t,a,s){var r=t.pendingLanes;if(r===0)return 0;var o=0,d=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var A=r&134217727;return A!==0?(r=A&~d,r!==0?o=xa(r):(y&=A,y!==0?o=xa(y):s||(s=A&~t,s!==0&&(o=xa(s))))):(A=r&~d,A!==0?o=xa(A):y!==0?o=xa(y):s||(s=r&~t,s!==0&&(o=xa(s)))),o===0?0:a!==0&&a!==o&&(a&d)===0&&(d=o&-o,s=a&-a,d>=s||d===32&&(s&4194048)!==0)?a:o}function ms(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Op(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Id(){var t=ha;return ha<<=1,(ha&62914560)===0&&(ha=4194304),t}function Vi(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function ar(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Lp(t,a,s,r,o,d){var y=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var A=t.entanglements,z=t.expirationTimes,W=t.hiddenUpdates;for(s=y&~s;0<s;){var xe=31-ze(s),fe=1<<xe;A[xe]=0,z[xe]=-1;var te=W[xe];if(te!==null)for(W[xe]=null,xe=0;xe<te.length;xe++){var oe=te[xe];oe!==null&&(oe.lane&=-536870913)}s&=~fe}r!==0&&Xd(t,r,0),d!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=d&~(y&~a))}function Xd(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var r=31-ze(a);t.entangledLanes|=a,t.entanglements[r]=t.entanglements[r]|1073741824|s&261930}function Zd(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var r=31-ze(s),o=1<<r;o&a|t[r]&a&&(t[r]|=a),s&=~o}}function Kd(t,a){var s=a&-a;return s=(s&42)!==0?1:Ii(s),(s&(t.suspendedLanes|a))!==0?0:s}function Ii(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Xi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Jd(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:Ux(t.type))}function Wd(t,a){var s=se.p;try{return se.p=t,a()}finally{se.p=s}}var hs=Math.random().toString(36).slice(2),Ot="__reactFiber$"+hs,It="__reactProps$"+hs,cl="__reactContainer$"+hs,Zi="__reactEvents$"+hs,Up="__reactListeners$"+hs,qp="__reactHandles$"+hs,eu="__reactResources$"+hs,sr="__reactMarker$"+hs;function Ki(t){delete t[Ot],delete t[It],delete t[Zi],delete t[Up],delete t[qp]}function dl(t){var a=t[Ot];if(a)return a;for(var s=t.parentNode;s;){if(a=s[cl]||s[Ot]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=jx(t);t!==null;){if(s=t[Ot])return s;t=jx(t)}return a}t=s,s=t.parentNode}return null}function ul(t){if(t=t[Ot]||t[cl]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function lr(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function ml(t){var a=t[eu];return a||(a=t[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function At(t){t[sr]=!0}var tu=new Set,au={};function Gs(t,a){hl(t,a),hl(t+"Capture",a)}function hl(t,a){for(au[t]=a,t=0;t<a.length;t++)tu.add(a[t])}var Bp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),su={},lu={};function Hp(t){return ma.call(lu,t)?!0:ma.call(su,t)?!1:Bp.test(t)?lu[t]=!0:(su[t]=!0,!1)}function un(t,a,s){if(Hp(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var r=a.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function mn(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Fa(t,a,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+r)}}function pa(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ru(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Gp(t,a,s){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,d=r.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return o.call(this)},set:function(y){s=""+y,d.call(this,y)}}),Object.defineProperty(t,a,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Ji(t){if(!t._valueTracker){var a=ru(t)?"checked":"value";t._valueTracker=Gp(t,a,""+t[a])}}function nu(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),r="";return t&&(r=ru(t)?t.checked?"true":"false":t.value),t=r,t!==s?(a.setValue(t),!0):!1}function hn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Fp=/[\n"\\]/g;function fa(t){return t.replace(Fp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Wi(t,a,s,r,o,d,y,A){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),a!=null?y==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+pa(a)):t.value!==""+pa(a)&&(t.value=""+pa(a)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),a!=null?eo(t,y,pa(a)):s!=null?eo(t,y,pa(s)):r!=null&&t.removeAttribute("value"),o==null&&d!=null&&(t.defaultChecked=!!d),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+pa(A):t.removeAttribute("name")}function iu(t,a,s,r,o,d,y,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),a!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||a!=null)){Ji(t);return}s=s!=null?""+pa(s):"",a=a!=null?""+pa(a):s,A||a===t.value||(t.value=a),t.defaultValue=a}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=A?t.checked:!!r,t.defaultChecked=!!r,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),Ji(t)}function eo(t,a,s){a==="number"&&hn(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function xl(t,a,s,r){if(t=t.options,a){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=!0;for(s=0;s<t.length;s++)o=a.hasOwnProperty("$"+t[s].value),t[s].selected!==o&&(t[s].selected=o),o&&r&&(t[s].defaultSelected=!0)}else{for(s=""+pa(s),a=null,o=0;o<t.length;o++){if(t[o].value===s){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}a!==null||t[o].disabled||(a=t[o])}a!==null&&(a.selected=!0)}}function ou(t,a,s){if(a!=null&&(a=""+pa(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+pa(s):""}function cu(t,a,s,r){if(a==null){if(r!=null){if(s!=null)throw Error(i(92));if(Y(r)){if(1<r.length)throw Error(i(93));r=r[0]}s=r}s==null&&(s=""),a=s}s=pa(a),t.defaultValue=s,r=t.textContent,r===s&&r!==""&&r!==null&&(t.value=r),Ji(t)}function pl(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var Pp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function du(t,a,s){var r=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?r?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":r?t.setProperty(a,s):typeof s!="number"||s===0||Pp.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function uu(t,a,s){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,s!=null){for(var r in s)!s.hasOwnProperty(r)||a!=null&&a.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var o in a)r=a[o],a.hasOwnProperty(o)&&s[o]!==r&&du(t,o,r)}else for(var d in a)a.hasOwnProperty(d)&&du(t,d,a[d])}function to(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $p=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xn(t){return Yp.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Pa(){}var ao=null;function so(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fl=null,gl=null;function mu(t){var a=ul(t);if(a&&(t=a.stateNode)){var s=t[It]||null;e:switch(t=a.stateNode,a.type){case"input":if(Wi(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+fa(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var r=s[a];if(r!==t&&r.form===t.form){var o=r[It]||null;if(!o)throw Error(i(90));Wi(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(a=0;a<s.length;a++)r=s[a],r.form===t.form&&nu(r)}break e;case"textarea":ou(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&xl(t,!!s.multiple,a,!1)}}}var lo=!1;function hu(t,a,s){if(lo)return t(a,s);lo=!0;try{var r=t(a);return r}finally{if(lo=!1,(fl!==null||gl!==null)&&(ti(),fl&&(a=fl,t=gl,gl=fl=null,mu(a),t)))for(a=0;a<t.length;a++)mu(t[a])}}function rr(t,a){var s=t.stateNode;if(s===null)return null;var r=s[It]||null;if(r===null)return null;s=r[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(i(231,a,typeof s));return s}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ro=!1;if($a)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){ro=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{ro=!1}var xs=null,no=null,pn=null;function xu(){if(pn)return pn;var t,a=no,s=a.length,r,o="value"in xs?xs.value:xs.textContent,d=o.length;for(t=0;t<s&&a[t]===o[t];t++);var y=s-t;for(r=1;r<=y&&a[s-r]===o[d-r];r++);return pn=o.slice(t,1<r?1-r:void 0)}function fn(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function gn(){return!0}function pu(){return!1}function Xt(t){function a(s,r,o,d,y){this._reactName=s,this._targetInst=o,this.type=r,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?gn:pu,this.isPropagationStopped=pu,this}return f(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=gn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=gn)},persist:function(){},isPersistent:gn}),a}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bn=Xt(Fs),ir=f({},Fs,{view:0,detail:0}),Qp=Xt(ir),io,oo,or,yn=f({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==or&&(or&&t.type==="mousemove"?(io=t.screenX-or.screenX,oo=t.screenY-or.screenY):oo=io=0,or=t),io)},movementY:function(t){return"movementY"in t?t.movementY:oo}}),fu=Xt(yn),Vp=f({},yn,{dataTransfer:0}),Ip=Xt(Vp),Xp=f({},ir,{relatedTarget:0}),co=Xt(Xp),Zp=f({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kp=Xt(Zp),Jp=f({},Fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wp=Xt(Jp),ef=f({},Fs,{data:0}),gu=Xt(ef),tf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},af={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lf(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=sf[t])?!!a[t]:!1}function uo(){return lf}var rf=f({},ir,{key:function(t){if(t.key){var a=tf[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=fn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?af[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uo,charCode:function(t){return t.type==="keypress"?fn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nf=Xt(rf),of=f({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bu=Xt(of),cf=f({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uo}),df=Xt(cf),uf=f({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),mf=Xt(uf),hf=f({},yn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xf=Xt(hf),pf=f({},Fs,{newState:0,oldState:0}),ff=Xt(pf),gf=[9,13,27,32],mo=$a&&"CompositionEvent"in window,cr=null;$a&&"documentMode"in document&&(cr=document.documentMode);var bf=$a&&"TextEvent"in window&&!cr,yu=$a&&(!mo||cr&&8<cr&&11>=cr),vu=" ",ju=!1;function Nu(t,a){switch(t){case"keyup":return gf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bl=!1;function yf(t,a){switch(t){case"compositionend":return wu(a);case"keypress":return a.which!==32?null:(ju=!0,vu);case"textInput":return t=a.data,t===vu&&ju?null:t;default:return null}}function vf(t,a){if(bl)return t==="compositionend"||!mo&&Nu(t,a)?(t=xu(),pn=no=xs=null,bl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return yu&&a.locale!=="ko"?null:a.data;default:return null}}var jf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!jf[t.type]:a==="textarea"}function Su(t,a,s,r){fl?gl?gl.push(r):gl=[r]:fl=r,a=oi(a,"onChange"),0<a.length&&(s=new bn("onChange","change",null,s,r),t.push({event:s,listeners:a}))}var dr=null,ur=null;function Nf(t){ix(t,0)}function vn(t){var a=lr(t);if(nu(a))return t}function _u(t,a){if(t==="change")return a}var Cu=!1;if($a){var ho;if($a){var xo="oninput"in document;if(!xo){var Eu=document.createElement("div");Eu.setAttribute("oninput","return;"),xo=typeof Eu.oninput=="function"}ho=xo}else ho=!1;Cu=ho&&(!document.documentMode||9<document.documentMode)}function Au(){dr&&(dr.detachEvent("onpropertychange",Tu),ur=dr=null)}function Tu(t){if(t.propertyName==="value"&&vn(ur)){var a=[];Su(a,ur,t,so(t)),hu(Nf,a)}}function wf(t,a,s){t==="focusin"?(Au(),dr=a,ur=s,dr.attachEvent("onpropertychange",Tu)):t==="focusout"&&Au()}function kf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vn(ur)}function Sf(t,a){if(t==="click")return vn(a)}function _f(t,a){if(t==="input"||t==="change")return vn(a)}function Cf(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var sa=typeof Object.is=="function"?Object.is:Cf;function mr(t,a){if(sa(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),r=Object.keys(a);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var o=s[r];if(!ma.call(a,o)||!sa(t[o],a[o]))return!1}return!0}function Du(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ru(t,a){var s=Du(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=a&&r>=a)return{node:s,offset:a-t};t=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Du(s)}}function Mu(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Mu(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function zu(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=hn(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=hn(t.document)}return a}function po(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Ef=$a&&"documentMode"in document&&11>=document.documentMode,yl=null,fo=null,hr=null,go=!1;function Ou(t,a,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;go||yl==null||yl!==hn(r)||(r=yl,"selectionStart"in r&&po(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hr&&mr(hr,r)||(hr=r,r=oi(fo,"onSelect"),0<r.length&&(a=new bn("onSelect","select",null,a,s),t.push({event:a,listeners:r}),a.target=yl)))}function Ps(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var vl={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},bo={},Lu={};$a&&(Lu=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function $s(t){if(bo[t])return bo[t];if(!vl[t])return t;var a=vl[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in Lu)return bo[t]=a[s];return t}var Uu=$s("animationend"),qu=$s("animationiteration"),Bu=$s("animationstart"),Af=$s("transitionrun"),Tf=$s("transitionstart"),Df=$s("transitioncancel"),Hu=$s("transitionend"),Gu=new Map,yo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yo.push("scrollEnd");function Ta(t,a){Gu.set(t,a),Gs(a,[t])}var jn=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ga=[],jl=0,vo=0;function Nn(){for(var t=jl,a=vo=jl=0;a<t;){var s=ga[a];ga[a++]=null;var r=ga[a];ga[a++]=null;var o=ga[a];ga[a++]=null;var d=ga[a];if(ga[a++]=null,r!==null&&o!==null){var y=r.pending;y===null?o.next=o:(o.next=y.next,y.next=o),r.pending=o}d!==0&&Fu(s,o,d)}}function wn(t,a,s,r){ga[jl++]=t,ga[jl++]=a,ga[jl++]=s,ga[jl++]=r,vo|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function jo(t,a,s,r){return wn(t,a,s,r),kn(t)}function Ys(t,a){return wn(t,null,null,a),kn(t)}function Fu(t,a,s){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s);for(var o=!1,d=t.return;d!==null;)d.childLanes|=s,r=d.alternate,r!==null&&(r.childLanes|=s),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(o=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,o&&a!==null&&(o=31-ze(s),t=d.hiddenUpdates,r=t[o],r===null?t[o]=[a]:r.push(a),a.lane=s|536870912),d):null}function kn(t){if(50<Or)throw Or=0,Tc=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Nl={};function Rf(t,a,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(t,a,s,r){return new Rf(t,a,s,r)}function No(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ya(t,a){var s=t.alternate;return s===null?(s=la(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Pu(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Sn(t,a,s,r,o,d){var y=0;if(r=t,typeof t=="function")No(t)&&(y=1);else if(typeof t=="string")y=Ug(t,s,H.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case F:return t=la(31,s,a,o),t.elementType=F,t.lanes=d,t;case C:return Qs(s.children,o,d,a);case j:y=8,o|=24;break;case T:return t=la(12,s,a,o|2),t.elementType=T,t.lanes=d,t;case R:return t=la(13,s,a,o),t.elementType=R,t.lanes=d,t;case G:return t=la(19,s,a,o),t.elementType=G,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M:y=10;break e;case S:y=9;break e;case O:y=11;break e;case q:y=14;break e;case ce:y=16,r=null;break e}y=29,s=Error(i(130,t===null?"null":typeof t,"")),r=null}return a=la(y,s,a,o),a.elementType=t,a.type=r,a.lanes=d,a}function Qs(t,a,s,r){return t=la(7,t,r,a),t.lanes=s,t}function wo(t,a,s){return t=la(6,t,null,a),t.lanes=s,t}function $u(t){var a=la(18,null,null,0);return a.stateNode=t,a}function ko(t,a,s){return a=la(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Yu=new WeakMap;function ba(t,a){if(typeof t=="object"&&t!==null){var s=Yu.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Ha(a)},Yu.set(t,a),a)}return{value:t,source:a,stack:Ha(a)}}var wl=[],kl=0,_n=null,xr=0,ya=[],va=0,ps=null,Oa=1,La="";function Qa(t,a){wl[kl++]=xr,wl[kl++]=_n,_n=t,xr=a}function Qu(t,a,s){ya[va++]=Oa,ya[va++]=La,ya[va++]=ps,ps=t;var r=Oa;t=La;var o=32-ze(r)-1;r&=~(1<<o),s+=1;var d=32-ze(a)+o;if(30<d){var y=o-o%5;d=(r&(1<<y)-1).toString(32),r>>=y,o-=y,Oa=1<<32-ze(a)+o|s<<o|r,La=d+t}else Oa=1<<d|s<<o|r,La=t}function So(t){t.return!==null&&(Qa(t,1),Qu(t,1,0))}function _o(t){for(;t===_n;)_n=wl[--kl],wl[kl]=null,xr=wl[--kl],wl[kl]=null;for(;t===ps;)ps=ya[--va],ya[va]=null,La=ya[--va],ya[va]=null,Oa=ya[--va],ya[va]=null}function Vu(t,a){ya[va++]=Oa,ya[va++]=La,ya[va++]=ps,Oa=a.id,La=a.overflow,ps=t}var Lt=null,ot=null,$e=!1,fs=null,ja=!1,Co=Error(i(519));function gs(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pr(ba(a,t)),Co}function Iu(t){var a=t.stateNode,s=t.type,r=t.memoizedProps;switch(a[Ot]=t,a[It]=r,s){case"dialog":He("cancel",a),He("close",a);break;case"iframe":case"object":case"embed":He("load",a);break;case"video":case"audio":for(s=0;s<Ur.length;s++)He(Ur[s],a);break;case"source":He("error",a);break;case"img":case"image":case"link":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"input":He("invalid",a),iu(a,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":He("invalid",a);break;case"textarea":He("invalid",a),cu(a,r.value,r.defaultValue,r.children)}s=r.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||r.suppressHydrationWarning===!0||ux(a.textContent,s)?(r.popover!=null&&(He("beforetoggle",a),He("toggle",a)),r.onScroll!=null&&He("scroll",a),r.onScrollEnd!=null&&He("scrollend",a),r.onClick!=null&&(a.onclick=Pa),a=!0):a=!1,a||gs(t,!0)}function Xu(t){for(Lt=t.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:ja=!1;return;case 27:case 3:ja=!0;return;default:Lt=Lt.return}}function Sl(t){if(t!==Lt)return!1;if(!$e)return Xu(t),$e=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Yc(t.type,t.memoizedProps)),s=!s),s&&ot&&gs(t),Xu(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));ot=vx(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));ot=vx(t)}else a===27?(a=ot,Ds(t.type)?(t=Zc,Zc=null,ot=t):ot=a):ot=Lt?wa(t.stateNode.nextSibling):null;return!0}function Vs(){ot=Lt=null,$e=!1}function Eo(){var t=fs;return t!==null&&(Wt===null?Wt=t:Wt.push.apply(Wt,t),fs=null),t}function pr(t){fs===null?fs=[t]:fs.push(t)}var Ao=E(null),Is=null,Va=null;function bs(t,a,s){_(Ao,a._currentValue),a._currentValue=s}function Ia(t){t._currentValue=Ao.current,L(Ao)}function To(t,a,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,r!==null&&(r.childLanes|=a)):r!==null&&(r.childLanes&a)!==a&&(r.childLanes|=a),t===s)break;t=t.return}}function Do(t,a,s,r){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){var y=o.child;d=d.firstContext;e:for(;d!==null;){var A=d;d=o;for(var z=0;z<a.length;z++)if(A.context===a[z]){d.lanes|=s,A=d.alternate,A!==null&&(A.lanes|=s),To(d.return,s,t),r||(y=null);break e}d=A.next}}else if(o.tag===18){if(y=o.return,y===null)throw Error(i(341));y.lanes|=s,d=y.alternate,d!==null&&(d.lanes|=s),To(y,s,t),y=null}else y=o.child;if(y!==null)y.return=o;else for(y=o;y!==null;){if(y===t){y=null;break}if(o=y.sibling,o!==null){o.return=y.return,y=o;break}y=y.return}o=y}}function _l(t,a,s,r){t=null;for(var o=a,d=!1;o!==null;){if(!d){if((o.flags&524288)!==0)d=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var y=o.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var A=o.type;sa(o.pendingProps.value,y.value)||(t!==null?t.push(A):t=[A])}}else if(o===je.current){if(y=o.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(Fr):t=[Fr])}o=o.return}t!==null&&Do(a,t,s,r),a.flags|=262144}function Cn(t){for(t=t.firstContext;t!==null;){if(!sa(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Xs(t){Is=t,Va=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ut(t){return Zu(Is,t)}function En(t,a){return Is===null&&Xs(t),Zu(t,a)}function Zu(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Va===null){if(t===null)throw Error(i(308));Va=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Va=Va.next=a;return s}var Mf=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,r){t.push(r)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},zf=l.unstable_scheduleCallback,Of=l.unstable_NormalPriority,Nt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ro(){return{controller:new Mf,data:new Map,refCount:0}}function fr(t){t.refCount--,t.refCount===0&&zf(Of,function(){t.controller.abort()})}var gr=null,Mo=0,Cl=0,El=null;function Lf(t,a){if(gr===null){var s=gr=[];Mo=0,Cl=Lc(),El={status:"pending",value:void 0,then:function(r){s.push(r)}}}return Mo++,a.then(Ku,Ku),a}function Ku(){if(--Mo===0&&gr!==null){El!==null&&(El.status="fulfilled");var t=gr;gr=null,Cl=0,El=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Uf(t,a){var s=[],r={status:"pending",value:null,reason:null,then:function(o){s.push(o)}};return t.then(function(){r.status="fulfilled",r.value=a;for(var o=0;o<s.length;o++)(0,s[o])(a)},function(o){for(r.status="rejected",r.reason=o,o=0;o<s.length;o++)(0,s[o])(void 0)}),r}var Ju=U.S;U.S=function(t,a){Oh=Ke(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Lf(t,a),Ju!==null&&Ju(t,a)};var Zs=E(null);function zo(){var t=Zs.current;return t!==null?t:rt.pooledCache}function An(t,a){a===null?_(Zs,Zs.current):_(Zs,a.pool)}function Wu(){var t=zo();return t===null?null:{parent:Nt._currentValue,pool:t}}var Al=Error(i(460)),Oo=Error(i(474)),Tn=Error(i(542)),Dn={then:function(){}};function em(t){return t=t.status,t==="fulfilled"||t==="rejected"}function tm(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(Pa,Pa),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,sm(t),t;default:if(typeof a.status=="string")a.then(Pa,Pa);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(r){if(a.status==="pending"){var o=a;o.status="fulfilled",o.value=r}},function(r){if(a.status==="pending"){var o=a;o.status="rejected",o.reason=r}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,sm(t),t}throw Js=a,Al}}function Ks(t){try{var a=t._init;return a(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Js=s,Al):s}}var Js=null;function am(){if(Js===null)throw Error(i(459));var t=Js;return Js=null,t}function sm(t){if(t===Al||t===Tn)throw Error(i(483))}var Tl=null,br=0;function Rn(t){var a=br;return br+=1,Tl===null&&(Tl=[]),tm(Tl,t,a)}function yr(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Mn(t,a){throw a.$$typeof===k?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function lm(t){function a(Q,B){if(t){var J=Q.deletions;J===null?(Q.deletions=[B],Q.flags|=16):J.push(B)}}function s(Q,B){if(!t)return null;for(;B!==null;)a(Q,B),B=B.sibling;return null}function r(Q){for(var B=new Map;Q!==null;)Q.key!==null?B.set(Q.key,Q):B.set(Q.index,Q),Q=Q.sibling;return B}function o(Q,B){return Q=Ya(Q,B),Q.index=0,Q.sibling=null,Q}function d(Q,B,J){return Q.index=J,t?(J=Q.alternate,J!==null?(J=J.index,J<B?(Q.flags|=67108866,B):J):(Q.flags|=67108866,B)):(Q.flags|=1048576,B)}function y(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function A(Q,B,J,pe){return B===null||B.tag!==6?(B=wo(J,Q.mode,pe),B.return=Q,B):(B=o(B,J),B.return=Q,B)}function z(Q,B,J,pe){var Ae=J.type;return Ae===C?xe(Q,B,J.props.children,pe,J.key):B!==null&&(B.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===ce&&Ks(Ae)===B.type)?(B=o(B,J.props),yr(B,J),B.return=Q,B):(B=Sn(J.type,J.key,J.props,null,Q.mode,pe),yr(B,J),B.return=Q,B)}function W(Q,B,J,pe){return B===null||B.tag!==4||B.stateNode.containerInfo!==J.containerInfo||B.stateNode.implementation!==J.implementation?(B=ko(J,Q.mode,pe),B.return=Q,B):(B=o(B,J.children||[]),B.return=Q,B)}function xe(Q,B,J,pe,Ae){return B===null||B.tag!==7?(B=Qs(J,Q.mode,pe,Ae),B.return=Q,B):(B=o(B,J),B.return=Q,B)}function fe(Q,B,J){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=wo(""+B,Q.mode,J),B.return=Q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return J=Sn(B.type,B.key,B.props,null,Q.mode,J),yr(J,B),J.return=Q,J;case N:return B=ko(B,Q.mode,J),B.return=Q,B;case ce:return B=Ks(B),fe(Q,B,J)}if(Y(B)||D(B))return B=Qs(B,Q.mode,J,null),B.return=Q,B;if(typeof B.then=="function")return fe(Q,Rn(B),J);if(B.$$typeof===M)return fe(Q,En(Q,B),J);Mn(Q,B)}return null}function te(Q,B,J,pe){var Ae=B!==null?B.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ae!==null?null:A(Q,B,""+J,pe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return J.key===Ae?z(Q,B,J,pe):null;case N:return J.key===Ae?W(Q,B,J,pe):null;case ce:return J=Ks(J),te(Q,B,J,pe)}if(Y(J)||D(J))return Ae!==null?null:xe(Q,B,J,pe,null);if(typeof J.then=="function")return te(Q,B,Rn(J),pe);if(J.$$typeof===M)return te(Q,B,En(Q,J),pe);Mn(Q,J)}return null}function oe(Q,B,J,pe,Ae){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Q=Q.get(J)||null,A(B,Q,""+pe,Ae);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case w:return Q=Q.get(pe.key===null?J:pe.key)||null,z(B,Q,pe,Ae);case N:return Q=Q.get(pe.key===null?J:pe.key)||null,W(B,Q,pe,Ae);case ce:return pe=Ks(pe),oe(Q,B,J,pe,Ae)}if(Y(pe)||D(pe))return Q=Q.get(J)||null,xe(B,Q,pe,Ae,null);if(typeof pe.then=="function")return oe(Q,B,J,Rn(pe),Ae);if(pe.$$typeof===M)return oe(Q,B,J,En(B,pe),Ae);Mn(B,pe)}return null}function Se(Q,B,J,pe){for(var Ae=null,Qe=null,Ce=B,Ue=B=0,Fe=null;Ce!==null&&Ue<J.length;Ue++){Ce.index>Ue?(Fe=Ce,Ce=null):Fe=Ce.sibling;var Ve=te(Q,Ce,J[Ue],pe);if(Ve===null){Ce===null&&(Ce=Fe);break}t&&Ce&&Ve.alternate===null&&a(Q,Ce),B=d(Ve,B,Ue),Qe===null?Ae=Ve:Qe.sibling=Ve,Qe=Ve,Ce=Fe}if(Ue===J.length)return s(Q,Ce),$e&&Qa(Q,Ue),Ae;if(Ce===null){for(;Ue<J.length;Ue++)Ce=fe(Q,J[Ue],pe),Ce!==null&&(B=d(Ce,B,Ue),Qe===null?Ae=Ce:Qe.sibling=Ce,Qe=Ce);return $e&&Qa(Q,Ue),Ae}for(Ce=r(Ce);Ue<J.length;Ue++)Fe=oe(Ce,Q,Ue,J[Ue],pe),Fe!==null&&(t&&Fe.alternate!==null&&Ce.delete(Fe.key===null?Ue:Fe.key),B=d(Fe,B,Ue),Qe===null?Ae=Fe:Qe.sibling=Fe,Qe=Fe);return t&&Ce.forEach(function(Ls){return a(Q,Ls)}),$e&&Qa(Q,Ue),Ae}function Te(Q,B,J,pe){if(J==null)throw Error(i(151));for(var Ae=null,Qe=null,Ce=B,Ue=B=0,Fe=null,Ve=J.next();Ce!==null&&!Ve.done;Ue++,Ve=J.next()){Ce.index>Ue?(Fe=Ce,Ce=null):Fe=Ce.sibling;var Ls=te(Q,Ce,Ve.value,pe);if(Ls===null){Ce===null&&(Ce=Fe);break}t&&Ce&&Ls.alternate===null&&a(Q,Ce),B=d(Ls,B,Ue),Qe===null?Ae=Ls:Qe.sibling=Ls,Qe=Ls,Ce=Fe}if(Ve.done)return s(Q,Ce),$e&&Qa(Q,Ue),Ae;if(Ce===null){for(;!Ve.done;Ue++,Ve=J.next())Ve=fe(Q,Ve.value,pe),Ve!==null&&(B=d(Ve,B,Ue),Qe===null?Ae=Ve:Qe.sibling=Ve,Qe=Ve);return $e&&Qa(Q,Ue),Ae}for(Ce=r(Ce);!Ve.done;Ue++,Ve=J.next())Ve=oe(Ce,Q,Ue,Ve.value,pe),Ve!==null&&(t&&Ve.alternate!==null&&Ce.delete(Ve.key===null?Ue:Ve.key),B=d(Ve,B,Ue),Qe===null?Ae=Ve:Qe.sibling=Ve,Qe=Ve);return t&&Ce.forEach(function(Ig){return a(Q,Ig)}),$e&&Qa(Q,Ue),Ae}function at(Q,B,J,pe){if(typeof J=="object"&&J!==null&&J.type===C&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case w:e:{for(var Ae=J.key;B!==null;){if(B.key===Ae){if(Ae=J.type,Ae===C){if(B.tag===7){s(Q,B.sibling),pe=o(B,J.props.children),pe.return=Q,Q=pe;break e}}else if(B.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===ce&&Ks(Ae)===B.type){s(Q,B.sibling),pe=o(B,J.props),yr(pe,J),pe.return=Q,Q=pe;break e}s(Q,B);break}else a(Q,B);B=B.sibling}J.type===C?(pe=Qs(J.props.children,Q.mode,pe,J.key),pe.return=Q,Q=pe):(pe=Sn(J.type,J.key,J.props,null,Q.mode,pe),yr(pe,J),pe.return=Q,Q=pe)}return y(Q);case N:e:{for(Ae=J.key;B!==null;){if(B.key===Ae)if(B.tag===4&&B.stateNode.containerInfo===J.containerInfo&&B.stateNode.implementation===J.implementation){s(Q,B.sibling),pe=o(B,J.children||[]),pe.return=Q,Q=pe;break e}else{s(Q,B);break}else a(Q,B);B=B.sibling}pe=ko(J,Q.mode,pe),pe.return=Q,Q=pe}return y(Q);case ce:return J=Ks(J),at(Q,B,J,pe)}if(Y(J))return Se(Q,B,J,pe);if(D(J)){if(Ae=D(J),typeof Ae!="function")throw Error(i(150));return J=Ae.call(J),Te(Q,B,J,pe)}if(typeof J.then=="function")return at(Q,B,Rn(J),pe);if(J.$$typeof===M)return at(Q,B,En(Q,J),pe);Mn(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,B!==null&&B.tag===6?(s(Q,B.sibling),pe=o(B,J),pe.return=Q,Q=pe):(s(Q,B),pe=wo(J,Q.mode,pe),pe.return=Q,Q=pe),y(Q)):s(Q,B)}return function(Q,B,J,pe){try{br=0;var Ae=at(Q,B,J,pe);return Tl=null,Ae}catch(Ce){if(Ce===Al||Ce===Tn)throw Ce;var Qe=la(29,Ce,null,Q.mode);return Qe.lanes=pe,Qe.return=Q,Qe}}}var Ws=lm(!0),rm=lm(!1),ys=!1;function Lo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uo(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function js(t,a,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Ie&2)!==0){var o=r.pending;return o===null?a.next=a:(a.next=o.next,o.next=a),r.pending=a,a=kn(t),Fu(t,null,s),a}return wn(t,r,a,s),kn(t)}function vr(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var r=a.lanes;r&=t.pendingLanes,s|=r,a.lanes=s,Zd(t,s)}}function qo(t,a){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var o=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?o=d=y:d=d.next=y,s=s.next}while(s!==null);d===null?o=d=a:d=d.next=a}else o=d=a;s={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:r.shared,callbacks:r.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var Bo=!1;function jr(){if(Bo){var t=El;if(t!==null)throw t}}function Nr(t,a,s,r){Bo=!1;var o=t.updateQueue;ys=!1;var d=o.firstBaseUpdate,y=o.lastBaseUpdate,A=o.shared.pending;if(A!==null){o.shared.pending=null;var z=A,W=z.next;z.next=null,y===null?d=W:y.next=W,y=z;var xe=t.alternate;xe!==null&&(xe=xe.updateQueue,A=xe.lastBaseUpdate,A!==y&&(A===null?xe.firstBaseUpdate=W:A.next=W,xe.lastBaseUpdate=z))}if(d!==null){var fe=o.baseState;y=0,xe=W=z=null,A=d;do{var te=A.lane&-536870913,oe=te!==A.lane;if(oe?(Ge&te)===te:(r&te)===te){te!==0&&te===Cl&&(Bo=!0),xe!==null&&(xe=xe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Se=t,Te=A;te=a;var at=s;switch(Te.tag){case 1:if(Se=Te.payload,typeof Se=="function"){fe=Se.call(at,fe,te);break e}fe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Te.payload,te=typeof Se=="function"?Se.call(at,fe,te):Se,te==null)break e;fe=f({},fe,te);break e;case 2:ys=!0}}te=A.callback,te!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=o.callbacks,oe===null?o.callbacks=[te]:oe.push(te))}else oe={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},xe===null?(W=xe=oe,z=fe):xe=xe.next=oe,y|=te;if(A=A.next,A===null){if(A=o.shared.pending,A===null)break;oe=A,A=oe.next,oe.next=null,o.lastBaseUpdate=oe,o.shared.pending=null}}while(!0);xe===null&&(z=fe),o.baseState=z,o.firstBaseUpdate=W,o.lastBaseUpdate=xe,d===null&&(o.shared.lanes=0),_s|=y,t.lanes=y,t.memoizedState=fe}}function nm(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function im(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)nm(s[t],a)}var Dl=E(null),zn=E(0);function om(t,a){t=ss,_(zn,t),_(Dl,a),ss=t|a.baseLanes}function Ho(){_(zn,ss),_(Dl,Dl.current)}function Go(){ss=zn.current,L(Dl),L(zn)}var ra=E(null),Na=null;function Ns(t){var a=t.alternate;_(yt,yt.current&1),_(ra,t),Na===null&&(a===null||Dl.current!==null||a.memoizedState!==null)&&(Na=t)}function Fo(t){_(yt,yt.current),_(ra,t),Na===null&&(Na=t)}function cm(t){t.tag===22?(_(yt,yt.current),_(ra,t),Na===null&&(Na=t)):ws()}function ws(){_(yt,yt.current),_(ra,ra.current)}function na(t){L(ra),Na===t&&(Na=null),L(yt)}var yt=E(0);function On(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Ic(s)||Xc(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Xa=0,Oe=null,et=null,wt=null,Ln=!1,Rl=!1,el=!1,Un=0,wr=0,Ml=null,qf=0;function pt(){throw Error(i(321))}function Po(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!sa(t[s],a[s]))return!1;return!0}function $o(t,a,s,r,o,d){return Xa=d,Oe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,U.H=t===null||t.memoizedState===null?Qm:rc,el=!1,d=s(r,o),el=!1,Rl&&(d=um(a,s,r,o)),dm(t),d}function dm(t){U.H=_r;var a=et!==null&&et.next!==null;if(Xa=0,wt=et=Oe=null,Ln=!1,wr=0,Ml=null,a)throw Error(i(300));t===null||kt||(t=t.dependencies,t!==null&&Cn(t)&&(kt=!0))}function um(t,a,s,r){Oe=t;var o=0;do{if(Rl&&(Ml=null),wr=0,Rl=!1,25<=o)throw Error(i(301));if(o+=1,wt=et=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}U.H=Vm,d=a(s,r)}while(Rl);return d}function Bf(){var t=U.H,a=t.useState()[0];return a=typeof a.then=="function"?kr(a):a,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(Oe.flags|=1024),a}function Yo(){var t=Un!==0;return Un=0,t}function Qo(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Vo(t){if(Ln){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Ln=!1}Xa=0,wt=et=Oe=null,Rl=!1,wr=Un=0,Ml=null}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Oe.memoizedState=wt=t:wt=wt.next=t,wt}function vt(){if(et===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var a=wt===null?Oe.memoizedState:wt.next;if(a!==null)wt=a,et=t;else{if(t===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},wt===null?Oe.memoizedState=wt=t:wt=wt.next=t}return wt}function qn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kr(t){var a=wr;return wr+=1,Ml===null&&(Ml=[]),t=tm(Ml,t,a),a=Oe,(wt===null?a.memoizedState:wt.next)===null&&(a=a.alternate,U.H=a===null||a.memoizedState===null?Qm:rc),t}function Bn(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return kr(t);if(t.$$typeof===M)return Ut(t)}throw Error(i(438,String(t)))}function Io(t){var a=null,s=Oe.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var r=Oe.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(a={data:r.data.map(function(o){return o.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=qn(),Oe.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),r=0;r<t;r++)s[r]=ue;return a.index++,s}function Za(t,a){return typeof a=="function"?a(t):a}function Hn(t){var a=vt();return Xo(a,et,t)}function Xo(t,a,s){var r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=s;var o=t.baseQueue,d=r.pending;if(d!==null){if(o!==null){var y=o.next;o.next=d.next,d.next=y}a.baseQueue=o=d,r.pending=null}if(d=t.baseState,o===null)t.memoizedState=d;else{a=o.next;var A=y=null,z=null,W=a,xe=!1;do{var fe=W.lane&-536870913;if(fe!==W.lane?(Ge&fe)===fe:(Xa&fe)===fe){var te=W.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),fe===Cl&&(xe=!0);else if((Xa&te)===te){W=W.next,te===Cl&&(xe=!0);continue}else fe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},z===null?(A=z=fe,y=d):z=z.next=fe,Oe.lanes|=te,_s|=te;fe=W.action,el&&s(d,fe),d=W.hasEagerState?W.eagerState:s(d,fe)}else te={lane:fe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},z===null?(A=z=te,y=d):z=z.next=te,Oe.lanes|=fe,_s|=fe;W=W.next}while(W!==null&&W!==a);if(z===null?y=d:z.next=A,!sa(d,t.memoizedState)&&(kt=!0,xe&&(s=El,s!==null)))throw s;t.memoizedState=d,t.baseState=y,t.baseQueue=z,r.lastRenderedState=d}return o===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Zo(t){var a=vt(),s=a.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var r=s.dispatch,o=s.pending,d=a.memoizedState;if(o!==null){s.pending=null;var y=o=o.next;do d=t(d,y.action),y=y.next;while(y!==o);sa(d,a.memoizedState)||(kt=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),s.lastRenderedState=d}return[d,r]}function mm(t,a,s){var r=Oe,o=vt(),d=$e;if(d){if(s===void 0)throw Error(i(407));s=s()}else s=a();var y=!sa((et||o).memoizedState,s);if(y&&(o.memoizedState=s,kt=!0),o=o.queue,Wo(pm.bind(null,r,o,t),[t]),o.getSnapshot!==a||y||wt!==null&&wt.memoizedState.tag&1){if(r.flags|=2048,zl(9,{destroy:void 0},xm.bind(null,r,o,s,a),null),rt===null)throw Error(i(349));d||(Xa&127)!==0||hm(r,a,s)}return s}function hm(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=Oe.updateQueue,a===null?(a=qn(),Oe.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function xm(t,a,s,r){a.value=s,a.getSnapshot=r,fm(a)&&gm(t)}function pm(t,a,s){return s(function(){fm(a)&&gm(t)})}function fm(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!sa(t,s)}catch{return!0}}function gm(t){var a=Ys(t,2);a!==null&&ea(a,t,2)}function Ko(t){var a=Pt();if(typeof t=="function"){var s=t;if(t=s(),el){De(!0);try{s()}finally{De(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:t},a}function bm(t,a,s,r){return t.baseState=s,Xo(t,et,typeof r=="function"?r:Za)}function Hf(t,a,s,r,o){if(Pn(t))throw Error(i(485));if(t=a.action,t!==null){var d={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};U.T!==null?s(!0):d.isTransition=!1,r(d),s=a.pending,s===null?(d.next=a.pending=d,ym(a,d)):(d.next=s.next,a.pending=s.next=d)}}function ym(t,a){var s=a.action,r=a.payload,o=t.state;if(a.isTransition){var d=U.T,y={};U.T=y;try{var A=s(o,r),z=U.S;z!==null&&z(y,A),vm(t,a,A)}catch(W){Jo(t,a,W)}finally{d!==null&&y.types!==null&&(d.types=y.types),U.T=d}}else try{d=s(o,r),vm(t,a,d)}catch(W){Jo(t,a,W)}}function vm(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(r){jm(t,a,r)},function(r){return Jo(t,a,r)}):jm(t,a,s)}function jm(t,a,s){a.status="fulfilled",a.value=s,Nm(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,ym(t,s)))}function Jo(t,a,s){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do a.status="rejected",a.reason=s,Nm(a),a=a.next;while(a!==r)}t.action=null}function Nm(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function wm(t,a){return a}function km(t,a){if($e){var s=rt.formState;if(s!==null){e:{var r=Oe;if($e){if(ot){t:{for(var o=ot,d=ja;o.nodeType!==8;){if(!d){o=null;break t}if(o=wa(o.nextSibling),o===null){o=null;break t}}d=o.data,o=d==="F!"||d==="F"?o:null}if(o){ot=wa(o.nextSibling),r=o.data==="F!";break e}}gs(r)}r=!1}r&&(a=s[0])}}return s=Pt(),s.memoizedState=s.baseState=a,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wm,lastRenderedState:a},s.queue=r,s=Pm.bind(null,Oe,r),r.dispatch=s,r=Ko(!1),d=lc.bind(null,Oe,!1,r.queue),r=Pt(),o={state:a,dispatch:null,action:t,pending:null},r.queue=o,s=Hf.bind(null,Oe,o,d,s),o.dispatch=s,r.memoizedState=t,[a,s,!1]}function Sm(t){var a=vt();return _m(a,et,t)}function _m(t,a,s){if(a=Xo(t,a,wm)[0],t=Hn(Za)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var r=kr(a)}catch(y){throw y===Al?Tn:y}else r=a;a=vt();var o=a.queue,d=o.dispatch;return s!==a.memoizedState&&(Oe.flags|=2048,zl(9,{destroy:void 0},Gf.bind(null,o,s),null)),[r,d,t]}function Gf(t,a){t.action=a}function Cm(t){var a=vt(),s=et;if(s!==null)return _m(a,s,t);vt(),a=a.memoizedState,s=vt();var r=s.queue.dispatch;return s.memoizedState=t,[a,r,!1]}function zl(t,a,s,r){return t={tag:t,create:s,deps:r,inst:a,next:null},a=Oe.updateQueue,a===null&&(a=qn(),Oe.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,a.lastEffect=t),t}function Em(){return vt().memoizedState}function Gn(t,a,s,r){var o=Pt();Oe.flags|=t,o.memoizedState=zl(1|a,{destroy:void 0},s,r===void 0?null:r)}function Fn(t,a,s,r){var o=vt();r=r===void 0?null:r;var d=o.memoizedState.inst;et!==null&&r!==null&&Po(r,et.memoizedState.deps)?o.memoizedState=zl(a,d,s,r):(Oe.flags|=t,o.memoizedState=zl(1|a,d,s,r))}function Am(t,a){Gn(8390656,8,t,a)}function Wo(t,a){Fn(2048,8,t,a)}function Ff(t){Oe.flags|=4;var a=Oe.updateQueue;if(a===null)a=qn(),Oe.updateQueue=a,a.events=[t];else{var s=a.events;s===null?a.events=[t]:s.push(t)}}function Tm(t){var a=vt().memoizedState;return Ff({ref:a,nextImpl:t}),function(){if((Ie&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Dm(t,a){return Fn(4,2,t,a)}function Rm(t,a){return Fn(4,4,t,a)}function Mm(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function zm(t,a,s){s=s!=null?s.concat([t]):null,Fn(4,4,Mm.bind(null,a,t),s)}function ec(){}function Om(t,a){var s=vt();a=a===void 0?null:a;var r=s.memoizedState;return a!==null&&Po(a,r[1])?r[0]:(s.memoizedState=[t,a],t)}function Lm(t,a){var s=vt();a=a===void 0?null:a;var r=s.memoizedState;if(a!==null&&Po(a,r[1]))return r[0];if(r=t(),el){De(!0);try{t()}finally{De(!1)}}return s.memoizedState=[r,a],r}function tc(t,a,s){return s===void 0||(Xa&1073741824)!==0&&(Ge&261930)===0?t.memoizedState=a:(t.memoizedState=s,t=Uh(),Oe.lanes|=t,_s|=t,s)}function Um(t,a,s,r){return sa(s,a)?s:Dl.current!==null?(t=tc(t,s,r),sa(t,a)||(kt=!0),t):(Xa&42)===0||(Xa&1073741824)!==0&&(Ge&261930)===0?(kt=!0,t.memoizedState=s):(t=Uh(),Oe.lanes|=t,_s|=t,a)}function qm(t,a,s,r,o){var d=se.p;se.p=d!==0&&8>d?d:8;var y=U.T,A={};U.T=A,lc(t,!1,a,s);try{var z=o(),W=U.S;if(W!==null&&W(A,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var xe=Uf(z,r);Sr(t,a,xe,ca(t))}else Sr(t,a,r,ca(t))}catch(fe){Sr(t,a,{then:function(){},status:"rejected",reason:fe},ca())}finally{se.p=d,y!==null&&A.types!==null&&(y.types=A.types),U.T=y}}function Pf(){}function ac(t,a,s,r){if(t.tag!==5)throw Error(i(476));var o=Bm(t).queue;qm(t,o,a,Z,s===null?Pf:function(){return Hm(t),s(r)})}function Bm(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:Z},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Hm(t){var a=Bm(t);a.next===null&&(a=t.alternate.memoizedState),Sr(t,a.next.queue,{},ca())}function sc(){return Ut(Fr)}function Gm(){return vt().memoizedState}function Fm(){return vt().memoizedState}function $f(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=ca();t=vs(s);var r=js(a,t,s);r!==null&&(ea(r,a,s),vr(r,a,s)),a={cache:Ro()},t.payload=a;return}a=a.return}}function Yf(t,a,s){var r=ca();s={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Pn(t)?$m(a,s):(s=jo(t,a,s,r),s!==null&&(ea(s,t,r),Ym(s,a,r)))}function Pm(t,a,s){var r=ca();Sr(t,a,s,r)}function Sr(t,a,s,r){var o={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Pn(t))$m(a,o);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var y=a.lastRenderedState,A=d(y,s);if(o.hasEagerState=!0,o.eagerState=A,sa(A,y))return wn(t,a,o,0),rt===null&&Nn(),!1}catch{}if(s=jo(t,a,o,r),s!==null)return ea(s,t,r),Ym(s,a,r),!0}return!1}function lc(t,a,s,r){if(r={lane:2,revertLane:Lc(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Pn(t)){if(a)throw Error(i(479))}else a=jo(t,s,r,2),a!==null&&ea(a,t,2)}function Pn(t){var a=t.alternate;return t===Oe||a!==null&&a===Oe}function $m(t,a){Rl=Ln=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function Ym(t,a,s){if((s&4194048)!==0){var r=a.lanes;r&=t.pendingLanes,s|=r,a.lanes=s,Zd(t,s)}}var _r={readContext:Ut,use:Bn,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};_r.useEffectEvent=pt;var Qm={readContext:Ut,use:Bn,useCallback:function(t,a){return Pt().memoizedState=[t,a===void 0?null:a],t},useContext:Ut,useEffect:Am,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,Gn(4194308,4,Mm.bind(null,a,t),s)},useLayoutEffect:function(t,a){return Gn(4194308,4,t,a)},useInsertionEffect:function(t,a){Gn(4,2,t,a)},useMemo:function(t,a){var s=Pt();a=a===void 0?null:a;var r=t();if(el){De(!0);try{t()}finally{De(!1)}}return s.memoizedState=[r,a],r},useReducer:function(t,a,s){var r=Pt();if(s!==void 0){var o=s(a);if(el){De(!0);try{s(a)}finally{De(!1)}}}else o=a;return r.memoizedState=r.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},r.queue=t,t=t.dispatch=Yf.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var a=Pt();return t={current:t},a.memoizedState=t},useState:function(t){t=Ko(t);var a=t.queue,s=Pm.bind(null,Oe,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:ec,useDeferredValue:function(t,a){var s=Pt();return tc(s,t,a)},useTransition:function(){var t=Ko(!1);return t=qm.bind(null,Oe,t.queue,!0,!1),Pt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var r=Oe,o=Pt();if($e){if(s===void 0)throw Error(i(407));s=s()}else{if(s=a(),rt===null)throw Error(i(349));(Ge&127)!==0||hm(r,a,s)}o.memoizedState=s;var d={value:s,getSnapshot:a};return o.queue=d,Am(pm.bind(null,r,d,t),[t]),r.flags|=2048,zl(9,{destroy:void 0},xm.bind(null,r,d,s,a),null),s},useId:function(){var t=Pt(),a=rt.identifierPrefix;if($e){var s=La,r=Oa;s=(r&~(1<<32-ze(r)-1)).toString(32)+s,a="_"+a+"R_"+s,s=Un++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=qf++,a="_"+a+"r_"+s.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:sc,useFormState:km,useActionState:km,useOptimistic:function(t){var a=Pt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=lc.bind(null,Oe,!0,s),s.dispatch=a,[t,a]},useMemoCache:Io,useCacheRefresh:function(){return Pt().memoizedState=$f.bind(null,Oe)},useEffectEvent:function(t){var a=Pt(),s={impl:t};return a.memoizedState=s,function(){if((Ie&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},rc={readContext:Ut,use:Bn,useCallback:Om,useContext:Ut,useEffect:Wo,useImperativeHandle:zm,useInsertionEffect:Dm,useLayoutEffect:Rm,useMemo:Lm,useReducer:Hn,useRef:Em,useState:function(){return Hn(Za)},useDebugValue:ec,useDeferredValue:function(t,a){var s=vt();return Um(s,et.memoizedState,t,a)},useTransition:function(){var t=Hn(Za)[0],a=vt().memoizedState;return[typeof t=="boolean"?t:kr(t),a]},useSyncExternalStore:mm,useId:Gm,useHostTransitionStatus:sc,useFormState:Sm,useActionState:Sm,useOptimistic:function(t,a){var s=vt();return bm(s,et,t,a)},useMemoCache:Io,useCacheRefresh:Fm};rc.useEffectEvent=Tm;var Vm={readContext:Ut,use:Bn,useCallback:Om,useContext:Ut,useEffect:Wo,useImperativeHandle:zm,useInsertionEffect:Dm,useLayoutEffect:Rm,useMemo:Lm,useReducer:Zo,useRef:Em,useState:function(){return Zo(Za)},useDebugValue:ec,useDeferredValue:function(t,a){var s=vt();return et===null?tc(s,t,a):Um(s,et.memoizedState,t,a)},useTransition:function(){var t=Zo(Za)[0],a=vt().memoizedState;return[typeof t=="boolean"?t:kr(t),a]},useSyncExternalStore:mm,useId:Gm,useHostTransitionStatus:sc,useFormState:Cm,useActionState:Cm,useOptimistic:function(t,a){var s=vt();return et!==null?bm(s,et,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Io,useCacheRefresh:Fm};Vm.useEffectEvent=Tm;function nc(t,a,s,r){a=t.memoizedState,s=s(r,a),s=s==null?a:f({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ic={enqueueSetState:function(t,a,s){t=t._reactInternals;var r=ca(),o=vs(r);o.payload=a,s!=null&&(o.callback=s),a=js(t,o,r),a!==null&&(ea(a,t,r),vr(a,t,r))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var r=ca(),o=vs(r);o.tag=1,o.payload=a,s!=null&&(o.callback=s),a=js(t,o,r),a!==null&&(ea(a,t,r),vr(a,t,r))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=ca(),r=vs(s);r.tag=2,a!=null&&(r.callback=a),a=js(t,r,s),a!==null&&(ea(a,t,s),vr(a,t,s))}};function Im(t,a,s,r,o,d,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,d,y):a.prototype&&a.prototype.isPureReactComponent?!mr(s,r)||!mr(o,d):!0}function Xm(t,a,s,r){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,r),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,r),a.state!==t&&ic.enqueueReplaceState(a,a.state,null)}function tl(t,a){var s=a;if("ref"in a){s={};for(var r in a)r!=="ref"&&(s[r]=a[r])}if(t=t.defaultProps){s===a&&(s=f({},s));for(var o in t)s[o]===void 0&&(s[o]=t[o])}return s}function Zm(t){jn(t)}function Km(t){console.error(t)}function Jm(t){jn(t)}function $n(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(r){setTimeout(function(){throw r})}}function Wm(t,a,s){try{var r=t.onCaughtError;r(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function oc(t,a,s){return s=vs(s),s.tag=3,s.payload={element:null},s.callback=function(){$n(t,a)},s}function eh(t){return t=vs(t),t.tag=3,t}function th(t,a,s,r){var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var d=r.value;t.payload=function(){return o(d)},t.callback=function(){Wm(a,s,r)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){Wm(a,s,r),typeof o!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var A=r.stack;this.componentDidCatch(r.value,{componentStack:A!==null?A:""})})}function Qf(t,a,s,r,o){if(s.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(a=s.alternate,a!==null&&_l(a,s,o,!0),s=ra.current,s!==null){switch(s.tag){case 31:case 13:return Na===null?ai():s.alternate===null&&ft===0&&(ft=3),s.flags&=-257,s.flags|=65536,s.lanes=o,r===Dn?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([r]):a.add(r),Mc(t,r,o)),!1;case 22:return s.flags|=65536,r===Dn?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([r]):s.add(r)),Mc(t,r,o)),!1}throw Error(i(435,s.tag))}return Mc(t,r,o),ai(),!1}if($e)return a=ra.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=o,r!==Co&&(t=Error(i(422),{cause:r}),pr(ba(t,s)))):(r!==Co&&(a=Error(i(423),{cause:r}),pr(ba(a,s))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,r=ba(r,s),o=oc(t.stateNode,r,o),qo(t,o),ft!==4&&(ft=2)),!1;var d=Error(i(520),{cause:r});if(d=ba(d,s),zr===null?zr=[d]:zr.push(d),ft!==4&&(ft=2),a===null)return!0;r=ba(r,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=o&-o,s.lanes|=t,t=oc(s.stateNode,r,t),qo(s,t),!1;case 1:if(a=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Cs===null||!Cs.has(d))))return s.flags|=65536,o&=-o,s.lanes|=o,o=eh(o),th(o,t,s,r),qo(s,o),!1}s=s.return}while(s!==null);return!1}var cc=Error(i(461)),kt=!1;function qt(t,a,s,r){a.child=t===null?rm(a,null,s,r):Ws(a,t.child,s,r)}function ah(t,a,s,r,o){s=s.render;var d=a.ref;if("ref"in r){var y={};for(var A in r)A!=="ref"&&(y[A]=r[A])}else y=r;return Xs(a),r=$o(t,a,s,y,d,o),A=Yo(),t!==null&&!kt?(Qo(t,a,o),Ka(t,a,o)):($e&&A&&So(a),a.flags|=1,qt(t,a,r,o),a.child)}function sh(t,a,s,r,o){if(t===null){var d=s.type;return typeof d=="function"&&!No(d)&&d.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=d,lh(t,a,d,r,o)):(t=Sn(s.type,null,r,a,a.mode,o),t.ref=a.ref,t.return=a,a.child=t)}if(d=t.child,!gc(t,o)){var y=d.memoizedProps;if(s=s.compare,s=s!==null?s:mr,s(y,r)&&t.ref===a.ref)return Ka(t,a,o)}return a.flags|=1,t=Ya(d,r),t.ref=a.ref,t.return=a,a.child=t}function lh(t,a,s,r,o){if(t!==null){var d=t.memoizedProps;if(mr(d,r)&&t.ref===a.ref)if(kt=!1,a.pendingProps=r=d,gc(t,o))(t.flags&131072)!==0&&(kt=!0);else return a.lanes=t.lanes,Ka(t,a,o)}return dc(t,a,s,r,o)}function rh(t,a,s,r){var o=r.children,d=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((a.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,t!==null){for(r=a.child=t.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~d}else r=0,a.child=null;return nh(t,a,d,s,r)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&An(a,d!==null?d.cachePool:null),d!==null?om(a,d):Ho(),cm(a);else return r=a.lanes=536870912,nh(t,a,d!==null?d.baseLanes|s:s,s,r)}else d!==null?(An(a,d.cachePool),om(a,d),ws(),a.memoizedState=null):(t!==null&&An(a,null),Ho(),ws());return qt(t,a,o,s),a.child}function Cr(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function nh(t,a,s,r,o){var d=zo();return d=d===null?null:{parent:Nt._currentValue,pool:d},a.memoizedState={baseLanes:s,cachePool:d},t!==null&&An(a,null),Ho(),cm(a),t!==null&&_l(t,a,r,!0),a.childLanes=o,null}function Yn(t,a){return a=Vn({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function ih(t,a,s){return Ws(a,t.child,null,s),t=Yn(a,a.pendingProps),t.flags|=2,na(a),a.memoizedState=null,t}function Vf(t,a,s){var r=a.pendingProps,o=(a.flags&128)!==0;if(a.flags&=-129,t===null){if($e){if(r.mode==="hidden")return t=Yn(a,r),a.lanes=536870912,Cr(null,t);if(Fo(a),(t=ot)?(t=yx(t,ja),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ps!==null?{id:Oa,overflow:La}:null,retryLane:536870912,hydrationErrors:null},s=$u(t),s.return=a,a.child=s,Lt=a,ot=null)):t=null,t===null)throw gs(a);return a.lanes=536870912,null}return Yn(a,r)}var d=t.memoizedState;if(d!==null){var y=d.dehydrated;if(Fo(a),o)if(a.flags&256)a.flags&=-257,a=ih(t,a,s);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(kt||_l(t,a,s,!1),o=(s&t.childLanes)!==0,kt||o){if(r=rt,r!==null&&(y=Kd(r,s),y!==0&&y!==d.retryLane))throw d.retryLane=y,Ys(t,y),ea(r,t,y),cc;ai(),a=ih(t,a,s)}else t=d.treeContext,ot=wa(y.nextSibling),Lt=a,$e=!0,fs=null,ja=!1,t!==null&&Vu(a,t),a=Yn(a,r),a.flags|=4096;return a}return t=Ya(t.child,{mode:r.mode,children:r.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Qn(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function dc(t,a,s,r,o){return Xs(a),s=$o(t,a,s,r,void 0,o),r=Yo(),t!==null&&!kt?(Qo(t,a,o),Ka(t,a,o)):($e&&r&&So(a),a.flags|=1,qt(t,a,s,o),a.child)}function oh(t,a,s,r,o,d){return Xs(a),a.updateQueue=null,s=um(a,r,s,o),dm(t),r=Yo(),t!==null&&!kt?(Qo(t,a,d),Ka(t,a,d)):($e&&r&&So(a),a.flags|=1,qt(t,a,s,d),a.child)}function ch(t,a,s,r,o){if(Xs(a),a.stateNode===null){var d=Nl,y=s.contextType;typeof y=="object"&&y!==null&&(d=Ut(y)),d=new s(r,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ic,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=r,d.state=a.memoizedState,d.refs={},Lo(a),y=s.contextType,d.context=typeof y=="object"&&y!==null?Ut(y):Nl,d.state=a.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(nc(a,s,y,r),d.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&ic.enqueueReplaceState(d,d.state,null),Nr(a,r,d,o),jr(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),r=!0}else if(t===null){d=a.stateNode;var A=a.memoizedProps,z=tl(s,A);d.props=z;var W=d.context,xe=s.contextType;y=Nl,typeof xe=="object"&&xe!==null&&(y=Ut(xe));var fe=s.getDerivedStateFromProps;xe=typeof fe=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,xe||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||W!==y)&&Xm(a,d,r,y),ys=!1;var te=a.memoizedState;d.state=te,Nr(a,r,d,o),jr(),W=a.memoizedState,A||te!==W||ys?(typeof fe=="function"&&(nc(a,s,fe,r),W=a.memoizedState),(z=ys||Im(a,s,z,r,te,W,y))?(xe||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=r,a.memoizedState=W),d.props=r,d.state=W,d.context=y,r=z):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),r=!1)}else{d=a.stateNode,Uo(t,a),y=a.memoizedProps,xe=tl(s,y),d.props=xe,fe=a.pendingProps,te=d.context,W=s.contextType,z=Nl,typeof W=="object"&&W!==null&&(z=Ut(W)),A=s.getDerivedStateFromProps,(W=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==fe||te!==z)&&Xm(a,d,r,z),ys=!1,te=a.memoizedState,d.state=te,Nr(a,r,d,o),jr();var oe=a.memoizedState;y!==fe||te!==oe||ys||t!==null&&t.dependencies!==null&&Cn(t.dependencies)?(typeof A=="function"&&(nc(a,s,A,r),oe=a.memoizedState),(xe=ys||Im(a,s,xe,r,te,oe,z)||t!==null&&t.dependencies!==null&&Cn(t.dependencies))?(W||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,oe,z),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,oe,z)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&te===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&te===t.memoizedState||(a.flags|=1024),a.memoizedProps=r,a.memoizedState=oe),d.props=r,d.state=oe,d.context=z,r=xe):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&te===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&te===t.memoizedState||(a.flags|=1024),r=!1)}return d=r,Qn(t,a),r=(a.flags&128)!==0,d||r?(d=a.stateNode,s=r&&typeof s.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,t!==null&&r?(a.child=Ws(a,t.child,null,o),a.child=Ws(a,null,s,o)):qt(t,a,s,o),a.memoizedState=d.state,t=a.child):t=Ka(t,a,o),t}function dh(t,a,s,r){return Vs(),a.flags|=256,qt(t,a,s,r),a.child}var uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mc(t){return{baseLanes:t,cachePool:Wu()}}function hc(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=oa),t}function uh(t,a,s){var r=a.pendingProps,o=!1,d=(a.flags&128)!==0,y;if((y=d)||(y=t!==null&&t.memoizedState===null?!1:(yt.current&2)!==0),y&&(o=!0,a.flags&=-129),y=(a.flags&32)!==0,a.flags&=-33,t===null){if($e){if(o?Ns(a):ws(),(t=ot)?(t=yx(t,ja),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ps!==null?{id:Oa,overflow:La}:null,retryLane:536870912,hydrationErrors:null},s=$u(t),s.return=a,a.child=s,Lt=a,ot=null)):t=null,t===null)throw gs(a);return Xc(t)?a.lanes=32:a.lanes=536870912,null}var A=r.children;return r=r.fallback,o?(ws(),o=a.mode,A=Vn({mode:"hidden",children:A},o),r=Qs(r,o,s,null),A.return=a,r.return=a,A.sibling=r,a.child=A,r=a.child,r.memoizedState=mc(s),r.childLanes=hc(t,y,s),a.memoizedState=uc,Cr(null,r)):(Ns(a),xc(a,A))}var z=t.memoizedState;if(z!==null&&(A=z.dehydrated,A!==null)){if(d)a.flags&256?(Ns(a),a.flags&=-257,a=pc(t,a,s)):a.memoizedState!==null?(ws(),a.child=t.child,a.flags|=128,a=null):(ws(),A=r.fallback,o=a.mode,r=Vn({mode:"visible",children:r.children},o),A=Qs(A,o,s,null),A.flags|=2,r.return=a,A.return=a,r.sibling=A,a.child=r,Ws(a,t.child,null,s),r=a.child,r.memoizedState=mc(s),r.childLanes=hc(t,y,s),a.memoizedState=uc,a=Cr(null,r));else if(Ns(a),Xc(A)){if(y=A.nextSibling&&A.nextSibling.dataset,y)var W=y.dgst;y=W,r=Error(i(419)),r.stack="",r.digest=y,pr({value:r,source:null,stack:null}),a=pc(t,a,s)}else if(kt||_l(t,a,s,!1),y=(s&t.childLanes)!==0,kt||y){if(y=rt,y!==null&&(r=Kd(y,s),r!==0&&r!==z.retryLane))throw z.retryLane=r,Ys(t,r),ea(y,t,r),cc;Ic(A)||ai(),a=pc(t,a,s)}else Ic(A)?(a.flags|=192,a.child=t.child,a=null):(t=z.treeContext,ot=wa(A.nextSibling),Lt=a,$e=!0,fs=null,ja=!1,t!==null&&Vu(a,t),a=xc(a,r.children),a.flags|=4096);return a}return o?(ws(),A=r.fallback,o=a.mode,z=t.child,W=z.sibling,r=Ya(z,{mode:"hidden",children:r.children}),r.subtreeFlags=z.subtreeFlags&65011712,W!==null?A=Ya(W,A):(A=Qs(A,o,s,null),A.flags|=2),A.return=a,r.return=a,r.sibling=A,a.child=r,Cr(null,r),r=a.child,A=t.child.memoizedState,A===null?A=mc(s):(o=A.cachePool,o!==null?(z=Nt._currentValue,o=o.parent!==z?{parent:z,pool:z}:o):o=Wu(),A={baseLanes:A.baseLanes|s,cachePool:o}),r.memoizedState=A,r.childLanes=hc(t,y,s),a.memoizedState=uc,Cr(t.child,r)):(Ns(a),s=t.child,t=s.sibling,s=Ya(s,{mode:"visible",children:r.children}),s.return=a,s.sibling=null,t!==null&&(y=a.deletions,y===null?(a.deletions=[t],a.flags|=16):y.push(t)),a.child=s,a.memoizedState=null,s)}function xc(t,a){return a=Vn({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Vn(t,a){return t=la(22,t,null,a),t.lanes=0,t}function pc(t,a,s){return Ws(a,t.child,null,s),t=xc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function mh(t,a,s){t.lanes|=a;var r=t.alternate;r!==null&&(r.lanes|=a),To(t.return,a,s)}function fc(t,a,s,r,o,d){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:o,treeForkCount:d}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=r,y.tail=s,y.tailMode=o,y.treeForkCount=d)}function hh(t,a,s){var r=a.pendingProps,o=r.revealOrder,d=r.tail;r=r.children;var y=yt.current,A=(y&2)!==0;if(A?(y=y&1|2,a.flags|=128):y&=1,_(yt,y),qt(t,a,r,s),r=$e?xr:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mh(t,s,a);else if(t.tag===19)mh(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(s=a.child,o=null;s!==null;)t=s.alternate,t!==null&&On(t)===null&&(o=s),s=s.sibling;s=o,s===null?(o=a.child,a.child=null):(o=s.sibling,s.sibling=null),fc(a,!1,o,s,d,r);break;case"backwards":case"unstable_legacy-backwards":for(s=null,o=a.child,a.child=null;o!==null;){if(t=o.alternate,t!==null&&On(t)===null){a.child=o;break}t=o.sibling,o.sibling=s,s=o,o=t}fc(a,!0,s,null,d,r);break;case"together":fc(a,!1,null,null,void 0,r);break;default:a.memoizedState=null}return a.child}function Ka(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),_s|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(_l(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,s=Ya(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=Ya(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function gc(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Cn(t)))}function If(t,a,s){switch(a.tag){case 3:he(a,a.stateNode.containerInfo),bs(a,Nt,t.memoizedState.cache),Vs();break;case 27:case 5:Ee(a);break;case 4:he(a,a.stateNode.containerInfo);break;case 10:bs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Fo(a),null;break;case 13:var r=a.memoizedState;if(r!==null)return r.dehydrated!==null?(Ns(a),a.flags|=128,null):(s&a.child.childLanes)!==0?uh(t,a,s):(Ns(a),t=Ka(t,a,s),t!==null?t.sibling:null);Ns(a);break;case 19:var o=(t.flags&128)!==0;if(r=(s&a.childLanes)!==0,r||(_l(t,a,s,!1),r=(s&a.childLanes)!==0),o){if(r)return hh(t,a,s);a.flags|=128}if(o=a.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),_(yt,yt.current),r)break;return null;case 22:return a.lanes=0,rh(t,a,s,a.pendingProps);case 24:bs(a,Nt,t.memoizedState.cache)}return Ka(t,a,s)}function xh(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)kt=!0;else{if(!gc(t,s)&&(a.flags&128)===0)return kt=!1,If(t,a,s);kt=(t.flags&131072)!==0}else kt=!1,$e&&(a.flags&1048576)!==0&&Qu(a,xr,a.index);switch(a.lanes=0,a.tag){case 16:e:{var r=a.pendingProps;if(t=Ks(a.elementType),a.type=t,typeof t=="function")No(t)?(r=tl(t,r),a.tag=1,a=ch(null,a,t,r,s)):(a.tag=0,a=dc(null,a,t,r,s));else{if(t!=null){var o=t.$$typeof;if(o===O){a.tag=11,a=ah(null,a,t,r,s);break e}else if(o===q){a.tag=14,a=sh(null,a,t,r,s);break e}}throw a=ee(t)||t,Error(i(306,a,""))}}return a;case 0:return dc(t,a,a.type,a.pendingProps,s);case 1:return r=a.type,o=tl(r,a.pendingProps),ch(t,a,r,o,s);case 3:e:{if(he(a,a.stateNode.containerInfo),t===null)throw Error(i(387));r=a.pendingProps;var d=a.memoizedState;o=d.element,Uo(t,a),Nr(a,r,null,s);var y=a.memoizedState;if(r=y.cache,bs(a,Nt,r),r!==d.cache&&Do(a,[Nt],s,!0),jr(),r=y.element,d.isDehydrated)if(d={element:r,isDehydrated:!1,cache:y.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=dh(t,a,r,s);break e}else if(r!==o){o=ba(Error(i(424)),a),pr(o),a=dh(t,a,r,s);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,ot=wa(t.firstChild),Lt=a,$e=!0,fs=null,ja=!0,s=rm(a,null,r,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Vs(),r===o){a=Ka(t,a,s);break e}qt(t,a,r,s)}a=a.child}return a;case 26:return Qn(t,a),t===null?(s=Sx(a.type,null,a.pendingProps,null))?a.memoizedState=s:$e||(s=a.type,t=a.pendingProps,r=ci(le.current).createElement(s),r[Ot]=a,r[It]=t,Bt(r,s,t),At(r),a.stateNode=r):a.memoizedState=Sx(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ee(a),t===null&&$e&&(r=a.stateNode=Nx(a.type,a.pendingProps,le.current),Lt=a,ja=!0,o=ot,Ds(a.type)?(Zc=o,ot=wa(r.firstChild)):ot=o),qt(t,a,a.pendingProps.children,s),Qn(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&$e&&((o=r=ot)&&(r=kg(r,a.type,a.pendingProps,ja),r!==null?(a.stateNode=r,Lt=a,ot=wa(r.firstChild),ja=!1,o=!0):o=!1),o||gs(a)),Ee(a),o=a.type,d=a.pendingProps,y=t!==null?t.memoizedProps:null,r=d.children,Yc(o,d)?r=null:y!==null&&Yc(o,y)&&(a.flags|=32),a.memoizedState!==null&&(o=$o(t,a,Bf,null,null,s),Fr._currentValue=o),Qn(t,a),qt(t,a,r,s),a.child;case 6:return t===null&&$e&&((t=s=ot)&&(s=Sg(s,a.pendingProps,ja),s!==null?(a.stateNode=s,Lt=a,ot=null,t=!0):t=!1),t||gs(a)),null;case 13:return uh(t,a,s);case 4:return he(a,a.stateNode.containerInfo),r=a.pendingProps,t===null?a.child=Ws(a,null,r,s):qt(t,a,r,s),a.child;case 11:return ah(t,a,a.type,a.pendingProps,s);case 7:return qt(t,a,a.pendingProps,s),a.child;case 8:return qt(t,a,a.pendingProps.children,s),a.child;case 12:return qt(t,a,a.pendingProps.children,s),a.child;case 10:return r=a.pendingProps,bs(a,a.type,r.value),qt(t,a,r.children,s),a.child;case 9:return o=a.type._context,r=a.pendingProps.children,Xs(a),o=Ut(o),r=r(o),a.flags|=1,qt(t,a,r,s),a.child;case 14:return sh(t,a,a.type,a.pendingProps,s);case 15:return lh(t,a,a.type,a.pendingProps,s);case 19:return hh(t,a,s);case 31:return Vf(t,a,s);case 22:return rh(t,a,s,a.pendingProps);case 24:return Xs(a),r=Ut(Nt),t===null?(o=zo(),o===null&&(o=rt,d=Ro(),o.pooledCache=d,d.refCount++,d!==null&&(o.pooledCacheLanes|=s),o=d),a.memoizedState={parent:r,cache:o},Lo(a),bs(a,Nt,o)):((t.lanes&s)!==0&&(Uo(t,a),Nr(a,null,null,s),jr()),o=t.memoizedState,d=a.memoizedState,o.parent!==r?(o={parent:r,cache:r},a.memoizedState=o,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=o),bs(a,Nt,r)):(r=d.cache,bs(a,Nt,r),r!==o.cache&&Do(a,[Nt],s,!0))),qt(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ja(t){t.flags|=4}function bc(t,a,s,r,o){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(Gh())t.flags|=8192;else throw Js=Dn,Oo}else t.flags&=-16777217}function ph(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Tx(a))if(Gh())t.flags|=8192;else throw Js=Dn,Oo}function In(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Id():536870912,t.lanes|=a,ql|=a)}function Er(t,a){if(!$e)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(a)for(var o=t.child;o!==null;)s|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)s|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=s,a}function Xf(t,a,s){var r=a.pendingProps;switch(_o(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(a),null;case 1:return ct(a),null;case 3:return s=a.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Ia(Nt),ne(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Sl(a)?Ja(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Eo())),ct(a),null;case 26:var o=a.type,d=a.memoizedState;return t===null?(Ja(a),d!==null?(ct(a),ph(a,d)):(ct(a),bc(a,o,null,r,s))):d?d!==t.memoizedState?(Ja(a),ct(a),ph(a,d)):(ct(a),a.flags&=-16777217):(t=t.memoizedProps,t!==r&&Ja(a),ct(a),bc(a,o,t,r,s)),null;case 27:if(de(a),s=le.current,o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==r&&Ja(a);else{if(!r){if(a.stateNode===null)throw Error(i(166));return ct(a),null}t=H.current,Sl(a)?Iu(a):(t=Nx(o,r,s),a.stateNode=t,Ja(a))}return ct(a),null;case 5:if(de(a),o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==r&&Ja(a);else{if(!r){if(a.stateNode===null)throw Error(i(166));return ct(a),null}if(d=H.current,Sl(a))Iu(a);else{var y=ci(le.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof r.is=="string"?y.createElement("select",{is:r.is}):y.createElement("select"),r.multiple?d.multiple=!0:r.size&&(d.size=r.size);break;default:d=typeof r.is=="string"?y.createElement(o,{is:r.is}):y.createElement(o)}}d[Ot]=a,d[It]=r;e:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break e;for(;y.sibling===null;){if(y.return===null||y.return===a)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=d;e:switch(Bt(d,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ja(a)}}return ct(a),bc(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,s),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==r&&Ja(a);else{if(typeof r!="string"&&a.stateNode===null)throw Error(i(166));if(t=le.current,Sl(a)){if(t=a.stateNode,s=a.memoizedProps,r=null,o=Lt,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}t[Ot]=a,t=!!(t.nodeValue===s||r!==null&&r.suppressHydrationWarning===!0||ux(t.nodeValue,s)),t||gs(a,!0)}else t=ci(t).createTextNode(r),t[Ot]=a,a.stateNode=t}return ct(a),null;case 31:if(s=a.memoizedState,t===null||t.memoizedState!==null){if(r=Sl(a),s!==null){if(t===null){if(!r)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Ot]=a}else Vs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ct(a),t=!1}else s=Eo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return a.flags&256?(na(a),a):(na(a),null);if((a.flags&128)!==0)throw Error(i(558))}return ct(a),null;case 13:if(r=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=Sl(a),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(i(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[Ot]=a}else Vs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ct(a),o=!1}else o=Eo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return a.flags&256?(na(a),a):(na(a),null)}return na(a),(a.flags&128)!==0?(a.lanes=s,a):(s=r!==null,t=t!==null&&t.memoizedState!==null,s&&(r=a.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==o&&(r.flags|=2048)),s!==t&&s&&(a.child.flags|=8192),In(a,a.updateQueue),ct(a),null);case 4:return ne(),t===null&&Hc(a.stateNode.containerInfo),ct(a),null;case 10:return Ia(a.type),ct(a),null;case 19:if(L(yt),r=a.memoizedState,r===null)return ct(a),null;if(o=(a.flags&128)!==0,d=r.rendering,d===null)if(o)Er(r,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(d=On(t),d!==null){for(a.flags|=128,Er(r,!1),t=d.updateQueue,a.updateQueue=t,In(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)Pu(s,t),s=s.sibling;return _(yt,yt.current&1|2),$e&&Qa(a,r.treeForkCount),a.child}t=t.sibling}r.tail!==null&&Ke()>Wn&&(a.flags|=128,o=!0,Er(r,!1),a.lanes=4194304)}else{if(!o)if(t=On(d),t!==null){if(a.flags|=128,o=!0,t=t.updateQueue,a.updateQueue=t,In(a,t),Er(r,!0),r.tail===null&&r.tailMode==="hidden"&&!d.alternate&&!$e)return ct(a),null}else 2*Ke()-r.renderingStartTime>Wn&&s!==536870912&&(a.flags|=128,o=!0,Er(r,!1),a.lanes=4194304);r.isBackwards?(d.sibling=a.child,a.child=d):(t=r.last,t!==null?t.sibling=d:a.child=d,r.last=d)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ke(),t.sibling=null,s=yt.current,_(yt,o?s&1|2:s&1),$e&&Qa(a,r.treeForkCount),t):(ct(a),null);case 22:case 23:return na(a),Go(),r=a.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(a.flags|=8192):r&&(a.flags|=8192),r?(s&536870912)!==0&&(a.flags&128)===0&&(ct(a),a.subtreeFlags&6&&(a.flags|=8192)):ct(a),s=a.updateQueue,s!==null&&In(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==s&&(a.flags|=2048),t!==null&&L(Zs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Ia(Nt),ct(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Zf(t,a){switch(_o(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ia(Nt),ne(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return de(a),null;case 31:if(a.memoizedState!==null){if(na(a),a.alternate===null)throw Error(i(340));Vs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(na(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Vs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return L(yt),null;case 4:return ne(),null;case 10:return Ia(a.type),null;case 22:case 23:return na(a),Go(),t!==null&&L(Zs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ia(Nt),null;case 25:return null;default:return null}}function fh(t,a){switch(_o(a),a.tag){case 3:Ia(Nt),ne();break;case 26:case 27:case 5:de(a);break;case 4:ne();break;case 31:a.memoizedState!==null&&na(a);break;case 13:na(a);break;case 19:L(yt);break;case 10:Ia(a.type);break;case 22:case 23:na(a),Go(),t!==null&&L(Zs);break;case 24:Ia(Nt)}}function Ar(t,a){try{var s=a.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var o=r.next;s=o;do{if((s.tag&t)===t){r=void 0;var d=s.create,y=s.inst;r=d(),y.destroy=r}s=s.next}while(s!==o)}}catch(A){We(a,a.return,A)}}function ks(t,a,s){try{var r=a.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&t)===t){var y=r.inst,A=y.destroy;if(A!==void 0){y.destroy=void 0,o=a;var z=s,W=A;try{W()}catch(xe){We(o,z,xe)}}}r=r.next}while(r!==d)}}catch(xe){We(a,a.return,xe)}}function gh(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{im(a,s)}catch(r){We(t,t.return,r)}}}function bh(t,a,s){s.props=tl(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(r){We(t,a,r)}}function Tr(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof s=="function"?t.refCleanup=s(r):s.current=r}}catch(o){We(t,a,o)}}function Ua(t,a){var s=t.ref,r=t.refCleanup;if(s!==null)if(typeof r=="function")try{r()}catch(o){We(t,a,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(o){We(t,a,o)}else s.current=null}function yh(t){var a=t.type,s=t.memoizedProps,r=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break e;case"img":s.src?r.src=s.src:s.srcSet&&(r.srcset=s.srcSet)}}catch(o){We(t,t.return,o)}}function yc(t,a,s){try{var r=t.stateNode;bg(r,t.type,s,a),r[It]=a}catch(o){We(t,t.return,o)}}function vh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ds(t.type)||t.tag===4}function vc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ds(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jc(t,a,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Pa));else if(r!==4&&(r===27&&Ds(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(jc(t,a,s),t=t.sibling;t!==null;)jc(t,a,s),t=t.sibling}function Xn(t,a,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(r!==4&&(r===27&&Ds(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Xn(t,a,s),t=t.sibling;t!==null;)Xn(t,a,s),t=t.sibling}function jh(t){var a=t.stateNode,s=t.memoizedProps;try{for(var r=t.type,o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Bt(a,r,s),a[Ot]=t,a[It]=s}catch(d){We(t,t.return,d)}}var Wa=!1,St=!1,Nc=!1,Nh=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function Kf(t,a){if(t=t.containerInfo,Pc=fi,t=zu(t),po(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var o=r.anchorOffset,d=r.focusNode;r=r.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var y=0,A=-1,z=-1,W=0,xe=0,fe=t,te=null;t:for(;;){for(var oe;fe!==s||o!==0&&fe.nodeType!==3||(A=y+o),fe!==d||r!==0&&fe.nodeType!==3||(z=y+r),fe.nodeType===3&&(y+=fe.nodeValue.length),(oe=fe.firstChild)!==null;)te=fe,fe=oe;for(;;){if(fe===t)break t;if(te===s&&++W===o&&(A=y),te===d&&++xe===r&&(z=y),(oe=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=oe}s=A===-1||z===-1?null:{start:A,end:z}}else s=null}s=s||{start:0,end:0}}else s=null;for($c={focusedElem:t,selectionRange:s},fi=!1,Tt=a;Tt!==null;)if(a=Tt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Tt=t;else for(;Tt!==null;){switch(a=Tt,d=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)o=t[s],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,s=a,o=d.memoizedProps,d=d.memoizedState,r=s.stateNode;try{var Se=tl(s.type,o);t=r.getSnapshotBeforeUpdate(Se,d),r.__reactInternalSnapshotBeforeUpdate=t}catch(Te){We(s,s.return,Te)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Vc(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,Tt=t;break}Tt=a.return}}function wh(t,a,s){var r=s.flags;switch(s.tag){case 0:case 11:case 15:ts(t,s),r&4&&Ar(5,s);break;case 1:if(ts(t,s),r&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(y){We(s,s.return,y)}else{var o=tl(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(o,a,t.__reactInternalSnapshotBeforeUpdate)}catch(y){We(s,s.return,y)}}r&64&&gh(s),r&512&&Tr(s,s.return);break;case 3:if(ts(t,s),r&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{im(t,a)}catch(y){We(s,s.return,y)}}break;case 27:a===null&&r&4&&jh(s);case 26:case 5:ts(t,s),a===null&&r&4&&yh(s),r&512&&Tr(s,s.return);break;case 12:ts(t,s);break;case 31:ts(t,s),r&4&&_h(t,s);break;case 13:ts(t,s),r&4&&Ch(t,s),r&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=ng.bind(null,s),_g(t,s))));break;case 22:if(r=s.memoizedState!==null||Wa,!r){a=a!==null&&a.memoizedState!==null||St,o=Wa;var d=St;Wa=r,(St=a)&&!d?as(t,s,(s.subtreeFlags&8772)!==0):ts(t,s),Wa=o,St=d}break;case 30:break;default:ts(t,s)}}function kh(t){var a=t.alternate;a!==null&&(t.alternate=null,kh(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ki(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,Zt=!1;function es(t,a,s){for(s=s.child;s!==null;)Sh(t,a,s),s=s.sibling}function Sh(t,a,s){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(me,s)}catch{}switch(s.tag){case 26:St||Ua(s,a),es(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:St||Ua(s,a);var r=dt,o=Zt;Ds(s.type)&&(dt=s.stateNode,Zt=!1),es(t,a,s),Br(s.stateNode),dt=r,Zt=o;break;case 5:St||Ua(s,a);case 6:if(r=dt,o=Zt,dt=null,es(t,a,s),dt=r,Zt=o,dt!==null)if(Zt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(s.stateNode)}catch(d){We(s,a,d)}else try{dt.removeChild(s.stateNode)}catch(d){We(s,a,d)}break;case 18:dt!==null&&(Zt?(t=dt,gx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Ql(t)):gx(dt,s.stateNode));break;case 4:r=dt,o=Zt,dt=s.stateNode.containerInfo,Zt=!0,es(t,a,s),dt=r,Zt=o;break;case 0:case 11:case 14:case 15:ks(2,s,a),St||ks(4,s,a),es(t,a,s);break;case 1:St||(Ua(s,a),r=s.stateNode,typeof r.componentWillUnmount=="function"&&bh(s,a,r)),es(t,a,s);break;case 21:es(t,a,s);break;case 22:St=(r=St)||s.memoizedState!==null,es(t,a,s),St=r;break;default:es(t,a,s)}}function _h(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ql(t)}catch(s){We(a,a.return,s)}}}function Ch(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ql(t)}catch(s){We(a,a.return,s)}}function Jf(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Nh),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Nh),a;default:throw Error(i(435,t.tag))}}function Zn(t,a){var s=Jf(t);a.forEach(function(r){if(!s.has(r)){s.add(r);var o=ig.bind(null,t,r);r.then(o,o)}})}function Kt(t,a){var s=a.deletions;if(s!==null)for(var r=0;r<s.length;r++){var o=s[r],d=t,y=a,A=y;e:for(;A!==null;){switch(A.tag){case 27:if(Ds(A.type)){dt=A.stateNode,Zt=!1;break e}break;case 5:dt=A.stateNode,Zt=!1;break e;case 3:case 4:dt=A.stateNode.containerInfo,Zt=!0;break e}A=A.return}if(dt===null)throw Error(i(160));Sh(d,y,o),dt=null,Zt=!1,d=o.alternate,d!==null&&(d.return=null),o.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Eh(a,t),a=a.sibling}var Da=null;function Eh(t,a){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kt(a,t),Jt(t),r&4&&(ks(3,t,t.return),Ar(3,t),ks(5,t,t.return));break;case 1:Kt(a,t),Jt(t),r&512&&(St||s===null||Ua(s,s.return)),r&64&&Wa&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?r:s.concat(r))));break;case 26:var o=Da;if(Kt(a,t),Jt(t),r&512&&(St||s===null||Ua(s,s.return)),r&4){var d=s!==null?s.memoizedState:null;if(r=t.memoizedState,s===null)if(r===null)if(t.stateNode===null){e:{r=t.type,s=t.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":d=o.getElementsByTagName("title")[0],(!d||d[sr]||d[Ot]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=o.createElement(r),o.head.insertBefore(d,o.querySelector("head > title"))),Bt(d,r,s),d[Ot]=t,At(d),r=d;break e;case"link":var y=Ex("link","href",o).get(r+(s.href||""));if(y){for(var A=0;A<y.length;A++)if(d=y[A],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(A,1);break t}}d=o.createElement(r),Bt(d,r,s),o.head.appendChild(d);break;case"meta":if(y=Ex("meta","content",o).get(r+(s.content||""))){for(A=0;A<y.length;A++)if(d=y[A],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(A,1);break t}}d=o.createElement(r),Bt(d,r,s),o.head.appendChild(d);break;default:throw Error(i(468,r))}d[Ot]=t,At(d),r=d}t.stateNode=r}else Ax(o,t.type,t.stateNode);else t.stateNode=Cx(o,r,t.memoizedProps);else d!==r?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,r===null?Ax(o,t.type,t.stateNode):Cx(o,r,t.memoizedProps)):r===null&&t.stateNode!==null&&yc(t,t.memoizedProps,s.memoizedProps)}break;case 27:Kt(a,t),Jt(t),r&512&&(St||s===null||Ua(s,s.return)),s!==null&&r&4&&yc(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Kt(a,t),Jt(t),r&512&&(St||s===null||Ua(s,s.return)),t.flags&32){o=t.stateNode;try{pl(o,"")}catch(Se){We(t,t.return,Se)}}r&4&&t.stateNode!=null&&(o=t.memoizedProps,yc(t,o,s!==null?s.memoizedProps:o)),r&1024&&(Nc=!0);break;case 6:if(Kt(a,t),Jt(t),r&4){if(t.stateNode===null)throw Error(i(162));r=t.memoizedProps,s=t.stateNode;try{s.nodeValue=r}catch(Se){We(t,t.return,Se)}}break;case 3:if(mi=null,o=Da,Da=di(a.containerInfo),Kt(a,t),Da=o,Jt(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Ql(a.containerInfo)}catch(Se){We(t,t.return,Se)}Nc&&(Nc=!1,Ah(t));break;case 4:r=Da,Da=di(t.stateNode.containerInfo),Kt(a,t),Jt(t),Da=r;break;case 12:Kt(a,t),Jt(t);break;case 31:Kt(a,t),Jt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Zn(t,r)));break;case 13:Kt(a,t),Jt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Jn=Ke()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Zn(t,r)));break;case 22:o=t.memoizedState!==null;var z=s!==null&&s.memoizedState!==null,W=Wa,xe=St;if(Wa=W||o,St=xe||z,Kt(a,t),St=xe,Wa=W,Jt(t),r&8192)e:for(a=t.stateNode,a._visibility=o?a._visibility&-2:a._visibility|1,o&&(s===null||z||Wa||St||al(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){z=s=a;try{if(d=z.stateNode,o)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{A=z.stateNode;var fe=z.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Se){We(z,z.return,Se)}}}else if(a.tag===6){if(s===null){z=a;try{z.stateNode.nodeValue=o?"":z.memoizedProps}catch(Se){We(z,z.return,Se)}}}else if(a.tag===18){if(s===null){z=a;try{var oe=z.stateNode;o?bx(oe,!0):bx(z.stateNode,!1)}catch(Se){We(z,z.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}r&4&&(r=t.updateQueue,r!==null&&(s=r.retryQueue,s!==null&&(r.retryQueue=null,Zn(t,s))));break;case 19:Kt(a,t),Jt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Zn(t,r)));break;case 30:break;case 21:break;default:Kt(a,t),Jt(t)}}function Jt(t){var a=t.flags;if(a&2){try{for(var s,r=t.return;r!==null;){if(vh(r)){s=r;break}r=r.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var o=s.stateNode,d=vc(t);Xn(t,d,o);break;case 5:var y=s.stateNode;s.flags&32&&(pl(y,""),s.flags&=-33);var A=vc(t);Xn(t,A,y);break;case 3:case 4:var z=s.stateNode.containerInfo,W=vc(t);jc(t,W,z);break;default:throw Error(i(161))}}catch(xe){We(t,t.return,xe)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Ah(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Ah(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ts(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)wh(t,a.alternate,a),a=a.sibling}function al(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:ks(4,a,a.return),al(a);break;case 1:Ua(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&bh(a,a.return,s),al(a);break;case 27:Br(a.stateNode);case 26:case 5:Ua(a,a.return),al(a);break;case 22:a.memoizedState===null&&al(a);break;case 30:al(a);break;default:al(a)}t=t.sibling}}function as(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var r=a.alternate,o=t,d=a,y=d.flags;switch(d.tag){case 0:case 11:case 15:as(o,d,s),Ar(4,d);break;case 1:if(as(o,d,s),r=d,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(W){We(r,r.return,W)}if(r=d,o=r.updateQueue,o!==null){var A=r.stateNode;try{var z=o.shared.hiddenCallbacks;if(z!==null)for(o.shared.hiddenCallbacks=null,o=0;o<z.length;o++)nm(z[o],A)}catch(W){We(r,r.return,W)}}s&&y&64&&gh(d),Tr(d,d.return);break;case 27:jh(d);case 26:case 5:as(o,d,s),s&&r===null&&y&4&&yh(d),Tr(d,d.return);break;case 12:as(o,d,s);break;case 31:as(o,d,s),s&&y&4&&_h(o,d);break;case 13:as(o,d,s),s&&y&4&&Ch(o,d);break;case 22:d.memoizedState===null&&as(o,d,s),Tr(d,d.return);break;case 30:break;default:as(o,d,s)}a=a.sibling}}function wc(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&fr(s))}function kc(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&fr(t))}function Ra(t,a,s,r){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Th(t,a,s,r),a=a.sibling}function Th(t,a,s,r){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ra(t,a,s,r),o&2048&&Ar(9,a);break;case 1:Ra(t,a,s,r);break;case 3:Ra(t,a,s,r),o&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&fr(t)));break;case 12:if(o&2048){Ra(t,a,s,r),t=a.stateNode;try{var d=a.memoizedProps,y=d.id,A=d.onPostCommit;typeof A=="function"&&A(y,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){We(a,a.return,z)}}else Ra(t,a,s,r);break;case 31:Ra(t,a,s,r);break;case 13:Ra(t,a,s,r);break;case 23:break;case 22:d=a.stateNode,y=a.alternate,a.memoizedState!==null?d._visibility&2?Ra(t,a,s,r):Dr(t,a):d._visibility&2?Ra(t,a,s,r):(d._visibility|=2,Ol(t,a,s,r,(a.subtreeFlags&10256)!==0||!1)),o&2048&&wc(y,a);break;case 24:Ra(t,a,s,r),o&2048&&kc(a.alternate,a);break;default:Ra(t,a,s,r)}}function Ol(t,a,s,r,o){for(o=o&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var d=t,y=a,A=s,z=r,W=y.flags;switch(y.tag){case 0:case 11:case 15:Ol(d,y,A,z,o),Ar(8,y);break;case 23:break;case 22:var xe=y.stateNode;y.memoizedState!==null?xe._visibility&2?Ol(d,y,A,z,o):Dr(d,y):(xe._visibility|=2,Ol(d,y,A,z,o)),o&&W&2048&&wc(y.alternate,y);break;case 24:Ol(d,y,A,z,o),o&&W&2048&&kc(y.alternate,y);break;default:Ol(d,y,A,z,o)}a=a.sibling}}function Dr(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,r=a,o=r.flags;switch(r.tag){case 22:Dr(s,r),o&2048&&wc(r.alternate,r);break;case 24:Dr(s,r),o&2048&&kc(r.alternate,r);break;default:Dr(s,r)}a=a.sibling}}var Rr=8192;function Ll(t,a,s){if(t.subtreeFlags&Rr)for(t=t.child;t!==null;)Dh(t,a,s),t=t.sibling}function Dh(t,a,s){switch(t.tag){case 26:Ll(t,a,s),t.flags&Rr&&t.memoizedState!==null&&qg(s,Da,t.memoizedState,t.memoizedProps);break;case 5:Ll(t,a,s);break;case 3:case 4:var r=Da;Da=di(t.stateNode.containerInfo),Ll(t,a,s),Da=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Rr,Rr=16777216,Ll(t,a,s),Rr=r):Ll(t,a,s));break;default:Ll(t,a,s)}}function Rh(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Mr(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var r=a[s];Tt=r,zh(r,t)}Rh(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mh(t),t=t.sibling}function Mh(t){switch(t.tag){case 0:case 11:case 15:Mr(t),t.flags&2048&&ks(9,t,t.return);break;case 3:Mr(t);break;case 12:Mr(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Kn(t)):Mr(t);break;default:Mr(t)}}function Kn(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var r=a[s];Tt=r,zh(r,t)}Rh(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:ks(8,a,a.return),Kn(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Kn(a));break;default:Kn(a)}t=t.sibling}}function zh(t,a){for(;Tt!==null;){var s=Tt;switch(s.tag){case 0:case 11:case 15:ks(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var r=s.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:fr(s.memoizedState.cache)}if(r=s.child,r!==null)r.return=s,Tt=r;else e:for(s=t;Tt!==null;){r=Tt;var o=r.sibling,d=r.return;if(kh(r),r===s){Tt=null;break e}if(o!==null){o.return=d,Tt=o;break e}Tt=d}}}var Wf={getCacheForType:function(t){var a=Ut(Nt),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s},cacheSignal:function(){return Ut(Nt).controller.signal}},eg=typeof WeakMap=="function"?WeakMap:Map,Ie=0,rt=null,Be=null,Ge=0,Je=0,ia=null,Ss=!1,Ul=!1,Sc=!1,ss=0,ft=0,_s=0,sl=0,_c=0,oa=0,ql=0,zr=null,Wt=null,Cc=!1,Jn=0,Oh=0,Wn=1/0,ei=null,Cs=null,Et=0,Es=null,Bl=null,ls=0,Ec=0,Ac=null,Lh=null,Or=0,Tc=null;function ca(){return(Ie&2)!==0&&Ge!==0?Ge&-Ge:U.T!==null?Lc():Jd()}function Uh(){if(oa===0)if((Ge&536870912)===0||$e){var t=Re;Re<<=1,(Re&3932160)===0&&(Re=262144),oa=t}else oa=536870912;return t=ra.current,t!==null&&(t.flags|=32),oa}function ea(t,a,s){(t===rt&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(Hl(t,0),As(t,Ge,oa,!1)),ar(t,s),((Ie&2)===0||t!==rt)&&(t===rt&&((Ie&2)===0&&(sl|=s),ft===4&&As(t,Ge,oa,!1)),qa(t))}function qh(t,a,s){if((Ie&6)!==0)throw Error(i(327));var r=!s&&(a&127)===0&&(a&t.expiredLanes)===0||ms(t,a),o=r?sg(t,a):Rc(t,a,!0),d=r;do{if(o===0){Ul&&!r&&As(t,a,0,!1);break}else{if(s=t.current.alternate,d&&!tg(s)){o=Rc(t,a,!1),d=!1;continue}if(o===2){if(d=a,t.errorRecoveryDisabledLanes&d)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){a=y;e:{var A=t;o=zr;var z=A.current.memoizedState.isDehydrated;if(z&&(Hl(A,y).flags|=256),y=Rc(A,y,!1),y!==2){if(Sc&&!z){A.errorRecoveryDisabledLanes|=d,sl|=d,o=4;break e}d=Wt,Wt=o,d!==null&&(Wt===null?Wt=d:Wt.push.apply(Wt,d))}o=y}if(d=!1,o!==2)continue}}if(o===1){Hl(t,0),As(t,a,0,!0);break}e:{switch(r=t,d=o,d){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:As(r,a,oa,!Ss);break e;case 2:Wt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(o=Jn+300-Ke(),10<o)){if(As(r,a,oa,!Ss),Ft(r,0,!0)!==0)break e;ls=a,r.timeoutHandle=px(Bh.bind(null,r,s,Wt,ei,Cc,a,oa,sl,ql,Ss,d,"Throttled",-0,0),o);break e}Bh(r,s,Wt,ei,Cc,a,oa,sl,ql,Ss,d,null,-0,0)}}break}while(!0);qa(t)}function Bh(t,a,s,r,o,d,y,A,z,W,xe,fe,te,oe){if(t.timeoutHandle=-1,fe=a.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pa},Dh(a,d,fe);var Se=(d&62914560)===d?Jn-Ke():(d&4194048)===d?Oh-Ke():0;if(Se=Bg(fe,Se),Se!==null){ls=d,t.cancelPendingCommit=Se(Vh.bind(null,t,a,d,s,r,o,y,A,z,xe,fe,null,te,oe)),As(t,d,y,!W);return}}Vh(t,a,d,s,r,o,y,A,z)}function tg(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var r=0;r<s.length;r++){var o=s[r],d=o.getSnapshot;o=o.value;try{if(!sa(d(),o))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function As(t,a,s,r){a&=~_c,a&=~sl,t.suspendedLanes|=a,t.pingedLanes&=~a,r&&(t.warmLanes|=a),r=t.expirationTimes;for(var o=a;0<o;){var d=31-ze(o),y=1<<d;r[d]=-1,o&=~y}s!==0&&Xd(t,s,a)}function ti(){return(Ie&6)===0?(Lr(0),!1):!0}function Dc(){if(Be!==null){if(Je===0)var t=Be.return;else t=Be,Va=Is=null,Vo(t),Tl=null,br=0,t=Be;for(;t!==null;)fh(t.alternate,t),t=t.return;Be=null}}function Hl(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,jg(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),ls=0,Dc(),rt=t,Be=s=Ya(t.current,null),Ge=a,Je=0,ia=null,Ss=!1,Ul=ms(t,a),Sc=!1,ql=oa=_c=sl=_s=ft=0,Wt=zr=null,Cc=!1,(a&8)!==0&&(a|=a&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=a;0<r;){var o=31-ze(r),d=1<<o;a|=t[o],r&=~d}return ss=a,Nn(),s}function Hh(t,a){Oe=null,U.H=_r,a===Al||a===Tn?(a=am(),Je=3):a===Oo?(a=am(),Je=4):Je=a===cc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ia=a,Be===null&&(ft=1,$n(t,ba(a,t.current)))}function Gh(){var t=ra.current;return t===null?!0:(Ge&4194048)===Ge?Na===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?t===Na:!1}function Fh(){var t=U.H;return U.H=_r,t===null?_r:t}function Ph(){var t=U.A;return U.A=Wf,t}function ai(){ft=4,Ss||(Ge&4194048)!==Ge&&ra.current!==null||(Ul=!0),(_s&134217727)===0&&(sl&134217727)===0||rt===null||As(rt,Ge,oa,!1)}function Rc(t,a,s){var r=Ie;Ie|=2;var o=Fh(),d=Ph();(rt!==t||Ge!==a)&&(ei=null,Hl(t,a)),a=!1;var y=ft;e:do try{if(Je!==0&&Be!==null){var A=Be,z=ia;switch(Je){case 8:Dc(),y=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(a=!0);var W=Je;if(Je=0,ia=null,Gl(t,A,z,W),s&&Ul){y=0;break e}break;default:W=Je,Je=0,ia=null,Gl(t,A,z,W)}}ag(),y=ft;break}catch(xe){Hh(t,xe)}while(!0);return a&&t.shellSuspendCounter++,Va=Is=null,Ie=r,U.H=o,U.A=d,Be===null&&(rt=null,Ge=0,Nn()),y}function ag(){for(;Be!==null;)$h(Be)}function sg(t,a){var s=Ie;Ie|=2;var r=Fh(),o=Ph();rt!==t||Ge!==a?(ei=null,Wn=Ke()+500,Hl(t,a)):Ul=ms(t,a);e:do try{if(Je!==0&&Be!==null){a=Be;var d=ia;t:switch(Je){case 1:Je=0,ia=null,Gl(t,a,d,1);break;case 2:case 9:if(em(d)){Je=0,ia=null,Yh(a);break}a=function(){Je!==2&&Je!==9||rt!==t||(Je=7),qa(t)},d.then(a,a);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:em(d)?(Je=0,ia=null,Yh(a)):(Je=0,ia=null,Gl(t,a,d,7));break;case 5:var y=null;switch(Be.tag){case 26:y=Be.memoizedState;case 5:case 27:var A=Be;if(y?Tx(y):A.stateNode.complete){Je=0,ia=null;var z=A.sibling;if(z!==null)Be=z;else{var W=A.return;W!==null?(Be=W,si(W)):Be=null}break t}}Je=0,ia=null,Gl(t,a,d,5);break;case 6:Je=0,ia=null,Gl(t,a,d,6);break;case 8:Dc(),ft=6;break e;default:throw Error(i(462))}}lg();break}catch(xe){Hh(t,xe)}while(!0);return Va=Is=null,U.H=r,U.A=o,Ie=s,Be!==null?0:(rt=null,Ge=0,Nn(),ft)}function lg(){for(;Be!==null&&!st();)$h(Be)}function $h(t){var a=xh(t.alternate,t,ss);t.memoizedProps=t.pendingProps,a===null?si(t):Be=a}function Yh(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=oh(s,a,a.pendingProps,a.type,void 0,Ge);break;case 11:a=oh(s,a,a.pendingProps,a.type.render,a.ref,Ge);break;case 5:Vo(a);default:fh(s,a),a=Be=Pu(a,ss),a=xh(s,a,ss)}t.memoizedProps=t.pendingProps,a===null?si(t):Be=a}function Gl(t,a,s,r){Va=Is=null,Vo(a),Tl=null,br=0;var o=a.return;try{if(Qf(t,o,a,s,Ge)){ft=1,$n(t,ba(s,t.current)),Be=null;return}}catch(d){if(o!==null)throw Be=o,d;ft=1,$n(t,ba(s,t.current)),Be=null;return}a.flags&32768?($e||r===1?t=!0:Ul||(Ge&536870912)!==0?t=!1:(Ss=t=!0,(r===2||r===9||r===3||r===6)&&(r=ra.current,r!==null&&r.tag===13&&(r.flags|=16384))),Qh(a,t)):si(a)}function si(t){var a=t;do{if((a.flags&32768)!==0){Qh(a,Ss);return}t=a.return;var s=Xf(a.alternate,a,ss);if(s!==null){Be=s;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=t}while(a!==null);ft===0&&(ft=5)}function Qh(t,a){do{var s=Zf(t.alternate,t);if(s!==null){s.flags&=32767,Be=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Be=t;return}Be=t=s}while(t!==null);ft=6,Be=null}function Vh(t,a,s,r,o,d,y,A,z){t.cancelPendingCommit=null;do li();while(Et!==0);if((Ie&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(d=a.lanes|a.childLanes,d|=vo,Lp(t,s,d,y,A,z),t===rt&&(Be=rt=null,Ge=0),Bl=a,Es=t,ls=s,Ec=d,Ac=o,Lh=r,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,og(lt,function(){return Jh(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||r){r=U.T,U.T=null,o=se.p,se.p=2,y=Ie,Ie|=4;try{Kf(t,a,s)}finally{Ie=y,se.p=o,U.T=r}}Et=1,Ih(),Xh(),Zh()}}function Ih(){if(Et===1){Et=0;var t=Es,a=Bl,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=U.T,U.T=null;var r=se.p;se.p=2;var o=Ie;Ie|=4;try{Eh(a,t);var d=$c,y=zu(t.containerInfo),A=d.focusedElem,z=d.selectionRange;if(y!==A&&A&&A.ownerDocument&&Mu(A.ownerDocument.documentElement,A)){if(z!==null&&po(A)){var W=z.start,xe=z.end;if(xe===void 0&&(xe=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(xe,A.value.length);else{var fe=A.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var oe=te.getSelection(),Se=A.textContent.length,Te=Math.min(z.start,Se),at=z.end===void 0?Te:Math.min(z.end,Se);!oe.extend&&Te>at&&(y=at,at=Te,Te=y);var Q=Ru(A,Te),B=Ru(A,at);if(Q&&B&&(oe.rangeCount!==1||oe.anchorNode!==Q.node||oe.anchorOffset!==Q.offset||oe.focusNode!==B.node||oe.focusOffset!==B.offset)){var J=fe.createRange();J.setStart(Q.node,Q.offset),oe.removeAllRanges(),Te>at?(oe.addRange(J),oe.extend(B.node,B.offset)):(J.setEnd(B.node,B.offset),oe.addRange(J))}}}}for(fe=[],oe=A;oe=oe.parentNode;)oe.nodeType===1&&fe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<fe.length;A++){var pe=fe[A];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}fi=!!Pc,$c=Pc=null}finally{Ie=o,se.p=r,U.T=s}}t.current=a,Et=2}}function Xh(){if(Et===2){Et=0;var t=Es,a=Bl,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=U.T,U.T=null;var r=se.p;se.p=2;var o=Ie;Ie|=4;try{wh(t,a.alternate,a)}finally{Ie=o,se.p=r,U.T=s}}Et=3}}function Zh(){if(Et===4||Et===3){Et=0,jt();var t=Es,a=Bl,s=ls,r=Lh;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Et=5:(Et=0,Bl=Es=null,Kh(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(Cs=null),Xi(s),a=a.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(me,a,void 0,(a.current.flags&128)===128)}catch{}if(r!==null){a=U.T,o=se.p,se.p=2,U.T=null;try{for(var d=t.onRecoverableError,y=0;y<r.length;y++){var A=r[y];d(A.value,{componentStack:A.stack})}}finally{U.T=a,se.p=o}}(ls&3)!==0&&li(),qa(t),o=t.pendingLanes,(s&261930)!==0&&(o&42)!==0?t===Tc?Or++:(Or=0,Tc=t):Or=0,Lr(0)}}function Kh(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,fr(a)))}function li(){return Ih(),Xh(),Zh(),Jh()}function Jh(){if(Et!==5)return!1;var t=Es,a=Ec;Ec=0;var s=Xi(ls),r=U.T,o=se.p;try{se.p=32>s?32:s,U.T=null,s=Ac,Ac=null;var d=Es,y=ls;if(Et=0,Bl=Es=null,ls=0,(Ie&6)!==0)throw Error(i(331));var A=Ie;if(Ie|=4,Mh(d.current),Th(d,d.current,y,s),Ie=A,Lr(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(me,d)}catch{}return!0}finally{se.p=o,U.T=r,Kh(t,a)}}function Wh(t,a,s){a=ba(s,a),a=oc(t.stateNode,a,2),t=js(t,a,2),t!==null&&(ar(t,2),qa(t))}function We(t,a,s){if(t.tag===3)Wh(t,t,s);else for(;a!==null;){if(a.tag===3){Wh(a,t,s);break}else if(a.tag===1){var r=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cs===null||!Cs.has(r))){t=ba(s,t),s=eh(2),r=js(a,s,2),r!==null&&(th(s,r,a,t),ar(r,2),qa(r));break}}a=a.return}}function Mc(t,a,s){var r=t.pingCache;if(r===null){r=t.pingCache=new eg;var o=new Set;r.set(a,o)}else o=r.get(a),o===void 0&&(o=new Set,r.set(a,o));o.has(s)||(Sc=!0,o.add(s),t=rg.bind(null,t,a,s),a.then(t,t))}function rg(t,a,s){var r=t.pingCache;r!==null&&r.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,rt===t&&(Ge&s)===s&&(ft===4||ft===3&&(Ge&62914560)===Ge&&300>Ke()-Jn?(Ie&2)===0&&Hl(t,0):_c|=s,ql===Ge&&(ql=0)),qa(t)}function ex(t,a){a===0&&(a=Id()),t=Ys(t,a),t!==null&&(ar(t,a),qa(t))}function ng(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),ex(t,s)}function ig(t,a){var s=0;switch(t.tag){case 31:case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(s=o.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(a),ex(t,s)}function og(t,a){return za(t,a)}var ri=null,Fl=null,zc=!1,ni=!1,Oc=!1,Ts=0;function qa(t){t!==Fl&&t.next===null&&(Fl===null?ri=Fl=t:Fl=Fl.next=t),ni=!0,zc||(zc=!0,dg())}function Lr(t,a){if(!Oc&&ni){Oc=!0;do for(var s=!1,r=ri;r!==null;){if(t!==0){var o=r.pendingLanes;if(o===0)var d=0;else{var y=r.suspendedLanes,A=r.pingedLanes;d=(1<<31-ze(42|t)+1)-1,d&=o&~(y&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,lx(r,d))}else d=Ge,d=Ft(r,r===rt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(d&3)===0||ms(r,d)||(s=!0,lx(r,d));r=r.next}while(s);Oc=!1}}function cg(){tx()}function tx(){ni=zc=!1;var t=0;Ts!==0&&vg()&&(t=Ts);for(var a=Ke(),s=null,r=ri;r!==null;){var o=r.next,d=ax(r,a);d===0?(r.next=null,s===null?ri=o:s.next=o,o===null&&(Fl=s)):(s=r,(t!==0||(d&3)!==0)&&(ni=!0)),r=o}Et!==0&&Et!==5||Lr(t),Ts!==0&&(Ts=0)}function ax(t,a){for(var s=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var y=31-ze(d),A=1<<y,z=o[y];z===-1?((A&s)===0||(A&r)!==0)&&(o[y]=Op(A,a)):z<=a&&(t.expiredLanes|=A),d&=~A}if(a=rt,s=Ge,s=Ft(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,s===0||t===a&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Ea(r),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ms(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(r!==null&&Ea(r),Xi(s)){case 2:case 8:s=Bs;break;case 32:s=lt;break;case 268435456:s=xt;break;default:s=lt}return r=sx.bind(null,t),s=za(s,r),t.callbackPriority=a,t.callbackNode=s,a}return r!==null&&r!==null&&Ea(r),t.callbackPriority=2,t.callbackNode=null,2}function sx(t,a){if(Et!==0&&Et!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(li()&&t.callbackNode!==s)return null;var r=Ge;return r=Ft(t,t===rt?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(qh(t,r,a),ax(t,Ke()),t.callbackNode!=null&&t.callbackNode===s?sx.bind(null,t):null)}function lx(t,a){if(li())return null;qh(t,a,!0)}function dg(){Ng(function(){(Ie&6)!==0?za(Vt,cg):tx()})}function Lc(){if(Ts===0){var t=Cl;t===0&&(t=Hs,Hs<<=1,(Hs&261888)===0&&(Hs=256)),Ts=t}return Ts}function rx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xn(""+t)}function nx(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function ug(t,a,s,r,o){if(a==="submit"&&s&&s.stateNode===o){var d=rx((o[It]||null).action),y=r.submitter;y&&(a=(a=y[It]||null)?rx(a.formAction):y.getAttribute("formAction"),a!==null&&(d=a,y=null));var A=new bn("action","action",null,r,o);t.push({event:A,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ts!==0){var z=y?nx(o,y):new FormData(o);ac(s,{pending:!0,data:z,method:o.method,action:d},null,z)}}else typeof d=="function"&&(A.preventDefault(),z=y?nx(o,y):new FormData(o),ac(s,{pending:!0,data:z,method:o.method,action:d},d,z))},currentTarget:o}]})}}for(var Uc=0;Uc<yo.length;Uc++){var qc=yo[Uc],mg=qc.toLowerCase(),hg=qc[0].toUpperCase()+qc.slice(1);Ta(mg,"on"+hg)}Ta(Uu,"onAnimationEnd"),Ta(qu,"onAnimationIteration"),Ta(Bu,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Af,"onTransitionRun"),Ta(Tf,"onTransitionStart"),Ta(Df,"onTransitionCancel"),Ta(Hu,"onTransitionEnd"),hl("onMouseEnter",["mouseout","mouseover"]),hl("onMouseLeave",["mouseout","mouseover"]),hl("onPointerEnter",["pointerout","pointerover"]),hl("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ur));function ix(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],o=r.event;r=r.listeners;e:{var d=void 0;if(a)for(var y=r.length-1;0<=y;y--){var A=r[y],z=A.instance,W=A.currentTarget;if(A=A.listener,z!==d&&o.isPropagationStopped())break e;d=A,o.currentTarget=W;try{d(o)}catch(xe){jn(xe)}o.currentTarget=null,d=z}else for(y=0;y<r.length;y++){if(A=r[y],z=A.instance,W=A.currentTarget,A=A.listener,z!==d&&o.isPropagationStopped())break e;d=A,o.currentTarget=W;try{d(o)}catch(xe){jn(xe)}o.currentTarget=null,d=z}}}}function He(t,a){var s=a[Zi];s===void 0&&(s=a[Zi]=new Set);var r=t+"__bubble";s.has(r)||(ox(a,t,2,!1),s.add(r))}function Bc(t,a,s){var r=0;a&&(r|=4),ox(s,t,r,a)}var ii="_reactListening"+Math.random().toString(36).slice(2);function Hc(t){if(!t[ii]){t[ii]=!0,tu.forEach(function(s){s!=="selectionchange"&&(xg.has(s)||Bc(s,!1,t),Bc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[ii]||(a[ii]=!0,Bc("selectionchange",!1,a))}}function ox(t,a,s,r){switch(Ux(a)){case 2:var o=Fg;break;case 8:o=Pg;break;default:o=td}s=o.bind(null,a,s,t),o=void 0,!ro||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(a,s,{capture:!0,passive:o}):t.addEventListener(a,s,!0):o!==void 0?t.addEventListener(a,s,{passive:o}):t.addEventListener(a,s,!1)}function Gc(t,a,s,r,o){var d=r;if((a&1)===0&&(a&2)===0&&r!==null)e:for(;;){if(r===null)return;var y=r.tag;if(y===3||y===4){var A=r.stateNode.containerInfo;if(A===o)break;if(y===4)for(y=r.return;y!==null;){var z=y.tag;if((z===3||z===4)&&y.stateNode.containerInfo===o)return;y=y.return}for(;A!==null;){if(y=dl(A),y===null)return;if(z=y.tag,z===5||z===6||z===26||z===27){r=d=y;continue e}A=A.parentNode}}r=r.return}hu(function(){var W=d,xe=so(s),fe=[];e:{var te=Gu.get(t);if(te!==void 0){var oe=bn,Se=t;switch(t){case"keypress":if(fn(s)===0)break e;case"keydown":case"keyup":oe=nf;break;case"focusin":Se="focus",oe=co;break;case"focusout":Se="blur",oe=co;break;case"beforeblur":case"afterblur":oe=co;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Ip;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=df;break;case Uu:case qu:case Bu:oe=Kp;break;case Hu:oe=mf;break;case"scroll":case"scrollend":oe=Qp;break;case"wheel":oe=xf;break;case"copy":case"cut":case"paste":oe=Wp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=bu;break;case"toggle":case"beforetoggle":oe=ff}var Te=(a&4)!==0,at=!Te&&(t==="scroll"||t==="scrollend"),Q=Te?te!==null?te+"Capture":null:te;Te=[];for(var B=W,J;B!==null;){var pe=B;if(J=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||J===null||Q===null||(pe=rr(B,Q),pe!=null&&Te.push(qr(B,pe,J))),at)break;B=B.return}0<Te.length&&(te=new oe(te,Se,null,s,xe),fe.push({event:te,listeners:Te}))}}if((a&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",te&&s!==ao&&(Se=s.relatedTarget||s.fromElement)&&(dl(Se)||Se[cl]))break e;if((oe||te)&&(te=xe.window===xe?xe:(te=xe.ownerDocument)?te.defaultView||te.parentWindow:window,oe?(Se=s.relatedTarget||s.toElement,oe=W,Se=Se?dl(Se):null,Se!==null&&(at=h(Se),Te=Se.tag,Se!==at||Te!==5&&Te!==27&&Te!==6)&&(Se=null)):(oe=null,Se=W),oe!==Se)){if(Te=fu,pe="onMouseLeave",Q="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(Te=bu,pe="onPointerLeave",Q="onPointerEnter",B="pointer"),at=oe==null?te:lr(oe),J=Se==null?te:lr(Se),te=new Te(pe,B+"leave",oe,s,xe),te.target=at,te.relatedTarget=J,pe=null,dl(xe)===W&&(Te=new Te(Q,B+"enter",Se,s,xe),Te.target=J,Te.relatedTarget=at,pe=Te),at=pe,oe&&Se)t:{for(Te=pg,Q=oe,B=Se,J=0,pe=Q;pe;pe=Te(pe))J++;pe=0;for(var Ae=B;Ae;Ae=Te(Ae))pe++;for(;0<J-pe;)Q=Te(Q),J--;for(;0<pe-J;)B=Te(B),pe--;for(;J--;){if(Q===B||B!==null&&Q===B.alternate){Te=Q;break t}Q=Te(Q),B=Te(B)}Te=null}else Te=null;oe!==null&&cx(fe,te,oe,Te,!1),Se!==null&&at!==null&&cx(fe,at,Se,Te,!0)}}e:{if(te=W?lr(W):window,oe=te.nodeName&&te.nodeName.toLowerCase(),oe==="select"||oe==="input"&&te.type==="file")var Qe=_u;else if(ku(te))if(Cu)Qe=_f;else{Qe=kf;var Ce=wf}else oe=te.nodeName,!oe||oe.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&to(W.elementType)&&(Qe=_u):Qe=Sf;if(Qe&&(Qe=Qe(t,W))){Su(fe,Qe,s,xe);break e}Ce&&Ce(t,te,W),t==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&eo(te,"number",te.value)}switch(Ce=W?lr(W):window,t){case"focusin":(ku(Ce)||Ce.contentEditable==="true")&&(yl=Ce,fo=W,hr=null);break;case"focusout":hr=fo=yl=null;break;case"mousedown":go=!0;break;case"contextmenu":case"mouseup":case"dragend":go=!1,Ou(fe,s,xe);break;case"selectionchange":if(Ef)break;case"keydown":case"keyup":Ou(fe,s,xe)}var Ue;if(mo)e:{switch(t){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else bl?Nu(t,s)&&(Fe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Fe="onCompositionStart");Fe&&(yu&&s.locale!=="ko"&&(bl||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&bl&&(Ue=xu()):(xs=xe,no="value"in xs?xs.value:xs.textContent,bl=!0)),Ce=oi(W,Fe),0<Ce.length&&(Fe=new gu(Fe,t,null,s,xe),fe.push({event:Fe,listeners:Ce}),Ue?Fe.data=Ue:(Ue=wu(s),Ue!==null&&(Fe.data=Ue)))),(Ue=bf?yf(t,s):vf(t,s))&&(Fe=oi(W,"onBeforeInput"),0<Fe.length&&(Ce=new gu("onBeforeInput","beforeinput",null,s,xe),fe.push({event:Ce,listeners:Fe}),Ce.data=Ue)),ug(fe,t,W,s,xe)}ix(fe,a)})}function qr(t,a,s){return{instance:t,listener:a,currentTarget:s}}function oi(t,a){for(var s=a+"Capture",r=[];t!==null;){var o=t,d=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||d===null||(o=rr(t,s),o!=null&&r.unshift(qr(t,o,d)),o=rr(t,a),o!=null&&r.push(qr(t,o,d))),t.tag===3)return r;t=t.return}return[]}function pg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function cx(t,a,s,r,o){for(var d=a._reactName,y=[];s!==null&&s!==r;){var A=s,z=A.alternate,W=A.stateNode;if(A=A.tag,z!==null&&z===r)break;A!==5&&A!==26&&A!==27||W===null||(z=W,o?(W=rr(s,d),W!=null&&y.unshift(qr(s,W,z))):o||(W=rr(s,d),W!=null&&y.push(qr(s,W,z)))),s=s.return}y.length!==0&&t.push({event:a,listeners:y})}var fg=/\r\n?/g,gg=/\u0000|\uFFFD/g;function dx(t){return(typeof t=="string"?t:""+t).replace(fg,`
`).replace(gg,"")}function ux(t,a){return a=dx(a),dx(t)===a}function tt(t,a,s,r,o,d){switch(s){case"children":typeof r=="string"?a==="body"||a==="textarea"&&r===""||pl(t,r):(typeof r=="number"||typeof r=="bigint")&&a!=="body"&&pl(t,""+r);break;case"className":mn(t,"class",r);break;case"tabIndex":mn(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(t,s,r);break;case"style":uu(t,r,d);break;case"data":if(a!=="object"){mn(t,"data",r);break}case"src":case"href":if(r===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(s);break}r=xn(""+r),t.setAttribute(s,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(a!=="input"&&tt(t,a,"name",o.name,o,null),tt(t,a,"formEncType",o.formEncType,o,null),tt(t,a,"formMethod",o.formMethod,o,null),tt(t,a,"formTarget",o.formTarget,o,null)):(tt(t,a,"encType",o.encType,o,null),tt(t,a,"method",o.method,o,null),tt(t,a,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(s);break}r=xn(""+r),t.setAttribute(s,r);break;case"onClick":r!=null&&(t.onclick=Pa);break;case"onScroll":r!=null&&He("scroll",t);break;case"onScrollEnd":r!=null&&He("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(i(61));if(s=r.__html,s!=null){if(o.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}s=xn(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,""+r):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":r===!0?t.setAttribute(s,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,r):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(s,r):t.removeAttribute(s);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(s):t.setAttribute(s,r);break;case"popover":He("beforetoggle",t),He("toggle",t),un(t,"popover",r);break;case"xlinkActuate":Fa(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Fa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Fa(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Fa(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Fa(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Fa(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Fa(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Fa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Fa(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":un(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=$p.get(s)||s,un(t,s,r))}}function Fc(t,a,s,r,o,d){switch(s){case"style":uu(t,r,d);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(i(61));if(s=r.__html,s!=null){if(o.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"children":typeof r=="string"?pl(t,r):(typeof r=="number"||typeof r=="bigint")&&pl(t,""+r);break;case"onScroll":r!=null&&He("scroll",t);break;case"onScrollEnd":r!=null&&He("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!au.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(o=s.endsWith("Capture"),a=s.slice(2,o?s.length-7:void 0),d=t[It]||null,d=d!=null?d[s]:null,typeof d=="function"&&t.removeEventListener(a,d,o),typeof r=="function")){typeof d!="function"&&d!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,r,o);break e}s in t?t[s]=r:r===!0?t.setAttribute(s,""):un(t,s,r)}}}function Bt(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",t),He("load",t);var r=!1,o=!1,d;for(d in s)if(s.hasOwnProperty(d)){var y=s[d];if(y!=null)switch(d){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tt(t,a,d,y,s,null)}}o&&tt(t,a,"srcSet",s.srcSet,s,null),r&&tt(t,a,"src",s.src,s,null);return;case"input":He("invalid",t);var A=d=y=o=null,z=null,W=null;for(r in s)if(s.hasOwnProperty(r)){var xe=s[r];if(xe!=null)switch(r){case"name":o=xe;break;case"type":y=xe;break;case"checked":z=xe;break;case"defaultChecked":W=xe;break;case"value":d=xe;break;case"defaultValue":A=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,a));break;default:tt(t,a,r,xe,s,null)}}iu(t,d,A,z,W,y,o,!1);return;case"select":He("invalid",t),r=y=d=null;for(o in s)if(s.hasOwnProperty(o)&&(A=s[o],A!=null))switch(o){case"value":d=A;break;case"defaultValue":y=A;break;case"multiple":r=A;default:tt(t,a,o,A,s,null)}a=d,s=y,t.multiple=!!r,a!=null?xl(t,!!r,a,!1):s!=null&&xl(t,!!r,s,!0);return;case"textarea":He("invalid",t),d=o=r=null;for(y in s)if(s.hasOwnProperty(y)&&(A=s[y],A!=null))switch(y){case"value":r=A;break;case"defaultValue":o=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:tt(t,a,y,A,s,null)}cu(t,r,o,d);return;case"option":for(z in s)s.hasOwnProperty(z)&&(r=s[z],r!=null)&&(z==="selected"?t.selected=r&&typeof r!="function"&&typeof r!="symbol":tt(t,a,z,r,s,null));return;case"dialog":He("beforetoggle",t),He("toggle",t),He("cancel",t),He("close",t);break;case"iframe":case"object":He("load",t);break;case"video":case"audio":for(r=0;r<Ur.length;r++)He(Ur[r],t);break;case"image":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"embed":case"source":case"link":He("error",t),He("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in s)if(s.hasOwnProperty(W)&&(r=s[W],r!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tt(t,a,W,r,s,null)}return;default:if(to(a)){for(xe in s)s.hasOwnProperty(xe)&&(r=s[xe],r!==void 0&&Fc(t,a,xe,r,s,void 0));return}}for(A in s)s.hasOwnProperty(A)&&(r=s[A],r!=null&&tt(t,a,A,r,s,null))}function bg(t,a,s,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,d=null,y=null,A=null,z=null,W=null,xe=null;for(oe in s){var fe=s[oe];if(s.hasOwnProperty(oe)&&fe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":z=fe;default:r.hasOwnProperty(oe)||tt(t,a,oe,null,r,fe)}}for(var te in r){var oe=r[te];if(fe=s[te],r.hasOwnProperty(te)&&(oe!=null||fe!=null))switch(te){case"type":d=oe;break;case"name":o=oe;break;case"checked":W=oe;break;case"defaultChecked":xe=oe;break;case"value":y=oe;break;case"defaultValue":A=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,a));break;default:oe!==fe&&tt(t,a,te,oe,r,fe)}}Wi(t,y,A,z,W,xe,d,o);return;case"select":oe=y=A=te=null;for(d in s)if(z=s[d],s.hasOwnProperty(d)&&z!=null)switch(d){case"value":break;case"multiple":oe=z;default:r.hasOwnProperty(d)||tt(t,a,d,null,r,z)}for(o in r)if(d=r[o],z=s[o],r.hasOwnProperty(o)&&(d!=null||z!=null))switch(o){case"value":te=d;break;case"defaultValue":A=d;break;case"multiple":y=d;default:d!==z&&tt(t,a,o,d,r,z)}a=A,s=y,r=oe,te!=null?xl(t,!!s,te,!1):!!r!=!!s&&(a!=null?xl(t,!!s,a,!0):xl(t,!!s,s?[]:"",!1));return;case"textarea":oe=te=null;for(A in s)if(o=s[A],s.hasOwnProperty(A)&&o!=null&&!r.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:tt(t,a,A,null,r,o)}for(y in r)if(o=r[y],d=s[y],r.hasOwnProperty(y)&&(o!=null||d!=null))switch(y){case"value":te=o;break;case"defaultValue":oe=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==d&&tt(t,a,y,o,r,d)}ou(t,te,oe);return;case"option":for(var Se in s)te=s[Se],s.hasOwnProperty(Se)&&te!=null&&!r.hasOwnProperty(Se)&&(Se==="selected"?t.selected=!1:tt(t,a,Se,null,r,te));for(z in r)te=r[z],oe=s[z],r.hasOwnProperty(z)&&te!==oe&&(te!=null||oe!=null)&&(z==="selected"?t.selected=te&&typeof te!="function"&&typeof te!="symbol":tt(t,a,z,te,r,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in s)te=s[Te],s.hasOwnProperty(Te)&&te!=null&&!r.hasOwnProperty(Te)&&tt(t,a,Te,null,r,te);for(W in r)if(te=r[W],oe=s[W],r.hasOwnProperty(W)&&te!==oe&&(te!=null||oe!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:tt(t,a,W,te,r,oe)}return;default:if(to(a)){for(var at in s)te=s[at],s.hasOwnProperty(at)&&te!==void 0&&!r.hasOwnProperty(at)&&Fc(t,a,at,void 0,r,te);for(xe in r)te=r[xe],oe=s[xe],!r.hasOwnProperty(xe)||te===oe||te===void 0&&oe===void 0||Fc(t,a,xe,te,r,oe);return}}for(var Q in s)te=s[Q],s.hasOwnProperty(Q)&&te!=null&&!r.hasOwnProperty(Q)&&tt(t,a,Q,null,r,te);for(fe in r)te=r[fe],oe=s[fe],!r.hasOwnProperty(fe)||te===oe||te==null&&oe==null||tt(t,a,fe,te,r,oe)}function mx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,s=performance.getEntriesByType("resource"),r=0;r<s.length;r++){var o=s[r],d=o.transferSize,y=o.initiatorType,A=o.duration;if(d&&A&&mx(y)){for(y=0,A=o.responseEnd,r+=1;r<s.length;r++){var z=s[r],W=z.startTime;if(W>A)break;var xe=z.transferSize,fe=z.initiatorType;xe&&mx(fe)&&(z=z.responseEnd,y+=xe*(z<A?1:(A-W)/(z-W)))}if(--r,a+=8*(d+y)/(o.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Pc=null,$c=null;function ci(t){return t.nodeType===9?t:t.ownerDocument}function hx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xx(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Yc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Qc=null;function vg(){var t=window.event;return t&&t.type==="popstate"?t===Qc?!1:(Qc=t,!0):(Qc=null,!1)}var px=typeof setTimeout=="function"?setTimeout:void 0,jg=typeof clearTimeout=="function"?clearTimeout:void 0,fx=typeof Promise=="function"?Promise:void 0,Ng=typeof queueMicrotask=="function"?queueMicrotask:typeof fx<"u"?function(t){return fx.resolve(null).then(t).catch(wg)}:px;function wg(t){setTimeout(function(){throw t})}function Ds(t){return t==="head"}function gx(t,a){var s=a,r=0;do{var o=s.nextSibling;if(t.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"||s==="/&"){if(r===0){t.removeChild(o),Ql(a);return}r--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")r++;else if(s==="html")Br(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Br(s);for(var d=s.firstChild;d;){var y=d.nextSibling,A=d.nodeName;d[sr]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=y}}else s==="body"&&Br(t.ownerDocument.body);s=o}while(s);Ql(a)}function bx(t,a){var s=t;t=0;do{var r=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=r}while(s)}function Vc(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Vc(s),Ki(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function kg(t,a,s,r){for(;t.nodeType===1;){var o=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[sr])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var d=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=wa(t.nextSibling),t===null)break}return null}function Sg(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=wa(t.nextSibling),t===null))return null;return t}function yx(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=wa(t.nextSibling),t===null))return null;return t}function Ic(t){return t.data==="$?"||t.data==="$~"}function Xc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function _g(t,a){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||s.readyState!=="loading")a();else{var r=function(){a(),s.removeEventListener("DOMContentLoaded",r)};s.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function wa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Zc=null;function vx(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(a===0)return wa(t.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}t=t.nextSibling}return null}function jx(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return t;a--}else s!=="/$"&&s!=="/&"||a++}t=t.previousSibling}return null}function Nx(t,a,s){switch(a=ci(s),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Br(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ki(t)}var ka=new Map,wx=new Set;function di(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var rs=se.d;se.d={f:Cg,r:Eg,D:Ag,C:Tg,L:Dg,m:Rg,X:zg,S:Mg,M:Og};function Cg(){var t=rs.f(),a=ti();return t||a}function Eg(t){var a=ul(t);a!==null&&a.tag===5&&a.type==="form"?Hm(a):rs.r(t)}var Pl=typeof document>"u"?null:document;function kx(t,a,s){var r=Pl;if(r&&typeof a=="string"&&a){var o=fa(a);o='link[rel="'+t+'"][href="'+o+'"]',typeof s=="string"&&(o+='[crossorigin="'+s+'"]'),wx.has(o)||(wx.add(o),t={rel:t,crossOrigin:s,href:a},r.querySelector(o)===null&&(a=r.createElement("link"),Bt(a,"link",t),At(a),r.head.appendChild(a)))}}function Ag(t){rs.D(t),kx("dns-prefetch",t,null)}function Tg(t,a){rs.C(t,a),kx("preconnect",t,a)}function Dg(t,a,s){rs.L(t,a,s);var r=Pl;if(r&&t&&a){var o='link[rel="preload"][as="'+fa(a)+'"]';a==="image"&&s&&s.imageSrcSet?(o+='[imagesrcset="'+fa(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(o+='[imagesizes="'+fa(s.imageSizes)+'"]')):o+='[href="'+fa(t)+'"]';var d=o;switch(a){case"style":d=$l(t);break;case"script":d=Yl(t)}ka.has(d)||(t=f({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),ka.set(d,t),r.querySelector(o)!==null||a==="style"&&r.querySelector(Hr(d))||a==="script"&&r.querySelector(Gr(d))||(a=r.createElement("link"),Bt(a,"link",t),At(a),r.head.appendChild(a)))}}function Rg(t,a){rs.m(t,a);var s=Pl;if(s&&t){var r=a&&typeof a.as=="string"?a.as:"script",o='link[rel="modulepreload"][as="'+fa(r)+'"][href="'+fa(t)+'"]',d=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Yl(t)}if(!ka.has(d)&&(t=f({rel:"modulepreload",href:t},a),ka.set(d,t),s.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Gr(d)))return}r=s.createElement("link"),Bt(r,"link",t),At(r),s.head.appendChild(r)}}}function Mg(t,a,s){rs.S(t,a,s);var r=Pl;if(r&&t){var o=ml(r).hoistableStyles,d=$l(t);a=a||"default";var y=o.get(d);if(!y){var A={loading:0,preload:null};if(y=r.querySelector(Hr(d)))A.loading=5;else{t=f({rel:"stylesheet",href:t,"data-precedence":a},s),(s=ka.get(d))&&Kc(t,s);var z=y=r.createElement("link");At(z),Bt(z,"link",t),z._p=new Promise(function(W,xe){z.onload=W,z.onerror=xe}),z.addEventListener("load",function(){A.loading|=1}),z.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ui(y,a,r)}y={type:"stylesheet",instance:y,count:1,state:A},o.set(d,y)}}}function zg(t,a){rs.X(t,a);var s=Pl;if(s&&t){var r=ml(s).hoistableScripts,o=Yl(t),d=r.get(o);d||(d=s.querySelector(Gr(o)),d||(t=f({src:t,async:!0},a),(a=ka.get(o))&&Jc(t,a),d=s.createElement("script"),At(d),Bt(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},r.set(o,d))}}function Og(t,a){rs.M(t,a);var s=Pl;if(s&&t){var r=ml(s).hoistableScripts,o=Yl(t),d=r.get(o);d||(d=s.querySelector(Gr(o)),d||(t=f({src:t,async:!0,type:"module"},a),(a=ka.get(o))&&Jc(t,a),d=s.createElement("script"),At(d),Bt(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},r.set(o,d))}}function Sx(t,a,s,r){var o=(o=le.current)?di(o):null;if(!o)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=$l(s.href),s=ml(o).hoistableStyles,r=s.get(a),r||(r={type:"style",instance:null,count:0,state:null},s.set(a,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=$l(s.href);var d=ml(o).hoistableStyles,y=d.get(t);if(y||(o=o.ownerDocument||o,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,y),(d=o.querySelector(Hr(t)))&&!d._p&&(y.instance=d,y.state.loading=5),ka.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ka.set(t,s),d||Lg(o,t,s,y.state))),a&&r===null)throw Error(i(528,""));return y}if(a&&r!==null)throw Error(i(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Yl(s),s=ml(o).hoistableScripts,r=s.get(a),r||(r={type:"script",instance:null,count:0,state:null},s.set(a,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function $l(t){return'href="'+fa(t)+'"'}function Hr(t){return'link[rel="stylesheet"]['+t+"]"}function _x(t){return f({},t,{"data-precedence":t.precedence,precedence:null})}function Lg(t,a,s,r){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?r.loading=1:(a=t.createElement("link"),r.preload=a,a.addEventListener("load",function(){return r.loading|=1}),a.addEventListener("error",function(){return r.loading|=2}),Bt(a,"link",s),At(a),t.head.appendChild(a))}function Yl(t){return'[src="'+fa(t)+'"]'}function Gr(t){return"script[async]"+t}function Cx(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var r=t.querySelector('style[data-href~="'+fa(s.href)+'"]');if(r)return a.instance=r,At(r),r;var o=f({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),At(r),Bt(r,"style",o),ui(r,s.precedence,t),a.instance=r;case"stylesheet":o=$l(s.href);var d=t.querySelector(Hr(o));if(d)return a.state.loading|=4,a.instance=d,At(d),d;r=_x(s),(o=ka.get(o))&&Kc(r,o),d=(t.ownerDocument||t).createElement("link"),At(d);var y=d;return y._p=new Promise(function(A,z){y.onload=A,y.onerror=z}),Bt(d,"link",r),a.state.loading|=4,ui(d,s.precedence,t),a.instance=d;case"script":return d=Yl(s.src),(o=t.querySelector(Gr(d)))?(a.instance=o,At(o),o):(r=s,(o=ka.get(d))&&(r=f({},s),Jc(r,o)),t=t.ownerDocument||t,o=t.createElement("script"),At(o),Bt(o,"link",r),t.head.appendChild(o),a.instance=o);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(r=a.instance,a.state.loading|=4,ui(r,s.precedence,t));return a.instance}function ui(t,a,s){for(var r=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,d=o,y=0;y<r.length;y++){var A=r[y];if(A.dataset.precedence===a)d=A;else if(d!==o)break}d?d.parentNode.insertBefore(t,d.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Kc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Jc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var mi=null;function Ex(t,a,s){if(mi===null){var r=new Map,o=mi=new Map;o.set(s,r)}else o=mi,r=o.get(s),r||(r=new Map,o.set(s,r));if(r.has(t))return r;for(r.set(t,null),s=s.getElementsByTagName(t),o=0;o<s.length;o++){var d=s[o];if(!(d[sr]||d[Ot]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(a)||"";y=t+y;var A=r.get(y);A?A.push(d):r.set(y,[d])}}return r}function Ax(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function Ug(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Tx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function qg(t,a,s,r){if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var o=$l(r.href),d=a.querySelector(Hr(o));if(d){a=d._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=hi.bind(t),a.then(t,t)),s.state.loading|=4,s.instance=d,At(d);return}d=a.ownerDocument||a,r=_x(r),(o=ka.get(o))&&Kc(r,o),d=d.createElement("link"),At(d);var y=d;y._p=new Promise(function(A,z){y.onload=A,y.onerror=z}),Bt(d,"link",r),s.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=hi.bind(t),a.addEventListener("load",s),a.addEventListener("error",s))}}var Wc=0;function Bg(t,a){return t.stylesheets&&t.count===0&&pi(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var r=setTimeout(function(){if(t.stylesheets&&pi(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+a);0<t.imgBytes&&Wc===0&&(Wc=62500*yg());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&pi(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Wc?50:800)+a);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}function hi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pi(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xi=null;function pi(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xi=new Map,a.forEach(Hg,t),xi=null,hi.call(t))}function Hg(t,a){if(!(a.state.loading&4)){var s=xi.get(t);if(s)var r=s.get(null);else{s=new Map,xi.set(t,s);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<o.length;d++){var y=o[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),r=y)}r&&s.set(null,r)}o=a.instance,y=o.getAttribute("data-precedence"),d=s.get(y)||r,d===r&&s.set(null,o),s.set(y,o),this.count++,r=hi.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),d?d.parentNode.insertBefore(o,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),a.state.loading|=4}}var Fr={$$typeof:M,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Gg(t,a,s,r,o,d,y,A,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vi(0),this.hiddenUpdates=Vi(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Dx(t,a,s,r,o,d,y,A,z,W,xe,fe){return t=new Gg(t,a,s,y,z,W,xe,fe,A),a=1,d===!0&&(a|=24),d=la(3,null,null,a),t.current=d,d.stateNode=t,a=Ro(),a.refCount++,t.pooledCache=a,a.refCount++,d.memoizedState={element:r,isDehydrated:s,cache:a},Lo(d),t}function Rx(t){return t?(t=Nl,t):Nl}function Mx(t,a,s,r,o,d){o=Rx(o),r.context===null?r.context=o:r.pendingContext=o,r=vs(a),r.payload={element:s},d=d===void 0?null:d,d!==null&&(r.callback=d),s=js(t,r,a),s!==null&&(ea(s,t,a),vr(s,t,a))}function zx(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function ed(t,a){zx(t,a),(t=t.alternate)&&zx(t,a)}function Ox(t){if(t.tag===13||t.tag===31){var a=Ys(t,67108864);a!==null&&ea(a,t,67108864),ed(t,67108864)}}function Lx(t){if(t.tag===13||t.tag===31){var a=ca();a=Ii(a);var s=Ys(t,a);s!==null&&ea(s,t,a),ed(t,a)}}var fi=!0;function Fg(t,a,s,r){var o=U.T;U.T=null;var d=se.p;try{se.p=2,td(t,a,s,r)}finally{se.p=d,U.T=o}}function Pg(t,a,s,r){var o=U.T;U.T=null;var d=se.p;try{se.p=8,td(t,a,s,r)}finally{se.p=d,U.T=o}}function td(t,a,s,r){if(fi){var o=ad(r);if(o===null)Gc(t,a,r,gi,s),qx(t,r);else if(Yg(o,t,a,s,r))r.stopPropagation();else if(qx(t,r),a&4&&-1<$g.indexOf(t)){for(;o!==null;){var d=ul(o);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=xa(d.pendingLanes);if(y!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;y;){var z=1<<31-ze(y);A.entanglements[1]|=z,y&=~z}qa(d),(Ie&6)===0&&(Wn=Ke()+500,Lr(0))}}break;case 31:case 13:A=Ys(d,2),A!==null&&ea(A,d,2),ti(),ed(d,2)}if(d=ad(r),d===null&&Gc(t,a,r,gi,s),d===o)break;o=d}o!==null&&r.stopPropagation()}else Gc(t,a,r,null,s)}}function ad(t){return t=so(t),sd(t)}var gi=null;function sd(t){if(gi=null,t=dl(t),t!==null){var a=h(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=x(a),t!==null)return t;t=null}else if(s===31){if(t=b(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return gi=t,null}function Ux(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Aa()){case Vt:return 2;case Bs:return 8;case lt:case us:return 32;case xt:return 268435456;default:return 32}default:return 32}}var ld=!1,Rs=null,Ms=null,zs=null,Pr=new Map,$r=new Map,Os=[],$g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qx(t,a){switch(t){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Pr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(a.pointerId)}}function Yr(t,a,s,r,o,d){return t===null||t.nativeEvent!==d?(t={blockedOn:a,domEventName:s,eventSystemFlags:r,nativeEvent:d,targetContainers:[o]},a!==null&&(a=ul(a),a!==null&&Ox(a)),t):(t.eventSystemFlags|=r,a=t.targetContainers,o!==null&&a.indexOf(o)===-1&&a.push(o),t)}function Yg(t,a,s,r,o){switch(a){case"focusin":return Rs=Yr(Rs,t,a,s,r,o),!0;case"dragenter":return Ms=Yr(Ms,t,a,s,r,o),!0;case"mouseover":return zs=Yr(zs,t,a,s,r,o),!0;case"pointerover":var d=o.pointerId;return Pr.set(d,Yr(Pr.get(d)||null,t,a,s,r,o)),!0;case"gotpointercapture":return d=o.pointerId,$r.set(d,Yr($r.get(d)||null,t,a,s,r,o)),!0}return!1}function Bx(t){var a=dl(t.target);if(a!==null){var s=h(a);if(s!==null){if(a=s.tag,a===13){if(a=x(s),a!==null){t.blockedOn=a,Wd(t.priority,function(){Lx(s)});return}}else if(a===31){if(a=b(s),a!==null){t.blockedOn=a,Wd(t.priority,function(){Lx(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bi(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=ad(t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);ao=r,s.target.dispatchEvent(r),ao=null}else return a=ul(s),a!==null&&Ox(a),t.blockedOn=s,!1;a.shift()}return!0}function Hx(t,a,s){bi(t)&&s.delete(a)}function Qg(){ld=!1,Rs!==null&&bi(Rs)&&(Rs=null),Ms!==null&&bi(Ms)&&(Ms=null),zs!==null&&bi(zs)&&(zs=null),Pr.forEach(Hx),$r.forEach(Hx)}function yi(t,a){t.blockedOn===a&&(t.blockedOn=null,ld||(ld=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Qg)))}var vi=null;function Gx(t){vi!==t&&(vi=t,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){vi===t&&(vi=null);for(var a=0;a<t.length;a+=3){var s=t[a],r=t[a+1],o=t[a+2];if(typeof r!="function"){if(sd(r||s)===null)continue;break}var d=ul(s);d!==null&&(t.splice(a,3),a-=3,ac(d,{pending:!0,data:o,method:s.method,action:r},r,o))}}))}function Ql(t){function a(z){return yi(z,t)}Rs!==null&&yi(Rs,t),Ms!==null&&yi(Ms,t),zs!==null&&yi(zs,t),Pr.forEach(a),$r.forEach(a);for(var s=0;s<Os.length;s++){var r=Os[s];r.blockedOn===t&&(r.blockedOn=null)}for(;0<Os.length&&(s=Os[0],s.blockedOn===null);)Bx(s),s.blockedOn===null&&Os.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(r=0;r<s.length;r+=3){var o=s[r],d=s[r+1],y=o[It]||null;if(typeof d=="function")y||Gx(s);else if(y){var A=null;if(d&&d.hasAttribute("formAction")){if(o=d,y=d[It]||null)A=y.formAction;else if(sd(o)!==null)continue}else A=y.action;typeof A=="function"?s[r+1]=A:(s.splice(r,3),r-=3),Gx(s)}}}function Fx(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return o=y})},focusReset:"manual",scroll:"manual"})}function a(){o!==null&&(o(),o=null),r||setTimeout(s,20)}function s(){if(!r&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),o!==null&&(o(),o=null)}}}function rd(t){this._internalRoot=t}ji.prototype.render=rd.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var s=a.current,r=ca();Mx(s,r,t,a,null,null)},ji.prototype.unmount=rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Mx(t.current,2,null,t,null,null),ti(),a[cl]=null}};function ji(t){this._internalRoot=t}ji.prototype.unstable_scheduleHydration=function(t){if(t){var a=Jd();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Os.length&&a!==0&&a<Os[s].priority;s++);Os.splice(s,0,t),s===0&&Bx(t)}};var Px=n.version;if(Px!=="19.2.3")throw Error(i(527,Px,"19.2.3"));se.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(a),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var Vg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ni=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ni.isDisabled&&Ni.supportsFiber)try{me=Ni.inject(Vg),_e=Ni}catch{}}return Vr.createRoot=function(t,a){if(!u(t))throw Error(i(299));var s=!1,r="",o=Zm,d=Km,y=Jm;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Dx(t,1,!1,null,null,s,r,null,o,d,y,Fx),t[cl]=a.current,Hc(t),new rd(a)},Vr.hydrateRoot=function(t,a,s){if(!u(t))throw Error(i(299));var r=!1,o="",d=Zm,y=Km,A=Jm,z=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.formState!==void 0&&(z=s.formState)),a=Dx(t,1,!0,a,s??null,r,o,z,d,y,A,Fx),a.context=Rx(null),s=a.current,r=ca(),r=Ii(r),o=vs(r),o.callback=null,js(s,o,r),s=r,a.current.lanes=s,ar(a,s),qa(a),t[cl]=a.current,Hc(t),new ji(a)},Vr.version="19.2.3",Vr}var Wx;function sb(){if(Wx)return od.exports;Wx=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),od.exports=ab(),od.exports}var lb=sb();var e0="popstate";function rb(l={}){function n(i,u){let{pathname:h,search:x,hash:b}=i.location;return Nd("",{pathname:h,search:x,hash:b},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function c(i,u){return typeof u=="string"?u:en(u)}return ib(n,c,null,l)}function ut(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function da(l,n){if(!l){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function nb(){return Math.random().toString(36).substring(2,10)}function t0(l,n){return{usr:l.state,key:l.key,idx:n}}function Nd(l,n,c=null,i){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof n=="string"?Kl(n):n,state:c,key:n&&n.key||i||nb()}}function en({pathname:l="/",search:n="",hash:c=""}){return n&&n!=="?"&&(l+=n.charAt(0)==="?"?n:"?"+n),c&&c!=="#"&&(l+=c.charAt(0)==="#"?c:"#"+c),l}function Kl(l){let n={};if(l){let c=l.indexOf("#");c>=0&&(n.hash=l.substring(c),l=l.substring(0,c));let i=l.indexOf("?");i>=0&&(n.search=l.substring(i),l=l.substring(0,i)),l&&(n.pathname=l)}return n}function ib(l,n,c,i={}){let{window:u=document.defaultView,v5Compat:h=!1}=i,x=u.history,b="POP",v=null,p=g();p==null&&(p=0,x.replaceState({...x.state,idx:p},""));function g(){return(x.state||{idx:null}).idx}function f(){b="POP";let j=g(),T=j==null?null:j-p;p=j,v&&v({action:b,location:C.location,delta:T})}function k(j,T){b="PUSH";let S=Nd(C.location,j,T);p=g()+1;let M=t0(S,p),O=C.createHref(S);try{x.pushState(M,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;u.location.assign(O)}h&&v&&v({action:b,location:C.location,delta:1})}function w(j,T){b="REPLACE";let S=Nd(C.location,j,T);p=g();let M=t0(S,p),O=C.createHref(S);x.replaceState(M,"",O),h&&v&&v({action:b,location:C.location,delta:0})}function N(j){return ob(j)}let C={get action(){return b},get location(){return l(u,x)},listen(j){if(v)throw new Error("A history only accepts one active listener");return u.addEventListener(e0,f),v=j,()=>{u.removeEventListener(e0,f),v=null}},createHref(j){return n(u,j)},createURL:N,encodeLocation(j){let T=N(j);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:k,replace:w,go(j){return x.go(j)}};return C}function ob(l,n=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),ut(c,"No window.location.(origin|href) available to create URL");let i=typeof l=="string"?l:en(l);return i=i.replace(/ $/,"%20"),!n&&i.startsWith("//")&&(i=c+i),new URL(i,c)}function z0(l,n,c="/"){return cb(l,n,c,!1)}function cb(l,n,c,i){let u=typeof n=="string"?Kl(n):n,h=cs(u.pathname||"/",c);if(h==null)return null;let x=O0(l);db(x);let b=null;for(let v=0;b==null&&v<x.length;++v){let p=jb(h);b=yb(x[v],p,i)}return b}function O0(l,n=[],c=[],i="",u=!1){let h=(x,b,v=u,p)=>{let g={relativePath:p===void 0?x.path||"":p,caseSensitive:x.caseSensitive===!0,childrenIndex:b,route:x};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&v)return;ut(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let f=os([i,g.relativePath]),k=c.concat(g);x.children&&x.children.length>0&&(ut(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),O0(x.children,n,k,f,v)),!(x.path==null&&!x.index)&&n.push({path:f,score:gb(f,x.index),routesMeta:k})};return l.forEach((x,b)=>{if(x.path===""||!x.path?.includes("?"))h(x,b);else for(let v of L0(x.path))h(x,b,!0,v)}),n}function L0(l){let n=l.split("/");if(n.length===0)return[];let[c,...i]=n,u=c.endsWith("?"),h=c.replace(/\?$/,"");if(i.length===0)return u?[h,""]:[h];let x=L0(i.join("/")),b=[];return b.push(...x.map(v=>v===""?h:[h,v].join("/"))),u&&b.push(...x),b.map(v=>l.startsWith("/")&&v===""?"/":v)}function db(l){l.sort((n,c)=>n.score!==c.score?c.score-n.score:bb(n.routesMeta.map(i=>i.childrenIndex),c.routesMeta.map(i=>i.childrenIndex)))}var ub=/^:[\w-]+$/,mb=3,hb=2,xb=1,pb=10,fb=-2,a0=l=>l==="*";function gb(l,n){let c=l.split("/"),i=c.length;return c.some(a0)&&(i+=fb),n&&(i+=hb),c.filter(u=>!a0(u)).reduce((u,h)=>u+(ub.test(h)?mb:h===""?xb:pb),i)}function bb(l,n){return l.length===n.length&&l.slice(0,-1).every((i,u)=>i===n[u])?l[l.length-1]-n[n.length-1]:0}function yb(l,n,c=!1){let{routesMeta:i}=l,u={},h="/",x=[];for(let b=0;b<i.length;++b){let v=i[b],p=b===i.length-1,g=h==="/"?n:n.slice(h.length)||"/",f=zi({path:v.relativePath,caseSensitive:v.caseSensitive,end:p},g),k=v.route;if(!f&&p&&c&&!i[i.length-1].route.index&&(f=zi({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},g)),!f)return null;Object.assign(u,f.params),x.push({params:u,pathname:os([h,f.pathname]),pathnameBase:Sb(os([h,f.pathnameBase])),route:k}),f.pathnameBase!=="/"&&(h=os([h,f.pathnameBase]))}return x}function zi(l,n){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[c,i]=vb(l.path,l.caseSensitive,l.end),u=n.match(c);if(!u)return null;let h=u[0],x=h.replace(/(.)\/+$/,"$1"),b=u.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:f},k)=>{if(g==="*"){let N=b[k]||"";x=h.slice(0,h.length-N.length).replace(/(.)\/+$/,"$1")}const w=b[k];return f&&!w?p[g]=void 0:p[g]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:h,pathnameBase:x,pattern:l}}function vb(l,n=!1,c=!0){da(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let i=[],u="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,b,v)=>(i.push({paramName:b,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(i.push({paramName:"*"}),u+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?u+="\\/*$":l!==""&&l!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,n?void 0:"i"),i]}function jb(l){try{return l.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return da(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),l}}function cs(l,n){if(n==="/")return l;if(!l.toLowerCase().startsWith(n.toLowerCase()))return null;let c=n.endsWith("/")?n.length-1:n.length,i=l.charAt(c);return i&&i!=="/"?null:l.slice(c)||"/"}var U0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nb=l=>U0.test(l);function wb(l,n="/"){let{pathname:c,search:i="",hash:u=""}=typeof l=="string"?Kl(l):l,h;if(c)if(Nb(c))h=c;else{if(c.includes("//")){let x=c;c=c.replace(/\/\/+/g,"/"),da(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${c}`)}c.startsWith("/")?h=s0(c.substring(1),"/"):h=s0(c,n)}else h=n;return{pathname:h,search:_b(i),hash:Cb(u)}}function s0(l,n){let c=n.replace(/\/+$/,"").split("/");return l.split("/").forEach(u=>{u===".."?c.length>1&&c.pop():u!=="."&&c.push(u)}),c.length>1?c.join("/"):"/"}function md(l,n,c,i){return`Cannot include a '${l}' character in a manually specified \`to.${n}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kb(l){return l.filter((n,c)=>c===0||n.route.path&&n.route.path.length>0)}function Rd(l){let n=kb(l);return n.map((c,i)=>i===n.length-1?c.pathname:c.pathnameBase)}function Md(l,n,c,i=!1){let u;typeof l=="string"?u=Kl(l):(u={...l},ut(!u.pathname||!u.pathname.includes("?"),md("?","pathname","search",u)),ut(!u.pathname||!u.pathname.includes("#"),md("#","pathname","hash",u)),ut(!u.search||!u.search.includes("#"),md("#","search","hash",u)));let h=l===""||u.pathname==="",x=h?"/":u.pathname,b;if(x==null)b=c;else{let f=n.length-1;if(!i&&x.startsWith("..")){let k=x.split("/");for(;k[0]==="..";)k.shift(),f-=1;u.pathname=k.join("/")}b=f>=0?n[f]:"/"}let v=wb(u,b),p=x&&x!=="/"&&x.endsWith("/"),g=(h||x===".")&&c.endsWith("/");return!v.pathname.endsWith("/")&&(p||g)&&(v.pathname+="/"),v}var os=l=>l.join("/").replace(/\/\/+/g,"/"),Sb=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),_b=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Cb=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,Eb=class{constructor(l,n,c,i=!1){this.status=l,this.statusText=n||"",this.internal=i,c instanceof Error?(this.data=c.toString(),this.error=c):this.data=c}};function Ab(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function Tb(l){return l.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var q0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function B0(l,n){let c=l;if(typeof c!="string"||!U0.test(c))return{absoluteURL:void 0,isExternal:!1,to:c};let i=c,u=!1;if(q0)try{let h=new URL(window.location.href),x=c.startsWith("//")?new URL(h.protocol+c):new URL(c),b=cs(x.pathname,n);x.origin===h.origin&&b!=null?c=b+x.search+x.hash:u=!0}catch{da(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:u,to:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var H0=["POST","PUT","PATCH","DELETE"];new Set(H0);var Db=["GET",...H0];new Set(Db);var Jl=m.createContext(null);Jl.displayName="DataRouter";var qi=m.createContext(null);qi.displayName="DataRouterState";var Rb=m.createContext(!1),G0=m.createContext({isTransitioning:!1});G0.displayName="ViewTransition";var Mb=m.createContext(new Map);Mb.displayName="Fetchers";var zb=m.createContext(null);zb.displayName="Await";var ua=m.createContext(null);ua.displayName="Navigation";var an=m.createContext(null);an.displayName="Location";var _a=m.createContext({outlet:null,matches:[],isDataRoute:!1});_a.displayName="Route";var zd=m.createContext(null);zd.displayName="RouteError";var F0="REACT_ROUTER_ERROR",Ob="REDIRECT",Lb="ROUTE_ERROR_RESPONSE";function Ub(l){if(l.startsWith(`${F0}:${Ob}:{`))try{let n=JSON.parse(l.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function qb(l){if(l.startsWith(`${F0}:${Lb}:{`))try{let n=JSON.parse(l.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new Eb(n.status,n.statusText,n.data)}catch{}}function Bb(l,{relative:n}={}){ut(Wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:i}=m.useContext(ua),{hash:u,pathname:h,search:x}=ln(l,{relative:n}),b=h;return c!=="/"&&(b=h==="/"?c:os([c,h])),i.createHref({pathname:b,search:x,hash:u})}function Wl(){return m.useContext(an)!=null}function Ca(){return ut(Wl(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(an).location}var P0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $0(l){m.useContext(ua).static||m.useLayoutEffect(l)}function Pe(){let{isDataRoute:l}=m.useContext(_a);return l?ey():Hb()}function Hb(){ut(Wl(),"useNavigate() may be used only in the context of a <Router> component.");let l=m.useContext(Jl),{basename:n,navigator:c}=m.useContext(ua),{matches:i}=m.useContext(_a),{pathname:u}=Ca(),h=JSON.stringify(Rd(i)),x=m.useRef(!1);return $0(()=>{x.current=!0}),m.useCallback((v,p={})=>{if(da(x.current,P0),!x.current)return;if(typeof v=="number"){c.go(v);return}let g=Md(v,JSON.parse(h),u,p.relative==="path");l==null&&n!=="/"&&(g.pathname=g.pathname==="/"?n:os([n,g.pathname])),(p.replace?c.replace:c.push)(g,p.state,p)},[n,c,h,u,l])}var Gb=m.createContext(null);function Fb(l){let n=m.useContext(_a).outlet;return m.useMemo(()=>n&&m.createElement(Gb.Provider,{value:l},n),[n,l])}function sn(){let{matches:l}=m.useContext(_a),n=l[l.length-1];return n?n.params:{}}function ln(l,{relative:n}={}){let{matches:c}=m.useContext(_a),{pathname:i}=Ca(),u=JSON.stringify(Rd(c));return m.useMemo(()=>Md(l,JSON.parse(u),i,n==="path"),[l,u,i,n])}function Pb(l,n){return Y0(l,n)}function Y0(l,n,c,i,u){ut(Wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=m.useContext(ua),{matches:x}=m.useContext(_a),b=x[x.length-1],v=b?b.params:{},p=b?b.pathname:"/",g=b?b.pathnameBase:"/",f=b&&b.route;{let S=f&&f.path||"";V0(p,!f||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let k=Ca(),w;if(n){let S=typeof n=="string"?Kl(n):n;ut(g==="/"||S.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${S.pathname}" was given in the \`location\` prop.`),w=S}else w=k;let N=w.pathname||"/",C=N;if(g!=="/"){let S=g.replace(/^\//,"").split("/");C="/"+N.replace(/^\//,"").split("/").slice(S.length).join("/")}let j=z0(l,{pathname:C});da(f||j!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),da(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=Ib(j&&j.map(S=>Object.assign({},S,{params:Object.assign({},v,S.params),pathname:os([g,h.encodeLocation?h.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?g:os([g,h.encodeLocation?h.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),x,c,i,u);return n&&T?m.createElement(an.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function $b(){let l=Wb(),n=Ab(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),c=l instanceof Error?l.stack:null,i="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:i},h={padding:"2px 4px",backgroundColor:i},x=null;return console.error("Error handled by React Router default ErrorBoundary:",l),x=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:h},"ErrorBoundary")," or"," ",m.createElement("code",{style:h},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},n),c?m.createElement("pre",{style:u},c):null,x)}var Yb=m.createElement($b,null),Q0=class extends m.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,n){return n.location!==l.location||n.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:n.error,location:n.location,revalidation:l.revalidation||n.revalidation}}componentDidCatch(l,n){this.props.onError?this.props.onError(l,n):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const c=qb(l.digest);c&&(l=c)}let n=l!==void 0?m.createElement(_a.Provider,{value:this.props.routeContext},m.createElement(zd.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?m.createElement(Qb,{error:l},n):n}};Q0.contextType=Rb;var hd=new WeakMap;function Qb({children:l,error:n}){let{basename:c}=m.useContext(ua);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let i=Ub(n.digest);if(i){let u=hd.get(n);if(u)throw u;let h=B0(i.location,c);if(q0&&!hd.get(n))if(h.isExternal||i.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const x=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:i.replace}));throw hd.set(n,x),x}return m.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return l}function Vb({routeContext:l,match:n,children:c}){let i=m.useContext(Jl);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(_a.Provider,{value:l},c)}function Ib(l,n=[],c=null,i=null,u=null){if(l==null){if(!c)return null;if(c.errors)l=c.matches;else if(n.length===0&&!c.initialized&&c.matches.length>0)l=c.matches;else return null}let h=l,x=c?.errors;if(x!=null){let g=h.findIndex(f=>f.route.id&&x?.[f.route.id]!==void 0);ut(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),h=h.slice(0,Math.min(h.length,g+1))}let b=!1,v=-1;if(c)for(let g=0;g<h.length;g++){let f=h[g];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(v=g),f.route.id){let{loaderData:k,errors:w}=c,N=f.route.loader&&!k.hasOwnProperty(f.route.id)&&(!w||w[f.route.id]===void 0);if(f.route.lazy||N){b=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}let p=c&&i?(g,f)=>{i(g,{location:c.location,params:c.matches?.[0]?.params??{},unstable_pattern:Tb(c.matches),errorInfo:f})}:void 0;return h.reduceRight((g,f,k)=>{let w,N=!1,C=null,j=null;c&&(w=x&&f.route.id?x[f.route.id]:void 0,C=f.route.errorElement||Yb,b&&(v<0&&k===0?(V0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,j=null):v===k&&(N=!0,j=f.route.hydrateFallbackElement||null)));let T=n.concat(h.slice(0,k+1)),S=()=>{let M;return w?M=C:N?M=j:f.route.Component?M=m.createElement(f.route.Component,null):f.route.element?M=f.route.element:M=g,m.createElement(Vb,{match:f,routeContext:{outlet:g,matches:T,isDataRoute:c!=null},children:M})};return c&&(f.route.ErrorBoundary||f.route.errorElement||k===0)?m.createElement(Q0,{location:c.location,revalidation:c.revalidation,component:C,error:w,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:p}):S()},null)}function Od(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xb(l){let n=m.useContext(Jl);return ut(n,Od(l)),n}function Zb(l){let n=m.useContext(qi);return ut(n,Od(l)),n}function Kb(l){let n=m.useContext(_a);return ut(n,Od(l)),n}function Ld(l){let n=Kb(l),c=n.matches[n.matches.length-1];return ut(c.route.id,`${l} can only be used on routes that contain a unique "id"`),c.route.id}function Jb(){return Ld("useRouteId")}function Wb(){let l=m.useContext(zd),n=Zb("useRouteError"),c=Ld("useRouteError");return l!==void 0?l:n.errors?.[c]}function ey(){let{router:l}=Xb("useNavigate"),n=Ld("useNavigate"),c=m.useRef(!1);return $0(()=>{c.current=!0}),m.useCallback(async(u,h={})=>{da(c.current,P0),c.current&&(typeof u=="number"?await l.navigate(u):await l.navigate(u,{fromRouteId:n,...h}))},[l,n])}var l0={};function V0(l,n,c){!n&&!l0[l]&&(l0[l]=!0,da(!1,c))}m.memo(ty);function ty({routes:l,future:n,state:c,onError:i}){return Y0(l,void 0,c,i,n)}function I0({to:l,replace:n,state:c,relative:i}){ut(Wl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=m.useContext(ua);da(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=m.useContext(_a),{pathname:x}=Ca(),b=Pe(),v=Md(l,Rd(h),x,i==="path"),p=JSON.stringify(v);return m.useEffect(()=>{b(JSON.parse(p),{replace:n,state:c,relative:i})},[b,p,i,n,c]),null}function ay(l){return Fb(l.context)}function we(l){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sy({basename:l="/",children:n=null,location:c,navigationType:i="POP",navigator:u,static:h=!1,unstable_useTransitions:x}){ut(!Wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let b=l.replace(/^\/*/,"/"),v=m.useMemo(()=>({basename:b,navigator:u,static:h,unstable_useTransitions:x,future:{}}),[b,u,h,x]);typeof c=="string"&&(c=Kl(c));let{pathname:p="/",search:g="",hash:f="",state:k=null,key:w="default"}=c,N=m.useMemo(()=>{let C=cs(p,b);return C==null?null:{location:{pathname:C,search:g,hash:f,state:k,key:w},navigationType:i}},[b,p,g,f,k,w,i]);return da(N!=null,`<Router basename="${b}"> is not able to match the URL "${p}${g}${f}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:m.createElement(ua.Provider,{value:v},m.createElement(an.Provider,{children:n,value:N}))}function ly({children:l,location:n}){return Pb(wd(l),n)}function wd(l,n=[]){let c=[];return m.Children.forEach(l,(i,u)=>{if(!m.isValidElement(i))return;let h=[...n,u];if(i.type===m.Fragment){c.push.apply(c,wd(i.props.children,h));return}ut(i.type===we,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let x={id:i.props.id||h.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(x.children=wd(i.props.children,h)),c.push(x)}),c}var Ei="get",Ai="application/x-www-form-urlencoded";function Bi(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function ry(l){return Bi(l)&&l.tagName.toLowerCase()==="button"}function ny(l){return Bi(l)&&l.tagName.toLowerCase()==="form"}function iy(l){return Bi(l)&&l.tagName.toLowerCase()==="input"}function oy(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function cy(l,n){return l.button===0&&(!n||n==="_self")&&!oy(l)}function kd(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((n,c)=>{let i=l[c];return n.concat(Array.isArray(i)?i.map(u=>[c,u]):[[c,i]])},[]))}function dy(l,n){let c=kd(l);return n&&n.forEach((i,u)=>{c.has(u)||n.getAll(u).forEach(h=>{c.append(u,h)})}),c}var wi=null;function uy(){if(wi===null)try{new FormData(document.createElement("form"),0),wi=!1}catch{wi=!0}return wi}var my=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xd(l){return l!=null&&!my.has(l)?(da(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ai}"`),null):l}function hy(l,n){let c,i,u,h,x;if(ny(l)){let b=l.getAttribute("action");i=b?cs(b,n):null,c=l.getAttribute("method")||Ei,u=xd(l.getAttribute("enctype"))||Ai,h=new FormData(l)}else if(ry(l)||iy(l)&&(l.type==="submit"||l.type==="image")){let b=l.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=l.getAttribute("formaction")||b.getAttribute("action");if(i=v?cs(v,n):null,c=l.getAttribute("formmethod")||b.getAttribute("method")||Ei,u=xd(l.getAttribute("formenctype"))||xd(b.getAttribute("enctype"))||Ai,h=new FormData(b,l),!uy()){let{name:p,type:g,value:f}=l;if(g==="image"){let k=p?`${p}.`:"";h.append(`${k}x`,"0"),h.append(`${k}y`,"0")}else p&&h.append(p,f)}}else{if(Bi(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=Ei,i=null,u=Ai,x=l}return h&&u==="text/plain"&&(x=h,h=void 0),{action:i,method:c.toLowerCase(),encType:u,formData:h,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ud(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function xy(l,n,c){let i=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return i.pathname==="/"?i.pathname=`_root.${c}`:n&&cs(i.pathname,n)==="/"?i.pathname=`${n.replace(/\/$/,"")}/_root.${c}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${c}`,i}async function py(l,n){if(l.id in n)return n[l.id];try{let c=await import(l.module);return n[l.id]=c,c}catch(c){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fy(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function gy(l,n,c){let i=await Promise.all(l.map(async u=>{let h=n.routes[u.route.id];if(h){let x=await py(h,c);return x.links?x.links():[]}return[]}));return jy(i.flat(1).filter(fy).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function r0(l,n,c,i,u,h){let x=(v,p)=>c[p]?v.route.id!==c[p].route.id:!0,b=(v,p)=>c[p].pathname!==v.pathname||c[p].route.path?.endsWith("*")&&c[p].params["*"]!==v.params["*"];return h==="assets"?n.filter((v,p)=>x(v,p)||b(v,p)):h==="data"?n.filter((v,p)=>{let g=i.routes[v.route.id];if(!g||!g.hasLoader)return!1;if(x(v,p)||b(v,p))return!0;if(v.route.shouldRevalidate){let f=v.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:c[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function by(l,n,{includeHydrateFallback:c}={}){return yy(l.map(i=>{let u=n.routes[i.route.id];if(!u)return[];let h=[u.module];return u.clientActionModule&&(h=h.concat(u.clientActionModule)),u.clientLoaderModule&&(h=h.concat(u.clientLoaderModule)),c&&u.hydrateFallbackModule&&(h=h.concat(u.hydrateFallbackModule)),u.imports&&(h=h.concat(u.imports)),h}).flat(1))}function yy(l){return[...new Set(l)]}function vy(l){let n={},c=Object.keys(l).sort();for(let i of c)n[i]=l[i];return n}function jy(l,n){let c=new Set;return new Set(n),l.reduce((i,u)=>{let h=JSON.stringify(vy(u));return c.has(h)||(c.add(h),i.push({key:h,link:u})),i},[])}function X0(){let l=m.useContext(Jl);return Ud(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Ny(){let l=m.useContext(qi);return Ud(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var qd=m.createContext(void 0);qd.displayName="FrameworkContext";function Z0(){let l=m.useContext(qd);return Ud(l,"You must render this element inside a <HydratedRouter> element"),l}function wy(l,n){let c=m.useContext(qd),[i,u]=m.useState(!1),[h,x]=m.useState(!1),{onFocus:b,onBlur:v,onMouseEnter:p,onMouseLeave:g,onTouchStart:f}=n,k=m.useRef(null);m.useEffect(()=>{if(l==="render"&&x(!0),l==="viewport"){let C=T=>{T.forEach(S=>{x(S.isIntersecting)})},j=new IntersectionObserver(C,{threshold:.5});return k.current&&j.observe(k.current),()=>{j.disconnect()}}},[l]),m.useEffect(()=>{if(i){let C=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(C)}}},[i]);let w=()=>{u(!0)},N=()=>{u(!1),x(!1)};return c?l!=="intent"?[h,k,{}]:[h,k,{onFocus:Ir(b,w),onBlur:Ir(v,N),onMouseEnter:Ir(p,w),onMouseLeave:Ir(g,N),onTouchStart:Ir(f,w)}]:[!1,k,{}]}function Ir(l,n){return c=>{l&&l(c),c.defaultPrevented||n(c)}}function ky({page:l,...n}){let{router:c}=X0(),i=m.useMemo(()=>z0(c.routes,l,c.basename),[c.routes,l,c.basename]);return i?m.createElement(_y,{page:l,matches:i,...n}):null}function Sy(l){let{manifest:n,routeModules:c}=Z0(),[i,u]=m.useState([]);return m.useEffect(()=>{let h=!1;return gy(l,n,c).then(x=>{h||u(x)}),()=>{h=!0}},[l,n,c]),i}function _y({page:l,matches:n,...c}){let i=Ca(),{manifest:u,routeModules:h}=Z0(),{basename:x}=X0(),{loaderData:b,matches:v}=Ny(),p=m.useMemo(()=>r0(l,n,v,u,i,"data"),[l,n,v,u,i]),g=m.useMemo(()=>r0(l,n,v,u,i,"assets"),[l,n,v,u,i]),f=m.useMemo(()=>{if(l===i.pathname+i.search+i.hash)return[];let N=new Set,C=!1;if(n.forEach(T=>{let S=u.routes[T.route.id];!S||!S.hasLoader||(!p.some(M=>M.route.id===T.route.id)&&T.route.id in b&&h[T.route.id]?.shouldRevalidate||S.hasClientLoader?C=!0:N.add(T.route.id))}),N.size===0)return[];let j=xy(l,x,"data");return C&&N.size>0&&j.searchParams.set("_routes",n.filter(T=>N.has(T.route.id)).map(T=>T.route.id).join(",")),[j.pathname+j.search]},[x,b,i,u,p,n,l,h]),k=m.useMemo(()=>by(g,u),[g,u]),w=Sy(g);return m.createElement(m.Fragment,null,f.map(N=>m.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...c})),k.map(N=>m.createElement("link",{key:N,rel:"modulepreload",href:N,...c})),w.map(({key:N,link:C})=>m.createElement("link",{key:N,nonce:c.nonce,...C})))}function Cy(...l){return n=>{l.forEach(c=>{typeof c=="function"?c(n):c!=null&&(c.current=n)})}}var Ey=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ey&&(window.__reactRouterVersion="7.11.0")}catch{}function Ay({basename:l,children:n,unstable_useTransitions:c,window:i}){let u=m.useRef();u.current==null&&(u.current=rb({window:i,v5Compat:!0}));let h=u.current,[x,b]=m.useState({action:h.action,location:h.location}),v=m.useCallback(p=>{c===!1?b(p):m.startTransition(()=>b(p))},[c]);return m.useLayoutEffect(()=>h.listen(v),[h,v]),m.createElement(sy,{basename:l,children:n,location:x.location,navigationType:x.action,navigator:h,unstable_useTransitions:c})}var K0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J0=m.forwardRef(function({onClick:n,discover:c="render",prefetch:i="none",relative:u,reloadDocument:h,replace:x,state:b,target:v,to:p,preventScrollReset:g,viewTransition:f,unstable_defaultShouldRevalidate:k,...w},N){let{basename:C,unstable_useTransitions:j}=m.useContext(ua),T=typeof p=="string"&&K0.test(p),S=B0(p,C);p=S.to;let M=Bb(p,{relative:u}),[O,R,G]=wy(i,w),q=Ry(p,{replace:x,state:b,target:v,preventScrollReset:g,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:k,unstable_useTransitions:j});function ce(ue){n&&n(ue),ue.defaultPrevented||q(ue)}let F=m.createElement("a",{...w,...G,href:S.absoluteURL||M,onClick:S.isExternal||h?n:ce,ref:Cy(N,R),target:v,"data-discover":!T&&c==="render"?"true":void 0});return O&&!T?m.createElement(m.Fragment,null,F,m.createElement(ky,{page:M})):F});J0.displayName="Link";var Sd=m.forwardRef(function({"aria-current":n="page",caseSensitive:c=!1,className:i="",end:u=!1,style:h,to:x,viewTransition:b,children:v,...p},g){let f=ln(x,{relative:p.relative}),k=Ca(),w=m.useContext(qi),{navigator:N,basename:C}=m.useContext(ua),j=w!=null&&qy(f)&&b===!0,T=N.encodeLocation?N.encodeLocation(f).pathname:f.pathname,S=k.pathname,M=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;c||(S=S.toLowerCase(),M=M?M.toLowerCase():null,T=T.toLowerCase()),M&&C&&(M=cs(M,C)||M);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let R=S===T||!u&&S.startsWith(T)&&S.charAt(O)==="/",G=M!=null&&(M===T||!u&&M.startsWith(T)&&M.charAt(T.length)==="/"),q={isActive:R,isPending:G,isTransitioning:j},ce=R?n:void 0,F;typeof i=="function"?F=i(q):F=[i,R?"active":null,G?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ue=typeof h=="function"?h(q):h;return m.createElement(J0,{...p,"aria-current":ce,className:F,ref:g,style:ue,to:x,viewTransition:b},typeof v=="function"?v(q):v)});Sd.displayName="NavLink";var Ty=m.forwardRef(({discover:l="render",fetcherKey:n,navigate:c,reloadDocument:i,replace:u,state:h,method:x=Ei,action:b,onSubmit:v,relative:p,preventScrollReset:g,viewTransition:f,unstable_defaultShouldRevalidate:k,...w},N)=>{let{unstable_useTransitions:C}=m.useContext(ua),j=Ly(),T=Uy(b,{relative:p}),S=x.toLowerCase()==="get"?"get":"post",M=typeof b=="string"&&K0.test(b),O=R=>{if(v&&v(R),R.defaultPrevented)return;R.preventDefault();let G=R.nativeEvent.submitter,q=G?.getAttribute("formmethod")||x,ce=()=>j(G||R.currentTarget,{fetcherKey:n,method:q,navigate:c,replace:u,state:h,relative:p,preventScrollReset:g,viewTransition:f,unstable_defaultShouldRevalidate:k});C&&c!==!1?m.startTransition(()=>ce()):ce()};return m.createElement("form",{ref:N,method:S,action:T,onSubmit:i?v:O,...w,"data-discover":!M&&l==="render"?"true":void 0})});Ty.displayName="Form";function Dy(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W0(l){let n=m.useContext(Jl);return ut(n,Dy(l)),n}function Ry(l,{target:n,replace:c,state:i,preventScrollReset:u,relative:h,viewTransition:x,unstable_defaultShouldRevalidate:b,unstable_useTransitions:v}={}){let p=Pe(),g=Ca(),f=ln(l,{relative:h});return m.useCallback(k=>{if(cy(k,n)){k.preventDefault();let w=c!==void 0?c:en(g)===en(f),N=()=>p(l,{replace:w,state:i,preventScrollReset:u,relative:h,viewTransition:x,unstable_defaultShouldRevalidate:b});v?m.startTransition(()=>N()):N()}},[g,p,f,c,i,n,l,u,h,x,b,v])}function My(l){da(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=m.useRef(kd(l)),c=m.useRef(!1),i=Ca(),u=m.useMemo(()=>dy(i.search,c.current?null:n.current),[i.search]),h=Pe(),x=m.useCallback((b,v)=>{const p=kd(typeof b=="function"?b(new URLSearchParams(u)):b);c.current=!0,h("?"+p,v)},[h,u]);return[u,x]}var zy=0,Oy=()=>`__${String(++zy)}__`;function Ly(){let{router:l}=W0("useSubmit"),{basename:n}=m.useContext(ua),c=Jb(),i=l.fetch,u=l.navigate;return m.useCallback(async(h,x={})=>{let{action:b,method:v,encType:p,formData:g,body:f}=hy(h,n);if(x.navigate===!1){let k=x.fetcherKey||Oy();await i(k,c,x.action||b,{unstable_defaultShouldRevalidate:x.unstable_defaultShouldRevalidate,preventScrollReset:x.preventScrollReset,formData:g,body:f,formMethod:x.method||v,formEncType:x.encType||p,flushSync:x.flushSync})}else await u(x.action||b,{unstable_defaultShouldRevalidate:x.unstable_defaultShouldRevalidate,preventScrollReset:x.preventScrollReset,formData:g,body:f,formMethod:x.method||v,formEncType:x.encType||p,replace:x.replace,state:x.state,fromRouteId:c,flushSync:x.flushSync,viewTransition:x.viewTransition})},[i,u,n,c])}function Uy(l,{relative:n}={}){let{basename:c}=m.useContext(ua),i=m.useContext(_a);ut(i,"useFormAction must be used inside a RouteContext");let[u]=i.matches.slice(-1),h={...ln(l||".",{relative:n})},x=Ca();if(l==null){h.search=x.search;let b=new URLSearchParams(h.search),v=b.getAll("index");if(v.some(g=>g==="")){b.delete("index"),v.filter(f=>f).forEach(f=>b.append("index",f));let g=b.toString();h.search=g?`?${g}`:""}}return(!l||l===".")&&u.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(h.pathname=h.pathname==="/"?c:os([c,h.pathname])),en(h)}function qy(l,{relative:n}={}){let c=m.useContext(G0);ut(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=W0("useViewTransitionState"),u=ln(l,{relative:n});if(!c.isTransitioning)return!1;let h=cs(c.currentLocation.pathname,i)||c.currentLocation.pathname,x=cs(c.nextLocation.pathname,i)||c.nextLocation.pathname;return zi(u.pathname,x)!=null||zi(u.pathname,h)!=null}function ep(l,n){return function(){return l.apply(n,arguments)}}const{toString:By}=Object.prototype,{getPrototypeOf:Bd}=Object,{iterator:Hi,toStringTag:tp}=Symbol,Gi=(l=>n=>{const c=By.call(n);return l[c]||(l[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),Ma=l=>(l=l.toLowerCase(),n=>Gi(n)===l),Fi=l=>n=>typeof n===l,{isArray:er}=Array,Zl=Fi("undefined");function rn(l){return l!==null&&!Zl(l)&&l.constructor!==null&&!Zl(l.constructor)&&ta(l.constructor.isBuffer)&&l.constructor.isBuffer(l)}const ap=Ma("ArrayBuffer");function Hy(l){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(l):n=l&&l.buffer&&ap(l.buffer),n}const Gy=Fi("string"),ta=Fi("function"),sp=Fi("number"),nn=l=>l!==null&&typeof l=="object",Fy=l=>l===!0||l===!1,Ti=l=>{if(Gi(l)!=="object")return!1;const n=Bd(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(tp in l)&&!(Hi in l)},Py=l=>{if(!nn(l)||rn(l))return!1;try{return Object.keys(l).length===0&&Object.getPrototypeOf(l)===Object.prototype}catch{return!1}},$y=Ma("Date"),Yy=Ma("File"),Qy=Ma("Blob"),Vy=Ma("FileList"),Iy=l=>nn(l)&&ta(l.pipe),Xy=l=>{let n;return l&&(typeof FormData=="function"&&l instanceof FormData||ta(l.append)&&((n=Gi(l))==="formdata"||n==="object"&&ta(l.toString)&&l.toString()==="[object FormData]"))},Zy=Ma("URLSearchParams"),[Ky,Jy,Wy,ev]=["ReadableStream","Request","Response","Headers"].map(Ma),tv=l=>l.trim?l.trim():l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function on(l,n,{allOwnKeys:c=!1}={}){if(l===null||typeof l>"u")return;let i,u;if(typeof l!="object"&&(l=[l]),er(l))for(i=0,u=l.length;i<u;i++)n.call(null,l[i],i,l);else{if(rn(l))return;const h=c?Object.getOwnPropertyNames(l):Object.keys(l),x=h.length;let b;for(i=0;i<x;i++)b=h[i],n.call(null,l[b],b,l)}}function lp(l,n){if(rn(l))return null;n=n.toLowerCase();const c=Object.keys(l);let i=c.length,u;for(;i-- >0;)if(u=c[i],n===u.toLowerCase())return u;return null}const ll=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rp=l=>!Zl(l)&&l!==ll;function _d(){const{caseless:l,skipUndefined:n}=rp(this)&&this||{},c={},i=(u,h)=>{const x=l&&lp(c,h)||h;Ti(c[x])&&Ti(u)?c[x]=_d(c[x],u):Ti(u)?c[x]=_d({},u):er(u)?c[x]=u.slice():(!n||!Zl(u))&&(c[x]=u)};for(let u=0,h=arguments.length;u<h;u++)arguments[u]&&on(arguments[u],i);return c}const av=(l,n,c,{allOwnKeys:i}={})=>(on(n,(u,h)=>{c&&ta(u)?l[h]=ep(u,c):l[h]=u},{allOwnKeys:i}),l),sv=l=>(l.charCodeAt(0)===65279&&(l=l.slice(1)),l),lv=(l,n,c,i)=>{l.prototype=Object.create(n.prototype,i),l.prototype.constructor=l,Object.defineProperty(l,"super",{value:n.prototype}),c&&Object.assign(l.prototype,c)},rv=(l,n,c,i)=>{let u,h,x;const b={};if(n=n||{},l==null)return n;do{for(u=Object.getOwnPropertyNames(l),h=u.length;h-- >0;)x=u[h],(!i||i(x,l,n))&&!b[x]&&(n[x]=l[x],b[x]=!0);l=c!==!1&&Bd(l)}while(l&&(!c||c(l,n))&&l!==Object.prototype);return n},nv=(l,n,c)=>{l=String(l),(c===void 0||c>l.length)&&(c=l.length),c-=n.length;const i=l.indexOf(n,c);return i!==-1&&i===c},iv=l=>{if(!l)return null;if(er(l))return l;let n=l.length;if(!sp(n))return null;const c=new Array(n);for(;n-- >0;)c[n]=l[n];return c},ov=(l=>n=>l&&n instanceof l)(typeof Uint8Array<"u"&&Bd(Uint8Array)),cv=(l,n)=>{const i=(l&&l[Hi]).call(l);let u;for(;(u=i.next())&&!u.done;){const h=u.value;n.call(l,h[0],h[1])}},dv=(l,n)=>{let c;const i=[];for(;(c=l.exec(n))!==null;)i.push(c);return i},uv=Ma("HTMLFormElement"),mv=l=>l.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,i,u){return i.toUpperCase()+u}),n0=(({hasOwnProperty:l})=>(n,c)=>l.call(n,c))(Object.prototype),hv=Ma("RegExp"),np=(l,n)=>{const c=Object.getOwnPropertyDescriptors(l),i={};on(c,(u,h)=>{let x;(x=n(u,h,l))!==!1&&(i[h]=x||u)}),Object.defineProperties(l,i)},xv=l=>{np(l,(n,c)=>{if(ta(l)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const i=l[c];if(ta(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},pv=(l,n)=>{const c={},i=u=>{u.forEach(h=>{c[h]=!0})};return er(l)?i(l):i(String(l).split(n)),c},fv=()=>{},gv=(l,n)=>l!=null&&Number.isFinite(l=+l)?l:n;function bv(l){return!!(l&&ta(l.append)&&l[tp]==="FormData"&&l[Hi])}const yv=l=>{const n=new Array(10),c=(i,u)=>{if(nn(i)){if(n.indexOf(i)>=0)return;if(rn(i))return i;if(!("toJSON"in i)){n[u]=i;const h=er(i)?[]:{};return on(i,(x,b)=>{const v=c(x,u+1);!Zl(v)&&(h[b]=v)}),n[u]=void 0,h}}return i};return c(l,0)},vv=Ma("AsyncFunction"),jv=l=>l&&(nn(l)||ta(l))&&ta(l.then)&&ta(l.catch),ip=((l,n)=>l?setImmediate:n?((c,i)=>(ll.addEventListener("message",({source:u,data:h})=>{u===ll&&h===c&&i.length&&i.shift()()},!1),u=>{i.push(u),ll.postMessage(c,"*")}))(`axios@${Math.random()}`,[]):c=>setTimeout(c))(typeof setImmediate=="function",ta(ll.postMessage)),Nv=typeof queueMicrotask<"u"?queueMicrotask.bind(ll):typeof process<"u"&&process.nextTick||ip,wv=l=>l!=null&&ta(l[Hi]),re={isArray:er,isArrayBuffer:ap,isBuffer:rn,isFormData:Xy,isArrayBufferView:Hy,isString:Gy,isNumber:sp,isBoolean:Fy,isObject:nn,isPlainObject:Ti,isEmptyObject:Py,isReadableStream:Ky,isRequest:Jy,isResponse:Wy,isHeaders:ev,isUndefined:Zl,isDate:$y,isFile:Yy,isBlob:Qy,isRegExp:hv,isFunction:ta,isStream:Iy,isURLSearchParams:Zy,isTypedArray:ov,isFileList:Vy,forEach:on,merge:_d,extend:av,trim:tv,stripBOM:sv,inherits:lv,toFlatObject:rv,kindOf:Gi,kindOfTest:Ma,endsWith:nv,toArray:iv,forEachEntry:cv,matchAll:dv,isHTMLForm:uv,hasOwnProperty:n0,hasOwnProp:n0,reduceDescriptors:np,freezeMethods:xv,toObjectSet:pv,toCamelCase:mv,noop:fv,toFiniteNumber:gv,findKey:lp,global:ll,isContextDefined:rp,isSpecCompliantForm:bv,toJSONObject:yv,isAsyncFn:vv,isThenable:jv,setImmediate:ip,asap:Nv,isIterable:wv};function Le(l,n,c,i,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=l,this.name="AxiosError",n&&(this.code=n),c&&(this.config=c),i&&(this.request=i),u&&(this.response=u,this.status=u.status?u.status:null)}re.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.status}}});const op=Le.prototype,cp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(l=>{cp[l]={value:l}});Object.defineProperties(Le,cp);Object.defineProperty(op,"isAxiosError",{value:!0});Le.from=(l,n,c,i,u,h)=>{const x=Object.create(op);re.toFlatObject(l,x,function(g){return g!==Error.prototype},p=>p!=="isAxiosError");const b=l&&l.message?l.message:"Error",v=n==null&&l?l.code:n;return Le.call(x,b,v,c,i,u),l&&x.cause==null&&Object.defineProperty(x,"cause",{value:l,configurable:!0}),x.name=l&&l.name||"Error",h&&Object.assign(x,h),x};const kv=null;function Cd(l){return re.isPlainObject(l)||re.isArray(l)}function dp(l){return re.endsWith(l,"[]")?l.slice(0,-2):l}function i0(l,n,c){return l?l.concat(n).map(function(u,h){return u=dp(u),!c&&h?"["+u+"]":u}).join(c?".":""):n}function Sv(l){return re.isArray(l)&&!l.some(Cd)}const _v=re.toFlatObject(re,{},null,function(n){return/^is[A-Z]/.test(n)});function Pi(l,n,c){if(!re.isObject(l))throw new TypeError("target must be an object");n=n||new FormData,c=re.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,j){return!re.isUndefined(j[C])});const i=c.metaTokens,u=c.visitor||g,h=c.dots,x=c.indexes,v=(c.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(n);if(!re.isFunction(u))throw new TypeError("visitor must be a function");function p(N){if(N===null)return"";if(re.isDate(N))return N.toISOString();if(re.isBoolean(N))return N.toString();if(!v&&re.isBlob(N))throw new Le("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(N)||re.isTypedArray(N)?v&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function g(N,C,j){let T=N;if(N&&!j&&typeof N=="object"){if(re.endsWith(C,"{}"))C=i?C:C.slice(0,-2),N=JSON.stringify(N);else if(re.isArray(N)&&Sv(N)||(re.isFileList(N)||re.endsWith(C,"[]"))&&(T=re.toArray(N)))return C=dp(C),T.forEach(function(M,O){!(re.isUndefined(M)||M===null)&&n.append(x===!0?i0([C],O,h):x===null?C:C+"[]",p(M))}),!1}return Cd(N)?!0:(n.append(i0(j,C,h),p(N)),!1)}const f=[],k=Object.assign(_v,{defaultVisitor:g,convertValue:p,isVisitable:Cd});function w(N,C){if(!re.isUndefined(N)){if(f.indexOf(N)!==-1)throw Error("Circular reference detected in "+C.join("."));f.push(N),re.forEach(N,function(T,S){(!(re.isUndefined(T)||T===null)&&u.call(n,T,re.isString(S)?S.trim():S,C,k))===!0&&w(T,C?C.concat(S):[S])}),f.pop()}}if(!re.isObject(l))throw new TypeError("data must be an object");return w(l),n}function o0(l){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(l).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function Hd(l,n){this._pairs=[],l&&Pi(l,this,n)}const up=Hd.prototype;up.append=function(n,c){this._pairs.push([n,c])};up.toString=function(n){const c=n?function(i){return n.call(this,i,o0)}:o0;return this._pairs.map(function(u){return c(u[0])+"="+c(u[1])},"").join("&")};function Cv(l){return encodeURIComponent(l).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mp(l,n,c){if(!n)return l;const i=c&&c.encode||Cv;re.isFunction(c)&&(c={serialize:c});const u=c&&c.serialize;let h;if(u?h=u(n,c):h=re.isURLSearchParams(n)?n.toString():new Hd(n,c).toString(i),h){const x=l.indexOf("#");x!==-1&&(l=l.slice(0,x)),l+=(l.indexOf("?")===-1?"?":"&")+h}return l}class c0{constructor(){this.handlers=[]}use(n,c,i){return this.handlers.push({fulfilled:n,rejected:c,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){re.forEach(this.handlers,function(i){i!==null&&n(i)})}}const hp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ev=typeof URLSearchParams<"u"?URLSearchParams:Hd,Av=typeof FormData<"u"?FormData:null,Tv=typeof Blob<"u"?Blob:null,Dv={isBrowser:!0,classes:{URLSearchParams:Ev,FormData:Av,Blob:Tv},protocols:["http","https","file","blob","url","data"]},Gd=typeof window<"u"&&typeof document<"u",Ed=typeof navigator=="object"&&navigator||void 0,Rv=Gd&&(!Ed||["ReactNative","NativeScript","NS"].indexOf(Ed.product)<0),Mv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zv=Gd&&window.location.href||"http://localhost",Ov=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gd,hasStandardBrowserEnv:Rv,hasStandardBrowserWebWorkerEnv:Mv,navigator:Ed,origin:zv},Symbol.toStringTag,{value:"Module"})),Gt={...Ov,...Dv};function Lv(l,n){return Pi(l,new Gt.classes.URLSearchParams,{visitor:function(c,i,u,h){return Gt.isNode&&re.isBuffer(c)?(this.append(i,c.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...n})}function Uv(l){return re.matchAll(/\w+|\[(\w*)]/g,l).map(n=>n[0]==="[]"?"":n[1]||n[0])}function qv(l){const n={},c=Object.keys(l);let i;const u=c.length;let h;for(i=0;i<u;i++)h=c[i],n[h]=l[h];return n}function xp(l){function n(c,i,u,h){let x=c[h++];if(x==="__proto__")return!0;const b=Number.isFinite(+x),v=h>=c.length;return x=!x&&re.isArray(u)?u.length:x,v?(re.hasOwnProp(u,x)?u[x]=[u[x],i]:u[x]=i,!b):((!u[x]||!re.isObject(u[x]))&&(u[x]=[]),n(c,i,u[x],h)&&re.isArray(u[x])&&(u[x]=qv(u[x])),!b)}if(re.isFormData(l)&&re.isFunction(l.entries)){const c={};return re.forEachEntry(l,(i,u)=>{n(Uv(i),u,c,0)}),c}return null}function Bv(l,n,c){if(re.isString(l))try{return(n||JSON.parse)(l),re.trim(l)}catch(i){if(i.name!=="SyntaxError")throw i}return(c||JSON.stringify)(l)}const cn={transitional:hp,adapter:["xhr","http","fetch"],transformRequest:[function(n,c){const i=c.getContentType()||"",u=i.indexOf("application/json")>-1,h=re.isObject(n);if(h&&re.isHTMLForm(n)&&(n=new FormData(n)),re.isFormData(n))return u?JSON.stringify(xp(n)):n;if(re.isArrayBuffer(n)||re.isBuffer(n)||re.isStream(n)||re.isFile(n)||re.isBlob(n)||re.isReadableStream(n))return n;if(re.isArrayBufferView(n))return n.buffer;if(re.isURLSearchParams(n))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let b;if(h){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Lv(n,this.formSerializer).toString();if((b=re.isFileList(n))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Pi(b?{"files[]":n}:n,v&&new v,this.formSerializer)}}return h||u?(c.setContentType("application/json",!1),Bv(n)):n}],transformResponse:[function(n){const c=this.transitional||cn.transitional,i=c&&c.forcedJSONParsing,u=this.responseType==="json";if(re.isResponse(n)||re.isReadableStream(n))return n;if(n&&re.isString(n)&&(i&&!this.responseType||u)){const x=!(c&&c.silentJSONParsing)&&u;try{return JSON.parse(n,this.parseReviver)}catch(b){if(x)throw b.name==="SyntaxError"?Le.from(b,Le.ERR_BAD_RESPONSE,this,null,this.response):b}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],l=>{cn.headers[l]={}});const Hv=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gv=l=>{const n={};let c,i,u;return l&&l.split(`
`).forEach(function(x){u=x.indexOf(":"),c=x.substring(0,u).trim().toLowerCase(),i=x.substring(u+1).trim(),!(!c||n[c]&&Hv[c])&&(c==="set-cookie"?n[c]?n[c].push(i):n[c]=[i]:n[c]=n[c]?n[c]+", "+i:i)}),n},d0=Symbol("internals");function Xr(l){return l&&String(l).trim().toLowerCase()}function Di(l){return l===!1||l==null?l:re.isArray(l)?l.map(Di):String(l)}function Fv(l){const n=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=c.exec(l);)n[i[1]]=i[2];return n}const Pv=l=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(l.trim());function pd(l,n,c,i,u){if(re.isFunction(i))return i.call(this,n,c);if(u&&(n=c),!!re.isString(n)){if(re.isString(i))return n.indexOf(i)!==-1;if(re.isRegExp(i))return i.test(n)}}function $v(l){return l.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,c,i)=>c.toUpperCase()+i)}function Yv(l,n){const c=re.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(l,i+c,{value:function(u,h,x){return this[i].call(this,n,u,h,x)},configurable:!0})})}let aa=class{constructor(n){n&&this.set(n)}set(n,c,i){const u=this;function h(b,v,p){const g=Xr(v);if(!g)throw new Error("header name must be a non-empty string");const f=re.findKey(u,g);(!f||u[f]===void 0||p===!0||p===void 0&&u[f]!==!1)&&(u[f||v]=Di(b))}const x=(b,v)=>re.forEach(b,(p,g)=>h(p,g,v));if(re.isPlainObject(n)||n instanceof this.constructor)x(n,c);else if(re.isString(n)&&(n=n.trim())&&!Pv(n))x(Gv(n),c);else if(re.isObject(n)&&re.isIterable(n)){let b={},v,p;for(const g of n){if(!re.isArray(g))throw TypeError("Object iterator must return a key-value pair");b[p=g[0]]=(v=b[p])?re.isArray(v)?[...v,g[1]]:[v,g[1]]:g[1]}x(b,c)}else n!=null&&h(c,n,i);return this}get(n,c){if(n=Xr(n),n){const i=re.findKey(this,n);if(i){const u=this[i];if(!c)return u;if(c===!0)return Fv(u);if(re.isFunction(c))return c.call(this,u,i);if(re.isRegExp(c))return c.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,c){if(n=Xr(n),n){const i=re.findKey(this,n);return!!(i&&this[i]!==void 0&&(!c||pd(this,this[i],i,c)))}return!1}delete(n,c){const i=this;let u=!1;function h(x){if(x=Xr(x),x){const b=re.findKey(i,x);b&&(!c||pd(i,i[b],b,c))&&(delete i[b],u=!0)}}return re.isArray(n)?n.forEach(h):h(n),u}clear(n){const c=Object.keys(this);let i=c.length,u=!1;for(;i--;){const h=c[i];(!n||pd(this,this[h],h,n,!0))&&(delete this[h],u=!0)}return u}normalize(n){const c=this,i={};return re.forEach(this,(u,h)=>{const x=re.findKey(i,h);if(x){c[x]=Di(u),delete c[h];return}const b=n?$v(h):String(h).trim();b!==h&&delete c[h],c[b]=Di(u),i[b]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const c=Object.create(null);return re.forEach(this,(i,u)=>{i!=null&&i!==!1&&(c[u]=n&&re.isArray(i)?i.join(", "):i)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,c])=>n+": "+c).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...c){const i=new this(n);return c.forEach(u=>i.set(u)),i}static accessor(n){const i=(this[d0]=this[d0]={accessors:{}}).accessors,u=this.prototype;function h(x){const b=Xr(x);i[b]||(Yv(u,x),i[b]=!0)}return re.isArray(n)?n.forEach(h):h(n),this}};aa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(aa.prototype,({value:l},n)=>{let c=n[0].toUpperCase()+n.slice(1);return{get:()=>l,set(i){this[c]=i}}});re.freezeMethods(aa);function fd(l,n){const c=this||cn,i=n||c,u=aa.from(i.headers);let h=i.data;return re.forEach(l,function(b){h=b.call(c,h,u.normalize(),n?n.status:void 0)}),u.normalize(),h}function pp(l){return!!(l&&l.__CANCEL__)}function tr(l,n,c){Le.call(this,l??"canceled",Le.ERR_CANCELED,n,c),this.name="CanceledError"}re.inherits(tr,Le,{__CANCEL__:!0});function fp(l,n,c){const i=c.config.validateStatus;!c.status||!i||i(c.status)?l(c):n(new Le("Request failed with status code "+c.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function Qv(l){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l);return n&&n[1]||""}function Vv(l,n){l=l||10;const c=new Array(l),i=new Array(l);let u=0,h=0,x;return n=n!==void 0?n:1e3,function(v){const p=Date.now(),g=i[h];x||(x=p),c[u]=v,i[u]=p;let f=h,k=0;for(;f!==u;)k+=c[f++],f=f%l;if(u=(u+1)%l,u===h&&(h=(h+1)%l),p-x<n)return;const w=g&&p-g;return w?Math.round(k*1e3/w):void 0}}function Iv(l,n){let c=0,i=1e3/n,u,h;const x=(p,g=Date.now())=>{c=g,u=null,h&&(clearTimeout(h),h=null),l(...p)};return[(...p)=>{const g=Date.now(),f=g-c;f>=i?x(p,g):(u=p,h||(h=setTimeout(()=>{h=null,x(u)},i-f)))},()=>u&&x(u)]}const Oi=(l,n,c=3)=>{let i=0;const u=Vv(50,250);return Iv(h=>{const x=h.loaded,b=h.lengthComputable?h.total:void 0,v=x-i,p=u(v),g=x<=b;i=x;const f={loaded:x,total:b,progress:b?x/b:void 0,bytes:v,rate:p||void 0,estimated:p&&b&&g?(b-x)/p:void 0,event:h,lengthComputable:b!=null,[n?"download":"upload"]:!0};l(f)},c)},u0=(l,n)=>{const c=l!=null;return[i=>n[0]({lengthComputable:c,total:l,loaded:i}),n[1]]},m0=l=>(...n)=>re.asap(()=>l(...n)),Xv=Gt.hasStandardBrowserEnv?((l,n)=>c=>(c=new URL(c,Gt.origin),l.protocol===c.protocol&&l.host===c.host&&(n||l.port===c.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,Zv=Gt.hasStandardBrowserEnv?{write(l,n,c,i,u,h,x){if(typeof document>"u")return;const b=[`${l}=${encodeURIComponent(n)}`];re.isNumber(c)&&b.push(`expires=${new Date(c).toUTCString()}`),re.isString(i)&&b.push(`path=${i}`),re.isString(u)&&b.push(`domain=${u}`),h===!0&&b.push("secure"),re.isString(x)&&b.push(`SameSite=${x}`),document.cookie=b.join("; ")},read(l){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+l+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(l){this.write(l,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Kv(l){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}function Jv(l,n){return n?l.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):l}function gp(l,n,c){let i=!Kv(n);return l&&(i||c==!1)?Jv(l,n):n}const h0=l=>l instanceof aa?{...l}:l;function il(l,n){n=n||{};const c={};function i(p,g,f,k){return re.isPlainObject(p)&&re.isPlainObject(g)?re.merge.call({caseless:k},p,g):re.isPlainObject(g)?re.merge({},g):re.isArray(g)?g.slice():g}function u(p,g,f,k){if(re.isUndefined(g)){if(!re.isUndefined(p))return i(void 0,p,f,k)}else return i(p,g,f,k)}function h(p,g){if(!re.isUndefined(g))return i(void 0,g)}function x(p,g){if(re.isUndefined(g)){if(!re.isUndefined(p))return i(void 0,p)}else return i(void 0,g)}function b(p,g,f){if(f in n)return i(p,g);if(f in l)return i(void 0,p)}const v={url:h,method:h,data:h,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,withXSRFToken:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:b,headers:(p,g,f)=>u(h0(p),h0(g),f,!0)};return re.forEach(Object.keys({...l,...n}),function(g){const f=v[g]||u,k=f(l[g],n[g],g);re.isUndefined(k)&&f!==b||(c[g]=k)}),c}const bp=l=>{const n=il({},l);let{data:c,withXSRFToken:i,xsrfHeaderName:u,xsrfCookieName:h,headers:x,auth:b}=n;if(n.headers=x=aa.from(x),n.url=mp(gp(n.baseURL,n.url,n.allowAbsoluteUrls),l.params,l.paramsSerializer),b&&x.set("Authorization","Basic "+btoa((b.username||"")+":"+(b.password?unescape(encodeURIComponent(b.password)):""))),re.isFormData(c)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)x.setContentType(void 0);else if(re.isFunction(c.getHeaders)){const v=c.getHeaders(),p=["content-type","content-length"];Object.entries(v).forEach(([g,f])=>{p.includes(g.toLowerCase())&&x.set(g,f)})}}if(Gt.hasStandardBrowserEnv&&(i&&re.isFunction(i)&&(i=i(n)),i||i!==!1&&Xv(n.url))){const v=u&&h&&Zv.read(h);v&&x.set(u,v)}return n},Wv=typeof XMLHttpRequest<"u",ej=Wv&&function(l){return new Promise(function(c,i){const u=bp(l);let h=u.data;const x=aa.from(u.headers).normalize();let{responseType:b,onUploadProgress:v,onDownloadProgress:p}=u,g,f,k,w,N;function C(){w&&w(),N&&N(),u.cancelToken&&u.cancelToken.unsubscribe(g),u.signal&&u.signal.removeEventListener("abort",g)}let j=new XMLHttpRequest;j.open(u.method.toUpperCase(),u.url,!0),j.timeout=u.timeout;function T(){if(!j)return;const M=aa.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),R={data:!b||b==="text"||b==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:M,config:l,request:j};fp(function(q){c(q),C()},function(q){i(q),C()},R),j=null}"onloadend"in j?j.onloadend=T:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(T)},j.onabort=function(){j&&(i(new Le("Request aborted",Le.ECONNABORTED,l,j)),j=null)},j.onerror=function(O){const R=O&&O.message?O.message:"Network Error",G=new Le(R,Le.ERR_NETWORK,l,j);G.event=O||null,i(G),j=null},j.ontimeout=function(){let O=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const R=u.transitional||hp;u.timeoutErrorMessage&&(O=u.timeoutErrorMessage),i(new Le(O,R.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,l,j)),j=null},h===void 0&&x.setContentType(null),"setRequestHeader"in j&&re.forEach(x.toJSON(),function(O,R){j.setRequestHeader(R,O)}),re.isUndefined(u.withCredentials)||(j.withCredentials=!!u.withCredentials),b&&b!=="json"&&(j.responseType=u.responseType),p&&([k,N]=Oi(p,!0),j.addEventListener("progress",k)),v&&j.upload&&([f,w]=Oi(v),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",w)),(u.cancelToken||u.signal)&&(g=M=>{j&&(i(!M||M.type?new tr(null,l,j):M),j.abort(),j=null)},u.cancelToken&&u.cancelToken.subscribe(g),u.signal&&(u.signal.aborted?g():u.signal.addEventListener("abort",g)));const S=Qv(u.url);if(S&&Gt.protocols.indexOf(S)===-1){i(new Le("Unsupported protocol "+S+":",Le.ERR_BAD_REQUEST,l));return}j.send(h||null)})},tj=(l,n)=>{const{length:c}=l=l?l.filter(Boolean):[];if(n||c){let i=new AbortController,u;const h=function(p){if(!u){u=!0,b();const g=p instanceof Error?p:this.reason;i.abort(g instanceof Le?g:new tr(g instanceof Error?g.message:g))}};let x=n&&setTimeout(()=>{x=null,h(new Le(`timeout ${n} of ms exceeded`,Le.ETIMEDOUT))},n);const b=()=>{l&&(x&&clearTimeout(x),x=null,l.forEach(p=>{p.unsubscribe?p.unsubscribe(h):p.removeEventListener("abort",h)}),l=null)};l.forEach(p=>p.addEventListener("abort",h));const{signal:v}=i;return v.unsubscribe=()=>re.asap(b),v}},aj=function*(l,n){let c=l.byteLength;if(c<n){yield l;return}let i=0,u;for(;i<c;)u=i+n,yield l.slice(i,u),i=u},sj=async function*(l,n){for await(const c of lj(l))yield*aj(c,n)},lj=async function*(l){if(l[Symbol.asyncIterator]){yield*l;return}const n=l.getReader();try{for(;;){const{done:c,value:i}=await n.read();if(c)break;yield i}}finally{await n.cancel()}},x0=(l,n,c,i)=>{const u=sj(l,n);let h=0,x,b=v=>{x||(x=!0,i&&i(v))};return new ReadableStream({async pull(v){try{const{done:p,value:g}=await u.next();if(p){b(),v.close();return}let f=g.byteLength;if(c){let k=h+=f;c(k)}v.enqueue(new Uint8Array(g))}catch(p){throw b(p),p}},cancel(v){return b(v),u.return()}},{highWaterMark:2})},p0=64*1024,{isFunction:ki}=re,rj=(({Request:l,Response:n})=>({Request:l,Response:n}))(re.global),{ReadableStream:f0,TextEncoder:g0}=re.global,b0=(l,...n)=>{try{return!!l(...n)}catch{return!1}},nj=l=>{l=re.merge.call({skipUndefined:!0},rj,l);const{fetch:n,Request:c,Response:i}=l,u=n?ki(n):typeof fetch=="function",h=ki(c),x=ki(i);if(!u)return!1;const b=u&&ki(f0),v=u&&(typeof g0=="function"?(N=>C=>N.encode(C))(new g0):async N=>new Uint8Array(await new c(N).arrayBuffer())),p=h&&b&&b0(()=>{let N=!1;const C=new c(Gt.origin,{body:new f0,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!C}),g=x&&b&&b0(()=>re.isReadableStream(new i("").body)),f={stream:g&&(N=>N.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!f[N]&&(f[N]=(C,j)=>{let T=C&&C[N];if(T)return T.call(C);throw new Le(`Response type '${N}' is not supported`,Le.ERR_NOT_SUPPORT,j)})});const k=async N=>{if(N==null)return 0;if(re.isBlob(N))return N.size;if(re.isSpecCompliantForm(N))return(await new c(Gt.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(re.isArrayBufferView(N)||re.isArrayBuffer(N))return N.byteLength;if(re.isURLSearchParams(N)&&(N=N+""),re.isString(N))return(await v(N)).byteLength},w=async(N,C)=>{const j=re.toFiniteNumber(N.getContentLength());return j??k(C)};return async N=>{let{url:C,method:j,data:T,signal:S,cancelToken:M,timeout:O,onDownloadProgress:R,onUploadProgress:G,responseType:q,headers:ce,withCredentials:F="same-origin",fetchOptions:ue}=bp(N),be=n||fetch;q=q?(q+"").toLowerCase():"text";let D=tj([S,M&&M.toAbortSignal()],O),V=null;const ee=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let Y;try{if(G&&p&&j!=="get"&&j!=="head"&&(Y=await w(ce,T))!==0){let E=new c(C,{method:"POST",body:T,duplex:"half"}),L;if(re.isFormData(T)&&(L=E.headers.get("content-type"))&&ce.setContentType(L),E.body){const[_,H]=u0(Y,Oi(m0(G)));T=x0(E.body,p0,_,H)}}re.isString(F)||(F=F?"include":"omit");const U=h&&"credentials"in c.prototype,se={...ue,signal:D,method:j.toUpperCase(),headers:ce.normalize().toJSON(),body:T,duplex:"half",credentials:U?F:void 0};V=h&&new c(C,se);let Z=await(h?be(V,ue):be(C,se));const P=g&&(q==="stream"||q==="response");if(g&&(R||P&&ee)){const E={};["status","statusText","headers"].forEach($=>{E[$]=Z[$]});const L=re.toFiniteNumber(Z.headers.get("content-length")),[_,H]=R&&u0(L,Oi(m0(R),!0))||[];Z=new i(x0(Z.body,p0,_,()=>{H&&H(),ee&&ee()}),E)}q=q||"text";let I=await f[re.findKey(f,q)||"text"](Z,N);return!P&&ee&&ee(),await new Promise((E,L)=>{fp(E,L,{data:I,headers:aa.from(Z.headers),status:Z.status,statusText:Z.statusText,config:N,request:V})})}catch(U){throw ee&&ee(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,N,V),{cause:U.cause||U}):Le.from(U,U&&U.code,N,V)}}},ij=new Map,yp=l=>{let n=l&&l.env||{};const{fetch:c,Request:i,Response:u}=n,h=[i,u,c];let x=h.length,b=x,v,p,g=ij;for(;b--;)v=h[b],p=g.get(v),p===void 0&&g.set(v,p=b?new Map:nj(n)),g=p;return p};yp();const Fd={http:kv,xhr:ej,fetch:{get:yp}};re.forEach(Fd,(l,n)=>{if(l){try{Object.defineProperty(l,"name",{value:n})}catch{}Object.defineProperty(l,"adapterName",{value:n})}});const y0=l=>`- ${l}`,oj=l=>re.isFunction(l)||l===null||l===!1;function cj(l,n){l=re.isArray(l)?l:[l];const{length:c}=l;let i,u;const h={};for(let x=0;x<c;x++){i=l[x];let b;if(u=i,!oj(i)&&(u=Fd[(b=String(i)).toLowerCase()],u===void 0))throw new Le(`Unknown adapter '${b}'`);if(u&&(re.isFunction(u)||(u=u.get(n))))break;h[b||"#"+x]=u}if(!u){const x=Object.entries(h).map(([v,p])=>`adapter ${v} `+(p===!1?"is not supported by the environment":"is not available in the build"));let b=c?x.length>1?`since :
`+x.map(y0).join(`
`):" "+y0(x[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+b,"ERR_NOT_SUPPORT")}return u}const vp={getAdapter:cj,adapters:Fd};function gd(l){if(l.cancelToken&&l.cancelToken.throwIfRequested(),l.signal&&l.signal.aborted)throw new tr(null,l)}function v0(l){return gd(l),l.headers=aa.from(l.headers),l.data=fd.call(l,l.transformRequest),["post","put","patch"].indexOf(l.method)!==-1&&l.headers.setContentType("application/x-www-form-urlencoded",!1),vp.getAdapter(l.adapter||cn.adapter,l)(l).then(function(i){return gd(l),i.data=fd.call(l,l.transformResponse,i),i.headers=aa.from(i.headers),i},function(i){return pp(i)||(gd(l),i&&i.response&&(i.response.data=fd.call(l,l.transformResponse,i.response),i.response.headers=aa.from(i.response.headers))),Promise.reject(i)})}const jp="1.13.2",$i={};["object","boolean","number","function","string","symbol"].forEach((l,n)=>{$i[l]=function(i){return typeof i===l||"a"+(n<1?"n ":" ")+l}});const j0={};$i.transitional=function(n,c,i){function u(h,x){return"[Axios v"+jp+"] Transitional option '"+h+"'"+x+(i?". "+i:"")}return(h,x,b)=>{if(n===!1)throw new Le(u(x," has been removed"+(c?" in "+c:"")),Le.ERR_DEPRECATED);return c&&!j0[x]&&(j0[x]=!0,console.warn(u(x," has been deprecated since v"+c+" and will be removed in the near future"))),n?n(h,x,b):!0}};$i.spelling=function(n){return(c,i)=>(console.warn(`${i} is likely a misspelling of ${n}`),!0)};function dj(l,n,c){if(typeof l!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const i=Object.keys(l);let u=i.length;for(;u-- >0;){const h=i[u],x=n[h];if(x){const b=l[h],v=b===void 0||x(b,h,l);if(v!==!0)throw new Le("option "+h+" must be "+v,Le.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Le("Unknown option "+h,Le.ERR_BAD_OPTION)}}const Ri={assertOptions:dj,validators:$i},Ba=Ri.validators;let nl=class{constructor(n){this.defaults=n||{},this.interceptors={request:new c0,response:new c0}}async request(n,c){try{return await this._request(n,c)}catch(i){if(i instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const h=u.stack?u.stack.replace(/^.+\n/,""):"";try{i.stack?h&&!String(i.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+h):i.stack=h}catch{}}throw i}}_request(n,c){typeof n=="string"?(c=c||{},c.url=n):c=n||{},c=il(this.defaults,c);const{transitional:i,paramsSerializer:u,headers:h}=c;i!==void 0&&Ri.assertOptions(i,{silentJSONParsing:Ba.transitional(Ba.boolean),forcedJSONParsing:Ba.transitional(Ba.boolean),clarifyTimeoutError:Ba.transitional(Ba.boolean)},!1),u!=null&&(re.isFunction(u)?c.paramsSerializer={serialize:u}:Ri.assertOptions(u,{encode:Ba.function,serialize:Ba.function},!0)),c.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?c.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:c.allowAbsoluteUrls=!0),Ri.assertOptions(c,{baseUrl:Ba.spelling("baseURL"),withXsrfToken:Ba.spelling("withXSRFToken")},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let x=h&&re.merge(h.common,h[c.method]);h&&re.forEach(["delete","get","head","post","put","patch","common"],N=>{delete h[N]}),c.headers=aa.concat(x,h);const b=[];let v=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(c)===!1||(v=v&&C.synchronous,b.unshift(C.fulfilled,C.rejected))});const p=[];this.interceptors.response.forEach(function(C){p.push(C.fulfilled,C.rejected)});let g,f=0,k;if(!v){const N=[v0.bind(this),void 0];for(N.unshift(...b),N.push(...p),k=N.length,g=Promise.resolve(c);f<k;)g=g.then(N[f++],N[f++]);return g}k=b.length;let w=c;for(;f<k;){const N=b[f++],C=b[f++];try{w=N(w)}catch(j){C.call(this,j);break}}try{g=v0.call(this,w)}catch(N){return Promise.reject(N)}for(f=0,k=p.length;f<k;)g=g.then(p[f++],p[f++]);return g}getUri(n){n=il(this.defaults,n);const c=gp(n.baseURL,n.url,n.allowAbsoluteUrls);return mp(c,n.params,n.paramsSerializer)}};re.forEach(["delete","get","head","options"],function(n){nl.prototype[n]=function(c,i){return this.request(il(i||{},{method:n,url:c,data:(i||{}).data}))}});re.forEach(["post","put","patch"],function(n){function c(i){return function(h,x,b){return this.request(il(b||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:h,data:x}))}}nl.prototype[n]=c(),nl.prototype[n+"Form"]=c(!0)});let uj=class Np{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(h){c=h});const i=this;this.promise.then(u=>{if(!i._listeners)return;let h=i._listeners.length;for(;h-- >0;)i._listeners[h](u);i._listeners=null}),this.promise.then=u=>{let h;const x=new Promise(b=>{i.subscribe(b),h=b}).then(u);return x.cancel=function(){i.unsubscribe(h)},x},n(function(h,x,b){i.reason||(i.reason=new tr(h,x,b),c(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const c=this._listeners.indexOf(n);c!==-1&&this._listeners.splice(c,1)}toAbortSignal(){const n=new AbortController,c=i=>{n.abort(i)};return this.subscribe(c),n.signal.unsubscribe=()=>this.unsubscribe(c),n.signal}static source(){let n;return{token:new Np(function(u){n=u}),cancel:n}}};function mj(l){return function(c){return l.apply(null,c)}}function hj(l){return re.isObject(l)&&l.isAxiosError===!0}const Ad={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ad).forEach(([l,n])=>{Ad[n]=l});function wp(l){const n=new nl(l),c=ep(nl.prototype.request,n);return re.extend(c,nl.prototype,n,{allOwnKeys:!0}),re.extend(c,n,null,{allOwnKeys:!0}),c.create=function(u){return wp(il(l,u))},c}const gt=wp(cn);gt.Axios=nl;gt.CanceledError=tr;gt.CancelToken=uj;gt.isCancel=pp;gt.VERSION=jp;gt.toFormData=Pi;gt.AxiosError=Le;gt.Cancel=gt.CanceledError;gt.all=function(n){return Promise.all(n)};gt.spread=mj;gt.isAxiosError=hj;gt.mergeConfig=il;gt.AxiosHeaders=aa;gt.formToJSON=l=>xp(re.isHTMLForm(l)?new FormData(l):l);gt.getAdapter=vp.getAdapter;gt.HttpStatusCode=Ad;gt.default=gt;const{Axios:FN,AxiosError:PN,CanceledError:$N,isCancel:YN,CancelToken:QN,VERSION:VN,all:IN,Cancel:XN,isAxiosError:ZN,spread:KN,toFormData:JN,AxiosHeaders:WN,HttpStatusCode:ew,formToJSON:tw,getAdapter:aw,mergeConfig:sw}=gt,xj="http://localhost:8000/api/v1",K=gt.create({baseURL:xj,headers:{"Content-Type":"application/json"}});K.interceptors.request.use(l=>{const n=localStorage.getItem("access_token");return n&&(l.headers.Authorization=`Bearer ${n}`),l},l=>Promise.reject(l));K.interceptors.response.use(l=>l,async l=>{const n=l.config;if(l.response?.status===401&&!n._retry&&!n.url?.includes("/auth/login")){n._retry=!0;try{const c=localStorage.getItem("refresh_token");if(c){const i=await gt.post("/api/v1/auth/refresh",{refresh_token:c}),{access_token:u}=i.data;return localStorage.setItem("access_token",u),n.headers.Authorization=`Bearer ${u}`,K(n)}}catch(c){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.pathname.includes("/login")||(window.location.href="/login?expired=true"),Promise.reject(c)}return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.pathname.includes("/login")||(window.location.href="/login?expired=true"),Promise.reject(l)}return Promise.reject(l)});const kp={login:(l,n)=>{const c=new URLSearchParams;return c.append("username",l),c.append("password",n),K.post("/auth/login",c,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},logout:()=>K.post("/auth/logout"),refreshToken:l=>K.post("/auth/refresh",{refresh_token:l}),me:()=>K.get("/auth/me")},Il={list:l=>K.get("/users",{params:l}),get:l=>K.get(`/users/${l}`),create:l=>K.post("/users",l),update:(l,n)=>K.put(`/users/${l}`,n),delete:l=>K.delete(`/users/${l}`),getStats:()=>K.get("/users/stats")},Dt={list:l=>K.get("/warehouses",{params:l}),get:l=>K.get(`/warehouses/${l}`),create:l=>K.post("/warehouses",l),update:(l,n)=>K.put(`/warehouses/${l}`,n),delete:l=>K.delete(`/warehouses/${l}`),getShops:l=>K.get(`/warehouses/${l}/shops`),getStock:(l,n)=>K.get(`/warehouses/${l}/stock`,{params:n})},_t={list:l=>K.get("/shops",{params:l}),get:l=>K.get(`/shops/${l}`),create:l=>K.post("/shops",l),update:(l,n)=>K.put(`/shops/${l}`,n),delete:l=>K.delete(`/shops/${l}`),getStats:()=>K.get("/shops/stats"),getStock:(l,n)=>K.get(`/shops/${l}/stock`,{params:n})},Rt={list:l=>K.get("/medicines",{params:l}),get:l=>K.get(`/medicines/${l}`),create:l=>K.post("/medicines",l),update:(l,n)=>K.put(`/medicines/${l}`,n),delete:l=>K.delete(`/medicines/${l}`),getBatches:l=>K.get(`/medicines/${l}/batches`),createBatch:(l,n)=>K.post(`/medicines/${l}/batches`,n)},dn={getMovements:l=>K.get("/stock/movements",{params:l}),stockEntry:l=>K.post("/stock/entry",l),adjustStock:l=>K.post("/stock/adjust",l),getAlerts:l=>K.get("/stock/alerts",{params:l})},rl={list:l=>K.get("/purchase-requests",{params:l}),get:l=>K.get(`/purchase-requests/${l}`),create:l=>K.post("/purchase-requests",l),approve:(l,n)=>K.put(`/purchase-requests/${l}/approve`,n),reject:l=>K.put(`/purchase-requests/${l}/reject`)},ns={list:l=>K.get("/dispatches",{params:l}),get:l=>K.get(`/dispatches/${l}`),create:l=>K.post("/dispatches",l),updateStatus:(l,n,c)=>K.put(`/dispatches/${l}/status`,{status:n,...c})},is={list:l=>K.get("/invoices",{params:l}),get:l=>K.get(`/invoices/${l}`),create:l=>K.post("/invoices",l),getItems:l=>K.get(`/invoices/${l}/items`),getReturns:l=>K.get("/invoices/returns",{params:l}),processReturn:(l,n)=>K.post(`/invoices/${l}/returns`,n)},Xl={list:l=>K.get("/customers",{params:l}),get:l=>K.get(`/customers/${l}`),create:l=>K.post("/customers",l),update:(l,n)=>K.put(`/customers/${l}`,n),getFollowups:l=>K.get(`/customers/${l}/followups`),createFollowup:(l,n)=>K.post(`/customers/${l}/followups`,n)},Sa={list:l=>K.get("/employees",{params:l}),get:l=>K.get(`/employees/${l}`),create:l=>K.post("/employees",l),update:(l,n)=>K.put(`/employees/${l}`,n),delete:l=>K.delete(`/employees/${l}`),markAttendance:l=>K.post("/employees/attendance",l),getDailyAttendance:(l,n)=>K.get("/employees/attendance/daily",{params:{date:l,...n}}),getAttendance:(l,n)=>K.get(`/employees/attendance/${l}`,{params:n}),submitAttendance:l=>K.post("/employees/attendance/submit",l),lockAttendance:l=>K.post("/employees/attendance/lock",l),unlockAttendance:l=>K.post("/employees/attendance/unlock",l),getSalaryRecords:l=>K.get("/employees/salary",{params:l}),processSalary:l=>K.post("/employees/salary/process",l)},Us={getSales:l=>K.get("/reports/sales",{params:l}),getDailySales:l=>K.get("/reports/sales/daily",{params:l}),getMonthlySales:l=>K.get("/reports/sales/monthly",{params:l}),getInventory:l=>K.get("/reports/inventory",{params:l}),getProfitLoss:l=>K.get("/reports/profit-loss",{params:l}),getExpiry:l=>K.get("/reports/expiry",{params:l})},Si={list:l=>K.get("/notifications",{params:l}),markRead:l=>K.put(`/notifications/${l}/read`),markAllRead:()=>K.put("/notifications/read-all"),delete:l=>K.delete(`/notifications/${l}`)},Li={get:()=>K.get("/settings"),update:l=>K.put("/settings",l),getTax:()=>K.get("/settings/tax"),updateTax:l=>K.put("/settings/tax",l),getTaxSummary:l=>K.get("/settings/tax/summary",{params:l}),getGstReport:l=>K.get("/settings/tax/gst",{params:l})},Wr={list:l=>K.get("/roles",{params:l}),listAssignable:()=>K.get("/roles/assignable"),get:l=>K.get(`/roles/${l}`),create:l=>K.post("/roles",l),update:(l,n)=>K.put(`/roles/${l}`,n),delete:l=>K.delete(`/roles/${l}`),addPermission:(l,n)=>K.post(`/roles/${l}/permissions/${n}`),removePermission:(l,n)=>K.delete(`/roles/${l}/permissions/${n}`),assignToUser:(l,n)=>K.post(`/roles/${l}/users/${n}`),removeFromUser:(l,n)=>K.delete(`/roles/${l}/users/${n}`)},pj={list:l=>K.get("/permissions",{params:l}),getModules:()=>K.get("/permissions/modules"),getMy:()=>K.get("/permissions/my"),get:l=>K.get(`/permissions/${l}`),create:l=>K.post("/permissions",l),delete:l=>K.delete(`/permissions/${l}`)},N0={getSummary:l=>K.get("/tax/summary",{params:l}),getGstReport:l=>K.get("/tax/gst",{params:l}),getVatReport:l=>K.get("/tax/vat",{params:l}),getPeriodReport:(l,n,c)=>K.get(`/tax/period/${l}/${n}`,{params:{shop_id:c}}),getSettings:()=>K.get("/tax/settings"),updateSettings:l=>K.put("/tax/settings",l)},Mi={list:l=>K.get("/racks",{params:l}),get:l=>K.get(`/racks/${l}`),create:l=>K.post("/racks",l),update:(l,n)=>K.put(`/racks/${l}`,n),delete:l=>K.delete(`/racks/${l}`)},w0={list:l=>K.get("/audit-logs",{params:l}),getStats:()=>K.get("/audit-logs/stats")},k0={list:l=>K.get("/login-activity",{params:l}),getStats:()=>K.get("/login-activity/stats")},qe={listCategories:l=>K.get("/masters/categories",{params:l}),createCategory:l=>K.post("/masters/categories",l),updateCategory:(l,n)=>K.put(`/masters/categories/${l}`,n),deleteCategory:l=>K.delete(`/masters/categories/${l}`),listUnits:l=>K.get("/masters/units",{params:l}),createUnit:l=>K.post("/masters/units",l),updateUnit:(l,n)=>K.put(`/masters/units/${l}`,n),deleteUnit:l=>K.delete(`/masters/units/${l}`),listHSN:l=>K.get("/masters/hsn",{params:l}),createHSN:l=>K.post("/masters/hsn",l),updateHSN:(l,n)=>K.put(`/masters/hsn/${l}`,n),deleteHSN:l=>K.delete(`/masters/hsn/${l}`),listGSTSlabs:l=>K.get("/masters/gst-slabs",{params:l}),createGSTSlab:l=>K.post("/masters/gst-slabs",l),updateGSTSlab:(l,n)=>K.put(`/masters/gst-slabs/${l}`,n),deleteGSTSlab:l=>K.delete(`/masters/gst-slabs/${l}`),listSuppliers:l=>K.get("/masters/suppliers",{params:l}),createSupplier:l=>K.post("/masters/suppliers",l),updateSupplier:(l,n)=>K.put(`/masters/suppliers/${l}`,n),deleteSupplier:l=>K.delete(`/masters/suppliers/${l}`),listAdjustmentReasons:l=>K.get("/masters/adjustment-reasons",{params:l}),createAdjustmentReason:l=>K.post("/masters/adjustment-reasons",l),updateAdjustmentReason:(l,n)=>K.put(`/masters/adjustment-reasons/${l}`,n),deleteAdjustmentReason:l=>K.delete(`/masters/adjustment-reasons/${l}`),listPaymentMethods:l=>K.get("/masters/payment-methods",{params:l}),createPaymentMethod:l=>K.post("/masters/payment-methods",l),updatePaymentMethod:(l,n)=>K.put(`/masters/payment-methods/${l}`,n),deletePaymentMethod:l=>K.delete(`/masters/payment-methods/${l}`),listMedicineTypes:l=>K.get("/masters/medicine-types",{params:l}),createMedicineType:l=>K.post("/masters/medicine-types",l),updateMedicineType:(l,n)=>K.put(`/masters/medicine-types/${l}`,n),deleteMedicineType:l=>K.delete(`/masters/medicine-types/${l}`),listBrands:l=>K.get("/masters/brands",{params:l}),createBrand:l=>K.post("/masters/brands",l),updateBrand:(l,n)=>K.put(`/masters/brands/${l}`,n),deleteBrand:l=>K.delete(`/masters/brands/${l}`),listManufacturers:l=>K.get("/masters/manufacturers",{params:l}),createManufacturer:l=>K.post("/masters/manufacturers",l),updateManufacturer:(l,n)=>K.put(`/masters/manufacturers/${l}`,n),deleteManufacturer:l=>K.delete(`/masters/manufacturers/${l}`)},Sp=m.createContext(void 0);function fj({children:l}){const[n,c]=m.useState(null),[i,u]=m.useState(!0),h=async()=>{if(!localStorage.getItem("access_token")){c(null),u(!1);return}try{const v=await kp.me(),p={...v.data,permissions:v.data.permissions||[]};c(p)}catch(v){console.error("Failed to fetch user:",v),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),c(null)}finally{u(!1)}};m.useEffect(()=>{h()},[]);const x=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),c(null)};return e.jsx(Sp.Provider,{value:{user:n,setUser:c,loading:i,logout:x,refreshUser:h},children:l})}function mt(){const l=m.useContext(Sp);if(l===void 0)throw new Error("useUser must be used within a UserProvider");return l}function gj(l,n){return l.includes(n)}function bj(l,n){return n.some(c=>l.includes(c))}function yj(l,n){return n.every(c=>l.includes(c))}function vj(l,n){return l.some(c=>c.startsWith(`${n}.`))}function jj(l,n){for(const c of l)if(c.startsWith(n)){const i=c.split(".");if(i.length>=3)return i[2]}return null}const S0={ROLES_VIEW:"roles.view",ROLES_MANAGE:"roles.manage"},_p=m.createContext(void 0);function Nj({children:l}){const{user:n}=mt(),c=n?.permissions??[],i=n?.role==="super_admin",u={permissions:c,hasPermission:h=>i?!0:gj(c,h),hasAnyPermission:h=>i?!0:bj(c,h),hasAllPermissions:h=>i?!0:yj(c,h),hasModuleAccess:h=>i?!0:vj(c,h),getScopeForPermission:h=>i?"global":jj(c,h)};return e.jsx(_p.Provider,{value:u,children:l})}function nt(){const l=m.useContext(_p);if(l===void 0)throw new Error("usePermissions must be used within a PermissionProvider");return l}const Cp=m.createContext(null);function wj({children:l}){const[n,c]=m.useState(null),[i,u]=m.useState(!0),[h,x]=m.useState(null),b=m.useCallback(async()=>{const N=localStorage.getItem("access_token");if(console.log("[MasterData] Loading masters, token exists:",!!N),!N){console.warn("[MasterData] No access token, skipping load"),u(!1);return}try{u(!0),x(null),console.log("[MasterData] Fetching /unified-masters/all...");const C=await K.get("/unified-masters/all");console.log("[MasterData] API Response:",{status:C.status,hasData:!!C.data,keys:C.data?Object.keys(C.data):[],categoriesCount:C.data?.categories?.length||0,unitsCount:C.data?.units?.length||0,gstSlabsCount:C.data?.gst_slabs?.length||0}),C.data&&C.data.categories&&C.data.categories.length>0?(console.log("[MasterData] Using API data"),c(C.data)):(console.warn("[MasterData] API returned empty, using fallback"),c(v()))}catch(C){console.error("[MasterData] Failed to load:",C.response?.status,C.message),c(v())}finally{u(!1)}},[]),v=()=>({categories:[{id:"cat-1",name:"Antibiotics",is_active:!0},{id:"cat-2",name:"Painkillers",is_active:!0},{id:"cat-3",name:"Supplements",is_active:!0},{id:"cat-4",name:"General",is_active:!0}],units:[{id:"unit-1",name:"Strip",short_name:"stp",is_active:!0},{id:"unit-2",name:"Bottle",short_name:"btl",is_active:!0},{id:"unit-3",name:"Box",short_name:"box",is_active:!0},{id:"unit-4",name:"Vial",short_name:"vl",is_active:!0}],hsn_codes:[{id:"hsn-1",hsn_code:"3004",description:"Medicaments",gst_rate:12,cgst_rate:6,sgst_rate:6,igst_rate:12,is_active:!0},{id:"hsn-2",hsn_code:"3003",description:"Medicaments",gst_rate:5,cgst_rate:2.5,sgst_rate:2.5,igst_rate:5,is_active:!0}],medicine_types:[{id:"type-1",code:"tablet",name:"Tablet",is_active:!0,sort_order:1},{id:"type-2",code:"capsule",name:"Capsule",is_active:!0,sort_order:2},{id:"type-3",code:"syrup",name:"Syrup",is_active:!0,sort_order:3},{id:"type-4",code:"injection",name:"Injection",is_active:!0,sort_order:4}],gst_slabs:[{id:"gst-0",rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0,is_active:!0},{id:"gst-5",rate:5,cgst_rate:2.5,sgst_rate:2.5,igst_rate:5,is_active:!0},{id:"gst-12",rate:12,cgst_rate:6,sgst_rate:6,igst_rate:12,is_active:!0},{id:"gst-18",rate:18,cgst_rate:9,sgst_rate:9,igst_rate:18,is_active:!0},{id:"gst-28",rate:28,cgst_rate:14,sgst_rate:14,igst_rate:28,is_active:!0}],brands:[{id:"br-1",code:"GSK",name:"GSK",is_active:!0},{id:"br-2",code:"CIPLA",name:"Cipla",is_active:!0},{id:"br-3",code:"SUN",name:"Sun Pharma",is_active:!0}],manufacturers:[{id:"mfr-1",code:"GSK",name:"GlaxoSmithKline",is_active:!0},{id:"mfr-2",code:"CIPLA",name:"Cipla Ltd",is_active:!0},{id:"mfr-3",code:"SUN",name:"Sun Pharmaceutical Industries",is_active:!0}],genders:[{id:"gen-1",code:"male",name:"Male",is_active:!0},{id:"gen-2",code:"female",name:"Female",is_active:!0},{id:"gen-3",code:"other",name:"Other",is_active:!0}],employment_types:[{id:"emp-1",code:"full_time",name:"Full Time",is_active:!0},{id:"emp-2",code:"part_time",name:"Part Time",is_active:!0},{id:"emp-3",code:"contract",name:"Contract",is_active:!0},{id:"emp-4",code:"intern",name:"Intern",is_active:!0}],departments:[{id:"dept-1",code:"pharmacy",name:"Pharmacy",is_active:!0},{id:"dept-2",code:"warehouse",name:"Warehouse",is_active:!0},{id:"dept-3",code:"admin",name:"Administration",is_active:!0},{id:"dept-4",code:"hr",name:"Human Resources",is_active:!0},{id:"dept-5",code:"accounts",name:"Accounts",is_active:!0}],designations:[{id:"des-1",code:"pharmacist",name:"Pharmacist",is_active:!0,level:3},{id:"des-2",code:"cashier",name:"Cashier",is_active:!0,level:2},{id:"des-3",code:"manager",name:"Manager",is_active:!0,level:4},{id:"des-4",code:"assistant",name:"Assistant",is_active:!0,level:1},{id:"des-5",code:"supervisor",name:"Supervisor",is_active:!0,level:3}],urgency_levels:[{id:"urg-1",code:"low",name:"Low",is_active:!0,color:"green"},{id:"urg-2",code:"medium",name:"Medium",is_active:!0,color:"yellow"},{id:"urg-3",code:"high",name:"High",is_active:!0,color:"orange"},{id:"urg-4",code:"critical",name:"Critical",is_active:!0,color:"red"}],payment_methods:[{id:"pm-1",code:"cash",name:"Cash",is_active:!0,icon:""},{id:"pm-2",code:"card",name:"Card",is_active:!0,icon:""},{id:"pm-3",code:"upi",name:"UPI",is_active:!0,icon:""},{id:"pm-4",code:"credit",name:"Credit",is_active:!0,icon:""}],shop_types:[{id:"st-1",code:"retail",name:"Retail Pharmacy",is_active:!0},{id:"st-2",code:"hospital",name:"Hospital Pharmacy",is_active:!0}],customer_types:[{id:"ct-1",code:"regular",name:"Regular",is_active:!0,discount_percent:0,credit_limit:0},{id:"ct-2",code:"vip",name:"VIP",is_active:!0,discount_percent:10,credit_limit:5e4}],suppliers:[],statuses:[],roles:[],warehouses:[],shops:[],racks:[],adjustment_reasons:[]});m.useEffect(()=>{b();const N=C=>{C.key==="access_token"&&C.newValue&&b()};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[b]);const p=m.useCallback(N=>n?n[N]||[]:[],[n]),g=m.useCallback(N=>n?n.statuses.filter(C=>C.entity_type===N):[],[n]),f=m.useCallback((N,C)=>p(N).find(T=>T.code===C),[p]),k=m.useCallback((N,C)=>p(N).find(T=>T.id===C),[p]),w={masters:n,isLoading:i,error:h,refresh:b,getMaster:p,getStatusesByEntity:g,findByCode:f,findById:k};return e.jsx(Cp.Provider,{value:w,children:l})}function ht(){const l=m.useContext(Cp);if(!l)throw new Error("useMasterData must be used within a MasterDataProvider");return l}const Ep=m.createContext(void 0);function kj({children:l}){const{user:n}=mt(),[c,i]=m.useState("global"),[u,h]=m.useState(null),[x,b]=m.useState([]),[v,p]=m.useState([]),[g,f]=m.useState(!0);m.useEffect(()=>{if(!n){f(!1);return}(async()=>{try{f(!0);let N=[],C=[];if(n.role==="super_admin"){const[S,M]=await Promise.all([Dt.list({size:500}),_t.list({size:500})]);N=S.data?.items||[],C=M.data?.items||[]}else n.warehouse_id?N=[(await Dt.get(n.warehouse_id)).data]:n.shop_id&&(C=[(await _t.get(n.shop_id)).data]);const j=N.map(S=>({id:S.id,type:"warehouse",name:S.name})),T=C.map(S=>({id:S.id,type:"shop",name:S.name}));b(j),p(T),n.role==="super_admin"?(i("global"),h(null)):n.warehouse_id?(i("warehouse"),h(j.find(S=>S.id===n.warehouse_id)||null)):n.shop_id?(i("shop"),h(T.find(S=>S.id===n.shop_id)||null)):(i("global"),h(null))}catch(N){console.error("Failed to initialize operational context",N)}finally{f(!1)}})()},[n]);const k=(w,N)=>{if(n?.role!=="super_admin"){console.warn("Attempted context switch by non-super-admin blocked.");return}i(w),h(N||null)};return e.jsx(Ep.Provider,{value:{scope:c,activeEntity:u,switchContext:k,availableWarehouses:x,availableShops:v,loading:g},children:l})}function Mt(){const l=m.useContext(Ep);if(l===void 0)throw new Error("useOperationalContext must be used within an OperationalProvider");return l}let _i=0;const Td=new Set;let $t=[];const Zr=l=>{Td.forEach(n=>n(l))},Xe={success:l=>{const n={id:`toast-${_i++}`,message:l,type:"success"};$t=[...$t,n],Zr($t),setTimeout(()=>Xe.dismiss(n.id),5e3)},error:l=>{const n={id:`toast-${_i++}`,message:l,type:"error"};$t=[...$t,n],Zr($t),setTimeout(()=>Xe.dismiss(n.id),5e3)},warning:l=>{const n={id:`toast-${_i++}`,message:l,type:"warning"};$t=[...$t,n],Zr($t),setTimeout(()=>Xe.dismiss(n.id),5e3)},info:l=>{const n={id:`toast-${_i++}`,message:l,type:"info"};$t=[...$t,n],Zr($t),setTimeout(()=>Xe.dismiss(n.id),5e3)},dismiss:l=>{$t=$t.filter(n=>n.id!==l),Zr($t)}};function Sj(){const[l,n]=m.useState([]);return m.useEffect(()=>{const c=i=>n(i);return Td.add(c),()=>{Td.delete(c)}},[]),l}function _j(){const l=Sj(),n=i=>{switch(i){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";case"info":return"info"}},c=i=>{switch(i){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}};return e.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 max-w-md",children:l.map((i,u)=>e.jsxs("div",{className:`flex items-start gap-3 px-4 py-3 rounded-lg border shadow-lg backdrop-blur-sm animate-slideInRight ${c(i.type)}`,style:{animationDelay:`${u*50}ms`},children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:n(i.type)}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:i.message}),e.jsx("button",{onClick:()=>window.toast?.dismiss(i.id),className:"text-current opacity-60 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]},i.id))})}typeof window<"u"&&(window.toast=Xe);const bd=[{path:"/",label:"Dashboard",icon:"dashboard",permissions:["dashboard.view","inventory.view.warehouse"]},{path:"/warehouses",label:"Warehouses",icon:"warehouse",permissions:["warehouses.view","warehouses.create","warehouses.view.warehouse","warehouses.update.warehouse"],children:[{path:"/warehouses",label:"View All Warehouses",icon:"list",permissions:["warehouses.view","warehouses.view.warehouse"]},{path:"/warehouses/add",label:"Add Warehouse",icon:"add_circle",permissions:["warehouses.create"]}]},{path:"/shops",label:"Medical Shops",icon:"storefront",permissions:["shops.view","shops.create"],children:[{path:"/shops",label:"View All Shops",icon:"list",permissions:["shops.view"]},{path:"/shops/add",label:"Add Shop",icon:"add_circle",permissions:["shops.create"]}]},{path:"/users-access",label:"Users & Access",icon:"manage_accounts",permissions:["users.view","users.view.warehouse","roles.view","login_activity.view"],excludeFromWarehouseAdmin:!0,children:[{path:"/users",label:"Users",icon:"people",permissions:["users.view","users.view.warehouse"]},{path:"/roles",label:"Roles & Permissions",icon:"admin_panel_settings",permissions:["roles.view","roles.manage"]},{path:"/login-activity",label:"Login Activity",icon:"history",permissions:["login_activity.view"]}]},{path:"/master-data",label:"Master Data",icon:"dataset",permissions:["gst.manage","hsn.manage","categories.manage","units.manage","suppliers.manage","brands.manage","manufacturers.manage","medicine_types.manage","adjustment_reasons.manage","payment_methods.manage","racks.manage","gst.view","hsn.view","categories.view","units.view","suppliers.view","brands.view","manufacturers.view","medicine_types.view","adjustment_reasons.view","payment_methods.view","racks.view"],children:[{path:"/gst-slabs",label:"GST / VAT Slabs",icon:"percent",permissions:["gst.manage","gst.view"]},{path:"/hsn",label:"HSN Codes",icon:"tag",permissions:["hsn.manage","hsn.view"],divider:!0},{path:"/categories",label:"Medicine Categories",icon:"category",permissions:["categories.manage","categories.view"],divider:!0},{path:"/medicine-types",label:"Medicine Types",icon:"medication",permissions:["medicine_types.manage","medicine_types.view"]},{path:"/brands",label:"Brands",icon:"label",permissions:["brands.manage","brands.view"]},{path:"/manufacturers",label:"Manufacturers",icon:"factory",permissions:["manufacturers.manage","manufacturers.view"]},{path:"/units",label:"Units / Packaging",icon:"straighten",permissions:["units.manage","units.view"]},{path:"/racks",label:"Rack Master",icon:"shelves",permissions:["racks.manage","racks.manage.warehouse","racks.view","racks.view.warehouse"],divider:!0},{path:"/adjustment-reasons",label:"Adjustment Reasons",icon:"edit_note",permissions:["adjustment_reasons.manage","adjustment_reasons.view"]},{path:"/suppliers",label:"Suppliers",icon:"local_shipping",permissions:["suppliers.manage","suppliers.view"],divider:!0},{path:"/payment-methods",label:"Payment Methods",icon:"payments",permissions:["payment_methods.manage","payment_methods.view"]}]},{path:"/medicines",label:"Medicine Master",icon:"medication",permissions:["medicines.view","medicines.create","medicines.view.warehouse","medicines.create.warehouse"],children:[{path:"/medicines",label:"View Medicines",icon:"list",permissions:["medicines.view","medicines.view.warehouse"]},{path:"/medicines/add",label:"Add Medicine",icon:"add_circle",permissions:["medicines.create","medicines.create.warehouse"]}]},{path:"/inventory-oversight",label:"Inventory Oversight",icon:"inventory_2",permissions:["inventory.view.global","inventory.view.warehouse","inventory.manage.warehouse"],children:[{path:"/inventory-oversight",label:"Overview",icon:"analytics",permissions:["inventory.view.global","inventory.view.warehouse"]},{path:"/inventory-oversight/expiry",label:"Expiry Monitoring",icon:"event_busy",permissions:["inventory.view.global","inventory.view.warehouse","expiry.view.warehouse"]},{path:"/inventory-oversight/dead-stock",label:"Dead Stock",icon:"warning",permissions:["inventory.view.global","inventory.view.warehouse"]}]},{path:"/reports",label:"Reports",icon:"assessment",permissions:["reports.view.global","reports.view.warehouse","reports.view.shop"],children:[{path:"/reports/sales",label:"Sales Reports",icon:"bar_chart",permissions:["reports.view.global","reports.view.shop"]},{path:"/reports/inventory",label:"Inventory Reports",icon:"inventory",permissions:["reports.view.global","reports.view.warehouse"]},{path:"/reports/tax",label:"Tax Reports",icon:"receipt",permissions:["reports.view.global","reports.view.shop"]},{path:"/reports/expiry",label:"Expiry Reports",icon:"event_busy",permissions:["reports.view.global","reports.view.warehouse","reports.view.shop"]}]},{path:"/system",label:"System",icon:"settings",permissions:["audit.view","settings.manage"],children:[{path:"/audit-logs",label:"Audit Logs",icon:"history",permissions:["audit.view"]},{path:"/system/settings",label:"System Settings",icon:"tune",permissions:["settings.manage"]}]}],_0=[{path:"/warehouses/stock",label:"Stock Entry",icon:"add_box",permissions:["inventory.entry.warehouse","stock.entry.warehouse"],excludeFromSuperAdmin:!0},{path:"/inventory",label:"Inventory",icon:"inventory_2",permissions:["inventory.view.warehouse","inventory.view.shop"],excludeFromSuperAdmin:!0},{path:"/inventory/adjust",label:"Stock Adjustment",icon:"tune",permissions:["inventory.adjust.warehouse","stock.adjust.warehouse","inventory.adjust.shop"],excludeFromSuperAdmin:!0},{path:"/dispatches",label:"Dispatches",icon:"local_shipping",permissions:["dispatches.view.warehouse","dispatches.view.shop","dispatches.create.warehouse"],excludeFromSuperAdmin:!0},{path:"/purchase-requests",label:"Purchase Requests",icon:"shopping_cart",permissions:["purchase_requests.view.warehouse","purchase_requests.view.shop","purchase_requests.create.shop","purchase_requests.approve.warehouse"],excludeFromSuperAdmin:!0},{path:"/employees",label:"Employees",icon:"badge",permissions:["employees.view.warehouse","employees.view.shop","employees.view.global","employees.manage.warehouse","employees.manage.shop"],excludeFromSuperAdmin:!0},{path:"/employees/attendance",label:"Attendance",icon:"event_available",permissions:["attendance.manage.warehouse","attendance.manage.shop","attendance.view.warehouse"],excludeFromSuperAdmin:!0,children:[{path:"/employees/attendance",label:"Attendance Marker",icon:"edit_calendar",permissions:["attendance.manage.warehouse","attendance.manage.shop"]},{path:"/employees/attendance/report",label:"Attendance Report",icon:"summarize",permissions:["attendance.view.warehouse","attendance.manage.warehouse","attendance.manage.shop"]}]},{path:"/employees/salary",label:"Salary",icon:"payments",permissions:["salary.manage.warehouse","salary.manage.shop"],excludeFromSuperAdmin:!0},{path:"/sales/pos",label:"POS Billing",icon:"point_of_sale",permissions:["billing.create.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/sales/invoices",label:"Invoices",icon:"receipt_long",permissions:["billing.view.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/sales/returns",label:"Returns & Refunds",icon:"assignment_return",permissions:["returns.view.shop","returns.create.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/customers",label:"Customers",icon:"people",permissions:["customers.view.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0}];function Cj(){const l=Ca(),{user:n}=mt(),{hasAnyPermission:c}=nt(),[i,u]=m.useState(!1),[h,x]=m.useState([]),b=w=>{if("excludeFromSuperAdmin"in w&&w.excludeFromSuperAdmin){const N=n?.role==="super_admin",C=c(["users.view","roles.view"])&&c(["shops.view"])&&c(["warehouses.view"]);if(N||C)return!1}if("excludeFromWarehouseAdmin"in w&&w.excludeFromWarehouseAdmin){const N=c(["inventory.view.warehouse","inventory.entry.warehouse","dispatches.view.warehouse","dispatches.create.warehouse"]),C=!c(["users.view","roles.view"])||!c(["shops.view"]);if(N&&C)return!1}return w.permissions&&w.permissions.length>0?c(w.permissions):!0};m.useEffect(()=>{[...bd,..._0].forEach(N=>{N.children&&N.children.some(j=>l.pathname===j.path||l.pathname.startsWith(j.path+"/"))&&!h.includes(N.path)&&x(j=>[...j,N.path])})},[l.pathname]),m.useEffect(()=>{const w=localStorage.getItem("sidebarCollapsed");w&&u(w==="true")},[]);const v=()=>{const w=!i;u(w),localStorage.setItem("sidebarCollapsed",String(w))},p=w=>{x(N=>N.includes(w)?N.filter(C=>C!==w):[...N,w])},g=w=>w.children?w.children.some(N=>l.pathname===N.path||l.pathname.startsWith(N.path+"/")):l.pathname===w.path,f=(w,N)=>{let C=w.label;w.path==="/dispatches"&&!c(["dispatches.create.warehouse","dispatches.view.warehouse"])&&(C="Incoming Shipments");const j=w.children&&w.children.length>0,T=h.includes(w.path),S=g(w);return j&&!i?e.jsxs("div",{className:"animate-fadeIn",style:{animationDelay:`${N*20}ms`},children:[e.jsxs("button",{onClick:()=>p(w.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group
                            ${S?"bg-primary/10 text-primary dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[22px] transition-transform group-hover:scale-110",children:w.icon}),e.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:C}),e.jsx("span",{className:`material-symbols-outlined text-[18px] transition-transform ${T?"rotate-180":""}`,children:"expand_more"})]}),T&&e.jsx("div",{className:"mt-1 ml-4 pl-4 border-l-2 border-slate-200 dark:border-slate-700 space-y-0.5",children:w.children.filter(M=>b(M)).map(M=>e.jsxs("div",{children:[M.divider&&e.jsx("div",{className:"my-2 border-t border-slate-200 dark:border-slate-700"}),e.jsxs(Sd,{to:M.path,end:M.path===w.path,className:({isActive:O})=>`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors text-sm
                                                ${O?"bg-primary text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:M.icon}),e.jsx("span",{className:"font-medium",children:M.label})]})]},M.path))})]},w.path):e.jsxs(Sd,{to:w.path,end:w.path==="/",className:({isActive:M})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors group
                    ${M?"bg-primary text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}
                    ${i?"justify-center":""}`,style:{animationDelay:`${N*20}ms`},title:i?C:void 0,children:[e.jsx("span",{className:"material-symbols-outlined text-[22px] transition-transform group-hover:scale-110",children:w.icon}),!i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm font-medium flex-1",children:C}),w.badge&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-red-500 text-white rounded-full",children:w.badge})]})]},w.path)},k=()=>{const w=n?.role==="super_admin",N=c(["users.view","roles.view"])&&c(["shops.view"])&&c(["warehouses.view"])&&c(["dashboard.view"]);return w||N?bd.filter(j=>b(j)):[...bd,..._0].filter(T=>b(T))};return e.jsxs("aside",{className:`
                flex flex-col border-r border-slate-200 dark:border-slate-800 
                bg-white dark:bg-slate-900 transition-all duration-300 ease-in-out
                ${i?"w-20":"w-64"}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:`flex items-center gap-3 ${i?"justify-center w-full":""}`,children:[e.jsx("div",{className:"flex items-center justify-center size-10 rounded-lg bg-primary text-white",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"local_pharmacy"})}),!i&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight text-slate-900 dark:text-white",children:"PharmaEC"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:n?.role==="super_admin"||c(["users.view","roles.view"])&&c(["shops.view"])?"Super Admin":"Management System"})]})]}),!i&&e.jsx("button",{onClick:v,className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Collapse sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})})]}),i&&e.jsx("button",{onClick:v,className:"mx-auto mt-3 p-2 rounded-lg text-slate-400 hover:text-primary hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Expand sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1 no-scrollbar",children:k().map((w,N)=>f(w,N))})]})}function Ej(){const[l,n]=m.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),[c,i]=m.useState(!1),[u,h]=m.useState(""),[x,b]=m.useState(null),v=m.useRef(null),p=Pe(),{user:g,logout:f}=mt();m.useEffect(()=>{l?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[l]),m.useEffect(()=>{(async()=>{if(!g){h(""),b(null);return}try{if(g.shop_id){const S=await _t.get(g.shop_id);h(S.data.name||"Unknown Shop"),b("shop")}else if(g.warehouse_id){const S=await Dt.get(g.warehouse_id);h(S.data.name||"Unknown Warehouse"),b("warehouse")}else h(""),b(null)}catch(S){console.error("Failed to fetch entity name:",S),h(""),b(null)}})()},[g]),m.useEffect(()=>{const T=S=>{v.current&&!v.current.contains(S.target)&&i(!1)};return c&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[c]);const k=()=>{n(!l)},w=()=>{f(),p("/login")},N=T=>T.split(" ").map(S=>S[0]).join("").toUpperCase().slice(0,2),C=T=>({super_admin:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",warehouse_admin:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",pharmacy_admin:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",hr_manager:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",pharmacist:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400"})[T]||"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300",j=T=>T.split("_").map(S=>S.charAt(0).toUpperCase()+S.slice(1)).join(" ");return e.jsxs("header",{className:"flex h-14 items-center justify-between border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-6 sticky top-0 z-10",children:[e.jsx("div",{className:"flex items-center gap-2",children:u&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:`material-symbols-outlined text-[18px] ${x==="shop"?"text-blue-600 dark:text-blue-400":"text-amber-600 dark:text-amber-400"}`,children:x==="shop"?"store":"warehouse"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold leading-none",children:x==="shop"?"Shop":"Warehouse"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white leading-tight",children:u})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:k,className:"flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:l?"Switch to Light Mode":"Switch to Dark Mode",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:l?"light_mode":"dark_mode"})}),e.jsxs("button",{onClick:()=>p("/notifications"),className:"relative flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Notifications",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"notifications"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 rounded-full bg-red-500"})]}),e.jsx("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),g&&e.jsxs("div",{className:"relative",ref:v,children:[e.jsxs("button",{onClick:()=>i(!c),className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm shadow-sm",children:N(g.full_name||g.email)}),e.jsx("span",{className:`material-symbols-outlined text-slate-400 text-[18px] transition-transform ${c?"rotate-180":""}`,children:"expand_more"})]}),c&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50",children:[e.jsxs("div",{className:"p-3 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-md",children:N(g.full_name||g.email)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white truncate",children:g.full_name||"User"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:g.email})]})]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${C(g.role)}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"badge"}),j(g.role)]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{i(!1),p("/settings")},className:"w-full flex items-center gap-2 px-3 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"person"}),e.jsx("span",{className:"text-sm font-medium",children:"My Profile"})]}),e.jsxs("button",{onClick:()=>{i(!1),p("/settings/application")},className:"w-full flex items-center gap-2 px-3 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"settings"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-1"}),e.jsxs("button",{onClick:w,className:"w-full flex items-center gap-2 px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"logout"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]})]})]})}function Aj(){return e.jsxs("div",{className:"flex h-screen w-full bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[e.jsx(Cj,{}),e.jsxs("div",{className:"flex flex-1 flex-col h-full overflow-hidden min-w-0",children:[e.jsx(Ej,{}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900 scroll-smooth",children:e.jsx("div",{className:"page-content animate-fadeIn p-6",children:e.jsx(ay,{})})})]})]})}function Tj(){const[l,n]=m.useState(""),[c,i]=m.useState(""),[u,h]=m.useState(!1),[x,b]=m.useState(""),[v,p]=m.useState(!1),g=Pe(),{refreshUser:f}=mt(),k=async w=>{w.preventDefault(),b(""),h(!0);try{const N=await kp.login(l,c),{access_token:C,refresh_token:j}=N.data;localStorage.setItem("access_token",C),localStorage.setItem("refresh_token",j),await f(),g("/")}catch(N){b(N.response?.data?.detail||"Login failed. Please check your credentials.")}finally{h(!1)}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-white rounded-full translate-x-1/3 translate-y-1/3"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-16 text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-12",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"medication"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PharmaEC"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"Enterprise Management"})]})]}),e.jsxs("h2",{className:"text-4xl font-bold leading-tight mb-6",children:["Complete Pharmacy",e.jsx("br",{}),"Management Solution"]}),e.jsx("p",{className:"text-blue-100 text-lg leading-relaxed mb-10 max-w-md",children:"Streamline your operations with our comprehensive platform for warehouses, medical shops, inventory, billing, and more."}),e.jsx("div",{className:"space-y-4",children:[{icon:"warehouse",text:"Multi-Warehouse Management"},{icon:"storefront",text:"Medical Shop Operations"},{icon:"inventory_2",text:"Real-time Inventory Tracking"},{icon:"receipt_long",text:"Integrated POS & Billing"}].map((w,N)=>e.jsxs("div",{className:"flex items-center gap-3 text-blue-100",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center flex-shrink-0 overflow-hidden",style:{minWidth:"32px",maxWidth:"32px"},children:e.jsx("span",{className:"material-symbols-outlined text-lg",style:{fontSize:"18px",width:"18px",height:"18px",lineHeight:"18px"},"aria-hidden":"true",children:w.icon})}),e.jsx("span",{className:"flex-1",children:w.text})]},N))})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-blue-600 mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"medication"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"PharmaEC"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Welcome back"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Please enter your credentials to continue"})]}),x&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm flex items-start gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-lg flex-shrink-0",children:"error"}),e.jsx("span",{children:x})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:l,onChange:w=>n(w.target.value),placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v?"text":"password",value:c,onChange:w=>i(w.target.value),placeholder:"",required:!0,className:"w-full px-4 py-3 pr-12 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"}),e.jsx("button",{type:"button",onClick:()=>p(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:v?"visibility_off":"visibility"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500 focus:ring-offset-0"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-600/30 hover:shadow-blue-600/40 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign In",e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})]})})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-xl",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"info"}),"Demo Credentials"]}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"Email:"})," admin@pharmaec.com"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"Password:"})," admin123"]})]})]}),e.jsx("p",{className:"text-center text-slate-400 text-sm mt-8",children:" 2024 PharmaEC. All rights reserved."})]})})]})}function Dj(){const l=Pe(),{user:n}=mt(),{hasPermission:c}=nt(),{scope:i,activeEntity:u}=Mt(),[h,x]=m.useState({warehouses:0,shops:0,medicines:0,invoices:0,customers:0,employees:0,revenue:0,lowStockItems:0,expiringItems:0,pendingRequests:0,dispatchedToday:0}),[b,v]=m.useState([]),[p,g]=m.useState([]),[f,k]=m.useState([]),[w,N]=m.useState([]),[C,j]=m.useState({cash:0,card:0,upi:0,other:0}),[T,S]=m.useState(!0),[M,O]=m.useState(null),[R,G]=m.useState([]);m.useEffect(()=>{q()},[i,u]);const q=async()=>{try{S(!0),O(null);const Y={};u?.type==="warehouse"&&(Y.warehouse_id=u.id),u?.type==="shop"&&(Y.shop_id=u.id);const U={};u?.type==="shop"&&(U.shop_id=u.id);const[se,Z,P,I,E,L,_,H,$,le]=await Promise.allSettled([i==="global"||u?.type==="warehouse"?Dt.list({page:1,size:1}):Promise.resolve({data:{total:0}}),i==="global"||u?.type==="shop"?_t.list({page:1,size:1,...Y}):Promise.resolve({data:{total:0}}),Rt.list({page:1,size:1}),is.list({page:1,size:5,...Y}),u?.type==="shop"||i==="global"?Xl.list({page:1,size:1,...Y}):Promise.resolve({data:{total:0}}),Sa.list({page:1,size:1,...Y}),Us.getSales(U),dn.getAlerts(Y),rl.list({status:"pending",size:1,...Y}),ns.list({size:500,...Y})]),je=(ke,Ct)=>ke.status==="fulfilled"&&(ke.value.data?.[Ct]||ke.value.data?.total)||0,he=H.status==="fulfilled"?H.value.data?.alerts||[]:[],ne=he.filter(ke=>ke.type==="low_stock").length,Ee=he.filter(ke=>ke.type==="expiring"||ke.type==="expired").length,de=$.status==="fulfilled"&&$.value.data?.total||0,X=new Date().toISOString().split("T")[0],ve=(le.status==="fulfilled"?le.value.data?.items||le.value.data||[]:[]).filter(ke=>ke.dispatch_date&&ke.dispatch_date.startsWith(X)).length;if(x({warehouses:je(se,"total"),shops:je(Z,"total"),medicines:je(P,"total"),invoices:I.status==="fulfilled"&&(I.value.data?.total||I.value.data?.items?.length)||0,customers:je(E,"total"),employees:je(L,"total"),revenue:_.status==="fulfilled"&&_.value.data?.total_sales||0,lowStockItems:ne,expiringItems:Ee,pendingRequests:de,dispatchedToday:ve}),I.status==="fulfilled"&&G((I.value.data?.items||I.value.data||[]).slice(0,5)),v(he.slice(0,5).map(ke=>({id:ke.id||Math.random().toString(),title:ke.type==="low_stock"?`Low Stock - ${ke.medicine_name} ${ke.brand?`(${ke.brand})`:""}`:`Expiry Alert - ${ke.medicine_name} ${ke.brand?`(${ke.brand})`:""}`,description:ke.type==="low_stock"?`Only ${ke.current_quantity} units left`:`Expires in ${ke.days_to_expiry} days`,time:"Recently",severity:ke.type==="expired"?"critical":"warning",type:ke.type}))),u?.type==="shop"){const ke=[],Ct=new Date;for(let st=5;st>=0;st--){const jt=new Date(Ct.getFullYear(),Ct.getMonth()-st,1);ke.push(Us.getMonthlySales({shop_id:u.id,month:jt.getMonth()+1,year:jt.getFullYear()}).catch(()=>({data:{total_sales:0}})))}const Ha=(await Promise.allSettled(ke)).map((st,jt)=>{const Aa=new Date(Ct.getFullYear(),Ct.getMonth()-(5-jt),1).toLocaleDateString("en-US",{month:"short"}),Vt=st.status==="fulfilled"&&st.value.data?.total_sales||0;return{month:Aa,amount:Vt}});g(Ha);const ma=[];for(let st=6;st>=0;st--){const jt=new Date;jt.setDate(jt.getDate()-st);const Ke=jt.toISOString().split("T")[0];ma.push(Us.getDailySales({shop_id:u.id,date:Ke}).catch(()=>({data:{total_sales:0}})))}const Ea=(await Promise.allSettled(ma)).map((st,jt)=>{const Ke=new Date;Ke.setDate(Ke.getDate()-(6-jt));const Aa=Ke.toLocaleDateString("en-US",{weekday:"short"}),Vt=st.status==="fulfilled"&&st.value.data?.total_sales||0;return{date:Aa,amount:Vt}});k(Ea);try{const st=new Date().toISOString().split("T")[0],Ke=(await Us.getDailySales({shop_id:u.id,date:st}).catch(()=>({data:{payment_breakdown:{cash:0,card:0,upi:0}}}))).data?.payment_breakdown||{cash:0,card:0,upi:0};j({cash:Ke.cash||0,card:Ke.card||0,upi:Ke.upi||0,other:0})}catch(st){console.error("Error fetching payment breakdown:",st)}try{const jt=(await is.list({page:1,size:50,shop_id:u.id}).catch(()=>({data:{items:[]}}))).data?.items||[];if(jt.length>0){const Ke=jt.slice(0,30).map(lt=>is.getItems(lt.id).catch(()=>({data:[]}))),Aa=await Promise.allSettled(Ke),Vt={};Aa.forEach(lt=>{lt.status==="fulfilled"&&lt.value.data&&(Array.isArray(lt.value.data)?lt.value.data:[]).forEach(xt=>{const Ga=xt.medicine_name||xt.medicine?.name||"Unknown";Vt[Ga]||(Vt[Ga]={name:Ga,sales:0,quantity:0}),Vt[Ga].sales+=xt.subtotal||(xt.price||0)*(xt.quantity||0),Vt[Ga].quantity+=xt.quantity||0})});const Bs=Object.values(Vt).sort((lt,us)=>us.sales-lt.sales).slice(0,5).map((lt,us)=>({name:lt.name.length>25?lt.name.substring(0,25)+"...":lt.name,sales:lt.sales,quantity:lt.quantity,color:["bg-blue-500","bg-emerald-500","bg-purple-500","bg-amber-500","bg-cyan-500"][us]||"bg-slate-500"}));N(Bs)}else N([])}catch(st){console.error("Error fetching top medicines:",st),N([])}}else g([]),k([]),N([]),j({cash:0,card:0,upi:0,other:0})}catch(Y){console.error("Dashboard fetch error:",Y),O("Failed to load dashboard data")}finally{S(!1)}},ce=Y=>Y>=1e7?`${(Y/1e7).toFixed(1)}Cr`:Y>=1e5?`${(Y/1e5).toFixed(1)}L`:Y>=1e3?`${(Y/1e3).toFixed(0)}K`:`${Y}`,ue=u?.type==="shop"?[{title:"Shop Revenue",value:ce(h.revenue),icon:"payments",color:"emerald",trend:"+12.5%",trendUp:!0,subtitle:"Total sales revenue"},{title:"Total Invoices",value:h.invoices.toString(),icon:"receipt_long",color:"blue",trend:"",trendUp:!0,subtitle:"Completed invoices"},{title:"Customers",value:h.customers.toString(),icon:"people",color:"purple",trend:"",trendUp:!0,subtitle:"Registered customers"},{title:"Stock Items",value:h.medicines.toString(),icon:"inventory_2",color:"cyan",trend:"",trendUp:!0,subtitle:"Items in stock"}]:u?.type==="warehouse"?[{title:"Warehouse Stock",value:h.medicines.toString(),icon:"warehouse",color:"blue",trend:"",trendUp:!0,subtitle:"Items in warehouse"},{title:"Dispatches Today",value:h.dispatchedToday.toString(),icon:"local_shipping",color:"teal",trend:"",trendUp:!0,subtitle:"Shipments sent"},{title:"Pending Requests",value:h.pendingRequests.toString(),icon:"assignment",color:"amber",trend:"",trendUp:!0,subtitle:"Awaiting approval"},{title:"Employees",value:h.employees.toString(),icon:"badge",color:"purple",trend:"",trendUp:!0,subtitle:"Warehouse staff"}]:[{title:"Total Revenue",value:ce(h.revenue),icon:"payments",color:"emerald",trend:"+12.5%",trendUp:!0,subtitle:"System-wide revenue"},{title:"Warehouses",value:h.warehouses.toString(),icon:"warehouse",color:"blue",trend:"+2",trendUp:!0,subtitle:"Active locations"},{title:"Medical Shops",value:h.shops.toString(),icon:"storefront",color:"purple",trend:"+5",trendUp:!0,subtitle:"Connected shops"},{title:"Total Medicines",value:h.medicines.toString(),icon:"medication",color:"cyan",trend:"+1.2%",trendUp:!0,subtitle:"SKUs in catalog"}],be=[{title:"Low Stock Items",value:h.lowStockItems.toString(),icon:"inventory",color:"red",badge:"Action Required",badgeColor:"red",subtitle:"Below safety threshold"},{title:"Expiring Soon",value:h.expiringItems.toString(),icon:"schedule",color:"orange",badge:"Review Needed",badgeColor:"orange",subtitle:"Within 30 days"},{title:"Pending Requests",value:h.pendingRequests.toString(),icon:"assignment",color:"amber",badge:"Pending",badgeColor:"amber",subtitle:"Awaiting approval"},{title:"Dispatched Today",value:h.dispatchedToday.toString(),icon:"local_shipping",color:"teal",trend:"",trendUp:!0,subtitle:"Successfully shipped"}],V=u?.type==="shop"?[{label:"POS Billing",icon:"point_of_sale",path:"/sales/pos",color:"blue"},{label:"Invoices",icon:"receipt_long",path:"/sales/invoices",color:"green"},{label:"New Order",icon:"shopping_cart",path:"/purchase-requests",color:"purple"},{label:"Incoming Stock",icon:"local_shipping",path:"/dispatches",color:"orange"},{label:"Reports",icon:"bar_chart",path:"/reports/sales",color:"cyan"},{label:"Customers",icon:"people",path:"/customers",color:"pink"}]:u?.type==="warehouse"?[{label:"Stock Entry",icon:"add_box",path:"/warehouses/stock",color:"green"},{label:"Stock Adjustment",icon:"tune",path:"/inventory/adjust",color:"blue"},{label:"Dispatches",icon:"local_shipping",path:"/dispatches",color:"orange"},{label:"Purchase Requests",icon:"shopping_cart",path:"/purchase-requests",color:"purple"},{label:"Inventory",icon:"inventory_2",path:"/inventory",color:"cyan"},{label:"Employees",icon:"badge",path:"/employees",color:"pink"}]:[{label:"Warehouses",icon:"warehouse",path:"/warehouses",color:"blue"},{label:"Shops",icon:"storefront",path:"/shops",color:"green"},{label:"Users",icon:"people",path:"/users",color:"purple"},{label:"Reports",icon:"bar_chart",path:"/reports/sales",color:"cyan"},{label:"Master Data",icon:"database",path:"/categories",color:"orange"},{label:"Settings",icon:"settings",path:"/system/settings",color:"pink"}];if(T)return e.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-slate-200 border-t-primary mx-auto"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl animate-pulse",children:"dashboard"})})]}),e.jsx("p",{className:"text-slate-500 mt-4 font-medium",children:"Loading dashboard..."})]})});const ee=p.length>0?Math.max(...p.map(Y=>Y.amount),1):1;return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(()=>{const Y=new Date().getHours();return Y<12?"Good Morning":Y<17?"Good Afternoon":"Good Evening"})(),", ",n?.full_name||"User"]}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[u?`${u.type==="shop"?"Pharmacy":"Warehouse"}: ${u.name}`:"System Overview","  ",new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[u&&e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400 text-[20px]",children:u.type==="shop"?"storefront":"warehouse"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:u.type==="shop"?"Pharmacy":"Warehouse"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:u.name})]})]}),i==="global"&&e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400 text-[20px]",children:"business"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total Locations"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:h.warehouses+h.shops})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:u?.type==="shop"?"Pharmacy Dashboard":u?.type==="warehouse"?"Warehouse Dashboard":"System Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:u?.type==="shop"?"Overview of pharmacy sales and inventory":u?.type==="warehouse"?"Overview of warehouse operations and stock":"Overview of system-wide operations"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:q,className:"btn btn-secondary",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"refresh"}),"Refresh"]}),c("billing.create.shop")&&e.jsxs("button",{onClick:()=>l("/sales/pos"),className:"btn btn-primary",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"add"}),"New Sale"]})]})]}),M&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3 animate-fadeIn",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:M}),e.jsx("button",{onClick:q,className:"ml-auto text-sm text-red-600 hover:text-red-800 font-medium",children:"Retry"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:ue.map((Y,U)=>e.jsxs("div",{className:"group relative overflow-hidden bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-fadeInUp",style:{animationDelay:`${U*100}ms`},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br opacity-5 group-hover:opacity-10 transition-opacity ${Y.color==="emerald"?"from-emerald-400 to-emerald-600":Y.color==="blue"?"from-blue-400 to-blue-600":Y.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"}`}),e.jsxs("div",{className:"flex items-start justify-between mb-4 relative",children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-br ${Y.color==="emerald"?"from-emerald-400 to-emerald-600":Y.color==="blue"?"from-blue-400 to-blue-600":Y.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"} group-hover:scale-110 transition-transform duration-300`,children:e.jsx("span",{className:"material-symbols-outlined text-white",style:{fontSize:28},children:Y.icon})}),Y.trend&&e.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${Y.trendUp?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:14},children:Y.trendUp?"trending_up":"trending_down"}),Y.trend]})]}),e.jsx("h4",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1 relative",children:Y.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-semibold mb-1 relative",children:Y.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 relative",children:Y.subtitle}),e.jsx("div",{className:`absolute -bottom-2 -right-2 w-24 h-24 rounded-full opacity-10 blur-2xl bg-gradient-to-br ${Y.color==="emerald"?"from-emerald-400 to-emerald-600":Y.color==="blue"?"from-blue-400 to-blue-600":Y.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"}`})]},Y.title))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:be.map(Y=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400",style:{fontSize:20},children:Y.icon})}),Y.badge&&e.jsx("span",{className:"badge badge-warning",children:Y.badge})]}),e.jsx("h4",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:Y.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:Y.title})]},Y.title))}),u?.type==="shop"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Monthly Sales Trend"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:ce(h.revenue)}),e.jsx("span",{className:"text-sm text-emerald-600 font-medium bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded-full",children:"Last 6 months"})]})]})}),e.jsx("div",{className:"h-64 flex items-end gap-2 px-4 border-b border-slate-100 dark:border-slate-700 pb-4",children:p.length>0?p.map((Y,U)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group relative",children:[e.jsx("div",{className:"absolute -top-8 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 dark:bg-slate-700 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10",children:ce(Y.amount)}),e.jsx("div",{className:"w-full max-w-[60px] bg-gradient-to-t from-primary to-primary/70 rounded-t-lg hover:from-primary/90 hover:to-primary/60 transition-all cursor-pointer",style:{height:`${Math.max(Y.amount/ee*100,5)}%`,minHeight:"20px"}}),e.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:Y.month})]},U)):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"bar_chart"}),e.jsx("p",{className:"text-sm",children:"No sales data available"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Top Selling Medicines"}),e.jsx("div",{className:"space-y-4",children:w.length>0?w.map((Y,U)=>{const se=Math.max(...w.map(P=>P.sales),1),Z=Y.sales/se*100;return e.jsxs("div",{className:"group animate-fadeInUp",style:{animationDelay:`${U*100}ms`},children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300 truncate flex-1 mr-2",title:Y.name,children:Y.name}),e.jsx("span",{className:"text-slate-900 dark:text-white font-bold whitespace-nowrap",children:ce(Y.sales)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 w-full bg-slate-100 dark:bg-slate-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`${Y.color} h-3 rounded-full transition-all duration-700 ease-out`,style:{width:`${Z}%`}})}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium w-12 text-right",children:[Y.quantity," units"]})]})]},Y.name)}):e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"medication"}),e.jsx("p",{className:"text-sm",children:"No sales data available"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Daily Sales (Last 7 Days)"}),e.jsx("div",{className:"h-48 flex items-end gap-2 px-4",children:f.length>0?(()=>{const Y=Math.max(...f.map(U=>U.amount),1);return f.map((U,se)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group relative",children:[e.jsx("div",{className:"absolute -top-8 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-900 dark:bg-slate-700 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10",children:ce(U.amount)}),e.jsx("div",{className:"w-full max-w-[40px] bg-gradient-to-t from-blue-500 to-blue-400 rounded-t-lg hover:from-blue-600 hover:to-blue-500 transition-all cursor-pointer",style:{height:`${Math.max(U.amount/Y*100,5)}%`,minHeight:"10px"}}),e.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:U.date})]},se))})():e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:e.jsx("p",{className:"text-sm",children:"No daily sales data"})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Payment Methods (Today)"}),e.jsx("div",{className:"space-y-4",children:(()=>{const Y=C.cash+C.card+C.upi+C.other;return Y===0?e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"payment"}),e.jsx("p",{className:"text-sm",children:"No payment data today"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Cash"})]}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[ce(C.cash)," (",(C.cash/Y*100).toFixed(0),"%)"]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all",style:{width:`${C.cash/Y*100}%`}})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Card"})]}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[ce(C.card)," (",(C.card/Y*100).toFixed(0),"%)"]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:`${C.card/Y*100}%`}})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"UPI"})]}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[ce(C.upi)," (",(C.upi/Y*100).toFixed(0),"%)"]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all",style:{width:`${C.upi/Y*100}%`}})})]})]})})()})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-gradient-to-r from-red-50 to-transparent dark:from-red-900/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"warning"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Stock Alerts"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-red-100 text-red-600 rounded-full",children:b.length})]}),e.jsx("button",{onClick:()=>l("/notifications"),className:"text-sm text-primary font-medium hover:underline",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-72 overflow-auto",children:b.length>0?b.map((Y,U)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${U*50}ms`},children:[e.jsx("div",{className:`mt-0.5 h-3 w-3 rounded-full flex-shrink-0 ${Y.severity==="critical"?"bg-red-500":"bg-amber-500"} animate-pulse`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Y.title}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-0.5",children:Y.description})]}),e.jsx("button",{className:"px-3 py-1 text-xs font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:Y.type==="low_stock"?"Restock":"Review"})]},Y.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-green-500 mb-2",children:"check_circle"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"All Clear!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No stock alerts at this time"})]})})]}),u?.type==="shop"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"receipt_long"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Recent Invoices"})]}),e.jsx("button",{onClick:()=>l("/sales/invoices"),className:"text-sm text-primary font-medium hover:underline",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-72 overflow-auto",children:R.length>0?R.map((Y,U)=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${U*50}ms`},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-[18px]",children:"receipt"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Y.invoice_number||`INV-${Y.id}`}),e.jsx("p",{className:"text-xs text-slate-500",children:Y.customer_name||"Walk-in Customer"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-600",children:ce(Y.total_amount||0)}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(Y.created_at).toLocaleDateString()})]})]},Y.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 mb-2",children:"receipt_long"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"No invoices yet"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create an invoice to get started"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:V.map((Y,U)=>e.jsxs("button",{onClick:()=>l(Y.path),className:"flex flex-col items-center gap-3 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-primary/50 transition-all hover:-translate-y-1 hover:shadow-lg group animate-fadeInUp",style:{animationDelay:`${U*50}ms`},children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-${Y.color}-100 dark:bg-${Y.color}-900/30 flex items-center justify-center group-hover:scale-110 transition-transform`,children:e.jsx("span",{className:`material-symbols-outlined text-${Y.color}-600 dark:text-${Y.color}-400 text-2xl`,children:Y.icon})}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Y.label})]},Y.label))})]})]})}function Pd({value:l,onChange:n,placeholder:c="Search...",className:i=""}){return e.jsxs("div",{className:`search-bar ${i}`,children:[e.jsx("span",{className:"material-symbols-outlined search-icon",children:"search"}),e.jsx("input",{type:"text",value:l,onChange:u=>n(u.target.value),placeholder:c,className:"search-input"}),l&&e.jsx("button",{onClick:()=>n(""),className:"clear-button",title:"Clear search",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})}),e.jsx("style",{children:`
                .search-bar {
                    position: relative;
                    display: flex;
                    align-items: center;
                    width: 100%;
                    max-width: 400px;
                }
                
                .search-icon {
                    position: absolute;
                    left: 12px;
                    color: #9ca3af;
                    font-size: 20px;
                }
                
                .search-input {
                    width: 100%;
                    padding: 10px 40px 10px 44px;
                    border: 1px solid #e5e7eb;
                    border-radius: 8px;
                    font-size: 14px;
                    transition: all 0.2s;
                }
                
                .search-input:focus {
                    outline: none;
                    border-color: #4a6cf7;
                    box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
                }
                
                .clear-button {
                    position: absolute;
                    right: 8px;
                    background: none;
                    border: none;
                    padding: 4px;
                    cursor: pointer;
                    color: #9ca3af;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                .clear-button:hover {
                    background: #f3f4f6;
                    color: #4b5563;
                }
                
                .clear-button .material-symbols-outlined {
                    font-size: 18px;
                }
            `})]})}function ie({variant:l="primary",size:n="md",children:c,icon:i,loading:u,className:h="",disabled:x,...b}){let p="";switch(l){case"primary":p="btn-primary";break;case"secondary":p="btn-secondary";break;case"ghost":p="bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300 border-transparent shadow-none";break;case"danger":case"error":p="bg-red-50 text-red-600 hover:bg-red-100 border-red-200 shadow-sm";break;case"success":p="bg-green-50 text-green-600 hover:bg-green-100 border-green-200 shadow-sm";break;case"warning":p="bg-yellow-50 text-yellow-600 hover:bg-yellow-100 border-yellow-200 shadow-sm";break;case"info":p="bg-blue-50 text-blue-600 hover:bg-blue-100 border-blue-200 shadow-sm";break;case"outline":p="bg-transparent border border-slate-300 text-slate-700 hover:bg-slate-50";break;default:p="btn-primary"}let g="";switch(n){case"sm":g="px-3 py-1.5 text-sm h-8";break;case"lg":g="px-6 py-3 text-lg h-12";break;default:g="px-4 py-2"}return e.jsxs("button",{className:`btn ${p} ${g} ${h} flex items-center justify-center gap-2 transition-all font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed`,disabled:x||u,...b,children:[u?e.jsx("span",{className:`animate-spin rounded-full border-2 border-current border-t-transparent ${n==="sm"?"h-3 w-3":"h-4 w-4"}`}):i?e.jsx("span",{className:`material-symbols-outlined ${n==="sm"?"text-[18px]":"text-[20px]"}`,children:i}):null,c]})}function Rj({title:l,count:n,searchProps:c,onFilterClick:i,actions:u,className:h="",embedded:x=!1}){const b=x?`bg-white dark:bg-slate-800 px-4 py-3 border-b border-slate-100 dark:border-slate-700 ${h}`:`bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 px-4 py-3 ${h}`;return e.jsx("div",{className:b,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("h2",{className:"text-base font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[l,n!==void 0&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full",children:n})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap sm:flex-nowrap",children:[c&&e.jsx("div",{className:"w-full sm:w-auto min-w-[220px]",children:e.jsx(Pd,{value:c.value,onChange:c.onChange,placeholder:c.placeholder||"Search...",className:"!w-full"})}),i&&e.jsx(ie,{variant:"secondary",onClick:i,className:"!p-2",title:"Filter List",children:e.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-500",children:"filter_list"})}),u]})]})})}function Mj({data:l,columns:n,loading:c=!1,emptyMessage:i="No data available",zebra:u=!1,stickyHeader:h=!0,pagination:x,error:b,onRetry:v,headerSlot:p}){const g=()=>Array(5).fill(0).map((f,k)=>e.jsx("tr",{className:"animate-pulse border-b border-slate-100 dark:border-slate-800",children:n.map((w,N)=>e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4"})},N))},`skel-${k}`));return b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center mb-3",children:e.jsx("span",{className:"material-symbols-outlined text-red-500 text-[24px]",children:"error"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"Failed to load data"}),e.jsx("p",{className:"text-sm mt-1 mb-4 max-w-xs",children:b}),v&&e.jsx("button",{onClick:v,className:"px-4 py-2 bg-white border border-slate-300 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[p&&e.jsx("div",{className:"border-b border-slate-100 dark:border-slate-700",children:p}),e.jsx("div",{className:"overflow-x-auto flex-1 relative",children:e.jsxs("table",{className:`w-full text-left text-sm ${u?"table-zebra":""} border-collapse`,children:[e.jsx("thead",{className:`bg-slate-50 dark:bg-slate-900/90 z-10 ${h?"sticky top-0":""}`,children:e.jsx("tr",{children:n.map((f,k)=>{const w=f.numeric||f.align==="right"?"text-right":f.align==="center"?"text-center":"text-left";return e.jsx("th",{className:`px-4 py-3 font-semibold text-slate-900 dark:text-white uppercase text-xs tracking-wider ${w} ${f.className||""}`,style:{width:f.width},children:f.header},k)})})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:c?g():l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:n.length,className:"px-4 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"inbox"})}),e.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-400",children:i})]})})}):l.map((f,k)=>e.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:n.map((w,N)=>{const C=w.render?w.render(f):f[w.key],j=w.numeric||w.align==="right"?"text-right":w.align==="center"?"text-center":"text-left";return e.jsx("td",{className:`px-4 py-3 text-slate-600 dark:text-slate-300 ${j} ${w.className||""}`,children:C},N)})},k))})]})}),x&&!c&&!b&&l.length>0&&e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50 px-4 py-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Showing ",e.jsx("span",{className:"font-medium",children:(x.currentPage-1)*x.pageSize+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(x.currentPage*x.pageSize,x.totalItems)})," of ",e.jsx("span",{className:"font-medium",children:x.totalItems})]}),x.onPageSizeChange&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Show:"}),e.jsx("select",{value:x.pageSize,onChange:f=>x.onPageSizeChange?.(Number(f.target.value)),className:"px-2 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(x.pageSizeOptions||[10,15,25,50]).map(f=>e.jsx("option",{value:f,children:f},f))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>x.onPageChange(Math.max(1,x.currentPage-1)),disabled:x.currentPage===1,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-800 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:border-transparent transition-all",title:"Previous Page",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})}),(()=>{const{currentPage:f,totalPages:k}=x,w=[];if(k<=7)for(let N=1;N<=k;N++)w.push(N);else{w.push(1),f>3&&w.push("...");const N=Math.max(2,f-1),C=Math.min(k-1,f+1);for(let j=N;j<=C;j++)w.includes(j)||w.push(j);f<k-2&&w.push("..."),w.includes(k)||w.push(k)}return w.map((N,C)=>N==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."},`ellipsis-${C}`):e.jsx("button",{onClick:()=>x.onPageChange(N),className:`min-w-[32px] h-8 px-2 rounded-lg text-sm font-medium transition-all ${f===N?"bg-blue-600 text-white shadow-sm":"hover:bg-white dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 border border-transparent hover:border-slate-200 dark:hover:border-slate-700"}`,children:N},N))})(),e.jsx("button",{onClick:()=>x.onPageChange(Math.min(x.totalPages,x.currentPage+1)),disabled:x.currentPage===x.totalPages,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-800 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:border-transparent transition-all",title:"Next Page",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})})]})]})]})}function zj({title:l,subtitle:n,actions:c}){return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white capitalize tracking-tight",children:l}),n&&e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:n})]}),c]})}function Oj({children:l}){return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 animate-fadeIn",children:l})}function Lj({children:l,className:n="",loading:c=!1}){return c?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px] h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):e.jsx("div",{className:`space-y-6 max-w-[1600px] mx-auto ${n}`,children:l})}const ye=Object.assign(Lj,{Header:zj,KPICards:Oj,ListControls:Rj,DataTable:Mj});function Ne({title:l,value:n,change:c,changeType:i="up",icon:u,onClick:h,isActive:x=!1,valueClassName:b,className:v=""}){const p={up:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10",down:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-500/10",neutral:"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-500/10"},g={up:"trending_up",down:"trending_down",neutral:"trending_flat"};return e.jsxs("div",{onClick:h,className:`
                flex flex-col gap-1 rounded-xl p-5 shadow-sm border transition-all duration-200
                ${h?"cursor-pointer hover:shadow-md hover:-translate-y-0.5":""}
                ${x?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 ring-1 ring-blue-500/30":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}
                ${v}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm font-medium ${x?"text-blue-700 dark:text-blue-300":"text-slate-500 dark:text-slate-400"}`,children:l}),e.jsx("span",{className:`material-symbols-outlined ${x?"text-blue-600 dark:text-blue-400":"text-slate-400"}`,children:u})]}),e.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[e.jsx("p",{className:`text-2xl font-bold ${b||(x?"text-blue-900 dark:text-blue-100":"text-slate-900 dark:text-white")}`,children:n}),c&&e.jsxs("span",{className:`flex items-center text-xs font-medium ${p[i]} px-1.5 py-0.5 rounded mb-1`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] mr-0.5",children:g[i]}),c]})]})]})}const Uj={success:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",warning:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",error:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",info:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",secondary:"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",primary:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"};function Ye({children:l,variant:n,className:c=""}){return e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${Uj[n]} ${c}`,children:l})}function tn({isOpen:l,onClose:n,title:c,children:i,footer:u,maxWidth:h="md",size:x}){const b=x||h;if(!l)return null;const v={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"modal-overlay",onClick:n,children:e.jsxs("div",{className:`modal-content w-full ${v[b]} mx-4`,onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:c}),e.jsx("button",{onClick:n,className:"p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"close"})})]}),e.jsx("div",{className:"p-6",children:i}),u&&e.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:u})]})})}function Qt({isOpen:l,onClose:n,onConfirm:c,title:i,message:u,confirmText:h="Confirm",cancelText:x="Cancel",variant:b="danger"}){if(!l)return null;const v=()=>{switch(b){case"danger":return"warning";case"warning":return"error";case"info":return"info";default:return"warning"}},g=(()=>{switch(b){case"danger":return{iconBg:"bg-red-100 dark:bg-red-900/30",iconText:"text-red-600 dark:text-red-400",buttonBg:"bg-red-600 hover:bg-red-700 shadow-red-500/20"};case"warning":return{iconBg:"bg-amber-100 dark:bg-amber-900/30",iconText:"text-amber-600 dark:text-amber-400",buttonBg:"bg-amber-600 hover:bg-amber-700 shadow-amber-500/20"};case"info":return{iconBg:"bg-blue-100 dark:bg-blue-900/30",iconText:"text-blue-600 dark:text-blue-400",buttonBg:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20"}}})();return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${g.iconBg} ${g.iconText} flex items-center justify-center mb-4`,children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:v()})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:i}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:u})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:n,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 font-medium transition-colors",children:x}),e.jsx("button",{onClick:c,className:`flex-1 px-4 py-2.5 text-white rounded-xl font-medium transition-colors shadow-lg ${g.buttonBg}`,children:h})]})]})})}function qj(){const l=Pe(),{hasPermission:n}=nt(),[c,i]=m.useState([]),[u,h]=m.useState(!0),[x,b]=m.useState(""),[v,p]=m.useState("all"),[g,f]=m.useState(1),[k,w]=m.useState(0),[N,C]=m.useState(0),[j,T]=m.useState(10),[S,M]=m.useState(null),[O,R]=m.useState([]),[G,q]=m.useState(!1);m.useEffect(()=>{F(),ce()},[g,j,x,v]);const ce=async()=>{try{const Z=await Dt.list({status:"active",size:1});C(Z.data.total||0)}catch(Z){console.error("Failed to fetch stats",Z)}},F=async()=>{try{h(!0);const Z={page:g,size:j};x&&(Z.search=x),v!=="all"&&(Z.status=v);const P=await Dt.list(Z);i(P.data.items||[]),w(P.data.total||0)}catch(Z){console.error("Failed to fetch warehouses:",Z),i([])}finally{h(!1)}},ue=async Z=>{M(Z),q(!0);try{const P=await _t.list({warehouse_id:Z.id,size:100});R(P.data.items||[])}catch(P){console.error("Failed to fetch connected shops:",P),R([])}finally{q(!1)}},[be,D]=m.useState(!1),[V,ee]=m.useState(null),Y=Z=>{ee(Z),D(!0)},U=async()=>{if(V)try{await Dt.delete(V.id),window.toast?.success("Warehouse deleted successfully"),F(),ce()}catch(Z){console.error("Failed to delete warehouse:",Z),window.toast?.error(Z.response?.data?.detail||"Failed to delete warehouse")}finally{D(!1),ee(null)}},se=[{header:"Warehouse",key:"name",render:Z=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"warehouse"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:Z.name}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:Z.code})]})]})},{header:"Location",key:"city",render:Z=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:Z.city}),e.jsx("span",{className:"text-xs text-slate-500",children:Z.state})]}),className:"hidden sm:table-cell"},{header:"Shops",key:"shop_count",render:Z=>e.jsxs("div",{className:"flex items-center justify-center font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] mr-1 text-slate-400",children:"storefront"}),Z.shop_count||0]}),align:"center"},{header:"Status",key:"status",render:Z=>e.jsx(Ye,{variant:Z.status==="active"?"success":Z.status==="suspended"?"error":"secondary",children:Z.status}),align:"center"},{header:"Actions",key:"id",render:Z=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("warehouses.view")&&e.jsx(ie,{variant:"ghost",onClick:()=>ue(Z),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})}),n("warehouses.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>l(`/warehouses/edit/${Z.id}`),className:"!p-1.5 h-8 w-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20",title:"Edit Warehouse",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("warehouses.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>Y(Z),className:"!p-1.5 h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",title:"Delete Warehouse",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Warehouses",subtitle:`Manage ${k} warehouses in your network`,actions:n("warehouses.create")&&e.jsxs(ie,{variant:"primary",onClick:()=>l("/warehouses/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Warehouse"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Warehouses",value:k,icon:"warehouse",onClick:()=>p("all"),isActive:v==="all"}),e.jsx(Ne,{title:"Active Warehouses",value:N,icon:"check_circle",onClick:()=>p("active"),isActive:v==="active",trend:"neutral"}),e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:"hidden lg:block"})]}),e.jsx(ye.DataTable,{columns:se,data:c,loading:u,emptyMessage:"No warehouses found. Add your first warehouse.",pagination:{currentPage:g,totalPages:Math.ceil(k/j),onPageChange:f,totalItems:k,pageSize:j,onPageSizeChange:Z=>{T(Z),f(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Warehouse List",count:k,searchProps:{value:x,onChange:Z=>{b(Z),f(1)},placeholder:"Search warehouses..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:v,onChange:Z=>{p(Z.target.value),f(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})}),embedded:!0})}),e.jsx(tn,{isOpen:!!S,onClose:()=>M(null),title:S?.name||"Warehouse Details",maxWidth:"lg",children:S&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Code"}),e.jsx("p",{className:"text-sm mt-1 font-mono",children:S.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Status"}),e.jsx(Ye,{variant:S.status==="active"?"success":"secondary",className:"mt-1",children:S.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Capacity"}),e.jsxs("p",{className:"text-sm mt-1",children:[S.capacity?.toLocaleString()||"-"," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"City"}),e.jsx("p",{className:"text-sm mt-1",children:S.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"State"}),e.jsx("p",{className:"text-sm mt-1",children:S.state})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Contact"}),e.jsx("p",{className:"text-sm mt-1",children:S.phone||"-"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-3",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Address"}),e.jsxs("p",{className:"text-sm mt-1",children:[S.address||"-"," - ",S.pincode]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4",children:["Connected Medical Shops (",O.length,")"]}),G?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):O.length>0?e.jsx("div",{className:"grid gap-3",children:O.map((Z,P)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:Z.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[Z.city,", ",Z.state]})]})]}),e.jsx(Ye,{variant:Z.status==="active"?"success":"secondary",className:"text-xs",children:Z.status})]},P))}):e.jsx("div",{className:"text-center py-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No medical shops connected to this warehouse."})})]})]})}),e.jsx(Qt,{isOpen:be,onClose:()=>D(!1),onConfirm:U,title:"Delete Warehouse",message:`Are you sure you want to delete "${V?.name}"? This action cannot be undone.`,confirmText:"Delete Warehouse"})]})}function Yt({title:l,description:n,subtitle:c,icon:i,actions:u,children:h,className:x="",loading:b=!1}){return e.jsxs("div",{className:`flex flex-col h-full ${x}`,children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6 sm:flex-row sm:items-end sm:justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-[24px]",children:i})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white capitalize",children:l}),(n||c)&&e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:n||c})]})]})}),u&&e.jsx("div",{className:"flex items-center gap-3",children:u})]}),e.jsx("div",{className:"flex-1",children:b?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px] h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):h})]})}function Ze({children:l,className:n="",padding:c,title:i,icon:u}){const h=c?{padding:c}:{};return e.jsxs("div",{className:`card ${n}`,style:h,children:[(i||u)&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[u&&e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400",children:u}),i&&e.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-white",children:i})]}),l]})}function ge({label:l,error:n,required:c,className:i="",...u}){return e.jsxs("div",{className:"w-full",children:[l&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[l,c&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{className:`input ${n?"border-red-500":""} ${i}`,...u}),n&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),n]})]})}function Bj(){const l=Pe(),{refresh:n}=ht(),[c,i]=m.useState({name:"",code:"",address:"",city:"",state:"",country:"India",pincode:"",phone:"",email:"",capacity:1e4}),[u,h]=m.useState(!1),[x,b]=m.useState(""),v=async p=>{if(p.preventDefault(),b(""),!c.name||!c.code||!c.city||!c.state){b("Please fill in all required fields (Name, Code, City, State)");return}h(!0);try{console.log("Sending warehouse data:",c),await Dt.create(c),await n(),l("/warehouses")}catch(g){console.error("Failed to create warehouse:",g),b(g.response?.data?.detail||"Failed to create warehouse")}finally{h(!1)}};return e.jsx(Yt,{title:"Add New Warehouse",description:"Create a new distribution center",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:v,children:e.jsxs(Ze,{className:"space-y-6",children:[x&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:x}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Warehouse Name *",value:c.name,onChange:p=>i({...c,name:p.target.value}),placeholder:"Main Warehouse",required:!0}),e.jsx(ge,{label:"Code *",value:c.code,onChange:p=>i({...c,code:p.target.value.toUpperCase()}),placeholder:"WH001",required:!0,className:"font-mono"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:c.address,onChange:p=>i({...c,address:p.target.value}),className:"input min-h-[80px] py-2",placeholder:"Street address..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"City *",value:c.city,onChange:p=>i({...c,city:p.target.value}),placeholder:"Chennai",required:!0}),e.jsx(ge,{label:"State *",value:c.state,onChange:p=>i({...c,state:p.target.value}),placeholder:"Tamil Nadu",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ge,{label:"Pincode",value:c.pincode,onChange:p=>i({...c,pincode:p.target.value}),placeholder:"600001"}),e.jsx(ge,{label:"Phone",type:"tel",value:c.phone,onChange:p=>i({...c,phone:p.target.value}),placeholder:"+91 9876543210"}),e.jsx(ge,{label:"Capacity",type:"number",value:c.capacity,onChange:p=>i({...c,capacity:parseInt(p.target.value)||0}),placeholder:"10000"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(ge,{label:"Email",type:"email",value:c.email,onChange:p=>i({...c,email:p.target.value}),placeholder:"warehouse@example.com"})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>l("/warehouses"),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",loading:u,children:u?"Creating...":"Create Warehouse"})]})]})})})})}function Hj(){const l=Pe(),{id:n}=sn(),[c,i]=m.useState(!0),[u,h]=m.useState({name:"",code:"",address:"",city:"",state:"",country:"India",pincode:"",phone:"",email:"",capacity:1e4}),[x,b]=m.useState(!1),[v,p]=m.useState("");m.useEffect(()=>{g()},[n]);const g=async()=>{try{const w=(await Dt.get(n)).data;h({name:w.name||"",code:w.code||"",address:w.address||"",city:w.city||"",state:w.state||"",country:w.country||"India",pincode:w.pincode||"",phone:w.phone||"",email:w.email||"",capacity:w.capacity||1e4})}catch(k){console.error("Failed to load warehouse:",k),p("Failed to load warehouse details")}finally{i(!1)}},f=async k=>{if(k.preventDefault(),p(""),!u.name||!u.code||!u.city||!u.state){p("Please fill in all required fields");return}b(!0);try{await Dt.update(n,u),l("/warehouses")}catch(w){console.error("Failed to update warehouse:",w),p(w.response?.data?.detail||"Failed to update warehouse")}finally{b(!1)}};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):e.jsx(Yt,{title:"Edit Warehouse",description:"Update warehouse information",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:f,children:e.jsxs(Ze,{className:"space-y-6",children:[v&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:v}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Warehouse Name *",value:u.name,onChange:k=>h({...u,name:k.target.value}),required:!0}),e.jsx(ge,{label:"Code *",value:u.code,className:"font-mono bg-slate-100 dark:bg-slate-800",disabled:!0,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:u.address,onChange:k=>h({...u,address:k.target.value}),className:"input min-h-[80px] py-2",placeholder:"Address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"City *",value:u.city,onChange:k=>h({...u,city:k.target.value}),required:!0}),e.jsx(ge,{label:"State *",value:u.state,onChange:k=>h({...u,state:k.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ge,{label:"Pincode",value:u.pincode,onChange:k=>h({...u,pincode:k.target.value})}),e.jsx(ge,{label:"Phone",type:"tel",value:u.phone,onChange:k=>h({...u,phone:k.target.value})}),e.jsx(ge,{label:"Capacity",type:"number",value:u.capacity,onChange:k=>h({...u,capacity:parseInt(k.target.value)||0})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(ge,{label:"Email",type:"email",value:u.email,onChange:k=>h({...u,email:k.target.value})})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>l("/warehouses"),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",loading:x,children:x?"Updating...":"Update Warehouse"})]})]})})})})}function $d({masterKey:l,value:n,onChange:c,placeholder:i="Select...",required:u=!1,disabled:h=!1,valueField:x="id",labelField:b="name",allowAdd:v=!1,onAdd:p,entityType:g,className:f="",style:k}){const{getMaster:w,getStatusesByEntity:N,isLoading:C}=ht();let j=[];l==="statuses"&&g?j=N(g):j=w(l);const T=R=>{const G=R.target.value;if(G==="__ADD_NEW__"&&p){p();return}c(G)},S=R=>x==="code"&&R.code!==void 0?R.code:R.id,M=R=>l==="hsn_codes"?`${R.hsn_code} - ${R.description?.substring(0,30)||""}`:l==="gst_slabs"?`${R.rate}%${R.description?` - ${R.description}`:""}`:l==="units"&&R.short_name?`${R.name} (${R.short_name})`:l==="payment_methods"&&R.icon?`${R.icon} ${R.name}`:R[b]||R.name||R.code||String(R.id),O=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${h||C?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:n,onChange:T,required:u,disabled:h||C,className:f||O,style:k,children:[e.jsx("option",{value:"",children:C?"Loading...":i}),j.map(R=>e.jsx("option",{value:S(R),children:M(R)},R.id)),v&&e.jsx("option",{value:"__ADD_NEW__",children:"+ Add New..."})]})}function Yd({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h,allowAdd:x,onAdd:b}){const{getMaster:v,isLoading:p}=ht(),g=v("categories"),f=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||p?"opacity-60 cursor-not-allowed":""}`,k=!p&&g.length===0;return e.jsxs("select",{value:l,onChange:w=>{const N=w.target.value;if(N==="__ADD_NEW__"&&b){b();return}n(N)},required:c,disabled:i||p||k,className:u||f,title:k?"No categories available. Please ask your Super Admin to add categories in Master Data Management  Medicine Categories":void 0,children:[e.jsx("option",{value:"",children:p?"Loading...":k?" No categories found - Contact Super Admin":h||"Select Category"}),g.map(w=>e.jsx("option",{value:w.name,children:w.name},w.id)),x&&e.jsx("option",{value:"__ADD_NEW__",children:"+ Add New..."})]})}function Ap({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:b}=ht(),v=x("medicine_types"),p=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||b?"opacity-60 cursor-not-allowed":""}`,g=!b&&v.length===0;return e.jsxs("select",{value:l,onChange:f=>n(f.target.value),required:c,disabled:i||b||g,className:u||p,title:g?"No medicine types available. Please ask your Super Admin to add medicine types in Master Data Management  Medicine Types":void 0,children:[e.jsx("option",{value:"",children:b?"Loading...":g?" No medicine types found - Contact Super Admin":h||"Select Medicine Type"}),v.map(f=>e.jsx("option",{value:f.code,children:f.name},f.id))]})}function Tp({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:b}=ht(),v=x("units"),p=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||b?"opacity-60 cursor-not-allowed":""}`,g=!b&&v.length===0;return e.jsxs("select",{value:l,onChange:f=>n(f.target.value),required:c,disabled:i||b||g,className:u||p,title:g?"No units available. Please ask your Super Admin to add units in Master Data Management  Units":void 0,children:[e.jsx("option",{value:"",children:b?"Loading...":g?" No units found - Contact Super Admin":h||"Select Unit"}),v.map(f=>e.jsxs("option",{value:f.name,children:[f.name," (",f.short_name,")"]},f.id))]})}function Dp({value:l,onChange:n,required:c,disabled:i,className:u}){const{getMaster:h,isLoading:x}=ht(),b=h("gst_slabs"),v=!x&&b.length===0;return e.jsxs("select",{value:l,onChange:p=>n(Number(p.target.value)),required:c,disabled:i||x||v,className:u||"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",title:v?"No GST slabs available. Please ask your Super Admin to add GST slabs in Master Data Management  Tax & Finance Masters  GST/VAT":void 0,children:[v&&e.jsx("option",{value:"",children:" No GST slabs found - Contact Super Admin"}),b.map(p=>e.jsxs("option",{value:p.rate,children:[p.rate,"%",p.description?` - ${p.description}`:""]},p.id))]})}function Gj({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:b}=ht(),v=x("hsn_codes"),p=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||b?"opacity-60 cursor-not-allowed":""}`,g=!b&&v.length===0,f=k=>{const w=k.target.value,N=v.find(C=>C.hsn_code===w);n(w,N?.gst_rate)};return e.jsxs("select",{value:l,onChange:f,required:c,disabled:i||b||g,className:u||p,title:g?"No HSN codes available. Please ask your Super Admin to add HSN codes in Master Data  HSN Codes":void 0,children:[e.jsx("option",{value:"",children:b?"Loading...":g?" No HSN codes found - Contact Super Admin":h||"Select HSN Code"}),v.map(k=>e.jsxs("option",{value:k.hsn_code,children:[k.hsn_code," - ",k.description?.substring(0,40)||"No description"," (",k.gst_rate,"%)"]},k.id))]})}function Fj({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){return e.jsx($d,{masterKey:"customer_types",value:l,onChange:n,placeholder:h||"Select Customer Type",valueField:"code",required:c,disabled:i,className:u})}function Rp({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){const x=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}];return e.jsxs("select",{value:l,onChange:b=>n(b.target.value),required:c,disabled:i,className:u||"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:h||"Select Gender"}),x.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))]})}function Pj({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){const x=[{value:"full_time",label:"Full Time"},{value:"part_time",label:"Part Time"},{value:"contract",label:"Contract"},{value:"intern",label:"Intern"}];return e.jsxs("select",{value:l,onChange:b=>n(b.target.value),required:c,disabled:i,className:u||"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:h||"Select Employment Type"}),x.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))]})}function $j({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){return e.jsx($d,{masterKey:"urgency_levels",value:l,onChange:n,placeholder:h||"Select Urgency",valueField:"code",required:c,disabled:i,className:u})}function Qd({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:b}=ht(),{availableWarehouses:v}=Mt(),[p,g]=m.useState([]),[f,k]=m.useState(!0),w=m.useRef(!1),N=x("warehouses");m.useEffect(()=>{if(N.length>0){g(N),k(!1),w.current=!0;return}if(v.length>0){g(v.map(S=>({id:S.id,name:S.name,code:S.id}))),k(!1),w.current=!0;return}if(b){k(!0);return}w.current?p.length===0&&k(!1):(w.current=!0,k(!0),Dt.list({size:500}).then(S=>{const M=S.data?.items||S.data||[];g(M)}).catch(S=>{console.error("Failed to load warehouses:",S),g([])}).finally(()=>{k(!1)}))},[N.length,v.length,b]);const C=b||f,j=p.length>0?p:[],T=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||C?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:l,onChange:S=>n(S.target.value),required:c,disabled:i||C||j.length===0,className:u||T,title:C?"Loading warehouses...":j.length===0?"No warehouses available":void 0,children:[e.jsx("option",{value:"",children:C?"Loading warehouses...":j.length===0?" No warehouses found":h||"Select Warehouse"}),j.map(S=>e.jsxs("option",{value:S.id,children:[S.name," ",S.code?`(${S.code})`:""]},S.id))]})}function Vd({value:l,onChange:n,required:c,disabled:i,className:u,warehouseId:h}){const{getMaster:x,isLoading:b}=ht();let v=x("shops");return h&&(v=v.filter(p=>p.warehouse_id===h)),e.jsxs("select",{value:l,onChange:p=>n(p.target.value),required:c,disabled:i||b||v.length===0,className:u||"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"",children:b?"Loading...":v.length===0?" No shops found":"Select Shop"}),v.map(p=>e.jsxs("option",{value:p.id,children:[p.name," (",p.code,")"]},p.id))]})}function Yj({value:l,onChange:n,entityType:c,required:i,disabled:u,className:h,placeholder:x}){return e.jsx($d,{masterKey:"statuses",value:l,onChange:n,placeholder:x||"Select Status",valueField:"code",entityType:c,required:i,disabled:u,className:h})}function Mp({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:b}=ht(),v=x("brands"),p=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||b?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:l,onChange:g=>n(g.target.value),required:c,disabled:i||b,className:u||p,children:[e.jsx("option",{value:"",children:b?"Loading...":h||"Select Brand"}),v.map(g=>e.jsx("option",{value:g.name,children:g.name},g.id))]})}function zp({value:l,onChange:n,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:b}=ht(),v=x("manufacturers"),p=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||b?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:l,onChange:g=>n(g.target.value),required:c,disabled:i||b,className:u||p,children:[e.jsx("option",{value:"",children:b?"Loading...":h||"Select Manufacturer"}),v.map(g=>e.jsx("option",{value:g.name,children:g.name},g.id))]})}function Qj(){const l=Pe(),{isLoading:n}=ht(),{hasPermission:c}=nt(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(""),[p,g]=m.useState("all"),[f,k]=m.useState(1),[w,N]=m.useState(0),[C,j]=m.useState(10),[T,S]=m.useState({total:0,active:0,retail:0,hospital:0});m.useEffect(()=>{O()},[f,C,b,p]),m.useEffect(()=>{M()},[]);const M=async()=>{try{const D=await _t.getStats();S(D.data)}catch(D){console.error("Failed to fetch stats:",D)}},O=async()=>{try{x(!0);const D={page:f,size:C};b&&(D.search=b),p!=="all"&&p&&(D.status=p);const V=await _t.list(D);u(V.data.items||[]),N(V.data.total||0)}catch(D){console.error("Failed to fetch shops:",D),u([])}finally{x(!1)}},[R,G]=m.useState(!1),[q,ce]=m.useState(null),F=D=>{ce(D),G(!0)},ue=async()=>{if(q)try{await _t.delete(q.id),window.toast?.success("Shop deleted successfully"),O(),M()}catch(D){console.error("Failed to delete shop:",D),window.toast?.error(D.response?.data?.detail||"Failed to delete shop")}finally{G(!1),ce(null)}},be=[{header:"Shop",key:"name",render:D=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shadow-sm",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:D.name}),e.jsx("div",{className:"text-xs text-slate-500",children:D.phone})]})]})},{header:"Code",key:"code",render:D=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:D.code})},{header:"Type",key:"shop_type",render:D=>e.jsx(Ye,{variant:"secondary",className:"capitalize",children:D.shop_type}),className:"hidden md:table-cell"},{header:"Location",key:"city",render:D=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:D.city}),e.jsx("span",{className:"text-xs text-slate-500",children:D.state})]}),className:"hidden sm:table-cell"},{header:"Warehouse",key:"warehouse_name",render:D=>D.warehouse_name?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"warehouse"}),e.jsx("span",{children:D.warehouse_name})]}):e.jsxs("span",{className:"text-xs text-slate-400 italic flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link_off"}),"Unassigned"]}),className:"hidden lg:table-cell"},{header:"Status",key:"status",render:D=>e.jsx(Ye,{variant:D.status==="active"?"success":D.status==="suspended"?"error":"secondary",children:D.status}),align:"center"},{header:"Actions",key:"id",render:D=>e.jsxs("div",{className:"flex justify-end gap-1",children:[c("shops.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>l(`/shops/${D.id}/edit`),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Shop",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),c("shops.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>F(D),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",title:"Delete Shop",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(ye,{loading:n,children:[e.jsx(ye.Header,{title:"Medical Shops",subtitle:`Manage ${w} retail pharmacy locations`,actions:c("shops.create")&&e.jsxs(ie,{variant:"primary",onClick:()=>l("/shops/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add_business"}),"Add Shop"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Shops",value:T.total,icon:"storefront",onClick:()=>g("all"),isActive:p==="all"}),e.jsx(Ne,{title:"Active",value:T.active,icon:"check_circle",trend:"up",change:"+2 this month"}),e.jsx(Ne,{title:"Retail",value:T.retail,icon:"shopping_bag",trend:"neutral"}),e.jsx(Ne,{title:"Hospital",value:T.hospital,icon:"local_hospital",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:be,data:i,loading:h,emptyMessage:"No medical shops found in the system.",pagination:{currentPage:f,totalPages:Math.ceil(w/C),onPageChange:k,totalItems:w,pageSize:C,onPageSizeChange:D=>{j(D),k(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Shop List",count:w,searchProps:{value:b,onChange:D=>{v(D),k(1)},placeholder:"Search shops..."},actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Yj,{entityType:"shop",value:p,onChange:D=>{g(D),k(1)},placeholder:"All Status",className:"!w-40 !py-1.5 !text-sm !rounded-lg"})}),embedded:!0})}),e.jsx(Qt,{isOpen:R,onClose:()=>G(!1),onConfirm:ue,title:"Delete Shop",message:`Are you sure you want to delete "${q?.name}"? This action cannot be undone.`,confirmText:"Delete Shop"})]})}function Vj(){const l=Pe(),{isLoading:n,refresh:c}=ht();m.useEffect(()=>{c()},[c]);const[i,u]=m.useState({name:"",code:"",shop_type:"retail",license_number:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",gst_number:"",warehouse_id:""}),[h,x]=m.useState(!1),[b,v]=m.useState(""),p=async g=>{if(g.preventDefault(),v(""),!i.name||!i.code||!i.city||!i.state||!i.license_number||!i.warehouse_id){v("Please fill in all required fields (Name, Code, License Number, Warehouse, City, State)");return}x(!0);try{const f={...i,email:i.email||void 0,gst_number:i.gst_number||void 0,warehouse_id:i.warehouse_id};await _t.create(f),l("/shops")}catch(f){console.error("Failed to create shop:",f),v(f.response?.data?.detail||"Failed to create medical shop")}finally{x(!1)}};return e.jsx(Yt,{title:"Add New Medical Shop",description:"Create a new retail pharmacy location",loading:n,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:p,children:e.jsxs(Ze,{className:"space-y-6",children:[b&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:b}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Shop Name *",value:i.name,onChange:g=>u({...i,name:g.target.value}),placeholder:"GreenCross Pharmacy",required:!0}),e.jsx(ge,{label:"Code *",value:i.code,onChange:g=>u({...i,code:g.target.value.toUpperCase()}),placeholder:"GCP001",className:"font-mono",required:!0})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"License & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Shop Type"}),e.jsxs("select",{value:i.shop_type,onChange:g=>u({...i,shop_type:g.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"retail",children:"Retail Pharmacy"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"hospital",children:"Hospital Pharmacy"}),e.jsx("option",{value:"clinic",children:"Clinic Pharmacy"})]})]}),e.jsx(ge,{label:"License Number *",value:i.license_number,onChange:g=>u({...i,license_number:g.target.value}),placeholder:"PH-2024-001234",required:!0})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-5 border border-amber-200 dark:border-amber-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"warehouse"}),"Warehouse Mapping *"]}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400 mb-4",children:"Every medical shop must be linked to a warehouse. This determines the stock source for this shop."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Warehouse *"}),e.jsx(Qd,{value:i.warehouse_id,onChange:g=>u({...i,warehouse_id:g}),required:!0,className:`w-full ${i.warehouse_id?"":"border-amber-300 dark:border-amber-600"}`}),!i.warehouse_id&&e.jsxs("p",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),"Warehouse selection is mandatory for supply chain integrity"]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:i.address,onChange:g=>u({...i,address:g.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2,placeholder:"45 Main Street, Medical Complex"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ge,{label:"City *",value:i.city,onChange:g=>u({...i,city:g.target.value}),placeholder:"Chennai",required:!0}),e.jsx(ge,{label:"State *",value:i.state,onChange:g=>u({...i,state:g.target.value}),placeholder:"Tamil Nadu",required:!0}),e.jsx(ge,{label:"Pincode",value:i.pincode,onChange:g=>u({...i,pincode:g.target.value}),placeholder:"600001"})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact & Tax Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Phone",type:"tel",value:i.phone,onChange:g=>u({...i,phone:g.target.value}),placeholder:"+91 9876543210"}),e.jsx(ge,{label:"Email",type:"email",value:i.email,onChange:g=>u({...i,email:g.target.value}),placeholder:"shop@example.com"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(ge,{label:"GST Number",value:i.gst_number,onChange:g=>u({...i,gst_number:g.target.value.toUpperCase()}),className:"font-mono",placeholder:"22AAAAA0000A1Z5"})})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",onClick:()=>l("/shops"),type:"button",children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",loading:h,children:h?"Creating...":"Create Shop"})]})]})})})})}function Ij(){const{id:l}=sn(),n=Pe(),[c,i]=m.useState(!0),[u,h]=m.useState(!1),[x,b]=m.useState(""),[v,p]=m.useState([]),[g,f]=m.useState({name:"",code:"",shop_type:"retail",license_number:"",gst_number:"",phone:"",email:"",address:"",city:"",state:"",pincode:"",warehouse_id:"",status:"active"});m.useEffect(()=>{k(),l&&w()},[l]);const k=async()=>{try{const j=await Dt.list({status:"active",size:100});p(j.data.items||[])}catch(j){console.error("Failed to fetch warehouses:",j)}},w=async()=>{try{i(!0);const j=await _t.get(l);f(j.data)}catch(j){console.error("Failed to fetch shop:",j),b("Failed to load shop details")}finally{i(!1)}},N=async j=>{if(j.preventDefault(),b(""),!g.name||!g.city||!g.state||!g.license_number){b("Please fill in all required fields");return}try{h(!0),await _t.update(l,g),n("/shops")}catch(T){console.error("Failed to update shop:",T),b(T.response?.data?.detail||"Failed to update shop")}finally{h(!1)}},C=(j,T)=>{f(S=>({...S,[j]:T}))};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):e.jsx(Yt,{title:"Edit Medical Shop",description:`Update information for ${g.name}`,children:e.jsx("form",{onSubmit:N,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[x&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:x}),e.jsx(Ze,{title:"Basic Information",icon:"storefront",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Shop Name *",value:g.name||"",onChange:j=>C("name",j.target.value),required:!0}),e.jsx(ge,{label:"Shop Code",value:g.code||"",onChange:j=>C("code",j.target.value),className:"font-mono",disabled:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Shop Type"}),e.jsxs("select",{value:g.shop_type||"retail",onChange:j=>C("shop_type",j.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"hospital",children:"Hospital"}),e.jsx("option",{value:"clinic",children:"Clinic"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Linked Warehouse"}),e.jsxs("select",{value:g.warehouse_id||"",onChange:j=>C("warehouse_id",j.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),v.map(j=>e.jsxs("option",{value:j.id,children:[j.name," (",j.code,")"]},j.id))]})]})]})}),e.jsx(Ze,{title:"License & Tax Information",icon:"verified",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Pharmacy License Number *",value:g.license_number||"",onChange:j=>C("license_number",j.target.value),required:!0}),e.jsx(ge,{label:"GST Number",value:g.gst_number||"",onChange:j=>C("gst_number",j.target.value.toUpperCase()),className:"font-mono"})]})}),e.jsx(Ze,{title:"Contact Information",icon:"contact_phone",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Phone Number",type:"tel",value:g.phone||"",onChange:j=>C("phone",j.target.value)}),e.jsx(ge,{label:"Email Address",type:"email",value:g.email||"",onChange:j=>C("email",j.target.value)}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{rows:2,value:g.address||"",onChange:j=>C("address",j.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"})]}),e.jsx(ge,{label:"City *",value:g.city||"",onChange:j=>C("city",j.target.value),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{label:"State *",value:g.state||"",onChange:j=>C("state",j.target.value),required:!0}),e.jsx(ge,{label:"Pincode",value:g.pincode||"",onChange:j=>C("pincode",j.target.value)})]})]})}),e.jsxs("div",{className:"lg:hidden flex justify-end gap-3 pt-4",children:[e.jsx(ie,{variant:"secondary",onClick:()=>n("/shops"),type:"button",children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",loading:u,children:u?"Saving...":"Save Changes"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ze,{title:"Shop Status",icon:"toggle_on",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Status"}),e.jsxs("select",{value:g.status||"active",onChange:j=>C("status",j.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Current operational status of this shop"})]})})}),e.jsx(Ze,{title:"Quick Stats",icon:"analytics",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Medicines"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:g.total_medicines||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Stock Value"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:["",(g.total_stock_value||0).toLocaleString()]})]})]})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Ze,{children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(ie,{variant:"primary",type:"submit",loading:u,className:"w-full justify-center",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"save"}),u?"Saving...":"Save Changes"]}),e.jsx(ie,{variant:"secondary",onClick:()=>n("/shops"),type:"button",className:"w-full justify-center",children:"Cancel"})]})})})]})]})})})}function Xj(){const[l,n]=m.useState([]),[c,i]=m.useState([]),[u,h]=m.useState([]),[x,b]=m.useState(null),[v,p]=m.useState([]),[g,f]=m.useState(!0),[k,w]=m.useState(!1);m.useEffect(()=>{N()},[]),m.useEffect(()=>{if(x){const T=c.filter(S=>S.warehouse_id===x.id);p(T)}else p([])},[x,c]),m.useEffect(()=>{h(c.filter(T=>!T.warehouse_id))},[c]);const N=async()=>{try{f(!0);const[T,S]=await Promise.all([Dt.list({size:500}),_t.list({size:500})]);n(T.data.items||[]),i(S.data.items||[])}catch(T){console.error("Failed to load data:",T)}finally{f(!1)}},C=async T=>{if(x){w(!0);try{await _t.update(T,{warehouse_id:x.id}),await N()}catch(S){console.error("Failed to assign shop:",S)}finally{w(!1)}}},j=async T=>{w(!0);try{await _t.update(T,{warehouse_id:null}),await N()}catch(S){console.error("Failed to unassign shop:",S)}finally{w(!1)}};return g?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"spinner"})}):e.jsx(Yt,{title:"Warehouse  Shop Mapping",description:"Assign medical shops to warehouses",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(Ze,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"warehouse"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:l.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total Warehouses"})]})]}),e.jsxs(Ze,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:c.filter(T=>T.warehouse_id).length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Assigned Shops"})]})]}),e.jsxs(Ze,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:u.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Unassigned Shops"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ze,{title:"Select Warehouse",icon:"warehouse",padding:"0",children:e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-[500px] overflow-auto",children:l.map(T=>e.jsx("button",{onClick:()=>b(T),className:`w-full p-4 text-left transition-colors ${x?.id===T.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-primary":"hover:bg-slate-50 dark:hover:bg-slate-800/50 border-l-4 border-transparent"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:T.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[T.code,"  ",T.city]})]}),e.jsxs(Ye,{variant:"info",children:[T.shop_count||0," shops"]})]})},T.id))})}),e.jsx(Ze,{title:x?`Shops in ${x.name}`:"Select a Warehouse",icon:"storefront",padding:"0",children:x?e.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50",children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-3",children:["Assigned Shops (",v.length,")"]}),v.length===0?e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No shops assigned yet"}):e.jsx("div",{className:"space-y-2",children:v.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:T.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[T.code,"  ",T.city]})]}),e.jsx(ie,{variant:"secondary",onClick:()=>j(T.id),disabled:k,className:"!p-1.5 !h-8 text-red-500 hover:text-red-600 hover:bg-red-50",title:"Unassign Shop",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"link_off"})})]},T.id))})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-3",children:["Available to Assign (",u.length,")"]}),u.length===0?e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"All shops are assigned"}):e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-auto pr-2",children:u.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/30 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:T.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[T.code,"  ",T.city]})]}),e.jsxs(ie,{variant:"primary",onClick:()=>C(T.id),disabled:k,className:"!px-3 !py-1 !text-xs gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:14},children:"link"}),"Assign"]})]},T.id))})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"arrow_back"}),e.jsx("p",{children:"Select a warehouse to manage shops"})]})})]})]})})}function C0({label:l,error:n,options:c,placeholder:i,className:u="",...h}){return e.jsxs("div",{className:"w-full",children:[l&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[l,h.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:`input appearance-none ${n?"border-red-500":""} ${u}`,...h,children:[i&&e.jsx("option",{value:"",children:i}),c.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"expand_more"})})]}),n&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),n]})]})}function Yi({value:l,onChange:n,options:c,label:i,placeholder:u="Select...",error:h,required:x,disabled:b,className:v=""}){const[p,g]=m.useState(!1),[f,k]=m.useState(""),w=m.useRef(null);m.useEffect(()=>{const C=c.find(j=>j.value===l);C&&k(C.label)},[l,c]),m.useEffect(()=>{function C(j){if(w.current&&!w.current.contains(j.target)){g(!1);const T=c.find(S=>S.value===l);T?k(T.label):l||k("")}}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[w,l,c]);const N=c.filter(C=>{const j=C.label.toLowerCase().replace(/\s+/g,""),T=f.toLowerCase().replace(/\s+/g,"");if(j.includes(T))return!0;const S=f.toLowerCase().split(/\s+/).filter(O=>O.length>0),M=C.label.toLowerCase();return S.every(O=>M.includes(O))});return e.jsxs("div",{className:`w-full ${v}`,ref:w,children:[i&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[i,x&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:f,onChange:C=>{k(C.target.value),g(!0),C.target.value||n("")},onFocus:()=>g(!0),placeholder:u,disabled:b,className:`input w-full ${h?"border-red-500":""} ${b?"opacity-50 cursor-not-allowed":""}`}),p&&!b&&e.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-60 overflow-auto",children:N.length>0?N.map(C=>e.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 ${l===C.value?"bg-primary/10 text-primary font-medium":"text-slate-700 dark:text-slate-300"}`,onClick:()=>{n(C.value),k(C.label),g(!1)},children:C.label},C.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-slate-500 text-center",children:"No matches found"})})]}),h&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),h]})]})}function E0(){const l=Pe(),{activeEntity:n}=Mt(),{hasPermission:c}=nt(),i=n?.type==="warehouse"?c("inventory.entry.warehouse"):c("inventory.entry.shop");m.useEffect(()=>{!i&&n&&l("/")},[i,n,l]);const[u,h]=m.useState([]),[x,b]=m.useState([]),[v,p]=m.useState([]),g=n?.type,f=n?.id||"",k=n?.name||"",[w,N]=m.useState(""),[C,j]=m.useState(""),[T,S]=m.useState(""),[M,O]=m.useState(""),[R,G]=m.useState(""),[q,ce]=m.useState(""),[F,ue]=m.useState(""),[be,D]=m.useState(!1),[V,ee]=m.useState({type:"",text:""}),[Y,U]=m.useState([]),[se,Z]=m.useState("");m.useEffect(()=>{(!n||n.type!=="warehouse"&&n.type!=="shop")&&l("/")},[n,l]),m.useEffect(()=>{n&&(P(),n.type==="warehouse"&&E())},[n]),m.useEffect(()=>{w?I(w):b([]),j(""),S(""),G(""),Z("")},[w]);const P=async()=>{try{const de=await Rt.list({size:500});h(de.data.items||de.data)}catch(de){console.error("Error loading medicines:",de)}},I=async de=>{try{const X=await Rt.getBatches(de);let ae=[];X.data&&(Array.isArray(X.data)?ae=X.data:X.data.items&&Array.isArray(X.data.items)?ae=X.data.items:X.data.data&&Array.isArray(X.data.data)&&(ae=X.data.data)),b(ae)}catch(X){console.error("Error loading batches:",X),b([])}},E=async()=>{try{const de=await Mi.list({size:500});p(de.data.items||[])}catch(de){console.error("Error loading racks:",de)}},L=Ca(),[_,H]=m.useState(null),[$,le]=m.useState([]);m.useEffect(()=>{L.state?.dispatchId&&(H(L.state.dispatchId),je(L.state.dispatchId))},[L.state]);const je=async de=>{try{D(!0);const X=await ns.get(de);le(X.data.items||[])}catch(X){console.error("Failed to load dispatch",X),ee({type:"error",text:"Failed to load dispatch details"})}finally{D(!1)}},he=async(de,X,ae=!1)=>{const ve=[...$];if(ve[X].status="received",ve[X].rack_name=de.rack_name||q,ve[X].rack_number=de.rack_number||F,le(ve),ve.every(ke=>ke.status==="received"))try{D(!0),await ns.updateStatus(_,"delivered"),ee({type:"success",text:"All items received. Stock added to inventory. Dispatch marked as Delivered."}),setTimeout(()=>l("/dispatches"),2e3)}catch(ke){console.error(ke),ee({type:"error",text:"Failed to mark dispatch as delivered"})}finally{D(!1)}else ae||ee({type:"success",text:"Item marked as received. Complete all items to add stock to inventory."})},ne=de=>{if(Z(de),de){const X=x.find(ae=>ae.id===de);X&&(j(X.batch_number),S(X.expiry_date))}},Ee=async de=>{if(de.preventDefault(),!f||!w||!C||!T||!M){ee({type:"error",text:"Please fill all required fields"});return}D(!0);try{const X={medicine_id:w,batch_number:C,expiry_date:T,quantity:parseInt(M),purchase_price:parseFloat(R)||0,selling_price:u.find(ve=>ve.id===w)?.selling_price||0};g==="warehouse"?(X.warehouse_id=f,X.rack_name=q||void 0,X.rack_number=F||void 0):X.shop_id=f,await dn.stockEntry(X);const ae=u.find(ve=>ve.id===w);U(ve=>[{medicine:ae?.name,batch:C,quantity:parseInt(M),rack:X.rack_name?`${X.rack_number||""} / ${X.rack_name}`:"-",timestamp:new Date().toLocaleTimeString()},...ve.slice(0,9)]),ee({type:"success",text:"Stock entry added successfully"}),O(""),G(""),ce(""),ue(""),j(""),S(""),N(""),Z("")}catch(X){ee({type:"error",text:X.response?.data?.detail||"Failed to add stock entry"})}finally{D(!1)}};return e.jsx(Yt,{title:`${g==="shop"?"Shop":"Warehouse"} Stock Entry`,description:`Add new inventory items to your ${g}`,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Ze,{title:"Add Stock",icon:"add_circle",children:[V.text&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-start gap-3 ${V.type==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:V.type==="error"?"error":"check_circle"}),e.jsx("p",{children:V.text})]}),_?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-xl mb-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Receiving Dispatch Shipment"}),e.jsxs("p",{className:"text-sm",children:["Verify and accept items below. Status: ",L.state?.status]})]}),e.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-xl mb-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Bulk Receive Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(ge,{label:"Global Rack No",value:F,onChange:de=>ue(de.target.value),placeholder:"Apply to all items",className:"bg-white"}),e.jsx(ge,{label:"Global Box Name",value:q,onChange:de=>ce(de.target.value),placeholder:"Apply to all items",className:"bg-white"}),e.jsx("div",{className:"flex items-end",children:e.jsx(ie,{onClick:async()=>{if(confirm("Receive all remaining items with these rack details?")){D(!0);try{const de=$.filter(X=>X.status!=="received");for(const X of de){const ae=$.findIndex(ve=>ve===X);await he(X,ae,!0)}ee({type:"success",text:"All items received successfully"}),setTimeout(()=>l("/dispatches"),1500)}catch(de){console.error(de)}finally{D(!1)}}},variant:"primary",className:"w-full justify-center",disabled:be||$.every(de=>de.status==="received"),children:"Receive All Remaining"})})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Enters the specified Rack/Box for all items and marks them as received. Individual inputs below override these if set."})]}),$.map((de,X)=>e.jsxs("div",{className:`p-4 rounded-xl border mb-4 ${de.status==="received"?"bg-green-50 border-green-200 opacity-75":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-white text-lg",children:de.medicine_name}),e.jsxs("div",{className:"text-sm text-slate-500",children:[de.manufacturer,"  Batch: ",de.batch_number]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Exp: ",de.expiry_date,"  MRP: ",de.mrp]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:de.quantity}),e.jsx("div",{className:"text-xs text-slate-500",children:"Qty"})]})]}),de.status!=="received"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ge,{label:"Rack No",value:de.rack_number||"",onChange:ae=>{const ve=[...$];ve[X].rack_number=ae.target.value,le(ve)},placeholder:F||"R-01",className:"!text-sm"}),e.jsx(ge,{label:"Box Name",value:de.rack_name||"",onChange:ae=>{const ve=[...$];ve[X].rack_name=ae.target.value,le(ve)},placeholder:q||"Shelf A",className:"!text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(ie,{onClick:()=>he(de,X),variant:"success",className:"w-full justify-center !py-2",disabled:be,children:"Accept"})})]}):e.jsxs("div",{className:"mt-2 flex items-center text-green-600 font-medium",children:[e.jsx("span",{className:"material-symbols-outlined mr-2",children:"check_circle"}),"Received to ",de.rack_name||de.rack_number||"Stock"]})]},X)),$.length===0&&!be&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No items found in dispatch."})]}):e.jsxs("form",{onSubmit:Ee,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-white mb-2 capitalize",children:g}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-700 dark:text-slate-300 font-medium flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:g==="warehouse"?"warehouse":"store"}),k]})]}),e.jsxs("div",{children:[e.jsx(Yi,{label:"Medicine *",value:w,onChange:de=>N(de),required:!0,options:u.map(de=>({value:de.id,label:`${de.name} ${de.brand?`(${de.brand})`:""} - ${de.manufacturer}`})),placeholder:"Select Medicine"}),w&&(()=>{const de=u.find(X=>X.id===w);return de?e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg text-sm grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between col-span-2 border-b border-blue-200 dark:border-blue-800 pb-2 mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Brand:"}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[de.brand||"-"," (",de.manufacturer,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Generic:"})," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:de.generic_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"MRP:"})," ",e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["",de.mrp]})]})]}):null})()]}),x.length>0&&e.jsx("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:e.jsx(C0,{label:"Quick Fill from Existing Batch (Optional)",value:se,onChange:de=>ne(de.target.value),placeholder:"-- Use new batch details below --",options:x.map(de=>({value:de.id,label:`${de.batch_number} (Exp: ${de.expiry_date})`})),className:"!bg-white"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Batch Number *",value:C,onChange:de=>j(de.target.value.toUpperCase()),placeholder:"New or Existing Batch Number",required:!0,disabled:!w,className:"font-mono"}),e.jsx(ge,{label:"Expiry Date *",type:"date",value:T,onChange:de=>S(de.target.value),required:!0,disabled:!w})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Quantity *",type:"number",value:M,onChange:de=>O(de.target.value),placeholder:"Enter quantity",min:"1",required:!0}),e.jsx(ge,{label:"Purchase Price () *",type:"number",step:"0.01",value:R,onChange:de=>G(de.target.value),placeholder:"Enter purchase price",min:"0",required:!0})]}),g==="warehouse"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(C0,{label:"Rack No",value:v.find(de=>de.rack_number===F)?.id||"",onChange:de=>{const X=v.find(ae=>ae.id===de.target.value);X&&ue(X.rack_number)},options:v.map(de=>({value:de.id,label:`${de.rack_number} - ${de.rack_name}`})),placeholder:"Select Rack"}),e.jsx(ge,{label:"Box Name / Location (Optional)",value:q,onChange:de=>ce(de.target.value),placeholder:"e.g., Shelf A, Box 2"})]}),e.jsx(ie,{type:"submit",variant:"primary",loading:be,className:"w-full justify-center",children:"Add Stock Entry"})]})]}),e.jsx(Ze,{title:"Recent Entries",icon:"history",className:"h-fit",children:Y.length>0?e.jsx("ul",{className:"space-y-4",children:Y.map((de,X)=>e.jsxs("li",{className:"flex justify-between items-start p-3 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 animate-fadeIn",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:de.medicine}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded bg-white border border-slate-200 text-slate-600",children:["Batch: ",de.batch]}),de.rack&&de.rack!=="-"&&e.jsxs(Ye,{variant:"info",className:"!py-0.5",children:[" ",de.rack]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["+ ",de.quantity]}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:de.timestamp})]})]},X))}):e.jsxs("div",{className:"text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-900/30 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"post_add"}),e.jsx("p",{children:"No recent entries"}),e.jsx("p",{className:"text-sm opacity-75",children:"Added stock will appear here"})]})})]})})}function Zj(){const l=Pe(),{activeEntity:n}=Mt(),{hasPermission:c}=nt(),i=n?.type==="warehouse"?c("inventory.adjust.warehouse"):c("inventory.adjust.shop");m.useEffect(()=>{i||l("/")},[i,l]);const[u,h]=m.useState([]),[x,b]=m.useState([]),[v,p]=m.useState(!1),[g,f]=m.useState(""),[k,w]=m.useState(""),[N,C]=m.useState("decrease"),[j,T]=m.useState(""),[S,M]=m.useState(""),[O,R]=m.useState(!1),[G,q]=m.useState({type:"",text:""});m.useEffect(()=>{ce()},[]),m.useEffect(()=>{g?(F(g),w("")):(b([]),p(!1))},[g]);const ce=async()=>{try{const D=await Rt.list({size:500});h(D.data.items||D.data)}catch(D){console.error("Error loading medicines:",D)}},F=async D=>{p(!0);try{console.log("Loading batches for medicine:",D);const V=await Rt.getBatches(D);console.log("Batches API response:",V.data);const ee=V.data?.batches||[];console.log("Extracted batches:",ee),b(ee),ee.length===0?q({type:"error",text:"No batches found for this medicine. Please add stock first."}):G.type==="error"&&G.text.includes("No batches")&&q({type:"",text:""})}catch(V){console.error("Error loading batches:",V),console.error("Error details:",V.response?.data),b([]),q({type:"error",text:V.response?.data?.detail||"Failed to load batches"})}finally{p(!1)}},ue=async D=>{if(D.preventDefault(),!g||!k||!j||!S){q({type:"error",text:"Please fill all required fields"});return}R(!0),q({type:"",text:""});try{const V={medicine_id:g,batch_id:k,adjustment_type:N,quantity:parseInt(j),reason:S};if(n?.type==="warehouse")V.warehouse_id=n.id;else if(n?.type==="shop")V.shop_id=n.id;else{q({type:"error",text:"Please select a warehouse or shop context"}),R(!1);return}await dn.adjustStock(V),q({type:"success",text:"Stock adjusted successfully"}),T(""),M(""),F(g)}catch(V){q({type:"error",text:V.response?.data?.detail||"Failed to adjust stock"})}finally{R(!1)}},be=x.find(D=>D.id===k);return e.jsxs("div",{className:"p-6 lg:p-8 max-w-4xl mx-auto animate-fadeIn",children:[e.jsxs("button",{onClick:()=>l("/inventory"),className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white mb-6 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back"}),e.jsx("span",{children:"Back to Inventory"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white",children:" Stock Adjustment"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Correct stock levels for damages, expiry, or corrections."}),n&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-sm font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:n.type==="warehouse"?"warehouse":"storefront"}),e.jsx("span",{children:n.name})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[G.text&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-start gap-3 ${G.type==="error"?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:G.type==="error"?"error":"check_circle"}),e.jsx("p",{children:G.text})]}),e.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(Yi,{label:"Medicine *",value:g,onChange:D=>f(D),required:!0,options:u.map(D=>({value:D.id,label:`${D.name} ${D.brand?`(${D.brand})`:""}`})),placeholder:"Select Medicine"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Batch *"}),e.jsxs("select",{value:k,onChange:D=>w(D.target.value),required:!0,disabled:!g||v,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50 disabled:opacity-50",children:[e.jsx("option",{value:"",children:g?v?"Loading batches...":x.length===0?"No batches available":"Select Batch":"Select medicine first"}),x.map(D=>e.jsxs("option",{value:D.id,children:[D.batch_number," (Stock: ",D.quantity,", Exp: ",new Date(D.expiry_date).toLocaleDateString(),")"]},D.id))]}),g&&x.length===0&&!v&&e.jsxs("p",{className:"mt-2 text-sm text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"info"}),"No batches found for this medicine. Add stock first."]})]})]}),be&&e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Current Stock"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:be.quantity})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Expiry Date"}),e.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mt-1",children:be.expiry_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Adjustment Type"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl",children:[e.jsx("button",{type:"button",onClick:()=>C("decrease"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${N==="decrease"?"bg-white dark:bg-slate-700 text-red-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Decrease (-)"}),e.jsx("button",{type:"button",onClick:()=>C("increase"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${N==="increase"?"bg-white dark:bg-slate-700 text-green-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Increase (+)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quantity to Adjust *"}),e.jsx("input",{type:"number",value:j,onChange:D=>T(D.target.value),min:"1",placeholder:"Example: 5",required:!0,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Reason for Adjustment *"}),e.jsx("textarea",{value:S,onChange:D=>M(D.target.value),placeholder:"e.g. Broken in transit, Expired stock removal...",required:!0,rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50 resize-none"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:O,className:`w-full py-3 rounded-xl font-semibold text-white shadow-lg shadow-blue-500/20 transition-all active:scale-[0.98] ${O?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"}`,children:O?"Processing Adjustment...":"Confirm Adjustment"})})]})]})]})}function yd(){const{activeEntity:l,scope:n}=Mt(),[c,i]=m.useState("stock"),[u,h]=m.useState([]),[x,b]=m.useState([]),[v,p]=m.useState(!0),[g,f]=m.useState(""),[k,w]=m.useState(""),[N,C]=m.useState(""),[j,T]=m.useState(1),[S,M]=m.useState(0),[O,R]=m.useState(20);m.useEffect(()=>{c==="stock"?G():q()},[c,j,O,g,k,N,l]);const G=async()=>{p(!0);try{let D;const V={page:j,size:O};if(N&&(V.search=N),l?.type==="warehouse")D=await Dt.getStock(l.id,V);else if(l?.type==="shop")D=await _t.getStock(l.id,V);else if(n==="global")if(g)D=await Dt.getStock(g,V);else{b([]),M(0),p(!1);return}D?.data&&(b(D.data.items||[]),M(D.data.total||0))}catch(D){console.error("Failed to fetch stock:",D),b([])}finally{p(!1)}},q=async()=>{try{p(!0);const D={page:j,size:O};l?.type==="warehouse"?D.warehouse_id=l.id:l?.type==="shop"?D.shop_id=l.id:n==="global"&&g&&(D.warehouse_id=g),k&&(D.movement_type=k);const V=await dn.getMovements(D);let ee=[];V.data&&(Array.isArray(V.data)?ee=V.data:V.data.items&&Array.isArray(V.data.items)?ee=V.data.items:V.data.data&&Array.isArray(V.data.data)&&(ee=V.data.data)),h(ee),M(V.data?.total||ee.length)}catch(D){console.error("Failed to fetch movements:",D),h([]),M(0)}finally{p(!1)}},ce=D=>{switch(D){case"in":return"success";case"out":return"error";case"transfer":return"info";case"adjustment":return"warning";default:return"secondary"}},F=D=>{switch(D){case"in":return"login";case"out":return"logout";case"transfer":return"swap_horiz";case"adjustment":return"tune";default:return"history"}},ue=[{header:"Medicine Name",key:"medicine_name",render:D=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:D.medicine_name}),e.jsx("p",{className:"text-[11px] text-slate-500",children:D.medicine_code||"N/A"})]})},{header:"Brand",key:"brand",className:"hidden md:table-cell",render:D=>e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:D.brand||"-"})},{header:"Batch Info",key:"batch_number",render:D=>e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-xs bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:D.batch_number}),D.expiry_date&&e.jsxs("p",{className:"text-[10px] text-slate-500 mt-0.5",children:["Exp: ",new Date(D.expiry_date).toLocaleDateString()]})]})},{header:"Location",key:"rack_name",className:"hidden lg:table-cell",render:D=>e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:D.rack_name||D.rack_number?e.jsxs("span",{children:[D.rack_name," ",D.rack_number?`(${D.rack_number})`:""]}):e.jsx("span",{className:"italic text-slate-400",children:"No Rack"})})},{header:"Quantity",key:"quantity",align:"right",render:D=>e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:D.quantity.toLocaleString()})}],be=[{header:"Details",key:"id",render:D=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[11px] font-mono text-slate-500",children:D.reference_type.toUpperCase()}),e.jsxs("span",{className:"text-[11px] text-slate-400",children:["By: ",D.performed_by||"System"]})]})},{header:"Product",key:"medicine_name",render:D=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:D.medicine_name}),e.jsxs("p",{className:"text-[11px] text-slate-500",children:["Batch: ",D.batch_number]})]})},{header:"Type",key:"movement_type",render:D=>e.jsxs(Ye,{variant:ce(D.movement_type),className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:F(D.movement_type)}),e.jsx("span",{className:"capitalize",children:D.movement_type})]})},{header:"Qty",key:"quantity",align:"right",render:D=>e.jsxs("span",{className:`font-mono text-sm font-medium ${D.movement_type==="out"?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[D.movement_type==="out"?"-":"+",Math.abs(D.quantity)]})},{header:"Date",key:"created_at",align:"right",render:D=>e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:new Date(D.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-[10px] text-slate-400",children:new Date(D.created_at).toLocaleTimeString()})]})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Inventory Management",subtitle:`Manage stock and view history ${n==="global"?"across all locations":l?.name?`for ${l.name}`:""}`,actions:e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>{i("stock"),T(1)},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${c==="stock"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Current Stock"}),e.jsx("button",{onClick:()=>{i("movements"),T(1)},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${c==="movements"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"History"})]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:c==="stock"?"Total Stock Items":"Total Movements",value:S,icon:c==="stock"?"inventory_2":"history",onClick:()=>{},isActive:!0}),e.jsx(Ne,{title:"Stock In",value:"-",icon:"login",trend:"neutral"}),e.jsx(Ne,{title:"Stock Out",value:"-",icon:"logout",trend:"neutral"}),e.jsx(Ne,{title:"Transfers",value:"-",icon:"swap_horiz",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:c==="stock"?ue:be,data:c==="stock"?x:u,loading:v,emptyMessage:c==="stock"?"No stock found in this location.":"No stock movements found.",pagination:{currentPage:j,totalPages:Math.ceil(S/O),onPageChange:T,totalItems:S,pageSize:O,onPageSizeChange:D=>{R(D),T(1)}},headerSlot:e.jsx(ye.ListControls,{title:c==="stock"?"Stock List":"Movement List",count:S,searchProps:c==="stock"?{value:N,onChange:D=>{C(D),T(1)},placeholder:"Search medicines..."}:void 0,actions:e.jsxs("div",{className:"flex items-center gap-2",children:[n==="global"&&e.jsxs("select",{value:g,onChange:D=>{f(D.target.value),T(1)},className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),e.jsx("option",{value:"WH001",children:"Central Warehouse"})]}),c==="movements"&&e.jsxs("select",{value:k,onChange:D=>{w(D.target.value),T(1)},className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"in",children:"Stock In"}),e.jsx("option",{value:"out",children:"Stock Out"}),e.jsx("option",{value:"transfer",children:"Transfer"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]})]}),embedded:!0})})]})}function Kr(){const l=Ca(),{activeEntity:n,scope:c}=Mt(),{isLoading:i}=ht(),u=()=>{const S=l.pathname;return S.includes("/expiry")?"expiry":S.includes("/dead-stock")?"dead-stock":S.includes("/shop")?"shop":"warehouse"},[h,x]=m.useState(u()),[b,v]=m.useState([]),[p,g]=m.useState(!0),[f,k]=m.useState(""),[w,N]=m.useState("");m.useEffect(()=>{x(u())},[l.pathname]),m.useEffect(()=>{n?.type==="warehouse"?k(n.id):n?.type==="shop"&&N(n.id)},[n]),m.useEffect(()=>{C()},[h,f,w,n]);const C=async()=>{g(!0);try{const S={};n?.type==="warehouse"&&(S.warehouse_id=n.id),n?.type==="shop"&&(S.shop_id=n.id);const R=((await dn.getAlerts(S)).data?.alerts||[]).map(G=>({id:G.id||Math.random().toString(),medicine_name:G.medicine_name,brand:G.brand,batch_number:G.batch_number||"N/A",quantity:G.current_quantity||0,location_type:G.location_type||"warehouse",location_name:G.location_name||"Unknown",expiry_date:G.expiry_date||"",days_to_expiry:G.days_to_expiry||0,last_movement:G.last_movement_date}));v(R)}catch(S){console.error("Failed to load stock data:",S),v([])}finally{g(!1)}},j=[{id:"warehouse",label:"Warehouse Stock",icon:"warehouse",description:n?.type==="warehouse"?`${n.name} inventory`:"All warehouse inventory"},{id:"shop",label:"Shop Stock (Derived)",icon:"storefront",description:n?.type==="shop"?`${n.name} stock`:"Stock derived from dispatches"},{id:"expiry",label:"Expiry Monitoring",icon:"schedule",description:n?`Items expiring soon in ${n.name}`:"Items expiring soon"},{id:"dead-stock",label:"Dead Stock",icon:"block",description:n?`No movement in 90+ days at ${n.name}`:"No movement in 90+ days"}],T={totalItems:b.length,totalQuantity:b.reduce((S,M)=>S+M.quantity,0),expiringSoon:b.filter(S=>S.days_to_expiry>0&&S.days_to_expiry<=30).length,expired:b.filter(S=>S.days_to_expiry<=0).length};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-2 py-1 text-xs font-bold bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:"READ-ONLY"})}),e.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:["Inventory Oversight",n&&e.jsxs("span",{className:"text-lg font-normal text-slate-500 dark:text-slate-400 ml-2",children:["- ",n.type==="shop"?"Pharmacy":"Warehouse",": ",n.name]})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:n?`${n.type==="shop"?"Pharmacy":"Warehouse"} inventory view for ${n.name}. This is a read-only oversight view.`:"Global view of all inventory across warehouses and shops. This is a read-only view for Super Admin oversight."}),n&&e.jsx("div",{className:"mt-3 flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400 text-base",children:n.type==="shop"?"storefront":"warehouse"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:[n.type==="shop"?"Pharmacy":"Warehouse",": ",n.name]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"inventory_2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:T.totalItems}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Items"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"package_2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:T.totalQuantity.toLocaleString()}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Quantity"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-orange-200 dark:border-orange-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-orange-600",children:"schedule"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:T.expiringSoon}),e.jsx("p",{className:"text-xs text-slate-500",children:"Expiring Soon"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:T.expired}),e.jsx("p",{className:"text-xs text-slate-500",children:"Expired"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:j.map(S=>e.jsxs("button",{onClick:()=>x(S.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${h===S.id?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:S.icon}),S.label]},S.id))})}),e.jsx("div",{className:"px-6 py-3 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:j.find(S=>S.id===h)?.description})}),e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[(h==="warehouse"||h==="expiry"||h==="dead-stock")&&e.jsx(Qd,{value:f,onChange:k,placeholder:"All Warehouses",className:"w-[200px]",disabled:c!=="global"&&n?.type==="warehouse"}),h==="shop"&&e.jsx(Vd,{value:w,onChange:N,placeholder:"All Shops",className:"w-[200px]",disabled:c!=="global"&&n?.type==="shop"}),e.jsx("button",{onClick:C,className:"px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"p-6",children:p?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):b.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:j.find(S=>S.id===h)?.icon}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No data available"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:h==="dead-stock"?"No dead stock items found. All items have recent movement.":"No inventory data matches your filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Brand"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase",children:"Quantity"}),(h==="expiry"||h==="dead-stock")&&e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-500 uppercase",children:h==="expiry"?"Expiry":"Last Movement"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:b.map((S,M)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${M*20}ms`},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:S.medicine_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:S.brand||"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:S.batch_number})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-slate-400",children:S.location_type==="warehouse"?"warehouse":"storefront"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:S.location_name})]})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono font-medium text-slate-900 dark:text-white",children:S.quantity.toLocaleString()}),h==="expiry"&&e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${S.days_to_expiry<=0?"bg-red-100 text-red-700":S.days_to_expiry<=30?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:S.days_to_expiry<=0?"Expired":`${S.days_to_expiry} days`})}),h==="dead-stock"&&e.jsx("td",{className:"px-4 py-3 text-center text-sm text-slate-500",children:S.last_movement?new Date(S.last_movement).toLocaleDateString():"Never"})]},S.id))})]})})}),e.jsx("div",{className:"px-6 py-4 bg-purple-50 dark:bg-purple-900/10 border-t border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 dark:text-purple-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"info"}),e.jsx("p",{className:"text-sm",children:"This is a read-only oversight view. To make inventory adjustments, use the operational modules."})]})})]})]})}function Kj(){const l=Pe(),{hasPermission:n}=nt(),[c,i]=m.useState([]),[u,h]=m.useState(!0),[x,b]=m.useState(""),[v,p]=m.useState(""),[g,f]=m.useState(1),[k,w]=m.useState(0),[N,C]=m.useState(10);m.useEffect(()=>{j()},[g,N,x,v]);const j=async()=>{try{h(!0);const F={page:g,size:N};x&&(F.search=x),v&&(F.category=v);const ue=await Rt.list(F);i(ue.data.items||[]),w(ue.data.total||0)}catch(F){console.error("Failed to fetch medicines:",F),i([])}finally{h(!1)}},[T,S]=m.useState(!1),[M,O]=m.useState(null),R=F=>{O(F),S(!0)},G=async()=>{if(M)try{await Rt.delete(M.id),window.toast?.success("Medicine deleted successfully"),j()}catch(F){console.error("Failed to delete medicine:",F),window.toast?.error(F.response?.data?.detail||"Failed to delete medicine")}finally{S(!1),O(null)}},q={total:k,active:c.filter(F=>F.is_active).length,lowStock:c.filter(F=>F.total_stock<50).length,categories:new Set(c.map(F=>F.category).filter(Boolean)).size||0},ce=[{header:"Medicine",key:"name",render:F=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"medication"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:F.name}),e.jsx("div",{className:"text-xs text-slate-500",children:F.generic_name})]})]})},{header:"Mfg",key:"manufacturer",className:"hidden md:table-cell",render:F=>e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-sm",children:F.manufacturer})},{header:"Purchase",key:"purchase_price",align:"right",className:"hidden lg:table-cell",render:F=>e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:["",F.purchase_price?.toFixed(2)]})},{header:"MRP",key:"mrp",align:"right",className:"hidden sm:table-cell",render:F=>e.jsxs("span",{className:"text-slate-500 dark:text-slate-400 line-through text-xs mr-2",children:["",F.mrp.toFixed(2)]})},{header:"Sale Value",key:"selling_price",align:"right",render:F=>e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:["",(F.selling_price||F.mrp).toFixed(2)]})},{header:"GST",key:"gst_rate",align:"center",className:"hidden xl:table-cell",render:F=>e.jsxs(Ye,{variant:"secondary",children:[F.gst_rate,"%"]})},{header:"Stock",key:"total_stock",align:"right",render:F=>e.jsx("span",{className:`font-medium ${F.total_stock<50?"text-red-600 dark:text-red-400":"text-slate-600 dark:text-slate-400"}`,children:F.total_stock.toLocaleString()})},{header:"Status",key:"is_active",align:"center",className:"hidden sm:table-cell",render:F=>e.jsx(Ye,{variant:F.is_active?"success":"secondary",children:F.is_active?"Active":"Inactive"})},{header:"Actions",key:"id",align:"right",render:F=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("medicines.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>l(`/medicines/${F.id}/edit`),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Medicine",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("medicines.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>R(F),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",title:"Delete Medicine",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Medicines",subtitle:"Manage your medicine catalog",actions:n("medicines.create")&&e.jsxs(ie,{variant:"primary",onClick:()=>l("/medicines/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Medicine"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Medicines",value:q.total,icon:"medication",onClick:()=>p(""),isActive:v===""}),e.jsx(Ne,{title:"Active",value:q.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Low Stock",value:q.lowStock,icon:"warning",trend:"down",changeType:"down"}),e.jsx(Ne,{title:"Categories",value:q.categories,icon:"category",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:ce,data:c,loading:u,emptyMessage:"No medicines found. Add items to your catalog.",pagination:{currentPage:g,totalPages:Math.ceil(k/N),onPageChange:f,totalItems:k,pageSize:N,onPageSizeChange:F=>{C(F),f(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Medicine List",count:k,searchProps:{value:x,onChange:F=>{b(F),f(1)},placeholder:"Search medicines..."},actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Yd,{value:v,onChange:F=>{p(F),f(1)},className:"!w-48 !py-1.5 !text-sm !rounded-lg"})}),embedded:!0})}),e.jsx(Qt,{isOpen:T,onClose:()=>S(!1),onConfirm:G,title:"Delete Medicine",message:`Are you sure you want to delete "${M?.name}"? This action cannot be undone.`,confirmText:"Delete Medicine"})]})}function Ui({permission:l,anyOf:n,allOf:c,module:i,children:u,fallback:h=null}){const{hasPermission:x,hasAnyPermission:b,hasAllPermissions:v,hasModuleAccess:p}=nt();let g=!1;return l?g=x(l):n&&n.length>0?g=b(n):c&&c.length>0?g=v(c):i?g=p(i):g=!0,g?e.jsx(e.Fragment,{children:u}):e.jsx(e.Fragment,{children:h})}function Jj(){const{id:l}=sn(),n=Pe(),[c,i]=m.useState(!0),[u,h]=m.useState(null),[x,b]=m.useState([]);m.useEffect(()=>{l&&v()},[l]);const v=async()=>{try{i(!0);const[f,k]=await Promise.all([Rt.get(l),Rt.getBatches(l)]);h(f.data),b(k.data?.batches||[])}catch(f){console.error("Failed to fetch medicine:",f)}finally{i(!1)}};if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})});if(!u)return e.jsx(Yt,{title:"Medicine Not Found",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-300",children:"medication_off"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"The requested medicine could not be found."}),e.jsx(ie,{variant:"primary",className:"mt-4",onClick:()=>n("/medicines"),children:"Back to Medicines"})]})});const p=Math.round((1-u.purchase_price/u.mrp)*100),g=x.reduce((f,k)=>f+k.quantity,0);return e.jsx(Yt,{title:u.name,description:`${u.generic_name}  ${u.manufacturer}`,actions:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ui,{permission:"medicines.edit",children:e.jsxs(ie,{variant:"secondary",onClick:()=>n(`/medicines/${u.id}/edit`),children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"edit"}),"Edit"]})}),e.jsx(Ui,{anyOf:["inventory.entry.warehouse","inventory.entry.shop"],children:e.jsxs(ie,{variant:"primary",onClick:()=>n("/warehouses/stock"),children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"add"}),"Add Stock"]})})]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(Ze,{title:"Basic Information",icon:"medication",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsx(Vl,{label:"Brand",value:u.brand||"-"}),e.jsx(Vl,{label:"Category",value:u.category}),e.jsx(Vl,{label:"Type",value:u.medicine_type}),e.jsx(Vl,{label:"Strength",value:u.strength||"-"}),e.jsx(Vl,{label:"Pack Size",value:`${u.pack_size} ${u.unit}`}),e.jsx(Vl,{label:"HSN Code",value:u.hsn_code||"-"})]}),u.composition&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Composition"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.composition})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[u.is_prescription_required&&e.jsxs(Ye,{variant:"error",className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"prescription"}),"Rx Required"]}),u.is_controlled&&e.jsxs(Ye,{variant:"warning",className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),"Controlled"]})]})]}),e.jsxs(Ze,{title:"Batch Information",icon:"inventory_2",padding:"0",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:["Total Batches: ",x.length]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-xs uppercase text-slate-500 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Batch No."}),e.jsx("th",{className:"px-6 py-3",children:"Mfg Date"}),e.jsx("th",{className:"px-6 py-3",children:"Exp Date"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Qty"}),e.jsx("th",{className:"px-6 py-3 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-500",children:"No batch information available"})}):x.map(f=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-xs font-medium text-primary",children:f.batch_number}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:f.manufacturing_date}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:f.expiry_date}),e.jsx("td",{className:"px-6 py-4 text-right font-medium text-slate-900 dark:text-white",children:f.quantity}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(Ye,{variant:f.is_expired?"error":f.days_to_expiry<60?"warning":"success",children:f.is_expired?"Expired":f.days_to_expiry<60?"Expiring Soon":"Active"})})]},f.id))})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ze,{title:"Pricing",icon:"payments",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"MRP"}),e.jsxs("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["",u.mrp.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Purchase Price"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["",u.purchase_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Profit Margin"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:[p,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"GST Rate"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:[u.gst_rate,"%"]})]})]})}),e.jsxs(Ze,{title:"Stock Summary",icon:"inventory",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:g}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Units in Stock"})]}),u.storage_conditions&&e.jsx("div",{className:"mt-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-600 dark:text-amber-400 text-[20px]",children:"thermostat"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-amber-800 dark:text-amber-300 mb-0.5",children:"Storage Conditions"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:u.storage_conditions})]})]})})]}),e.jsx(Ze,{title:"Location",icon:"location_on",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Rack Name"}),e.jsx("p",{className:"font-medium",children:u.rack_name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Rack Number"}),e.jsx("p",{className:"font-medium",children:u.rack_number||"-"})]})]})})]})]})})}function Vl({label:l,value:n}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:l}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",title:n,children:n||"-"})]})}function Wj(){const l=Pe(),{isLoading:n,refresh:c}=ht();m.useEffect(()=>{c()},[c]);const[i,u]=m.useState({name:"",generic_name:"",brand:"",manufacturer:"",medicine_type:"tablet",category:"",composition:"",strength:"",unit:"Strip",pack_size:10,hsn_code:"",gst_rate:12,mrp:0,purchase_price:0,selling_price:0,is_prescription_required:!1,is_controlled:!1,storage_conditions:""}),[h,x]=m.useState(!1),[b,v]=m.useState(""),p=async g=>{if(g.preventDefault(),v(""),!i.name||!i.category||i.mrp<=0){v("Please fill in all required fields (Name, Category, MRP)");return}x(!0);try{await Rt.create(i),l("/medicines")}catch(f){console.error("Failed to create medicine:",f);const k=f.response?.data?.detail;if(Array.isArray(k)){const w=k.map(N=>`${N.loc?.slice(1).join(".")||"Unknown field"}: ${N.msg}`);v(w.join(", "))}else typeof k=="string"?v(k):typeof k=="object"&&k?.msg?v(k.msg):v("Failed to create medicine")}finally{x(!1)}};return e.jsx(Yt,{title:"Add New Medicine",description:"Create a new medicine in your catalog",loading:n,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:p,children:e.jsxs(Ze,{className:"space-y-6",children:[b&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:b}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Medicine Name *",value:i.name,onChange:g=>u({...i,name:g.target.value}),placeholder:"Paracetamol 500mg",required:!0}),e.jsx(ge,{label:"Generic Name",value:i.generic_name,onChange:g=>u({...i,generic_name:g.target.value}),placeholder:"Paracetamol"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Brand"}),e.jsx(Mp,{value:i.brand,onChange:g=>u({...i,brand:g}),disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Manufacturer"}),e.jsx(zp,{value:i.manufacturer,onChange:g=>u({...i,manufacturer:g}),disabled:n})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx(Yd,{value:i.category,onChange:g=>u({...i,category:g}),required:!0,disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Medicine Type"}),e.jsx(Ap,{value:i.medicine_type,onChange:g=>u({...i,medicine_type:g}),disabled:n})]}),e.jsx(ge,{label:"Strength",value:i.strength,onChange:g=>u({...i,strength:g.target.value}),placeholder:"500mg"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Packaging"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit"}),e.jsx(Tp,{value:i.unit,onChange:g=>u({...i,unit:g}),disabled:n})]}),e.jsx(ge,{label:"Pack Size",type:"number",value:i.pack_size,onChange:g=>u({...i,pack_size:parseInt(g.target.value)||1}),min:"1"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"HSN Code"}),e.jsx(Gj,{value:i.hsn_code,onChange:(g,f)=>{u(k=>({...k,hsn_code:g,...f!==void 0?{gst_rate:f}:{}}))},disabled:n})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ge,{label:"MRP () *",type:"number",step:"0.01",value:i.mrp,onChange:g=>u({...i,mrp:parseFloat(g.target.value)||0}),min:"0",required:!0}),e.jsx(ge,{label:"Purchase Price ()",type:"number",step:"0.01",value:i.purchase_price,onChange:g=>u({...i,purchase_price:parseFloat(g.target.value)||0}),min:"0"}),e.jsx(ge,{label:"Sale Value ()",type:"number",step:"0.01",value:i.selling_price,onChange:g=>u({...i,selling_price:parseFloat(g.target.value)||0}),min:"0"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Rate (%)"}),e.jsx(Dp,{value:i.gst_rate,onChange:g=>u({...i,gst_rate:g}),disabled:n})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Composition"}),e.jsx("textarea",{value:i.composition,onChange:g=>u({...i,composition:g.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2,placeholder:"Active ingredients..."})]}),e.jsx(ge,{label:"Storage Conditions",value:i.storage_conditions,onChange:g=>u({...i,storage_conditions:g.target.value}),placeholder:"Store below 25C"}),e.jsxs("div",{className:"flex gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_prescription_required,onChange:g=>u({...i,is_prescription_required:g.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Prescription Required"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_controlled,onChange:g=>u({...i,is_controlled:g.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Controlled Substance"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",onClick:()=>l("/medicines"),type:"button",children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",loading:h,children:h?"Creating...":"Create Medicine"})]})]})})})})}function eN(){const l=Pe(),{id:n}=sn(),{isLoading:c}=ht(),[i,u]=m.useState({name:"",generic_name:"",brand:"",manufacturer:"",medicine_type:"tablet",category:"",composition:"",strength:"",unit:"Strip",pack_size:10,hsn_code:"",gst_rate:12,mrp:0,purchase_price:0,selling_price:0,is_prescription_required:!1,is_controlled:!1,storage_conditions:"",rack_number:"",rack_name:""}),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState("");m.useEffect(()=>{n&&f(n)},[n]);const f=async w=>{try{x(!0);const C=(await Rt.get(w)).data;u({name:C.name||"",generic_name:C.generic_name||"",brand:C.brand||"",manufacturer:C.manufacturer||"",medicine_type:C.medicine_type||"tablet",category:C.category||"",composition:C.composition||"",strength:C.strength||"",unit:C.unit||"Strip",pack_size:C.pack_size||10,hsn_code:C.hsn_code||"",gst_rate:C.gst_rate||12,mrp:C.mrp||0,purchase_price:C.purchase_price||0,selling_price:C.selling_price||0,is_prescription_required:C.is_prescription_required||!1,is_controlled:C.is_controlled||!1,storage_conditions:C.storage_conditions||"",rack_number:C.rack_number||"",rack_name:C.rack_name||""})}catch(N){console.error("Failed to fetch medicine:",N),g("Failed to load medicine details")}finally{x(!1)}},k=async w=>{if(w.preventDefault(),g(""),!i.name||!i.category||i.mrp<=0){g("Please fill in all required fields (Name, Category, MRP)");return}v(!0);try{n&&(await Rt.update(n,i),l("/medicines"))}catch(N){console.error("Failed to update medicine:",N),g(N.response?.data?.detail||"Failed to update medicine")}finally{v(!1)}};return e.jsx(Yt,{title:"Edit Medicine",description:`Update information for ${i.name}`,loading:h||c,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:k,children:e.jsxs(Ze,{className:"space-y-6",children:[p&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:p}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Medicine Name *",value:i.name,onChange:w=>u({...i,name:w.target.value}),required:!0}),e.jsx(ge,{label:"Generic Name",value:i.generic_name,onChange:w=>u({...i,generic_name:w.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Brand"}),e.jsx(Mp,{value:i.brand,onChange:w=>u({...i,brand:w}),disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Manufacturer"}),e.jsx(zp,{value:i.manufacturer,onChange:w=>u({...i,manufacturer:w}),disabled:c})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx(Yd,{value:i.category,onChange:w=>u({...i,category:w}),required:!0,disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Medicine Type"}),e.jsx(Ap,{value:i.medicine_type,onChange:w=>u({...i,medicine_type:w}),disabled:c})]}),e.jsx(ge,{label:"Strength",value:i.strength,onChange:w=>u({...i,strength:w.target.value})})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Packaging"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit"}),e.jsx(Tp,{value:i.unit,onChange:w=>u({...i,unit:w}),disabled:c})]}),e.jsx(ge,{label:"Pack Size",type:"number",value:i.pack_size,onChange:w=>u({...i,pack_size:parseInt(w.target.value)||1}),min:"1"}),e.jsx(ge,{label:"HSN Code",value:i.hsn_code,onChange:w=>u({...i,hsn_code:w.target.value}),className:"font-mono"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ge,{label:"MRP () *",type:"number",step:"0.01",value:i.mrp,onChange:w=>u({...i,mrp:parseFloat(w.target.value)||0}),min:"0",required:!0}),e.jsx(ge,{label:"Purchase Price ()",type:"number",step:"0.01",value:i.purchase_price,onChange:w=>u({...i,purchase_price:parseFloat(w.target.value)||0}),min:"0"}),e.jsx(ge,{label:"Sale Value ()",type:"number",step:"0.01",value:i.selling_price,onChange:w=>u({...i,selling_price:parseFloat(w.target.value)||0}),min:"0"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Rate (%)"}),e.jsx(Dp,{value:i.gst_rate,onChange:w=>u({...i,gst_rate:w}),disabled:c})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Storage Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Rack Name",value:i.rack_name,onChange:w=>u({...i,rack_name:w.target.value})}),e.jsx(ge,{label:"Rack Number",value:i.rack_number,onChange:w=>u({...i,rack_number:w.target.value}),placeholder:"12"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Composition"}),e.jsx("textarea",{value:i.composition,onChange:w=>u({...i,composition:w.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2})]}),e.jsx(ge,{label:"Storage Conditions",value:i.storage_conditions,onChange:w=>u({...i,storage_conditions:w.target.value})}),e.jsxs("div",{className:"flex gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_prescription_required,onChange:w=>u({...i,is_prescription_required:w.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Prescription Required"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_controlled,onChange:w=>u({...i,is_controlled:w.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Controlled Substance"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",onClick:()=>l("/medicines"),type:"button",children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",loading:b,children:b?"Updating...":"Update Medicine"})]})]})})})})}const tN=({shop:l,invoice:n,items:c,customer:i,user:u})=>{if(!l||!n)return null;const h=c.reduce((f,k)=>f+k.quantity,0),x=c.reduce((f,k)=>f+k.unit_price*k.quantity,0),b=c.reduce((f,k)=>f+k.discount_amount,0),v=f=>{try{return new Date(f).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"})}catch{return""}},p=f=>{try{return new Date(f).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return""}},g=f=>{try{return new Date(f).toLocaleDateString("en-GB",{month:"2-digit",year:"2-digit"})}catch{return""}};return e.jsxs("div",{className:"hidden print:block font-mono text-sm leading-tight p-2 w-[80mm] mx-auto bg-white text-black",children:[e.jsx("style",{children:`
                    @media print {
                        @page { size: 80mm auto; margin: 0mm; }
                        body * { visibility: hidden; }
                        .print\\:block, .print\\:block * { visibility: visible; }
                        .print\\:block { position: absolute; left: 0; top: 0; width: 100%; min-height: 100vh; }
                    }
                `}),e.jsxs("div",{className:"text-center border-b border-dashed border-black pb-2 mb-2",children:[e.jsx("h1",{className:"text-lg font-bold uppercase",children:l.name}),e.jsx("p",{children:l.address}),e.jsxs("p",{children:[l.city," - ",l.pincode]}),e.jsx("div",{className:"flex justify-center gap-4 mt-1",children:e.jsxs("p",{children:["Ph: ",l.phone]})}),e.jsxs("div",{className:"grid grid-cols-2 text-xs mt-1 text-left px-1",children:[e.jsxs("div",{children:["DL No: ",l.license_number||"N/A"]}),e.jsxs("div",{className:"text-right",children:["GST: ",l.gst_number||"N/A"]})]})]}),e.jsxs("div",{className:"border-b border-dashed border-black pb-2 mb-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:["Name: ",i?.name||"Walk-in"]}),e.jsxs("div",{children:["Bill No: ",n.invoice_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:["Doctor: ",i?.doctor_name||"Self"]}),e.jsxs("div",{children:["Date: ",v(n.created_at)]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{children:["Time: ",p(n.created_at)]})})]}),e.jsxs("table",{className:"w-full text-xs mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dashed border-black",children:[e.jsx("th",{className:"text-left w-6",children:"Sn"}),e.jsx("th",{className:"text-left",children:"Particulars"}),e.jsx("th",{className:"text-right w-8",children:"Qty"}),e.jsx("th",{className:"text-right w-12",children:"Batch"}),e.jsx("th",{className:"text-right w-10",children:"Exp"}),e.jsx("th",{className:"text-right w-12",children:"Amount"})]})}),e.jsx("tbody",{className:"leading-5",children:c.map((f,k)=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-top",children:k+1}),e.jsx("td",{className:"align-top pr-1",children:f.medicine_name}),e.jsx("td",{className:"align-top text-right",children:f.quantity}),e.jsx("td",{className:"align-top text-right",children:f.batch_number}),e.jsx("td",{className:"align-top text-right",children:g(f.expiry_date)}),e.jsx("td",{className:"align-top text-right",children:(f.unit_price*f.quantity).toFixed(2)})]},k))})]}),e.jsxs("div",{className:"border-t border-dashed border-black pt-2 mb-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["TOT ITEMS: ",c.length]}),e.jsxs("div",{className:"text-right w-40",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"SUB TOTAL"})," :",e.jsx("span",{children:x.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"DISCOUNT AMT"})," :",e.jsx("span",{children:b.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between border-t border-dashed border-black mt-1 pt-1 font-bold text-sm",children:[e.jsx("span",{children:"NET AMOUNT"})," :",e.jsx("span",{children:n.total_amount.toFixed(2)})]})]})]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("span",{children:["Tot QTY: ",h]}),e.jsx("span",{className:"float-right font-medium",children:"GST Included"})]})]}),e.jsxs("div",{className:"text-center text-xs mt-4",children:[e.jsx("p",{className:"font-bold",children:"THANK YOU GET WELL SOON"}),e.jsx("p",{className:"mt-1",children:"FREE HOME DELIVERY"}),e.jsx("p",{className:"font-bold text-sm mt-1",children:l.phone}),e.jsxs("div",{className:"flex justify-between mt-4 items-end",children:[e.jsx("span",{children:u?.full_name||"Staff"}),e.jsx("span",{children:"PHARMACIST SIGN"})]})]})]})};function aN({isOpen:l,onClose:n,medicineName:c,batches:i,onSelect:u}){const h=[...i].sort((g,f)=>new Date(g.expiry_date).getTime()-new Date(f.expiry_date).getTime()),x=g=>g?new Date(g).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"N/A",b=g=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(g),v=g=>new Date(g)<new Date,p=g=>{const f=new Date,w=new Date(g).getTime()-f.getTime(),N=Math.ceil(w/(1e3*60*60*24));return N>0&&N<=60};return e.jsx(tn,{isOpen:l,onClose:n,title:`Select Batch - ${c}`,maxWidth:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Multiple batches found for this medicine. Please select one to proceed."}),e.jsx("div",{className:"max-h-96 overflow-y-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Batch #"}),e.jsx("th",{className:"px-4 py-3",children:"Expiry"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"MRP"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Stock"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:h.map(g=>{const f=v(g.expiry_date),k=p(g.expiry_date);return e.jsxs("tr",{className:`
                                            bg-white dark:bg-slate-800 
                                            ${f?"opacity-60 bg-slate-50 dark:bg-slate-900":"hover:bg-slate-50 dark:hover:bg-slate-700"}
                                        `,children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:g.batch_number}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-medium ${f?"text-red-500":k?"text-amber-500":"text-slate-700 dark:text-slate-300"}`,children:x(g.expiry_date)}),f&&e.jsx("span",{className:"text-[10px] text-red-500 font-bold uppercase",children:"Expired"}),k&&!f&&e.jsx("span",{className:"text-[10px] text-amber-500 font-bold uppercase",children:"Expiring Soon"})]})}),e.jsx("td",{className:"px-4 py-3 text-right text-slate-700 dark:text-slate-300",children:b(g.mrp)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium text-slate-900 dark:text-white",children:g.quantity}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx(ie,{size:"sm",variant:f?"secondary":"primary",disabled:f||g.quantity<=0,onClick:()=>u(g),children:"Select"})})]},g.id)})})]})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(ie,{variant:"ghost",onClick:n,children:"Cancel"})})]})})}function sN({onSelect:l,onNewCustomer:n,selectedCustomer:c}){const[i,u]=m.useState(""),[h,x]=m.useState([]),[b,v]=m.useState(!1),[p,g]=m.useState(!1),f=m.useRef(null);m.useEffect(()=>{function N(C){f.current&&!f.current.contains(C.target)&&g(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[f]),m.useEffect(()=>{const N=setTimeout(()=>{i.length>=2?k():x([])},300);return()=>clearTimeout(N)},[i]);const k=async()=>{v(!0);try{const N=await Xl.list({search:i,size:5});x(N.data?.items||N.data||[]),g(!0)}catch(N){console.error(N)}finally{v(!1)}},w=N=>{l(N),g(!1),u("")};return c?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-800 flex items-center justify-center text-blue-600 dark:text-blue-300 font-bold",children:c.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:c.name}),e.jsx("p",{className:"text-xs text-slate-500",children:c.phone})]})]}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>l(null),children:"Change"})]}):e.jsxs("div",{className:"relative",ref:f,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Search customer by name or phone...",value:i,onChange:N=>{u(N.target.value),g(!0)},onFocus:()=>i.length>=2&&g(!0),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none"}),b&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"})]}),e.jsxs(ie,{onClick:n,className:"whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-1",children:"person_add"}),"New"]})]}),p&&i.length>=2&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto",children:h.length>0?e.jsx("div",{className:"py-1",children:h.map(N=>e.jsxs("button",{onClick:()=>w(N),className:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center gap-3 border-b border-slate-50 dark:border-slate-700 last:border-b-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500 text-xs font-bold",children:N.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:N.name}),e.jsx("p",{className:"text-xs text-slate-500",children:N.phone})]}),N.loyalty_points&&N.loyalty_points>0&&e.jsxs("div",{className:"ml-auto text-xs text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:[N.loyalty_points," pts"]})]},N.id))}):e.jsxs("div",{className:"p-4 text-center text-slate-500 text-sm",children:[e.jsx("p",{children:"No customers found."}),e.jsx("button",{onClick:n,className:"text-blue-600 font-medium mt-1 hover:underline",children:"Create new customer?"})]})})]})}function lN({isOpen:l,onClose:n,onSuccess:c,shopId:i}){const[u,h]=m.useState(!1),[x,b]=m.useState({name:"",phone:"",email:"",address:"",city:"",pincode:""}),v=async p=>{p.preventDefault(),h(!0);try{console.log("Creating customer with shop_id:",i);const g=await Xl.create({...x,shop_id:i,customer_type:"regular"});Xe.success("Customer created successfully");const f=g.data?.data?.id||g.data?.id;c({id:f,...x,shop_id:i}),n()}catch(g){console.error("Failed to save customer:",g),console.error("Error response:",g.response?.data);const f=g.response?.data?.detail;let k="Failed to create customer";typeof f=="string"?k=f:Array.isArray(f)?k=f.map(w=>w.msg||w.message||"Validation error").join(", "):f&&(k=JSON.stringify(f)),Xe.error(k)}finally{h(!1)}};return e.jsx(tn,{isOpen:l,onClose:n,title:"Add New Customer",maxWidth:"md",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx(ge,{label:"Customer Name",value:x.name,onChange:p=>b({...x,name:p.target.value}),required:!0,placeholder:"Enter full name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Phone Number",value:x.phone,onChange:p=>b({...x,phone:p.target.value}),required:!0,placeholder:"10-digit mobile",type:"tel"}),e.jsx(ge,{label:"Email (Optional)",value:x.email,onChange:p=>b({...x,email:p.target.value}),placeholder:"email@example.com",type:"email"})]}),e.jsx(ge,{label:"Address",value:x.address,onChange:p=>b({...x,address:p.target.value}),placeholder:"Street, locality"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{label:"City",value:x.city,onChange:p=>b({...x,city:p.target.value}),placeholder:"City"}),e.jsx(ge,{label:"Pincode",value:x.pincode,onChange:p=>b({...x,pincode:p.target.value}),placeholder:"Pincode"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(ie,{type:"button",variant:"secondary",onClick:n,className:"flex-1",children:"Cancel"}),e.jsx(ie,{type:"submit",variant:"primary",loading:u,className:"flex-1",children:"Create Customer"})]})]})})}const zt=({isOpen:l,onClose:n,title:c,subtitle:i,children:u,footer:h,width:x="md",loading:b=!1})=>{m.useEffect(()=>(l?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[l]);const p={sm:"w-full sm:w-96",md:"w-full sm:w-[500px]",lg:"w-full sm:w-[600px]",xl:"w-full sm:w-[700px]"}[x]||x;return l?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden animate-fadeIn",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-200",onClick:n}),e.jsxs("div",{className:`absolute inset-y-0 right-0 ${p} bg-white dark:bg-slate-800 shadow-2xl flex flex-col transform transition-transform duration-300 ease-out ${l?"translate-x-0":"translate-x-full"}`,children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-800",children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:c}),i&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:i})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors flex-shrink-0","aria-label":"Close drawer",children:e.jsx("span",{className:"material-symbols-outlined text-slate-500 dark:text-slate-400 text-[24px]",children:"close"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 dark:bg-slate-900/50",children:b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"spinner mx-auto"})}):u}),h&&e.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-800",children:h})]})]}):null};function rN(){const l=Pe(),{user:n}=mt(),{activeEntity:c}=Mt(),{hasPermission:i}=nt(),{isLoading:u}=ht();if(m.useEffect(()=>{(!c||c.type!=="shop"||!i("billing.create.shop"))&&l("/")},[c,l,i]),!c||c.type!=="shop"||!i("billing.create.shop"))return null;if(u)return e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-120px)]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})});const h=c.id,x=[{code:"cash",name:"Cash"},{code:"card",name:"Credit/Debit Card"},{code:"upi",name:"UPI / QR Code"},{code:"net_banking",name:"Net Banking"},{code:"cheque",name:"Cheque"},{code:"credit",name:"Credit (Postpaid)"}],[b,v]=m.useState(null),[p,g]=m.useState([]),[f,k]=m.useState([]),[w,N]=m.useState(""),[C,j]=m.useState([]),[T,S]=m.useState("cash"),[M,O]=m.useState(!1),[R,G]=m.useState(null),[q,ce]=m.useState(!1),[F,ue]=m.useState(!1),[be,D]=m.useState(null),[V,ee]=m.useState([]),[Y,U]=m.useState(!1),[se,Z]=m.useState(null),[P,I]=m.useState([]),[E,L]=m.useState(""),[_,H]=m.useState(""),[$,le]=m.useState(""),[je,he]=m.useState(""),[ne,Ee]=m.useState(""),de=m.useRef(null);m.useEffect(()=>{const me=setTimeout(()=>{w.length>=2?X():g([])},300);return()=>clearTimeout(me)},[w]),m.useEffect(()=>{h&&_t.get(h).then(me=>{v(me.data)}).catch(me=>console.error("Failed to fetch shop details",me))},[h]);const X=async()=>{try{const me=new AbortController,_e=setTimeout(()=>me.abort(),1e4),De=await _t.getStock(h,{search:w,size:50});clearTimeout(_e);const ze=De.data?.items||[];k(ze);const it=new Map,bt=new Set;ze.forEach(Re=>{if(Re.quantity>0){bt.add(Re.medicine_id);const ha=it.get(Re.medicine_id);ha?ha.stock_quantity+=Re.quantity:it.set(Re.medicine_id,{id:Re.medicine_id,name:Re.medicine_name,generic_name:Re.medicine_name,brand:Re.brand,mrp:0,stock_quantity:Re.quantity,gst_rate:12,is_prescription_required:!1})}});const ol=Array.from(bt).map(Re=>Rt.get(Re).catch(()=>null));(await Promise.all(ol)).forEach((Re,ha)=>{if(Re?.data){const xa=Array.from(bt)[ha],Ft=it.get(xa);Ft&&(Ft.mrp=Re.data.mrp||0,Ft.gst_rate=Re.data.gst_rate||12,Ft.is_prescription_required=Re.data.is_prescription_required||!1,Ft.generic_name=Re.data.generic_name||Ft.name,Ft.manufacturer=Re.data.manufacturer)}}),g(Array.from(it.values()))}catch(me){console.error("Search error:",me),me.name==="AbortError"?Xe.error("Search timed out. Please try again."):Xe.error("Failed to search shop inventory"),g([]),k([])}},ae=async me=>{try{const _e=f.filter(bt=>bt.medicine_id===me.id&&bt.quantity>0);if(_e.length===0){Xe.error("No stock available for this medicine");return}const ze=(await Rt.get(me.id).catch(()=>null))?.data||{},it=_e.map(bt=>({id:bt.batch_id,batch_number:bt.batch_number,expiry_date:bt.expiry_date||"",quantity:bt.quantity,mrp:ze.mrp||0,selling_price:ze.selling_price||ze.mrp||0}));it.length===1?ke(me,it[0]):(D(me),ee(it),ue(!0))}catch(_e){console.error(_e),Xe.error("Failed to fetch batch details")}},ve=me=>{be&&(ke(be,me),ue(!1),D(null),ee([]))},ke=(me,_e)=>{if(me.is_prescription_required&&!R){Xe.warning("Prescription required! Please select a customer first.");return}const De=C.findIndex(ze=>ze.medicine.id===me.id&&ze.batch.id===_e.id);if(De>=0){if(C[De].quantity+1>_e.quantity){Xe.warning(`Only ${_e.quantity} units available in this batch`);return}const it=[...C];it[De].quantity+=1,j(it)}else{const ze={medicine:me,batch:_e,quantity:1,discount:0,tax_rate:me.gst_rate||12};j([...C,ze])}N(""),g([]),de.current?.focus()},Ct=(me,_e)=>{const De=C[me];if(_e<=0){const ze=C.filter((it,bt)=>bt!==me);j(ze)}else{if(_e>De.batch.quantity){Xe.warning(`Only ${De.batch.quantity} units available`);return}const ze=[...C];ze[me].quantity=_e,j(ze)}},qs=(me,_e)=>{const De=[...C];De[me].discount=Math.max(0,_e),j(De)},Ha=me=>{j(C.filter((_e,De)=>De!==me))},ma=me=>{const _e=me.batch?.selling_price||me.batch?.mrp||0;return isNaN(_e)?0:_e},za=me=>{const _e=ma(me)*(me.quantity||0);return isNaN(_e)?0:_e},Ea=me=>{const _e=me.discount||0;return isNaN(_e)?0:_e},st=me=>{const _e=za(me)-Ea(me);return isNaN(_e)?0:_e},jt=me=>{const _e=me.tax_rate||0,De=st(me)*(_e/100);return isNaN(De)?0:De},Ke=()=>{const me=C.reduce((_e,De)=>_e+za(De),0);return isNaN(me)?0:me},Aa=()=>{const me=C.reduce((_e,De)=>_e+Ea(De),0);return isNaN(me)?0:me},Vt=()=>{const me=Ke()-Aa();return isNaN(me)?0:me},Bs=()=>{const me=C.reduce((_e,De)=>_e+jt(De),0);return isNaN(me)?0:me},lt=()=>{const me=Vt()+Bs();return isNaN(me)?0:me},us=()=>{const me=parseFloat(E||"0")-lt();return isNaN(me)?0:me},xt=me=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(me),Ga=()=>{const me=lt(),_e=E&&!isNaN(parseFloat(E))?parseFloat(E):me;if(me-_e>1&&!R&&T!=="cash"&&T!=="credit")return{valid:!1,error:"Customer selection required for partial payment"};if(T==="credit")return R?ne?{valid:!0}:{valid:!1,error:"Due date required for credit payment"}:{valid:!1,error:"Customer selection required for credit payment"};if(["upi","net_banking"].includes(T)&&!_)return{valid:!1,error:`${T==="upi"?"UPI":"Net Banking"} reference number required`};if(T==="card"&&!_)return{valid:!1,error:"Card transaction ID required"};if(T==="cheque"){if(!$)return{valid:!1,error:"Cheque number required"};if(!je)return{valid:!1,error:"Cheque date required"}}return{valid:!0}},Qi=async()=>{if(C.length===0)return Xe.warning("Cart is empty");const me=Ga();if(!me.valid){Xe.error(me.error);return}if(C.some(De=>De.medicine.is_prescription_required)&&!R){Xe.error("Customer selection required for prescription medicines!");return}O(!0);try{const De=lt(),ze=E&&!isNaN(parseFloat(E))?parseFloat(E):De,it={shop_id:h,customer_id:R?.id,items:C.map(Re=>{const ha=ma(Re)*Re.quantity,xa=ha>0?Re.discount/ha*100:0,Ft=Re.batch?.selling_price||Re.batch?.mrp||0,ms=Re.tax_rate||12;return{medicine_id:Re.medicine.id,batch_id:Re.batch.id,quantity:Math.floor(Re.quantity)||1,unit_price:isNaN(Ft)?0:Ft,discount_percent:Number.isFinite(xa)?xa:0,tax_percent:isNaN(ms)?12:ms}}),payment_method:T,paid_amount:isNaN(ze)?0:ze,discount_percent:0,payment_reference:_||void 0,cheque_number:$||void 0,cheque_date:je||void 0,due_date:ne||void 0};console.log("=== Invoice Payload ==="),console.log("Total from getTotal():",De),console.log("Paid Amount:",ze),console.log("Items count:",it.items.length),console.log("Full Payload:",JSON.stringify(it,null,2)),console.log("======================");const bt=await is.create(it),ol=bt.data?.data||bt.data;console.log("=== Invoice Response ==="),console.log("Full response:",bt.data),console.log("Invoice data:",ol),console.log("========================"),Z(ol);const Hs=C.map(Re=>({medicine_name:Re.medicine.name,batch_number:Re.batch.batch_number,expiry_date:Re.batch.expiry_date,quantity:Re.quantity,unit_price:Re.batch.selling_price||Re.batch.mrp,mrp:Re.batch.mrp,gst_rate:Re.tax_rate,discount_amount:Re.discount,total_amount:(Re.batch.selling_price||Re.batch.mrp)*Re.quantity-Re.discount}));I(Hs),U(!0),j([]),G(null),L(""),Xe.success("Invoice created successfully")}catch(De){console.error("Invoice creation error:",De);let ze="Failed to create invoice";if(De.code==="ECONNABORTED"||De.message?.includes("timeout"))ze="Request timed out. Please check your connection and try again.";else if(De.response?.data?.detail){const it=De.response.data.detail;Array.isArray(it)?ze=it.map(bt=>bt.msg||"Validation error").join(", "):typeof it=="object"?ze=it.msg||JSON.stringify(it):ze=String(it)}else De.response||(ze="Network error. Please check your connection.");Xe.error(ze)}finally{O(!1)}};return e.jsxs("div",{className:"flex h-[calc(100vh-120px)] gap-6",children:[e.jsx(aN,{isOpen:F,onClose:()=>ue(!1),medicineName:be?.name||"",batches:V,onSelect:ve}),e.jsx(lN,{isOpen:q,onClose:()=>ce(!1),onSuccess:me=>{G(me),Xe.success("Customer added to sale")},shopId:h}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"POS Billing"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"shopping_cart"}),C.length," items"]})]}),e.jsxs("div",{className:"relative z-[20]",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400",children:"search"}),e.jsx("input",{ref:de,type:"text",placeholder:"Search medicine by name, generic or brand...",value:w,onChange:me=>N(me.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-lg shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all",autoFocus:!0}),p.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-96 overflow-auto z-50",children:p.map(me=>e.jsxs("button",{onClick:()=>ae(me),className:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 flex justify-between items-center border-b border-slate-50 dark:border-slate-700 last:border-b-0 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:me.name}),e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400 font-medium",children:[me.stock_quantity," in stock"]})]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:[me.generic_name,me.brand&&`  ${me.brand}`,me.manufacturer&&`  ${me.manufacturer}`]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:xt(me.mrp)}),e.jsx("p",{className:"text-xs text-slate-400",children:"MRP"})]})]},me.id))})]}),e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-sm",children:e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-500 uppercase w-32",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-24",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-24",children:"Disc"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-28",children:"Total"}),e.jsx("th",{className:"w-12"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:C.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-4 py-24 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"shopping_cart"})}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium mb-1",children:"Your cart is empty"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto",children:"Search for medicines above to add them to your billing cart."})]})}):C.map((me,_e)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:me.medicine.name}),e.jsx("p",{className:"text-xs text-slate-500",children:me.medicine.generic_name})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:me.batch.batch_number}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Exp: ",new Date(me.batch.expiry_date).toLocaleDateString()]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>Ct(_e,me.quantity-1),className:"w-7 h-7 rounded bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:"-"}),e.jsx("input",{type:"number",value:me.quantity,onChange:De=>Ct(_e,parseInt(De.target.value)||1),className:"w-12 text-center font-medium border border-slate-200 dark:border-slate-700 rounded py-1 bg-transparent text-slate-900 dark:text-white text-sm"}),e.jsx("button",{onClick:()=>Ct(_e,me.quantity+1),className:"w-7 h-7 rounded bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:"+"})]})}),e.jsxs("td",{className:"px-4 py-3 text-right text-slate-700 dark:text-slate-300 text-sm",children:[me.batch.selling_price&&me.batch.selling_price!==me.batch.mrp&&e.jsx("div",{className:"text-xs text-slate-400 line-through mr-1 inline-block",children:xt(me.batch.mrp)}),xt(me.batch.selling_price||me.batch.mrp)]}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("input",{type:"number",value:me.discount||"",onChange:De=>qs(_e,parseFloat(De.target.value)||0),placeholder:"0",className:"w-16 text-right border border-slate-200 dark:border-slate-700 rounded py-1 px-2 bg-transparent text-sm focus:ring-1 focus:ring-blue-500 outline-none"})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-slate-900 dark:text-white text-sm",children:xt((me.batch.selling_price||me.batch.mrp)*me.quantity-me.discount)}),e.jsx("td",{className:"px-2",children:e.jsx("button",{onClick:()=>Ha(_e),className:"text-slate-400 hover:text-red-500 rounded p-1 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})})]},`${me.medicine.id}-${me.batch.id}`))})]})})})]}),e.jsxs("div",{className:"w-96 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col shadow-sm max-h-[calc(100vh-120px)] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Checkout Details"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full font-medium",children:"Running"})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Customer"}),e.jsx(sN,{onSelect:G,selectedCustomer:R,onNewCustomer:()=>ce(!0)})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:x?.map(me=>e.jsx("button",{onClick:()=>S(me.code),className:`py-2 px-3 rounded-lg text-sm font-medium border transition-all duration-200 ${T===me.code?"bg-blue-600 border-blue-600 text-white shadow-md":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:me.name})},me.code))||[e.jsx("button",{onClick:()=>S("cash"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${T==="cash"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"Cash"},"cash"),e.jsx("button",{onClick:()=>S("card"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${T==="card"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"Card"},"card"),e.jsx("button",{onClick:()=>S("upi"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${T==="upi"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"UPI"},"upi")]})]}),["upi","card","net_banking"].includes(T)&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[T==="card"?"Transaction ID":"Reference Number"," *"]}),e.jsx("input",{type:"text",value:_,onChange:me=>H(me.target.value),placeholder:`Enter ${T==="card"?"transaction ID":"reference number"}`,className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),T==="cheque"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Cheque Number *"}),e.jsx("input",{type:"text",value:$,onChange:me=>le(me.target.value),placeholder:"Enter cheque number",className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Cheque Date *"}),e.jsx("input",{type:"date",value:je,onChange:me=>he(me.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),T==="credit"&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Due Date *"}),e.jsx("input",{type:"date",value:ne,onChange:me=>Ee(me.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[T==="cash"?"Amount Received":"Amount Paid",T==="credit"&&" (Optional)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-medium z-10 pointer-events-none",children:""}),e.jsx("input",{type:"number",value:E,onChange:me=>L(me.target.value),placeholder:lt().toFixed(2),disabled:!["cash","credit"].includes(T),className:`w-full pl-8 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 text-lg font-semibold text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none ${["cash","credit"].includes(T)?"bg-slate-50 dark:bg-slate-900":"bg-slate-100 dark:bg-slate-900/50 cursor-not-allowed"}`})]}),T==="cash"&&parseFloat(E)>=lt()&&lt()>0&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 px-3 py-2 rounded-lg text-sm font-medium flex justify-between",children:[e.jsx("span",{children:"Change to Return:"}),e.jsx("span",{children:xt(us())})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"space-y-3 pt-6 border-t border-dashed border-slate-300 dark:border-slate-600",children:[e.jsxs("div",{className:"flex justify-between text-slate-600 dark:text-slate-400 text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:xt(Ke())})]}),Aa()>0&&e.jsxs("div",{className:"flex justify-between text-green-600 text-sm",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-medium",children:["-",xt(Aa())]})]}),e.jsxs("div",{className:"flex justify-between text-slate-600 dark:text-slate-400 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:["GST (12%)",e.jsx("span",{className:"text-[10px] text-slate-400",children:"(Auto)"})]}),e.jsx("span",{className:"font-medium",children:xt(Bs())})]}),e.jsxs("div",{className:"flex justify-between items-end pt-2",children:[e.jsx("span",{className:"text-slate-900 dark:text-white font-bold text-lg",children:"Total Amount"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:xt(lt())})]})]}),e.jsx("button",{onClick:Qi,disabled:M||C.length===0,className:"mt-6 w-full py-4 bg-slate-900 hover:bg-slate-800 text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-xl active:scale-[0.98]",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Complete Sale"}),e.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]}),e.jsx(zt,{isOpen:Y,onClose:()=>{U(!1),Z(null)},title:"Payment Receipt",width:"w-[400px]",children:se&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-4xl text-green-600 dark:text-green-400",children:"check_circle"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-slate-500",children:["Invoice #",se.invoice_number||"N/A"]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-500",children:"Customer"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:se.customer_id?R?.name:"Walk-in Customer"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-500",children:"Payment Method"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:String(se.payment_method||"").replace("_"," ")})]}),e.jsxs("div",{className:"pt-2 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Total Amount"}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:xt(Number(se.total_amount)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Amount Paid"}),e.jsx("span",{className:"font-bold text-green-600",children:xt(Number(se.paid_amount)||0)})]}),(Number(se.balance_amount)||0)>0&&e.jsxs("div",{className:"flex justify-between items-center text-lg text-red-600 font-bold",children:[e.jsx("span",{children:"Balance Due"}),e.jsx("span",{children:xt(Number(se.balance_amount)||0)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center justify-center gap-2 px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-xl font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"print"}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>{U(!1),Z(null),j([]),G(null),L(""),S("cash")},className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-blue-900/20",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"}),"New Sale"]})]})]})}),se&&e.jsx(tN,{shop:b,invoice:se,items:P,customer:R,user:n})]})}function nN(){const[l,n]=m.useState(""),[c,i]=m.useState(!1),[u,h]=m.useState(null),[x,b]=m.useState([]),[v,p]=m.useState([]),[g,f]=m.useState(!1);m.useEffect(()=>{k()},[]);const k=async()=>{try{f(!0);const j=await is.getReturns({page:1,size:10});p(j.data?.data?.items||j.data?.items||[])}catch(j){console.error("Failed to fetch recent returns:",j),p([])}finally{f(!1)}},w=async()=>{if(!l.trim()){Xe.error("Please enter an invoice number");return}try{i(!0);const j=await is.get(l),T=j.data?.data||j.data;if(!T){Xe.error("Invoice not found");return}h(T);const S=await is.getItems(l),M=S.data?.data?.items||S.data?.items||[];b(M),M.length===0&&Xe.info("No items found for this invoice")}catch(j){console.error("Invoice not found:",j),Xe.error(j.response?.data?.detail||"Invoice not found"),h(null),b([])}finally{i(!1)}},N=async()=>{if(x.length===0){Xe.error("No items to return");return}try{i(!0),await is.processReturn(u.id,{items:x.map(j=>({medicine_id:j.medicine_id,quantity:j.quantity,reason:j.reason||"Customer return"})),refund_method:"cash"}),Xe.success("Return processed successfully!"),h(null),b([]),n(""),k()}catch(j){console.error("Failed to process return:",j),Xe.error(j.response?.data?.detail||"Failed to process return")}finally{i(!1)}},C=x.reduce((j,T)=>j+(T.refund_amount||T.unit_price*T.quantity),0);return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"storefront"}),e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Return / Refund"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Process customer returns and issue refunds"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"receipt_long"}),"New Return Request"]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Original Invoice Number"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"search"}),e.jsx("input",{type:"text",value:l,onChange:j=>n(j.target.value),placeholder:"Enter invoice number (e.g., INV-2024-0001)",className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary",onKeyPress:j=>j.key==="Enter"&&w()})]}),e.jsx("button",{onClick:w,disabled:c,className:"px-5 py-2.5 rounded-lg bg-primary text-white font-semibold text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",children:c?"Searching...":"Find Invoice"})]})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Invoice"}),e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:u.id||u.invoice_number})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Date"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:u.date||new Date(u.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-sm",children:(u.customer_name||"C").split(" ").map(j=>j[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:u.customer_name||"Walk-in Customer"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:u.customer_phone||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-3",children:"Select Items to Return"}),x.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"inventory_2"}),e.jsx("p",{children:"No items found for this invoice"})]}):e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-xs uppercase text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-primary focus:ring-primary"})}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold",children:"Refund"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:x.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-slate-300 text-primary focus:ring-primary"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:j.medicine_name}),e.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400 font-mono text-xs",children:j.batch_number}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"number",defaultValue:j.quantity,min:"1",className:"w-16 text-center rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2 py-1 text-sm"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{className:"w-full rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2 py-1 text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("option",{children:"Wrong medication"}),e.jsx("option",{children:"Damaged packaging"}),e.jsx("option",{children:"Expired product"}),e.jsx("option",{children:"Customer changed mind"})]})}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-slate-900 dark:text-white",children:["",(j.refund_amount||j.unit_price*j.quantity).toFixed(2)]})]},j.id))})]})})]}),x.length>0&&e.jsxs("div",{className:"bg-primary/5 dark:bg-primary/10 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Refund Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["",C.toFixed(2)]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("select",{className:"rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-3 py-2 text-sm",children:[e.jsx("option",{children:"Cash Refund"}),e.jsx("option",{children:"Store Credit"}),e.jsx("option",{children:"Original Payment Method"})]})})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{h(null),b([])},className:"px-5 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 font-semibold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:N,disabled:c||x.length===0,className:"px-5 py-2.5 rounded-lg bg-primary text-white font-semibold text-sm hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check_circle"}),c?"Processing...":"Process Return"]})]})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm h-fit",children:[e.jsx("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"history"}),"Recent Returns"]})}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:g?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Loading..."})]}):v.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"assignment_return"}),e.jsx("p",{children:"No recent returns"})]}):v.map(j=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-mono text-sm font-medium text-primary",children:j.return_number||j.id}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${j.status==="completed"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"}`,children:j.status})]}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:j.customer_name||"Walk-in Customer"}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:j.created_at?new Date(j.created_at).toLocaleDateString():"N/A"}),e.jsxs("span",{children:[j.items_count||0," items  ",(j.refund_amount||0).toFixed(2)]})]})]},j.id))}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 text-center",children:e.jsx("button",{className:"text-sm text-primary font-medium hover:text-blue-700",children:"View All Returns"})})]})]})]})}function A0(){const[l,n]=m.useState([]),[c,i]=m.useState(!0),[u,h]=m.useState(""),[x,b]=m.useState(""),[v,p]=m.useState(1),[g,f]=m.useState(0),[k,w]=m.useState(10);m.useEffect(()=>{N()},[v,k,x,u]);const N=async()=>{try{i(!0);const S={page:v,size:k};x&&(S.search=x),u==="cancelled"?S.status="cancelled":(u==="completed"||u==="pending")&&(S.payment_status=u);const M=await is.list(S);n(M.data?.items||M.data?.data||[]),f(M.data?.total||0)}catch(S){console.error(S),n([])}finally{i(!1)}},C=S=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(S),j={paid:l.filter(S=>S.payment_status==="completed").length,pending:l.filter(S=>S.payment_status==="pending").length,cancelled:l.filter(S=>S.payment_status==="cancelled").length},T=[{header:"Invoice #",key:"invoice_number",render:S=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"receipt_long"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:S.invoice_number}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(S.created_at).toLocaleDateString()})]})]})},{header:"Customer",key:"customer_name",render:S=>e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:S.customer_name||"Walk-in Customer"})},{header:"Shop",key:"shop_name",render:S=>S.shop_name||"N/A",className:"hidden md:table-cell"},{header:"Amount",key:"total_amount",align:"right",render:S=>e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:C(S.total_amount)})},{header:"Status",key:"payment_status",align:"center",render:S=>{const M=S.payment_status==="completed"?"success":S.payment_status==="cancelled"?"error":"warning";return e.jsx(Ye,{variant:M,className:"capitalize",children:S.payment_status==="completed"?"paid":S.payment_status})}},{header:"Actions",key:"id",align:"right",render:()=>e.jsx(ie,{variant:"ghost",className:"!p-1.5 h-8 w-8 text-slate-500",title:"View Invoice",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Invoices",subtitle:"View and manage sales invoices"}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Invoices",value:g,icon:"receipt",onClick:()=>h(""),isActive:u===""}),e.jsx(Ne,{title:"Paid",value:j.paid,icon:"check_circle",onClick:()=>h("completed"),isActive:u==="completed",trend:"up"}),e.jsx(Ne,{title:"Pending",value:j.pending,icon:"pending",onClick:()=>h("pending"),isActive:u==="pending",trend:"neutral"}),e.jsx(Ne,{title:"Cancelled",value:j.cancelled,icon:"cancel",onClick:()=>h("cancelled"),isActive:u==="cancelled",trend:"down"})]}),e.jsx(ye.DataTable,{columns:T,data:l,loading:c,emptyMessage:"No invoices found.",pagination:{currentPage:v,totalPages:Math.ceil(g/k),onPageChange:p,totalItems:g,pageSize:k,onPageSizeChange:S=>{w(S),p(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Invoice List",count:g,searchProps:{value:x,onChange:S=>{b(S),p(1)},placeholder:"Search invoices..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:u,onChange:S=>{h(S.target.value),p(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"completed",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),embedded:!0})})]})}function iN(){const l=Pe(),{user:n}=mt(),[c,i]=m.useState(!1),[u,h]=m.useState(""),[x,b]=m.useState(""),[v,p]=m.useState(""),[g,f]=m.useState(""),[k,w]=m.useState([]),[N,C]=m.useState([]),[j,T]=m.useState([]),[S,M]=m.useState([]),[O,R]=m.useState(!0);m.useEffect(()=>{(async()=>{R(!0);try{await Promise.all([F(),ue(),be()])}finally{R(!1)}})()},[]);const[G]=My(),q=G.get("pr_id");m.useEffect(()=>{q&&ce(q)},[q]);const ce=async P=>{try{const I=await rl.get(P),E=I.data||I;b(E.warehouse_id),p(E.shop_id),f(`Fulfilled from PR-${E.request_number}`);const L=[];for(const _ of E.items||[]){let H=[];if(_.medicine_id)try{const $=await Rt.getBatches(_.medicine_id);H=$.data?.batches||$.data||[]}catch($){console.error(`Failed to fetch batches for ${_.medicine_id}`,$)}L.push({medicine_id:_.medicine_id,medicine_name:_.medicine_name,medicine_search:_.medicine_name,batch_id:"",batch_number:"",quantity:_.quantity_approved||_.quantity_requested||0,available_batches:H})}w(L)}catch(I){console.error("Failed to load PR",I),h("Failed to load purchase request")}};m.useEffect(()=>{!x&&n?.warehouse_id&&b(n.warehouse_id)},[n,x]);const F=async()=>{try{const P=await Dt.list({size:500});C(P.data?.items||P.data||[])}catch(P){console.error("Failed to fetch warehouses",P)}},ue=async()=>{try{const P=await _t.list({size:500});T(P.data?.items||P.data||[])}catch(P){console.error("Failed to fetch shops",P)}},be=async()=>{try{const P=await Rt.list({size:500});M(P.data?.items||P.data||[])}catch(P){console.error("Failed to fetch medicines",P)}},D=()=>{w([...k,{medicine_id:"",batch_id:"",quantity:1,available_batches:[]}])},V=P=>{w(k.filter((I,E)=>E!==P))},ee=async(P,I,E)=>{const L=[...k];if(I==="medicine_id"){if(L[P]={...L[P],[I]:E,batch_id:"",batch_number:"",available_stock:0,available_batches:[]},E){const _=S.find(H=>H.id===E);L[P].medicine_name=_?.name,L[P].brand=_?.brand;try{const H=await Rt.getBatches(E),$=H.data?.batches||H.data||[];L[P].available_batches=$.filter(le=>(le.quantity||0)>0)}catch(H){console.error("Failed to fetch batches",H)}}}else if(I==="batch_id"){const _=L[P].available_batches?.find(H=>H.id===E);L[P].batch_id=E,L[P].batch_number=_?.batch_number||"",L[P].available_stock=_?.quantity||0,L[P].quantity>(_?.quantity||0)&&(L[P].quantity=_?.quantity||0)}else L[P]={...L[P],[I]:E};w(L)},Y=()=>{if(!x)return h("Please select a warehouse"),!1;if(!v)return h("Please select a shop"),!1;if(k.length===0)return h("Please add at least one item"),!1;for(let P=0;P<k.length;P++){const I=k[P];if(!I.medicine_id||!I.batch_id)return h(`Item ${P+1}: Please select medicine and batch`),!1;if(I.quantity<=0)return h(`Item ${P+1}: Quantity must be greater than 0`),!1;if(I.available_stock!==void 0&&I.quantity>I.available_stock)return h(`Item ${P+1}: Quantity (${I.quantity}) exceeds available stock (${I.available_stock})`),!1}return!0},U=async P=>{if(P.preventDefault(),h(""),!!Y()){i(!0);try{const I={warehouse_id:x,shop_id:v,notes:g||void 0,purchase_request_id:q||void 0,items:k.map(E=>({medicine_id:E.medicine_id,batch_id:E.batch_id,quantity:E.quantity}))};await ns.create(I),l("/dispatches")}catch(I){console.error("Failed to create dispatch:",I),h(I.response?.data?.detail||"Failed to create dispatch")}finally{i(!1)}}},{hasPermission:se}=nt(),Z=se("dispatches.create.warehouse");return O?e.jsx(Yt,{title:"Create New Dispatch",subtitle:"Create a dispatch from warehouse to shop",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading dropdowns..."})]})})})})}):e.jsx(Yt,{title:"Create New Dispatch",subtitle:"Create a dispatch from warehouse to shop",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),u]}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"From Warehouse *"}),e.jsxs("select",{value:x,onChange:P=>b(P.target.value),disabled:!Z||n?.warehouse_id===x,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 disabled:opacity-50",required:!0,children:[e.jsx("option",{value:"",children:"Select Warehouse"}),N.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"To Shop *"}),e.jsxs("select",{value:v,onChange:P=>p(P.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Shop"}),j.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Dispatch Items"}),e.jsxs(ie,{variant:"secondary",onClick:D,type:"button",disabled:!x,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-1",children:"add"}),"Add Item"]})]}),k.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:'No items added. Click "Add Item" to start.'}):e.jsx("div",{className:"space-y-3",children:k.map((P,I)=>{const E=P.available_stock||0,L=P.quantity||0;let _="bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700";return P.batch_id&&L>E?_="bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":P.batch_id&&L>0&&L>=E*.8&&(_="bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"),e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${_}`,children:[e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Medicine"}),e.jsx(Yi,{value:P.medicine_id,onChange:H=>ee(I,"medicine_id",H),options:S.map(H=>({value:H.id,label:H.name})),placeholder:"Type medicine name..."})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Brand"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-300 h-[38px] flex items-center",children:P.brand||"-"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Batch"}),e.jsxs("select",{value:P.batch_id,onChange:H=>ee(I,"batch_id",H.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 h-[38px]",required:!0,disabled:!P.medicine_id,children:[e.jsx("option",{value:"",children:"Select Batch"}),(P.available_batches||[]).map(H=>e.jsxs("option",{value:H.id,children:[H.batch_number," (Exp: ",new Date(H.expiry_date).toLocaleDateString(),") - Qty: ",H.quantity]},H.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",value:P.quantity,onChange:H=>ee(I,"quantity",parseInt(H.target.value)||0),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 h-[38px]",placeholder:"Qty",min:"1",required:!0}),P.available_stock!==void 0&&e.jsxs("div",{className:`text-xs mt-1 ${L>E?"text-red-600 font-bold":"text-slate-500"}`,children:["Max: ",P.available_stock,L>E&&" (Insufficient Stock!)"]})]})]}),e.jsx(ie,{variant:"ghost",onClick:()=>V(I),type:"button",className:"!p-1.5 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},I)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:g,onChange:P=>f(P.target.value),rows:3,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",placeholder:"Add any special instructions or notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(ie,{variant:"secondary",onClick:()=>l("/dispatches"),type:"button",disabled:c,children:"Cancel"}),e.jsxs(ie,{variant:"primary",type:"submit",disabled:c||k.length===0,loading:c,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"local_shipping"}),"Create Dispatch"]})]})]})]})})})}function oN(){const{id:l}=sn(),n=Pe(),{activeEntity:c}=Mt(),[i,u]=m.useState(null),[h,x]=m.useState(!0);m.useEffect(()=>{l&&b()},[l]);const b=async()=>{try{x(!0);const p=await ns.get(l);u(p.data)}catch(p){console.error(p)}finally{x(!1)}};if(h)return e.jsx("div",{className:"p-8",children:"Loading..."});if(!i)return e.jsx("div",{className:"p-8",children:"Dispatch not found"});const v=c?.type==="shop"&&["pending","created","in_transit"].includes(i.status.toLowerCase());return e.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Dispatch #",i.dispatch_number||i.id.slice(0,8)]}),e.jsxs("p",{className:"text-slate-500",children:["From ",i.warehouse_name," to ",i.shop_name]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ye,{variant:i.status==="delivered"?"success":"primary",children:i.status.replace("_"," ")}),v&&e.jsx(ie,{variant:"success",onClick:()=>n("/shops/stock",{state:{dispatchId:i.id}}),children:"Receive Stock"}),e.jsx(ie,{variant:"ghost",onClick:()=>n(-1),children:"Back"})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase",children:"Quantity"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:i.items?.map((p,g)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-slate-900 dark:text-white font-medium",children:p.medicine_name}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:p.batch_number}),e.jsx("td",{className:"px-6 py-4 text-right font-mono text-slate-900 dark:text-white",children:p.quantity})]},g))})]})})]})}function ds(){const l=m.useCallback(i=>{if(!i.response)return i.code==="ECONNABORTED"||i.message?.includes("timeout")?"Request timed out. Please check your connection and try again.":"Network error. Please check your connection.";const u=i.response.data?.detail;if(Array.isArray(u))return u.map(x=>`${x.loc?.slice(1).join(".")||"Unknown field"}: ${x.msg}`).join(", ");if(typeof u=="string")return u;if(typeof u=="object"&&u!==null&&!Array.isArray(u)){const x=u;return typeof x.msg=="string"?x.msg:JSON.stringify(u)}if(i.response.data?.message)return i.response.data.message;const h=i.response.status;return h===401?"Unauthorized. Please login again.":h===403?"You do not have permission to perform this action.":h===404?"Resource not found.":h===409?"Conflict. This resource already exists.":h===422?"Validation error. Please check your input.":h===500||h&&h>=500?"Server error. Please try again later.":i.message||"An unexpected error occurred."},[]),n=m.useCallback((i,u)=>{const h=u||l(i);return console.error("API Error:",{message:h,status:i.response?.status,data:i.response?.data,originalError:i}),window.toast?window.toast.error(h):alert(h),h},[l]),c=m.useCallback(i=>{window.toast&&window.toast.success(i)},[]);return{handleError:n,handleSuccess:c,extractErrorMessage:l}}function T0(){const l=Pe(),{activeEntity:n}=Mt(),{hasPermission:c}=nt(),{handleError:i,handleSuccess:u}=ds(),[h,x]=m.useState([]),[b,v]=m.useState(!0),[p,g]=m.useState(""),[f,k]=m.useState(""),[w,N]=m.useState(1),[C,j]=m.useState(0),[T,S]=m.useState(10),[M,O]=m.useState(null),[R,G]=m.useState(!1),[q,ce]=m.useState(null),[F,ue]=m.useState([]),[be,D]=m.useState(""),[V,ee]=m.useState(""),[Y,U]=m.useState({});m.useEffect(()=>{se()},[w,T,f,p]);const se=async()=>{try{v(!0);const le={page:w,size:T,status:p||void 0};f&&(le.search=f);const je=await ns.list(le);x(je.data?.items||[]),j(je.data?.total||0)}catch(le){console.error(le),x([])}finally{v(!1)}},Z=async le=>{try{const je=await ns.get(le.id),he=je.data||je;ce(le),ue(he.items||[]),D(""),ee(""),U({}),G(!0)}catch(je){i(je,"Failed to load dispatch details")}},P=async()=>{if(q)try{O(q.id);const le=Object.entries(Y).filter(([je,he])=>he.rack_number||he.rack_name).map(([je,he])=>({item_id:je,rack_number:he.rack_number||void 0,rack_name:he.rack_name||void 0}));await ns.updateStatus(q.id,"delivered",{global_rack_number:be||void 0,global_rack_name:V||void 0,item_rack_info:le.length>0?le:void 0}),se(),u("Stock received and automatically added to shop inventory with rack/box information!"),G(!1),ce(null)}catch(le){i(le,"Failed to receive stock")}finally{O(null)}},I=async(le,je)=>{try{O(le),await ns.updateStatus(le,je),se(),u(je==="delivered"?"Stock received and automatically added to shop inventory!":`Dispatch status updated to ${je}`)}catch(he){i(he,"Failed to update dispatch status")}finally{O(null)}},E={pending:h.filter(le=>le.status==="pending").length,inTransit:h.filter(le=>le.status==="in_transit").length,delivered:h.filter(le=>le.status==="delivered").length},L=[{header:"Dispatch #",key:"dispatch_number",render:le=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${le.status==="delivered"?"bg-green-100 text-green-600":le.status==="in_transit"?"bg-blue-100 text-blue-600":"bg-amber-100 text-amber-600"}`,children:e.jsx("span",{className:"material-symbols-outlined",children:le.status==="delivered"?"check_circle":le.status==="in_transit"?"local_shipping":"schedule"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:le.dispatch_number||le.id.slice(0,8)}),e.jsx("div",{className:"text-xs text-slate-500",children:le.dispatch_date?new Date(le.dispatch_date).toLocaleDateString():"Pending Date"})]})]})},{header:"From Warehouse",key:"warehouse_name",render:le=>le.warehouse_name||"N/A"},{header:"To Shop",key:"shop_name",render:le=>le.shop_name||"N/A"},{header:"Items",key:"total_items",render:le=>e.jsx("span",{className:"font-mono",children:le.total_items}),align:"center"},{header:"Status",key:"status",render:le=>{const je=le.status==="delivered"?"success":le.status==="cancelled"?"error":le.status==="in_transit"?"primary":"warning";return e.jsx(Ye,{variant:je,children:le.status.replace("_"," ")})},align:"center"},{header:"Actions",key:"id",align:"right",render:le=>e.jsxs("div",{className:"flex justify-end gap-2",children:[n?.type==="warehouse"&&c("dispatches.create.warehouse")&&le.status==="created"&&e.jsx(ie,{variant:"primary",onClick:()=>I(le.id,"dispatched"),disabled:M===le.id,className:"!py-1 !px-2 !text-xs",children:M===le.id?"Updating...":"Mark Dispatched"}),n?.type==="warehouse"&&c("dispatches.create.warehouse")&&le.status==="dispatched"&&e.jsx(ie,{variant:"primary",onClick:()=>I(le.id,"in_transit"),disabled:M===le.id,className:"!py-1 !px-2 !text-xs",children:M===le.id?"Updating...":"In Transit"}),n?.type==="shop"&&(c("dispatches.view.shop")||c("inventory.entry.shop"))&&["created","dispatched","in_transit"].includes(le.status?.toLowerCase())&&e.jsx(ie,{variant:"success",onClick:()=>Z(le),disabled:M===le.id,className:"!py-1 !px-2 !text-xs",title:"Receive stock - enter rack number and box name",children:M===le.id?"Receiving...":"Receive"}),e.jsx(ie,{variant:"ghost",onClick:()=>l(`/dispatches/${le.id}`),className:"!p-1.5 h-8 w-8 text-slate-500",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})]})}],_=n?.type==="shop",H=_?"Incoming Shipments":"Dispatch History",$=_?"View incoming stock shipments from warehouses":"Track warehouse to shop deliveries and shipments";return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:H,subtitle:$,actions:c("dispatches.create.warehouse")&&e.jsxs(ie,{variant:"primary",onClick:()=>l("/dispatches/create"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"New Dispatch"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:_?"Total Shipments":"Total Dispatches",value:C,icon:"local_shipping",onClick:()=>g(""),isActive:p===""}),e.jsx(Ne,{title:"Pending",value:E.pending,icon:"schedule",onClick:()=>g("pending"),isActive:p==="pending",trend:"neutral"}),e.jsx(Ne,{title:"In Transit",value:E.inTransit,icon:"near_me",onClick:()=>g("in_transit"),isActive:p==="in_transit",trend:"up"}),e.jsx(Ne,{title:"Delivered",value:E.delivered,icon:"check_circle",onClick:()=>g("delivered"),isActive:p==="delivered",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:L,data:h,loading:b,emptyMessage:_?"No incoming shipments found.":"No dispatches found.",pagination:{currentPage:w,totalPages:Math.ceil(C/T),onPageChange:N,totalItems:C,pageSize:T,onPageSizeChange:le=>{S(le),N(1)}},headerSlot:e.jsx(ye.ListControls,{title:_?"Incoming Shipments":"Dispatch List",count:C,searchProps:{value:f,onChange:le=>{k(le),N(1)},placeholder:"Search dispatches..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:p,onChange:le=>{g(le.target.value),N(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),embedded:!0})}),e.jsx(zt,{isOpen:R,onClose:()=>{G(!1),ce(null),ue([]),D(""),ee(""),U({})},title:"Receive Stock",subtitle:"Enter rack number and box name for inventory management",width:"lg",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"ghost",onClick:()=>{G(!1),ce(null)},children:"Cancel"}),e.jsx(ie,{variant:"success",onClick:P,disabled:M===q?.id,children:M===q?.id?"Receiving...":"Receive Stock"})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"settings"}),"Global Rack & Box (Applies to All Items)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Global Rack Number"}),e.jsx(ge,{type:"text",value:be,onChange:le=>D(le.target.value),placeholder:"e.g., R-01, R-2A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Global Box Name"}),e.jsx(ge,{type:"text",value:V,onChange:le=>ee(le.target.value),placeholder:"e.g., Painkillers Box, Cold Medicines"})]})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"These values will be applied to all items unless overridden below"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"inventory_2"}),"Items (",F.length,")"]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:F.map((le,je)=>{const he=le.id||`item-${je}`,ne=Y[he]||{rack_number:"",rack_name:""};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:le.medicine_name||le.medicine_id}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Batch: ",le.batch_number||le.batch_id," | Qty: ",le.quantity]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Rack Number"}),e.jsx(ge,{type:"text",value:ne.rack_number,onChange:Ee=>{U({...Y,[he]:{...ne,rack_number:Ee.target.value}})},placeholder:be||"e.g., R-01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Box Name"}),e.jsx(ge,{type:"text",value:ne.rack_name,onChange:Ee=>{U({...Y,[he]:{...ne,rack_name:Ee.target.value}})},placeholder:V||"e.g., Painkillers Box"})]})]})]},he)})})]})]})})]})}function cN(){const l=Pe(),{isLoading:n}=ht(),{hasPermission:c}=nt(),{activeEntity:i}=Mt(),[u,h]=m.useState([]),[x,b]=m.useState(!0),[v,p]=m.useState(""),[g,f]=m.useState(""),[k,w]=m.useState(1),[N,C]=m.useState(0),[j,T]=m.useState(10),[S,M]=m.useState(!1),[O,R]=m.useState([]),[G,q]=m.useState(!0),[ce,F]=m.useState(!1),[ue,be]=m.useState({shop_id:"",warehouse_id:"",priority:"medium",items:[{medicine_id:"",quantity:1}]});m.useEffect(()=>{D()},[k,j,g,v]),m.useEffect(()=>{const he=async()=>{q(!0);try{await Promise.all([Rt.list({size:1e3}).then(ne=>{const Ee=ne.data?.items||(Array.isArray(ne.data)?ne.data:[]);R(Ee)}).catch(ne=>{console.error("[PurchaseRequests] Failed to load medicines:",ne)})])}finally{q(!1)}};O.length===0?he():q(!1)},[O.length]);const D=async()=>{try{b(!0);const he={page:k,size:j,status:v||void 0};g&&(he.search=g);const ne=await rl.list(he);h(ne.data?.items||[]),C(ne.data?.total||0)}catch(he){console.error(he),h([])}finally{b(!1)}},{handleError:V,handleSuccess:ee}=ds(),Y=async he=>{try{await rl.approve(he,{}),ee("Purchase request approved successfully"),D()}catch(ne){V(ne,"Failed to approve purchase request")}},U=async he=>{try{await rl.reject(he),ee("Purchase request rejected"),D()}catch(ne){V(ne,"Failed to reject purchase request")}},se=i?.type==="shop";m.useEffect(()=>{S&&se&&i?.id&&be(he=>({...he,shop_id:i.id}))},[S,se,i]);const Z=async()=>{if(!ue.shop_id||!ue.warehouse_id||ue.items.length===0){V({message:"Please fill all required fields"},"Validation Error");return}try{F(!0),await rl.create({shop_id:ue.shop_id,warehouse_id:ue.warehouse_id,urgency:ue.priority,items:ue.items.filter(he=>he.medicine_id&&he.quantity>0).map(he=>({medicine_id:he.medicine_id,quantity_requested:he.quantity}))}),ee("Purchase request created successfully"),M(!1),be({shop_id:"",warehouse_id:"",priority:"medium",items:[{medicine_id:"",quantity:1}]}),D()}catch(he){V(he,"Failed to create purchase request")}finally{F(!1)}},P=()=>{be(he=>({...he,items:[...he.items,{medicine_id:"",quantity:1}]}))},I=he=>{be(ne=>({...ne,items:ne.items.filter((Ee,de)=>de!==he)}))},E=(he,ne,Ee)=>{be(de=>({...de,items:de.items.map((X,ae)=>ae===he?{...X,[ne]:Ee}:X)}))},L={pending:u.filter(he=>he.status==="pending").length,approved:u.filter(he=>he.status==="approved").length,rejected:u.filter(he=>he.status==="rejected").length},_=[{header:"Request #",key:"request_number",render:he=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"shopping_cart"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:he.request_number||he.id.slice(0,8)}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(he.created_at).toLocaleDateString()})]})]})},{header:"Shop",key:"shop_name",render:he=>he.shop_name||"N/A"},{header:"Warehouse",key:"warehouse_name",render:he=>he.warehouse_name||"N/A"},{header:"Items",key:"total_items",render:he=>e.jsx("span",{className:"font-mono",children:he.total_items}),align:"center"},{header:"Priority",key:"priority",render:he=>e.jsx(Ye,{variant:he.priority==="urgent"||he.priority==="critical"?"error":he.priority==="high"?"warning":"secondary",children:he.priority||"Normal"}),align:"center"},{header:"Status",key:"status",render:he=>{const ne=he.status==="approved"?"success":he.status==="rejected"?"error":he.status==="dispatched"?"info":"warning";return e.jsx(Ye,{variant:ne,children:he.status})},align:"center"},{header:"Actions",key:"id",align:"right",render:he=>e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>$(he.id),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-slate-500",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"visibility"})}),he.status==="pending"&&c("purchase_requests.approve.warehouse")&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{variant:"success",onClick:()=>Y(he.id),className:"!py-1 !px-2 !text-xs",children:"Approve"}),e.jsx(ie,{variant:"danger",onClick:()=>U(he.id),className:"!py-1 !px-2 !text-xs",children:"Reject"})]}),he.status==="approved"&&c("dispatches.create.warehouse")&&e.jsx(ie,{variant:"primary",onClick:()=>l(`/dispatches/create?pr_id=${he.id}`),className:"!py-1 !px-2 !text-xs",children:"Create Dispatch"})]})}],[H,$]=m.useState(null),le=he=>u.find(ne=>ne.id===he)?.status,je=n||G;return e.jsxs(ye,{loading:je,children:[e.jsx(ye.Header,{title:"Purchase Requests",subtitle:"Manage stock requests from shops to warehouses",actions:c("purchase_requests.create.shop")&&e.jsxs(ie,{variant:"primary",onClick:()=>M(!0),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"New Request"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Requests",value:N,icon:"list_alt",onClick:()=>p(""),isActive:v===""}),e.jsx(Ne,{title:"Pending",value:L.pending,icon:"pending",onClick:()=>p("pending"),isActive:v==="pending",trend:"neutral"}),e.jsx(Ne,{title:"Approved",value:L.approved,icon:"check_circle",onClick:()=>p("approved"),isActive:v==="approved",trend:"up"}),e.jsx(Ne,{title:"Rejected",value:L.rejected,icon:"cancel",onClick:()=>p("rejected"),isActive:v==="rejected",trend:"down"})]}),e.jsx(ye.DataTable,{columns:_,data:u,loading:x,emptyMessage:"No purchase requests found.",pagination:{currentPage:k,totalPages:Math.ceil(N/j),onPageChange:w,totalItems:N,pageSize:j,onPageSizeChange:he=>{T(he),w(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Request List",count:N,searchProps:{value:g,onChange:he=>{f(he),w(1)},placeholder:"Search requests..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:v,onChange:he=>{p(he.target.value),w(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"dispatched",children:"Dispatched"})]})}),embedded:!0})}),e.jsx(zt,{isOpen:S,onClose:()=>M(!1),title:"New Purchase Request",subtitle:"Create a stock request from a shop to warehouse",width:"lg",loading:G,footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",onClick:()=>M(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",onClick:Z,disabled:ce||G,children:ce?"Creating...":"Create Request"})]}),children:e.jsxs("form",{onSubmit:he=>{he.preventDefault(),Z()},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[!se&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Shop ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Vd,{value:ue.shop_id,onChange:he=>be(ne=>({...ne,shop_id:he})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Warehouse ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Qd,{value:ue.warehouse_id,onChange:he=>be(ne=>({...ne,warehouse_id:he})),className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Priority"}),e.jsx($j,{value:ue.priority,onChange:he=>be(ne=>({...ne,priority:he})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Items ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ie,{type:"button",variant:"ghost",onClick:P,className:"text-sm text-blue-600 hover:text-blue-700",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-1",children:"add"}),"Add Item"]})]}),e.jsx("div",{className:"space-y-3 bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:ue.items.map((he,ne)=>e.jsxs("div",{className:"flex gap-3 items-start p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-1.5 font-medium",children:"Medicine"}),e.jsx(Yi,{value:he.medicine_id,onChange:Ee=>{const de=O.find(X=>X.id===Ee);be(X=>({...X,items:X.items.map((ae,ve)=>ve===ne?{...ae,medicine_id:Ee,brand:de?.brand}:ae)}))},options:O.map(Ee=>({value:Ee.id,label:Ee.name})),placeholder:"Select Medicine",className:"w-full"})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-1.5 font-medium",children:"Brand"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-300 h-[38px] flex items-center",children:he.brand||e.jsx("span",{className:"text-slate-400",children:""})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-1.5 font-medium",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",value:he.quantity,onChange:Ee=>E(ne,"quantity",parseInt(Ee.target.value)||1),className:"w-full px-3 py-2 text-sm rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 h-[38px] focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Qty"})]})]}),ue.items.length>1&&e.jsx("button",{type:"button",onClick:()=>I(ne),className:"mt-7 p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg h-[38px] w-[38px] flex items-center justify-center transition-colors",title:"Remove item",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})})]},ne))})]})]})}),H&&e.jsx(dN,{requestId:H,onClose:()=>$(null),onApprove:()=>{$(null),Y(H)},onReject:()=>{$(null),U(H)},canAction:le(H)==="pending"&&c("purchase_requests.approve.warehouse")})]})}function dN({requestId:l,onClose:n,onApprove:c,onReject:i,canAction:u}){const[h,x]=m.useState(null),[b,v]=m.useState(!0);return m.useEffect(()=>{rl.get(l).then(p=>{x(p.data)}).catch(console.error).finally(()=>v(!1))},[l]),l?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-scaleIn border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["#",h?.request_number||l.slice(0,8)]})]}),e.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"p-6",children:b?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"From Shop"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white text-lg",children:h.shop_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"To Warehouse"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white text-lg",children:h.warehouse_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"Status"}),e.jsx(Ye,{variant:h.status==="approved"?"success":h.status==="rejected"?"error":"warning",children:h.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"Date"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:new Date(h.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"inventory_2"}),"Requested Items",h.items&&e.jsxs("span",{className:"text-xs font-normal text-slate-500",children:["(",h.items.length," items)"]})]}),e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Requested"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Available Stock"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:h.items?.map((p,g)=>{const f=p.is_stock_available!==!1,k=p.available_stock??0,w=p.quantity_requested??0;return e.jsxs("tr",{className:f?"":"bg-red-50/50 dark:bg-red-900/10",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:p.medicine_name})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:w}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:`font-mono ${f?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:k})}),e.jsx("td",{className:"px-4 py-3 text-center",children:f?e.jsxs(Ye,{variant:"success",className:"!text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] mr-1",children:"check_circle"}),"Available"]}):e.jsxs(Ye,{variant:"error",className:"!text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] mr-1",children:"error"}),"Insufficient"]})})]},g)})})]})}),h.items&&h.items.length>0&&e.jsx("div",{className:"mt-4 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:(()=>{const p=h.items.every(f=>f.is_stock_available!==!1),g=h.items.filter(f=>f.is_stock_available===!1).length;return p?e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),e.jsx("span",{className:"font-medium",children:"All items have sufficient stock. Approval is allowed."})]}):e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"error"}),e.jsxs("span",{className:"font-medium",children:[g," item(s) have insufficient stock. Cannot approve without stock."]})]})})()})]})]}):e.jsx("div",{className:"text-center text-red-500",children:"Failed to load details"})}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Close"}),u&&h&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{variant:"danger",onClick:i,children:"Reject"}),e.jsx(ie,{variant:"success",onClick:c,disabled:h.items&&h.items.some(p=>p.is_stock_available===!1),title:h.items&&h.items.some(p=>p.is_stock_available===!1)?"Cannot approve: Some items have insufficient stock":"Approve purchase request",children:"Approve"})]})]})]})}):null}function uN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState({name:"",description:"",parent_id:"",is_active:!0}),[w,N]=m.useState(!1),[C,j]=m.useState(""),{handleError:T,handleSuccess:S}=ds(),[M,O]=m.useState(""),[R,G]=m.useState(10),[q,ce]=m.useState(1);m.useEffect(()=>{l&&!n("categories.view")&&c("/")},[l,c,n]),m.useEffect(()=>{F()},[]);const F=async()=>{x(!0);try{const H=await qe.listCategories();u(H.data.items||[])}catch(H){console.error("Failed to load categories:",H)}finally{x(!1)}},ue=()=>{g(null),k({name:"",description:"",parent_id:"",is_active:!0}),j(""),v(!0)},be=H=>{g(H),k({name:H.name,description:H.description||"",parent_id:H.parent_id||"",is_active:H.is_active}),j(""),v(!0)},D=async H=>{if(H.preventDefault(),!f.name.trim()){j("Category name is required");return}N(!0),j("");try{const $={...f,parent_id:f.parent_id||null};p?(await qe.updateCategory(p.id,$),S("Category updated successfully")):(await qe.createCategory($),S("Category created successfully")),v(!1),F()}catch($){const le=T($);j(le)}finally{N(!1)}},[V,ee]=m.useState(!1),[Y,U]=m.useState(null),se=H=>{U(H),ee(!0)},Z=async()=>{if(Y)try{await qe.deleteCategory(Y.id),S("Category deleted successfully"),F()}catch(H){T(H,"Failed to delete category")}finally{ee(!1),U(null)}},P=i.filter(H=>H.name.toLowerCase().includes(M.toLowerCase())||H.description?.toLowerCase().includes(M.toLowerCase())),I=H=>H?i.find(le=>le.id===H)?.name:null,E={total:i.length,active:i.filter(H=>H.is_active).length,subcategories:i.filter(H=>H.parent_id).length},L=[{header:"Category",key:"name",render:H=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-emerald-600 text-[18px]",children:"folder"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:H.name}),H.description&&e.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:H.description})]})]})},{header:"Parent",key:"parent_id",render:H=>{const $=I(H.parent_id);return $?e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:$}):e.jsx("span",{className:"text-sm text-slate-400",children:""})}},{header:"Status",key:"is_active",align:"center",render:H=>e.jsx(Ye,{variant:H.is_active?"success":"secondary",children:H.is_active?"Active":"Inactive"})},{header:"Created",key:"created_at",render:H=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(H.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:H=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("categories.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>be(H),className:"!p-1.5 h-8 w-8 text-emerald-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("categories.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>se(H),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],_=P.slice((q-1)*R,q*R);return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Categories",subtitle:"Manage medicine categories and subcategories.",actions:n("categories.create")&&e.jsx(ie,{variant:"primary",onClick:ue,className:"bg-gradient-to-r from-emerald-600 to-teal-600",icon:"add",children:"Add Category"})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Categories",value:E.total,icon:"category",isActive:!0}),e.jsx(Ne,{title:"Active",value:E.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Subcategories",value:E.subcategories,icon:"account_tree",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:L,data:_,loading:h,emptyMessage:"No categories found.",pagination:{currentPage:q,totalPages:Math.ceil(P.length/R),onPageChange:ce,totalItems:P.length,pageSize:R,onPageSizeChange:H=>{G(H),ce(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Category List",count:P.length,searchProps:{value:M,onChange:H=>{O(H),ce(1)},placeholder:"Search categories..."},embedded:!0})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit Category":"Add Category",subtitle:p?"Update category information":"Create a new category or subcategory",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"category-form",loading:w,children:w?"Saving...":"Save"})]}),children:e.jsxs("form",{id:"category-form",onSubmit:D,className:"space-y-5",children:[C&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:C}),e.jsx(ge,{label:"Category Name",value:f.name,onChange:H=>k({...f,name:H.target.value}),placeholder:"e.g., Antibiotics",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Parent Category"}),e.jsxs("select",{value:f.parent_id,onChange:H=>k({...f,parent_id:H.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/20",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),i.filter(H=>H.id!==p?.id&&!H.parent_id).map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:H=>k({...f,description:H.target.value}),placeholder:"Brief description...",rows:3,className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:H=>k({...f,is_active:H.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:V,onClose:()=>ee(!1),onConfirm:Z,title:"Delete Category",message:`Are you sure you want to delete "${Y?.name}"? This action cannot be undone.`,confirmText:"Delete Category"})]})}function mN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState({name:"",short_name:"",description:"",is_active:!0}),[w,N]=m.useState(!1),[C,j]=m.useState(""),{handleError:T,handleSuccess:S}=ds(),[M,O]=m.useState(""),[R,G]=m.useState(10),[q,ce]=m.useState(1);m.useEffect(()=>{l&&!n("units.view")&&c("/")},[l,c,n]),m.useEffect(()=>{F()},[]);const F=async()=>{x(!0);try{const _=await qe.listUnits();u(_.data.items||[])}catch(_){console.error("Failed to load units:",_)}finally{x(!1)}},ue=()=>{g(null),k({name:"",short_name:"",description:"",is_active:!0}),j(""),v(!0)},be=_=>{g(_),k({name:_.name,short_name:_.short_name,description:_.description||"",is_active:_.is_active}),j(""),v(!0)},D=async _=>{if(_.preventDefault(),!f.name.trim()||!f.short_name.trim()){j("Name and short name are required");return}N(!0),j("");try{p?(await qe.updateUnit(p.id,f),S("Unit updated successfully")):(await qe.createUnit(f),S("Unit created successfully")),v(!1),F()}catch(H){const $=T(H);j($)}finally{N(!1)}},[V,ee]=m.useState(!1),[Y,U]=m.useState(null),se=_=>{U(_),ee(!0)},Z=async()=>{if(Y)try{await qe.deleteUnit(Y.id),S("Unit deleted successfully"),F()}catch(_){T(_,"Failed to delete unit")}finally{ee(!1),U(null)}},P=i.filter(_=>_.name.toLowerCase().includes(M.toLowerCase())),I={total:i.length,active:i.filter(_=>_.is_active).length},E=[{header:"Unit Name",key:"name",render:_=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-xs",children:_.short_name.slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:_.name}),_.description&&e.jsx("p",{className:"text-xs text-slate-500",children:_.description})]})]})},{header:"Short Name",key:"short_name",render:_=>e.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs",children:_.short_name})},{header:"Status",key:"is_active",align:"center",render:_=>e.jsx(Ye,{variant:_.is_active?"success":"secondary",children:_.is_active?"Active":"Inactive"})},{header:"Created",key:"created_at",render:_=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(_.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:_=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("units.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>be(_),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("units.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>se(_),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],L=P.slice((q-1)*R,q*R);return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Units",subtitle:"Manage units of measurement.",actions:n("units.create")&&e.jsx(ie,{variant:"primary",onClick:ue,className:"bg-gradient-to-r from-blue-600 to-cyan-600",icon:"add",children:"Add Unit"})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Units",value:I.total,icon:"straighten",isActive:!0}),e.jsx(Ne,{title:"Active",value:I.active,icon:"check_circle",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:E,data:L,loading:h,emptyMessage:"No units found.",pagination:{currentPage:q,totalPages:Math.ceil(P.length/R),onPageChange:ce,totalItems:P.length,pageSize:R,onPageSizeChange:_=>{G(_),ce(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Unit List",count:P.length,searchProps:{value:M,onChange:_=>{O(_),ce(1)},placeholder:"Search units..."},embedded:!0})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit Unit":"Add Unit",subtitle:p?"Update unit information":"Create a new unit master",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"unit-form",loading:w,children:w?"Saving...":"Save"})]}),children:e.jsxs("form",{id:"unit-form",onSubmit:D,className:"space-y-5",children:[C&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:C}),e.jsx(ge,{label:"Name",value:f.name,onChange:_=>k({...f,name:_.target.value}),placeholder:"e.g., Tablet",required:!0}),e.jsx(ge,{label:"Short Name",value:f.short_name,onChange:_=>k({...f,short_name:_.target.value}),placeholder:"e.g., Tab",maxLength:10,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:_=>k({...f,description:_.target.value}),rows:3,className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white resize-none focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Unit description"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:_=>k({...f,is_active:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:V,onClose:()=>ee(!1),onConfirm:Z,title:"Delete Unit",message:`Are you sure you want to delete "${Y?.name}"? This action cannot be undone.`,confirmText:"Delete Unit"})]})}function hN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),{getMaster:i,isLoading:u}=ht(),h=i("gst_slabs");console.log("GST Slabs Debug:",{mastersLoading:u,gstSlabs:h,count:h?.length});const[x,b]=m.useState([]),[v,p]=m.useState(!0),[g,f]=m.useState(!1),[k,w]=m.useState(null),[N,C]=m.useState({hsn_code:"",description:"",gst_slab_id:"",gst_rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0,is_active:!0}),[j,T]=m.useState(!1),[S,M]=m.useState(""),[O,R]=m.useState(""),[G,q]=m.useState(10),[ce,F]=m.useState(1),[ue,be]=m.useState(0);m.useEffect(()=>{l&&!n("hsn.view")&&c("/")},[l,c,n]),m.useEffect(()=>{D()},[ce,G,O]);const D=async()=>{p(!0);try{const $=await qe.listHSN({page:ce,size:G,search:O});$.data&&Array.isArray($.data.items)?(b($.data.items),be($.data.total||0)):(b([]),be(0))}catch($){console.error("Failed to load HSN codes:",$),b([])}finally{p(!1)}},V=()=>{w(null),C({hsn_code:"",description:"",gst_slab_id:"",gst_rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0,is_active:!0}),M(""),f(!0)},ee=$=>{w($),C({hsn_code:$.hsn_code,description:$.description,gst_slab_id:$.gst_slab_id||"",gst_rate:$.gst_rate,cgst_rate:$.cgst_rate,sgst_rate:$.sgst_rate,igst_rate:$.igst_rate,is_active:$.is_active}),M(""),f(!0)},Y=$=>{const le=h.find(je=>je.id===$);le&&C({...N,gst_slab_id:$,gst_rate:le.rate,cgst_rate:le.rate/2,sgst_rate:le.rate/2,igst_rate:le.rate})},U=async $=>{if($.preventDefault(),!N.hsn_code.trim()||!N.description.trim()){M("HSN code and description are required");return}T(!0),M("");try{k?await qe.updateHSN(k.id,N):await qe.createHSN(N),f(!1),D()}catch(le){M(le.response?.data?.detail||"Failed to save")}finally{T(!1)}},[se,Z]=m.useState(!1),[P,I]=m.useState(null),E=$=>{I($),Z(!0)},L=async()=>{if(P)try{await qe.deleteHSN(P.id),window.toast?.success("HSN Code deleted successfully"),D()}catch($){console.error("Failed to delete HSN Code:",$),window.toast?.error($.response?.data?.detail||"Failed to delete HSN Code")}finally{Z(!1),I(null)}},_={total:ue,gst5:x.filter($=>$.gst_rate===5).length,gst12:x.filter($=>$.gst_rate===12).length},H=[{header:"HSN Code",key:"hsn_code",render:$=>e.jsx("span",{className:"font-mono font-semibold text-amber-600 dark:text-amber-500",children:$.hsn_code})},{header:"Description",key:"description",render:$=>e.jsx("span",{className:"text-slate-900 dark:text-white",children:$.description})},{header:"GST %",key:"gst_rate",align:"center",render:$=>e.jsxs(Ye,{variant:"warning",children:[$.gst_rate,"%"]})},{header:"CGST",key:"cgst_rate",align:"center",render:$=>e.jsxs("span",{className:"text-slate-500",children:[$.cgst_rate,"%"]})},{header:"SGST",key:"sgst_rate",align:"center",render:$=>e.jsxs("span",{className:"text-slate-500",children:[$.sgst_rate,"%"]})},{header:"Status",key:"is_active",align:"center",render:$=>e.jsx(Ye,{variant:$.is_active?"success":"secondary",children:$.is_active?"Active":"Inactive"})},{header:"Actions",key:"id",align:"right",render:$=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("hsn.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>ee($),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("hsn.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>E($),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ye,{loading:u,children:[e.jsx(ye.Header,{title:"HSN Codes",subtitle:"Manage HSN codes with GST rates.",actions:n("hsn.create")&&e.jsx(ie,{variant:"primary",onClick:V,className:"bg-gradient-to-r from-amber-600 to-orange-600",icon:"add",children:"Add HSN Code"})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total HSN Codes",value:_.total,icon:"tag",isActive:!0}),e.jsx(Ne,{title:"5% GST Items",value:_.gst5,icon:"percent",trend:"neutral"}),e.jsx(Ne,{title:"12% GST Items",value:_.gst12,icon:"percent",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:H,data:x,loading:v,emptyMessage:"No HSN codes found.",pagination:{currentPage:ce,totalPages:Math.ceil(ue/G),onPageChange:F,totalItems:ue,pageSize:G,onPageSizeChange:$=>{q($),F(1)}},headerSlot:e.jsx(ye.ListControls,{title:"HSN List",count:ue,searchProps:{value:O,onChange:$=>{R($),F(1)},placeholder:"Search HSN codes..."},embedded:!0})}),e.jsx(zt,{isOpen:g,onClose:()=>f(!1),title:k?"Edit HSN Code":"Add HSN Code",subtitle:k?"Update HSN code information":"Create a new HSN code",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>f(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"hsn-code-form",loading:j,children:j?"Saving...":"Save"})]}),children:e.jsxs("form",{id:"hsn-code-form",onSubmit:U,className:"space-y-5",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:S}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"HSN Code",value:N.hsn_code,onChange:$=>C({...N,hsn_code:$.target.value}),placeholder:"e.g. 3004",required:!0}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["GST Slab ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:N.gst_slab_id,onChange:$=>Y($.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-500/20",children:[e.jsx("option",{value:"",children:"Select GST Slab"}),h.map($=>e.jsxs("option",{value:$.id,children:[$.rate,"% GST",$.description?` - ${$.description}`:""]},$.id))]})]})]}),e.jsx(ge,{label:"Description",value:N.description,onChange:$=>C({...N,description:$.target.value}),placeholder:"e.g., Medicaments",required:!0}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[e.jsxs("p",{className:"text-sm font-semibold text-amber-900 dark:text-amber-200 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"info"}),"Auto-calculated Tax Rates"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-lg text-center",children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold block",children:"Total"}),e.jsxs("div",{className:"mt-1 font-mono font-bold text-amber-600 dark:text-amber-400",children:[N.gst_rate,"%"]})]}),e.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-lg text-center",children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold block",children:"CGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[N.cgst_rate,"%"]})]}),e.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-lg text-center",children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold block",children:"SGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[N.sgst_rate,"%"]})]}),e.jsxs("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-lg text-center",children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold block",children:"IGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[N.igst_rate,"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:N.is_active,onChange:$=>C({...N,is_active:$.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-amber-600 focus:ring-amber-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:se,onClose:()=>Z(!1),onConfirm:L,title:"Delete HSN Code",message:`Are you sure you want to delete HSN Code "${P?.hsn_code}"? This action cannot be undone.`,confirmText:"Delete HSN Code"})]})}function xN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),{getMaster:i,isLoading:u}=ht(),h=i("gst_slabs"),[x,b]=m.useState({enable_gst:!0,default_gst_rate:12,enable_vat:!1,default_vat_rate:5,tax_inclusive_pricing:!1,round_off_tax:!0,gst_number:"",business_name:"",business_address:""}),[v,p]=m.useState(!0),[g,f]=m.useState(!1),[k,w]=m.useState(!1);m.useEffect(()=>{l&&!n("gst.view")&&c("/")},[l,c,n]),m.useEffect(()=>{N()},[]);const N=async()=>{p(!0);try{const j=await N0.getSettings();j.data&&b(j.data)}catch(j){console.error("Failed to load tax settings:",j)}finally{p(!1)}},C=async()=>{f(!0);try{await N0.updateSettings(x),w(!0),setTimeout(()=>w(!1),3e3)}catch(j){console.error("Failed to save:",j),alert("Failed to save settings")}finally{f(!1)}};return v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"spinner"})}):e.jsx(Yt,{title:"GST / VAT Settings",description:"Configure tax settings for your business",icon:"receipt_long",actions:k?e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),"Saved Successfully"]}):void 0,loading:v||u,children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(Ze,{title:"GST Configuration",icon:"receipt_long",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Enable GST"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Apply GST to all transactions"})]}),e.jsx("button",{onClick:()=>b({...x,enable_gst:!x.enable_gst}),className:`relative w-12 h-6 rounded-full transition-colors ${x.enable_gst?"bg-orange-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${x.enable_gst?"left-7":"left-1"}`})})]}),x.enable_gst&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Default GST Rate"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.length>0?h.map(j=>e.jsxs("button",{onClick:()=>b({...x,default_gst_rate:j.rate}),className:`px-4 py-2 rounded-xl font-medium transition-all ${x.default_gst_rate===j.rate?"bg-orange-500 text-white shadow-lg shadow-orange-500/25":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200"}`,children:[j.rate,"%"]},j.id)):e.jsx("div",{className:"text-sm text-slate-500 italic",children:"No GST slabs found. Check master data."})})]}),e.jsx(ge,{label:"GST Number (GSTIN)",value:x.gst_number,onChange:j=>b({...x,gst_number:j.target.value}),placeholder:"e.g., 29ABCDE1234F1Z5",className:"font-mono"})]})]})}),e.jsx(Ze,{title:"VAT Configuration",icon:"percent",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Enable VAT"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Apply VAT in addition to or instead of GST"})]}),e.jsx("button",{onClick:()=>b({...x,enable_vat:!x.enable_vat}),className:`relative w-12 h-6 rounded-full transition-colors ${x.enable_vat?"bg-purple-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${x.enable_vat?"left-7":"left-1"}`})})]}),x.enable_vat&&e.jsx(ge,{label:"Default VAT Rate (%)",type:"number",value:x.default_vat_rate,onChange:j=>b({...x,default_vat_rate:Number(j.target.value)}),className:"w-32"})]})}),e.jsx(Ze,{title:"Pricing Options",icon:"tune",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Tax Inclusive Pricing"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Product prices already include tax"})]}),e.jsx("button",{onClick:()=>b({...x,tax_inclusive_pricing:!x.tax_inclusive_pricing}),className:`relative w-12 h-6 rounded-full transition-colors ${x.tax_inclusive_pricing?"bg-blue-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${x.tax_inclusive_pricing?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Round Off Tax"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Round tax amounts to nearest rupee"})]}),e.jsx("button",{onClick:()=>b({...x,round_off_tax:!x.round_off_tax}),className:`relative w-12 h-6 rounded-full transition-colors ${x.round_off_tax?"bg-blue-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${x.round_off_tax?"left-7":"left-1"}`})})]})]})}),e.jsx(Ze,{title:"Business Details",icon:"business",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ge,{label:"Business Name",value:x.business_name,onChange:j=>b({...x,business_name:j.target.value}),placeholder:"Your business name"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Business Address"}),e.jsx("textarea",{value:x.business_address,onChange:j=>b({...x,business_address:j.target.value}),placeholder:"Full business address",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 resize-none"})]})]})}),e.jsx("div",{className:"flex justify-end",children:n("gst.edit")&&e.jsxs(ie,{variant:"primary",onClick:C,loading:g,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"save"}),g?"Saving...":"Save Settings"]})})]})})}function pN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),{refresh:i,isLoading:u}=ht(),[h,x]=m.useState([]),[b,v]=m.useState(!0),[p,g]=m.useState(!1),[f,k]=m.useState(null),[w,N]=m.useState({rate:0,description:"",is_active:!0}),[C,j]=m.useState(!1),[T,S]=m.useState("");m.useEffect(()=>{l&&!n("gst.view")&&c("/")},[l,c,n]),m.useEffect(()=>{M()},[]);const M=async()=>{v(!0);try{const ee=await qe.listGSTSlabs();x(ee.data.items||[])}catch(ee){console.error("Failed to load GST slabs:",ee)}finally{v(!1)}},O=()=>{k(null),N({rate:0,description:"",is_active:!0}),S(""),g(!0)},R=ee=>{k(ee),N({rate:ee.rate,description:ee.description||"",is_active:ee.is_active}),S(""),g(!0)},G=async ee=>{if(ee.preventDefault(),w.rate<=0){S("GST rate must be greater than 0");return}j(!0),S("");try{f?await qe.updateGSTSlab(f.id,w):await qe.createGSTSlab(w),g(!1),M(),i()}catch(Y){S(Y.response?.data?.detail||"Failed to save GST slab")}finally{j(!1)}},[q,ce]=m.useState(!1),[F,ue]=m.useState(null),be=ee=>{ue(ee),ce(!0)},D=async()=>{if(F)try{await qe.deleteGSTSlab(F.id),window.toast?.success("GST Slab deleted successfully"),M(),i()}catch(ee){console.error("Failed to delete GST Slab:",ee),window.toast?.error(ee.response?.data?.detail||"Failed to delete GST Slab")}finally{ce(!1),ue(null)}},V=[0,5,12,18,28];return e.jsxs(Yt,{title:"GST Slabs",description:"Manage GST tax rates for your products",actions:n("gst.create")&&e.jsxs(ie,{variant:"primary",onClick:O,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add GST Slab"]}),loading:u,children:[e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"info"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"GST Slabs are Required"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"GST Slabs must be created before you can add HSN Codes or Medicines. Standard Indian GST rates are 0%, 5%, 12%, 18%, and 28%."})]})]})}),h.length===0&&!b&&n("gst.create")&&e.jsxs(Ze,{title:"Quick Setup",icon:"bolt",children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Click to quickly add standard GST slabs:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:V.map(ee=>e.jsxs(ie,{variant:"secondary",onClick:async()=>{try{await qe.createGSTSlab({rate:ee,description:`GST ${ee}%`}),M(),i()}catch(Y){console.error(Y)}},children:["Add ",ee,"%"]},ee))})]}),e.jsx(Ze,{className:"!p-0",children:b?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"spinner"})}):h.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"percent"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No GST Slabs"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create GST slabs to enable HSN codes and medicines"}),n("gst.create")&&e.jsx(ie,{variant:"primary",className:"mt-4",onClick:O,children:"Add First GST Slab"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Rate"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"CGST"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"SGST"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:h.map(ee=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[ee.rate,"%"]})}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:ee.description||"-"}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:[(ee.rate/2).toFixed(1),"%"]}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:[(ee.rate/2).toFixed(1),"%"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(Ye,{variant:ee.is_active?"success":"secondary",children:ee.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[n("gst.edit")&&e.jsx(ie,{variant:"secondary",onClick:()=>R(ee),className:"!p-1.5",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("gst.delete")&&e.jsx(ie,{variant:"secondary",onClick:()=>be(ee),className:"!p-1.5 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},ee.id))})]})})]}),e.jsx(zt,{isOpen:p,onClose:()=>g(!1),title:f?"Edit GST Slab":"Add GST Slab",subtitle:f?"Update GST slab information":"Create a new GST slab",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>g(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"gst-slab-form",loading:C,children:C?"Saving...":f?"Update":"Create"})]}),children:e.jsxs("form",{id:"gst-slab-form",onSubmit:G,className:"space-y-5",children:[T&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:T}),e.jsx(ge,{label:"GST Rate (%)",type:"number",value:w.rate,onChange:ee=>N({...w,rate:Number(ee.target.value)}),placeholder:"e.g., 18",min:0,max:100,required:!0}),e.jsx(ge,{label:"Description (Optional)",value:w.description,onChange:ee=>N({...w,description:ee.target.value}),placeholder:"e.g., Standard GST Rate"}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase mb-3 tracking-wider",children:"Tax Breakdown Preview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:[w.rate,"%"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total GST"})]}),e.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("p",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:[(w.rate/2).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"CGST"})]}),e.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-lg",children:[e.jsxs("p",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:[(w.rate/2).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"SGST"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:w.is_active,onChange:ee=>N({...w,is_active:ee.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:q,onClose:()=>ce(!1),onConfirm:D,title:"Delete GST Slab",message:`Are you sure you want to delete GST Slab "${F?.rate}%"? This action cannot be undone.`,confirmText:"Delete Slab"})]})}function fN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState({name:"",code:"",contact_person:"",phone:"",email:"",gst_number:"",address:"",city:"",state:"",pincode:"",is_active:!0}),[w,N]=m.useState(!1),[C,j]=m.useState(""),{handleError:T,handleSuccess:S}=ds(),[M,O]=m.useState(""),[R,G]=m.useState(10),[q,ce]=m.useState(1);m.useEffect(()=>{l&&!n("suppliers.view")&&c("/")},[l,c,n]),m.useEffect(()=>{F()},[]);const F=async()=>{x(!0);try{const _=await qe.listSuppliers();u(_.data.items||[])}catch(_){console.error("Failed to load suppliers:",_),u([])}finally{x(!1)}},ue=()=>{g(null),k({name:"",code:"",contact_person:"",phone:"",email:"",gst_number:"",address:"",city:"",state:"",pincode:"",is_active:!0}),j(""),v(!0)},be=_=>{g(_),k({name:_.name,code:_.code,contact_person:_.contact_person||"",phone:_.phone||"",email:_.email||"",gst_number:_.gst_number||"",address:_.address||"",city:_.city||"",state:_.state||"",pincode:_.pincode||"",is_active:_.is_active}),j(""),v(!0)},D=async _=>{if(_.preventDefault(),!f.name.trim()||!f.code.trim()){j("Name and code are required");return}N(!0),j("");try{p?(await qe.updateSupplier(p.id,f),S("Supplier updated successfully")):(await qe.createSupplier(f),S("Supplier created successfully")),v(!1),F()}catch(H){const $=T(H);j($)}finally{N(!1)}},[V,ee]=m.useState(!1),[Y,U]=m.useState(null),se=_=>{U(_),ee(!0)},Z=async()=>{if(Y)try{await qe.deleteSupplier(Y.id),S("Supplier deleted successfully"),F()}catch(_){T(_,"Failed to delete supplier")}finally{ee(!1),U(null)}},P=i.filter(_=>_.name.toLowerCase().includes(M.toLowerCase())||_.code.toLowerCase().includes(M.toLowerCase())),I={total:i.length,active:i.filter(_=>_.is_active).length,inactive:i.filter(_=>!_.is_active).length,cities:new Set(i.map(_=>_.city).filter(Boolean)).size},E=[{header:"Code",key:"code",render:_=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:_.code})},{header:"Supplier",key:"name",render:_=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:_.name}),e.jsx("div",{className:"text-xs text-slate-500",children:_.city||"No Location"})]})},{header:"Contact",key:"contact_person",render:_=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:_.contact_person}),e.jsx("div",{className:"text-xs text-slate-500",children:_.phone})]})},{header:"GST Number",key:"gst_number",render:_=>e.jsx("span",{className:"font-mono text-xs",children:_.gst_number||"-"}),className:"hidden md:table-cell"},{header:"Status",key:"is_active",render:_=>e.jsx(Ye,{variant:_.is_active?"success":"secondary",children:_.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",render:_=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("suppliers.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>be(_),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("suppliers.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>se(_),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}],L=P.slice((q-1)*R,q*R);return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Suppliers",subtitle:"Manage suppliers for stock entry and purchase orders",actions:n("suppliers.create")&&e.jsxs(ie,{variant:"primary",onClick:ue,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Supplier"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Suppliers",value:I.total,icon:"local_shipping",isActive:!0}),e.jsx(Ne,{title:"Active",value:I.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Inactive",value:I.inactive,icon:"cancel",trend:"neutral"}),e.jsx(Ne,{title:"Cities",value:I.cities,icon:"location_city",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:E,data:L,loading:h,emptyMessage:"No suppliers found.",pagination:{currentPage:q,totalPages:Math.ceil(P.length/R),onPageChange:ce,totalItems:P.length,pageSize:R,onPageSizeChange:_=>{G(_),ce(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Supplier List",count:P.length,searchProps:{value:M,onChange:_=>{O(_),ce(1)},placeholder:"Search suppliers..."},embedded:!0})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit Supplier":"Add Supplier",subtitle:p?"Update supplier information":"Create a new supplier master",width:"lg",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"supplier-form",loading:w,children:w?"Saving...":"Save"})]}),children:e.jsxs("form",{id:"supplier-form",onSubmit:D,className:"space-y-5",children:[C&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:C}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Supplier Code",value:f.code,onChange:_=>k({...f,code:_.target.value}),placeholder:"SUP001",required:!0}),e.jsx(ge,{label:"Supplier Name",value:f.name,onChange:_=>k({...f,name:_.target.value}),placeholder:"ABC Pharmaceuticals",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Contact Person",value:f.contact_person,onChange:_=>k({...f,contact_person:_.target.value}),placeholder:"John Doe"}),e.jsx(ge,{label:"Phone",value:f.phone,onChange:_=>k({...f,phone:_.target.value}),placeholder:"+91 9876543210"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Email",type:"email",value:f.email,onChange:_=>k({...f,email:_.target.value}),placeholder:"supplier@example.com"}),e.jsx(ge,{label:"GST Number",value:f.gst_number,onChange:_=>k({...f,gst_number:_.target.value}),placeholder:"29ABCDE1234F1Z5",className:"font-mono"})]}),e.jsx(ge,{label:"Address",value:f.address,onChange:_=>k({...f,address:_.target.value}),placeholder:"Street address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(ge,{label:"City",value:f.city,onChange:_=>k({...f,city:_.target.value}),placeholder:"Mumbai"}),e.jsx(ge,{label:"State",value:f.state,onChange:_=>k({...f,state:_.target.value}),placeholder:"Maharashtra"}),e.jsx(ge,{label:"Pincode",value:f.pincode,onChange:_=>k({...f,pincode:_.target.value}),placeholder:"400001"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:_=>k({...f,is_active:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:V,onClose:()=>ee(!1),onConfirm:Z,title:"Delete Supplier",message:`Are you sure you want to delete "${Y?.name}"? This action cannot be undone.`,confirmText:"Delete Supplier"})]})}function gN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState({name:"",code:"",description:"",adjustment_type:"decrease",is_active:!0}),[w,N]=m.useState(!1),[C,j]=m.useState(""),[T,S]=m.useState(""),[M,O]=m.useState(1),[R,G]=m.useState(10);m.useEffect(()=>{l&&!n("adjustment_reasons.view")&&c("/")},[l,c,n]),m.useEffect(()=>{q()},[]);const q=async()=>{x(!0);try{const E=await qe.listAdjustmentReasons();u(E.data.items||[])}catch(E){console.error("Failed to load adjustment reasons:",E),i.length===0&&u([])}finally{x(!1)}},ce=()=>{g(null),k({name:"",code:"",description:"",adjustment_type:"decrease",is_active:!0}),j(""),v(!0)},F=E=>{g(E),k({name:E.name,code:E.code,description:E.description||"",adjustment_type:E.adjustment_type,is_active:E.is_active}),j(""),v(!0)},ue=async E=>{if(E.preventDefault(),!f.name.trim()||!f.code.trim()){j("Name and code are required");return}N(!0),j("");try{p?await qe.updateAdjustmentReason(p.id,f):await qe.createAdjustmentReason(f),v(!1),q()}catch(L){j(L.response?.data?.detail||"Failed to save")}finally{N(!1)}},[be,D]=m.useState(!1),[V,ee]=m.useState(null),Y=E=>{ee(E),D(!0)},U=async()=>{if(V)try{await qe.deleteAdjustmentReason(V.id),window.toast?.success("Adjustment reason deleted successfully"),q()}catch(E){console.error("Failed to delete adjustment reason:",E),window.toast?.error(E.response?.data?.detail||"Failed to delete adjustment reason")}finally{D(!1),ee(null)}},se=i.filter(E=>E.name.toLowerCase().includes(T.toLowerCase())||E.code.toLowerCase().includes(T.toLowerCase())),Z=se.slice((M-1)*R,M*R),P={total:i.length,increase:i.filter(E=>E.adjustment_type==="increase").length,decrease:i.filter(E=>E.adjustment_type==="decrease").length},I=[{header:"Code",key:"code",render:E=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:E.code})},{header:"Reason Name",key:"name",render:E=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:E.name}),E.description&&e.jsx("div",{className:"text-xs text-slate-500",children:E.description})]})},{header:"Type",key:"adjustment_type",render:E=>e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full ${E.adjustment_type==="increase"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:E.adjustment_type==="increase"?"arrow_upward":"arrow_downward"}),E.adjustment_type==="increase"?"Increase":"Decrease"]})},{header:"Actions",key:"id",align:"right",render:E=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("adjustment_reasons.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>F(E),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("adjustment_reasons.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>Y(E),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Adjustment Reasons",subtitle:"Manage stock adjustment reasons",actions:n("adjustment_reasons.create")&&e.jsxs(ie,{variant:"primary",onClick:ce,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Reason"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Reasons",value:P.total,icon:"swap_vert",isActive:!0}),e.jsx(Ne,{title:"Increase Types",value:P.increase,icon:"trending_up",trend:"up",valueClassName:"text-green-600"}),e.jsx(Ne,{title:"Decrease Types",value:P.decrease,icon:"trending_down",trend:"down",valueClassName:"text-red-600"})]}),e.jsx(ye.DataTable,{columns:I,data:Z,loading:h,emptyMessage:"No adjustment reasons found.",pagination:{currentPage:M,totalPages:Math.ceil(se.length/R),onPageChange:O,totalItems:se.length,pageSize:R,onPageSizeChange:E=>{G(E),O(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Reason List",count:se.length,searchProps:{value:T,onChange:E=>{S(E),O(1)},placeholder:"Search reasons..."},embedded:!0})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit Reason":"Add Reason",subtitle:p?"Update adjustment reason":"Create a new adjustment reason",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"adjustment-reason-form",loading:w,children:w?"Saving...":"Save"})]}),children:e.jsxs("form",{id:"adjustment-reason-form",onSubmit:ue,className:"space-y-5",children:[C&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:C}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Code",value:f.code,onChange:E=>k({...f,code:E.target.value}),placeholder:"DAMAGE",required:!0}),e.jsx(ge,{label:"Name",value:f.name,onChange:E=>k({...f,name:E.target.value}),placeholder:"Damaged Goods",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Adjustment Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"radio",checked:f.adjustment_type==="decrease",onChange:()=>k({...f,adjustment_type:"decrease"}),className:"text-primary w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Decrease (Stock Out)"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"radio",checked:f.adjustment_type==="increase",onChange:()=>k({...f,adjustment_type:"increase"}),className:"text-primary w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Increase (Stock In)"})]})]})]}),e.jsx(ge,{label:"Description",value:f.description,onChange:E=>k({...f,description:E.target.value}),placeholder:"Explain when this reason is used"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:E=>k({...f,is_active:E.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:be,onClose:()=>D(!1),onConfirm:U,title:"Delete Adjustment Reason",message:`Are you sure you want to delete "${V?.name}"? This action cannot be undone.`,confirmText:"Delete Reason"})]})}function bN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState({name:"",code:"",icon:"payments",is_active:!0}),[w,N]=m.useState(!1),[C,j]=m.useState("");m.useEffect(()=>{l&&!n("payment_methods.view")&&c("/")},[l,c,n]),m.useEffect(()=>{T()},[]);const T=async()=>{x(!0);try{const D=await qe.listPaymentMethods();u(D.data.items||[])}catch(D){console.error("Failed to load payment methods:",D),u([{id:"1",code:"CASH",name:"Cash",icon:"payments",is_active:!0,created_at:new Date().toISOString()},{id:"2",code:"CARD",name:"Credit/Debit Card",icon:"credit_card",is_active:!0,created_at:new Date().toISOString()},{id:"3",code:"UPI",name:"UPI",icon:"qr_code_scanner",is_active:!0,created_at:new Date().toISOString()},{id:"4",code:"WALLET",name:"Digital Wallet",icon:"account_balance_wallet",is_active:!0,created_at:new Date().toISOString()},{id:"5",code:"CREDIT",name:"Store Credit",icon:"receipt",is_active:!0,created_at:new Date().toISOString()}])}finally{x(!1)}},S=()=>{g(null),k({name:"",code:"",icon:"payments",is_active:!0}),j(""),v(!0)},M=D=>{g(D),k({name:D.name,code:D.code,icon:D.icon||"payments",is_active:D.is_active}),j(""),v(!0)},O=async D=>{if(D.preventDefault(),!f.name.trim()||!f.code.trim()){j("Name and code are required");return}N(!0),j("");try{p?await qe.updatePaymentMethod(p.id,f):await qe.createPaymentMethod(f),v(!1),T()}catch(V){j(V.response?.data?.detail||"Failed to save")}finally{N(!1)}},[R,G]=m.useState(!1),[q,ce]=m.useState(null),F=D=>{ce(D),G(!0)},ue=async()=>{if(q)try{await qe.deletePaymentMethod(q.id),window.toast?.success("Payment method deleted successfully"),T()}catch(D){console.error("Failed to delete payment method:",D),window.toast?.error(D.response?.data?.detail||"Failed to delete payment method")}finally{G(!1),ce(null)}},be=["payments","credit_card","qr_code_scanner","account_balance_wallet","receipt","account_balance"];return e.jsxs(Yt,{title:"Payment Methods",description:"Manage payment methods for billing and POS",icon:"credit_card",actions:n("payment_methods.create")&&e.jsxs(ie,{variant:"primary",onClick:S,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Method"]}),children:[e.jsx(Ze,{className:"space-y-6",children:h?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):i.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 mb-3",children:"credit_card"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No payment methods"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Add payment methods to enable billing"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(D=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:D.icon||"payments"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:D.name}),e.jsx("p",{className:"text-sm text-slate-500 font-mono",children:D.code})]}),e.jsxs("div",{className:"flex gap-1",children:[n("payment_methods.edit")&&e.jsx("button",{onClick:()=>M(D),className:"p-1.5 text-slate-400 hover:text-primary rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("payment_methods.delete")&&e.jsx("button",{onClick:()=>F(D),className:"p-1.5 text-slate-400 hover:text-red-600 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})]},D.id))})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit Payment Method":"Add Payment Method",subtitle:p?"Update payment method":"Create a new payment method",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"payment-method-form",loading:w,children:w?"Saving...":"Save"})]}),children:e.jsxs("form",{id:"payment-method-form",onSubmit:O,className:"space-y-5",children:[C&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:C}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Code",value:f.code,onChange:D=>k({...f,code:D.target.value}),placeholder:"CASH",required:!0}),e.jsx(ge,{label:"Name",value:f.name,onChange:D=>k({...f,name:D.target.value}),placeholder:"Cash Payment",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Icon"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:be.map(D=>e.jsx("button",{type:"button",onClick:()=>k({...f,icon:D}),className:`p-3 rounded-lg border transition-all ${f.icon===D?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-500/20":"border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:D})},D))})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:D=>k({...f,is_active:D.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:R,onClose:()=>G(!1),onConfirm:ue,title:"Delete Payment Method",message:`Are you sure you want to delete "${q?.name}"? This action cannot be undone.`,confirmText:"Delete Method"})]})}function yN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState({code:"",name:"",description:"",is_active:!0}),[w,N]=m.useState(!1),[C,j]=m.useState(""),{handleError:T,handleSuccess:S}=ds(),[M,O]=m.useState(""),[R,G]=m.useState(1),[q,ce]=m.useState(10);m.useEffect(()=>{l&&!n("medicine_types.view")&&c("/")},[l,c,n]),m.useEffect(()=>{F()},[]);const F=async()=>{x(!0);try{const _=await qe.listMedicineTypes();u(_.data.items||[])}catch(_){console.error("Failed to load medicine types:",_)}finally{x(!1)}},ue=()=>{g(null),k({code:"",name:"",description:"",is_active:!0}),j(""),v(!0)},be=_=>{g(_),k({code:_.code,name:_.name,description:_.description||"",is_active:_.is_active}),j(""),v(!0)},D=async _=>{if(_.preventDefault(),!f.code||!f.name){j("Code and Name are required");return}N(!0),j("");try{p?(await qe.updateMedicineType(p.id,f),S("Medicine type updated successfully")):(await qe.createMedicineType(f),S("Medicine type created successfully")),v(!1),F()}catch(H){const $=T(H);j($)}finally{N(!1)}},[V,ee]=m.useState(!1),[Y,U]=m.useState(null),se=_=>{U(_),ee(!0)},Z=async()=>{if(Y)try{await qe.deleteMedicineType(Y.id),S("Medicine type deleted successfully"),F()}catch(_){T(_,"Failed to delete medicine type")}finally{ee(!1),U(null)}},P=i.filter(_=>_.name.toLowerCase().includes(M.toLowerCase())||_.code.toLowerCase().includes(M.toLowerCase())),I=P.slice((R-1)*q,R*q),E={total:i.length,active:i.filter(_=>_.is_active).length,inactive:i.filter(_=>!_.is_active).length},L=[{header:"Code",key:"code",render:_=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:_.code})},{header:"Type Name",key:"name",render:_=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:_.name}),_.description&&e.jsx("div",{className:"text-xs text-slate-500",children:_.description})]})},{header:"Status",key:"is_active",render:_=>e.jsx(Ye,{variant:_.is_active?"success":"secondary",children:_.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:_=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("medicine_types.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>be(_),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("medicine_types.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>se(_),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Medicine Types",subtitle:"Manage medicine form types (tablet, capsule, syrup, etc.)",actions:n("medicine_types.create")&&e.jsxs(ie,{variant:"primary",onClick:ue,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Type"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Types",value:E.total,icon:"medication",isActive:!0}),e.jsx(Ne,{title:"Active",value:E.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Inactive",value:E.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:L,data:I,loading:h,emptyMessage:"No medicine types found.",pagination:{currentPage:R,totalPages:Math.ceil(P.length/q),onPageChange:G,totalItems:P.length,pageSize:q,onPageSizeChange:_=>{ce(_),G(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Type List",count:P.length,searchProps:{value:M,onChange:_=>{O(_),G(1)},placeholder:"Search types..."},embedded:!0})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit Medicine Type":"Add Medicine Type",subtitle:p?"Update medicine type information":"Create a new medicine type master",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"medicine-type-form",loading:w,children:w?"Saving...":p?"Update":"Create"})]}),children:e.jsxs("form",{id:"medicine-type-form",onSubmit:D,className:"space-y-5",children:[C&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:C}),e.jsx(ge,{label:"Code",value:f.code,onChange:_=>k({...f,code:_.target.value.toLowerCase()}),placeholder:"e.g., tablet",required:!0}),e.jsx(ge,{label:"Name",value:f.name,onChange:_=>k({...f,name:_.target.value}),placeholder:"e.g., Tablet",required:!0}),e.jsx(ge,{label:"Description (Optional)",value:f.description,onChange:_=>k({...f,description:_.target.value}),placeholder:"e.g., Solid oral dosage form"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:_=>k({...f,is_active:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:V,onClose:()=>ee(!1),onConfirm:Z,title:"Delete Medicine Type",message:`Are you sure you want to delete "${Y?.name}"? This action cannot be undone.`,confirmText:"Delete Type"})]})}function vN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState({code:"",name:"",description:"",is_active:!0}),[w,N]=m.useState(!1),[C,j]=m.useState(""),{handleError:T,handleSuccess:S}=ds(),[M,O]=m.useState(""),[R,G]=m.useState(1),[q,ce]=m.useState(10);m.useEffect(()=>{l&&!n("manufacturers.view")&&c("/")},[l,c,n]),m.useEffect(()=>{F()},[]);const F=async()=>{x(!0);try{const _=await qe.listManufacturers();u(_.data.items||[])}catch(_){console.error("Failed to load manufacturers:",_)}finally{x(!1)}},ue=()=>{g(null),k({code:"",name:"",description:"",is_active:!0}),j(""),v(!0)},be=_=>{g(_),k({code:_.code,name:_.name,description:_.description||"",is_active:_.is_active}),j(""),v(!0)},D=async _=>{if(_.preventDefault(),!f.code||!f.name){j("Code and Name are required");return}N(!0),j("");try{p?(await qe.updateManufacturer(p.id,f),S("Manufacturer updated successfully")):(await qe.createManufacturer(f),S("Manufacturer created successfully")),v(!1),F()}catch(H){const $=T(H);j($)}finally{N(!1)}},[V,ee]=m.useState(!1),[Y,U]=m.useState(null),se=_=>{U(_),ee(!0)},Z=async()=>{if(Y)try{await qe.deleteManufacturer(Y.id),S("Manufacturer deleted successfully"),F()}catch(_){T(_,"Failed to delete manufacturer")}finally{ee(!1),U(null)}},P=i.filter(_=>_.name.toLowerCase().includes(M.toLowerCase())||_.code.toLowerCase().includes(M.toLowerCase())),I=P.slice((R-1)*q,R*q),E={total:i.length,active:i.filter(_=>_.is_active).length,inactive:i.filter(_=>!_.is_active).length},L=[{header:"Code",key:"code",render:_=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:_.code})},{header:"Manufacturer",key:"name",render:_=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:_.name}),_.description&&e.jsx("div",{className:"text-xs text-slate-500",children:_.description})]})},{header:"Status",key:"is_active",render:_=>e.jsx(Ye,{variant:_.is_active?"success":"secondary",children:_.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:_=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("manufacturers.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>be(_),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("manufacturers.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>se(_),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Manufacturers",subtitle:"Manage medicine manufacturer masters",actions:n("manufacturers.create")&&e.jsxs(ie,{variant:"primary",onClick:ue,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Manufacturer"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Manufacturers",value:E.total,icon:"factory",isActive:!0}),e.jsx(Ne,{title:"Active",value:E.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Inactive",value:E.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:L,data:I,loading:h,emptyMessage:"No manufacturers found.",pagination:{currentPage:R,totalPages:Math.ceil(P.length/q),onPageChange:G,totalItems:P.length,pageSize:q,onPageSizeChange:_=>{ce(_),G(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Manufacturer List",count:P.length,searchProps:{value:M,onChange:_=>{O(_),G(1)},placeholder:"Search manufacturers..."},embedded:!0})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit Manufacturer":"Add Manufacturer",subtitle:p?"Update manufacturer information":"Create a new manufacturer master",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"manufacturer-form",loading:w,children:w?"Saving...":p?"Update":"Create"})]}),children:e.jsxs("form",{id:"manufacturer-form",onSubmit:D,className:"space-y-5",children:[C&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:C}),e.jsx(ge,{label:"Code",value:f.code,onChange:_=>k({...f,code:_.target.value.toLowerCase()}),placeholder:"e.g., sunpharma",required:!0}),e.jsx(ge,{label:"Name",value:f.name,onChange:_=>k({...f,name:_.target.value}),placeholder:"e.g., Sun Pharmaceutical",required:!0}),e.jsx(ge,{label:"Description (Optional)",value:f.description,onChange:_=>k({...f,description:_.target.value}),placeholder:"Manufacturer description"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:_=>k({...f,is_active:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:V,onClose:()=>ee(!1),onConfirm:Z,title:"Delete Manufacturer",message:`Are you sure you want to delete "${Y?.name}"? This action cannot be undone.`,confirmText:"Delete Manufacturer"})]})}function jN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState({code:"",name:"",description:"",is_active:!0}),[w,N]=m.useState(!1),[C,j]=m.useState(""),{handleError:T,handleSuccess:S}=ds(),[M,O]=m.useState(""),[R,G]=m.useState(1),[q,ce]=m.useState(10);m.useEffect(()=>{l&&!n("brands.view")&&c("/")},[l,c,n]),m.useEffect(()=>{F()},[]);const F=async()=>{x(!0);try{const _=await qe.listBrands();u(_.data.items||[])}catch(_){console.error("Failed to load brands:",_)}finally{x(!1)}},ue=()=>{g(null),k({code:"",name:"",description:"",is_active:!0}),j(""),v(!0)},be=_=>{g(_),k({code:_.code,name:_.name,description:_.description||"",is_active:_.is_active}),j(""),v(!0)},D=async _=>{if(_.preventDefault(),!f.code||!f.name){j("Code and Name are required");return}N(!0),j("");try{p?(await qe.updateBrand(p.id,f),S("Brand updated successfully")):(await qe.createBrand(f),S("Brand created successfully")),v(!1),F()}catch(H){const $=T(H);j($)}finally{N(!1)}},[V,ee]=m.useState(!1),[Y,U]=m.useState(null),se=_=>{U(_),ee(!0)},Z=async()=>{if(Y)try{await qe.deleteBrand(Y.id),S("Brand deleted successfully"),F()}catch(_){T(_,"Failed to delete brand")}finally{ee(!1),U(null)}},P=i.filter(_=>_.name.toLowerCase().includes(M.toLowerCase())||_.code.toLowerCase().includes(M.toLowerCase())),I=P.slice((R-1)*q,R*q),E={total:i.length,active:i.filter(_=>_.is_active).length,inactive:i.filter(_=>!_.is_active).length},L=[{header:"Code",key:"code",render:_=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:_.code})},{header:"Brand",key:"name",render:_=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:_.name}),_.description&&e.jsx("div",{className:"text-xs text-slate-500",children:_.description})]})},{header:"Status",key:"is_active",render:_=>e.jsx(Ye,{variant:_.is_active?"success":"secondary",children:_.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:_=>e.jsxs("div",{className:"flex justify-end gap-1",children:[n("brands.edit")&&e.jsx(ie,{variant:"ghost",onClick:()=>be(_),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),n("brands.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>se(_),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Brands",subtitle:"Manage medicine brand masters",actions:n("brands.create")&&e.jsxs(ie,{variant:"primary",onClick:ue,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Brand"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Brands",value:E.total,icon:"label",isActive:!0}),e.jsx(Ne,{title:"Active",value:E.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Inactive",value:E.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:L,data:I,loading:h,emptyMessage:"No brands found.",pagination:{currentPage:R,totalPages:Math.ceil(P.length/q),onPageChange:G,totalItems:P.length,pageSize:q,onPageSizeChange:_=>{ce(_),G(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Brand List",count:P.length,searchProps:{value:M,onChange:_=>{O(_),G(1)},placeholder:"Search brands..."},embedded:!0})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit Brand":"Add Brand",subtitle:p?"Update brand information":"Create a new brand master",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"brand-form",loading:w,children:w?"Saving...":p?"Update":"Create"})]}),children:e.jsxs("form",{id:"brand-form",onSubmit:D,className:"space-y-5",children:[C&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:C}),e.jsx(ge,{label:"Code",value:f.code,onChange:_=>k({...f,code:_.target.value.toLowerCase()}),placeholder:"e.g., cipla",required:!0}),e.jsx(ge,{label:"Name",value:f.name,onChange:_=>k({...f,name:_.target.value}),placeholder:"e.g., Cipla",required:!0}),e.jsx(ge,{label:"Description (Optional)",value:f.description,onChange:_=>k({...f,description:_.target.value}),placeholder:"Brand description"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:f.is_active,onChange:_=>k({...f,is_active:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700 dark:text-slate-300 cursor-pointer",children:"Active Status"})]})]})}),e.jsx(Qt,{isOpen:V,onClose:()=>ee(!1),onConfirm:Z,title:"Delete Brand",message:`Are you sure you want to delete "${Y?.name}"? This action cannot be undone.`,confirmText:"Delete Brand"})]})}function NN(){const{user:l}=mt(),{hasPermission:n}=nt(),c=Pe(),[i,u]=m.useState([]),[h,x]=m.useState([]),[b,v]=m.useState(!0),[p,g]=m.useState(!1),[f,k]=m.useState(""),[w]=m.useState(""),[N,C]=m.useState({rack_name:"",rack_number:"",warehouse_id:""}),[j,T]=m.useState(!1),[S,M]=m.useState(""),[O,R]=m.useState(10),[G,q]=m.useState(1);m.useEffect(()=>{l&&!n("racks.view")&&c("/")},[l,c,n]),m.useEffect(()=>{ce()},[]);const ce=async()=>{v(!0);try{const[E,L]=await Promise.all([Dt.list({size:500}),Mi.list({size:500})]);x(E.data.items?.map(_=>({id:_.id,name:_.name}))||[]),u(L.data.items||[])}catch(E){console.error("Failed to load data:",E)}finally{v(!1)}},F=()=>{C({rack_name:"",rack_number:"",warehouse_id:""}),M(""),g(!0)},ue=async E=>{if(E.preventDefault(),M(""),!N.rack_name||!N.rack_number){M("Rack Name and Rack Number are required");return}T(!0);try{await Mi.create({rack_name:N.rack_name,rack_number:N.rack_number.toUpperCase(),warehouse_id:N.warehouse_id||void 0}),await ce(),g(!1)}catch(L){M(L.response?.data?.detail||"Failed to add rack")}finally{T(!1)}},[be,D]=m.useState(!1),[V,ee]=m.useState(null),Y=E=>{ee(E),D(!0)},U=async()=>{if(V)try{await Mi.delete(V.id),window.toast?.success("Rack deleted successfully"),await ce()}catch(E){console.error("Failed to delete rack:",E),window.toast?.error(E.response?.data?.detail||"Failed to delete rack")}finally{D(!1),ee(null)}},se=i.filter(E=>{const L=!f||E.rack_name.toLowerCase().includes(f.toLowerCase())||E.rack_number.toLowerCase().includes(f.toLowerCase()),_=!w||E.warehouse_id===w;return L&&_}),Z={total:i.length,warehouses:new Set(i.map(E=>E.warehouse_id).filter(Boolean)).size},P=[{header:"Rack Name",key:"rack_name",render:E=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600 text-[18px]",children:"view_column"})}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:E.rack_name})]})},{header:"Rack Number",key:"rack_number",render:E=>e.jsx("span",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:E.rack_number})},{header:"Warehouse",key:"warehouse_name",render:E=>e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:E.warehouse_name||"-"})},{header:"Created",key:"created_at",render:E=>e.jsx("span",{className:"text-sm text-slate-500",children:new Date(E.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:E=>e.jsx("div",{className:"flex justify-end gap-1",children:n("racks.delete")&&e.jsx(ie,{variant:"ghost",onClick:()=>Y(E),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})})}],I=se.slice((G-1)*O,G*O);return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Rack Master",subtitle:"Manage racks for physical stock location.",actions:n("racks.create")&&e.jsx(ie,{variant:"primary",onClick:F,className:"bg-purple-600 hover:bg-purple-700 text-white shadow-purple-500/30",icon:"add",children:"Add Rack"})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Racks",value:Z.total,icon:"view_column",isActive:!0}),e.jsx(Ne,{title:"Warehouses",value:Z.warehouses,icon:"warehouse",trend:"neutral"})]}),e.jsx(ye.DataTable,{columns:P,data:I,loading:b,emptyMessage:"No racks found.",pagination:{currentPage:G,totalPages:Math.ceil(se.length/O),onPageChange:q,totalItems:se.length,pageSize:O,onPageSizeChange:E=>{R(E),q(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Rack List",count:se.length,searchProps:{value:f,onChange:E=>{k(E),q(1)},placeholder:"Search racks..."},embedded:!0})}),e.jsx(zt,{isOpen:p,onClose:()=>g(!1),title:"Add New Rack",subtitle:"Create a new rack for warehouse organization",width:"md",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>g(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"rack-form",loading:j,children:j?"Adding...":"Add Rack"})]}),children:e.jsxs("form",{id:"rack-form",onSubmit:ue,className:"space-y-5",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400 text-sm border border-red-200 dark:border-red-800",children:S}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(ge,{label:"Rack Name",value:N.rack_name,onChange:E=>C({...N,rack_name:E.target.value}),placeholder:"e.g., Rack A1",required:!0}),e.jsx(ge,{label:"Rack Number",value:N.rack_number,onChange:E=>C({...N,rack_number:E.target.value.toUpperCase()}),placeholder:"e.g., RA1",required:!0,className:"font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Warehouse"}),e.jsxs("select",{value:N.warehouse_id,onChange:E=>C({...N,warehouse_id:E.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500/20",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),h.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]})]})]})}),e.jsx(Qt,{isOpen:be,onClose:()=>D(!1),onConfirm:U,title:"Delete Rack",message:`Are you sure you want to delete "${V?.rack_name}"? This action cannot be undone.`,confirmText:"Delete Rack"})]})}const D0={name:"",email:"",password:"",phone:"",employment_type:"full_time",salary:0,shop_id:"",date_of_joining:new Date().toISOString().split("T")[0],address:"",emergency_contact:"",gender:"",hra_percent:40,allowances_percent:20,pf_percent:12,esi_percent:.75,esi_applicable:!0};function wN(){const{activeEntity:l}=Mt(),{isLoading:n}=ht(),[c,i]=m.useState([]),[u,h]=m.useState(!0),[x,b]=m.useState(""),[v,p]=m.useState(""),[g,f]=m.useState(1),[k,w]=m.useState(0),[N,C]=m.useState(10),[j,T]=m.useState(!1),[S,M]=m.useState(null),[O,R]=m.useState(D0),[G,q]=m.useState(!1),[ce,F]=m.useState(""),[ue,be]=m.useState(null),[D,V]=m.useState(!1),[ee,Y]=m.useState(null),[U,se]=m.useState(!1),[Z,P]=m.useState(""),{hasPermission:I}=nt();m.useEffect(()=>{E()},[v,g,N,x,Z,l]);const E=async()=>{try{h(!0);const ne={page:g,size:N};x&&(ne.search=x),v&&(ne.department=v),Z&&(ne.status=Z),l?.type==="shop"&&(ne.shop_id=l.id),l?.type==="warehouse"&&(ne.warehouse_id=l.id);const Ee=await Sa.list(ne);i(Ee.data.items||Ee.data.data||Ee.data||[]),w(Ee.data.total||Ee.data.length||0)}catch(ne){console.error(ne),i([])}finally{h(!1)}},L=()=>{M(null),R(D0),F(""),T(!0)},_=async ne=>{try{const de=(await Sa.get(ne.id)).data;M(ne),R({name:de.name||"",email:de.email||"",phone:de.phone||"",employment_type:de.employment_type||"full_time",salary:de.basic_salary||0,shop_id:de.shop_id||"",date_of_joining:de.date_of_joining?.split("T")[0]||"",address:de.address||"",emergency_contact:de.emergency_contact||"",gender:de.gender||"",hra_percent:de.hra_percent||40,allowances_percent:de.allowances_percent||20,pf_percent:de.pf_percent||12,esi_percent:de.esi_percent||.75,esi_applicable:de.esi_applicable!==void 0?de.esi_applicable:!0,password:""}),F(""),T(!0)}catch(Ee){console.error("Failed to fetch employee details:",Ee),alert("Failed to load employee details")}},H=async ne=>{if(ne.preventDefault(),F(""),!O.name||!O.phone){F("Please fill in all required fields (Name, Phone)");return}if(!O.salary||O.salary<=0){F("Please enter a valid salary amount");return}q(!0);try{const Ee={name:O.name,phone:O.phone,employment_type:O.employment_type,date_of_joining:O.date_of_joining,basic_salary:Number(O.salary)||void 0,email:O.email||void 0,password:O.password||void 0,gender:O.gender||void 0,address:O.address||void 0,emergency_contact:O.emergency_contact||void 0,shop_id:l?.type==="shop"?l.id:O.shop_id||void 0,warehouse_id:l?.type==="warehouse"?l.id:void 0,hra_percent:O.hra_percent,allowances_percent:O.allowances_percent,pf_percent:O.pf_percent,esi_percent:O.esi_percent,esi_applicable:O.esi_applicable};if(S)await Sa.update(S.id,Ee),T(!1),E();else{const de=await Sa.create(Ee);de.data?.data?.credentials&&be(de.data.data.credentials),T(!1),E()}}catch(Ee){console.error("Failed to save employee:",Ee);let de="Failed to save employee";if(Ee.response?.data?.detail){const X=Ee.response.data.detail;Array.isArray(X)?de=X.map(ae=>`${ae.loc?.join(".")||"Field"}: ${ae.msg}`).join(", "):typeof X=="string"&&(de=X)}F(de)}finally{q(!1)}},$=async()=>{if(ee){se(!0);try{await Sa.delete(ee.id),V(!1),Y(null),E()}catch(ne){console.error("Failed to delete employee:",ne);let Ee="Failed to delete employee";ne.response?.data?.detail&&(Ee=ne.response.data.detail),alert(Ee)}finally{se(!1)}}},le=ne=>{Y(ne),V(!0)},je=ne=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(ne),he=[{header:"Employee",key:"name",render:ne=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center text-violet-600 dark:text-violet-400 text-sm font-bold",children:ne.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:ne.name}),e.jsx("div",{className:"text-xs text-slate-500",children:ne.phone})]})]})},{header:"Department",key:"department",render:ne=>e.jsx(Ye,{variant:"secondary",className:"capitalize",children:ne.department})},{header:"Designation",key:"designation",className:"hidden sm:table-cell"},{header:"Salary",key:"basic_salary",render:ne=>e.jsx("span",{className:"font-medium font-mono text-slate-700 dark:text-slate-300",children:je(ne.basic_salary||0)}),align:"right"},{header:"Status",key:"status",render:ne=>e.jsx(Ye,{variant:ne.status==="active"?"success":ne.status==="on_leave"?"warning":"error",children:ne.status||"Active"}),align:"center"},{header:"Actions",key:"id",render:ne=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(ie,{variant:"ghost",onClick:()=>_(ne),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-blue-600",title:"Edit Employee",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx(ie,{variant:"ghost",onClick:()=>le(ne),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-red-600",title:"Delete Employee",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(ye,{loading:n,children:[e.jsx(ye.Header,{title:l?`Employees - ${l.type==="shop"?"Pharmacy":"Warehouse"}: ${l.name}`:"Employees",subtitle:l?`Manage ${l.type==="shop"?"pharmacy":"warehouse"} staff, payroll, and assignments`:"Manage staff, payroll, and assignments",actions:(I("employees.manage.warehouse")||I("employees.manage.shop"))&&e.jsxs(ie,{variant:"primary",onClick:L,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Employee"]})}),l&&e.jsx("div",{className:"mb-6 flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400 text-lg",children:l.type==="shop"?"storefront":"warehouse"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:[l.type==="shop"?"Pharmacy":"Warehouse",": ",l.name]})]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"All Employees",value:Z?"-":k,icon:"badge",onClick:()=>{P(""),p("")},isActive:!Z&&!v}),e.jsx(Ne,{title:"Active",value:Z==="active"?k:"-",icon:"check_circle",onClick:()=>P("active"),isActive:Z==="active"}),e.jsx(Ne,{title:"On Leave",value:Z==="on_leave"?k:"-",icon:"event_busy",onClick:()=>P("on_leave"),isActive:Z==="on_leave"}),e.jsx(Ne,{title:"Inactive",value:Z==="inactive"?k:"-",icon:"cancel",onClick:()=>P("inactive"),isActive:Z==="inactive"}),I("employees.view.global")&&e.jsx(Ne,{title:"Terminated",value:Z==="terminated"?k:"-",icon:"delete",onClick:()=>P("terminated"),isActive:Z==="terminated",className:"!bg-red-50 dark:!bg-red-900/10 !border-red-200 dark:!border-red-800"})]}),e.jsx(ye.DataTable,{columns:he,data:c,loading:u,emptyMessage:"No employees found. Add your first employee.",pagination:{currentPage:g,totalPages:Math.ceil(k/N),onPageChange:f,totalItems:k,pageSize:N,onPageSizeChange:ne=>{C(ne),f(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Employee List",count:k,searchProps:{value:x,onChange:ne=>{b(ne),f(1)},placeholder:"Search employees..."},actions:null,embedded:!0})}),e.jsx(zt,{isOpen:j,onClose:()=>T(!1),title:S?"Edit Employee":"Add New Employee",subtitle:S?"Update employee information":"Create a new employee record",width:"lg",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",onClick:()=>T(!1),type:"button",children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"employee-form",disabled:G,loading:G,children:S?"Update Employee":"Add Employee"})]}),children:e.jsxs("form",{id:"employee-form",onSubmit:H,className:"space-y-5",children:[ce&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),ce]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:O.name,onChange:ne=>R({...O,name:ne.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter full name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:O.phone,onChange:ne=>R({...O,phone:ne.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter phone number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:O.email,onChange:ne=>R({...O,email:ne.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter email address"})]}),!S&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:O.password,onChange:ne=>R({...O,password:ne.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter password for user account"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Join Date"}),e.jsx("input",{type:"date",value:O.date_of_joining,onChange:ne=>R({...O,date_of_joining:ne.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Employment Type"}),e.jsx(Pj,{value:O.employment_type,onChange:ne=>R({...O,employment_type:ne}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Gender"}),e.jsx(Rp,{value:O.gender,onChange:ne=>R({...O,gender:ne}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Salary ()"}),e.jsx("input",{type:"number",value:O.salary,onChange:ne=>R({...O,salary:parseFloat(ne.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono"})]}),l?.type!=="warehouse"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Assigned Shop"}),e.jsx(Vd,{value:O.shop_id,onChange:ne=>R({...O,shop_id:ne}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"percent"}),"Salary Component Configuration"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"HRA %"}),e.jsx("input",{type:"number",value:O.hra_percent,onChange:ne=>R({...O,hra_percent:parseFloat(ne.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Allowances %"}),e.jsx("input",{type:"number",value:O.allowances_percent,onChange:ne=>R({...O,allowances_percent:parseFloat(ne.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"PF %"}),e.jsx("input",{type:"number",value:O.pf_percent,onChange:ne=>R({...O,pf_percent:parseFloat(ne.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"ESI %"}),e.jsx("input",{type:"number",value:O.esi_percent,onChange:ne=>R({...O,esi_percent:parseFloat(ne.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100",disabled:!O.esi_applicable})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:O.esi_applicable,onChange:ne=>R({...O,esi_applicable:ne.target.checked}),className:"rounded border-slate-300"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"ESI Applicable (only for salary < 21,000)"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Address"}),e.jsx("textarea",{value:O.address,onChange:ne=>R({...O,address:ne.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",rows:2})]})]})}),D&&ee&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400 text-2xl",children:"warning"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Delete Employee"}),e.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mt-0.5",children:"info"}),e.jsxs("span",{children:["Are you sure you want to delete ",e.jsx("strong",{children:ee.name}),'? The employee status will be set to "terminated".']})]})}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Employee Code:"}),e.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-white",children:ee.employee_code||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Department:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:ee.department})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Phone:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:ee.phone})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx(ie,{variant:"secondary",onClick:()=>{V(!1),Y(null)},disabled:U,children:"Cancel"}),e.jsx(ie,{variant:"primary",onClick:$,disabled:U,loading:U,className:"!bg-red-600 hover:!bg-red-700",children:"Delete Employee"})]})]})}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400 text-2xl",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Employee Created!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"User account credentials generated"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mt-0.5",children:"info"}),e.jsx("span",{children:"Please save these credentials securely and share them with the employee. They won't be shown again."})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:ue.email,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 font-mono text-sm"}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(ue.email),className:"!p-2",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Temporary Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:ue.temporary_password,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 font-mono text-sm font-bold"}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(ue.temporary_password),className:"!p-2",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:e.jsx(ie,{variant:"primary",onClick:()=>be(null),children:"Got It"})})]})})]})}function kN(){const{activeEntity:l}=Mt(),[n,c]=m.useState(new Date().toISOString().split("T")[0]),[i,u]=m.useState({}),[h,x]=m.useState(null),[b,v]=m.useState(!0),[p,g]=m.useState(!1),[f,k]=m.useState({type:"",text:""}),[w,N]=m.useState("");m.useEffect(()=>{C()},[n,l]);const C=async()=>{try{v(!0);const R={};l?.type==="warehouse"&&(R.warehouse_id=l.id),l?.type==="shop"&&(R.shop_id=l.id);const q=(await Sa.getDailyAttendance(n,R)).data;x(q);const ce={};q.attendance.forEach(F=>{const ue=F.check_in?F.check_in.split("T")[1]?.substr(0,5):"09:00",be=F.check_out?F.check_out.split("T")[1]?.substr(0,5):"18:00";ce[F.employee_id]={employee_id:F.employee_id,date:n,status:F.status||"present",check_in:ue,check_out:be}}),u(ce)}catch(R){console.error("Error loading attendance:",R),k({type:"error",text:"Failed to load attendance records"})}finally{v(!1)}},j=(R,G,q)=>{u(ce=>({...ce,[R]:{...ce[R],[G]:q}}))},T=async()=>{g(!0);try{const R=Object.values(i);for(const G of R){const q={employee_id:G.employee_id,date:G.date,status:G.status,check_in:G.check_in?`${G.date}T${G.check_in}:00`:void 0,check_out:G.check_out?`${G.date}T${G.check_out}:00`:void 0};await Sa.markAttendance(q)}k({type:"success",text:"Attendance saved as draft!"}),await C()}catch(R){let G="Failed to save attendance";if(R.response?.data?.detail){const q=R.response.data.detail;Array.isArray(q)?G=q.map(ce=>`${ce.loc?.join(".")||"Unknown field"}: ${ce.msg}`).join(", "):typeof q=="string"&&(G=q)}k({type:"error",text:G})}finally{g(!1)}},S=R=>{const G={not_marked:{icon:"",label:"Not Marked",color:"#f59e0b"},draft:{icon:"",label:"Draft",color:"#3b82f6"},submitted:{icon:"",label:"Submitted",color:"#10b981"},locked:{icon:"",label:"Locked",color:"#ef4444"}},{icon:q,label:ce,color:F}=G[R]||G.not_marked;return e.jsxs("div",{style:{display:"inline-block",padding:"6px 16px",borderRadius:"20px",background:F+"20",color:F,fontWeight:"bold",fontSize:"14px"},children:[q," ",ce]})},M=R=>{switch(R){case"present":return"#10b981";case"absent":return"#ef4444";case"half_day":return"#f59e0b";case"leave":return"#8b5cf6";default:return"#6b7280"}},O={present:Object.values(i).filter(R=>R.status==="present").length,absent:Object.values(i).filter(R=>R.status==="absent").length,half_day:Object.values(i).filter(R=>R.status==="half_day").length,leave:Object.values(i).filter(R=>R.status==="leave").length};return e.jsxs("div",{className:"attendance-marker",children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{children:[e.jsxs("h2",{children:["Attendance Marker",l&&e.jsxs("span",{style:{fontSize:"16px",fontWeight:"normal",color:"#666",marginLeft:"8px"},children:["- ",l.type==="shop"?"Pharmacy":"Warehouse",": ",l.name]})]}),l&&e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#888"},children:[l.type==="shop"?"Pharmacy":"Warehouse"," employee attendance marking"]})]}),e.jsxs("div",{className:"header-controls",children:[e.jsx("input",{type:"date",value:n,onChange:R=>c(R.target.value),className:"date-picker"}),h&&S(h.date_status)]})]}),f.text&&e.jsx("div",{className:`message ${f.type}`,children:f.text}),e.jsx("div",{className:"controls-card",children:e.jsxs("div",{className:"stats-row",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#10b981"},children:O.present}),e.jsx("div",{className:"stat-label",children:"Present"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#ef4444"},children:O.absent}),e.jsx("div",{className:"stat-label",children:"Absent"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#f59e0b"},children:O.half_day}),e.jsx("div",{className:"stat-label",children:"Half Day"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#8b5cf6"},children:O.leave}),e.jsx("div",{className:"stat-label",children:"Leave"})]})]})}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(Pd,{value:w,onChange:N,placeholder:"Search employees by name or code..."})}),b?e.jsx("div",{className:"loading",children:"Loading employees..."}):e.jsxs("div",{className:"attendance-table",children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"})]})}),e.jsx("tbody",{children:h?.attendance.filter(R=>{if(!w)return!0;const G=w.toLowerCase();return R.employee_name.toLowerCase().includes(G)||R.employee_code.toLowerCase().includes(G)||R.department.toLowerCase().includes(G)}).map(R=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"employee-info",children:[e.jsx("div",{className:"employee-avatar",children:R.employee_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"employee-name",children:R.employee_name}),e.jsx("div",{className:"employee-code",children:R.employee_code})]})]})}),e.jsx("td",{children:R.employee_role}),e.jsx("td",{children:R.department}),e.jsx("td",{children:e.jsxs("select",{className:"status-select",value:i[R.employee_id]?.status||"present",onChange:G=>j(R.employee_id,"status",G.target.value),disabled:!1,style:{borderColor:M(i[R.employee_id]?.status||"present")},children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"half_day",children:"Half Day"}),e.jsx("option",{value:"leave",children:"Leave"})]})}),e.jsx("td",{children:e.jsx("input",{type:"time",className:"time-input",value:i[R.employee_id]?.check_in||"09:00",onChange:G=>j(R.employee_id,"check_in",G.target.value),disabled:i[R.employee_id]?.status==="absent"||i[R.employee_id]?.status==="leave"})}),e.jsx("td",{children:e.jsx("input",{type:"time",className:"time-input",value:i[R.employee_id]?.check_out||"18:00",onChange:G=>j(R.employee_id,"check_out",G.target.value),disabled:i[R.employee_id]?.status==="absent"||i[R.employee_id]?.status==="leave"})})]},R.employee_id))})]}),e.jsx("div",{className:"table-footer",children:e.jsx("button",{className:"btn-submit",onClick:T,disabled:p,children:p?"Saving...":"Save Attendance"})})]})]})}function SN(){const{activeEntity:l}=Mt(),[n,c]=m.useState(new Date().toISOString().split("T")[0]),[i,u]=m.useState([]),[h,x]=m.useState(!0),[b,v]=m.useState("");m.useEffect(()=>{p()},[n,l]);const p=async()=>{try{x(!0);const f={date:n};l?.type==="warehouse"&&(f.warehouse_id=l.id),l?.type==="shop"&&(f.shop_id=l.id);const w=(await Sa.getDailyAttendance(n,f)).data.attendance.filter(N=>N.is_marked);u(w)}catch(f){console.error("Error loading attendance:",f)}finally{x(!1)}},g={present:i.filter(f=>f.status==="present").length,absent:i.filter(f=>f.status==="absent").length,half_day:i.filter(f=>f.status==="half_day").length,leave:i.filter(f=>f.status==="leave").length};return e.jsxs("div",{className:"attendance-marker",style:{padding:"24px"},children:[e.jsxs("div",{className:"header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#1a1a2e"},children:["Attendance Report",l&&e.jsxs("span",{style:{fontSize:"16px",fontWeight:"normal",color:"#666",marginLeft:"8px"},children:["- ",l.type==="shop"?"Pharmacy":"Warehouse",": ",l.name]})]}),l&&e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#888"},children:[l.type==="shop"?"Pharmacy":"Warehouse"," employee attendance records"]})]}),e.jsx("input",{type:"date",value:n,onChange:f=>c(f.target.value),className:"date-picker",style:{padding:"10px 16px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"summary-cards",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"#d4edda",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#155724"},children:g.present}),e.jsx("div",{style:{color:"#155724",marginTop:"8px"},children:"Present"})]}),e.jsxs("div",{style:{background:"#f8d7da",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#721c24"},children:g.absent}),e.jsx("div",{style:{color:"#721c24",marginTop:"8px"},children:"Absent"})]}),e.jsxs("div",{style:{background:"#fff3cd",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#856404"},children:g.half_day}),e.jsx("div",{style:{color:"#856404",marginTop:"8px"},children:"Half Day"})]}),e.jsxs("div",{style:{background:"#e2e3e5",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#383d41"},children:g.leave}),e.jsx("div",{style:{color:"#383d41",marginTop:"8px"},children:"Leave"})]})]}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(Pd,{value:b,onChange:v,placeholder:"Search by name, code, or department..."})}),h?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsx("div",{className:"attendance-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"}),e.jsx("th",{children:"Working Hours"})]})}),e.jsx("tbody",{children:i.filter(f=>{if(!b)return!0;const k=b.toLowerCase();return f.employee_name.toLowerCase().includes(k)||f.employee_code.toLowerCase().includes(k)||f.department.toLowerCase().includes(k)}).length>0?i.filter(f=>{if(!b)return!0;const k=b.toLowerCase();return f.employee_name.toLowerCase().includes(k)||f.employee_code.toLowerCase().includes(k)||f.department.toLowerCase().includes(k)}).map(f=>e.jsxs("tr",{children:[e.jsx("td",{children:f.employee_name}),e.jsx("td",{children:f.employee_code}),e.jsx("td",{children:f.employee_role}),e.jsx("td",{children:f.department}),e.jsx("td",{children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",background:f.status==="present"?"#d4edda":f.status==="absent"?"#f8d7da":f.status==="half_day"?"#fff3cd":"#e2e3e5",color:f.status==="present"?"#155724":f.status==="absent"?"#721c24":f.status==="half_day"?"#856404":"#383d41"},children:f.status?.replace("_"," ").toUpperCase()})}),e.jsx("td",{children:f.check_in?new Date(f.check_in).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{children:f.check_out?new Date(f.check_out).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{children:f.working_hours?f.working_hours.toFixed(1)+"h":"-"})]},f.employee_id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:8,style:{textAlign:"center",padding:"40px",color:"#888"},children:["No attendance records found for ",n]})})})]})})]})}const Jr={HRA_PERCENTAGE:.4,ALLOWANCE_PERCENTAGE:.2,PF_PERCENTAGE:.12,ESI_PERCENTAGE:.0075,ESI_LIMIT:21e3};function _N(){const[l,n]=m.useState([]),[c,i]=m.useState([]),[u,h]=m.useState(new Date().getMonth()+1),[x,b]=m.useState(new Date().getFullYear()),[v,p]=m.useState(!0),[g,f]=m.useState(!1),[k,w]=m.useState(null),[N,C]=m.useState(!1),[j,T]=m.useState(!1),[S,M]=m.useState(""),[O,R]=m.useState("all"),[G,q]=m.useState(1),[ce,F]=m.useState(new Set),[ue,be]=m.useState(10);m.useEffect(()=>{D()},[]),m.useEffect(()=>{l.length>0&&V()},[u,x,l]);const D=async()=>{try{const ae=await Sa.list({size:500}),ve=ae.data.items||ae.data||[];n(ve.filter(ke=>ke.status==="active"))}catch(ae){console.error("Error loading employees:",ae),Xe.error("Failed to load employees")}finally{p(!1)}},V=async()=>{try{const ae=await Sa.getSalaryRecords({month:u,year:x});i(ae.data||[])}catch(ae){console.error("Error loading salary records:",ae),i([])}},ee=(ae,ve)=>{const ke=ve?.basic_salary||ae.basic_salary||0,Ct=ve?.hra||ke*Jr.HRA_PERCENTAGE,qs=ve?.allowances||ke*Jr.ALLOWANCE_PERCENTAGE,Ha=ke+Ct+qs,ma=ve?.pf_deduction||ke*Jr.PF_PERCENTAGE,za=ve?.esi_deduction||(ke<Jr.ESI_LIMIT?ke*Jr.ESI_PERCENTAGE:0),Ea=ve?.tax_deduction||0,st=ma+za+Ea,jt=Ha-st;return{employee:ae,record:ve||null,basic:ke,hra:Ct,allowances:qs,grossEarnings:Ha,pf:ma,esi:za,tax:Ea,totalDeductions:st,netSalary:jt}},Y=()=>{const ae=new Map(c.map(ve=>[ve.employee_id,ve]));return l.map(ve=>ee(ve,ae.get(ve.id)))},U=()=>{if(ce.size===0){Xe.error("Please select at least one employee to process salary");return}T(!0)},se=async()=>{T(!1),f(!0);try{await Sa.processSalary({month:u,year:x,employee_ids:Array.from(ce)}),Xe.success(`Salary processed for ${ce.size} employee(s)`),F(new Set),V()}catch(ae){Xe.error(ae.response?.data?.detail||"Failed to process salary")}finally{f(!1)}},Z=ae=>{F(ve=>{const ke=new Set(ve);return ke.has(ae)?ke.delete(ae):ke.add(ae),ke})},P=()=>{ce.size===$.length?F(new Set):F(new Set($.map(ae=>ae.employee.id)))},I=ae=>{w(ae),C(!0)},E=ae=>new Date(2e3,ae-1).toLocaleString("default",{month:"long"}),L=ae=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(ae),_=ae=>new Date(ae).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),H=Y(),$=H.filter(ae=>{const ve=ae.employee.name.toLowerCase().includes(S.toLowerCase())||ae.employee.employee_code.toLowerCase().includes(S.toLowerCase()),ke=O==="all"||O==="paid"&&ae.record?.is_paid||O==="pending"&&!ae.record?.is_paid;return ve&&ke}),le=$.reduce((ae,ve)=>ae+ve.grossEarnings,0),je=$.reduce((ae,ve)=>ae+ve.totalDeductions,0),he=$.reduce((ae,ve)=>ae+ve.netSalary,0),ne=$.filter(ae=>ae.record?.is_paid).length,Ee=$.filter(ae=>!ae.record?.is_paid).length,de=$.slice((G-1)*ue,G*ue),X=[{header:e.jsx("input",{type:"checkbox",checked:ce.size>0&&ce.size===$.length,onChange:P,className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),key:"select",width:"50px",render:ae=>e.jsx("input",{type:"checkbox",checked:ce.has(ae.employee.id),onChange:()=>Z(ae.employee.id),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"})},{header:"Employee",key:"employee",render:ae=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm",children:ae.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:ae.employee.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[ae.employee.employee_code,"  ",ae.employee.designation]})]})]})},{header:"Basic",key:"basic",align:"right",render:ae=>e.jsx("span",{className:"font-mono text-sm text-slate-900 dark:text-white",children:L(ae.basic)})},{header:"HRA",key:"hra",align:"right",render:ae=>e.jsx("span",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-400",children:L(ae.hra)})},{header:"Allowances",key:"allowances",align:"right",render:ae=>e.jsx("span",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-400",children:L(ae.allowances)})},{header:"Gross",key:"grossEarnings",align:"right",render:ae=>e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900 dark:text-white",children:L(ae.grossEarnings)})},{header:"Deductions",key:"totalDeductions",align:"right",render:ae=>e.jsxs("span",{className:"font-mono text-sm text-red-600 dark:text-red-400",children:["-",L(ae.totalDeductions)]})},{header:"Net Salary",key:"netSalary",align:"right",render:ae=>e.jsx("span",{className:"font-mono text-base font-bold text-blue-600 dark:text-blue-400",children:L(ae.netSalary)})},{header:"Status",key:"status",align:"center",render:ae=>ae.record?.is_paid?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Paid"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Pending"]})},{header:"Actions",key:"actions",align:"center",render:ae=>e.jsx(ie,{variant:"ghost",onClick:()=>I(ae),className:"!p-1.5 h-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"description"})})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"Salary Management",subtitle:"Process and manage employee salaries",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[ce.size>0&&e.jsxs("span",{className:"px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg",children:[ce.size," selected"]}),e.jsx(ie,{variant:"primary",onClick:U,loading:g,disabled:v||ce.size===0,icon:g?"hourglass_empty":"calculate",className:"bg-gradient-to-r from-blue-600 to-indigo-600",children:g?"Processing...":`Process Salary${ce.size>0?` (${ce.size})`:""}`})]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Employees",value:$.length,icon:"group",isActive:!0}),e.jsx(Ne,{title:"Gross Payroll",value:L(le),icon:"trending_up",trend:"up",valueClassName:"text-emerald-600 dark:text-emerald-400"}),e.jsx(Ne,{title:"Total Deductions",value:L(je),icon:"trending_down",trend:"down",valueClassName:"text-red-600 dark:text-red-400"}),e.jsx(Ne,{title:"Net Payable",value:L(he),icon:"payments",isActive:!0,valueClassName:"text-blue-600 dark:text-blue-400"})]}),e.jsx(ye.DataTable,{columns:X,data:de,loading:v,emptyMessage:"No employees found",pagination:{currentPage:G,totalPages:Math.ceil($.length/ue),onPageChange:q,totalItems:$.length,pageSize:ue,onPageSizeChange:ae=>{be(ae),q(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Salary List",count:$.length,searchProps:{value:S,onChange:ae=>{M(ae),q(1)},placeholder:"Search employees..."},actions:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-xl",children:"calendar_month"}),e.jsx("select",{value:u,onChange:ae=>h(Number(ae.target.value)),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:Array.from({length:12},(ae,ve)=>e.jsx("option",{value:ve+1,children:E(ve+1)},ve+1))}),e.jsx("select",{value:x,onChange:ae=>b(Number(ae.target.value)),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:Array.from({length:5},(ae,ve)=>{const ke=new Date().getFullYear()-ve;return e.jsx("option",{value:ke,children:ke},ke)})})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>R("all"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${O==="all"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["All (",H.length,")"]}),e.jsxs("button",{onClick:()=>R("paid"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${O==="paid"?"bg-white dark:bg-slate-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["Paid (",ne,")"]}),e.jsxs("button",{onClick:()=>R("pending"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${O==="pending"?"bg-white dark:bg-slate-600 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["Pending (",Ee,")"]})]})]}),embedded:!0})}),N&&k&&e.jsx(tn,{isOpen:N,onClose:()=>C(!1),title:"Salary Slip",maxWidth:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center pb-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-1",children:"Salary Slip"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[E(u)," ",x]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Employee Name"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:k.employee.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Employee Code"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:k.employee.employee_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Designation"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:k.employee.designation})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Department"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:k.employee.department})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-emerald-600 dark:text-emerald-400",children:"add_circle"}),"Earnings"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Basic Salary"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:L(k.basic)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"HRA (40%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:L(k.hra)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Allowances (20%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:L(k.allowances)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Gross Earnings"}),e.jsx("span",{className:"font-mono font-bold text-emerald-600 dark:text-emerald-400",children:L(k.grossEarnings)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400",children:"remove_circle"}),"Deductions"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"PF (12%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:L(k.pf)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"ESI (0.75%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:L(k.esi)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tax"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:L(k.tax)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Total Deductions"}),e.jsx("span",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:L(k.totalDeductions)})]})]})]})]}),e.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Net Salary"}),e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:L(k.netSalary)})]})}),k.record&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"info"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Payment Status:"})]}),k.record.is_paid?e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Paid"]}),k.record.paid_at&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["on ",_(k.record.paid_at)]})]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Pending"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"print"}),"Print Slip"]}),e.jsx("button",{onClick:()=>C(!1),className:"px-6 py-2.5 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 font-medium rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Close"})]})]})}),e.jsx(tn,{isOpen:j,onClose:()=>T(!1),title:"Confirm Salary Processing",maxWidth:"sm",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg",children:[e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Attention Needed"}),e.jsx("p",{className:"text-sm opacity-90",children:"This action will generate salary records."})]})]}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-300 mb-6 text-center",children:["Are you sure you want to process salary for ",e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:ce.size})," selected employee(s) for ",e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[E(u)," ",x]}),"?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ie,{variant:"secondary",onClick:()=>T(!1),className:"flex-1",children:"Cancel"}),e.jsx(ie,{variant:"primary",onClick:se,loading:g,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600",children:"Confirm Process"})]})]})})]})}function Ci(){const{activeEntity:l,scope:n}=Mt(),[c,i]=m.useState("daily"),[u,h]=m.useState([]),[x,b]=m.useState(""),[v,p]=m.useState(new Date().toISOString().split("T")[0]),[g,f]=m.useState(new Date().getMonth()+1),[k,w]=m.useState(new Date().getFullYear()),[N,C]=m.useState(""),[j,T]=m.useState(""),[S,M]=m.useState(null),[O,R]=m.useState([]),[G,q]=m.useState(!1);m.useEffect(()=>{l?.type==="shop"&&b(l.id)},[l]),m.useEffect(()=>{n==="global"&&ce()},[n]),m.useEffect(()=>{F()},[c,x,v,g,k,l]);const ce=async()=>{try{const D=await _t.list({size:500});h(D.data.items||D.data)}catch(D){console.error("Error loading shops:",D)}},F=async()=>{q(!0);try{const D=l?.type==="shop"?l.id:x||void 0;let V;c==="daily"?V=await Us.getDailySales({shop_id:D,date:v}):c==="monthly"?V=await Us.getMonthlySales({shop_id:D,month:g,year:k}):V=await Us.getSales({shop_id:D,date_from:N,date_to:j}),M(V.data),V.data.daily_breakdown&&R(V.data.daily_breakdown)}catch(D){console.error("Error loading report:",D)}finally{q(!1)}},ue=D=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(D),be=()=>{const D=["Metric","Value"],V=[["Total Sales",ue(S?.total_sales||0)],["Total Invoices",S?.total_invoices||0],["Items Sold",S?.total_items_sold||0],["Average Order Value",ue(S?.average_order_value||0)]],ee=[D,...V].map(Z=>Z.join(",")).join(`
`),Y=new Blob([ee],{type:"text/csv"}),U=URL.createObjectURL(Y),se=document.createElement("a");se.href=U,se.download=`sales-report-${new Date().toISOString().split("T")[0]}.csv`,se.click()};return e.jsxs("div",{className:"sales-reports",children:[e.jsx("style",{children:`
                .sales-reports {
                    padding: 24px;
                    max-width: 1400px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .btn-export {
                    padding: 10px 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .btn-export:hover {
                    background: #059669;
                }
                .filters-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 20px;
                    margin-bottom: 24px;
                }
                .filters-row {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    align-items: flex-end;
                }
                .filter-group {
                    display: flex;
                    flex-direction: column;
                    gap: 6px;
                }
                .filter-group label {
                    font-size: 13px;
                    font-weight: 500;
                    color: #666;
                }
                .filter-group select,
                .filter-group input {
                    padding: 10px 12px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                    min-width: 160px;
                }
                .report-tabs {
                    display: flex;
                    gap: 8px;
                }
                .tab-btn {
                    padding: 10px 20px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.2s;
                }
                .tab-btn.active {
                    background: #4a6cf7;
                    color: white;
                    border-color: #4a6cf7;
                }
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 20px;
                    margin-bottom: 24px;
                }
                @media (max-width: 1024px) {
                    .stats-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }
                @media (max-width: 640px) {
                    .stats-grid {
                        grid-template-columns: 1fr;
                    }
                }
                .stat-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .stat-card.primary {
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    color: white;
                }
                .stat-icon {
                    width: 48px;
                    height: 48px;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    margin-bottom: 16px;
                }
                .stat-card:not(.primary) .stat-icon {
                    background: #f0f4ff;
                }
                .stat-card.primary .stat-icon {
                    background: rgba(255,255,255,0.2);
                }
                .stat-value {
                    font-size: 28px;
                    font-weight: 700;
                    margin-bottom: 4px;
                }
                .stat-label {
                    font-size: 14px;
                    opacity: 0.8;
                }
                .chart-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .chart-title {
                    font-size: 18px;
                    font-weight: 600;
                    margin: 0 0 20px 0;
                    color: #1a1a2e;
                }
                .chart-bars {
                    display: flex;
                    gap: 8px;
                    align-items: flex-end;
                    height: 200px;
                    padding-top: 20px;
                }
                .chart-bar-wrapper {
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 8px;
                }
                .chart-bar {
                    width: 100%;
                    max-width: 40px;
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    border-radius: 4px 4px 0 0;
                    min-height: 4px;
                    transition: height 0.3s ease;
                }
                .chart-label {
                    font-size: 11px;
                    color: #666;
                    text-align: center;
                }
                .loading-overlay {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsx("div",{children:e.jsxs("h1",{children:["Sales Reports",l?.type==="shop"&&e.jsxs("span",{style:{fontSize:"18px",fontWeight:"normal",color:"#666",marginLeft:"8px"},children:["- ",l.name]})]})}),e.jsx("button",{className:"btn-export",onClick:be,children:"Export CSV"})]}),l?.type==="shop"&&e.jsx("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",borderRadius:"8px",background:"#e0f2fe",border:"1px solid #bae6fd"},children:[e.jsx("span",{style:{fontSize:"20px"},children:""}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#0369a1"},children:["Pharmacy: ",l.name]})]})}),e.jsx("div",{className:"filters-card",children:e.jsxs("div",{className:"filters-row",children:[e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-btn ${c==="daily"?"active":""}`,onClick:()=>i("daily"),children:"Daily"}),e.jsx("button",{className:`tab-btn ${c==="monthly"?"active":""}`,onClick:()=>i("monthly"),children:"Monthly"}),e.jsx("button",{className:`tab-btn ${c==="custom"?"active":""}`,onClick:()=>i("custom"),children:"Custom Range"})]}),n==="global"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Shop"}),e.jsxs("select",{value:x,onChange:D=>b(D.target.value),children:[e.jsx("option",{value:"",children:"All Shops"}),u.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),l?.type==="shop"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Shop"}),e.jsx("div",{style:{padding:"10px 12px",border:"1px solid #ddd",borderRadius:"8px",background:"#f5f5f5",color:"#666",fontSize:"14px",fontWeight:"500"},children:l.name})]}),c==="daily"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:v,onChange:D=>p(D.target.value)})]}),c==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Month"}),e.jsx("select",{value:g,onChange:D=>f(Number(D.target.value)),children:Array.from({length:12},(D,V)=>e.jsx("option",{value:V+1,children:new Date(2e3,V).toLocaleString("default",{month:"long"})},V+1))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Year"}),e.jsx("select",{value:k,onChange:D=>w(Number(D.target.value)),children:Array.from({length:5},(D,V)=>e.jsx("option",{value:new Date().getFullYear()-V,children:new Date().getFullYear()-V},V))})]})]}),c==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From"}),e.jsx("input",{type:"date",value:N,onChange:D=>C(D.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To"}),e.jsx("input",{type:"date",value:j,onChange:D=>T(D.target.value)})]})]})]})}),G?e.jsx("div",{className:"loading-overlay",children:"Loading report data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:ue(S?.total_sales||0)}),e.jsx("div",{className:"stat-label",children:"Total Sales"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:S?.total_invoices||0}),e.jsx("div",{className:"stat-label",children:"Invoices"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:S?.total_items_sold||0}),e.jsx("div",{className:"stat-label",children:"Items Sold"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:ue(S?.average_order_value||0)}),e.jsx("div",{className:"stat-label",children:"Avg Order Value"})]})]}),O.length>0&&e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{className:"chart-title",children:"Daily Breakdown"}),e.jsx("div",{className:"chart-bars",children:O.slice(0,14).map((D,V)=>{const ee=Math.max(...O.map(U=>U.sales)),Y=ee>0?D.sales/ee*180:4;return e.jsxs("div",{className:"chart-bar-wrapper",children:[e.jsx("div",{className:"chart-bar",style:{height:`${Y}px`},title:`${ue(D.sales)}`}),e.jsx("span",{className:"chart-label",children:new Date(D.date).getDate()})]},V)})})]})]})]})}function CN(){const{activeEntity:l}=Mt(),[n,c]=m.useState("summary"),[i,u]=m.useState(new Date().getMonth()+1),[h,x]=m.useState(new Date().getFullYear()),[b,v]=m.useState(null),[p,g]=m.useState(null),[f,k]=m.useState(!0);m.useEffect(()=>{w()},[n,i,h,l]);const w=async()=>{k(!0);try{const T={month:i,year:h};if(l?.type==="shop"&&(T.shop_id=l.id),n==="summary"){const S=await K.get("/tax/summary",{params:T});v(S.data)}else if(n==="gst"){const S=await K.get("/tax/gst",{params:T});g(S.data)}}catch(T){console.error("Error loading tax report:",T)}finally{k(!1)}},N=T=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(T),C=T=>new Date(2e3,T-1).toLocaleString("default",{month:"long"}),j=()=>{let T=[],S="";n==="summary"&&b?(T=[["Tax Summary Report",`${C(i)} ${h}`],[""],["Metric","Amount"],["Total Sales",N(b.total_sales)],["Net Taxable Value",N(b.net_taxable_value)],["Total Tax Collected",N(b.total_tax_collected)],["GST Amount",N(b.gst_amount)],["VAT Amount",N(b.vat_amount)]],S=`tax-summary-${h}-${i}.csv`):n==="gst"&&p&&(T=[["GST Report",p.period],[""],["Component","Amount"],["Taxable Value",N(p.total_taxable_value)],["CGST",N(p.cgst_amount)],["SGST",N(p.sgst_amount)],["IGST",N(p.igst_amount)],["Total GST",N(p.total_gst)],["Invoice Count",p.invoice_count.toString()]],S=`gst-report-${h}-${i}.csv`);const M=T.map(q=>q.join(",")).join(`
`),O=new Blob([M],{type:"text/csv"}),R=URL.createObjectURL(O),G=document.createElement("a");G.href=R,G.download=S,G.click()};return e.jsxs("div",{className:"tax-reports",children:[e.jsx("style",{children:`
                .tax-reports {
                    padding: 24px;
                    max-width: 1200px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .btn-export {
                    padding: 10px 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .btn-export:hover {
                    background: #059669;
                }
                .controls-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 20px;
                    margin-bottom: 24px;
                }
                .controls-row {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    align-items: center;
                }
                .report-tabs {
                    display: flex;
                    gap: 8px;
                }
                .tab-btn {
                    padding: 10px 20px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.2s;
                }
                .tab-btn.active {
                    background: #4a6cf7;
                    color: white;
                    border-color: #4a6cf7;
                }
                .period-selector {
                    display: flex;
                    gap: 8px;
                    margin-left: auto;
                }
                .period-selector select {
                    padding: 10px 16px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                }
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin-bottom: 24px;
                }
                .stat-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .stat-card.primary {
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    color: white;
                }
                .stat-card.success {
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: white;
                }
                .stat-card.warning {
                    background: linear-gradient(135deg, #f59e0b, #d97706);
                    color: white;
                }
                .stat-icon {
                    font-size: 28px;
                    margin-bottom: 12px;
                }
                .stat-value {
                    font-size: 24px;
                    font-weight: 700;
                    margin-bottom: 4px;
                }
                .stat-label {
                    font-size: 13px;
                    opacity: 0.8;
                }
                .gst-breakdown {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .breakdown-title {
                    font-size: 18px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0 0 20px 0;
                    padding-bottom: 12px;
                    border-bottom: 1px solid #eee;
                }
                .breakdown-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 24px;
                }
                @media (max-width: 768px) {
                    .breakdown-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }
                .breakdown-item {
                    text-align: center;
                    padding: 20px;
                    background: #f8f9ff;
                    border-radius: 12px;
                }
                .breakdown-value {
                    font-size: 24px;
                    font-weight: 700;
                    color: #4a6cf7;
                    margin-bottom: 8px;
                }
                .breakdown-label {
                    font-size: 14px;
                    color: #666;
                    font-weight: 500;
                }
                .info-card {
                    background: #f0f8ff;
                    border: 1px solid #bfdbfe;
                    border-radius: 12px;
                    padding: 16px 20px;
                    margin-top: 24px;
                    display: flex;
                    gap: 12px;
                    align-items: flex-start;
                }
                .info-card-icon {
                    font-size: 20px;
                }
                .info-card-content h4 {
                    margin: 0 0 4px 0;
                    color: #1e40af;
                }
                .info-card-content p {
                    margin: 0;
                    color: #3b82f6;
                    font-size: 14px;
                }
                .loading {
                    text-align: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsx("div",{children:e.jsxs("h1",{children:["Tax Reports",l?.type==="shop"&&e.jsxs("span",{style:{fontSize:"18px",fontWeight:"normal",color:"#666",marginLeft:"8px"},children:["- ",l.name]})]})}),e.jsx("button",{className:"btn-export",onClick:j,children:"Export for CA Filing"})]}),l?.type==="shop"&&e.jsx("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",borderRadius:"8px",background:"#e0f2fe",border:"1px solid #bae6fd"},children:[e.jsx("span",{style:{fontSize:"20px"},children:""}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#0369a1"},children:["Pharmacy: ",l.name]})]})}),e.jsx("div",{className:"controls-card",children:e.jsxs("div",{className:"controls-row",children:[e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-btn ${n==="summary"?"active":""}`,onClick:()=>c("summary"),children:"Summary"}),e.jsx("button",{className:`tab-btn ${n==="gst"?"active":""}`,onClick:()=>c("gst"),children:"GST Report"}),e.jsx("button",{className:`tab-btn ${n==="vat"?"active":""}`,onClick:()=>c("vat"),children:"VAT Report"})]}),e.jsxs("div",{className:"period-selector",children:[e.jsx("select",{value:i,onChange:T=>u(Number(T.target.value)),children:Array.from({length:12},(T,S)=>e.jsx("option",{value:S+1,children:C(S+1)},S+1))}),e.jsx("select",{value:h,onChange:T=>x(Number(T.target.value)),children:Array.from({length:5},(T,S)=>e.jsx("option",{value:new Date().getFullYear()-S,children:new Date().getFullYear()-S},S))})]})]})}),f?e.jsx("div",{className:"loading",children:"Loading tax data..."}):n==="summary"&&b?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:N(b.total_sales)}),e.jsx("div",{className:"stat-label",children:"Total Sales"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:N(b.net_taxable_value)}),e.jsx("div",{className:"stat-label",children:"Taxable Value"})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:N(b.total_tax_collected)}),e.jsx("div",{className:"stat-label",children:"Total Tax Collected"})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:N(b.gst_amount)}),e.jsx("div",{className:"stat-label",children:"GST Liability"})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("span",{className:"info-card-icon",children:""}),e.jsxs("div",{className:"info-card-content",children:[e.jsx("h4",{children:"Tax Filing Reminder"}),e.jsx("p",{children:"GST returns (GSTR-1, GSTR-3B) must be filed by the 11th and 20th of each month respectively."})]})]})]}):n==="gst"&&p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:N(p.total_taxable_value)}),e.jsx("div",{className:"stat-label",children:"Taxable Value"})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:N(p.total_gst)}),e.jsx("div",{className:"stat-label",children:"Total GST"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:p.invoice_count}),e.jsx("div",{className:"stat-label",children:"Invoices"})]})]}),e.jsxs("div",{className:"gst-breakdown",children:[e.jsx("h3",{className:"breakdown-title",children:"GST Component Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:N(p.cgst_amount)}),e.jsx("div",{className:"breakdown-label",children:"CGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:N(p.sgst_amount)}),e.jsx("div",{className:"breakdown-label",children:"SGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:N(p.igst_amount)}),e.jsx("div",{className:"breakdown-label",children:"IGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",style:{color:"#10b981"},children:N(p.total_gst)}),e.jsx("div",{className:"breakdown-label",children:"Total Payable"})]})]})]})]}):e.jsx("div",{className:"loading",children:"Select a report type to view data"})]})}function EN(){const{activeEntity:l}=Mt(),[n,c]=m.useState("current-month"),[i,u]=m.useState("all"),[h,x]=m.useState(!0),[b,v]=m.useState([]),[p,g]=m.useState({totalExpiring:0,totalExpired:0,totalLoss:0});m.useEffect(()=>{f()},[n,i,l]);const f=async()=>{try{x(!0);const w={days_ahead:60};l?.type==="warehouse"&&(w.warehouse_id=l.id),l?.type==="shop"&&(w.shop_id=l.id);const C=(await Us.getExpiry(w)).data;v(C.items||[]),g({totalExpiring:C.total_expiring_items||0,totalExpired:C.total_expired_items||0,totalLoss:C.total_loss_value||0})}catch(w){console.error("Failed to fetch expiry data:",w),v([]),g({totalExpiring:0,totalExpired:0,totalLoss:0})}finally{x(!1)}},k=[{label:"Total Expired Items",value:p.totalExpired.toString(),icon:"inventory_2",color:"red"},{label:"Total Expiring Soon",value:p.totalExpiring.toString(),icon:"schedule",color:"amber"},{label:"Estimated Loss",value:`${p.totalLoss.toLocaleString()}`,icon:"trending_down",color:"red"}];return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:["Expiry & Loss Report",l&&e.jsxs("span",{className:"text-lg font-normal text-slate-500 dark:text-slate-400 ml-2",children:["- ",l.type==="shop"?"Pharmacy":"Warehouse",": ",l.name]})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:l?`Expiry data for ${l.type==="shop"?"pharmacy":"warehouse"} inventory`:"Real-time expiry data from database"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-semibold text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"refresh"}),"Refresh"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-primary text-white text-sm font-semibold hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"download"}),"Export Report"]})]})]}),l&&e.jsx("div",{className:"mb-6 flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400 text-lg",children:l.type==="shop"?"storefront":"warehouse"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:[l.type==="shop"?"Pharmacy":"Warehouse",": ",l.name]})]})}),e.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 p-4 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Period"}),e.jsxs("select",{value:n,onChange:w=>c(w.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm px-3 py-2 focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"current-month",children:"Current Month"}),e.jsx("option",{value:"last-month",children:"Last Month"}),e.jsx("option",{value:"current-quarter",children:"Current Quarter"})]})]}),!l&&e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Location"}),e.jsx("select",{value:i,onChange:w=>u(w.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm px-3 py-2 focus:ring-1 focus:ring-primary",children:e.jsx("option",{value:"all",children:"All Locations"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:k.map((w,N)=>e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:w.label}),e.jsx("span",{className:`material-symbols-outlined text-${w.color}-500`,children:w.icon})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-2",children:w.value})]},N))}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Expiry Details"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:["Expired: ",b.filter(w=>w.status==="expired").length]}),e.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:["Expiring Soon: ",b.filter(w=>w.status==="expiring").length]})]})]}),h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):b.length===0?e.jsxs("div",{className:"py-16 text-center text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl mb-3 text-green-500",children:"check_circle"}),e.jsx("p",{className:"text-lg font-medium",children:"No expiring items"}),e.jsx("p",{className:"text-sm",children:"All medicines are within safe expiry dates"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-xs uppercase text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Medicine"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Batch No."}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Unit Cost"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Total Loss"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:b.map((w,N)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:w.name}),w.brand&&e.jsx("div",{className:"text-xs text-slate-500",children:w.brand})]}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400 font-mono text-xs",children:w.batch_number}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:w.expiry_date}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-900 dark:text-white font-medium",children:w.quantity}),e.jsxs("td",{className:"px-6 py-4 text-right text-slate-600 dark:text-slate-400",children:["",w.unit_cost?.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-red-600 dark:text-red-400",children:["",w.total_loss?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-center",children:w.status==="expired"?e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Expired"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:"Expiring"})})]},N))})]})}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-slate-500",children:["Showing ",b.length," items from database"]})})]})]})}function R0(){const[l,n]=m.useState(!0),[c,i]=m.useState(!1),[u,h]=m.useState("en-US"),[x,b]=m.useState("UTC-05:00"),[v,p]=m.useState("MM/DD/YYYY"),[g,f]=m.useState(30),[k,w]=m.useState(7.25),[N,C]=m.useState(!1),[j,T]=m.useState(!0),[S,M]=m.useState(!1),[O,R]=m.useState("helpdesk@pharmacore.io"),[G,q]=m.useState("https://wiki.internal.pharma/support");m.useEffect(()=>{ce()},[]);const ce=async()=>{try{n(!0);const be=(await Li.get()).data?.settings;be&&(f(be.session_timeout_minutes||30),w(be.default_tax_rate||7.25),C(be.maintenance_mode||!1),T(be.global_inventory_search??!0),M(be.auto_approve_low_risk||!1),R(be.support_email||"helpdesk@pharmacore.io"),q(be.support_url||""))}catch(ue){console.error("Failed to fetch settings:",ue)}finally{n(!1)}},F=async()=>{try{i(!0),await Li.update({session_timeout_minutes:g,default_tax_rate:k,maintenance_mode:N,global_inventory_search:j,auto_approve_low_risk:S,support_email:O,support_url:G}),alert("Settings saved successfully!")}catch(ue){console.error("Failed to save settings:",ue),alert("Failed to save settings")}finally{i(!1)}};return l?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"max-w-5xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight mb-2",children:"Application Settings"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-2xl",children:"Configure global parameters, localization preferences, and system-wide defaults for your pharmacy network."})]}),e.jsxs("button",{onClick:F,disabled:c,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white px-5 py-2.5 rounded-lg font-semibold shadow-lg shadow-primary/20 transition-all active:scale-95 shrink-0 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:c?"sync":"save"}),c?"Saving...":"Save Changes"]})]}),e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-800 mb-8 overflow-x-auto",children:e.jsxs("nav",{className:"flex gap-8 min-w-max",children:[e.jsx("button",{className:"pb-3 border-b-2 border-primary text-primary font-semibold text-sm px-1 transition-colors",children:"General"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Localization"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Security"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Notifications"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"language"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Regional Settings"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Default System Language"}),e.jsxs("select",{value:u,onChange:ue=>h(ue.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"en-US",children:"English (United States)"}),e.jsx("option",{value:"es",children:"Spanish (Espaol)"}),e.jsx("option",{value:"fr",children:"French (Franais)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Timezone"}),e.jsxs("select",{value:x,onChange:ue=>b(ue.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"UTC-05:00",children:"UTC-05:00 (EST)"}),e.jsx("option",{value:"UTC-08:00",children:"UTC-08:00 (PST)"}),e.jsx("option",{value:"UTC+00:00",children:"UTC+00:00 (GMT)"}),e.jsx("option",{value:"UTC+05:30",children:"UTC+05:30 (IST)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Date Format"}),e.jsxs("select",{value:v,onChange:ue=>p(ue.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Currency Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 font-semibold",children:""}),e.jsx("input",{type:"text",value:"INR",readOnly:!0,className:"w-full pl-8 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded",children:"Locked"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Currency is locked to the organization's primary billing region."})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-purple-50 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"tune"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Operational Defaults"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",value:g,onChange:ue=>f(parseInt(ue.target.value)),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Auto-logout inactive users for security compliance."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Default Tax Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",value:k,onChange:ue=>w(parseFloat(ue.target.value)),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Pharmacy ID Prefix"}),e.jsx("input",{type:"text",defaultValue:"PHARM-",className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white uppercase"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Fiscal Year Start"}),e.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{children:"January 1st"}),e.jsx("option",{selected:!0,children:"April 1st"}),e.jsx("option",{children:"October 1st"})]})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-amber-50 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"flag"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Feature Flags"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(vd,{id:"maintenance_mode",title:"Maintenance Mode",description:"Disables access for all non-admin users immediately.",checked:N,onChange:C}),e.jsx(vd,{id:"global_search",title:"Global Inventory Search",description:"Allow pharmacists to search stock across all connected locations.",checked:j,onChange:T}),e.jsx(vd,{id:"auto_approve",title:"Auto-Approve Low Risk Orders",description:"System automatically approves refills for Class C drugs.",checked:S,onChange:M})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-green-50 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"support_agent"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Support Configuration"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Support Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"mail"}),e.jsx("input",{type:"email",value:O,onChange:ue=>R(ue.target.value),className:"w-full pl-10 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Internal Help Desk URL"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"link"}),e.jsx("input",{type:"url",value:G,onChange:ue=>q(ue.target.value),className:"w-full pl-10 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800/50 rounded-lg p-4 flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400 shrink-0",children:"info"}),e.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"These contact details will be displayed in the footer of all employee dashboards and on the login screen."})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-slate-200 dark:border-slate-800 text-center",children:e.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500",children:"System Version v2.4.0  Connected to Neon PostgreSQL"})})]})}function vd({title:l,description:n,checked:c,onChange:i}){return e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 dark:border-slate-800 pt-4 first:border-t-0 first:pt-0",children:[e.jsxs("div",{className:"pr-4",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900 dark:text-white",children:l}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:n})]}),e.jsx("button",{type:"button",role:"switch","aria-checked":c,onClick:()=>i(!c),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${c?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c?"translate-x-6":"translate-x-1"}`})})]})}function jd(){const[l,n]=m.useState(!0),[c,i]=m.useState(!1),[u,h]=m.useState("PharmaAdmin Central"),[x,b]=m.useState(!1),[v,p]=m.useState(!0),[g,f]=m.useState("high"),[k,w]=m.useState(30),[N,C]=m.useState(15),[j,T]=m.useState(60);m.useEffect(()=>{S()},[]);const S=async()=>{try{n(!0);const R=(await Li.get()).data?.settings;R&&(h(R.app_name||"PharmaAdmin Central"),b(R.maintenance_mode||!1),w(R.session_timeout_minutes||30),C(R.low_stock_threshold||15),T(R.expiry_warning_days||60))}catch(O){console.error("Failed to fetch settings:",O)}finally{n(!1)}},M=async()=>{try{i(!0),await Li.update({app_name:u,maintenance_mode:x,session_timeout_minutes:k,low_stock_threshold:N,expiry_warning_days:j}),alert("Settings saved successfully!")}catch(O){console.error("Failed to save settings:",O),alert("Failed to save settings")}finally{i(!1)}};return l?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-1 overflow-y-auto bg-background-light dark:bg-background-dark scroll-smooth",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6 md:p-10 pb-24",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 dark:text-white tracking-tight mb-2",children:"System Settings"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base max-w-2xl",children:"Configure global parameters, security protocols, and integration rules for the entire Pharmacy Management Platform."})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg text-sm font-bold text-slate-900 dark:text-white transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"history"}),"View Change Logs"]})]}),e.jsx("div",{className:"sticky top-0 z-10 bg-background-light dark:bg-background-dark pt-2 pb-4 mb-6",children:e.jsxs("div",{className:"flex overflow-x-auto border-b border-slate-300 dark:border-slate-700 gap-8",children:[e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-primary text-primary font-bold text-sm",children:"General Preferences"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Security Policies"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Inventory Rules"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Integrations & API"})]})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"tune"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"General Preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Platform Name"}),e.jsx("input",{type:"text",value:u,onChange:O=>h(O.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-500",children:"This name will appear in emails and dashboard headers."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Default Timezone"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{children:"(GMT+05:30) India Standard Time"}),e.jsx("option",{children:"(GMT-05:00) Eastern Time (US & Canada)"}),e.jsx("option",{children:"(GMT+00:00) London"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Date Format"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{children:"DD/MM/YYYY (e.g. 31/12/2024)"}),e.jsx("option",{children:"MM/DD/YYYY (e.g. 12/31/2024)"}),e.jsx("option",{children:"YYYY-MM-DD (e.g. 2024-12-31)"})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 pt-2 border-t border-slate-200 dark:border-slate-800 mt-2",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Maintenance Mode"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Prevent non-admin users from accessing the system during updates."})]}),e.jsx("button",{onClick:()=>b(!x),className:`relative w-11 h-6 rounded-full transition-colors ${x?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white transition-transform ${x?"translate-x-5":""}`})})]})})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"shield"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Security Policies"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex flex-col max-w-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Two-Factor Authentication (2FA)"}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"RECOMMENDED"})]}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:"Enforce 2FA for all administrator and manager level accounts across the network."})]}),e.jsx("button",{onClick:()=>p(!v),className:`relative w-11 h-6 rounded-full transition-colors ${v?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white transition-transform ${v?"translate-x-5":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Password Complexity"}),e.jsxs("select",{value:g,onChange:O=>f(O.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"high",children:"High (Min 12 chars, symbol, number, upper/lowercase)"}),e.jsx("option",{value:"medium",children:"Medium (Min 8 chars, number, upper/lowercase)"}),e.jsx("option",{value:"low",children:"Low (Min 6 chars)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",value:k,onChange:O=>w(parseInt(O.target.value)),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary"})]})]})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"inventory_2"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Inventory Rules"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("label",{className:"flex items-center justify-between text-sm font-bold text-slate-900 dark:text-white mb-4",children:["Low Stock Threshold Alert",e.jsx("span",{className:"material-symbols-outlined text-slate-500 text-[18px] cursor-help",title:"Triggers an alert when stock falls below this percentage of max capacity",children:"info"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"50",value:N,onChange:O=>C(parseInt(O.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-primary"}),e.jsxs("span",{className:"min-w-[3rem] text-center font-mono font-bold text-primary bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded",children:[N,"%"]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:["Trigger automated re-order suggestions when stock reaches ",N,"% of maximum capacity."]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("label",{className:"flex items-center justify-between text-sm font-bold text-slate-900 dark:text-white mb-4",children:"Drug Expiry Warning Window"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",value:j,onChange:O=>T(parseInt(O.target.value)),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2 text-sm focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Days before expiry"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:['Items will be flagged as "Near Expiry" on dashboards ',j," days before their expiration date."]})]})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 w-full bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 p-4 md:px-10 flex items-center justify-between z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"text-sm text-slate-500 hidden md:block",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"Database:"})," Connected to Neon PostgreSQL"]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-end",children:[e.jsx("button",{className:"px-6 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-200 font-bold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Discard"}),e.jsxs("button",{onClick:M,disabled:c,className:"px-6 py-2.5 rounded-lg bg-primary hover:bg-blue-700 text-white font-bold text-sm shadow-md transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:c?"sync":"save"}),c?"Saving...":"Save Changes"]})]})]})]})}function AN(){const[l,n]=m.useState([]),[c,i]=m.useState(!0),[u,h]=m.useState({total:0,creates:0,updates:0,deletes:0}),[x,b]=m.useState(""),[v,p]=m.useState(""),[g,f]=m.useState("");m.useEffect(()=>{k()},[x,v]);const k=async()=>{i(!0);try{const[j,T]=await Promise.all([w0.list({size:100,action:x||void 0,entity_type:v||void 0}),w0.getStats()]);n(j.data.items?.map(S=>({...S,timestamp:S.created_at,details:S.new_values||""}))||[]),h(T.data)}catch(j){console.error("Failed to load audit logs:",j)}finally{i(!1)}},w=j=>{switch(j?.toUpperCase()){case"CREATE":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"UPDATE":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"DELETE":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"LOGIN":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"LOGOUT":return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400"}},N=j=>{switch(j?.toLowerCase()){case"warehouse":return"warehouse";case"shop":return"storefront";case"medicine":return"medication";case"user":return"person";case"invoice":return"receipt";case"dispatch":return"local_shipping";case"batch":return"inventory";case"rack":return"view_column";default:return"description"}},C=l.filter(j=>!g||j.entity_name?.toLowerCase().includes(g.toLowerCase())||j.user_name?.toLowerCase().includes(g.toLowerCase()));return e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Audit Logs"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Complete audit trail of all system activities. Track who did what and when."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600",children:"history"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.total}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Logs"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-green-200 dark:border-green-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"add_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.creates}),e.jsx("p",{className:"text-xs text-slate-500",children:"Creates"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"edit"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.updates}),e.jsx("p",{className:"text-xs text-slate-500",children:"Updates"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"delete"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.deletes}),e.jsx("p",{className:"text-xs text-slate-500",children:"Deletes"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:g,onChange:j=>f(j.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})}),e.jsxs("select",{value:x,onChange:j=>b(j.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"CREATE",children:"Create"}),e.jsx("option",{value:"UPDATE",children:"Update"}),e.jsx("option",{value:"DELETE",children:"Delete"})]}),e.jsxs("select",{value:v,onChange:j=>p(j.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Entities"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"shop",children:"Shop"}),e.jsx("option",{value:"medicine",children:"Medicine"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"invoice",children:"Invoice"}),e.jsx("option",{value:"dispatch",children:"Dispatch"}),e.jsx("option",{value:"rack",children:"Rack"})]}),e.jsx("button",{onClick:k,className:"p-2.5 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Refresh",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:c?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):C.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"history"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No logs found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Adjust your filters to see more results"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Action"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Entity"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"IP"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:C.map((j,T)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${T*20}ms`},children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm text-slate-900 dark:text-white",children:new Date(j.timestamp||j.created_at).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(j.timestamp||j.created_at).toLocaleTimeString()})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:j.user_name||"System"}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:j.user_role?.replace("_"," ")||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${w(j.action)}`,children:j.action})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-slate-400",children:N(j.entity_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:j.entity_name||j.entity_id||"-"}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:j.entity_type})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-xs text-slate-500",children:j.ip_address||"-"})})]},j.id))})]})})})]})}function TN(){const[l,n]=m.useState([]),[c,i]=m.useState(!0),[u,h]=m.useState({total:0,successful:0,failed:0}),[x,b]=m.useState(""),[v,p]=m.useState(""),[g,f]=m.useState("");m.useEffect(()=>{k()},[x]);const k=async()=>{i(!0);try{const[C,j]=await Promise.all([k0.list({size:100,status:x||void 0}),k0.getStats()]);n(C.data.items||[]),h(j.data)}catch(C){console.error("Failed to load login activity:",C)}finally{i(!1)}},w=l.filter(C=>{const j=!g||C.user_name?.toLowerCase().includes(g.toLowerCase())||C.user_email?.toLowerCase().includes(g.toLowerCase()),T=!v||C.user_role===v;return j&&T}),N=l.filter(C=>C.action==="login_success"&&new Date(C.created_at).toDateString()===new Date().toDateString()).length;return e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Login Activity"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Monitor user login activity and identify security issues."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"login"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.total}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Logins"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-green-200 dark:border-green-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.successful}),e.jsx("p",{className:"text-xs text-slate-500",children:"Successful"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.failed}),e.jsx("p",{className:"text-xs text-slate-500",children:"Failed"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-purple-200 dark:border-purple-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"person"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:N}),e.jsx("p",{className:"text-xs text-slate-500",children:"Active Today"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:g,onChange:C=>f(C.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})}),e.jsxs("select",{value:x,onChange:C=>b(C.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Successful"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:v,onChange:C=>p(C.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"warehouse_admin",children:"Warehouse Admin"}),e.jsx("option",{value:"shop_owner",children:"Shop Owner"}),e.jsx("option",{value:"pharmacist",children:"Pharmacist"})]}),e.jsx("button",{onClick:k,className:"p-2.5 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Refresh",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:c?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):w.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"login"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No login records found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Adjust your filters to see more results"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Login Time"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"IP Address"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:w.map((C,j)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${j*20}ms`},children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:C.user_name||"Unknown"}),e.jsx("p",{className:"text-xs text-slate-500",children:C.user_email})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded-full capitalize",children:C.user_role?.replace("_"," ")||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-900 dark:text-white",children:new Date(C.created_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-slate-600 dark:text-slate-400",children:C.ip_address||"-"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${C.action==="login_success"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:C.action==="login_success"?"Success":"Failed"})})]},C.id))})]})})]})}function DN(){const{activeEntity:l}=Mt(),[n,c]=m.useState([]),[i,u]=m.useState(!0),[h,x]=m.useState("all"),[b,v]=m.useState("");m.useEffect(()=>{p()},[h,b]);const p=async()=>{u(!0);try{const S={size:50};h==="unread"&&(S.is_read=!1),h==="read"&&(S.is_read=!0),b&&(S.notification_type=b);const M=await Si.list(S);c(M.data?.items||M.data||[])}catch(S){console.error("Error loading notifications:",S)}finally{u(!1)}},g=async S=>{try{await Si.markRead(S),c(M=>M.map(O=>O.id===S?{...O,is_read:!0}:O))}catch(M){console.error("Error marking notification as read:",M)}},f=async()=>{try{await Si.markAllRead(),c(S=>S.map(M=>({...M,is_read:!0})))}catch(S){console.error("Error marking all as read:",S)}},k=async S=>{try{await Si.delete(S),c(M=>M.filter(O=>O.id!==S))}catch(M){console.error("Error deleting notification:",M)}},w=S=>{const M={low_stock:"",expiry_alert:"",order_received:"",dispatch_update:"",payment_received:"",system:"",default:""};return M[S]||M.default},N=S=>{const M={high:"#ef4444",medium:"#f59e0b",low:"#10b981"};return M[S]||M.medium},C=S=>{const M=new Date(S),R=new Date().getTime()-M.getTime();return R<6e4?"Just now":R<36e5?`${Math.floor(R/6e4)}m ago`:R<864e5?`${Math.floor(R/36e5)}h ago`:R<6048e5?`${Math.floor(R/864e5)}d ago`:M.toLocaleDateString()},j=S=>S.reference_type==="warehouse"?"Warehouse":S.shop_id?"Pharmacy":null,T=Array.isArray(n)?n.filter(S=>!S.is_read).length:0;return e.jsxs("div",{className:"notifications-page",children:[e.jsx("style",{children:`
                .notifications-page {
                    padding: 24px;
                    max-width: 900px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-title {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                }
                .page-title h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .unread-badge {
                    background: #ef4444;
                    color: white;
                    padding: 4px 12px;
                    border-radius: 20px;
                    font-size: 13px;
                    font-weight: 600;
                }
                .btn-mark-all {
                    padding: 10px 20px;
                    background: #4a6cf7;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                }
                .btn-mark-all:hover {
                    background: #3b5ce4;
                }
                .btn-mark-all:disabled {
                    opacity: 0.5;
                    cursor: not-allowed;
                }
                .filters {
                    display: flex;
                    gap: 16px;
                    margin-bottom: 24px;
                }
                .filter-tabs {
                    display: flex;
                    background: #f0f4ff;
                    border-radius: 8px;
                    padding: 4px;
                }
                .filter-tab {
                    padding: 8px 16px;
                    border: none;
                    background: transparent;
                    border-radius: 6px;
                    cursor: pointer;
                    font-weight: 500;
                    color: #666;
                    transition: all 0.2s;
                }
                .filter-tab.active {
                    background: white;
                    color: #4a6cf7;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                }
                .type-filter {
                    padding: 8px 12px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                }
                .notifications-list {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                }
                .notification-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 16px;
                    display: flex;
                    gap: 16px;
                    transition: all 0.2s;
                    cursor: pointer;
                }
                .notification-card:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
                }
                .notification-card.unread {
                    border-left: 4px solid #4a6cf7;
                    background: #f8faff;
                }
                .notification-icon {
                    width: 48px;
                    height: 48px;
                    border-radius: 12px;
                    background: #f0f4ff;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    flex-shrink: 0;
                }
                .notification-content {
                    flex: 1;
                    min-width: 0;
                }
                .notification-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 4px;
                }
                .notification-title {
                    font-weight: 600;
                    color: #1a1a2e;
                    font-size: 15px;
                }
                .notification-time {
                    font-size: 12px;
                    color: #999;
                    white-space: nowrap;
                }
                .notification-message {
                    color: #666;
                    font-size: 14px;
                    line-height: 1.5;
                }
                .notification-meta {
                    display: flex;
                    gap: 12px;
                    margin-top: 8px;
                    align-items: center;
                }
                .priority-badge {
                    padding: 2px 8px;
                    border-radius: 4px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    color: white;
                }
                .type-badge {
                    padding: 2px 8px;
                    background: #e0e7ff;
                    color: #4a6cf7;
                    border-radius: 4px;
                    font-size: 11px;
                    font-weight: 500;
                }
                .notification-actions {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
                .action-btn {
                    padding: 6px 12px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 12px;
                    transition: all 0.2s;
                }
                .action-btn:hover {
                    background: #f5f5f5;
                }
                .action-btn.delete:hover {
                    background: #fee2e2;
                    border-color: #ef4444;
                    color: #ef4444;
                }
                .empty-state {
                    text-align: center;
                    padding: 60px 20px;
                    color: #999;
                }
                .empty-state-icon {
                    font-size: 64px;
                    margin-bottom: 16px;
                }
                .loading {
                    text-align: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"page-title",children:[e.jsxs("h1",{children:[" Notifications",l&&e.jsxs("span",{style:{fontSize:"16px",fontWeight:"normal",color:"#666",marginLeft:"8px"},children:["- ",l.type==="shop"?"Pharmacy":"Warehouse",": ",l.name]})]}),T>0&&e.jsxs("span",{className:"unread-badge",children:[T," unread"]})]}),e.jsx("button",{className:"btn-mark-all",onClick:f,disabled:T===0,children:"Mark all as read"})]}),e.jsxs("div",{className:"filters",children:[e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:`filter-tab ${h==="all"?"active":""}`,onClick:()=>x("all"),children:"All"}),e.jsx("button",{className:`filter-tab ${h==="unread"?"active":""}`,onClick:()=>x("unread"),children:"Unread"}),e.jsx("button",{className:`filter-tab ${h==="read"?"active":""}`,onClick:()=>x("read"),children:"Read"})]}),e.jsxs("select",{className:"type-filter",value:b,onChange:S=>v(S.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"expiry_alert",children:"Expiry Alert"}),e.jsx("option",{value:"order_received",children:"Orders"}),e.jsx("option",{value:"dispatch_update",children:"Dispatch"}),e.jsx("option",{value:"payment_received",children:"Payments"}),e.jsx("option",{value:"system",children:"System"})]})]}),i?e.jsx("div",{className:"loading",children:"Loading notifications..."}):!Array.isArray(n)||n.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:""}),e.jsx("h3",{children:"No notifications"}),e.jsx("p",{children:"You're all caught up!"})]}):e.jsx("div",{className:"notifications-list",children:n.map(S=>e.jsxs("div",{className:`notification-card ${S.is_read?"":"unread"}`,onClick:()=>!S.is_read&&g(S.id),children:[e.jsx("div",{className:"notification-icon",children:w(S.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsxs("div",{className:"notification-header",children:[e.jsx("span",{className:"notification-title",children:S.title}),e.jsx("span",{className:"notification-time",children:C(S.created_at)})]}),e.jsx("p",{className:"notification-message",children:S.message}),e.jsxs("div",{className:"notification-meta",children:[e.jsx("span",{className:"priority-badge",style:{backgroundColor:N(S.priority)},children:S.priority}),e.jsx("span",{className:"type-badge",children:S.type.replace(/_/g," ")}),j(S)&&e.jsx("span",{className:"type-badge",style:{background:"#e0f2fe",color:"#0369a1"},children:j(S)})]})]}),e.jsxs("div",{className:"notification-actions",onClick:M=>M.stopPropagation(),children:[!S.is_read&&e.jsx("button",{className:"action-btn",onClick:()=>g(S.id),children:" Read"}),e.jsx("button",{className:"action-btn delete",onClick:()=>k(S.id),children:""})]})]},S.id))})]})}function RN(){const{hasPermission:l}=nt(),[n,c]=m.useState([]),[i,u]=m.useState(!0),[h,x]=m.useState(""),[b,v]=m.useState(!1),[p,g]=m.useState(null),[f,k]=m.useState(!1),[w,N]=m.useState("active"),[C,j]=m.useState("all"),[T,S]=m.useState(1),[M,O]=m.useState(0),[R,G]=m.useState(10),[q,ce]=m.useState({total:0,active:0,inactive:0,admins:0,by_role:{}}),[F,ue]=m.useState({email:"",full_name:"",phone:"",role:"",role_id:"",password:"",assigned_warehouse_id:"",assigned_shop_id:""}),[be,D]=m.useState([]),[V,ee]=m.useState([]),[Y,U]=m.useState([]);m.useEffect(()=>{P(),Z()},[w,C,T,R]),m.useEffect(()=>{se()},[]);const se=async()=>{try{const X=await Il.getStats();ce(X.data)}catch(X){console.error("Failed to fetch user stats:",X)}},Z=async()=>{try{const[X,ae,ve]=await Promise.all([Dt.list({size:500}),_t.list({size:500}),Wr.listAssignable()]);D(X.data?.items||X.data||[]),ee(ae.data?.items||ae.data||[]);const ke=ve.data?.roles||ve.data?.items||(Array.isArray(ve.data)?ve.data:[]);U(ke.filter(Ct=>Ct.name!=="super_admin"))}catch(X){console.error("Failed to fetch entities:",X),U([])}},P=async()=>{try{u(!0);const X={search:h,page:T,size:R};w!=="all"&&(X.is_active=w==="active"),C!=="all"&&(X.role=C);const ae=await Il.list(X);c(ae.data?.items||ae.data?.data||ae.data||[]),O(ae.data?.total||(ae.data?.items||ae.data?.data||ae.data||[]).length)}catch(X){console.error("Failed to fetch users:",X)}finally{u(!1)}},I=()=>{g(null),ue({email:"",full_name:"",phone:"",role:"",role_id:"",password:"",assigned_warehouse_id:"",assigned_shop_id:""}),v(!0)},E=X=>{g(X);const ae=Y.find(ve=>ve.name===X.role);ue({email:X.email||"",full_name:X.full_name||"",phone:X.phone||"",role:X.role,role_id:ae?.id||"",password:"",assigned_warehouse_id:X.assigned_warehouse_id||"",assigned_shop_id:X.assigned_shop_id||""}),v(!0)},L=async X=>{X.preventDefault();try{console.log("Submitting user data:",F),p?(await Il.update(p.id,F),window.toast?.success("User updated successfully")):(await Il.create(F),window.toast?.success("User created successfully")),v(!1),P(),se()}catch(ae){console.error("Failed to save user:",ae),console.error("Error response:",ae.response?.data),console.error("Error status:",ae.response?.status);const ve=ae.response?.data?.detail?Array.isArray(ae.response.data.detail)?ae.response.data.detail.map(ke=>`${ke.loc.join(".")}: ${ke.msg}`).join(", "):ae.response.data.detail:ae.message||"Failed to save user";window.toast?.error(ve)}},[_,H]=m.useState(!1),[$,le]=m.useState(null),je=X=>{le(X),H(!0)},he=async()=>{if($)try{await Il.delete($.id),window.toast?.success("User deleted successfully"),P(),se()}catch(X){console.error("Failed to delete user:",X);const ae=X.response?.data?.detail||"Failed to delete user";window.toast?.error(ae)}finally{H(!1),le(null)}},ne=X=>{switch(X){case"super_admin":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300";case"admin":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";case"manager":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}},Ee=(X,ae="all")=>{N(X),j(ae),S(1)},de=[{header:"User",key:"full_name",render:X=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white text-sm font-medium shadow-sm",children:X.full_name?.charAt(0)||X.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:X.full_name||"N/A"}),e.jsx("div",{className:"text-xs text-slate-500",children:X.email})]})]})},{header:"Role",key:"role",render:X=>e.jsx("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-[11px] font-medium uppercase tracking-wide ${ne(X.role)}`,children:X.role.replace("_"," ")})},{header:"Location",key:"assigned_shop_id",render:X=>{if(X.role==="super_admin")return e.jsx("span",{className:"text-slate-400 italic",children:"Global Access"});if(X.assigned_shop_id){const ae=V.find(ve=>ve.id===X.assigned_shop_id);return e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-blue-500",children:"store"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",title:ae?.name,children:ae?.name||"Unknown Shop"})]})}if(X.assigned_warehouse_id){const ae=be.find(ve=>ve.id===X.assigned_warehouse_id);return e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-amber-500",children:"warehouse"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",title:ae?.name,children:ae?.name||"Unknown Warehouse"})]})}return e.jsx("span",{className:"text-slate-400",children:"-"})}},{header:"Status",key:"is_active",render:X=>e.jsx(Ye,{variant:X.is_active?"success":"error",children:X.is_active?"Active":"Inactive"}),align:"center"},{header:"Last Login",key:"last_login",render:X=>e.jsx("span",{className:"text-slate-500",children:X.last_login?new Date(X.last_login).toLocaleDateString():"Never"})},{header:"Actions",key:"id",align:"right",render:X=>e.jsxs("div",{className:"flex justify-end gap-1",children:[l("users.edit")&&e.jsx(ie,{variant:"secondary",onClick:()=>E(X),className:"!p-1.5 h-8 w-8 justify-center",title:"Edit User",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),l("users.delete")&&e.jsx(ie,{variant:"secondary",onClick:()=>je(X),className:"!p-1.5 h-8 w-8 justify-center text-red-600 hover:bg-red-50 hover:text-red-700",title:"Delete User",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(ye,{children:[e.jsx(ye.Header,{title:"User Management",subtitle:`Manage ${q.total} users across your organization`,actions:l("users.create")&&e.jsxs(ie,{variant:"primary",onClick:I,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"person_add"}),"Add User"]})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Users",value:q.total,icon:"groups",onClick:()=>Ee("all"),isActive:w==="all"&&C==="all"}),e.jsx(Ne,{title:"Active Users",value:q.active,icon:"check_circle",onClick:()=>Ee("active"),isActive:w==="active",change:q.total>0?(q.active/q.total*100).toFixed(0)+"%":"0%",changeType:"up"}),e.jsx(Ne,{title:"Warehouse Admins",value:q.by_role?.warehouse_admin||0,icon:"warehouse",onClick:()=>Ee("all","warehouse_admin"),isActive:C==="warehouse_admin"}),e.jsx(Ne,{title:"Shop Owners",value:q.by_role?.shop_owner||0,icon:"store",onClick:()=>Ee("all","shop_owner"),isActive:C==="shop_owner"}),e.jsx(Ne,{title:"Pharmacists",value:q.by_role?.pharmacist||0,icon:"medication",onClick:()=>Ee("all","pharmacist"),isActive:C==="pharmacist"}),e.jsx(Ne,{title:"Cashiers",value:q.by_role?.cashier||0,icon:"point_of_sale",onClick:()=>Ee("all","cashier"),isActive:C==="cashier"}),e.jsx(Ne,{title:"Pharmacy Employees",value:q.by_role?.pharmacy_employee||0,icon:"local_pharmacy",onClick:()=>Ee("all","pharmacy_employee"),isActive:C==="pharmacy_employee"}),e.jsx(Ne,{title:"Warehouse Employees",value:q.by_role?.warehouse_employee||0,icon:"inventory_2",onClick:()=>Ee("all","warehouse_employee"),isActive:C==="warehouse_employee"})]}),e.jsx(ye.DataTable,{columns:de,data:n,loading:i,emptyMessage:"No users found matching your criteria.",pagination:{currentPage:T,totalPages:Math.ceil(M/R),onPageChange:S,totalItems:M,pageSize:R,onPageSizeChange:X=>{G(X),S(1)}},headerSlot:e.jsx(ye.ListControls,{title:"User List",count:M||n.length,searchProps:{value:h,onChange:X=>{x(X),S(1),P()}},onFilterClick:P,embedded:!0})}),e.jsx(zt,{isOpen:b,onClose:()=>v(!1),title:p?"Edit User":"Add User",subtitle:p?"Update user information and permissions":"Create a new user account",width:"md",footer:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>v(!1),className:"flex-1",children:"Cancel"}),e.jsx(ie,{variant:"primary",type:"submit",form:"user-form",className:"flex-1",children:p?"Update":"Create"})]}),children:e.jsxs("form",{id:"user-form",onSubmit:L,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:F.full_name,onChange:X=>ue({...F,full_name:X.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter full name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:F.email,onChange:X=>ue({...F,email:X.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:F.phone,onChange:X=>ue({...F,phone:X.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:F.role,onChange:X=>{const ae=X.target.value,ve=Y.find(ke=>ke.name===ae);ue({...F,role:ae,role_id:ve?.id||"",assigned_warehouse_id:"",assigned_shop_id:""})},className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500/20",required:!0,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.25em 1.25em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",children:"Select Role"}),Y.map(X=>e.jsx("option",{value:X.name,children:X.name.replace(/_/g," ").replace(/\b\w/g,ae=>ae.toUpperCase())},X.id))]})]}),Y.find(X=>X.name===F.role)?.entity_type==="warehouse"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Assign to Warehouse ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:F.assigned_warehouse_id,onChange:X=>ue({...F,assigned_warehouse_id:X.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500/20",required:!0,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.25em 1.25em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",children:"Select Warehouse"}),be.map(X=>e.jsx("option",{value:X.id,children:X.name},X.id))]})]}),Y.find(X=>X.name===F.role)?.entity_type==="shop"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Assign to Medical Shop ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:F.assigned_shop_id,onChange:X=>ue({...F,assigned_shop_id:X.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500/20",required:!0,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.25em 1.25em",paddingRight:"2.5rem"},children:[e.jsx("option",{value:"",children:"Select Shop"}),V.map(X=>e.jsx("option",{value:X.id,children:X.name},X.id))]})]}),!p&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"(min. 8 characters)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",value:F.password,onChange:X=>ue({...F,password:X.target.value}),className:"w-full px-4 pr-10 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter password",required:!p,minLength:8}),e.jsx("button",{type:"button",onClick:()=>k(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:f?"Hide password":"Show password",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:f?"visibility_off":"visibility"})})]})]})]})}),_&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"warning"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Delete User?"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Are you sure you want to delete ",e.jsx("strong",{children:$.full_name}),"? This action cannot be undone."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>H(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:he,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl hover:bg-red-700 font-medium transition-colors shadow-lg shadow-red-500/20",children:"Delete User"})]})]})})]})}function MN(){const{hasPermission:l}=nt(),{user:n}=mt(),c=l(S0.ROLES_VIEW),i=l(S0.ROLES_MANAGE),[u,h]=m.useState([]),[x,b]=m.useState([]),[v,p]=m.useState([]),[g,f]=m.useState(!0),[k,w]=m.useState(!1),[N,C]=m.useState(null),[j,T]=m.useState({name:"",description:"",entity_type:"",permission_ids:[]}),[S,M]=m.useState(!1),[O,R]=m.useState("");m.useEffect(()=>{c&&n?G():c||f(!1)},[c,n]);const G=async()=>{f(!0);try{const[I,E,L]=await Promise.all([Wr.list(),pj.list(),Il.list({size:500})]);let _=I.data.items||[];!l("users.view")&&l("users.view.warehouse")&&(_=_.filter(H=>H.name!=="super_admin"&&H.entity_type!=="shop")),h(_),b(E.data.items||[]),p(L.data.items||[])}catch(I){console.error("Failed to load data:",I)}finally{f(!1)}},q=()=>{C(null),T({name:"",description:"",entity_type:null,permission_ids:[]}),R(""),w(!0)},ce=I=>{C(I),T({name:I.name,description:I.description||"",entity_type:I.entity_type,permission_ids:I.permissions.map(E=>E.id)}),R(""),w(!0)},F=async I=>{if(I.preventDefault(),!j.name.trim()){R("Role name is required");return}M(!0),R("");try{N?await Wr.update(N.id,j):await Wr.create(j),w(!1),G()}catch(E){R(E.response?.data?.detail||"Failed to save role")}finally{M(!1)}},[ue,be]=m.useState(!1),[D,V]=m.useState(null),ee=I=>{V(I),be(!0)},Y=async()=>{if(D)try{await Wr.delete(D.id),window.toast?.success("Role deleted successfully"),G()}catch(I){console.error("Failed to delete role:",I),window.toast?.error(I.response?.data?.detail||"Failed to delete role")}finally{be(!1),V(null)}},U=I=>{T(E=>({...E,permission_ids:E.permission_ids.includes(I)?E.permission_ids.filter(L=>L!==I):[...E.permission_ids,I]}))},se=I=>v.filter(E=>E.role===I),Z=x.reduce((I,E)=>(I[E.module]||(I[E.module]=[]),I[E.module].push(E),I),{}),P=I=>{switch(I){case"global":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"warehouse":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"shop":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}};return c?e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Roles & Permissions"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Manage user roles and their permissions. System roles cannot be modified."})]}),i&&e.jsxs("button",{onClick:q,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-medium shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"add"}),"Create Role"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"admin_panel_settings"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"shield"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.filter(I=>I.is_system).length}),e.jsx("p",{className:"text-xs text-slate-500",children:"System Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"tune"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.filter(I=>!I.is_system).length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Custom Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"key"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:x.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Permissions"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:g?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-600"})}):u.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"admin_panel_settings"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No roles found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create your first role to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:u.map((I,E)=>{const L=se(I.name);return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4 border border-slate-200 dark:border-slate-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors animate-fadeIn",style:{animationDelay:`${E*50}ms`},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${I.is_system?"bg-blue-100 dark:bg-blue-900/30":"bg-purple-100 dark:bg-purple-900/30"}`,children:e.jsx("span",{className:`material-symbols-outlined ${I.is_system?"text-blue-600":"text-purple-600"}`,children:I.is_system?"shield":"badge"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:I.name.replace(/_/g," ")}),e.jsxs("div",{className:"flex gap-1 mt-0.5",children:[I.is_system&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",children:"System"}),I.entity_type&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded capitalize ${P(I.entity_type)}`,children:I.entity_type}),!I.entity_type&&!I.is_system&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",children:"Custom"})]})]})]}),!I.is_system&&i&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>ce(I),className:"p-1.5 text-slate-400 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{onClick:()=>ee(I),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-3 line-clamp-2",children:I.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"key"}),e.jsxs("span",{children:[I.permissions?.length||0," permissions"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"group"}),e.jsxs("span",{children:[L.length," users"]})]})]}),I.permissions&&I.permissions.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.permissions.slice(0,4).map(_=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${P(_.scope)}`,title:_.code,children:_.action},_.id)),I.permissions.length>4&&e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-600 rounded-full",children:["+",I.permissions.length-4," more"]})]})})]},I.id)})})}),e.jsx(zt,{isOpen:k,onClose:()=>w(!1),title:N?"Edit Role":"Create New Role",subtitle:N?.is_system?" System roles have limited editing options":N?"Update role and permissions":"Create a new role with custom permissions",width:"xl",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{variant:"secondary",type:"button",onClick:()=>w(!1),children:"Cancel"}),e.jsx(ie,{variant:"primary",onClick:F,disabled:S||N?.is_system&&N?.name==="super_admin",loading:S,children:S?"Saving...":N?"Update Role":"Create Role"})]}),children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[O&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:O}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",value:j.name,onChange:I=>T({...j,name:I.target.value}),placeholder:"e.g., Sales Manager",disabled:N?.is_system,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Entity Type"}),e.jsxs("select",{value:j.entity_type||"",onChange:I=>T({...j,entity_type:I.target.value||null}),disabled:N?.is_system,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[e.jsx("option",{value:"",children:"None (Global)"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"shop",children:"Shop"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:j.description,onChange:I=>T({...j,description:I.target.value}),placeholder:"Brief description of this role...",rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:["Permissions (",j.permission_ids.length," selected)"]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:Object.entries(Z).map(([I,E])=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 capitalize",children:I.replace(/_/g," ")}),e.jsxs("span",{className:"text-xs text-slate-400",children:[E.length," permissions"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(L=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",title:L.description||L.code,children:[e.jsx("input",{type:"checkbox",checked:j.permission_ids.includes(L.id),onChange:()=>U(L.id),disabled:N?.is_system&&N?.name==="super_admin",className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 group-hover:text-slate-900 dark:group-hover:text-white",children:L.action}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${P(L.scope)}`,children:L.scope})]},L.id))})]},I))})]})]})}),e.jsx(Qt,{isOpen:ue,onClose:()=>be(!1),onConfirm:Y,title:"Delete Role",message:`Are you sure you want to delete "${D?.name}"? This action cannot be undone.`,confirmText:"Delete Role"})]}):e.jsx("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-12 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-red-500 mb-4",children:"block"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"You don't have permission to view roles and permissions."}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-2",children:"Contact your administrator if you need access."})]})})}function zN(l,n=!0){return new Intl.NumberFormat("en-IN",{style:n?"currency":"decimal",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(l)}function ON(){const{isLoading:l}=ht(),{user:n}=mt(),{activeEntity:c,scope:i}=Mt(),{handleError:u,handleSuccess:h}=ds(),[x,b]=m.useState([]),[v,p]=m.useState(!0),[g,f]=m.useState(""),[k,w]=m.useState(1),[N,C]=m.useState(0),[j,T]=m.useState(10),[S,M]=m.useState(!1),[O,R]=m.useState(null),[G,q]=m.useState({name:"",phone:"",email:"",address:"",customer_type:"regular",gender:""});m.useEffect(()=>{ce()},[k,j,g]);const ce=async()=>{try{p(!0);const V={page:k,size:j};g&&(V.search=g);const ee=await Xl.list(V);b(ee.data?.items||ee.data?.data||[]),C(ee.data?.total||0)}catch(V){console.error("Failed to fetch customers:",V),b([])}finally{p(!1)}},F=()=>{R(null),q({name:"",phone:"",email:"",address:"",customer_type:"regular",gender:""}),M(!0)},ue=V=>{R(V),q({name:V.name,phone:V.phone,email:V.email||"",address:V.address||"",customer_type:V.customer_type||"regular",gender:V.gender||""}),M(!0)},be=async V=>{V.preventDefault();try{if(O)await Xl.update(O.id,G);else{let ee=n?.shop_id;i==="shop"&&c?.id&&(ee=c.id),await Xl.create({...G,shop_id:ee,customer_type:(G.customer_type||"regular").toLowerCase()})}h(O?"Customer updated successfully":"Customer created successfully"),M(!1),ce()}catch(ee){u(ee,O?"Failed to update customer":"Failed to create customer")}},D=[{header:"Customer",key:"name",render:V=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 font-semibold",children:V.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:V.name}),e.jsx("div",{className:"text-xs text-slate-500",children:V.phone})]})]})},{header:"Type",key:"customer_type",render:V=>e.jsx(Ye,{variant:V.customer_type==="premium"?"warning":"secondary",className:"capitalize",children:V.customer_type||"regular"})},{header:"Email / Address",key:"email",className:"hidden md:table-cell",render:V=>e.jsxs("div",{className:"text-sm",children:[V.email&&e.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:V.email}),V.address&&e.jsx("div",{className:"text-xs text-slate-500 truncate max-w-[200px]",children:V.address})]})},{header:"Total Spend",key:"total_purchases",align:"right",render:V=>e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:zN(V.total_purchases||0)})},{header:"Last Visit",key:"last_visit",align:"right",render:V=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:V.last_visit?new Date(V.last_visit).toLocaleDateString():"-"})},{header:"Actions",key:"id",align:"right",render:V=>e.jsx(Ui,{permission:"customers.manage.shop",children:e.jsx(ie,{variant:"ghost",onClick:()=>ue(V),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Customer",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})})})}];return e.jsxs(ye,{loading:l,children:[e.jsx(ye.Header,{title:"Customers",subtitle:"Manage customer profiles and history",actions:e.jsx(Ui,{permission:"customers.manage.shop",children:e.jsxs(ie,{variant:"primary",onClick:F,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Customer"]})})}),e.jsxs(ye.KPICards,{children:[e.jsx(Ne,{title:"Total Customers",value:N,icon:"group",isActive:!0}),e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:"hidden lg:block"})]}),e.jsx(ye.DataTable,{columns:D,data:x,loading:v,emptyMessage:"No customers found.",pagination:{currentPage:k,totalPages:Math.ceil(N/j),onPageChange:w,totalItems:N,pageSize:j,onPageSizeChange:V=>{T(V),w(1)}},headerSlot:e.jsx(ye.ListControls,{title:"Customer List",count:N,searchProps:{value:g,onChange:V=>{f(V),w(1)},placeholder:"Search customers..."},embedded:!0})}),e.jsx(zt,{isOpen:S,onClose:()=>M(!1),title:O?"Edit Customer":"Add Customer",subtitle:O?"Update customer information":"Create a new customer profile",width:"md",footer:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ie,{type:"button",variant:"secondary",onClick:()=>M(!1),className:"flex-1",children:"Cancel"}),e.jsx(ie,{type:"submit",variant:"primary",form:"customer-form",className:"flex-1",children:O?"Update":"Create"})]}),children:e.jsxs("form",{id:"customer-form",onSubmit:be,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:G.name,onChange:V=>q({...G,name:V.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter customer name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:G.phone,onChange:V=>q({...G,phone:V.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter phone number",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Customer Type"}),e.jsx(Fj,{value:G.customer_type,onChange:V=>q({...G,customer_type:V}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Gender"}),e.jsx(Rp,{value:G.gender,onChange:V=>q({...G,gender:V}),className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:G.email,onChange:V=>q({...G,email:V.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:G.address,onChange:V=>q({...G,address:V.target.value}),rows:3,className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 resize-none",placeholder:"Enter address"})]})]})})]})}function LN(){const l=Pe(),{logout:n}=mt();return m.useEffect(()=>{const c=()=>{console.log("Session expired - redirecting to login"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),n(),l("/login",{replace:!0})};return window.addEventListener("auth:session-expired",c),()=>window.removeEventListener("auth:session-expired",c)},[l,n]),null}function UN({children:l}){const{user:n,loading:c}=mt();return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Initializing..."})]})}):n?e.jsx(e.Fragment,{children:l}):e.jsx(I0,{to:"/login",replace:!0})}function qN(){return e.jsx(Dj,{})}function BN(){return e.jsx(fj,{children:e.jsx(Nj,{children:e.jsx(wj,{children:e.jsxs(kj,{children:[e.jsx(_j,{}),e.jsxs(Ay,{children:[e.jsxs(ly,{children:[e.jsx(we,{path:"/login",element:e.jsx(Tj,{})}),e.jsxs(we,{path:"/",element:e.jsx(UN,{children:e.jsx(Aj,{})}),children:[e.jsx(we,{index:!0,element:e.jsx(qN,{})}),e.jsx(we,{path:"users",element:e.jsx(RN,{})}),e.jsx(we,{path:"roles",element:e.jsx(MN,{})}),e.jsx(we,{path:"login-activity",element:e.jsx(TN,{})}),e.jsx(we,{path:"warehouses",element:e.jsx(qj,{})}),e.jsx(we,{path:"warehouses/add",element:e.jsx(Bj,{})}),e.jsx(we,{path:"warehouses/edit/:id",element:e.jsx(Hj,{})}),e.jsx(we,{path:"warehouses/stock",element:e.jsx(E0,{})}),e.jsx(we,{path:"shops",element:e.jsx(Qj,{})}),e.jsx(we,{path:"shops/add",element:e.jsx(Vj,{})}),e.jsx(we,{path:"shops/:id/edit",element:e.jsx(Ij,{})}),e.jsx(we,{path:"shops/stock",element:e.jsx(E0,{})}),e.jsx(we,{path:"warehouse-mapping",element:e.jsx(Xj,{})}),e.jsx(we,{path:"medicines",element:e.jsx(Kj,{})}),e.jsx(we,{path:"medicines/add",element:e.jsx(Wj,{})}),e.jsx(we,{path:"medicines/:id",element:e.jsx(Jj,{})}),e.jsx(we,{path:"medicines/:id/edit",element:e.jsx(eN,{})}),e.jsx(we,{path:"categories",element:e.jsx(uN,{})}),e.jsx(we,{path:"units",element:e.jsx(mN,{})}),e.jsx(we,{path:"hsn",element:e.jsx(hN,{})}),e.jsx(we,{path:"gst",element:e.jsx(xN,{})}),e.jsx(we,{path:"gst-slabs",element:e.jsx(pN,{})}),e.jsx(we,{path:"suppliers",element:e.jsx(fN,{})}),e.jsx(we,{path:"adjustment-reasons",element:e.jsx(gN,{})}),e.jsx(we,{path:"payment-methods",element:e.jsx(bN,{})}),e.jsx(we,{path:"medicine-types",element:e.jsx(yN,{})}),e.jsx(we,{path:"manufacturers",element:e.jsx(vN,{})}),e.jsx(we,{path:"brands",element:e.jsx(jN,{})}),e.jsx(we,{path:"racks",element:e.jsx(NN,{})}),e.jsx(we,{path:"inventory",element:e.jsx(yd,{})}),e.jsx(we,{path:"inventory/adjust",element:e.jsx(Zj,{})}),e.jsx(we,{path:"inventory-oversight",element:e.jsx(Kr,{})}),e.jsx(we,{path:"inventory-oversight/warehouse",element:e.jsx(Kr,{})}),e.jsx(we,{path:"inventory-oversight/shop",element:e.jsx(Kr,{})}),e.jsx(we,{path:"inventory-oversight/expiry",element:e.jsx(Kr,{})}),e.jsx(we,{path:"inventory-oversight/dead-stock",element:e.jsx(Kr,{})}),e.jsx(we,{path:"analytics/dispatch",element:e.jsx(T0,{})})," ",e.jsx(we,{path:"analytics/demand",element:e.jsx(Ci,{})})," ",e.jsx(we,{path:"customers",element:e.jsx(ON,{})}),e.jsx(we,{path:"employees",element:e.jsx(wN,{})}),e.jsx(we,{path:"employees/attendance",element:e.jsx(kN,{})}),e.jsx(we,{path:"employees/attendance/report",element:e.jsx(SN,{})}),e.jsx(we,{path:"employees/salary",element:e.jsx(_N,{})}),e.jsx(we,{path:"dispatches",element:e.jsx(T0,{})}),e.jsx(we,{path:"dispatches/create",element:e.jsx(iN,{})}),e.jsx(we,{path:"dispatches/:id",element:e.jsx(oN,{})}),e.jsx(we,{path:"purchase-requests",element:e.jsx(cN,{})}),e.jsx(we,{path:"sales",element:e.jsx(A0,{})}),e.jsx(we,{path:"sales/pos",element:e.jsx(rN,{})}),e.jsx(we,{path:"sales/invoices",element:e.jsx(A0,{})}),e.jsx(we,{path:"sales/returns",element:e.jsx(nN,{})}),e.jsx(we,{path:"reports",element:e.jsx(Ci,{})}),e.jsx(we,{path:"reports/sales",element:e.jsx(Ci,{})}),e.jsx(we,{path:"reports/expiry",element:e.jsx(EN,{})}),e.jsx(we,{path:"reports/tax",element:e.jsx(CN,{})}),e.jsx(we,{path:"reports/inventory",element:e.jsx(yd,{})}),e.jsx(we,{path:"reports/inventory-aging",element:e.jsx(yd,{})})," ",e.jsx(we,{path:"reports/compliance",element:e.jsx(Ci,{})})," ",e.jsx(we,{path:"notifications",element:e.jsx(DN,{})}),e.jsx(we,{path:"settings",element:e.jsx(R0,{})}),e.jsx(we,{path:"settings/application",element:e.jsx(R0,{})}),e.jsx(we,{path:"settings/system",element:e.jsx(jd,{})}),e.jsx(we,{path:"feature-flags",element:e.jsx(jd,{})})," ",e.jsx(we,{path:"audit-logs",element:e.jsx(AN,{})}),e.jsx(we,{path:"backup-restore",element:e.jsx(jd,{})})," "]}),e.jsx(we,{path:"*",element:e.jsx(I0,{to:"/",replace:!0})})]}),e.jsx(LN,{})]})]})})})})}const M0=localStorage.getItem("theme");M0==="dark"||!M0&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");if("fonts"in document){document.fonts.ready.then(()=>{document.fonts.check("1em Material Symbols Outlined")?document.documentElement.classList.add("material-symbols-loaded"):setTimeout(()=>{document.documentElement.classList.add("material-symbols-loaded")},100)});const l=()=>{document.fonts.check("1em Material Symbols Outlined")?document.documentElement.classList.add("material-symbols-loaded"):setTimeout(l,50)};setTimeout(l,50)}else setTimeout(()=>{document.documentElement.classList.add("material-symbols-loaded")},300);lb.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(BN,{})}));
