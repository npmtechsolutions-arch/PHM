(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&i(x)}).observe(document,{childList:!0,subtree:!0});function c(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(u){if(u.ep)return;u.ep=!0;const h=c(u);fetch(u.href,h)}})();var ad={exports:{}},Un={};var qh;function Vg(){if(qh)return Un;qh=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(i,u,h){var x=null;if(h!==void 0&&(x=""+h),u.key!==void 0&&(x=""+u.key),"key"in u){h={};for(var j in u)j!=="key"&&(h[j]=u[j])}else h=u;return u=h.ref,{$$typeof:n,type:i,key:x,ref:u!==void 0?u:null,props:h}}return Un.Fragment=r,Un.jsx=c,Un.jsxs=c,Un}var Bh;function Pg(){return Bh||(Bh=1,ad.exports=Vg()),ad.exports}var e=Pg(),sd={exports:{}},Ee={};var Hh;function Xg(){if(Hh)return Ee;Hh=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),x=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),w=Symbol.iterator;function A(_){return _===null||typeof _!="object"?null:(_=w&&_[w]||_["@@iterator"],typeof _=="function"?_:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function E(_,Y,G){this.props=_,this.context=Y,this.refs=b,this.updater=G||k}E.prototype.isReactComponent={},E.prototype.setState=function(_,Y){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,Y,"setState")},E.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function T(){}T.prototype=E.prototype;function D(_,Y,G){this.props=_,this.context=Y,this.refs=b,this.updater=G||k}var z=D.prototype=new T;z.constructor=D,S(z,E.prototype),z.isPureReactComponent=!0;var R=Array.isArray;function W(){}var I={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function oe(_,Y,G){var F=G.ref;return{$$typeof:n,type:_,key:Y,ref:F!==void 0?F:null,props:G}}function U(_,Y){return oe(_.type,Y,_.props)}function M(_){return typeof _=="object"&&_!==null&&_.$$typeof===n}function Q(_){var Y={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(G){return Y[G]})}var he=/\/+/g;function xe(_,Y){return typeof _=="object"&&_!==null&&_.key!=null?Q(""+_.key):Y.toString(36)}function be(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(W,W):(_.status="pending",_.then(function(Y){_.status==="pending"&&(_.status="fulfilled",_.value=Y)},function(Y){_.status==="pending"&&(_.status="rejected",_.reason=Y)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function O(_,Y,G,F,P){var pe=typeof _;(pe==="undefined"||pe==="boolean")&&(_=null);var fe=!1;if(_===null)fe=!0;else switch(pe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(_.$$typeof){case n:case r:fe=!0;break;case p:return fe=_._init,O(fe(_._payload),Y,G,F,P)}}if(fe)return P=P(_),fe=F===""?"."+xe(_,0):F,R(P)?(G="",fe!=null&&(G=fe.replace(he,"$&/")+"/"),O(P,Y,G,"",function(ge){return ge})):P!=null&&(M(P)&&(P=U(P,G+(P.key==null||_&&_.key===P.key?"":(""+P.key).replace(he,"$&/")+"/")+fe)),Y.push(P)),1;fe=0;var Oe=F===""?".":F+":";if(R(_))for(var H=0;H<_.length;H++)F=_[H],pe=Oe+xe(F,H),fe+=O(F,Y,G,pe,P);else if(H=A(_),typeof H=="function")for(_=H.call(_),H=0;!(F=_.next()).done;)F=F.value,pe=Oe+xe(F,H++),fe+=O(F,Y,G,pe,P);else if(pe==="object"){if(typeof _.then=="function")return O(be(_),Y,G,F,P);throw Y=String(_),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return fe}function V(_,Y,G){if(_==null)return _;var F=[],P=0;return O(_,F,"","",function(pe){return Y.call(G,pe,P++)}),F}function se(_){if(_._status===-1){var Y=_._result;Y=Y(),Y.then(function(G){(_._status===0||_._status===-1)&&(_._status=1,_._result=G)},function(G){(_._status===0||_._status===-1)&&(_._status=2,_._result=G)}),_._status===-1&&(_._status=0,_._result=Y)}if(_._status===1)return _._result.default;throw _._result}var te=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},N={map:V,forEach:function(_,Y,G){V(_,function(){Y.apply(this,arguments)},G)},count:function(_){var Y=0;return V(_,function(){Y++}),Y},toArray:function(_){return V(_,function(Y){return Y})||[]},only:function(_){if(!M(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Ee.Activity=g,Ee.Children=N,Ee.Component=E,Ee.Fragment=c,Ee.Profiler=u,Ee.PureComponent=D,Ee.StrictMode=i,Ee.Suspense=y,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(_){return I.H.useMemoCache(_)}},Ee.cache=function(_){return function(){return _.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(_,Y,G){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var F=S({},_.props),P=_.key;if(Y!=null)for(pe in Y.key!==void 0&&(P=""+Y.key),Y)!q.call(Y,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&Y.ref===void 0||(F[pe]=Y[pe]);var pe=arguments.length-2;if(pe===1)F.children=G;else if(1<pe){for(var fe=Array(pe),Oe=0;Oe<pe;Oe++)fe[Oe]=arguments[Oe+2];F.children=fe}return oe(_.type,P,F)},Ee.createContext=function(_){return _={$$typeof:x,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:h,_context:_},_},Ee.createElement=function(_,Y,G){var F,P={},pe=null;if(Y!=null)for(F in Y.key!==void 0&&(pe=""+Y.key),Y)q.call(Y,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(P[F]=Y[F]);var fe=arguments.length-2;if(fe===1)P.children=G;else if(1<fe){for(var Oe=Array(fe),H=0;H<fe;H++)Oe[H]=arguments[H+2];P.children=Oe}if(_&&_.defaultProps)for(F in fe=_.defaultProps,fe)P[F]===void 0&&(P[F]=fe[F]);return oe(_,pe,P)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(_){return{$$typeof:j,render:_}},Ee.isValidElement=M,Ee.lazy=function(_){return{$$typeof:p,_payload:{_status:-1,_result:_},_init:se}},Ee.memo=function(_,Y){return{$$typeof:f,type:_,compare:Y===void 0?null:Y}},Ee.startTransition=function(_){var Y=I.T,G={};I.T=G;try{var F=_(),P=I.S;P!==null&&P(G,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(W,te)}catch(pe){te(pe)}finally{Y!==null&&G.types!==null&&(Y.types=G.types),I.T=Y}},Ee.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ee.use=function(_){return I.H.use(_)},Ee.useActionState=function(_,Y,G){return I.H.useActionState(_,Y,G)},Ee.useCallback=function(_,Y){return I.H.useCallback(_,Y)},Ee.useContext=function(_){return I.H.useContext(_)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(_,Y){return I.H.useDeferredValue(_,Y)},Ee.useEffect=function(_,Y){return I.H.useEffect(_,Y)},Ee.useEffectEvent=function(_){return I.H.useEffectEvent(_)},Ee.useId=function(){return I.H.useId()},Ee.useImperativeHandle=function(_,Y,G){return I.H.useImperativeHandle(_,Y,G)},Ee.useInsertionEffect=function(_,Y){return I.H.useInsertionEffect(_,Y)},Ee.useLayoutEffect=function(_,Y){return I.H.useLayoutEffect(_,Y)},Ee.useMemo=function(_,Y){return I.H.useMemo(_,Y)},Ee.useOptimistic=function(_,Y){return I.H.useOptimistic(_,Y)},Ee.useReducer=function(_,Y,G){return I.H.useReducer(_,Y,G)},Ee.useRef=function(_){return I.H.useRef(_)},Ee.useState=function(_){return I.H.useState(_)},Ee.useSyncExternalStore=function(_,Y,G){return I.H.useSyncExternalStore(_,Y,G)},Ee.useTransition=function(){return I.H.useTransition()},Ee.version="19.2.3",Ee}var Gh;function _d(){return Gh||(Gh=1,sd.exports=Xg()),sd.exports}var m=_d(),ld={exports:{}},qn={},nd={exports:{}},rd={};var Fh;function Zg(){return Fh||(Fh=1,(function(n){function r(O,V){var se=O.length;O.push(V);e:for(;0<se;){var te=se-1>>>1,N=O[te];if(0<u(N,V))O[te]=V,O[se]=N,se=te;else break e}}function c(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var V=O[0],se=O.pop();if(se!==V){O[0]=se;e:for(var te=0,N=O.length,_=N>>>1;te<_;){var Y=2*(te+1)-1,G=O[Y],F=Y+1,P=O[F];if(0>u(G,se))F<N&&0>u(P,G)?(O[te]=P,O[F]=se,te=F):(O[te]=G,O[Y]=se,te=Y);else if(F<N&&0>u(P,se))O[te]=P,O[F]=se,te=F;else break e}}return V}function u(O,V){var se=O.sortIndex-V.sortIndex;return se!==0?se:O.id-V.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var x=Date,j=x.now();n.unstable_now=function(){return x.now()-j}}var y=[],f=[],p=1,g=null,w=3,A=!1,k=!1,S=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function z(O){for(var V=c(f);V!==null;){if(V.callback===null)i(f);else if(V.startTime<=O)i(f),V.sortIndex=V.expirationTime,r(y,V);else break;V=c(f)}}function R(O){if(S=!1,z(O),!k)if(c(y)!==null)k=!0,W||(W=!0,Q());else{var V=c(f);V!==null&&be(R,V.startTime-O)}}var W=!1,I=-1,q=5,oe=-1;function U(){return b?!0:!(n.unstable_now()-oe<q)}function M(){if(b=!1,W){var O=n.unstable_now();oe=O;var V=!0;try{e:{k=!1,S&&(S=!1,T(I),I=-1),A=!0;var se=w;try{t:{for(z(O),g=c(y);g!==null&&!(g.expirationTime>O&&U());){var te=g.callback;if(typeof te=="function"){g.callback=null,w=g.priorityLevel;var N=te(g.expirationTime<=O);if(O=n.unstable_now(),typeof N=="function"){g.callback=N,z(O),V=!0;break t}g===c(y)&&i(y),z(O)}else i(y);g=c(y)}if(g!==null)V=!0;else{var _=c(f);_!==null&&be(R,_.startTime-O),V=!1}}break e}finally{g=null,w=se,A=!1}V=void 0}}finally{V?Q():W=!1}}}var Q;if(typeof D=="function")Q=function(){D(M)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,xe=he.port2;he.port1.onmessage=M,Q=function(){xe.postMessage(null)}}else Q=function(){E(M,0)};function be(O,V){I=E(function(){O(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(O){switch(w){case 1:case 2:case 3:var V=3;break;default:V=w}var se=w;w=V;try{return O()}finally{w=se}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var se=w;w=O;try{return V()}finally{w=se}},n.unstable_scheduleCallback=function(O,V,se){var te=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?te+se:te):se=te,O){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=se+N,O={id:p++,callback:V,priorityLevel:O,startTime:se,expirationTime:N,sortIndex:-1},se>te?(O.sortIndex=se,r(f,O),c(y)===null&&O===c(f)&&(S?(T(I),I=-1):S=!0,be(R,se-te))):(O.sortIndex=N,r(y,O),k||A||(k=!0,W||(W=!0,Q()))),O},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(O){var V=w;return function(){var se=w;w=V;try{return O.apply(this,arguments)}finally{w=se}}}})(rd)),rd}var $h;function Kg(){return $h||($h=1,nd.exports=Zg()),nd.exports}var id={exports:{}},Rt={};var Yh;function Ig(){if(Yh)return Rt;Yh=1;var n=_d();function r(y){var f="https://react.dev/errors/"+y;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+y+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var i={d:{f:c,r:function(){throw Error(r(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},u=Symbol.for("react.portal");function h(y,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:g==null?null:""+g,children:y,containerInfo:f,implementation:p}}var x=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function j(y,f){if(y==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rt.createPortal=function(y,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(r(299));return h(y,f,null,p)},Rt.flushSync=function(y){var f=x.T,p=i.p;try{if(x.T=null,i.p=2,y)return y()}finally{x.T=f,i.p=p,i.d.f()}},Rt.preconnect=function(y,f){typeof y=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(y,f))},Rt.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},Rt.preinit=function(y,f){if(typeof y=="string"&&f&&typeof f.as=="string"){var p=f.as,g=j(p,f.crossOrigin),w=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(y,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:w,fetchPriority:A}):p==="script"&&i.d.X(y,{crossOrigin:g,integrity:w,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Rt.preinitModule=function(y,f){if(typeof y=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=j(f.as,f.crossOrigin);i.d.M(y,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(y)},Rt.preload=function(y,f){if(typeof y=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=j(p,f.crossOrigin);i.d.L(y,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Rt.preloadModule=function(y,f){if(typeof y=="string")if(f){var p=j(f.as,f.crossOrigin);i.d.m(y,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(y)},Rt.requestFormReset=function(y){i.d.r(y)},Rt.unstable_batchedUpdates=function(y,f){return y(f)},Rt.useFormState=function(y,f,p){return x.H.useFormState(y,f,p)},Rt.useFormStatus=function(){return x.H.useHostTransitionStatus()},Rt.version="19.2.3",Rt}var Qh;function Jg(){if(Qh)return id.exports;Qh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),id.exports=Ig(),id.exports}var Vh;function Wg(){if(Vh)return qn;Vh=1;var n=Kg(),r=_d(),c=Jg();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function x(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function j(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function y(t){if(h(t)!==t)throw Error(i(188))}function f(t){var a=t.alternate;if(!a){if(a=h(t),a===null)throw Error(i(188));return a!==t?null:t}for(var s=t,l=a;;){var o=s.return;if(o===null)break;var d=o.alternate;if(d===null){if(l=o.return,l!==null){s=l;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===s)return y(o),t;if(d===l)return y(o),a;d=d.sibling}throw Error(i(188))}if(s.return!==l.return)s=o,l=d;else{for(var v=!1,C=o.child;C;){if(C===s){v=!0,s=o,l=d;break}if(C===l){v=!0,l=o,s=d;break}C=C.sibling}if(!v){for(C=d.child;C;){if(C===s){v=!0,s=d,l=o;break}if(C===l){v=!0,l=d,s=o;break}C=C.sibling}if(!v)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?t:a}function p(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=p(t),a!==null)return a;t=t.sibling}return null}var g=Object.assign,w=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),D=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function Q(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var he=Symbol.for("react.client.reference");function xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===he?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case S:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case R:return"Suspense";case W:return"SuspenseList";case oe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case D:return t.displayName||"Context";case T:return(t._context.displayName||"Context")+".Consumer";case z:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return a=t.displayName||null,a!==null?a:xe(t.type)||"Memo";case q:a=t._payload,t=t._init;try{return xe(t(a))}catch{}}return null}var be=Array.isArray,O=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},te=[],N=-1;function _(t){return{current:t}}function Y(t){0>N||(t.current=te[N],te[N]=null,N--)}function G(t,a){N++,te[N]=t.current,t.current=a}var F=_(null),P=_(null),pe=_(null),fe=_(null);function Oe(t,a){switch(G(pe,a),G(P,t),G(F,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?ih(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=ih(a),t=oh(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(F),G(F,t)}function H(){Y(F),Y(P),Y(pe)}function ge(t){t.memoizedState!==null&&G(fe,t);var a=F.current,s=oh(a,t.type);a!==s&&(G(P,t),G(F,s))}function ke(t){P.current===t&&(Y(F),Y(P)),fe.current===t&&(Y(fe),Mn._currentValue=se)}var de,Ae;function Ve(t){if(de===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);de=a&&a[1]||"",Ae=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+t+Ae}var Wa=!1;function Da(t,a){if(!t||Wa)return"";Wa=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ae){var J=ae}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(ae){J=ae}t.call(ce.prototype)}}else{try{throw Error()}catch(ae){J=ae}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ae){if(ae&&J&&typeof ae.stack=="string")return[ae.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],C=d[1];if(v&&C){var L=v.split(`
`),K=C.split(`
`);for(o=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;o<K.length&&!K[o].includes("DetermineComponentFrameRoot");)o++;if(l===L.length||o===K.length)for(l=L.length-1,o=K.length-1;1<=l&&0<=o&&L[l]!==K[o];)o--;for(;1<=l&&0<=o;l--,o--)if(L[l]!==K[o]){if(l!==1||o!==1)do if(l--,o--,0>o||L[l]!==K[o]){var ne=`
`+L[l].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=l&&0<=o);break}}}finally{Wa=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Ve(s):""}function es(t,a){switch(t.tag){case 26:case 27:case 5:return Ve(t.type);case 16:return Ve("Lazy");case 13:return t.child!==a&&a!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return Da(t.type,!1);case 11:return Da(t.type.render,!1);case 1:return Da(t.type,!0);case 31:return Ve("Activity");default:return""}}function Cs(t){try{var a="",s=null;do a+=es(t,s),s=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ra=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,ts=n.unstable_cancelCallback,At=n.unstable_shouldYield,Fi=n.unstable_requestPaint,Ot=n.unstable_now,ie=n.unstable_getCurrentPriorityLevel,_e=n.unstable_ImmediatePriority,Ce=n.unstable_UserBlockingPriority,Ye=n.unstable_NormalPriority,gt=n.unstable_LowPriority,ka=n.unstable_IdlePriority,tr=n.log,ba=n.unstable_setDisableYieldValue,as=null,Tt=null;function ya(t){if(typeof tr=="function"&&ba(t),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(as,t)}catch{}}var Dt=Math.clz32?Math.clz32:Dp,Ap=Math.log,Tp=Math.LN2;function Dp(t){return t>>>=0,t===0?32:31-(Ap(t)/Tp|0)|0}var ar=256,sr=262144,lr=4194304;function Es(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function nr(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var o=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var C=l&134217727;return C!==0?(l=C&~d,l!==0?o=Es(l):(v&=C,v!==0?o=Es(v):s||(s=C&~t,s!==0&&(o=Es(s))))):(C=l&~d,C!==0?o=Es(C):v!==0?o=Es(v):s||(s=l&~t,s!==0&&(o=Es(s)))),o===0?0:a!==0&&a!==o&&(a&d)===0&&(d=o&-o,s=a&-a,d>=s||d===32&&(s&4194048)!==0)?a:o}function Ql(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Rp(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fd(){var t=lr;return lr<<=1,(lr&62914560)===0&&(lr=4194304),t}function $i(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Vl(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mp(t,a,s,l,o,d){var v=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var C=t.entanglements,L=t.expirationTimes,K=t.hiddenUpdates;for(s=v&~s;0<s;){var ne=31-Dt(s),ce=1<<ne;C[ne]=0,L[ne]=-1;var J=K[ne];if(J!==null)for(K[ne]=null,ne=0;ne<J.length;ne++){var ae=J[ne];ae!==null&&(ae.lane&=-536870913)}s&=~ce}l!==0&&$d(t,l,0),d!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~a))}function $d(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Dt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function Yd(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-Dt(s),o=1<<l;o&a|t[l]&a&&(t[l]|=a),s&=~o}}function Qd(t,a){var s=a&-a;return s=(s&42)!==0?1:Yi(s),(s&(t.suspendedLanes|a))!==0?0:s}function Yi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Qi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Vd(){var t=V.p;return t!==0?t:(t=window.event,t===void 0?32:Dh(t.type))}function Pd(t,a){var s=V.p;try{return V.p=t,a()}finally{V.p=s}}var ss=Math.random().toString(36).slice(2),jt="__reactFiber$"+ss,Bt="__reactProps$"+ss,Js="__reactContainer$"+ss,Vi="__reactEvents$"+ss,Op="__reactListeners$"+ss,zp="__reactHandles$"+ss,Xd="__reactResources$"+ss,Pl="__reactMarker$"+ss;function Pi(t){delete t[jt],delete t[Bt],delete t[Vi],delete t[Op],delete t[zp]}function Ws(t){var a=t[jt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[Js]||s[jt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=ph(t);t!==null;){if(s=t[jt])return s;t=ph(t)}return a}t=s,s=t.parentNode}return null}function el(t){if(t=t[jt]||t[Js]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Xl(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function tl(t){var a=t[Xd];return a||(a=t[Xd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function bt(t){t[Pl]=!0}var Zd=new Set,Kd={};function As(t,a){al(t,a),al(t+"Capture",a)}function al(t,a){for(Kd[t]=a,t=0;t<a.length;t++)Zd.add(a[t])}var Lp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Id={},Jd={};function Up(t){return Ra.call(Jd,t)?!0:Ra.call(Id,t)?!1:Lp.test(t)?Jd[t]=!0:(Id[t]=!0,!1)}function rr(t,a,s){if(Up(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function ir(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Ma(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}function na(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wd(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qp(t,a,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,d=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return o.call(this)},set:function(v){s=""+v,d.call(this,v)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Xi(t){if(!t._valueTracker){var a=Wd(t)?"checked":"value";t._valueTracker=qp(t,a,""+t[a])}}function eu(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=Wd(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function or(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Bp=/[\n"\\]/g;function ra(t){return t.replace(Bp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Zi(t,a,s,l,o,d,v,C){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+na(a)):t.value!==""+na(a)&&(t.value=""+na(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?Ki(t,v,na(a)):s!=null?Ki(t,v,na(s)):l!=null&&t.removeAttribute("value"),o==null&&d!=null&&(t.defaultChecked=!!d),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+na(C):t.removeAttribute("name")}function tu(t,a,s,l,o,d,v,C){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),a!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||a!=null)){Xi(t);return}s=s!=null?""+na(s):"",a=a!=null?""+na(a):s,C||a===t.value||(t.value=a),t.defaultValue=a}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=C?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Xi(t)}function Ki(t,a,s){a==="number"&&or(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function sl(t,a,s,l){if(t=t.options,a){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=!0;for(s=0;s<t.length;s++)o=a.hasOwnProperty("$"+t[s].value),t[s].selected!==o&&(t[s].selected=o),o&&l&&(t[s].defaultSelected=!0)}else{for(s=""+na(s),a=null,o=0;o<t.length;o++){if(t[o].value===s){t[o].selected=!0,l&&(t[o].defaultSelected=!0);return}a!==null||t[o].disabled||(a=t[o])}a!==null&&(a.selected=!0)}}function au(t,a,s){if(a!=null&&(a=""+na(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+na(s):""}function su(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(i(92));if(be(l)){if(1<l.length)throw Error(i(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=na(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),Xi(t)}function ll(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var Hp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lu(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||Hp.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function nu(t,a,s){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var o in a)l=a[o],a.hasOwnProperty(o)&&s[o]!==l&&lu(t,o,l)}else for(var d in a)a.hasOwnProperty(d)&&lu(t,d,a[d])}function Ii(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cr(t){return Fp.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Oa(){}var Ji=null;function Wi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nl=null,rl=null;function ru(t){var a=el(t);if(a&&(t=a.stateNode)){var s=t[Bt]||null;e:switch(t=a.stateNode,a.type){case"input":if(Zi(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ra(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var o=l[Bt]||null;if(!o)throw Error(i(90));Zi(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&eu(l)}break e;case"textarea":au(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&sl(t,!!s.multiple,a,!1)}}}var eo=!1;function iu(t,a,s){if(eo)return t(a,s);eo=!0;try{var l=t(a);return l}finally{if(eo=!1,(nl!==null||rl!==null)&&(Kr(),nl&&(a=nl,t=rl,rl=nl=null,ru(a),t)))for(a=0;a<t.length;a++)ru(t[a])}}function Zl(t,a){var s=t.stateNode;if(s===null)return null;var l=s[Bt]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(i(231,a,typeof s));return s}var za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(za)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){to=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{to=!1}var ls=null,ao=null,dr=null;function ou(){if(dr)return dr;var t,a=ao,s=a.length,l,o="value"in ls?ls.value:ls.textContent,d=o.length;for(t=0;t<s&&a[t]===o[t];t++);var v=s-t;for(l=1;l<=v&&a[s-l]===o[d-l];l++);return dr=o.slice(t,1<l?1-l:void 0)}function ur(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function mr(){return!0}function cu(){return!1}function Ht(t){function a(s,l,o,d,v){this._reactName=s,this._targetInst=o,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(s=t[C],this[C]=s?s(d):d[C]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?mr:cu,this.isPropagationStopped=cu,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),a}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xr=Ht(Ts),Il=g({},Ts,{view:0,detail:0}),$p=Ht(Il),so,lo,Jl,hr=g({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jl&&(Jl&&t.type==="mousemove"?(so=t.screenX-Jl.screenX,lo=t.screenY-Jl.screenY):lo=so=0,Jl=t),so)},movementY:function(t){return"movementY"in t?t.movementY:lo}}),du=Ht(hr),Yp=g({},hr,{dataTransfer:0}),Qp=Ht(Yp),Vp=g({},Il,{relatedTarget:0}),no=Ht(Vp),Pp=g({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Xp=Ht(Pp),Zp=g({},Ts,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kp=Ht(Zp),Ip=g({},Ts,{data:0}),uu=Ht(Ip),Jp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ef={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tf(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=ef[t])?!!a[t]:!1}function ro(){return tf}var af=g({},Il,{key:function(t){if(t.key){var a=Jp[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=ur(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(t){return t.type==="keypress"?ur(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ur(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sf=Ht(af),lf=g({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mu=Ht(lf),nf=g({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),rf=Ht(nf),of=g({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=Ht(of),df=g({},hr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uf=Ht(df),mf=g({},Ts,{newState:0,oldState:0}),xf=Ht(mf),hf=[9,13,27,32],io=za&&"CompositionEvent"in window,Wl=null;za&&"documentMode"in document&&(Wl=document.documentMode);var pf=za&&"TextEvent"in window&&!Wl,xu=za&&(!io||Wl&&8<Wl&&11>=Wl),hu=" ",pu=!1;function fu(t,a){switch(t){case"keyup":return hf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var il=!1;function ff(t,a){switch(t){case"compositionend":return gu(a);case"keypress":return a.which!==32?null:(pu=!0,hu);case"textInput":return t=a.data,t===hu&&pu?null:t;default:return null}}function gf(t,a){if(il)return t==="compositionend"||!io&&fu(t,a)?(t=ou(),dr=ao=ls=null,il=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return xu&&a.locale!=="ko"?null:a.data;default:return null}}var bf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!bf[t.type]:a==="textarea"}function yu(t,a,s,l){nl?rl?rl.push(l):rl=[l]:nl=l,a=si(a,"onChange"),0<a.length&&(s=new xr("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var en=null,tn=null;function yf(t){th(t,0)}function pr(t){var a=Xl(t);if(eu(a))return t}function vu(t,a){if(t==="change")return a}var ju=!1;if(za){var oo;if(za){var co="oninput"in document;if(!co){var Nu=document.createElement("div");Nu.setAttribute("oninput","return;"),co=typeof Nu.oninput=="function"}oo=co}else oo=!1;ju=oo&&(!document.documentMode||9<document.documentMode)}function wu(){en&&(en.detachEvent("onpropertychange",ku),tn=en=null)}function ku(t){if(t.propertyName==="value"&&pr(tn)){var a=[];yu(a,tn,t,Wi(t)),iu(yf,a)}}function vf(t,a,s){t==="focusin"?(wu(),en=a,tn=s,en.attachEvent("onpropertychange",ku)):t==="focusout"&&wu()}function jf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pr(tn)}function Nf(t,a){if(t==="click")return pr(a)}function wf(t,a){if(t==="input"||t==="change")return pr(a)}function kf(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Kt=typeof Object.is=="function"?Object.is:kf;function an(t,a){if(Kt(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var o=s[l];if(!Ra.call(a,o)||!Kt(t[o],a[o]))return!1}return!0}function Su(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _u(t,a){var s=Su(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Su(s)}}function Cu(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Cu(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Eu(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=or(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=or(t.document)}return a}function uo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Sf=za&&"documentMode"in document&&11>=document.documentMode,ol=null,mo=null,sn=null,xo=!1;function Au(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;xo||ol==null||ol!==or(l)||(l=ol,"selectionStart"in l&&uo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),sn&&an(sn,l)||(sn=l,l=si(mo,"onSelect"),0<l.length&&(a=new xr("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=ol)))}function Ds(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var cl={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionrun:Ds("Transition","TransitionRun"),transitionstart:Ds("Transition","TransitionStart"),transitioncancel:Ds("Transition","TransitionCancel"),transitionend:Ds("Transition","TransitionEnd")},ho={},Tu={};za&&(Tu=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Rs(t){if(ho[t])return ho[t];if(!cl[t])return t;var a=cl[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in Tu)return ho[t]=a[s];return t}var Du=Rs("animationend"),Ru=Rs("animationiteration"),Mu=Rs("animationstart"),_f=Rs("transitionrun"),Cf=Rs("transitionstart"),Ef=Rs("transitioncancel"),Ou=Rs("transitionend"),zu=new Map,po="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");po.push("scrollEnd");function va(t,a){zu.set(t,a),As(a,[t])}var fr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ia=[],dl=0,fo=0;function gr(){for(var t=dl,a=fo=dl=0;a<t;){var s=ia[a];ia[a++]=null;var l=ia[a];ia[a++]=null;var o=ia[a];ia[a++]=null;var d=ia[a];if(ia[a++]=null,l!==null&&o!==null){var v=l.pending;v===null?o.next=o:(o.next=v.next,v.next=o),l.pending=o}d!==0&&Lu(s,o,d)}}function br(t,a,s,l){ia[dl++]=t,ia[dl++]=a,ia[dl++]=s,ia[dl++]=l,fo|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function go(t,a,s,l){return br(t,a,s,l),yr(t)}function Ms(t,a){return br(t,null,null,a),yr(t)}function Lu(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var o=!1,d=t.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(o=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,o&&a!==null&&(o=31-Dt(s),t=d.hiddenUpdates,l=t[o],l===null?t[o]=[a]:l.push(a),a.lane=s|536870912),d):null}function yr(t){if(50<_n)throw _n=0,_c=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ul={};function Af(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,a,s,l){return new Af(t,a,s,l)}function bo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function La(t,a){var s=t.alternate;return s===null?(s=It(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Uu(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function vr(t,a,s,l,o,d){var v=0;if(l=t,typeof t=="function")bo(t)&&(v=1);else if(typeof t=="string")v=Og(t,s,F.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case oe:return t=It(31,s,a,o),t.elementType=oe,t.lanes=d,t;case S:return Os(s.children,o,d,a);case b:v=8,o|=24;break;case E:return t=It(12,s,a,o|2),t.elementType=E,t.lanes=d,t;case R:return t=It(13,s,a,o),t.elementType=R,t.lanes=d,t;case W:return t=It(19,s,a,o),t.elementType=W,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:v=10;break e;case T:v=9;break e;case z:v=11;break e;case I:v=14;break e;case q:v=16,l=null;break e}v=29,s=Error(i(130,t===null?"null":typeof t,"")),l=null}return a=It(v,s,a,o),a.elementType=t,a.type=l,a.lanes=d,a}function Os(t,a,s,l){return t=It(7,t,l,a),t.lanes=s,t}function yo(t,a,s){return t=It(6,t,null,a),t.lanes=s,t}function qu(t){var a=It(18,null,null,0);return a.stateNode=t,a}function vo(t,a,s){return a=It(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Bu=new WeakMap;function oa(t,a){if(typeof t=="object"&&t!==null){var s=Bu.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Cs(a)},Bu.set(t,a),a)}return{value:t,source:a,stack:Cs(a)}}var ml=[],xl=0,jr=null,ln=0,ca=[],da=0,ns=null,Sa=1,_a="";function Ua(t,a){ml[xl++]=ln,ml[xl++]=jr,jr=t,ln=a}function Hu(t,a,s){ca[da++]=Sa,ca[da++]=_a,ca[da++]=ns,ns=t;var l=Sa;t=_a;var o=32-Dt(l)-1;l&=~(1<<o),s+=1;var d=32-Dt(a)+o;if(30<d){var v=o-o%5;d=(l&(1<<v)-1).toString(32),l>>=v,o-=v,Sa=1<<32-Dt(a)+o|s<<o|l,_a=d+t}else Sa=1<<d|s<<o|l,_a=t}function jo(t){t.return!==null&&(Ua(t,1),Hu(t,1,0))}function No(t){for(;t===jr;)jr=ml[--xl],ml[xl]=null,ln=ml[--xl],ml[xl]=null;for(;t===ns;)ns=ca[--da],ca[da]=null,_a=ca[--da],ca[da]=null,Sa=ca[--da],ca[da]=null}function Gu(t,a){ca[da++]=Sa,ca[da++]=_a,ca[da++]=ns,Sa=a.id,_a=a.overflow,ns=t}var Nt=null,at=null,He=!1,rs=null,ua=!1,wo=Error(i(519));function is(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nn(oa(a,t)),wo}function Fu(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[jt]=t,a[Bt]=l,s){case"dialog":Le("cancel",a),Le("close",a);break;case"iframe":case"object":case"embed":Le("load",a);break;case"video":case"audio":for(s=0;s<En.length;s++)Le(En[s],a);break;case"source":Le("error",a);break;case"img":case"image":case"link":Le("error",a),Le("load",a);break;case"details":Le("toggle",a);break;case"input":Le("invalid",a),tu(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Le("invalid",a);break;case"textarea":Le("invalid",a),su(a,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||nh(a.textContent,s)?(l.popover!=null&&(Le("beforetoggle",a),Le("toggle",a)),l.onScroll!=null&&Le("scroll",a),l.onScrollEnd!=null&&Le("scrollend",a),l.onClick!=null&&(a.onclick=Oa),a=!0):a=!1,a||is(t,!0)}function $u(t){for(Nt=t.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:Nt=Nt.return}}function hl(t){if(t!==Nt)return!1;if(!He)return $u(t),He=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Gc(t.type,t.memoizedProps)),s=!s),s&&at&&is(t),$u(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));at=hh(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));at=hh(t)}else a===27?(a=at,js(t.type)?(t=Vc,Vc=null,at=t):at=a):at=Nt?xa(t.stateNode.nextSibling):null;return!0}function zs(){at=Nt=null,He=!1}function ko(){var t=rs;return t!==null&&(Yt===null?Yt=t:Yt.push.apply(Yt,t),rs=null),t}function nn(t){rs===null?rs=[t]:rs.push(t)}var So=_(null),Ls=null,qa=null;function os(t,a,s){G(So,a._currentValue),a._currentValue=s}function Ba(t){t._currentValue=So.current,Y(So)}function _o(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function Co(t,a,s,l){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){var v=o.child;d=d.firstContext;e:for(;d!==null;){var C=d;d=o;for(var L=0;L<a.length;L++)if(C.context===a[L]){d.lanes|=s,C=d.alternate,C!==null&&(C.lanes|=s),_o(d.return,s,t),l||(v=null);break e}d=C.next}}else if(o.tag===18){if(v=o.return,v===null)throw Error(i(341));v.lanes|=s,d=v.alternate,d!==null&&(d.lanes|=s),_o(v,s,t),v=null}else v=o.child;if(v!==null)v.return=o;else for(v=o;v!==null;){if(v===t){v=null;break}if(o=v.sibling,o!==null){o.return=v.return,v=o;break}v=v.return}o=v}}function pl(t,a,s,l){t=null;for(var o=a,d=!1;o!==null;){if(!d){if((o.flags&524288)!==0)d=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var v=o.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var C=o.type;Kt(o.pendingProps.value,v.value)||(t!==null?t.push(C):t=[C])}}else if(o===fe.current){if(v=o.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(Mn):t=[Mn])}o=o.return}t!==null&&Co(a,t,s,l),a.flags|=262144}function Nr(t){for(t=t.firstContext;t!==null;){if(!Kt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Us(t){Ls=t,qa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function wt(t){return Yu(Ls,t)}function wr(t,a){return Ls===null&&Us(t),Yu(t,a)}function Yu(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},qa===null){if(t===null)throw Error(i(308));qa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else qa=qa.next=a;return s}var Tf=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},Df=n.unstable_scheduleCallback,Rf=n.unstable_NormalPriority,mt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Eo(){return{controller:new Tf,data:new Map,refCount:0}}function rn(t){t.refCount--,t.refCount===0&&Df(Rf,function(){t.controller.abort()})}var on=null,Ao=0,fl=0,gl=null;function Mf(t,a){if(on===null){var s=on=[];Ao=0,fl=Rc(),gl={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Ao++,a.then(Qu,Qu),a}function Qu(){if(--Ao===0&&on!==null){gl!==null&&(gl.status="fulfilled");var t=on;on=null,fl=0,gl=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Of(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(o){s.push(o)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var o=0;o<s.length;o++)(0,s[o])(a)},function(o){for(l.status="rejected",l.reason=o,o=0;o<s.length;o++)(0,s[o])(void 0)}),l}var Vu=O.S;O.S=function(t,a){Ax=Ot(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Mf(t,a),Vu!==null&&Vu(t,a)};var qs=_(null);function To(){var t=qs.current;return t!==null?t:tt.pooledCache}function kr(t,a){a===null?G(qs,qs.current):G(qs,a.pool)}function Pu(){var t=To();return t===null?null:{parent:mt._currentValue,pool:t}}var bl=Error(i(460)),Do=Error(i(474)),Sr=Error(i(542)),_r={then:function(){}};function Xu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Zu(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(Oa,Oa),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Iu(t),t;default:if(typeof a.status=="string")a.then(Oa,Oa);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var o=a;o.status="fulfilled",o.value=l}},function(l){if(a.status==="pending"){var o=a;o.status="rejected",o.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Iu(t),t}throw Hs=a,bl}}function Bs(t){try{var a=t._init;return a(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Hs=s,bl):s}}var Hs=null;function Ku(){if(Hs===null)throw Error(i(459));var t=Hs;return Hs=null,t}function Iu(t){if(t===bl||t===Sr)throw Error(i(483))}var yl=null,cn=0;function Cr(t){var a=cn;return cn+=1,yl===null&&(yl=[]),Zu(yl,t,a)}function dn(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Er(t,a){throw a.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Ju(t){function a($,B){if(t){var Z=$.deletions;Z===null?($.deletions=[B],$.flags|=16):Z.push(B)}}function s($,B){if(!t)return null;for(;B!==null;)a($,B),B=B.sibling;return null}function l($){for(var B=new Map;$!==null;)$.key!==null?B.set($.key,$):B.set($.index,$),$=$.sibling;return B}function o($,B){return $=La($,B),$.index=0,$.sibling=null,$}function d($,B,Z){return $.index=Z,t?(Z=$.alternate,Z!==null?(Z=Z.index,Z<B?($.flags|=67108866,B):Z):($.flags|=67108866,B)):($.flags|=1048576,B)}function v($){return t&&$.alternate===null&&($.flags|=67108866),$}function C($,B,Z,re){return B===null||B.tag!==6?(B=yo(Z,$.mode,re),B.return=$,B):(B=o(B,Z),B.return=$,B)}function L($,B,Z,re){var we=Z.type;return we===S?ne($,B,Z.props.children,re,Z.key):B!==null&&(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===q&&Bs(we)===B.type)?(B=o(B,Z.props),dn(B,Z),B.return=$,B):(B=vr(Z.type,Z.key,Z.props,null,$.mode,re),dn(B,Z),B.return=$,B)}function K($,B,Z,re){return B===null||B.tag!==4||B.stateNode.containerInfo!==Z.containerInfo||B.stateNode.implementation!==Z.implementation?(B=vo(Z,$.mode,re),B.return=$,B):(B=o(B,Z.children||[]),B.return=$,B)}function ne($,B,Z,re,we){return B===null||B.tag!==7?(B=Os(Z,$.mode,re,we),B.return=$,B):(B=o(B,Z),B.return=$,B)}function ce($,B,Z){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=yo(""+B,$.mode,Z),B.return=$,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case A:return Z=vr(B.type,B.key,B.props,null,$.mode,Z),dn(Z,B),Z.return=$,Z;case k:return B=vo(B,$.mode,Z),B.return=$,B;case q:return B=Bs(B),ce($,B,Z)}if(be(B)||Q(B))return B=Os(B,$.mode,Z,null),B.return=$,B;if(typeof B.then=="function")return ce($,Cr(B),Z);if(B.$$typeof===D)return ce($,wr($,B),Z);Er($,B)}return null}function J($,B,Z,re){var we=B!==null?B.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return we!==null?null:C($,B,""+Z,re);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===we?L($,B,Z,re):null;case k:return Z.key===we?K($,B,Z,re):null;case q:return Z=Bs(Z),J($,B,Z,re)}if(be(Z)||Q(Z))return we!==null?null:ne($,B,Z,re,null);if(typeof Z.then=="function")return J($,B,Cr(Z),re);if(Z.$$typeof===D)return J($,B,wr($,Z),re);Er($,Z)}return null}function ae($,B,Z,re,we){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return $=$.get(Z)||null,C(B,$,""+re,we);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case A:return $=$.get(re.key===null?Z:re.key)||null,L(B,$,re,we);case k:return $=$.get(re.key===null?Z:re.key)||null,K(B,$,re,we);case q:return re=Bs(re),ae($,B,Z,re,we)}if(be(re)||Q(re))return $=$.get(Z)||null,ne(B,$,re,we,null);if(typeof re.then=="function")return ae($,B,Z,Cr(re),we);if(re.$$typeof===D)return ae($,B,Z,wr(B,re),we);Er(B,re)}return null}function je($,B,Z,re){for(var we=null,Ge=null,Ne=B,Re=B=0,qe=null;Ne!==null&&Re<Z.length;Re++){Ne.index>Re?(qe=Ne,Ne=null):qe=Ne.sibling;var Fe=J($,Ne,Z[Re],re);if(Fe===null){Ne===null&&(Ne=qe);break}t&&Ne&&Fe.alternate===null&&a($,Ne),B=d(Fe,B,Re),Ge===null?we=Fe:Ge.sibling=Fe,Ge=Fe,Ne=qe}if(Re===Z.length)return s($,Ne),He&&Ua($,Re),we;if(Ne===null){for(;Re<Z.length;Re++)Ne=ce($,Z[Re],re),Ne!==null&&(B=d(Ne,B,Re),Ge===null?we=Ne:Ge.sibling=Ne,Ge=Ne);return He&&Ua($,Re),we}for(Ne=l(Ne);Re<Z.length;Re++)qe=ae(Ne,$,Re,Z[Re],re),qe!==null&&(t&&qe.alternate!==null&&Ne.delete(qe.key===null?Re:qe.key),B=d(qe,B,Re),Ge===null?we=qe:Ge.sibling=qe,Ge=qe);return t&&Ne.forEach(function(_s){return a($,_s)}),He&&Ua($,Re),we}function Se($,B,Z,re){if(Z==null)throw Error(i(151));for(var we=null,Ge=null,Ne=B,Re=B=0,qe=null,Fe=Z.next();Ne!==null&&!Fe.done;Re++,Fe=Z.next()){Ne.index>Re?(qe=Ne,Ne=null):qe=Ne.sibling;var _s=J($,Ne,Fe.value,re);if(_s===null){Ne===null&&(Ne=qe);break}t&&Ne&&_s.alternate===null&&a($,Ne),B=d(_s,B,Re),Ge===null?we=_s:Ge.sibling=_s,Ge=_s,Ne=qe}if(Fe.done)return s($,Ne),He&&Ua($,Re),we;if(Ne===null){for(;!Fe.done;Re++,Fe=Z.next())Fe=ce($,Fe.value,re),Fe!==null&&(B=d(Fe,B,Re),Ge===null?we=Fe:Ge.sibling=Fe,Ge=Fe);return He&&Ua($,Re),we}for(Ne=l(Ne);!Fe.done;Re++,Fe=Z.next())Fe=ae(Ne,$,Re,Fe.value,re),Fe!==null&&(t&&Fe.alternate!==null&&Ne.delete(Fe.key===null?Re:Fe.key),B=d(Fe,B,Re),Ge===null?we=Fe:Ge.sibling=Fe,Ge=Fe);return t&&Ne.forEach(function(Qg){return a($,Qg)}),He&&Ua($,Re),we}function et($,B,Z,re){if(typeof Z=="object"&&Z!==null&&Z.type===S&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var we=Z.key;B!==null;){if(B.key===we){if(we=Z.type,we===S){if(B.tag===7){s($,B.sibling),re=o(B,Z.props.children),re.return=$,$=re;break e}}else if(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===q&&Bs(we)===B.type){s($,B.sibling),re=o(B,Z.props),dn(re,Z),re.return=$,$=re;break e}s($,B);break}else a($,B);B=B.sibling}Z.type===S?(re=Os(Z.props.children,$.mode,re,Z.key),re.return=$,$=re):(re=vr(Z.type,Z.key,Z.props,null,$.mode,re),dn(re,Z),re.return=$,$=re)}return v($);case k:e:{for(we=Z.key;B!==null;){if(B.key===we)if(B.tag===4&&B.stateNode.containerInfo===Z.containerInfo&&B.stateNode.implementation===Z.implementation){s($,B.sibling),re=o(B,Z.children||[]),re.return=$,$=re;break e}else{s($,B);break}else a($,B);B=B.sibling}re=vo(Z,$.mode,re),re.return=$,$=re}return v($);case q:return Z=Bs(Z),et($,B,Z,re)}if(be(Z))return je($,B,Z,re);if(Q(Z)){if(we=Q(Z),typeof we!="function")throw Error(i(150));return Z=we.call(Z),Se($,B,Z,re)}if(typeof Z.then=="function")return et($,B,Cr(Z),re);if(Z.$$typeof===D)return et($,B,wr($,Z),re);Er($,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,B!==null&&B.tag===6?(s($,B.sibling),re=o(B,Z),re.return=$,$=re):(s($,B),re=yo(Z,$.mode,re),re.return=$,$=re),v($)):s($,B)}return function($,B,Z,re){try{cn=0;var we=et($,B,Z,re);return yl=null,we}catch(Ne){if(Ne===bl||Ne===Sr)throw Ne;var Ge=It(29,Ne,null,$.mode);return Ge.lanes=re,Ge.return=$,Ge}}}var Gs=Ju(!0),Wu=Ju(!1),cs=!1;function Ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mo(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ds(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function us(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var o=l.pending;return o===null?a.next=a:(a.next=o.next,o.next=a),l.pending=a,a=yr(t),Lu(t,null,s),a}return br(t,l,a,s),yr(t)}function un(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,Yd(t,s)}}function Oo(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var o=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var v={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?o=d=v:d=d.next=v,s=s.next}while(s!==null);d===null?o=d=a:d=d.next=a}else o=d=a;s={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var zo=!1;function mn(){if(zo){var t=gl;if(t!==null)throw t}}function xn(t,a,s,l){zo=!1;var o=t.updateQueue;cs=!1;var d=o.firstBaseUpdate,v=o.lastBaseUpdate,C=o.shared.pending;if(C!==null){o.shared.pending=null;var L=C,K=L.next;L.next=null,v===null?d=K:v.next=K,v=L;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,C=ne.lastBaseUpdate,C!==v&&(C===null?ne.firstBaseUpdate=K:C.next=K,ne.lastBaseUpdate=L))}if(d!==null){var ce=o.baseState;v=0,ne=K=L=null,C=d;do{var J=C.lane&-536870913,ae=J!==C.lane;if(ae?(Ue&J)===J:(l&J)===J){J!==0&&J===fl&&(zo=!0),ne!==null&&(ne=ne.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var je=t,Se=C;J=a;var et=s;switch(Se.tag){case 1:if(je=Se.payload,typeof je=="function"){ce=je.call(et,ce,J);break e}ce=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Se.payload,J=typeof je=="function"?je.call(et,ce,J):je,J==null)break e;ce=g({},ce,J);break e;case 2:cs=!0}}J=C.callback,J!==null&&(t.flags|=64,ae&&(t.flags|=8192),ae=o.callbacks,ae===null?o.callbacks=[J]:ae.push(J))}else ae={lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ne===null?(K=ne=ae,L=ce):ne=ne.next=ae,v|=J;if(C=C.next,C===null){if(C=o.shared.pending,C===null)break;ae=C,C=ae.next,ae.next=null,o.lastBaseUpdate=ae,o.shared.pending=null}}while(!0);ne===null&&(L=ce),o.baseState=L,o.firstBaseUpdate=K,o.lastBaseUpdate=ne,d===null&&(o.shared.lanes=0),fs|=v,t.lanes=v,t.memoizedState=ce}}function em(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function tm(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)em(s[t],a)}var vl=_(null),Ar=_(0);function am(t,a){t=Xa,G(Ar,t),G(vl,a),Xa=t|a.baseLanes}function Lo(){G(Ar,Xa),G(vl,vl.current)}function Uo(){Xa=Ar.current,Y(vl),Y(Ar)}var Jt=_(null),ma=null;function ms(t){var a=t.alternate;G(dt,dt.current&1),G(Jt,t),ma===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(ma=t)}function qo(t){G(dt,dt.current),G(Jt,t),ma===null&&(ma=t)}function sm(t){t.tag===22?(G(dt,dt.current),G(Jt,t),ma===null&&(ma=t)):xs()}function xs(){G(dt,dt.current),G(Jt,Jt.current)}function Wt(t){Y(Jt),ma===t&&(ma=null),Y(dt)}var dt=_(0);function Tr(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Yc(s)||Qc(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ha=0,Te=null,Je=null,xt=null,Dr=!1,jl=!1,Fs=!1,Rr=0,hn=0,Nl=null,zf=0;function rt(){throw Error(i(321))}function Bo(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!Kt(t[s],a[s]))return!1;return!0}function Ho(t,a,s,l,o,d){return Ha=d,Te=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,O.H=t===null||t.memoizedState===null?Hm:tc,Fs=!1,d=s(l,o),Fs=!1,jl&&(d=nm(a,s,l,o)),lm(t),d}function lm(t){O.H=gn;var a=Je!==null&&Je.next!==null;if(Ha=0,xt=Je=Te=null,Dr=!1,hn=0,Nl=null,a)throw Error(i(300));t===null||ht||(t=t.dependencies,t!==null&&Nr(t)&&(ht=!0))}function nm(t,a,s,l){Te=t;var o=0;do{if(jl&&(Nl=null),hn=0,jl=!1,25<=o)throw Error(i(301));if(o+=1,xt=Je=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}O.H=Gm,d=a(s,l)}while(jl);return d}function Lf(){var t=O.H,a=t.useState()[0];return a=typeof a.then=="function"?pn(a):a,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Te.flags|=1024),a}function Go(){var t=Rr!==0;return Rr=0,t}function Fo(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function $o(t){if(Dr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Dr=!1}Ha=0,xt=Je=Te=null,jl=!1,hn=Rr=0,Nl=null}function zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Te.memoizedState=xt=t:xt=xt.next=t,xt}function ut(){if(Je===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var a=xt===null?Te.memoizedState:xt.next;if(a!==null)xt=a,Je=t;else{if(t===null)throw Te.alternate===null?Error(i(467)):Error(i(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},xt===null?Te.memoizedState=xt=t:xt=xt.next=t}return xt}function Mr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pn(t){var a=hn;return hn+=1,Nl===null&&(Nl=[]),t=Zu(Nl,t,a),a=Te,(xt===null?a.memoizedState:xt.next)===null&&(a=a.alternate,O.H=a===null||a.memoizedState===null?Hm:tc),t}function Or(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return pn(t);if(t.$$typeof===D)return wt(t)}throw Error(i(438,String(t)))}function Yo(t){var a=null,s=Te.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=Te.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(o){return o.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Mr(),Te.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=U;return a.index++,s}function Ga(t,a){return typeof a=="function"?a(t):a}function zr(t){var a=ut();return Qo(a,Je,t)}function Qo(t,a,s){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var o=t.baseQueue,d=l.pending;if(d!==null){if(o!==null){var v=o.next;o.next=d.next,d.next=v}a.baseQueue=o=d,l.pending=null}if(d=t.baseState,o===null)t.memoizedState=d;else{a=o.next;var C=v=null,L=null,K=a,ne=!1;do{var ce=K.lane&-536870913;if(ce!==K.lane?(Ue&ce)===ce:(Ha&ce)===ce){var J=K.revertLane;if(J===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ce===fl&&(ne=!0);else if((Ha&J)===J){K=K.next,J===fl&&(ne=!0);continue}else ce={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(C=L=ce,v=d):L=L.next=ce,Te.lanes|=J,fs|=J;ce=K.action,Fs&&s(d,ce),d=K.hasEagerState?K.eagerState:s(d,ce)}else J={lane:ce,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(C=L=J,v=d):L=L.next=J,Te.lanes|=ce,fs|=ce;K=K.next}while(K!==null&&K!==a);if(L===null?v=d:L.next=C,!Kt(d,t.memoizedState)&&(ht=!0,ne&&(s=gl,s!==null)))throw s;t.memoizedState=d,t.baseState=v,t.baseQueue=L,l.lastRenderedState=d}return o===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Vo(t){var a=ut(),s=a.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var l=s.dispatch,o=s.pending,d=a.memoizedState;if(o!==null){s.pending=null;var v=o=o.next;do d=t(d,v.action),v=v.next;while(v!==o);Kt(d,a.memoizedState)||(ht=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),s.lastRenderedState=d}return[d,l]}function rm(t,a,s){var l=Te,o=ut(),d=He;if(d){if(s===void 0)throw Error(i(407));s=s()}else s=a();var v=!Kt((Je||o).memoizedState,s);if(v&&(o.memoizedState=s,ht=!0),o=o.queue,Zo(cm.bind(null,l,o,t),[t]),o.getSnapshot!==a||v||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,wl(9,{destroy:void 0},om.bind(null,l,o,s,a),null),tt===null)throw Error(i(349));d||(Ha&127)!==0||im(l,a,s)}return s}function im(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=Te.updateQueue,a===null?(a=Mr(),Te.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function om(t,a,s,l){a.value=s,a.getSnapshot=l,dm(a)&&um(t)}function cm(t,a,s){return s(function(){dm(a)&&um(t)})}function dm(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!Kt(t,s)}catch{return!0}}function um(t){var a=Ms(t,2);a!==null&&Qt(a,t,2)}function Po(t){var a=zt();if(typeof t=="function"){var s=t;if(t=s(),Fs){ya(!0);try{s()}finally{ya(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},a}function mm(t,a,s,l){return t.baseState=s,Qo(t,Je,typeof l=="function"?l:Ga)}function Uf(t,a,s,l,o){if(qr(t))throw Error(i(485));if(t=a.action,t!==null){var d={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};O.T!==null?s(!0):d.isTransition=!1,l(d),s=a.pending,s===null?(d.next=a.pending=d,xm(a,d)):(d.next=s.next,a.pending=s.next=d)}}function xm(t,a){var s=a.action,l=a.payload,o=t.state;if(a.isTransition){var d=O.T,v={};O.T=v;try{var C=s(o,l),L=O.S;L!==null&&L(v,C),hm(t,a,C)}catch(K){Xo(t,a,K)}finally{d!==null&&v.types!==null&&(d.types=v.types),O.T=d}}else try{d=s(o,l),hm(t,a,d)}catch(K){Xo(t,a,K)}}function hm(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){pm(t,a,l)},function(l){return Xo(t,a,l)}):pm(t,a,s)}function pm(t,a,s){a.status="fulfilled",a.value=s,fm(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,xm(t,s)))}function Xo(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,fm(a),a=a.next;while(a!==l)}t.action=null}function fm(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function gm(t,a){return a}function bm(t,a){if(He){var s=tt.formState;if(s!==null){e:{var l=Te;if(He){if(at){t:{for(var o=at,d=ua;o.nodeType!==8;){if(!d){o=null;break t}if(o=xa(o.nextSibling),o===null){o=null;break t}}d=o.data,o=d==="F!"||d==="F"?o:null}if(o){at=xa(o.nextSibling),l=o.data==="F!";break e}}is(l)}l=!1}l&&(a=s[0])}}return s=zt(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gm,lastRenderedState:a},s.queue=l,s=Um.bind(null,Te,l),l.dispatch=s,l=Po(!1),d=ec.bind(null,Te,!1,l.queue),l=zt(),o={state:a,dispatch:null,action:t,pending:null},l.queue=o,s=Uf.bind(null,Te,o,d,s),o.dispatch=s,l.memoizedState=t,[a,s,!1]}function ym(t){var a=ut();return vm(a,Je,t)}function vm(t,a,s){if(a=Qo(t,a,gm)[0],t=zr(Ga)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=pn(a)}catch(v){throw v===bl?Sr:v}else l=a;a=ut();var o=a.queue,d=o.dispatch;return s!==a.memoizedState&&(Te.flags|=2048,wl(9,{destroy:void 0},qf.bind(null,o,s),null)),[l,d,t]}function qf(t,a){t.action=a}function jm(t){var a=ut(),s=Je;if(s!==null)return vm(a,s,t);ut(),a=a.memoizedState,s=ut();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function wl(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=Te.updateQueue,a===null&&(a=Mr(),Te.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function Nm(){return ut().memoizedState}function Lr(t,a,s,l){var o=zt();Te.flags|=t,o.memoizedState=wl(1|a,{destroy:void 0},s,l===void 0?null:l)}function Ur(t,a,s,l){var o=ut();l=l===void 0?null:l;var d=o.memoizedState.inst;Je!==null&&l!==null&&Bo(l,Je.memoizedState.deps)?o.memoizedState=wl(a,d,s,l):(Te.flags|=t,o.memoizedState=wl(1|a,d,s,l))}function wm(t,a){Lr(8390656,8,t,a)}function Zo(t,a){Ur(2048,8,t,a)}function Bf(t){Te.flags|=4;var a=Te.updateQueue;if(a===null)a=Mr(),Te.updateQueue=a,a.events=[t];else{var s=a.events;s===null?a.events=[t]:s.push(t)}}function km(t){var a=ut().memoizedState;return Bf({ref:a,nextImpl:t}),function(){if((Qe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Sm(t,a){return Ur(4,2,t,a)}function _m(t,a){return Ur(4,4,t,a)}function Cm(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Em(t,a,s){s=s!=null?s.concat([t]):null,Ur(4,4,Cm.bind(null,a,t),s)}function Ko(){}function Am(t,a){var s=ut();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&Bo(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function Tm(t,a){var s=ut();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&Bo(a,l[1]))return l[0];if(l=t(),Fs){ya(!0);try{t()}finally{ya(!1)}}return s.memoizedState=[l,a],l}function Io(t,a,s){return s===void 0||(Ha&1073741824)!==0&&(Ue&261930)===0?t.memoizedState=a:(t.memoizedState=s,t=Dx(),Te.lanes|=t,fs|=t,s)}function Dm(t,a,s,l){return Kt(s,a)?s:vl.current!==null?(t=Io(t,s,l),Kt(t,a)||(ht=!0),t):(Ha&42)===0||(Ha&1073741824)!==0&&(Ue&261930)===0?(ht=!0,t.memoizedState=s):(t=Dx(),Te.lanes|=t,fs|=t,a)}function Rm(t,a,s,l,o){var d=V.p;V.p=d!==0&&8>d?d:8;var v=O.T,C={};O.T=C,ec(t,!1,a,s);try{var L=o(),K=O.S;if(K!==null&&K(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ne=Of(L,l);fn(t,a,ne,aa(t))}else fn(t,a,l,aa(t))}catch(ce){fn(t,a,{then:function(){},status:"rejected",reason:ce},aa())}finally{V.p=d,v!==null&&C.types!==null&&(v.types=C.types),O.T=v}}function Hf(){}function Jo(t,a,s,l){if(t.tag!==5)throw Error(i(476));var o=Mm(t).queue;Rm(t,o,a,se,s===null?Hf:function(){return Om(t),s(l)})}function Mm(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:se},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Om(t){var a=Mm(t);a.next===null&&(a=t.alternate.memoizedState),fn(t,a.next.queue,{},aa())}function Wo(){return wt(Mn)}function zm(){return ut().memoizedState}function Lm(){return ut().memoizedState}function Gf(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=aa();t=ds(s);var l=us(a,t,s);l!==null&&(Qt(l,a,s),un(l,a,s)),a={cache:Eo()},t.payload=a;return}a=a.return}}function Ff(t,a,s){var l=aa();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},qr(t)?qm(a,s):(s=go(t,a,s,l),s!==null&&(Qt(s,t,l),Bm(s,a,l)))}function Um(t,a,s){var l=aa();fn(t,a,s,l)}function fn(t,a,s,l){var o={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(qr(t))qm(a,o);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var v=a.lastRenderedState,C=d(v,s);if(o.hasEagerState=!0,o.eagerState=C,Kt(C,v))return br(t,a,o,0),tt===null&&gr(),!1}catch{}if(s=go(t,a,o,l),s!==null)return Qt(s,t,l),Bm(s,a,l),!0}return!1}function ec(t,a,s,l){if(l={lane:2,revertLane:Rc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},qr(t)){if(a)throw Error(i(479))}else a=go(t,s,l,2),a!==null&&Qt(a,t,2)}function qr(t){var a=t.alternate;return t===Te||a!==null&&a===Te}function qm(t,a){jl=Dr=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function Bm(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,Yd(t,s)}}var gn={readContext:wt,use:Or,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt,useHostTransitionStatus:rt,useFormState:rt,useActionState:rt,useOptimistic:rt,useMemoCache:rt,useCacheRefresh:rt};gn.useEffectEvent=rt;var Hm={readContext:wt,use:Or,useCallback:function(t,a){return zt().memoizedState=[t,a===void 0?null:a],t},useContext:wt,useEffect:wm,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,Lr(4194308,4,Cm.bind(null,a,t),s)},useLayoutEffect:function(t,a){return Lr(4194308,4,t,a)},useInsertionEffect:function(t,a){Lr(4,2,t,a)},useMemo:function(t,a){var s=zt();a=a===void 0?null:a;var l=t();if(Fs){ya(!0);try{t()}finally{ya(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=zt();if(s!==void 0){var o=s(a);if(Fs){ya(!0);try{s(a)}finally{ya(!1)}}}else o=a;return l.memoizedState=l.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},l.queue=t,t=t.dispatch=Ff.bind(null,Te,t),[l.memoizedState,t]},useRef:function(t){var a=zt();return t={current:t},a.memoizedState=t},useState:function(t){t=Po(t);var a=t.queue,s=Um.bind(null,Te,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Ko,useDeferredValue:function(t,a){var s=zt();return Io(s,t,a)},useTransition:function(){var t=Po(!1);return t=Rm.bind(null,Te,t.queue,!0,!1),zt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=Te,o=zt();if(He){if(s===void 0)throw Error(i(407));s=s()}else{if(s=a(),tt===null)throw Error(i(349));(Ue&127)!==0||im(l,a,s)}o.memoizedState=s;var d={value:s,getSnapshot:a};return o.queue=d,wm(cm.bind(null,l,d,t),[t]),l.flags|=2048,wl(9,{destroy:void 0},om.bind(null,l,d,s,a),null),s},useId:function(){var t=zt(),a=tt.identifierPrefix;if(He){var s=_a,l=Sa;s=(l&~(1<<32-Dt(l)-1)).toString(32)+s,a="_"+a+"R_"+s,s=Rr++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=zf++,a="_"+a+"r_"+s.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Wo,useFormState:bm,useActionState:bm,useOptimistic:function(t){var a=zt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=ec.bind(null,Te,!0,s),s.dispatch=a,[t,a]},useMemoCache:Yo,useCacheRefresh:function(){return zt().memoizedState=Gf.bind(null,Te)},useEffectEvent:function(t){var a=zt(),s={impl:t};return a.memoizedState=s,function(){if((Qe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},tc={readContext:wt,use:Or,useCallback:Am,useContext:wt,useEffect:Zo,useImperativeHandle:Em,useInsertionEffect:Sm,useLayoutEffect:_m,useMemo:Tm,useReducer:zr,useRef:Nm,useState:function(){return zr(Ga)},useDebugValue:Ko,useDeferredValue:function(t,a){var s=ut();return Dm(s,Je.memoizedState,t,a)},useTransition:function(){var t=zr(Ga)[0],a=ut().memoizedState;return[typeof t=="boolean"?t:pn(t),a]},useSyncExternalStore:rm,useId:zm,useHostTransitionStatus:Wo,useFormState:ym,useActionState:ym,useOptimistic:function(t,a){var s=ut();return mm(s,Je,t,a)},useMemoCache:Yo,useCacheRefresh:Lm};tc.useEffectEvent=km;var Gm={readContext:wt,use:Or,useCallback:Am,useContext:wt,useEffect:Zo,useImperativeHandle:Em,useInsertionEffect:Sm,useLayoutEffect:_m,useMemo:Tm,useReducer:Vo,useRef:Nm,useState:function(){return Vo(Ga)},useDebugValue:Ko,useDeferredValue:function(t,a){var s=ut();return Je===null?Io(s,t,a):Dm(s,Je.memoizedState,t,a)},useTransition:function(){var t=Vo(Ga)[0],a=ut().memoizedState;return[typeof t=="boolean"?t:pn(t),a]},useSyncExternalStore:rm,useId:zm,useHostTransitionStatus:Wo,useFormState:jm,useActionState:jm,useOptimistic:function(t,a){var s=ut();return Je!==null?mm(s,Je,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Yo,useCacheRefresh:Lm};Gm.useEffectEvent=km;function ac(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:g({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var sc={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=aa(),o=ds(l);o.payload=a,s!=null&&(o.callback=s),a=us(t,o,l),a!==null&&(Qt(a,t,l),un(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=aa(),o=ds(l);o.tag=1,o.payload=a,s!=null&&(o.callback=s),a=us(t,o,l),a!==null&&(Qt(a,t,l),un(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=aa(),l=ds(s);l.tag=2,a!=null&&(l.callback=a),a=us(t,l,s),a!==null&&(Qt(a,t,s),un(a,t,s))}};function Fm(t,a,s,l,o,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):a.prototype&&a.prototype.isPureReactComponent?!an(s,l)||!an(o,d):!0}function $m(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&sc.enqueueReplaceState(a,a.state,null)}function $s(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=g({},s));for(var o in t)s[o]===void 0&&(s[o]=t[o])}return s}function Ym(t){fr(t)}function Qm(t){console.error(t)}function Vm(t){fr(t)}function Br(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Pm(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function lc(t,a,s){return s=ds(s),s.tag=3,s.payload={element:null},s.callback=function(){Br(t,a)},s}function Xm(t){return t=ds(t),t.tag=3,t}function Zm(t,a,s,l){var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var d=l.value;t.payload=function(){return o(d)},t.callback=function(){Pm(a,s,l)}}var v=s.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Pm(a,s,l),typeof o!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function $f(t,a,s,l,o){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&pl(a,s,o,!0),s=Jt.current,s!==null){switch(s.tag){case 31:case 13:return ma===null?Ir():s.alternate===null&&it===0&&(it=3),s.flags&=-257,s.flags|=65536,s.lanes=o,l===_r?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),Ac(t,l,o)),!1;case 22:return s.flags|=65536,l===_r?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),Ac(t,l,o)),!1}throw Error(i(435,s.tag))}return Ac(t,l,o),Ir(),!1}if(He)return a=Jt.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=o,l!==wo&&(t=Error(i(422),{cause:l}),nn(oa(t,s)))):(l!==wo&&(a=Error(i(423),{cause:l}),nn(oa(a,s))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,l=oa(l,s),o=lc(t.stateNode,l,o),Oo(t,o),it!==4&&(it=2)),!1;var d=Error(i(520),{cause:l});if(d=oa(d,s),Sn===null?Sn=[d]:Sn.push(d),it!==4&&(it=2),a===null)return!0;l=oa(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=o&-o,s.lanes|=t,t=lc(s.stateNode,l,t),Oo(s,t),!1;case 1:if(a=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(gs===null||!gs.has(d))))return s.flags|=65536,o&=-o,s.lanes|=o,o=Xm(o),Zm(o,t,s,l),Oo(s,o),!1}s=s.return}while(s!==null);return!1}var nc=Error(i(461)),ht=!1;function kt(t,a,s,l){a.child=t===null?Wu(a,null,s,l):Gs(a,t.child,s,l)}function Km(t,a,s,l,o){s=s.render;var d=a.ref;if("ref"in l){var v={};for(var C in l)C!=="ref"&&(v[C]=l[C])}else v=l;return Us(a),l=Ho(t,a,s,v,d,o),C=Go(),t!==null&&!ht?(Fo(t,a,o),Fa(t,a,o)):(He&&C&&jo(a),a.flags|=1,kt(t,a,l,o),a.child)}function Im(t,a,s,l,o){if(t===null){var d=s.type;return typeof d=="function"&&!bo(d)&&d.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=d,Jm(t,a,d,l,o)):(t=vr(s.type,null,l,a,a.mode,o),t.ref=a.ref,t.return=a,a.child=t)}if(d=t.child,!xc(t,o)){var v=d.memoizedProps;if(s=s.compare,s=s!==null?s:an,s(v,l)&&t.ref===a.ref)return Fa(t,a,o)}return a.flags|=1,t=La(d,l),t.ref=a.ref,t.return=a,a.child=t}function Jm(t,a,s,l,o){if(t!==null){var d=t.memoizedProps;if(an(d,l)&&t.ref===a.ref)if(ht=!1,a.pendingProps=l=d,xc(t,o))(t.flags&131072)!==0&&(ht=!0);else return a.lanes=t.lanes,Fa(t,a,o)}return rc(t,a,s,l,o)}function Wm(t,a,s,l){var o=l.children,d=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,t!==null){for(l=a.child=t.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~d}else l=0,a.child=null;return ex(t,a,d,s,l)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&kr(a,d!==null?d.cachePool:null),d!==null?am(a,d):Lo(),sm(a);else return l=a.lanes=536870912,ex(t,a,d!==null?d.baseLanes|s:s,s,l)}else d!==null?(kr(a,d.cachePool),am(a,d),xs(),a.memoizedState=null):(t!==null&&kr(a,null),Lo(),xs());return kt(t,a,o,s),a.child}function bn(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ex(t,a,s,l,o){var d=To();return d=d===null?null:{parent:mt._currentValue,pool:d},a.memoizedState={baseLanes:s,cachePool:d},t!==null&&kr(a,null),Lo(),sm(a),t!==null&&pl(t,a,l,!0),a.childLanes=o,null}function Hr(t,a){return a=Fr({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function tx(t,a,s){return Gs(a,t.child,null,s),t=Hr(a,a.pendingProps),t.flags|=2,Wt(a),a.memoizedState=null,t}function Yf(t,a,s){var l=a.pendingProps,o=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(He){if(l.mode==="hidden")return t=Hr(a,l),a.lanes=536870912,bn(null,t);if(qo(a),(t=at)?(t=xh(t,ua),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ns!==null?{id:Sa,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},s=qu(t),s.return=a,a.child=s,Nt=a,at=null)):t=null,t===null)throw is(a);return a.lanes=536870912,null}return Hr(a,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(qo(a),o)if(a.flags&256)a.flags&=-257,a=tx(t,a,s);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(ht||pl(t,a,s,!1),o=(s&t.childLanes)!==0,ht||o){if(l=tt,l!==null&&(v=Qd(l,s),v!==0&&v!==d.retryLane))throw d.retryLane=v,Ms(t,v),Qt(l,t,v),nc;Ir(),a=tx(t,a,s)}else t=d.treeContext,at=xa(v.nextSibling),Nt=a,He=!0,rs=null,ua=!1,t!==null&&Gu(a,t),a=Hr(a,l),a.flags|=4096;return a}return t=La(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Gr(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function rc(t,a,s,l,o){return Us(a),s=Ho(t,a,s,l,void 0,o),l=Go(),t!==null&&!ht?(Fo(t,a,o),Fa(t,a,o)):(He&&l&&jo(a),a.flags|=1,kt(t,a,s,o),a.child)}function ax(t,a,s,l,o,d){return Us(a),a.updateQueue=null,s=nm(a,l,s,o),lm(t),l=Go(),t!==null&&!ht?(Fo(t,a,d),Fa(t,a,d)):(He&&l&&jo(a),a.flags|=1,kt(t,a,s,d),a.child)}function sx(t,a,s,l,o){if(Us(a),a.stateNode===null){var d=ul,v=s.contextType;typeof v=="object"&&v!==null&&(d=wt(v)),d=new s(l,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sc,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=l,d.state=a.memoizedState,d.refs={},Ro(a),v=s.contextType,d.context=typeof v=="object"&&v!==null?wt(v):ul,d.state=a.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(ac(a,s,v,l),d.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&sc.enqueueReplaceState(d,d.state,null),xn(a,l,d,o),mn(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){d=a.stateNode;var C=a.memoizedProps,L=$s(s,C);d.props=L;var K=d.context,ne=s.contextType;v=ul,typeof ne=="object"&&ne!==null&&(v=wt(ne));var ce=s.getDerivedStateFromProps;ne=typeof ce=="function"||typeof d.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,ne||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(C||K!==v)&&$m(a,d,l,v),cs=!1;var J=a.memoizedState;d.state=J,xn(a,l,d,o),mn(),K=a.memoizedState,C||J!==K||cs?(typeof ce=="function"&&(ac(a,s,ce,l),K=a.memoizedState),(L=cs||Fm(a,s,L,l,J,K,v))?(ne||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=K),d.props=l,d.state=K,d.context=v,l=L):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{d=a.stateNode,Mo(t,a),v=a.memoizedProps,ne=$s(s,v),d.props=ne,ce=a.pendingProps,J=d.context,K=s.contextType,L=ul,typeof K=="object"&&K!==null&&(L=wt(K)),C=s.getDerivedStateFromProps,(K=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==ce||J!==L)&&$m(a,d,l,L),cs=!1,J=a.memoizedState,d.state=J,xn(a,l,d,o),mn();var ae=a.memoizedState;v!==ce||J!==ae||cs||t!==null&&t.dependencies!==null&&Nr(t.dependencies)?(typeof C=="function"&&(ac(a,s,C,l),ae=a.memoizedState),(ne=cs||Fm(a,s,ne,l,J,ae,L)||t!==null&&t.dependencies!==null&&Nr(t.dependencies))?(K||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ae,L),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ae,L)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=ae),d.props=l,d.state=ae,d.context=L,l=ne):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),l=!1)}return d=l,Gr(t,a),l=(a.flags&128)!==0,d||l?(d=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,t!==null&&l?(a.child=Gs(a,t.child,null,o),a.child=Gs(a,null,s,o)):kt(t,a,s,o),a.memoizedState=d.state,t=a.child):t=Fa(t,a,o),t}function lx(t,a,s,l){return zs(),a.flags|=256,kt(t,a,s,l),a.child}var ic={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oc(t){return{baseLanes:t,cachePool:Pu()}}function cc(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=ta),t}function nx(t,a,s){var l=a.pendingProps,o=!1,d=(a.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(dt.current&2)!==0),v&&(o=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(He){if(o?ms(a):xs(),(t=at)?(t=xh(t,ua),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ns!==null?{id:Sa,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},s=qu(t),s.return=a,a.child=s,Nt=a,at=null)):t=null,t===null)throw is(a);return Qc(t)?a.lanes=32:a.lanes=536870912,null}var C=l.children;return l=l.fallback,o?(xs(),o=a.mode,C=Fr({mode:"hidden",children:C},o),l=Os(l,o,s,null),C.return=a,l.return=a,C.sibling=l,a.child=C,l=a.child,l.memoizedState=oc(s),l.childLanes=cc(t,v,s),a.memoizedState=ic,bn(null,l)):(ms(a),dc(a,C))}var L=t.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(d)a.flags&256?(ms(a),a.flags&=-257,a=uc(t,a,s)):a.memoizedState!==null?(xs(),a.child=t.child,a.flags|=128,a=null):(xs(),C=l.fallback,o=a.mode,l=Fr({mode:"visible",children:l.children},o),C=Os(C,o,s,null),C.flags|=2,l.return=a,C.return=a,l.sibling=C,a.child=l,Gs(a,t.child,null,s),l=a.child,l.memoizedState=oc(s),l.childLanes=cc(t,v,s),a.memoizedState=ic,a=bn(null,l));else if(ms(a),Qc(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var K=v.dgst;v=K,l=Error(i(419)),l.stack="",l.digest=v,nn({value:l,source:null,stack:null}),a=uc(t,a,s)}else if(ht||pl(t,a,s,!1),v=(s&t.childLanes)!==0,ht||v){if(v=tt,v!==null&&(l=Qd(v,s),l!==0&&l!==L.retryLane))throw L.retryLane=l,Ms(t,l),Qt(v,t,l),nc;Yc(C)||Ir(),a=uc(t,a,s)}else Yc(C)?(a.flags|=192,a.child=t.child,a=null):(t=L.treeContext,at=xa(C.nextSibling),Nt=a,He=!0,rs=null,ua=!1,t!==null&&Gu(a,t),a=dc(a,l.children),a.flags|=4096);return a}return o?(xs(),C=l.fallback,o=a.mode,L=t.child,K=L.sibling,l=La(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,K!==null?C=La(K,C):(C=Os(C,o,s,null),C.flags|=2),C.return=a,l.return=a,l.sibling=C,a.child=l,bn(null,l),l=a.child,C=t.child.memoizedState,C===null?C=oc(s):(o=C.cachePool,o!==null?(L=mt._currentValue,o=o.parent!==L?{parent:L,pool:L}:o):o=Pu(),C={baseLanes:C.baseLanes|s,cachePool:o}),l.memoizedState=C,l.childLanes=cc(t,v,s),a.memoizedState=ic,bn(t.child,l)):(ms(a),s=t.child,t=s.sibling,s=La(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=s,a.memoizedState=null,s)}function dc(t,a){return a=Fr({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Fr(t,a){return t=It(22,t,null,a),t.lanes=0,t}function uc(t,a,s){return Gs(a,t.child,null,s),t=dc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function rx(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),_o(t.return,a,s)}function mc(t,a,s,l,o,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:o,treeForkCount:d}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=s,v.tailMode=o,v.treeForkCount=d)}function ix(t,a,s){var l=a.pendingProps,o=l.revealOrder,d=l.tail;l=l.children;var v=dt.current,C=(v&2)!==0;if(C?(v=v&1|2,a.flags|=128):v&=1,G(dt,v),kt(t,a,l,s),l=He?ln:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rx(t,s,a);else if(t.tag===19)rx(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(s=a.child,o=null;s!==null;)t=s.alternate,t!==null&&Tr(t)===null&&(o=s),s=s.sibling;s=o,s===null?(o=a.child,a.child=null):(o=s.sibling,s.sibling=null),mc(a,!1,o,s,d,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,o=a.child,a.child=null;o!==null;){if(t=o.alternate,t!==null&&Tr(t)===null){a.child=o;break}t=o.sibling,o.sibling=s,s=o,o=t}mc(a,!0,s,null,d,l);break;case"together":mc(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Fa(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),fs|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(pl(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,s=La(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=La(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function xc(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Nr(t)))}function Qf(t,a,s){switch(a.tag){case 3:Oe(a,a.stateNode.containerInfo),os(a,mt,t.memoizedState.cache),zs();break;case 27:case 5:ge(a);break;case 4:Oe(a,a.stateNode.containerInfo);break;case 10:os(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,qo(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ms(a),a.flags|=128,null):(s&a.child.childLanes)!==0?nx(t,a,s):(ms(a),t=Fa(t,a,s),t!==null?t.sibling:null);ms(a);break;case 19:var o=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(pl(t,a,s,!1),l=(s&a.childLanes)!==0),o){if(l)return ix(t,a,s);a.flags|=128}if(o=a.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(dt,dt.current),l)break;return null;case 22:return a.lanes=0,Wm(t,a,s,a.pendingProps);case 24:os(a,mt,t.memoizedState.cache)}return Fa(t,a,s)}function ox(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)ht=!0;else{if(!xc(t,s)&&(a.flags&128)===0)return ht=!1,Qf(t,a,s);ht=(t.flags&131072)!==0}else ht=!1,He&&(a.flags&1048576)!==0&&Hu(a,ln,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=Bs(a.elementType),a.type=t,typeof t=="function")bo(t)?(l=$s(t,l),a.tag=1,a=sx(null,a,t,l,s)):(a.tag=0,a=rc(null,a,t,l,s));else{if(t!=null){var o=t.$$typeof;if(o===z){a.tag=11,a=Km(null,a,t,l,s);break e}else if(o===I){a.tag=14,a=Im(null,a,t,l,s);break e}}throw a=xe(t)||t,Error(i(306,a,""))}}return a;case 0:return rc(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,o=$s(l,a.pendingProps),sx(t,a,l,o,s);case 3:e:{if(Oe(a,a.stateNode.containerInfo),t===null)throw Error(i(387));l=a.pendingProps;var d=a.memoizedState;o=d.element,Mo(t,a),xn(a,l,null,s);var v=a.memoizedState;if(l=v.cache,os(a,mt,l),l!==d.cache&&Co(a,[mt],s,!0),mn(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=lx(t,a,l,s);break e}else if(l!==o){o=oa(Error(i(424)),a),nn(o),a=lx(t,a,l,s);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,at=xa(t.firstChild),Nt=a,He=!0,rs=null,ua=!0,s=Wu(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(zs(),l===o){a=Fa(t,a,s);break e}kt(t,a,l,s)}a=a.child}return a;case 26:return Gr(t,a),t===null?(s=yh(a.type,null,a.pendingProps,null))?a.memoizedState=s:He||(s=a.type,t=a.pendingProps,l=li(pe.current).createElement(s),l[jt]=a,l[Bt]=t,St(l,s,t),bt(l),a.stateNode=l):a.memoizedState=yh(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return ge(a),t===null&&He&&(l=a.stateNode=fh(a.type,a.pendingProps,pe.current),Nt=a,ua=!0,o=at,js(a.type)?(Vc=o,at=xa(l.firstChild)):at=o),kt(t,a,a.pendingProps.children,s),Gr(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&He&&((o=l=at)&&(l=jg(l,a.type,a.pendingProps,ua),l!==null?(a.stateNode=l,Nt=a,at=xa(l.firstChild),ua=!1,o=!0):o=!1),o||is(a)),ge(a),o=a.type,d=a.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Gc(o,d)?l=null:v!==null&&Gc(o,v)&&(a.flags|=32),a.memoizedState!==null&&(o=Ho(t,a,Lf,null,null,s),Mn._currentValue=o),Gr(t,a),kt(t,a,l,s),a.child;case 6:return t===null&&He&&((t=s=at)&&(s=Ng(s,a.pendingProps,ua),s!==null?(a.stateNode=s,Nt=a,at=null,t=!0):t=!1),t||is(a)),null;case 13:return nx(t,a,s);case 4:return Oe(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Gs(a,null,l,s):kt(t,a,l,s),a.child;case 11:return Km(t,a,a.type,a.pendingProps,s);case 7:return kt(t,a,a.pendingProps,s),a.child;case 8:return kt(t,a,a.pendingProps.children,s),a.child;case 12:return kt(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,os(a,a.type,l.value),kt(t,a,l.children,s),a.child;case 9:return o=a.type._context,l=a.pendingProps.children,Us(a),o=wt(o),l=l(o),a.flags|=1,kt(t,a,l,s),a.child;case 14:return Im(t,a,a.type,a.pendingProps,s);case 15:return Jm(t,a,a.type,a.pendingProps,s);case 19:return ix(t,a,s);case 31:return Yf(t,a,s);case 22:return Wm(t,a,s,a.pendingProps);case 24:return Us(a),l=wt(mt),t===null?(o=To(),o===null&&(o=tt,d=Eo(),o.pooledCache=d,d.refCount++,d!==null&&(o.pooledCacheLanes|=s),o=d),a.memoizedState={parent:l,cache:o},Ro(a),os(a,mt,o)):((t.lanes&s)!==0&&(Mo(t,a),xn(a,null,null,s),mn()),o=t.memoizedState,d=a.memoizedState,o.parent!==l?(o={parent:l,cache:l},a.memoizedState=o,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=o),os(a,mt,l)):(l=d.cache,os(a,mt,l),l!==o.cache&&Co(a,[mt],s,!0))),kt(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function $a(t){t.flags|=4}function hc(t,a,s,l,o){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(zx())t.flags|=8192;else throw Hs=_r,Do}else t.flags&=-16777217}function cx(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!kh(a))if(zx())t.flags|=8192;else throw Hs=_r,Do}function $r(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Fd():536870912,t.lanes|=a,Cl|=a)}function yn(t,a){if(!He)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function st(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var o=t.child;o!==null;)s|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)s|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function Vf(t,a,s){var l=a.pendingProps;switch(No(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(a),null;case 1:return st(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ba(mt),H(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(hl(a)?$a(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ko())),st(a),null;case 26:var o=a.type,d=a.memoizedState;return t===null?($a(a),d!==null?(st(a),cx(a,d)):(st(a),hc(a,o,null,l,s))):d?d!==t.memoizedState?($a(a),st(a),cx(a,d)):(st(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&$a(a),st(a),hc(a,o,t,l,s)),null;case 27:if(ke(a),s=pe.current,o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&$a(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return st(a),null}t=F.current,hl(a)?Fu(a):(t=fh(o,l,s),a.stateNode=t,$a(a))}return st(a),null;case 5:if(ke(a),o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&$a(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return st(a),null}if(d=F.current,hl(a))Fu(a);else{var v=li(pe.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(o,{is:l.is}):v.createElement(o)}}d[jt]=a,d[Bt]=l;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=d;e:switch(St(d,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$a(a)}}return st(a),hc(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,s),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&$a(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(i(166));if(t=pe.current,hl(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,o=Nt,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}t[jt]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||nh(t.nodeValue,s)),t||is(a,!0)}else t=li(t).createTextNode(l),t[jt]=a,a.stateNode=t}return st(a),null;case 31:if(s=a.memoizedState,t===null||t.memoizedState!==null){if(l=hl(a),s!==null){if(t===null){if(!l)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[jt]=a}else zs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;st(a),t=!1}else s=ko(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return a.flags&256?(Wt(a),a):(Wt(a),null);if((a.flags&128)!==0)throw Error(i(558))}return st(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=hl(a),l!==null&&l.dehydrated!==null){if(t===null){if(!o)throw Error(i(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[jt]=a}else zs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;st(a),o=!1}else o=ko(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return a.flags&256?(Wt(a),a):(Wt(a),null)}return Wt(a),(a.flags&128)!==0?(a.lanes=s,a):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=a.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==o&&(l.flags|=2048)),s!==t&&s&&(a.child.flags|=8192),$r(a,a.updateQueue),st(a),null);case 4:return H(),t===null&&Lc(a.stateNode.containerInfo),st(a),null;case 10:return Ba(a.type),st(a),null;case 19:if(Y(dt),l=a.memoizedState,l===null)return st(a),null;if(o=(a.flags&128)!==0,d=l.rendering,d===null)if(o)yn(l,!1);else{if(it!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(d=Tr(t),d!==null){for(a.flags|=128,yn(l,!1),t=d.updateQueue,a.updateQueue=t,$r(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)Uu(s,t),s=s.sibling;return G(dt,dt.current&1|2),He&&Ua(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&Ot()>Xr&&(a.flags|=128,o=!0,yn(l,!1),a.lanes=4194304)}else{if(!o)if(t=Tr(d),t!==null){if(a.flags|=128,o=!0,t=t.updateQueue,a.updateQueue=t,$r(a,t),yn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!He)return st(a),null}else 2*Ot()-l.renderingStartTime>Xr&&s!==536870912&&(a.flags|=128,o=!0,yn(l,!1),a.lanes=4194304);l.isBackwards?(d.sibling=a.child,a.child=d):(t=l.last,t!==null?t.sibling=d:a.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ot(),t.sibling=null,s=dt.current,G(dt,o?s&1|2:s&1),He&&Ua(a,l.treeForkCount),t):(st(a),null);case 22:case 23:return Wt(a),Uo(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(st(a),a.subtreeFlags&6&&(a.flags|=8192)):st(a),s=a.updateQueue,s!==null&&$r(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&Y(qs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Ba(mt),st(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Pf(t,a){switch(No(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ba(mt),H(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return ke(a),null;case 31:if(a.memoizedState!==null){if(Wt(a),a.alternate===null)throw Error(i(340));zs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Wt(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));zs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return Y(dt),null;case 4:return H(),null;case 10:return Ba(a.type),null;case 22:case 23:return Wt(a),Uo(),t!==null&&Y(qs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ba(mt),null;case 25:return null;default:return null}}function dx(t,a){switch(No(a),a.tag){case 3:Ba(mt),H();break;case 26:case 27:case 5:ke(a);break;case 4:H();break;case 31:a.memoizedState!==null&&Wt(a);break;case 13:Wt(a);break;case 19:Y(dt);break;case 10:Ba(a.type);break;case 22:case 23:Wt(a),Uo(),t!==null&&Y(qs);break;case 24:Ba(mt)}}function vn(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var o=l.next;s=o;do{if((s.tag&t)===t){l=void 0;var d=s.create,v=s.inst;l=d(),v.destroy=l}s=s.next}while(s!==o)}}catch(C){Ke(a,a.return,C)}}function hs(t,a,s){try{var l=a.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var d=o.next;l=d;do{if((l.tag&t)===t){var v=l.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,o=a;var L=s,K=C;try{K()}catch(ne){Ke(o,L,ne)}}}l=l.next}while(l!==d)}}catch(ne){Ke(a,a.return,ne)}}function ux(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{tm(a,s)}catch(l){Ke(t,t.return,l)}}}function mx(t,a,s){s.props=$s(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Ke(t,a,l)}}function jn(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(o){Ke(t,a,o)}}function Ca(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(o){Ke(t,a,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(o){Ke(t,a,o)}else s.current=null}function xx(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(o){Ke(t,t.return,o)}}function pc(t,a,s){try{var l=t.stateNode;pg(l,t.type,s,a),l[Bt]=a}catch(o){Ke(t,t.return,o)}}function hx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&js(t.type)||t.tag===4}function fc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Oa));else if(l!==4&&(l===27&&js(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(gc(t,a,s),t=t.sibling;t!==null;)gc(t,a,s),t=t.sibling}function Yr(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&js(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Yr(t,a,s),t=t.sibling;t!==null;)Yr(t,a,s),t=t.sibling}function px(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,o=a.attributes;o.length;)a.removeAttributeNode(o[0]);St(a,l,s),a[jt]=t,a[Bt]=s}catch(d){Ke(t,t.return,d)}}var Ya=!1,pt=!1,bc=!1,fx=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Xf(t,a){if(t=t.containerInfo,Bc=ui,t=Eu(t),uo(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var o=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var v=0,C=-1,L=-1,K=0,ne=0,ce=t,J=null;t:for(;;){for(var ae;ce!==s||o!==0&&ce.nodeType!==3||(C=v+o),ce!==d||l!==0&&ce.nodeType!==3||(L=v+l),ce.nodeType===3&&(v+=ce.nodeValue.length),(ae=ce.firstChild)!==null;)J=ce,ce=ae;for(;;){if(ce===t)break t;if(J===s&&++K===o&&(C=v),J===d&&++ne===l&&(L=v),(ae=ce.nextSibling)!==null)break;ce=J,J=ce.parentNode}ce=ae}s=C===-1||L===-1?null:{start:C,end:L}}else s=null}s=s||{start:0,end:0}}else s=null;for(Hc={focusedElem:t,selectionRange:s},ui=!1,yt=a;yt!==null;)if(a=yt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,yt=t;else for(;yt!==null;){switch(a=yt,d=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)o=t[s],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,s=a,o=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var je=$s(s.type,o);t=l.getSnapshotBeforeUpdate(je,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){Ke(s,s.return,Se)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)$c(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$c(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,yt=t;break}yt=a.return}}function gx(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Va(t,s),l&4&&vn(5,s);break;case 1:if(Va(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(v){Ke(s,s.return,v)}else{var o=$s(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(o,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ke(s,s.return,v)}}l&64&&ux(s),l&512&&jn(s,s.return);break;case 3:if(Va(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{tm(t,a)}catch(v){Ke(s,s.return,v)}}break;case 27:a===null&&l&4&&px(s);case 26:case 5:Va(t,s),a===null&&l&4&&xx(s),l&512&&jn(s,s.return);break;case 12:Va(t,s);break;case 31:Va(t,s),l&4&&vx(t,s);break;case 13:Va(t,s),l&4&&jx(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=sg.bind(null,s),wg(t,s))));break;case 22:if(l=s.memoizedState!==null||Ya,!l){a=a!==null&&a.memoizedState!==null||pt,o=Ya;var d=pt;Ya=l,(pt=a)&&!d?Pa(t,s,(s.subtreeFlags&8772)!==0):Va(t,s),Ya=o,pt=d}break;case 30:break;default:Va(t,s)}}function bx(t){var a=t.alternate;a!==null&&(t.alternate=null,bx(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Pi(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,Gt=!1;function Qa(t,a,s){for(s=s.child;s!==null;)yx(t,a,s),s=s.sibling}function yx(t,a,s){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(as,s)}catch{}switch(s.tag){case 26:pt||Ca(s,a),Qa(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:pt||Ca(s,a);var l=lt,o=Gt;js(s.type)&&(lt=s.stateNode,Gt=!1),Qa(t,a,s),Tn(s.stateNode),lt=l,Gt=o;break;case 5:pt||Ca(s,a);case 6:if(l=lt,o=Gt,lt=null,Qa(t,a,s),lt=l,Gt=o,lt!==null)if(Gt)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(s.stateNode)}catch(d){Ke(s,a,d)}else try{lt.removeChild(s.stateNode)}catch(d){Ke(s,a,d)}break;case 18:lt!==null&&(Gt?(t=lt,uh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),zl(t)):uh(lt,s.stateNode));break;case 4:l=lt,o=Gt,lt=s.stateNode.containerInfo,Gt=!0,Qa(t,a,s),lt=l,Gt=o;break;case 0:case 11:case 14:case 15:hs(2,s,a),pt||hs(4,s,a),Qa(t,a,s);break;case 1:pt||(Ca(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&mx(s,a,l)),Qa(t,a,s);break;case 21:Qa(t,a,s);break;case 22:pt=(l=pt)||s.memoizedState!==null,Qa(t,a,s),pt=l;break;default:Qa(t,a,s)}}function vx(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{zl(t)}catch(s){Ke(a,a.return,s)}}}function jx(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zl(t)}catch(s){Ke(a,a.return,s)}}function Zf(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new fx),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new fx),a;default:throw Error(i(435,t.tag))}}function Qr(t,a){var s=Zf(t);a.forEach(function(l){if(!s.has(l)){s.add(l);var o=lg.bind(null,t,l);l.then(o,o)}})}function Ft(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var o=s[l],d=t,v=a,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(js(C.type)){lt=C.stateNode,Gt=!1;break e}break;case 5:lt=C.stateNode,Gt=!1;break e;case 3:case 4:lt=C.stateNode.containerInfo,Gt=!0;break e}C=C.return}if(lt===null)throw Error(i(160));yx(d,v,o),lt=null,Gt=!1,d=o.alternate,d!==null&&(d.return=null),o.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Nx(a,t),a=a.sibling}var ja=null;function Nx(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ft(a,t),$t(t),l&4&&(hs(3,t,t.return),vn(3,t),hs(5,t,t.return));break;case 1:Ft(a,t),$t(t),l&512&&(pt||s===null||Ca(s,s.return)),l&64&&Ya&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var o=ja;if(Ft(a,t),$t(t),l&512&&(pt||s===null||Ca(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":d=o.getElementsByTagName("title")[0],(!d||d[Pl]||d[jt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=o.createElement(l),o.head.insertBefore(d,o.querySelector("head > title"))),St(d,l,s),d[jt]=t,bt(d),l=d;break e;case"link":var v=Nh("link","href",o).get(l+(s.href||""));if(v){for(var C=0;C<v.length;C++)if(d=v[C],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){v.splice(C,1);break t}}d=o.createElement(l),St(d,l,s),o.head.appendChild(d);break;case"meta":if(v=Nh("meta","content",o).get(l+(s.content||""))){for(C=0;C<v.length;C++)if(d=v[C],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){v.splice(C,1);break t}}d=o.createElement(l),St(d,l,s),o.head.appendChild(d);break;default:throw Error(i(468,l))}d[jt]=t,bt(d),l=d}t.stateNode=l}else wh(o,t.type,t.stateNode);else t.stateNode=jh(o,l,t.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?wh(o,t.type,t.stateNode):jh(o,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pc(t,t.memoizedProps,s.memoizedProps)}break;case 27:Ft(a,t),$t(t),l&512&&(pt||s===null||Ca(s,s.return)),s!==null&&l&4&&pc(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Ft(a,t),$t(t),l&512&&(pt||s===null||Ca(s,s.return)),t.flags&32){o=t.stateNode;try{ll(o,"")}catch(je){Ke(t,t.return,je)}}l&4&&t.stateNode!=null&&(o=t.memoizedProps,pc(t,o,s!==null?s.memoizedProps:o)),l&1024&&(bc=!0);break;case 6:if(Ft(a,t),$t(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(je){Ke(t,t.return,je)}}break;case 3:if(ii=null,o=ja,ja=ni(a.containerInfo),Ft(a,t),ja=o,$t(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{zl(a.containerInfo)}catch(je){Ke(t,t.return,je)}bc&&(bc=!1,wx(t));break;case 4:l=ja,ja=ni(t.stateNode.containerInfo),Ft(a,t),$t(t),ja=l;break;case 12:Ft(a,t),$t(t);break;case 31:Ft(a,t),$t(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Qr(t,l)));break;case 13:Ft(a,t),$t(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Pr=Ot()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Qr(t,l)));break;case 22:o=t.memoizedState!==null;var L=s!==null&&s.memoizedState!==null,K=Ya,ne=pt;if(Ya=K||o,pt=ne||L,Ft(a,t),pt=ne,Ya=K,$t(t),l&8192)e:for(a=t.stateNode,a._visibility=o?a._visibility&-2:a._visibility|1,o&&(s===null||L||Ya||pt||Ys(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){L=s=a;try{if(d=L.stateNode,o)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=L.stateNode;var ce=L.memoizedProps.style,J=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;C.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(je){Ke(L,L.return,je)}}}else if(a.tag===6){if(s===null){L=a;try{L.stateNode.nodeValue=o?"":L.memoizedProps}catch(je){Ke(L,L.return,je)}}}else if(a.tag===18){if(s===null){L=a;try{var ae=L.stateNode;o?mh(ae,!0):mh(L.stateNode,!1)}catch(je){Ke(L,L.return,je)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Qr(t,s))));break;case 19:Ft(a,t),$t(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Qr(t,l)));break;case 30:break;case 21:break;default:Ft(a,t),$t(t)}}function $t(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(hx(l)){s=l;break}l=l.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var o=s.stateNode,d=fc(t);Yr(t,d,o);break;case 5:var v=s.stateNode;s.flags&32&&(ll(v,""),s.flags&=-33);var C=fc(t);Yr(t,C,v);break;case 3:case 4:var L=s.stateNode.containerInfo,K=fc(t);gc(t,K,L);break;default:throw Error(i(161))}}catch(ne){Ke(t,t.return,ne)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function wx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;wx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Va(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)gx(t,a.alternate,a),a=a.sibling}function Ys(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:hs(4,a,a.return),Ys(a);break;case 1:Ca(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&mx(a,a.return,s),Ys(a);break;case 27:Tn(a.stateNode);case 26:case 5:Ca(a,a.return),Ys(a);break;case 22:a.memoizedState===null&&Ys(a);break;case 30:Ys(a);break;default:Ys(a)}t=t.sibling}}function Pa(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,o=t,d=a,v=d.flags;switch(d.tag){case 0:case 11:case 15:Pa(o,d,s),vn(4,d);break;case 1:if(Pa(o,d,s),l=d,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(K){Ke(l,l.return,K)}if(l=d,o=l.updateQueue,o!==null){var C=l.stateNode;try{var L=o.shared.hiddenCallbacks;if(L!==null)for(o.shared.hiddenCallbacks=null,o=0;o<L.length;o++)em(L[o],C)}catch(K){Ke(l,l.return,K)}}s&&v&64&&ux(d),jn(d,d.return);break;case 27:px(d);case 26:case 5:Pa(o,d,s),s&&l===null&&v&4&&xx(d),jn(d,d.return);break;case 12:Pa(o,d,s);break;case 31:Pa(o,d,s),s&&v&4&&vx(o,d);break;case 13:Pa(o,d,s),s&&v&4&&jx(o,d);break;case 22:d.memoizedState===null&&Pa(o,d,s),jn(d,d.return);break;case 30:break;default:Pa(o,d,s)}a=a.sibling}}function yc(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&rn(s))}function vc(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&rn(t))}function Na(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)kx(t,a,s,l),a=a.sibling}function kx(t,a,s,l){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Na(t,a,s,l),o&2048&&vn(9,a);break;case 1:Na(t,a,s,l);break;case 3:Na(t,a,s,l),o&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&rn(t)));break;case 12:if(o&2048){Na(t,a,s,l),t=a.stateNode;try{var d=a.memoizedProps,v=d.id,C=d.onPostCommit;typeof C=="function"&&C(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){Ke(a,a.return,L)}}else Na(t,a,s,l);break;case 31:Na(t,a,s,l);break;case 13:Na(t,a,s,l);break;case 23:break;case 22:d=a.stateNode,v=a.alternate,a.memoizedState!==null?d._visibility&2?Na(t,a,s,l):Nn(t,a):d._visibility&2?Na(t,a,s,l):(d._visibility|=2,kl(t,a,s,l,(a.subtreeFlags&10256)!==0||!1)),o&2048&&yc(v,a);break;case 24:Na(t,a,s,l),o&2048&&vc(a.alternate,a);break;default:Na(t,a,s,l)}}function kl(t,a,s,l,o){for(o=o&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var d=t,v=a,C=s,L=l,K=v.flags;switch(v.tag){case 0:case 11:case 15:kl(d,v,C,L,o),vn(8,v);break;case 23:break;case 22:var ne=v.stateNode;v.memoizedState!==null?ne._visibility&2?kl(d,v,C,L,o):Nn(d,v):(ne._visibility|=2,kl(d,v,C,L,o)),o&&K&2048&&yc(v.alternate,v);break;case 24:kl(d,v,C,L,o),o&&K&2048&&vc(v.alternate,v);break;default:kl(d,v,C,L,o)}a=a.sibling}}function Nn(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,o=l.flags;switch(l.tag){case 22:Nn(s,l),o&2048&&yc(l.alternate,l);break;case 24:Nn(s,l),o&2048&&vc(l.alternate,l);break;default:Nn(s,l)}a=a.sibling}}var wn=8192;function Sl(t,a,s){if(t.subtreeFlags&wn)for(t=t.child;t!==null;)Sx(t,a,s),t=t.sibling}function Sx(t,a,s){switch(t.tag){case 26:Sl(t,a,s),t.flags&wn&&t.memoizedState!==null&&zg(s,ja,t.memoizedState,t.memoizedProps);break;case 5:Sl(t,a,s);break;case 3:case 4:var l=ja;ja=ni(t.stateNode.containerInfo),Sl(t,a,s),ja=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=wn,wn=16777216,Sl(t,a,s),wn=l):Sl(t,a,s));break;default:Sl(t,a,s)}}function _x(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function kn(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];yt=l,Ex(l,t)}_x(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cx(t),t=t.sibling}function Cx(t){switch(t.tag){case 0:case 11:case 15:kn(t),t.flags&2048&&hs(9,t,t.return);break;case 3:kn(t);break;case 12:kn(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Vr(t)):kn(t);break;default:kn(t)}}function Vr(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];yt=l,Ex(l,t)}_x(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:hs(8,a,a.return),Vr(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Vr(a));break;default:Vr(a)}t=t.sibling}}function Ex(t,a){for(;yt!==null;){var s=yt;switch(s.tag){case 0:case 11:case 15:hs(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:rn(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,yt=l;else e:for(s=t;yt!==null;){l=yt;var o=l.sibling,d=l.return;if(bx(l),l===s){yt=null;break e}if(o!==null){o.return=d,yt=o;break e}yt=d}}}var Kf={getCacheForType:function(t){var a=wt(mt),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s},cacheSignal:function(){return wt(mt).controller.signal}},If=typeof WeakMap=="function"?WeakMap:Map,Qe=0,tt=null,ze=null,Ue=0,Ze=0,ea=null,ps=!1,_l=!1,jc=!1,Xa=0,it=0,fs=0,Qs=0,Nc=0,ta=0,Cl=0,Sn=null,Yt=null,wc=!1,Pr=0,Ax=0,Xr=1/0,Zr=null,gs=null,ft=0,bs=null,El=null,Za=0,kc=0,Sc=null,Tx=null,_n=0,_c=null;function aa(){return(Qe&2)!==0&&Ue!==0?Ue&-Ue:O.T!==null?Rc():Vd()}function Dx(){if(ta===0)if((Ue&536870912)===0||He){var t=sr;sr<<=1,(sr&3932160)===0&&(sr=262144),ta=t}else ta=536870912;return t=Jt.current,t!==null&&(t.flags|=32),ta}function Qt(t,a,s){(t===tt&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(Al(t,0),ys(t,Ue,ta,!1)),Vl(t,s),((Qe&2)===0||t!==tt)&&(t===tt&&((Qe&2)===0&&(Qs|=s),it===4&&ys(t,Ue,ta,!1)),Ea(t))}function Rx(t,a,s){if((Qe&6)!==0)throw Error(i(327));var l=!s&&(a&127)===0&&(a&t.expiredLanes)===0||Ql(t,a),o=l?eg(t,a):Ec(t,a,!0),d=l;do{if(o===0){_l&&!l&&ys(t,a,0,!1);break}else{if(s=t.current.alternate,d&&!Jf(s)){o=Ec(t,a,!1),d=!1;continue}if(o===2){if(d=a,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var C=t;o=Sn;var L=C.current.memoizedState.isDehydrated;if(L&&(Al(C,v).flags|=256),v=Ec(C,v,!1),v!==2){if(jc&&!L){C.errorRecoveryDisabledLanes|=d,Qs|=d,o=4;break e}d=Yt,Yt=o,d!==null&&(Yt===null?Yt=d:Yt.push.apply(Yt,d))}o=v}if(d=!1,o!==2)continue}}if(o===1){Al(t,0),ys(t,a,0,!0);break}e:{switch(l=t,d=o,d){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:ys(l,a,ta,!ps);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(o=Pr+300-Ot(),10<o)){if(ys(l,a,ta,!ps),nr(l,0,!0)!==0)break e;Za=a,l.timeoutHandle=ch(Mx.bind(null,l,s,Yt,Zr,wc,a,ta,Qs,Cl,ps,d,"Throttled",-0,0),o);break e}Mx(l,s,Yt,Zr,wc,a,ta,Qs,Cl,ps,d,null,-0,0)}}break}while(!0);Ea(t)}function Mx(t,a,s,l,o,d,v,C,L,K,ne,ce,J,ae){if(t.timeoutHandle=-1,ce=a.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oa},Sx(a,d,ce);var je=(d&62914560)===d?Pr-Ot():(d&4194048)===d?Ax-Ot():0;if(je=Lg(ce,je),je!==null){Za=d,t.cancelPendingCommit=je(Gx.bind(null,t,a,d,s,l,o,v,C,L,ne,ce,null,J,ae)),ys(t,d,v,!K);return}}Gx(t,a,d,s,l,o,v,C,L)}function Jf(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var o=s[l],d=o.getSnapshot;o=o.value;try{if(!Kt(d(),o))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ys(t,a,s,l){a&=~Nc,a&=~Qs,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var o=a;0<o;){var d=31-Dt(o),v=1<<d;l[d]=-1,o&=~v}s!==0&&$d(t,s,a)}function Kr(){return(Qe&6)===0?(Cn(0),!1):!0}function Cc(){if(ze!==null){if(Ze===0)var t=ze.return;else t=ze,qa=Ls=null,$o(t),yl=null,cn=0,t=ze;for(;t!==null;)dx(t.alternate,t),t=t.return;ze=null}}function Al(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,bg(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Za=0,Cc(),tt=t,ze=s=La(t.current,null),Ue=a,Ze=0,ea=null,ps=!1,_l=Ql(t,a),jc=!1,Cl=ta=Nc=Qs=fs=it=0,Yt=Sn=null,wc=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var o=31-Dt(l),d=1<<o;a|=t[o],l&=~d}return Xa=a,gr(),s}function Ox(t,a){Te=null,O.H=gn,a===bl||a===Sr?(a=Ku(),Ze=3):a===Do?(a=Ku(),Ze=4):Ze=a===nc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ea=a,ze===null&&(it=1,Br(t,oa(a,t.current)))}function zx(){var t=Jt.current;return t===null?!0:(Ue&4194048)===Ue?ma===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?t===ma:!1}function Lx(){var t=O.H;return O.H=gn,t===null?gn:t}function Ux(){var t=O.A;return O.A=Kf,t}function Ir(){it=4,ps||(Ue&4194048)!==Ue&&Jt.current!==null||(_l=!0),(fs&134217727)===0&&(Qs&134217727)===0||tt===null||ys(tt,Ue,ta,!1)}function Ec(t,a,s){var l=Qe;Qe|=2;var o=Lx(),d=Ux();(tt!==t||Ue!==a)&&(Zr=null,Al(t,a)),a=!1;var v=it;e:do try{if(Ze!==0&&ze!==null){var C=ze,L=ea;switch(Ze){case 8:Cc(),v=6;break e;case 3:case 2:case 9:case 6:Jt.current===null&&(a=!0);var K=Ze;if(Ze=0,ea=null,Tl(t,C,L,K),s&&_l){v=0;break e}break;default:K=Ze,Ze=0,ea=null,Tl(t,C,L,K)}}Wf(),v=it;break}catch(ne){Ox(t,ne)}while(!0);return a&&t.shellSuspendCounter++,qa=Ls=null,Qe=l,O.H=o,O.A=d,ze===null&&(tt=null,Ue=0,gr()),v}function Wf(){for(;ze!==null;)qx(ze)}function eg(t,a){var s=Qe;Qe|=2;var l=Lx(),o=Ux();tt!==t||Ue!==a?(Zr=null,Xr=Ot()+500,Al(t,a)):_l=Ql(t,a);e:do try{if(Ze!==0&&ze!==null){a=ze;var d=ea;t:switch(Ze){case 1:Ze=0,ea=null,Tl(t,a,d,1);break;case 2:case 9:if(Xu(d)){Ze=0,ea=null,Bx(a);break}a=function(){Ze!==2&&Ze!==9||tt!==t||(Ze=7),Ea(t)},d.then(a,a);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Xu(d)?(Ze=0,ea=null,Bx(a)):(Ze=0,ea=null,Tl(t,a,d,7));break;case 5:var v=null;switch(ze.tag){case 26:v=ze.memoizedState;case 5:case 27:var C=ze;if(v?kh(v):C.stateNode.complete){Ze=0,ea=null;var L=C.sibling;if(L!==null)ze=L;else{var K=C.return;K!==null?(ze=K,Jr(K)):ze=null}break t}}Ze=0,ea=null,Tl(t,a,d,5);break;case 6:Ze=0,ea=null,Tl(t,a,d,6);break;case 8:Cc(),it=6;break e;default:throw Error(i(462))}}tg();break}catch(ne){Ox(t,ne)}while(!0);return qa=Ls=null,O.H=l,O.A=o,Qe=s,ze!==null?0:(tt=null,Ue=0,gr(),it)}function tg(){for(;ze!==null&&!At();)qx(ze)}function qx(t){var a=ox(t.alternate,t,Xa);t.memoizedProps=t.pendingProps,a===null?Jr(t):ze=a}function Bx(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=ax(s,a,a.pendingProps,a.type,void 0,Ue);break;case 11:a=ax(s,a,a.pendingProps,a.type.render,a.ref,Ue);break;case 5:$o(a);default:dx(s,a),a=ze=Uu(a,Xa),a=ox(s,a,Xa)}t.memoizedProps=t.pendingProps,a===null?Jr(t):ze=a}function Tl(t,a,s,l){qa=Ls=null,$o(a),yl=null,cn=0;var o=a.return;try{if($f(t,o,a,s,Ue)){it=1,Br(t,oa(s,t.current)),ze=null;return}}catch(d){if(o!==null)throw ze=o,d;it=1,Br(t,oa(s,t.current)),ze=null;return}a.flags&32768?(He||l===1?t=!0:_l||(Ue&536870912)!==0?t=!1:(ps=t=!0,(l===2||l===9||l===3||l===6)&&(l=Jt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Hx(a,t)):Jr(a)}function Jr(t){var a=t;do{if((a.flags&32768)!==0){Hx(a,ps);return}t=a.return;var s=Vf(a.alternate,a,Xa);if(s!==null){ze=s;return}if(a=a.sibling,a!==null){ze=a;return}ze=a=t}while(a!==null);it===0&&(it=5)}function Hx(t,a){do{var s=Pf(t.alternate,t);if(s!==null){s.flags&=32767,ze=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){ze=t;return}ze=t=s}while(t!==null);it=6,ze=null}function Gx(t,a,s,l,o,d,v,C,L){t.cancelPendingCommit=null;do Wr();while(ft!==0);if((Qe&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(d=a.lanes|a.childLanes,d|=fo,Mp(t,s,d,v,C,L),t===tt&&(ze=tt=null,Ue=0),El=a,bs=t,Za=s,kc=d,Sc=o,Tx=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ng(Ye,function(){return Vx(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,o=V.p,V.p=2,v=Qe,Qe|=4;try{Xf(t,a,s)}finally{Qe=v,V.p=o,O.T=l}}ft=1,Fx(),$x(),Yx()}}function Fx(){if(ft===1){ft=0;var t=bs,a=El,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=O.T,O.T=null;var l=V.p;V.p=2;var o=Qe;Qe|=4;try{Nx(a,t);var d=Hc,v=Eu(t.containerInfo),C=d.focusedElem,L=d.selectionRange;if(v!==C&&C&&C.ownerDocument&&Cu(C.ownerDocument.documentElement,C)){if(L!==null&&uo(C)){var K=L.start,ne=L.end;if(ne===void 0&&(ne=K),"selectionStart"in C)C.selectionStart=K,C.selectionEnd=Math.min(ne,C.value.length);else{var ce=C.ownerDocument||document,J=ce&&ce.defaultView||window;if(J.getSelection){var ae=J.getSelection(),je=C.textContent.length,Se=Math.min(L.start,je),et=L.end===void 0?Se:Math.min(L.end,je);!ae.extend&&Se>et&&(v=et,et=Se,Se=v);var $=_u(C,Se),B=_u(C,et);if($&&B&&(ae.rangeCount!==1||ae.anchorNode!==$.node||ae.anchorOffset!==$.offset||ae.focusNode!==B.node||ae.focusOffset!==B.offset)){var Z=ce.createRange();Z.setStart($.node,$.offset),ae.removeAllRanges(),Se>et?(ae.addRange(Z),ae.extend(B.node,B.offset)):(Z.setEnd(B.node,B.offset),ae.addRange(Z))}}}}for(ce=[],ae=C;ae=ae.parentNode;)ae.nodeType===1&&ce.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ce.length;C++){var re=ce[C];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}ui=!!Bc,Hc=Bc=null}finally{Qe=o,V.p=l,O.T=s}}t.current=a,ft=2}}function $x(){if(ft===2){ft=0;var t=bs,a=El,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=O.T,O.T=null;var l=V.p;V.p=2;var o=Qe;Qe|=4;try{gx(t,a.alternate,a)}finally{Qe=o,V.p=l,O.T=s}}ft=3}}function Yx(){if(ft===4||ft===3){ft=0,Fi();var t=bs,a=El,s=Za,l=Tx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ft=5:(ft=0,El=bs=null,Qx(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(gs=null),Qi(s),a=a.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(as,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=O.T,o=V.p,V.p=2,O.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var C=l[v];d(C.value,{componentStack:C.stack})}}finally{O.T=a,V.p=o}}(Za&3)!==0&&Wr(),Ea(t),o=t.pendingLanes,(s&261930)!==0&&(o&42)!==0?t===_c?_n++:(_n=0,_c=t):_n=0,Cn(0)}}function Qx(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,rn(a)))}function Wr(){return Fx(),$x(),Yx(),Vx()}function Vx(){if(ft!==5)return!1;var t=bs,a=kc;kc=0;var s=Qi(Za),l=O.T,o=V.p;try{V.p=32>s?32:s,O.T=null,s=Sc,Sc=null;var d=bs,v=Za;if(ft=0,El=bs=null,Za=0,(Qe&6)!==0)throw Error(i(331));var C=Qe;if(Qe|=4,Cx(d.current),kx(d,d.current,v,s),Qe=C,Cn(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(as,d)}catch{}return!0}finally{V.p=o,O.T=l,Qx(t,a)}}function Px(t,a,s){a=oa(s,a),a=lc(t.stateNode,a,2),t=us(t,a,2),t!==null&&(Vl(t,2),Ea(t))}function Ke(t,a,s){if(t.tag===3)Px(t,t,s);else for(;a!==null;){if(a.tag===3){Px(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(gs===null||!gs.has(l))){t=oa(s,t),s=Xm(2),l=us(a,s,2),l!==null&&(Zm(s,l,a,t),Vl(l,2),Ea(l));break}}a=a.return}}function Ac(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new If;var o=new Set;l.set(a,o)}else o=l.get(a),o===void 0&&(o=new Set,l.set(a,o));o.has(s)||(jc=!0,o.add(s),t=ag.bind(null,t,a,s),a.then(t,t))}function ag(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,tt===t&&(Ue&s)===s&&(it===4||it===3&&(Ue&62914560)===Ue&&300>Ot()-Pr?(Qe&2)===0&&Al(t,0):Nc|=s,Cl===Ue&&(Cl=0)),Ea(t)}function Xx(t,a){a===0&&(a=Fd()),t=Ms(t,a),t!==null&&(Vl(t,a),Ea(t))}function sg(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),Xx(t,s)}function lg(t,a){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,o=t.memoizedState;o!==null&&(s=o.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(a),Xx(t,s)}function ng(t,a){return qt(t,a)}var ei=null,Dl=null,Tc=!1,ti=!1,Dc=!1,vs=0;function Ea(t){t!==Dl&&t.next===null&&(Dl===null?ei=Dl=t:Dl=Dl.next=t),ti=!0,Tc||(Tc=!0,ig())}function Cn(t,a){if(!Dc&&ti){Dc=!0;do for(var s=!1,l=ei;l!==null;){if(t!==0){var o=l.pendingLanes;if(o===0)var d=0;else{var v=l.suspendedLanes,C=l.pingedLanes;d=(1<<31-Dt(42|t)+1)-1,d&=o&~(v&~C),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,Jx(l,d))}else d=Ue,d=nr(l,l===tt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Ql(l,d)||(s=!0,Jx(l,d));l=l.next}while(s);Dc=!1}}function rg(){Zx()}function Zx(){ti=Tc=!1;var t=0;vs!==0&&gg()&&(t=vs);for(var a=Ot(),s=null,l=ei;l!==null;){var o=l.next,d=Kx(l,a);d===0?(l.next=null,s===null?ei=o:s.next=o,o===null&&(Dl=s)):(s=l,(t!==0||(d&3)!==0)&&(ti=!0)),l=o}ft!==0&&ft!==5||Cn(t),vs!==0&&(vs=0)}function Kx(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,o=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Dt(d),C=1<<v,L=o[v];L===-1?((C&s)===0||(C&l)!==0)&&(o[v]=Rp(C,a)):L<=a&&(t.expiredLanes|=C),d&=~C}if(a=tt,s=Ue,s=nr(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ts(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Ql(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&ts(l),Qi(s)){case 2:case 8:s=Ce;break;case 32:s=Ye;break;case 268435456:s=ka;break;default:s=Ye}return l=Ix.bind(null,t),s=qt(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&ts(l),t.callbackPriority=2,t.callbackNode=null,2}function Ix(t,a){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Wr()&&t.callbackNode!==s)return null;var l=Ue;return l=nr(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Rx(t,l,a),Kx(t,Ot()),t.callbackNode!=null&&t.callbackNode===s?Ix.bind(null,t):null)}function Jx(t,a){if(Wr())return null;Rx(t,a,!0)}function ig(){yg(function(){(Qe&6)!==0?qt(_e,rg):Zx()})}function Rc(){if(vs===0){var t=fl;t===0&&(t=ar,ar<<=1,(ar&261888)===0&&(ar=256)),vs=t}return vs}function Wx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:cr(""+t)}function eh(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function og(t,a,s,l,o){if(a==="submit"&&s&&s.stateNode===o){var d=Wx((o[Bt]||null).action),v=l.submitter;v&&(a=(a=v[Bt]||null)?Wx(a.formAction):v.getAttribute("formAction"),a!==null&&(d=a,v=null));var C=new xr("action","action",null,l,o);t.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(vs!==0){var L=v?eh(o,v):new FormData(o);Jo(s,{pending:!0,data:L,method:o.method,action:d},null,L)}}else typeof d=="function"&&(C.preventDefault(),L=v?eh(o,v):new FormData(o),Jo(s,{pending:!0,data:L,method:o.method,action:d},d,L))},currentTarget:o}]})}}for(var Mc=0;Mc<po.length;Mc++){var Oc=po[Mc],cg=Oc.toLowerCase(),dg=Oc[0].toUpperCase()+Oc.slice(1);va(cg,"on"+dg)}va(Du,"onAnimationEnd"),va(Ru,"onAnimationIteration"),va(Mu,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(_f,"onTransitionRun"),va(Cf,"onTransitionStart"),va(Ef,"onTransitionCancel"),va(Ou,"onTransitionEnd"),al("onMouseEnter",["mouseout","mouseover"]),al("onMouseLeave",["mouseout","mouseover"]),al("onPointerEnter",["pointerout","pointerover"]),al("onPointerLeave",["pointerout","pointerover"]),As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),As("onBeforeInput",["compositionend","keypress","textInput","paste"]),As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var En="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(En));function th(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],o=l.event;l=l.listeners;e:{var d=void 0;if(a)for(var v=l.length-1;0<=v;v--){var C=l[v],L=C.instance,K=C.currentTarget;if(C=C.listener,L!==d&&o.isPropagationStopped())break e;d=C,o.currentTarget=K;try{d(o)}catch(ne){fr(ne)}o.currentTarget=null,d=L}else for(v=0;v<l.length;v++){if(C=l[v],L=C.instance,K=C.currentTarget,C=C.listener,L!==d&&o.isPropagationStopped())break e;d=C,o.currentTarget=K;try{d(o)}catch(ne){fr(ne)}o.currentTarget=null,d=L}}}}function Le(t,a){var s=a[Vi];s===void 0&&(s=a[Vi]=new Set);var l=t+"__bubble";s.has(l)||(ah(a,t,2,!1),s.add(l))}function zc(t,a,s){var l=0;a&&(l|=4),ah(s,t,l,a)}var ai="_reactListening"+Math.random().toString(36).slice(2);function Lc(t){if(!t[ai]){t[ai]=!0,Zd.forEach(function(s){s!=="selectionchange"&&(ug.has(s)||zc(s,!1,t),zc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[ai]||(a[ai]=!0,zc("selectionchange",!1,a))}}function ah(t,a,s,l){switch(Dh(a)){case 2:var o=Bg;break;case 8:o=Hg;break;default:o=Ic}s=o.bind(null,a,s,t),o=void 0,!to||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(o=!0),l?o!==void 0?t.addEventListener(a,s,{capture:!0,passive:o}):t.addEventListener(a,s,!0):o!==void 0?t.addEventListener(a,s,{passive:o}):t.addEventListener(a,s,!1)}function Uc(t,a,s,l,o){var d=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var C=l.stateNode.containerInfo;if(C===o)break;if(v===4)for(v=l.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===o)return;v=v.return}for(;C!==null;){if(v=Ws(C),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){l=d=v;continue e}C=C.parentNode}}l=l.return}iu(function(){var K=d,ne=Wi(s),ce=[];e:{var J=zu.get(t);if(J!==void 0){var ae=xr,je=t;switch(t){case"keypress":if(ur(s)===0)break e;case"keydown":case"keyup":ae=sf;break;case"focusin":je="focus",ae=no;break;case"focusout":je="blur",ae=no;break;case"beforeblur":case"afterblur":ae=no;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Qp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=rf;break;case Du:case Ru:case Mu:ae=Xp;break;case Ou:ae=cf;break;case"scroll":case"scrollend":ae=$p;break;case"wheel":ae=uf;break;case"copy":case"cut":case"paste":ae=Kp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=mu;break;case"toggle":case"beforetoggle":ae=xf}var Se=(a&4)!==0,et=!Se&&(t==="scroll"||t==="scrollend"),$=Se?J!==null?J+"Capture":null:J;Se=[];for(var B=K,Z;B!==null;){var re=B;if(Z=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Z===null||$===null||(re=Zl(B,$),re!=null&&Se.push(An(B,re,Z))),et)break;B=B.return}0<Se.length&&(J=new ae(J,je,null,s,ne),ce.push({event:J,listeners:Se}))}}if((a&7)===0){e:{if(J=t==="mouseover"||t==="pointerover",ae=t==="mouseout"||t==="pointerout",J&&s!==Ji&&(je=s.relatedTarget||s.fromElement)&&(Ws(je)||je[Js]))break e;if((ae||J)&&(J=ne.window===ne?ne:(J=ne.ownerDocument)?J.defaultView||J.parentWindow:window,ae?(je=s.relatedTarget||s.toElement,ae=K,je=je?Ws(je):null,je!==null&&(et=h(je),Se=je.tag,je!==et||Se!==5&&Se!==27&&Se!==6)&&(je=null)):(ae=null,je=K),ae!==je)){if(Se=du,re="onMouseLeave",$="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(Se=mu,re="onPointerLeave",$="onPointerEnter",B="pointer"),et=ae==null?J:Xl(ae),Z=je==null?J:Xl(je),J=new Se(re,B+"leave",ae,s,ne),J.target=et,J.relatedTarget=Z,re=null,Ws(ne)===K&&(Se=new Se($,B+"enter",je,s,ne),Se.target=Z,Se.relatedTarget=et,re=Se),et=re,ae&&je)t:{for(Se=mg,$=ae,B=je,Z=0,re=$;re;re=Se(re))Z++;re=0;for(var we=B;we;we=Se(we))re++;for(;0<Z-re;)$=Se($),Z--;for(;0<re-Z;)B=Se(B),re--;for(;Z--;){if($===B||B!==null&&$===B.alternate){Se=$;break t}$=Se($),B=Se(B)}Se=null}else Se=null;ae!==null&&sh(ce,J,ae,Se,!1),je!==null&&et!==null&&sh(ce,et,je,Se,!0)}}e:{if(J=K?Xl(K):window,ae=J.nodeName&&J.nodeName.toLowerCase(),ae==="select"||ae==="input"&&J.type==="file")var Ge=vu;else if(bu(J))if(ju)Ge=wf;else{Ge=jf;var Ne=vf}else ae=J.nodeName,!ae||ae.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&Ii(K.elementType)&&(Ge=vu):Ge=Nf;if(Ge&&(Ge=Ge(t,K))){yu(ce,Ge,s,ne);break e}Ne&&Ne(t,J,K),t==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&Ki(J,"number",J.value)}switch(Ne=K?Xl(K):window,t){case"focusin":(bu(Ne)||Ne.contentEditable==="true")&&(ol=Ne,mo=K,sn=null);break;case"focusout":sn=mo=ol=null;break;case"mousedown":xo=!0;break;case"contextmenu":case"mouseup":case"dragend":xo=!1,Au(ce,s,ne);break;case"selectionchange":if(Sf)break;case"keydown":case"keyup":Au(ce,s,ne)}var Re;if(io)e:{switch(t){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else il?fu(t,s)&&(qe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(qe="onCompositionStart");qe&&(xu&&s.locale!=="ko"&&(il||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&il&&(Re=ou()):(ls=ne,ao="value"in ls?ls.value:ls.textContent,il=!0)),Ne=si(K,qe),0<Ne.length&&(qe=new uu(qe,t,null,s,ne),ce.push({event:qe,listeners:Ne}),Re?qe.data=Re:(Re=gu(s),Re!==null&&(qe.data=Re)))),(Re=pf?ff(t,s):gf(t,s))&&(qe=si(K,"onBeforeInput"),0<qe.length&&(Ne=new uu("onBeforeInput","beforeinput",null,s,ne),ce.push({event:Ne,listeners:qe}),Ne.data=Re)),og(ce,t,K,s,ne)}th(ce,a)})}function An(t,a,s){return{instance:t,listener:a,currentTarget:s}}function si(t,a){for(var s=a+"Capture",l=[];t!==null;){var o=t,d=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||d===null||(o=Zl(t,s),o!=null&&l.unshift(An(t,o,d)),o=Zl(t,a),o!=null&&l.push(An(t,o,d))),t.tag===3)return l;t=t.return}return[]}function mg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function sh(t,a,s,l,o){for(var d=a._reactName,v=[];s!==null&&s!==l;){var C=s,L=C.alternate,K=C.stateNode;if(C=C.tag,L!==null&&L===l)break;C!==5&&C!==26&&C!==27||K===null||(L=K,o?(K=Zl(s,d),K!=null&&v.unshift(An(s,K,L))):o||(K=Zl(s,d),K!=null&&v.push(An(s,K,L)))),s=s.return}v.length!==0&&t.push({event:a,listeners:v})}var xg=/\r\n?/g,hg=/\u0000|\uFFFD/g;function lh(t){return(typeof t=="string"?t:""+t).replace(xg,`
`).replace(hg,"")}function nh(t,a){return a=lh(a),lh(t)===a}function We(t,a,s,l,o,d){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||ll(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&ll(t,""+l);break;case"className":ir(t,"class",l);break;case"tabIndex":ir(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ir(t,s,l);break;case"style":nu(t,l,d);break;case"data":if(a!=="object"){ir(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=cr(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(a!=="input"&&We(t,a,"name",o.name,o,null),We(t,a,"formEncType",o.formEncType,o,null),We(t,a,"formMethod",o.formMethod,o,null),We(t,a,"formTarget",o.formTarget,o,null)):(We(t,a,"encType",o.encType,o,null),We(t,a,"method",o.method,o,null),We(t,a,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=cr(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Oa);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(o.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=cr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),rr(t,"popover",l);break;case"xlinkActuate":Ma(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ma(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ma(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ma(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ma(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ma(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ma(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":rr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Gp.get(s)||s,rr(t,s,l))}}function qc(t,a,s,l,o,d){switch(s){case"style":nu(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(o.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"children":typeof l=="string"?ll(t,l):(typeof l=="number"||typeof l=="bigint")&&ll(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Oa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kd.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(o=s.endsWith("Capture"),a=s.slice(2,o?s.length-7:void 0),d=t[Bt]||null,d=d!=null?d[s]:null,typeof d=="function"&&t.removeEventListener(a,d,o),typeof l=="function")){typeof d!="function"&&d!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,o);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):rr(t,s,l)}}}function St(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,o=!1,d;for(d in s)if(s.hasOwnProperty(d)){var v=s[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:We(t,a,d,v,s,null)}}o&&We(t,a,"srcSet",s.srcSet,s,null),l&&We(t,a,"src",s.src,s,null);return;case"input":Le("invalid",t);var C=d=v=o=null,L=null,K=null;for(l in s)if(s.hasOwnProperty(l)){var ne=s[l];if(ne!=null)switch(l){case"name":o=ne;break;case"type":v=ne;break;case"checked":L=ne;break;case"defaultChecked":K=ne;break;case"value":d=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:We(t,a,l,ne,s,null)}}tu(t,d,C,L,K,v,o,!1);return;case"select":Le("invalid",t),l=v=d=null;for(o in s)if(s.hasOwnProperty(o)&&(C=s[o],C!=null))switch(o){case"value":d=C;break;case"defaultValue":v=C;break;case"multiple":l=C;default:We(t,a,o,C,s,null)}a=d,s=v,t.multiple=!!l,a!=null?sl(t,!!l,a,!1):s!=null&&sl(t,!!l,s,!0);return;case"textarea":Le("invalid",t),d=o=l=null;for(v in s)if(s.hasOwnProperty(v)&&(C=s[v],C!=null))switch(v){case"value":l=C;break;case"defaultValue":o=C;break;case"children":d=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:We(t,a,v,C,s,null)}su(t,l,o,d);return;case"option":for(L in s)s.hasOwnProperty(L)&&(l=s[L],l!=null)&&(L==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":We(t,a,L,l,s,null));return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<En.length;l++)Le(En[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in s)if(s.hasOwnProperty(K)&&(l=s[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:We(t,a,K,l,s,null)}return;default:if(Ii(a)){for(ne in s)s.hasOwnProperty(ne)&&(l=s[ne],l!==void 0&&qc(t,a,ne,l,s,void 0));return}}for(C in s)s.hasOwnProperty(C)&&(l=s[C],l!=null&&We(t,a,C,l,s,null))}function pg(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,d=null,v=null,C=null,L=null,K=null,ne=null;for(ae in s){var ce=s[ae];if(s.hasOwnProperty(ae)&&ce!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":L=ce;default:l.hasOwnProperty(ae)||We(t,a,ae,null,l,ce)}}for(var J in l){var ae=l[J];if(ce=s[J],l.hasOwnProperty(J)&&(ae!=null||ce!=null))switch(J){case"type":d=ae;break;case"name":o=ae;break;case"checked":K=ae;break;case"defaultChecked":ne=ae;break;case"value":v=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,a));break;default:ae!==ce&&We(t,a,J,ae,l,ce)}}Zi(t,v,C,L,K,ne,d,o);return;case"select":ae=v=C=J=null;for(d in s)if(L=s[d],s.hasOwnProperty(d)&&L!=null)switch(d){case"value":break;case"multiple":ae=L;default:l.hasOwnProperty(d)||We(t,a,d,null,l,L)}for(o in l)if(d=l[o],L=s[o],l.hasOwnProperty(o)&&(d!=null||L!=null))switch(o){case"value":J=d;break;case"defaultValue":C=d;break;case"multiple":v=d;default:d!==L&&We(t,a,o,d,l,L)}a=C,s=v,l=ae,J!=null?sl(t,!!s,J,!1):!!l!=!!s&&(a!=null?sl(t,!!s,a,!0):sl(t,!!s,s?[]:"",!1));return;case"textarea":ae=J=null;for(C in s)if(o=s[C],s.hasOwnProperty(C)&&o!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:We(t,a,C,null,l,o)}for(v in l)if(o=l[v],d=s[v],l.hasOwnProperty(v)&&(o!=null||d!=null))switch(v){case"value":J=o;break;case"defaultValue":ae=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==d&&We(t,a,v,o,l,d)}au(t,J,ae);return;case"option":for(var je in s)J=s[je],s.hasOwnProperty(je)&&J!=null&&!l.hasOwnProperty(je)&&(je==="selected"?t.selected=!1:We(t,a,je,null,l,J));for(L in l)J=l[L],ae=s[L],l.hasOwnProperty(L)&&J!==ae&&(J!=null||ae!=null)&&(L==="selected"?t.selected=J&&typeof J!="function"&&typeof J!="symbol":We(t,a,L,J,l,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in s)J=s[Se],s.hasOwnProperty(Se)&&J!=null&&!l.hasOwnProperty(Se)&&We(t,a,Se,null,l,J);for(K in l)if(J=l[K],ae=s[K],l.hasOwnProperty(K)&&J!==ae&&(J!=null||ae!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:We(t,a,K,J,l,ae)}return;default:if(Ii(a)){for(var et in s)J=s[et],s.hasOwnProperty(et)&&J!==void 0&&!l.hasOwnProperty(et)&&qc(t,a,et,void 0,l,J);for(ne in l)J=l[ne],ae=s[ne],!l.hasOwnProperty(ne)||J===ae||J===void 0&&ae===void 0||qc(t,a,ne,J,l,ae);return}}for(var $ in s)J=s[$],s.hasOwnProperty($)&&J!=null&&!l.hasOwnProperty($)&&We(t,a,$,null,l,J);for(ce in l)J=l[ce],ae=s[ce],!l.hasOwnProperty(ce)||J===ae||J==null&&ae==null||We(t,a,ce,J,l,ae)}function rh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var o=s[l],d=o.transferSize,v=o.initiatorType,C=o.duration;if(d&&C&&rh(v)){for(v=0,C=o.responseEnd,l+=1;l<s.length;l++){var L=s[l],K=L.startTime;if(K>C)break;var ne=L.transferSize,ce=L.initiatorType;ne&&rh(ce)&&(L=L.responseEnd,v+=ne*(L<C?1:(C-K)/(L-K)))}if(--l,a+=8*(d+v)/(o.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bc=null,Hc=null;function li(t){return t.nodeType===9?t:t.ownerDocument}function ih(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oh(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Gc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fc=null;function gg(){var t=window.event;return t&&t.type==="popstate"?t===Fc?!1:(Fc=t,!0):(Fc=null,!1)}var ch=typeof setTimeout=="function"?setTimeout:void 0,bg=typeof clearTimeout=="function"?clearTimeout:void 0,dh=typeof Promise=="function"?Promise:void 0,yg=typeof queueMicrotask=="function"?queueMicrotask:typeof dh<"u"?function(t){return dh.resolve(null).then(t).catch(vg)}:ch;function vg(t){setTimeout(function(){throw t})}function js(t){return t==="head"}function uh(t,a){var s=a,l=0;do{var o=s.nextSibling;if(t.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(o),zl(a);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")Tn(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Tn(s);for(var d=s.firstChild;d;){var v=d.nextSibling,C=d.nodeName;d[Pl]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=v}}else s==="body"&&Tn(t.ownerDocument.body);s=o}while(s);zl(a)}function mh(t,a){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function $c(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":$c(s),Pi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function jg(t,a,s,l){for(;t.nodeType===1;){var o=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Pl])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var d=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=xa(t.nextSibling),t===null)break}return null}function Ng(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=xa(t.nextSibling),t===null))return null;return t}function xh(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=xa(t.nextSibling),t===null))return null;return t}function Yc(t){return t.data==="$?"||t.data==="$~"}function Qc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function wg(t,a){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||s.readyState!=="loading")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function xa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Vc=null;function hh(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(a===0)return xa(t.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}t=t.nextSibling}return null}function ph(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return t;a--}else s!=="/$"&&s!=="/&"||a++}t=t.previousSibling}return null}function fh(t,a,s){switch(a=li(s),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Tn(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Pi(t)}var ha=new Map,gh=new Set;function ni(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ka=V.d;V.d={f:kg,r:Sg,D:_g,C:Cg,L:Eg,m:Ag,X:Dg,S:Tg,M:Rg};function kg(){var t=Ka.f(),a=Kr();return t||a}function Sg(t){var a=el(t);a!==null&&a.tag===5&&a.type==="form"?Om(a):Ka.r(t)}var Rl=typeof document>"u"?null:document;function bh(t,a,s){var l=Rl;if(l&&typeof a=="string"&&a){var o=ra(a);o='link[rel="'+t+'"][href="'+o+'"]',typeof s=="string"&&(o+='[crossorigin="'+s+'"]'),gh.has(o)||(gh.add(o),t={rel:t,crossOrigin:s,href:a},l.querySelector(o)===null&&(a=l.createElement("link"),St(a,"link",t),bt(a),l.head.appendChild(a)))}}function _g(t){Ka.D(t),bh("dns-prefetch",t,null)}function Cg(t,a){Ka.C(t,a),bh("preconnect",t,a)}function Eg(t,a,s){Ka.L(t,a,s);var l=Rl;if(l&&t&&a){var o='link[rel="preload"][as="'+ra(a)+'"]';a==="image"&&s&&s.imageSrcSet?(o+='[imagesrcset="'+ra(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(o+='[imagesizes="'+ra(s.imageSizes)+'"]')):o+='[href="'+ra(t)+'"]';var d=o;switch(a){case"style":d=Ml(t);break;case"script":d=Ol(t)}ha.has(d)||(t=g({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),ha.set(d,t),l.querySelector(o)!==null||a==="style"&&l.querySelector(Dn(d))||a==="script"&&l.querySelector(Rn(d))||(a=l.createElement("link"),St(a,"link",t),bt(a),l.head.appendChild(a)))}}function Ag(t,a){Ka.m(t,a);var s=Rl;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",o='link[rel="modulepreload"][as="'+ra(l)+'"][href="'+ra(t)+'"]',d=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ol(t)}if(!ha.has(d)&&(t=g({rel:"modulepreload",href:t},a),ha.set(d,t),s.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Rn(d)))return}l=s.createElement("link"),St(l,"link",t),bt(l),s.head.appendChild(l)}}}function Tg(t,a,s){Ka.S(t,a,s);var l=Rl;if(l&&t){var o=tl(l).hoistableStyles,d=Ml(t);a=a||"default";var v=o.get(d);if(!v){var C={loading:0,preload:null};if(v=l.querySelector(Dn(d)))C.loading=5;else{t=g({rel:"stylesheet",href:t,"data-precedence":a},s),(s=ha.get(d))&&Pc(t,s);var L=v=l.createElement("link");bt(L),St(L,"link",t),L._p=new Promise(function(K,ne){L.onload=K,L.onerror=ne}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ri(v,a,l)}v={type:"stylesheet",instance:v,count:1,state:C},o.set(d,v)}}}function Dg(t,a){Ka.X(t,a);var s=Rl;if(s&&t){var l=tl(s).hoistableScripts,o=Ol(t),d=l.get(o);d||(d=s.querySelector(Rn(o)),d||(t=g({src:t,async:!0},a),(a=ha.get(o))&&Xc(t,a),d=s.createElement("script"),bt(d),St(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(o,d))}}function Rg(t,a){Ka.M(t,a);var s=Rl;if(s&&t){var l=tl(s).hoistableScripts,o=Ol(t),d=l.get(o);d||(d=s.querySelector(Rn(o)),d||(t=g({src:t,async:!0,type:"module"},a),(a=ha.get(o))&&Xc(t,a),d=s.createElement("script"),bt(d),St(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(o,d))}}function yh(t,a,s,l){var o=(o=pe.current)?ni(o):null;if(!o)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Ml(s.href),s=tl(o).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ml(s.href);var d=tl(o).hoistableStyles,v=d.get(t);if(v||(o=o.ownerDocument||o,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=o.querySelector(Dn(t)))&&!d._p&&(v.instance=d,v.state.loading=5),ha.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ha.set(t,s),d||Mg(o,t,s,v.state))),a&&l===null)throw Error(i(528,""));return v}if(a&&l!==null)throw Error(i(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ol(s),s=tl(o).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Ml(t){return'href="'+ra(t)+'"'}function Dn(t){return'link[rel="stylesheet"]['+t+"]"}function vh(t){return g({},t,{"data-precedence":t.precedence,precedence:null})}function Mg(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),St(a,"link",s),bt(a),t.head.appendChild(a))}function Ol(t){return'[src="'+ra(t)+'"]'}function Rn(t){return"script[async]"+t}function jh(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+ra(s.href)+'"]');if(l)return a.instance=l,bt(l),l;var o=g({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),bt(l),St(l,"style",o),ri(l,s.precedence,t),a.instance=l;case"stylesheet":o=Ml(s.href);var d=t.querySelector(Dn(o));if(d)return a.state.loading|=4,a.instance=d,bt(d),d;l=vh(s),(o=ha.get(o))&&Pc(l,o),d=(t.ownerDocument||t).createElement("link"),bt(d);var v=d;return v._p=new Promise(function(C,L){v.onload=C,v.onerror=L}),St(d,"link",l),a.state.loading|=4,ri(d,s.precedence,t),a.instance=d;case"script":return d=Ol(s.src),(o=t.querySelector(Rn(d)))?(a.instance=o,bt(o),o):(l=s,(o=ha.get(d))&&(l=g({},s),Xc(l,o)),t=t.ownerDocument||t,o=t.createElement("script"),bt(o),St(o,"link",l),t.head.appendChild(o),a.instance=o);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,ri(l,s.precedence,t));return a.instance}function ri(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,d=o,v=0;v<l.length;v++){var C=l[v];if(C.dataset.precedence===a)d=C;else if(d!==o)break}d?d.parentNode.insertBefore(t,d.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Pc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Xc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var ii=null;function Nh(t,a,s){if(ii===null){var l=new Map,o=ii=new Map;o.set(s,l)}else o=ii,l=o.get(s),l||(l=new Map,o.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),o=0;o<s.length;o++){var d=s[o];if(!(d[Pl]||d[jt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(a)||"";v=t+v;var C=l.get(v);C?C.push(d):l.set(v,[d])}}return l}function wh(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function Og(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function kh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function zg(t,a,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var o=Ml(l.href),d=a.querySelector(Dn(o));if(d){a=d._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=oi.bind(t),a.then(t,t)),s.state.loading|=4,s.instance=d,bt(d);return}d=a.ownerDocument||a,l=vh(l),(o=ha.get(o))&&Pc(l,o),d=d.createElement("link"),bt(d);var v=d;v._p=new Promise(function(C,L){v.onload=C,v.onerror=L}),St(d,"link",l),s.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=oi.bind(t),a.addEventListener("load",s),a.addEventListener("error",s))}}var Zc=0;function Lg(t,a){return t.stylesheets&&t.count===0&&di(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&di(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+a);0<t.imgBytes&&Zc===0&&(Zc=62500*fg());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&di(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Zc?50:800)+a);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function oi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)di(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ci=null;function di(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ci=new Map,a.forEach(Ug,t),ci=null,oi.call(t))}function Ug(t,a){if(!(a.state.loading&4)){var s=ci.get(t);if(s)var l=s.get(null);else{s=new Map,ci.set(t,s);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<o.length;d++){var v=o[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(s.set(v.dataset.precedence,v),l=v)}l&&s.set(null,l)}o=a.instance,v=o.getAttribute("data-precedence"),d=s.get(v)||l,d===l&&s.set(null,o),s.set(v,o),this.count++,l=oi.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),d?d.parentNode.insertBefore(o,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),a.state.loading|=4}}var Mn={$$typeof:D,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function qg(t,a,s,l,o,d,v,C,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.hiddenUpdates=$i(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Sh(t,a,s,l,o,d,v,C,L,K,ne,ce){return t=new qg(t,a,s,v,L,K,ne,ce,C),a=1,d===!0&&(a|=24),d=It(3,null,null,a),t.current=d,d.stateNode=t,a=Eo(),a.refCount++,t.pooledCache=a,a.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:a},Ro(d),t}function _h(t){return t?(t=ul,t):ul}function Ch(t,a,s,l,o,d){o=_h(o),l.context===null?l.context=o:l.pendingContext=o,l=ds(a),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=us(t,l,a),s!==null&&(Qt(s,t,a),un(s,t,a))}function Eh(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Kc(t,a){Eh(t,a),(t=t.alternate)&&Eh(t,a)}function Ah(t){if(t.tag===13||t.tag===31){var a=Ms(t,67108864);a!==null&&Qt(a,t,67108864),Kc(t,67108864)}}function Th(t){if(t.tag===13||t.tag===31){var a=aa();a=Yi(a);var s=Ms(t,a);s!==null&&Qt(s,t,a),Kc(t,a)}}var ui=!0;function Bg(t,a,s,l){var o=O.T;O.T=null;var d=V.p;try{V.p=2,Ic(t,a,s,l)}finally{V.p=d,O.T=o}}function Hg(t,a,s,l){var o=O.T;O.T=null;var d=V.p;try{V.p=8,Ic(t,a,s,l)}finally{V.p=d,O.T=o}}function Ic(t,a,s,l){if(ui){var o=Jc(l);if(o===null)Uc(t,a,l,mi,s),Rh(t,l);else if(Fg(o,t,a,s,l))l.stopPropagation();else if(Rh(t,l),a&4&&-1<Gg.indexOf(t)){for(;o!==null;){var d=el(o);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Es(d.pendingLanes);if(v!==0){var C=d;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var L=1<<31-Dt(v);C.entanglements[1]|=L,v&=~L}Ea(d),(Qe&6)===0&&(Xr=Ot()+500,Cn(0))}}break;case 31:case 13:C=Ms(d,2),C!==null&&Qt(C,d,2),Kr(),Kc(d,2)}if(d=Jc(l),d===null&&Uc(t,a,l,mi,s),d===o)break;o=d}o!==null&&l.stopPropagation()}else Uc(t,a,l,null,s)}}function Jc(t){return t=Wi(t),Wc(t)}var mi=null;function Wc(t){if(mi=null,t=Ws(t),t!==null){var a=h(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=x(a),t!==null)return t;t=null}else if(s===31){if(t=j(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return mi=t,null}function Dh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case _e:return 2;case Ce:return 8;case Ye:case gt:return 32;case ka:return 268435456;default:return 32}default:return 32}}var ed=!1,Ns=null,ws=null,ks=null,On=new Map,zn=new Map,Ss=[],Gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rh(t,a){switch(t){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":On.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":zn.delete(a.pointerId)}}function Ln(t,a,s,l,o,d){return t===null||t.nativeEvent!==d?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[o]},a!==null&&(a=el(a),a!==null&&Ah(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,o!==null&&a.indexOf(o)===-1&&a.push(o),t)}function Fg(t,a,s,l,o){switch(a){case"focusin":return Ns=Ln(Ns,t,a,s,l,o),!0;case"dragenter":return ws=Ln(ws,t,a,s,l,o),!0;case"mouseover":return ks=Ln(ks,t,a,s,l,o),!0;case"pointerover":var d=o.pointerId;return On.set(d,Ln(On.get(d)||null,t,a,s,l,o)),!0;case"gotpointercapture":return d=o.pointerId,zn.set(d,Ln(zn.get(d)||null,t,a,s,l,o)),!0}return!1}function Mh(t){var a=Ws(t.target);if(a!==null){var s=h(a);if(s!==null){if(a=s.tag,a===13){if(a=x(s),a!==null){t.blockedOn=a,Pd(t.priority,function(){Th(s)});return}}else if(a===31){if(a=j(s),a!==null){t.blockedOn=a,Pd(t.priority,function(){Th(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xi(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=Jc(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Ji=l,s.target.dispatchEvent(l),Ji=null}else return a=el(s),a!==null&&Ah(a),t.blockedOn=s,!1;a.shift()}return!0}function Oh(t,a,s){xi(t)&&s.delete(a)}function $g(){ed=!1,Ns!==null&&xi(Ns)&&(Ns=null),ws!==null&&xi(ws)&&(ws=null),ks!==null&&xi(ks)&&(ks=null),On.forEach(Oh),zn.forEach(Oh)}function hi(t,a){t.blockedOn===a&&(t.blockedOn=null,ed||(ed=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$g)))}var pi=null;function zh(t){pi!==t&&(pi=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pi===t&&(pi=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],o=t[a+2];if(typeof l!="function"){if(Wc(l||s)===null)continue;break}var d=el(s);d!==null&&(t.splice(a,3),a-=3,Jo(d,{pending:!0,data:o,method:s.method,action:l},l,o))}}))}function zl(t){function a(L){return hi(L,t)}Ns!==null&&hi(Ns,t),ws!==null&&hi(ws,t),ks!==null&&hi(ks,t),On.forEach(a),zn.forEach(a);for(var s=0;s<Ss.length;s++){var l=Ss[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ss.length&&(s=Ss[0],s.blockedOn===null);)Mh(s),s.blockedOn===null&&Ss.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var o=s[l],d=s[l+1],v=o[Bt]||null;if(typeof d=="function")v||zh(s);else if(v){var C=null;if(d&&d.hasAttribute("formAction")){if(o=d,v=d[Bt]||null)C=v.formAction;else if(Wc(o)!==null)continue}else C=v.action;typeof C=="function"?s[l+1]=C:(s.splice(l,3),l-=3),zh(s)}}}function Lh(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return o=v})},focusReset:"manual",scroll:"manual"})}function a(){o!==null&&(o(),o=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),o!==null&&(o(),o=null)}}}function td(t){this._internalRoot=t}fi.prototype.render=td.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var s=a.current,l=aa();Ch(s,l,t,a,null,null)},fi.prototype.unmount=td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Ch(t.current,2,null,t,null,null),Kr(),a[Js]=null}};function fi(t){this._internalRoot=t}fi.prototype.unstable_scheduleHydration=function(t){if(t){var a=Vd();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Ss.length&&a!==0&&a<Ss[s].priority;s++);Ss.splice(s,0,t),s===0&&Mh(t)}};var Uh=r.version;if(Uh!=="19.2.3")throw Error(i(527,Uh,"19.2.3"));V.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=f(a),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var Yg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gi.isDisabled&&gi.supportsFiber)try{as=gi.inject(Yg),Tt=gi}catch{}}return qn.createRoot=function(t,a){if(!u(t))throw Error(i(299));var s=!1,l="",o=Ym,d=Qm,v=Vm;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Sh(t,1,!1,null,null,s,l,null,o,d,v,Lh),t[Js]=a.current,Lc(t),new td(a)},qn.hydrateRoot=function(t,a,s){if(!u(t))throw Error(i(299));var l=!1,o="",d=Ym,v=Qm,C=Vm,L=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.formState!==void 0&&(L=s.formState)),a=Sh(t,1,!0,a,s??null,l,o,L,d,v,C,Lh),a.context=_h(null),s=a.current,l=aa(),l=Yi(l),o=ds(l),o.callback=null,us(s,o,l),s=l,a.current.lanes=s,Vl(a,s),Ea(a),t[Js]=a.current,Lc(t),new fi(a)},qn.version="19.2.3",qn}var Ph;function eb(){if(Ph)return ld.exports;Ph=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),ld.exports=Wg(),ld.exports}var tb=eb();var Xh="popstate";function ab(n={}){function r(i,u){let{pathname:h,search:x,hash:j}=i.location;return gd("",{pathname:h,search:x,hash:j},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function c(i,u){return typeof u=="string"?u:Pn(u)}return lb(r,c,null,n)}function nt(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function sa(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function sb(){return Math.random().toString(36).substring(2,10)}function Zh(n,r){return{usr:n.state,key:n.key,idx:r}}function gd(n,r,c=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof r=="string"?Hl(r):r,state:c,key:r&&r.key||i||sb()}}function Pn({pathname:n="/",search:r="",hash:c=""}){return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function Hl(n){let r={};if(n){let c=n.indexOf("#");c>=0&&(r.hash=n.substring(c),n=n.substring(0,c));let i=n.indexOf("?");i>=0&&(r.search=n.substring(i),n=n.substring(0,i)),n&&(r.pathname=n)}return r}function lb(n,r,c,i={}){let{window:u=document.defaultView,v5Compat:h=!1}=i,x=u.history,j="POP",y=null,f=p();f==null&&(f=0,x.replaceState({...x.state,idx:f},""));function p(){return(x.state||{idx:null}).idx}function g(){j="POP";let b=p(),E=b==null?null:b-f;f=b,y&&y({action:j,location:S.location,delta:E})}function w(b,E){j="PUSH";let T=gd(S.location,b,E);f=p()+1;let D=Zh(T,f),z=S.createHref(T);try{x.pushState(D,"",z)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;u.location.assign(z)}h&&y&&y({action:j,location:S.location,delta:1})}function A(b,E){j="REPLACE";let T=gd(S.location,b,E);f=p();let D=Zh(T,f),z=S.createHref(T);x.replaceState(D,"",z),h&&y&&y({action:j,location:S.location,delta:0})}function k(b){return nb(b)}let S={get action(){return j},get location(){return n(u,x)},listen(b){if(y)throw new Error("A history only accepts one active listener");return u.addEventListener(Xh,g),y=b,()=>{u.removeEventListener(Xh,g),y=null}},createHref(b){return r(u,b)},createURL:k,encodeLocation(b){let E=k(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:w,replace:A,go(b){return x.go(b)}};return S}function nb(n,r=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),nt(c,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Pn(n);return i=i.replace(/ $/,"%20"),!r&&i.startsWith("//")&&(i=c+i),new URL(i,c)}function E0(n,r,c="/"){return rb(n,r,c,!1)}function rb(n,r,c,i){let u=typeof r=="string"?Hl(r):r,h=Ja(u.pathname||"/",c);if(h==null)return null;let x=A0(n);ib(x);let j=null;for(let y=0;j==null&&y<x.length;++y){let f=bb(h);j=fb(x[y],f,i)}return j}function A0(n,r=[],c=[],i="",u=!1){let h=(x,j,y=u,f)=>{let p={relativePath:f===void 0?x.path||"":f,caseSensitive:x.caseSensitive===!0,childrenIndex:j,route:x};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&y)return;nt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let g=Ia([i,p.relativePath]),w=c.concat(p);x.children&&x.children.length>0&&(nt(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),A0(x.children,r,w,g,y)),!(x.path==null&&!x.index)&&r.push({path:g,score:hb(g,x.index),routesMeta:w})};return n.forEach((x,j)=>{if(x.path===""||!x.path?.includes("?"))h(x,j);else for(let y of T0(x.path))h(x,j,!0,y)}),r}function T0(n){let r=n.split("/");if(r.length===0)return[];let[c,...i]=r,u=c.endsWith("?"),h=c.replace(/\?$/,"");if(i.length===0)return u?[h,""]:[h];let x=T0(i.join("/")),j=[];return j.push(...x.map(y=>y===""?h:[h,y].join("/"))),u&&j.push(...x),j.map(y=>n.startsWith("/")&&y===""?"/":y)}function ib(n){n.sort((r,c)=>r.score!==c.score?c.score-r.score:pb(r.routesMeta.map(i=>i.childrenIndex),c.routesMeta.map(i=>i.childrenIndex)))}var ob=/^:[\w-]+$/,cb=3,db=2,ub=1,mb=10,xb=-2,Kh=n=>n==="*";function hb(n,r){let c=n.split("/"),i=c.length;return c.some(Kh)&&(i+=xb),r&&(i+=db),c.filter(u=>!Kh(u)).reduce((u,h)=>u+(ob.test(h)?cb:h===""?ub:mb),i)}function pb(n,r){return n.length===r.length&&n.slice(0,-1).every((i,u)=>i===r[u])?n[n.length-1]-r[r.length-1]:0}function fb(n,r,c=!1){let{routesMeta:i}=n,u={},h="/",x=[];for(let j=0;j<i.length;++j){let y=i[j],f=j===i.length-1,p=h==="/"?r:r.slice(h.length)||"/",g=Ti({path:y.relativePath,caseSensitive:y.caseSensitive,end:f},p),w=y.route;if(!g&&f&&c&&!i[i.length-1].route.index&&(g=Ti({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},p)),!g)return null;Object.assign(u,g.params),x.push({params:u,pathname:Ia([h,g.pathname]),pathnameBase:Nb(Ia([h,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(h=Ia([h,g.pathnameBase]))}return x}function Ti(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[c,i]=gb(n.path,n.caseSensitive,n.end),u=r.match(c);if(!u)return null;let h=u[0],x=h.replace(/(.)\/+$/,"$1"),j=u.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:g},w)=>{if(p==="*"){let k=j[w]||"";x=h.slice(0,h.length-k.length).replace(/(.)\/+$/,"$1")}const A=j[w];return g&&!A?f[p]=void 0:f[p]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:h,pathnameBase:x,pattern:n}}function gb(n,r=!1,c=!0){sa(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,j,y)=>(i.push({paramName:j,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,r?void 0:"i"),i]}function bb(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return sa(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),n}}function Ja(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let c=r.endsWith("/")?r.length-1:r.length,i=n.charAt(c);return i&&i!=="/"?null:n.slice(c)||"/"}var D0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yb=n=>D0.test(n);function vb(n,r="/"){let{pathname:c,search:i="",hash:u=""}=typeof n=="string"?Hl(n):n,h;if(c)if(yb(c))h=c;else{if(c.includes("//")){let x=c;c=c.replace(/\/\/+/g,"/"),sa(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${c}`)}c.startsWith("/")?h=Ih(c.substring(1),"/"):h=Ih(c,r)}else h=r;return{pathname:h,search:wb(i),hash:kb(u)}}function Ih(n,r){let c=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?c.length>1&&c.pop():u!=="."&&c.push(u)}),c.length>1?c.join("/"):"/"}function od(n,r,c,i){return`Cannot include a '${n}' character in a manually specified \`to.${r}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jb(n){return n.filter((r,c)=>c===0||r.route.path&&r.route.path.length>0)}function Cd(n){let r=jb(n);return r.map((c,i)=>i===r.length-1?c.pathname:c.pathnameBase)}function Ed(n,r,c,i=!1){let u;typeof n=="string"?u=Hl(n):(u={...n},nt(!u.pathname||!u.pathname.includes("?"),od("?","pathname","search",u)),nt(!u.pathname||!u.pathname.includes("#"),od("#","pathname","hash",u)),nt(!u.search||!u.search.includes("#"),od("#","search","hash",u)));let h=n===""||u.pathname==="",x=h?"/":u.pathname,j;if(x==null)j=c;else{let g=r.length-1;if(!i&&x.startsWith("..")){let w=x.split("/");for(;w[0]==="..";)w.shift(),g-=1;u.pathname=w.join("/")}j=g>=0?r[g]:"/"}let y=vb(u,j),f=x&&x!=="/"&&x.endsWith("/"),p=(h||x===".")&&c.endsWith("/");return!y.pathname.endsWith("/")&&(f||p)&&(y.pathname+="/"),y}var Ia=n=>n.join("/").replace(/\/\/+/g,"/"),Nb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Sb=class{constructor(n,r,c,i=!1){this.status=n,this.statusText=r||"",this.internal=i,c instanceof Error?(this.data=c.toString(),this.error=c):this.data=c}};function _b(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Cb(n){return n.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var R0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function M0(n,r){let c=n;if(typeof c!="string"||!D0.test(c))return{absoluteURL:void 0,isExternal:!1,to:c};let i=c,u=!1;if(R0)try{let h=new URL(window.location.href),x=c.startsWith("//")?new URL(h.protocol+c):new URL(c),j=Ja(x.pathname,r);x.origin===h.origin&&j!=null?c=j+x.search+x.hash:u=!0}catch{sa(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:u,to:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var O0=["POST","PUT","PATCH","DELETE"];new Set(O0);var Eb=["GET",...O0];new Set(Eb);var Gl=m.createContext(null);Gl.displayName="DataRouter";var Mi=m.createContext(null);Mi.displayName="DataRouterState";var Ab=m.createContext(!1),z0=m.createContext({isTransitioning:!1});z0.displayName="ViewTransition";var Tb=m.createContext(new Map);Tb.displayName="Fetchers";var Db=m.createContext(null);Db.displayName="Await";var la=m.createContext(null);la.displayName="Navigation";var Xn=m.createContext(null);Xn.displayName="Location";var fa=m.createContext({outlet:null,matches:[],isDataRoute:!1});fa.displayName="Route";var Ad=m.createContext(null);Ad.displayName="RouteError";var L0="REACT_ROUTER_ERROR",Rb="REDIRECT",Mb="ROUTE_ERROR_RESPONSE";function Ob(n){if(n.startsWith(`${L0}:${Rb}:{`))try{let r=JSON.parse(n.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function zb(n){if(n.startsWith(`${L0}:${Mb}:{`))try{let r=JSON.parse(n.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new Sb(r.status,r.statusText,r.data)}catch{}}function Lb(n,{relative:r}={}){nt(Fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:i}=m.useContext(la),{hash:u,pathname:h,search:x}=Kn(n,{relative:r}),j=h;return c!=="/"&&(j=h==="/"?c:Ia([c,h])),i.createHref({pathname:j,search:x,hash:u})}function Fl(){return m.useContext(Xn)!=null}function ga(){return nt(Fl(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Xn).location}var U0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function q0(n){m.useContext(la).static||m.useLayoutEffect(n)}function Be(){let{isDataRoute:n}=m.useContext(fa);return n?Ib():Ub()}function Ub(){nt(Fl(),"useNavigate() may be used only in the context of a <Router> component.");let n=m.useContext(Gl),{basename:r,navigator:c}=m.useContext(la),{matches:i}=m.useContext(fa),{pathname:u}=ga(),h=JSON.stringify(Cd(i)),x=m.useRef(!1);return q0(()=>{x.current=!0}),m.useCallback((y,f={})=>{if(sa(x.current,U0),!x.current)return;if(typeof y=="number"){c.go(y);return}let p=Ed(y,JSON.parse(h),u,f.relative==="path");n==null&&r!=="/"&&(p.pathname=p.pathname==="/"?r:Ia([r,p.pathname])),(f.replace?c.replace:c.push)(p,f.state,f)},[r,c,h,u,n])}var qb=m.createContext(null);function Bb(n){let r=m.useContext(fa).outlet;return m.useMemo(()=>r&&m.createElement(qb.Provider,{value:n},r),[r,n])}function Zn(){let{matches:n}=m.useContext(fa),r=n[n.length-1];return r?r.params:{}}function Kn(n,{relative:r}={}){let{matches:c}=m.useContext(fa),{pathname:i}=ga(),u=JSON.stringify(Cd(c));return m.useMemo(()=>Ed(n,JSON.parse(u),i,r==="path"),[n,u,i,r])}function Hb(n,r){return B0(n,r)}function B0(n,r,c,i,u){nt(Fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=m.useContext(la),{matches:x}=m.useContext(fa),j=x[x.length-1],y=j?j.params:{},f=j?j.pathname:"/",p=j?j.pathnameBase:"/",g=j&&j.route;{let T=g&&g.path||"";G0(f,!g||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let w=ga(),A;if(r){let T=typeof r=="string"?Hl(r):r;nt(p==="/"||T.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),A=T}else A=w;let k=A.pathname||"/",S=k;if(p!=="/"){let T=p.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(T.length).join("/")}let b=E0(n,{pathname:S});sa(g||b!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),sa(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Qb(b&&b.map(T=>Object.assign({},T,{params:Object.assign({},y,T.params),pathname:Ia([p,h.encodeLocation?h.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:Ia([p,h.encodeLocation?h.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),x,c,i,u);return r&&E?m.createElement(Xn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},E):E}function Gb(){let n=Kb(),r=_b(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),c=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:i},h={padding:"2px 4px",backgroundColor:i},x=null;return console.error("Error handled by React Router default ErrorBoundary:",n),x=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:h},"ErrorBoundary")," or"," ",m.createElement("code",{style:h},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},r),c?m.createElement("pre",{style:u},c):null,x)}var Fb=m.createElement(Gb,null),H0=class extends m.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){this.props.onError?this.props.onError(n,r):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const c=zb(n.digest);c&&(n=c)}let r=n!==void 0?m.createElement(fa.Provider,{value:this.props.routeContext},m.createElement(Ad.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?m.createElement($b,{error:n},r):r}};H0.contextType=Ab;var cd=new WeakMap;function $b({children:n,error:r}){let{basename:c}=m.useContext(la);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let i=Ob(r.digest);if(i){let u=cd.get(r);if(u)throw u;let h=M0(i.location,c);if(R0&&!cd.get(r))if(h.isExternal||i.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const x=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:i.replace}));throw cd.set(r,x),x}return m.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return n}function Yb({routeContext:n,match:r,children:c}){let i=m.useContext(Gl);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(fa.Provider,{value:n},c)}function Qb(n,r=[],c=null,i=null,u=null){if(n==null){if(!c)return null;if(c.errors)n=c.matches;else if(r.length===0&&!c.initialized&&c.matches.length>0)n=c.matches;else return null}let h=n,x=c?.errors;if(x!=null){let p=h.findIndex(g=>g.route.id&&x?.[g.route.id]!==void 0);nt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),h=h.slice(0,Math.min(h.length,p+1))}let j=!1,y=-1;if(c)for(let p=0;p<h.length;p++){let g=h[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(y=p),g.route.id){let{loaderData:w,errors:A}=c,k=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||k){j=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}let f=c&&i?(p,g)=>{i(p,{location:c.location,params:c.matches?.[0]?.params??{},unstable_pattern:Cb(c.matches),errorInfo:g})}:void 0;return h.reduceRight((p,g,w)=>{let A,k=!1,S=null,b=null;c&&(A=x&&g.route.id?x[g.route.id]:void 0,S=g.route.errorElement||Fb,j&&(y<0&&w===0?(G0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,b=null):y===w&&(k=!0,b=g.route.hydrateFallbackElement||null)));let E=r.concat(h.slice(0,w+1)),T=()=>{let D;return A?D=S:k?D=b:g.route.Component?D=m.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=p,m.createElement(Yb,{match:g,routeContext:{outlet:p,matches:E,isDataRoute:c!=null},children:D})};return c&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?m.createElement(H0,{location:c.location,revalidation:c.revalidation,component:S,error:A,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:f}):T()},null)}function Td(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vb(n){let r=m.useContext(Gl);return nt(r,Td(n)),r}function Pb(n){let r=m.useContext(Mi);return nt(r,Td(n)),r}function Xb(n){let r=m.useContext(fa);return nt(r,Td(n)),r}function Dd(n){let r=Xb(n),c=r.matches[r.matches.length-1];return nt(c.route.id,`${n} can only be used on routes that contain a unique "id"`),c.route.id}function Zb(){return Dd("useRouteId")}function Kb(){let n=m.useContext(Ad),r=Pb("useRouteError"),c=Dd("useRouteError");return n!==void 0?n:r.errors?.[c]}function Ib(){let{router:n}=Vb("useNavigate"),r=Dd("useNavigate"),c=m.useRef(!1);return q0(()=>{c.current=!0}),m.useCallback(async(u,h={})=>{sa(c.current,U0),c.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:r,...h}))},[n,r])}var Jh={};function G0(n,r,c){!r&&!Jh[n]&&(Jh[n]=!0,sa(!1,c))}m.memo(Jb);function Jb({routes:n,future:r,state:c,onError:i}){return B0(n,void 0,c,i,r)}function F0({to:n,replace:r,state:c,relative:i}){nt(Fl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=m.useContext(la);sa(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=m.useContext(fa),{pathname:x}=ga(),j=Be(),y=Ed(n,Cd(h),x,i==="path"),f=JSON.stringify(y);return m.useEffect(()=>{j(JSON.parse(f),{replace:r,state:c,relative:i})},[j,f,i,r,c]),null}function Wb(n){return Bb(n.context)}function ye(n){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ey({basename:n="/",children:r=null,location:c,navigationType:i="POP",navigator:u,static:h=!1,unstable_useTransitions:x}){nt(!Fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let j=n.replace(/^\/*/,"/"),y=m.useMemo(()=>({basename:j,navigator:u,static:h,unstable_useTransitions:x,future:{}}),[j,u,h,x]);typeof c=="string"&&(c=Hl(c));let{pathname:f="/",search:p="",hash:g="",state:w=null,key:A="default"}=c,k=m.useMemo(()=>{let S=Ja(f,j);return S==null?null:{location:{pathname:S,search:p,hash:g,state:w,key:A},navigationType:i}},[j,f,p,g,w,A,i]);return sa(k!=null,`<Router basename="${j}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:m.createElement(la.Provider,{value:y},m.createElement(Xn.Provider,{children:r,value:k}))}function ty({children:n,location:r}){return Hb(bd(n),r)}function bd(n,r=[]){let c=[];return m.Children.forEach(n,(i,u)=>{if(!m.isValidElement(i))return;let h=[...r,u];if(i.type===m.Fragment){c.push.apply(c,bd(i.props.children,h));return}nt(i.type===ye,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let x={id:i.props.id||h.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(x.children=bd(i.props.children,h)),c.push(x)}),c}var ki="get",Si="application/x-www-form-urlencoded";function Oi(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ay(n){return Oi(n)&&n.tagName.toLowerCase()==="button"}function sy(n){return Oi(n)&&n.tagName.toLowerCase()==="form"}function ly(n){return Oi(n)&&n.tagName.toLowerCase()==="input"}function ny(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ry(n,r){return n.button===0&&(!r||r==="_self")&&!ny(n)}function yd(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((r,c)=>{let i=n[c];return r.concat(Array.isArray(i)?i.map(u=>[c,u]):[[c,i]])},[]))}function iy(n,r){let c=yd(n);return r&&r.forEach((i,u)=>{c.has(u)||r.getAll(u).forEach(h=>{c.append(u,h)})}),c}var bi=null;function oy(){if(bi===null)try{new FormData(document.createElement("form"),0),bi=!1}catch{bi=!0}return bi}var cy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dd(n){return n!=null&&!cy.has(n)?(sa(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Si}"`),null):n}function dy(n,r){let c,i,u,h,x;if(sy(n)){let j=n.getAttribute("action");i=j?Ja(j,r):null,c=n.getAttribute("method")||ki,u=dd(n.getAttribute("enctype"))||Si,h=new FormData(n)}else if(ay(n)||ly(n)&&(n.type==="submit"||n.type==="image")){let j=n.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||j.getAttribute("action");if(i=y?Ja(y,r):null,c=n.getAttribute("formmethod")||j.getAttribute("method")||ki,u=dd(n.getAttribute("formenctype"))||dd(j.getAttribute("enctype"))||Si,h=new FormData(j,n),!oy()){let{name:f,type:p,value:g}=n;if(p==="image"){let w=f?`${f}.`:"";h.append(`${w}x`,"0"),h.append(`${w}y`,"0")}else f&&h.append(f,g)}}else{if(Oi(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=ki,i=null,u=Si,x=n}return h&&u==="text/plain"&&(x=h,h=void 0),{action:i,method:c.toLowerCase(),encType:u,formData:h,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rd(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function uy(n,r,c){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${c}`:r&&Ja(i.pathname,r)==="/"?i.pathname=`${r.replace(/\/$/,"")}/_root.${c}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${c}`,i}async function my(n,r){if(n.id in r)return r[n.id];try{let c=await import(n.module);return r[n.id]=c,c}catch(c){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xy(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hy(n,r,c){let i=await Promise.all(n.map(async u=>{let h=r.routes[u.route.id];if(h){let x=await my(h,c);return x.links?x.links():[]}return[]}));return by(i.flat(1).filter(xy).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Wh(n,r,c,i,u,h){let x=(y,f)=>c[f]?y.route.id!==c[f].route.id:!0,j=(y,f)=>c[f].pathname!==y.pathname||c[f].route.path?.endsWith("*")&&c[f].params["*"]!==y.params["*"];return h==="assets"?r.filter((y,f)=>x(y,f)||j(y,f)):h==="data"?r.filter((y,f)=>{let p=i.routes[y.route.id];if(!p||!p.hasLoader)return!1;if(x(y,f)||j(y,f))return!0;if(y.route.shouldRevalidate){let g=y.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:c[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function py(n,r,{includeHydrateFallback:c}={}){return fy(n.map(i=>{let u=r.routes[i.route.id];if(!u)return[];let h=[u.module];return u.clientActionModule&&(h=h.concat(u.clientActionModule)),u.clientLoaderModule&&(h=h.concat(u.clientLoaderModule)),c&&u.hydrateFallbackModule&&(h=h.concat(u.hydrateFallbackModule)),u.imports&&(h=h.concat(u.imports)),h}).flat(1))}function fy(n){return[...new Set(n)]}function gy(n){let r={},c=Object.keys(n).sort();for(let i of c)r[i]=n[i];return r}function by(n,r){let c=new Set;return new Set(r),n.reduce((i,u)=>{let h=JSON.stringify(gy(u));return c.has(h)||(c.add(h),i.push({key:h,link:u})),i},[])}function $0(){let n=m.useContext(Gl);return Rd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yy(){let n=m.useContext(Mi);return Rd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Md=m.createContext(void 0);Md.displayName="FrameworkContext";function Y0(){let n=m.useContext(Md);return Rd(n,"You must render this element inside a <HydratedRouter> element"),n}function vy(n,r){let c=m.useContext(Md),[i,u]=m.useState(!1),[h,x]=m.useState(!1),{onFocus:j,onBlur:y,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=r,w=m.useRef(null);m.useEffect(()=>{if(n==="render"&&x(!0),n==="viewport"){let S=E=>{E.forEach(T=>{x(T.isIntersecting)})},b=new IntersectionObserver(S,{threshold:.5});return w.current&&b.observe(w.current),()=>{b.disconnect()}}},[n]),m.useEffect(()=>{if(i){let S=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(S)}}},[i]);let A=()=>{u(!0)},k=()=>{u(!1),x(!1)};return c?n!=="intent"?[h,w,{}]:[h,w,{onFocus:Bn(j,A),onBlur:Bn(y,k),onMouseEnter:Bn(f,A),onMouseLeave:Bn(p,k),onTouchStart:Bn(g,A)}]:[!1,w,{}]}function Bn(n,r){return c=>{n&&n(c),c.defaultPrevented||r(c)}}function jy({page:n,...r}){let{router:c}=$0(),i=m.useMemo(()=>E0(c.routes,n,c.basename),[c.routes,n,c.basename]);return i?m.createElement(wy,{page:n,matches:i,...r}):null}function Ny(n){let{manifest:r,routeModules:c}=Y0(),[i,u]=m.useState([]);return m.useEffect(()=>{let h=!1;return hy(n,r,c).then(x=>{h||u(x)}),()=>{h=!0}},[n,r,c]),i}function wy({page:n,matches:r,...c}){let i=ga(),{manifest:u,routeModules:h}=Y0(),{basename:x}=$0(),{loaderData:j,matches:y}=yy(),f=m.useMemo(()=>Wh(n,r,y,u,i,"data"),[n,r,y,u,i]),p=m.useMemo(()=>Wh(n,r,y,u,i,"assets"),[n,r,y,u,i]),g=m.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let k=new Set,S=!1;if(r.forEach(E=>{let T=u.routes[E.route.id];!T||!T.hasLoader||(!f.some(D=>D.route.id===E.route.id)&&E.route.id in j&&h[E.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:k.add(E.route.id))}),k.size===0)return[];let b=uy(n,x,"data");return S&&k.size>0&&b.searchParams.set("_routes",r.filter(E=>k.has(E.route.id)).map(E=>E.route.id).join(",")),[b.pathname+b.search]},[x,j,i,u,f,r,n,h]),w=m.useMemo(()=>py(p,u),[p,u]),A=Ny(p);return m.createElement(m.Fragment,null,g.map(k=>m.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...c})),w.map(k=>m.createElement("link",{key:k,rel:"modulepreload",href:k,...c})),A.map(({key:k,link:S})=>m.createElement("link",{key:k,nonce:c.nonce,...S})))}function ky(...n){return r=>{n.forEach(c=>{typeof c=="function"?c(r):c!=null&&(c.current=r)})}}var Sy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sy&&(window.__reactRouterVersion="7.11.0")}catch{}function _y({basename:n,children:r,unstable_useTransitions:c,window:i}){let u=m.useRef();u.current==null&&(u.current=ab({window:i,v5Compat:!0}));let h=u.current,[x,j]=m.useState({action:h.action,location:h.location}),y=m.useCallback(f=>{c===!1?j(f):m.startTransition(()=>j(f))},[c]);return m.useLayoutEffect(()=>h.listen(y),[h,y]),m.createElement(ey,{basename:n,children:r,location:x.location,navigationType:x.action,navigator:h,unstable_useTransitions:c})}var Q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V0=m.forwardRef(function({onClick:r,discover:c="render",prefetch:i="none",relative:u,reloadDocument:h,replace:x,state:j,target:y,to:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:w,...A},k){let{basename:S,unstable_useTransitions:b}=m.useContext(la),E=typeof f=="string"&&Q0.test(f),T=M0(f,S);f=T.to;let D=Lb(f,{relative:u}),[z,R,W]=vy(i,A),I=Ay(f,{replace:x,state:j,target:y,preventScrollReset:p,relative:u,viewTransition:g,unstable_defaultShouldRevalidate:w,unstable_useTransitions:b});function q(U){r&&r(U),U.defaultPrevented||I(U)}let oe=m.createElement("a",{...A,...W,href:T.absoluteURL||D,onClick:T.isExternal||h?r:q,ref:ky(k,R),target:y,"data-discover":!E&&c==="render"?"true":void 0});return z&&!E?m.createElement(m.Fragment,null,oe,m.createElement(jy,{page:D})):oe});V0.displayName="Link";var vd=m.forwardRef(function({"aria-current":r="page",caseSensitive:c=!1,className:i="",end:u=!1,style:h,to:x,viewTransition:j,children:y,...f},p){let g=Kn(x,{relative:f.relative}),w=ga(),A=m.useContext(Mi),{navigator:k,basename:S}=m.useContext(la),b=A!=null&&zy(g)&&j===!0,E=k.encodeLocation?k.encodeLocation(g).pathname:g.pathname,T=w.pathname,D=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;c||(T=T.toLowerCase(),D=D?D.toLowerCase():null,E=E.toLowerCase()),D&&S&&(D=Ja(D,S)||D);const z=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let R=T===E||!u&&T.startsWith(E)&&T.charAt(z)==="/",W=D!=null&&(D===E||!u&&D.startsWith(E)&&D.charAt(E.length)==="/"),I={isActive:R,isPending:W,isTransitioning:b},q=R?r:void 0,oe;typeof i=="function"?oe=i(I):oe=[i,R?"active":null,W?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let U=typeof h=="function"?h(I):h;return m.createElement(V0,{...f,"aria-current":q,className:oe,ref:p,style:U,to:x,viewTransition:j},typeof y=="function"?y(I):y)});vd.displayName="NavLink";var Cy=m.forwardRef(({discover:n="render",fetcherKey:r,navigate:c,reloadDocument:i,replace:u,state:h,method:x=ki,action:j,onSubmit:y,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:w,...A},k)=>{let{unstable_useTransitions:S}=m.useContext(la),b=My(),E=Oy(j,{relative:f}),T=x.toLowerCase()==="get"?"get":"post",D=typeof j=="string"&&Q0.test(j),z=R=>{if(y&&y(R),R.defaultPrevented)return;R.preventDefault();let W=R.nativeEvent.submitter,I=W?.getAttribute("formmethod")||x,q=()=>b(W||R.currentTarget,{fetcherKey:r,method:I,navigate:c,replace:u,state:h,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:w});S&&c!==!1?m.startTransition(()=>q()):q()};return m.createElement("form",{ref:k,method:T,action:E,onSubmit:i?y:z,...A,"data-discover":!D&&n==="render"?"true":void 0})});Cy.displayName="Form";function Ey(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function P0(n){let r=m.useContext(Gl);return nt(r,Ey(n)),r}function Ay(n,{target:r,replace:c,state:i,preventScrollReset:u,relative:h,viewTransition:x,unstable_defaultShouldRevalidate:j,unstable_useTransitions:y}={}){let f=Be(),p=ga(),g=Kn(n,{relative:h});return m.useCallback(w=>{if(ry(w,r)){w.preventDefault();let A=c!==void 0?c:Pn(p)===Pn(g),k=()=>f(n,{replace:A,state:i,preventScrollReset:u,relative:h,viewTransition:x,unstable_defaultShouldRevalidate:j});y?m.startTransition(()=>k()):k()}},[p,f,g,c,i,r,n,u,h,x,j,y])}function Ty(n){sa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=m.useRef(yd(n)),c=m.useRef(!1),i=ga(),u=m.useMemo(()=>iy(i.search,c.current?null:r.current),[i.search]),h=Be(),x=m.useCallback((j,y)=>{const f=yd(typeof j=="function"?j(new URLSearchParams(u)):j);c.current=!0,h("?"+f,y)},[h,u]);return[u,x]}var Dy=0,Ry=()=>`__${String(++Dy)}__`;function My(){let{router:n}=P0("useSubmit"),{basename:r}=m.useContext(la),c=Zb(),i=n.fetch,u=n.navigate;return m.useCallback(async(h,x={})=>{let{action:j,method:y,encType:f,formData:p,body:g}=dy(h,r);if(x.navigate===!1){let w=x.fetcherKey||Ry();await i(w,c,x.action||j,{unstable_defaultShouldRevalidate:x.unstable_defaultShouldRevalidate,preventScrollReset:x.preventScrollReset,formData:p,body:g,formMethod:x.method||y,formEncType:x.encType||f,flushSync:x.flushSync})}else await u(x.action||j,{unstable_defaultShouldRevalidate:x.unstable_defaultShouldRevalidate,preventScrollReset:x.preventScrollReset,formData:p,body:g,formMethod:x.method||y,formEncType:x.encType||f,replace:x.replace,state:x.state,fromRouteId:c,flushSync:x.flushSync,viewTransition:x.viewTransition})},[i,u,r,c])}function Oy(n,{relative:r}={}){let{basename:c}=m.useContext(la),i=m.useContext(fa);nt(i,"useFormAction must be used inside a RouteContext");let[u]=i.matches.slice(-1),h={...Kn(n||".",{relative:r})},x=ga();if(n==null){h.search=x.search;let j=new URLSearchParams(h.search),y=j.getAll("index");if(y.some(p=>p==="")){j.delete("index"),y.filter(g=>g).forEach(g=>j.append("index",g));let p=j.toString();h.search=p?`?${p}`:""}}return(!n||n===".")&&u.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(h.pathname=h.pathname==="/"?c:Ia([c,h.pathname])),Pn(h)}function zy(n,{relative:r}={}){let c=m.useContext(z0);nt(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=P0("useViewTransitionState"),u=Kn(n,{relative:r});if(!c.isTransitioning)return!1;let h=Ja(c.currentLocation.pathname,i)||c.currentLocation.pathname,x=Ja(c.nextLocation.pathname,i)||c.nextLocation.pathname;return Ti(u.pathname,x)!=null||Ti(u.pathname,h)!=null}function X0(n,r){return function(){return n.apply(r,arguments)}}const{toString:Ly}=Object.prototype,{getPrototypeOf:Od}=Object,{iterator:zi,toStringTag:Z0}=Symbol,Li=(n=>r=>{const c=Ly.call(r);return n[c]||(n[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),wa=n=>(n=n.toLowerCase(),r=>Li(r)===n),Ui=n=>r=>typeof r===n,{isArray:$l}=Array,ql=Ui("undefined");function In(n){return n!==null&&!ql(n)&&n.constructor!==null&&!ql(n.constructor)&&Vt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const K0=wa("ArrayBuffer");function Uy(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&K0(n.buffer),r}const qy=Ui("string"),Vt=Ui("function"),I0=Ui("number"),Jn=n=>n!==null&&typeof n=="object",By=n=>n===!0||n===!1,_i=n=>{if(Li(n)!=="object")return!1;const r=Od(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Z0 in n)&&!(zi in n)},Hy=n=>{if(!Jn(n)||In(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Gy=wa("Date"),Fy=wa("File"),$y=wa("Blob"),Yy=wa("FileList"),Qy=n=>Jn(n)&&Vt(n.pipe),Vy=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||Vt(n.append)&&((r=Li(n))==="formdata"||r==="object"&&Vt(n.toString)&&n.toString()==="[object FormData]"))},Py=wa("URLSearchParams"),[Xy,Zy,Ky,Iy]=["ReadableStream","Request","Response","Headers"].map(wa),Jy=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wn(n,r,{allOwnKeys:c=!1}={}){if(n===null||typeof n>"u")return;let i,u;if(typeof n!="object"&&(n=[n]),$l(n))for(i=0,u=n.length;i<u;i++)r.call(null,n[i],i,n);else{if(In(n))return;const h=c?Object.getOwnPropertyNames(n):Object.keys(n),x=h.length;let j;for(i=0;i<x;i++)j=h[i],r.call(null,n[j],j,n)}}function J0(n,r){if(In(n))return null;r=r.toLowerCase();const c=Object.keys(n);let i=c.length,u;for(;i-- >0;)if(u=c[i],r===u.toLowerCase())return u;return null}const Vs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,W0=n=>!ql(n)&&n!==Vs;function jd(){const{caseless:n,skipUndefined:r}=W0(this)&&this||{},c={},i=(u,h)=>{const x=n&&J0(c,h)||h;_i(c[x])&&_i(u)?c[x]=jd(c[x],u):_i(u)?c[x]=jd({},u):$l(u)?c[x]=u.slice():(!r||!ql(u))&&(c[x]=u)};for(let u=0,h=arguments.length;u<h;u++)arguments[u]&&Wn(arguments[u],i);return c}const Wy=(n,r,c,{allOwnKeys:i}={})=>(Wn(r,(u,h)=>{c&&Vt(u)?n[h]=X0(u,c):n[h]=u},{allOwnKeys:i}),n),ev=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),tv=(n,r,c,i)=>{n.prototype=Object.create(r.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),c&&Object.assign(n.prototype,c)},av=(n,r,c,i)=>{let u,h,x;const j={};if(r=r||{},n==null)return r;do{for(u=Object.getOwnPropertyNames(n),h=u.length;h-- >0;)x=u[h],(!i||i(x,n,r))&&!j[x]&&(r[x]=n[x],j[x]=!0);n=c!==!1&&Od(n)}while(n&&(!c||c(n,r))&&n!==Object.prototype);return r},sv=(n,r,c)=>{n=String(n),(c===void 0||c>n.length)&&(c=n.length),c-=r.length;const i=n.indexOf(r,c);return i!==-1&&i===c},lv=n=>{if(!n)return null;if($l(n))return n;let r=n.length;if(!I0(r))return null;const c=new Array(r);for(;r-- >0;)c[r]=n[r];return c},nv=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&Od(Uint8Array)),rv=(n,r)=>{const i=(n&&n[zi]).call(n);let u;for(;(u=i.next())&&!u.done;){const h=u.value;r.call(n,h[0],h[1])}},iv=(n,r)=>{let c;const i=[];for(;(c=n.exec(r))!==null;)i.push(c);return i},ov=wa("HTMLFormElement"),cv=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,i,u){return i.toUpperCase()+u}),e0=(({hasOwnProperty:n})=>(r,c)=>n.call(r,c))(Object.prototype),dv=wa("RegExp"),ep=(n,r)=>{const c=Object.getOwnPropertyDescriptors(n),i={};Wn(c,(u,h)=>{let x;(x=r(u,h,n))!==!1&&(i[h]=x||u)}),Object.defineProperties(n,i)},uv=n=>{ep(n,(r,c)=>{if(Vt(n)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const i=n[c];if(Vt(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},mv=(n,r)=>{const c={},i=u=>{u.forEach(h=>{c[h]=!0})};return $l(n)?i(n):i(String(n).split(r)),c},xv=()=>{},hv=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r;function pv(n){return!!(n&&Vt(n.append)&&n[Z0]==="FormData"&&n[zi])}const fv=n=>{const r=new Array(10),c=(i,u)=>{if(Jn(i)){if(r.indexOf(i)>=0)return;if(In(i))return i;if(!("toJSON"in i)){r[u]=i;const h=$l(i)?[]:{};return Wn(i,(x,j)=>{const y=c(x,u+1);!ql(y)&&(h[j]=y)}),r[u]=void 0,h}}return i};return c(n,0)},gv=wa("AsyncFunction"),bv=n=>n&&(Jn(n)||Vt(n))&&Vt(n.then)&&Vt(n.catch),tp=((n,r)=>n?setImmediate:r?((c,i)=>(Vs.addEventListener("message",({source:u,data:h})=>{u===Vs&&h===c&&i.length&&i.shift()()},!1),u=>{i.push(u),Vs.postMessage(c,"*")}))(`axios@${Math.random()}`,[]):c=>setTimeout(c))(typeof setImmediate=="function",Vt(Vs.postMessage)),yv=typeof queueMicrotask<"u"?queueMicrotask.bind(Vs):typeof process<"u"&&process.nextTick||tp,vv=n=>n!=null&&Vt(n[zi]),ee={isArray:$l,isArrayBuffer:K0,isBuffer:In,isFormData:Vy,isArrayBufferView:Uy,isString:qy,isNumber:I0,isBoolean:By,isObject:Jn,isPlainObject:_i,isEmptyObject:Hy,isReadableStream:Xy,isRequest:Zy,isResponse:Ky,isHeaders:Iy,isUndefined:ql,isDate:Gy,isFile:Fy,isBlob:$y,isRegExp:dv,isFunction:Vt,isStream:Qy,isURLSearchParams:Py,isTypedArray:nv,isFileList:Yy,forEach:Wn,merge:jd,extend:Wy,trim:Jy,stripBOM:ev,inherits:tv,toFlatObject:av,kindOf:Li,kindOfTest:wa,endsWith:sv,toArray:lv,forEachEntry:rv,matchAll:iv,isHTMLForm:ov,hasOwnProperty:e0,hasOwnProp:e0,reduceDescriptors:ep,freezeMethods:uv,toObjectSet:mv,toCamelCase:cv,noop:xv,toFiniteNumber:hv,findKey:J0,global:Vs,isContextDefined:W0,isSpecCompliantForm:pv,toJSONObject:fv,isAsyncFn:gv,isThenable:bv,setImmediate:tp,asap:yv,isIterable:vv};function De(n,r,c,i,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),c&&(this.config=c),i&&(this.request=i),u&&(this.response=u,this.status=u.status?u.status:null)}ee.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const ap=De.prototype,sp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{sp[n]={value:n}});Object.defineProperties(De,sp);Object.defineProperty(ap,"isAxiosError",{value:!0});De.from=(n,r,c,i,u,h)=>{const x=Object.create(ap);ee.toFlatObject(n,x,function(p){return p!==Error.prototype},f=>f!=="isAxiosError");const j=n&&n.message?n.message:"Error",y=r==null&&n?n.code:r;return De.call(x,j,y,c,i,u),n&&x.cause==null&&Object.defineProperty(x,"cause",{value:n,configurable:!0}),x.name=n&&n.name||"Error",h&&Object.assign(x,h),x};const jv=null;function Nd(n){return ee.isPlainObject(n)||ee.isArray(n)}function lp(n){return ee.endsWith(n,"[]")?n.slice(0,-2):n}function t0(n,r,c){return n?n.concat(r).map(function(u,h){return u=lp(u),!c&&h?"["+u+"]":u}).join(c?".":""):r}function Nv(n){return ee.isArray(n)&&!n.some(Nd)}const wv=ee.toFlatObject(ee,{},null,function(r){return/^is[A-Z]/.test(r)});function qi(n,r,c){if(!ee.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,c=ee.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,b){return!ee.isUndefined(b[S])});const i=c.metaTokens,u=c.visitor||p,h=c.dots,x=c.indexes,y=(c.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(r);if(!ee.isFunction(u))throw new TypeError("visitor must be a function");function f(k){if(k===null)return"";if(ee.isDate(k))return k.toISOString();if(ee.isBoolean(k))return k.toString();if(!y&&ee.isBlob(k))throw new De("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(k)||ee.isTypedArray(k)?y&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function p(k,S,b){let E=k;if(k&&!b&&typeof k=="object"){if(ee.endsWith(S,"{}"))S=i?S:S.slice(0,-2),k=JSON.stringify(k);else if(ee.isArray(k)&&Nv(k)||(ee.isFileList(k)||ee.endsWith(S,"[]"))&&(E=ee.toArray(k)))return S=lp(S),E.forEach(function(D,z){!(ee.isUndefined(D)||D===null)&&r.append(x===!0?t0([S],z,h):x===null?S:S+"[]",f(D))}),!1}return Nd(k)?!0:(r.append(t0(b,S,h),f(k)),!1)}const g=[],w=Object.assign(wv,{defaultVisitor:p,convertValue:f,isVisitable:Nd});function A(k,S){if(!ee.isUndefined(k)){if(g.indexOf(k)!==-1)throw Error("Circular reference detected in "+S.join("."));g.push(k),ee.forEach(k,function(E,T){(!(ee.isUndefined(E)||E===null)&&u.call(r,E,ee.isString(T)?T.trim():T,S,w))===!0&&A(E,S?S.concat(T):[T])}),g.pop()}}if(!ee.isObject(n))throw new TypeError("data must be an object");return A(n),r}function a0(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function zd(n,r){this._pairs=[],n&&qi(n,this,r)}const np=zd.prototype;np.append=function(r,c){this._pairs.push([r,c])};np.toString=function(r){const c=r?function(i){return r.call(this,i,a0)}:a0;return this._pairs.map(function(u){return c(u[0])+"="+c(u[1])},"").join("&")};function kv(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rp(n,r,c){if(!r)return n;const i=c&&c.encode||kv;ee.isFunction(c)&&(c={serialize:c});const u=c&&c.serialize;let h;if(u?h=u(r,c):h=ee.isURLSearchParams(r)?r.toString():new zd(r,c).toString(i),h){const x=n.indexOf("#");x!==-1&&(n=n.slice(0,x)),n+=(n.indexOf("?")===-1?"?":"&")+h}return n}class s0{constructor(){this.handlers=[]}use(r,c,i){return this.handlers.push({fulfilled:r,rejected:c,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){ee.forEach(this.handlers,function(i){i!==null&&r(i)})}}const ip={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sv=typeof URLSearchParams<"u"?URLSearchParams:zd,_v=typeof FormData<"u"?FormData:null,Cv=typeof Blob<"u"?Blob:null,Ev={isBrowser:!0,classes:{URLSearchParams:Sv,FormData:_v,Blob:Cv},protocols:["http","https","file","blob","url","data"]},Ld=typeof window<"u"&&typeof document<"u",wd=typeof navigator=="object"&&navigator||void 0,Av=Ld&&(!wd||["ReactNative","NativeScript","NS"].indexOf(wd.product)<0),Tv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Dv=Ld&&window.location.href||"http://localhost",Rv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ld,hasStandardBrowserEnv:Av,hasStandardBrowserWebWorkerEnv:Tv,navigator:wd,origin:Dv},Symbol.toStringTag,{value:"Module"})),Mt={...Rv,...Ev};function Mv(n,r){return qi(n,new Mt.classes.URLSearchParams,{visitor:function(c,i,u,h){return Mt.isNode&&ee.isBuffer(c)?(this.append(i,c.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...r})}function Ov(n){return ee.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function zv(n){const r={},c=Object.keys(n);let i;const u=c.length;let h;for(i=0;i<u;i++)h=c[i],r[h]=n[h];return r}function op(n){function r(c,i,u,h){let x=c[h++];if(x==="__proto__")return!0;const j=Number.isFinite(+x),y=h>=c.length;return x=!x&&ee.isArray(u)?u.length:x,y?(ee.hasOwnProp(u,x)?u[x]=[u[x],i]:u[x]=i,!j):((!u[x]||!ee.isObject(u[x]))&&(u[x]=[]),r(c,i,u[x],h)&&ee.isArray(u[x])&&(u[x]=zv(u[x])),!j)}if(ee.isFormData(n)&&ee.isFunction(n.entries)){const c={};return ee.forEachEntry(n,(i,u)=>{r(Ov(i),u,c,0)}),c}return null}function Lv(n,r,c){if(ee.isString(n))try{return(r||JSON.parse)(n),ee.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(c||JSON.stringify)(n)}const er={transitional:ip,adapter:["xhr","http","fetch"],transformRequest:[function(r,c){const i=c.getContentType()||"",u=i.indexOf("application/json")>-1,h=ee.isObject(r);if(h&&ee.isHTMLForm(r)&&(r=new FormData(r)),ee.isFormData(r))return u?JSON.stringify(op(r)):r;if(ee.isArrayBuffer(r)||ee.isBuffer(r)||ee.isStream(r)||ee.isFile(r)||ee.isBlob(r)||ee.isReadableStream(r))return r;if(ee.isArrayBufferView(r))return r.buffer;if(ee.isURLSearchParams(r))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let j;if(h){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Mv(r,this.formSerializer).toString();if((j=ee.isFileList(r))||i.indexOf("multipart/form-data")>-1){const y=this.env&&this.env.FormData;return qi(j?{"files[]":r}:r,y&&new y,this.formSerializer)}}return h||u?(c.setContentType("application/json",!1),Lv(r)):r}],transformResponse:[function(r){const c=this.transitional||er.transitional,i=c&&c.forcedJSONParsing,u=this.responseType==="json";if(ee.isResponse(r)||ee.isReadableStream(r))return r;if(r&&ee.isString(r)&&(i&&!this.responseType||u)){const x=!(c&&c.silentJSONParsing)&&u;try{return JSON.parse(r,this.parseReviver)}catch(j){if(x)throw j.name==="SyntaxError"?De.from(j,De.ERR_BAD_RESPONSE,this,null,this.response):j}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mt.classes.FormData,Blob:Mt.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],n=>{er.headers[n]={}});const Uv=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qv=n=>{const r={};let c,i,u;return n&&n.split(`
`).forEach(function(x){u=x.indexOf(":"),c=x.substring(0,u).trim().toLowerCase(),i=x.substring(u+1).trim(),!(!c||r[c]&&Uv[c])&&(c==="set-cookie"?r[c]?r[c].push(i):r[c]=[i]:r[c]=r[c]?r[c]+", "+i:i)}),r},l0=Symbol("internals");function Hn(n){return n&&String(n).trim().toLowerCase()}function Ci(n){return n===!1||n==null?n:ee.isArray(n)?n.map(Ci):String(n)}function Bv(n){const r=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=c.exec(n);)r[i[1]]=i[2];return r}const Hv=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ud(n,r,c,i,u){if(ee.isFunction(i))return i.call(this,r,c);if(u&&(r=c),!!ee.isString(r)){if(ee.isString(i))return r.indexOf(i)!==-1;if(ee.isRegExp(i))return i.test(r)}}function Gv(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,c,i)=>c.toUpperCase()+i)}function Fv(n,r){const c=ee.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+c,{value:function(u,h,x){return this[i].call(this,r,u,h,x)},configurable:!0})})}let Pt=class{constructor(r){r&&this.set(r)}set(r,c,i){const u=this;function h(j,y,f){const p=Hn(y);if(!p)throw new Error("header name must be a non-empty string");const g=ee.findKey(u,p);(!g||u[g]===void 0||f===!0||f===void 0&&u[g]!==!1)&&(u[g||y]=Ci(j))}const x=(j,y)=>ee.forEach(j,(f,p)=>h(f,p,y));if(ee.isPlainObject(r)||r instanceof this.constructor)x(r,c);else if(ee.isString(r)&&(r=r.trim())&&!Hv(r))x(qv(r),c);else if(ee.isObject(r)&&ee.isIterable(r)){let j={},y,f;for(const p of r){if(!ee.isArray(p))throw TypeError("Object iterator must return a key-value pair");j[f=p[0]]=(y=j[f])?ee.isArray(y)?[...y,p[1]]:[y,p[1]]:p[1]}x(j,c)}else r!=null&&h(c,r,i);return this}get(r,c){if(r=Hn(r),r){const i=ee.findKey(this,r);if(i){const u=this[i];if(!c)return u;if(c===!0)return Bv(u);if(ee.isFunction(c))return c.call(this,u,i);if(ee.isRegExp(c))return c.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,c){if(r=Hn(r),r){const i=ee.findKey(this,r);return!!(i&&this[i]!==void 0&&(!c||ud(this,this[i],i,c)))}return!1}delete(r,c){const i=this;let u=!1;function h(x){if(x=Hn(x),x){const j=ee.findKey(i,x);j&&(!c||ud(i,i[j],j,c))&&(delete i[j],u=!0)}}return ee.isArray(r)?r.forEach(h):h(r),u}clear(r){const c=Object.keys(this);let i=c.length,u=!1;for(;i--;){const h=c[i];(!r||ud(this,this[h],h,r,!0))&&(delete this[h],u=!0)}return u}normalize(r){const c=this,i={};return ee.forEach(this,(u,h)=>{const x=ee.findKey(i,h);if(x){c[x]=Ci(u),delete c[h];return}const j=r?Gv(h):String(h).trim();j!==h&&delete c[h],c[j]=Ci(u),i[j]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const c=Object.create(null);return ee.forEach(this,(i,u)=>{i!=null&&i!==!1&&(c[u]=r&&ee.isArray(i)?i.join(", "):i)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,c])=>r+": "+c).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...c){const i=new this(r);return c.forEach(u=>i.set(u)),i}static accessor(r){const i=(this[l0]=this[l0]={accessors:{}}).accessors,u=this.prototype;function h(x){const j=Hn(x);i[j]||(Fv(u,x),i[j]=!0)}return ee.isArray(r)?r.forEach(h):h(r),this}};Pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Pt.prototype,({value:n},r)=>{let c=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(i){this[c]=i}}});ee.freezeMethods(Pt);function md(n,r){const c=this||er,i=r||c,u=Pt.from(i.headers);let h=i.data;return ee.forEach(n,function(j){h=j.call(c,h,u.normalize(),r?r.status:void 0)}),u.normalize(),h}function cp(n){return!!(n&&n.__CANCEL__)}function Yl(n,r,c){De.call(this,n??"canceled",De.ERR_CANCELED,r,c),this.name="CanceledError"}ee.inherits(Yl,De,{__CANCEL__:!0});function dp(n,r,c){const i=c.config.validateStatus;!c.status||!i||i(c.status)?n(c):r(new De("Request failed with status code "+c.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function $v(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function Yv(n,r){n=n||10;const c=new Array(n),i=new Array(n);let u=0,h=0,x;return r=r!==void 0?r:1e3,function(y){const f=Date.now(),p=i[h];x||(x=f),c[u]=y,i[u]=f;let g=h,w=0;for(;g!==u;)w+=c[g++],g=g%n;if(u=(u+1)%n,u===h&&(h=(h+1)%n),f-x<r)return;const A=p&&f-p;return A?Math.round(w*1e3/A):void 0}}function Qv(n,r){let c=0,i=1e3/r,u,h;const x=(f,p=Date.now())=>{c=p,u=null,h&&(clearTimeout(h),h=null),n(...f)};return[(...f)=>{const p=Date.now(),g=p-c;g>=i?x(f,p):(u=f,h||(h=setTimeout(()=>{h=null,x(u)},i-g)))},()=>u&&x(u)]}const Di=(n,r,c=3)=>{let i=0;const u=Yv(50,250);return Qv(h=>{const x=h.loaded,j=h.lengthComputable?h.total:void 0,y=x-i,f=u(y),p=x<=j;i=x;const g={loaded:x,total:j,progress:j?x/j:void 0,bytes:y,rate:f||void 0,estimated:f&&j&&p?(j-x)/f:void 0,event:h,lengthComputable:j!=null,[r?"download":"upload"]:!0};n(g)},c)},n0=(n,r)=>{const c=n!=null;return[i=>r[0]({lengthComputable:c,total:n,loaded:i}),r[1]]},r0=n=>(...r)=>ee.asap(()=>n(...r)),Vv=Mt.hasStandardBrowserEnv?((n,r)=>c=>(c=new URL(c,Mt.origin),n.protocol===c.protocol&&n.host===c.host&&(r||n.port===c.port)))(new URL(Mt.origin),Mt.navigator&&/(msie|trident)/i.test(Mt.navigator.userAgent)):()=>!0,Pv=Mt.hasStandardBrowserEnv?{write(n,r,c,i,u,h,x){if(typeof document>"u")return;const j=[`${n}=${encodeURIComponent(r)}`];ee.isNumber(c)&&j.push(`expires=${new Date(c).toUTCString()}`),ee.isString(i)&&j.push(`path=${i}`),ee.isString(u)&&j.push(`domain=${u}`),h===!0&&j.push("secure"),ee.isString(x)&&j.push(`SameSite=${x}`),document.cookie=j.join("; ")},read(n){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Xv(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Zv(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function up(n,r,c){let i=!Xv(r);return n&&(i||c==!1)?Zv(n,r):r}const i0=n=>n instanceof Pt?{...n}:n;function Ks(n,r){r=r||{};const c={};function i(f,p,g,w){return ee.isPlainObject(f)&&ee.isPlainObject(p)?ee.merge.call({caseless:w},f,p):ee.isPlainObject(p)?ee.merge({},p):ee.isArray(p)?p.slice():p}function u(f,p,g,w){if(ee.isUndefined(p)){if(!ee.isUndefined(f))return i(void 0,f,g,w)}else return i(f,p,g,w)}function h(f,p){if(!ee.isUndefined(p))return i(void 0,p)}function x(f,p){if(ee.isUndefined(p)){if(!ee.isUndefined(f))return i(void 0,f)}else return i(void 0,p)}function j(f,p,g){if(g in r)return i(f,p);if(g in n)return i(void 0,f)}const y={url:h,method:h,data:h,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,withXSRFToken:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:j,headers:(f,p,g)=>u(i0(f),i0(p),g,!0)};return ee.forEach(Object.keys({...n,...r}),function(p){const g=y[p]||u,w=g(n[p],r[p],p);ee.isUndefined(w)&&g!==j||(c[p]=w)}),c}const mp=n=>{const r=Ks({},n);let{data:c,withXSRFToken:i,xsrfHeaderName:u,xsrfCookieName:h,headers:x,auth:j}=r;if(r.headers=x=Pt.from(x),r.url=rp(up(r.baseURL,r.url,r.allowAbsoluteUrls),n.params,n.paramsSerializer),j&&x.set("Authorization","Basic "+btoa((j.username||"")+":"+(j.password?unescape(encodeURIComponent(j.password)):""))),ee.isFormData(c)){if(Mt.hasStandardBrowserEnv||Mt.hasStandardBrowserWebWorkerEnv)x.setContentType(void 0);else if(ee.isFunction(c.getHeaders)){const y=c.getHeaders(),f=["content-type","content-length"];Object.entries(y).forEach(([p,g])=>{f.includes(p.toLowerCase())&&x.set(p,g)})}}if(Mt.hasStandardBrowserEnv&&(i&&ee.isFunction(i)&&(i=i(r)),i||i!==!1&&Vv(r.url))){const y=u&&h&&Pv.read(h);y&&x.set(u,y)}return r},Kv=typeof XMLHttpRequest<"u",Iv=Kv&&function(n){return new Promise(function(c,i){const u=mp(n);let h=u.data;const x=Pt.from(u.headers).normalize();let{responseType:j,onUploadProgress:y,onDownloadProgress:f}=u,p,g,w,A,k;function S(){A&&A(),k&&k(),u.cancelToken&&u.cancelToken.unsubscribe(p),u.signal&&u.signal.removeEventListener("abort",p)}let b=new XMLHttpRequest;b.open(u.method.toUpperCase(),u.url,!0),b.timeout=u.timeout;function E(){if(!b)return;const D=Pt.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),R={data:!j||j==="text"||j==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:D,config:n,request:b};dp(function(I){c(I),S()},function(I){i(I),S()},R),b=null}"onloadend"in b?b.onloadend=E:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(E)},b.onabort=function(){b&&(i(new De("Request aborted",De.ECONNABORTED,n,b)),b=null)},b.onerror=function(z){const R=z&&z.message?z.message:"Network Error",W=new De(R,De.ERR_NETWORK,n,b);W.event=z||null,i(W),b=null},b.ontimeout=function(){let z=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const R=u.transitional||ip;u.timeoutErrorMessage&&(z=u.timeoutErrorMessage),i(new De(z,R.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,n,b)),b=null},h===void 0&&x.setContentType(null),"setRequestHeader"in b&&ee.forEach(x.toJSON(),function(z,R){b.setRequestHeader(R,z)}),ee.isUndefined(u.withCredentials)||(b.withCredentials=!!u.withCredentials),j&&j!=="json"&&(b.responseType=u.responseType),f&&([w,k]=Di(f,!0),b.addEventListener("progress",w)),y&&b.upload&&([g,A]=Di(y),b.upload.addEventListener("progress",g),b.upload.addEventListener("loadend",A)),(u.cancelToken||u.signal)&&(p=D=>{b&&(i(!D||D.type?new Yl(null,n,b):D),b.abort(),b=null)},u.cancelToken&&u.cancelToken.subscribe(p),u.signal&&(u.signal.aborted?p():u.signal.addEventListener("abort",p)));const T=$v(u.url);if(T&&Mt.protocols.indexOf(T)===-1){i(new De("Unsupported protocol "+T+":",De.ERR_BAD_REQUEST,n));return}b.send(h||null)})},Jv=(n,r)=>{const{length:c}=n=n?n.filter(Boolean):[];if(r||c){let i=new AbortController,u;const h=function(f){if(!u){u=!0,j();const p=f instanceof Error?f:this.reason;i.abort(p instanceof De?p:new Yl(p instanceof Error?p.message:p))}};let x=r&&setTimeout(()=>{x=null,h(new De(`timeout ${r} of ms exceeded`,De.ETIMEDOUT))},r);const j=()=>{n&&(x&&clearTimeout(x),x=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(h):f.removeEventListener("abort",h)}),n=null)};n.forEach(f=>f.addEventListener("abort",h));const{signal:y}=i;return y.unsubscribe=()=>ee.asap(j),y}},Wv=function*(n,r){let c=n.byteLength;if(c<r){yield n;return}let i=0,u;for(;i<c;)u=i+r,yield n.slice(i,u),i=u},ej=async function*(n,r){for await(const c of tj(n))yield*Wv(c,r)},tj=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:c,value:i}=await r.read();if(c)break;yield i}}finally{await r.cancel()}},o0=(n,r,c,i)=>{const u=ej(n,r);let h=0,x,j=y=>{x||(x=!0,i&&i(y))};return new ReadableStream({async pull(y){try{const{done:f,value:p}=await u.next();if(f){j(),y.close();return}let g=p.byteLength;if(c){let w=h+=g;c(w)}y.enqueue(new Uint8Array(p))}catch(f){throw j(f),f}},cancel(y){return j(y),u.return()}},{highWaterMark:2})},c0=64*1024,{isFunction:yi}=ee,aj=(({Request:n,Response:r})=>({Request:n,Response:r}))(ee.global),{ReadableStream:d0,TextEncoder:u0}=ee.global,m0=(n,...r)=>{try{return!!n(...r)}catch{return!1}},sj=n=>{n=ee.merge.call({skipUndefined:!0},aj,n);const{fetch:r,Request:c,Response:i}=n,u=r?yi(r):typeof fetch=="function",h=yi(c),x=yi(i);if(!u)return!1;const j=u&&yi(d0),y=u&&(typeof u0=="function"?(k=>S=>k.encode(S))(new u0):async k=>new Uint8Array(await new c(k).arrayBuffer())),f=h&&j&&m0(()=>{let k=!1;const S=new c(Mt.origin,{body:new d0,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!S}),p=x&&j&&m0(()=>ee.isReadableStream(new i("").body)),g={stream:p&&(k=>k.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!g[k]&&(g[k]=(S,b)=>{let E=S&&S[k];if(E)return E.call(S);throw new De(`Response type '${k}' is not supported`,De.ERR_NOT_SUPPORT,b)})});const w=async k=>{if(k==null)return 0;if(ee.isBlob(k))return k.size;if(ee.isSpecCompliantForm(k))return(await new c(Mt.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(k)||ee.isArrayBuffer(k))return k.byteLength;if(ee.isURLSearchParams(k)&&(k=k+""),ee.isString(k))return(await y(k)).byteLength},A=async(k,S)=>{const b=ee.toFiniteNumber(k.getContentLength());return b??w(S)};return async k=>{let{url:S,method:b,data:E,signal:T,cancelToken:D,timeout:z,onDownloadProgress:R,onUploadProgress:W,responseType:I,headers:q,withCredentials:oe="same-origin",fetchOptions:U}=mp(k),M=r||fetch;I=I?(I+"").toLowerCase():"text";let Q=Jv([T,D&&D.toAbortSignal()],z),he=null;const xe=Q&&Q.unsubscribe&&(()=>{Q.unsubscribe()});let be;try{if(W&&f&&b!=="get"&&b!=="head"&&(be=await A(q,E))!==0){let _=new c(S,{method:"POST",body:E,duplex:"half"}),Y;if(ee.isFormData(E)&&(Y=_.headers.get("content-type"))&&q.setContentType(Y),_.body){const[G,F]=n0(be,Di(r0(W)));E=o0(_.body,c0,G,F)}}ee.isString(oe)||(oe=oe?"include":"omit");const O=h&&"credentials"in c.prototype,V={...U,signal:Q,method:b.toUpperCase(),headers:q.normalize().toJSON(),body:E,duplex:"half",credentials:O?oe:void 0};he=h&&new c(S,V);let se=await(h?M(he,U):M(S,V));const te=p&&(I==="stream"||I==="response");if(p&&(R||te&&xe)){const _={};["status","statusText","headers"].forEach(P=>{_[P]=se[P]});const Y=ee.toFiniteNumber(se.headers.get("content-length")),[G,F]=R&&n0(Y,Di(r0(R),!0))||[];se=new i(o0(se.body,c0,G,()=>{F&&F(),xe&&xe()}),_)}I=I||"text";let N=await g[ee.findKey(g,I)||"text"](se,k);return!te&&xe&&xe(),await new Promise((_,Y)=>{dp(_,Y,{data:N,headers:Pt.from(se.headers),status:se.status,statusText:se.statusText,config:k,request:he})})}catch(O){throw xe&&xe(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,k,he),{cause:O.cause||O}):De.from(O,O&&O.code,k,he)}}},lj=new Map,xp=n=>{let r=n&&n.env||{};const{fetch:c,Request:i,Response:u}=r,h=[i,u,c];let x=h.length,j=x,y,f,p=lj;for(;j--;)y=h[j],f=p.get(y),f===void 0&&p.set(y,f=j?new Map:sj(r)),p=f;return f};xp();const Ud={http:jv,xhr:Iv,fetch:{get:xp}};ee.forEach(Ud,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const x0=n=>`- ${n}`,nj=n=>ee.isFunction(n)||n===null||n===!1;function rj(n,r){n=ee.isArray(n)?n:[n];const{length:c}=n;let i,u;const h={};for(let x=0;x<c;x++){i=n[x];let j;if(u=i,!nj(i)&&(u=Ud[(j=String(i)).toLowerCase()],u===void 0))throw new De(`Unknown adapter '${j}'`);if(u&&(ee.isFunction(u)||(u=u.get(r))))break;h[j||"#"+x]=u}if(!u){const x=Object.entries(h).map(([y,f])=>`adapter ${y} `+(f===!1?"is not supported by the environment":"is not available in the build"));let j=c?x.length>1?`since :
`+x.map(x0).join(`
`):" "+x0(x[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+j,"ERR_NOT_SUPPORT")}return u}const hp={getAdapter:rj,adapters:Ud};function xd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Yl(null,n)}function h0(n){return xd(n),n.headers=Pt.from(n.headers),n.data=md.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),hp.getAdapter(n.adapter||er.adapter,n)(n).then(function(i){return xd(n),i.data=md.call(n,n.transformResponse,i),i.headers=Pt.from(i.headers),i},function(i){return cp(i)||(xd(n),i&&i.response&&(i.response.data=md.call(n,n.transformResponse,i.response),i.response.headers=Pt.from(i.response.headers))),Promise.reject(i)})}const pp="1.13.2",Bi={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{Bi[n]=function(i){return typeof i===n||"a"+(r<1?"n ":" ")+n}});const p0={};Bi.transitional=function(r,c,i){function u(h,x){return"[Axios v"+pp+"] Transitional option '"+h+"'"+x+(i?". "+i:"")}return(h,x,j)=>{if(r===!1)throw new De(u(x," has been removed"+(c?" in "+c:"")),De.ERR_DEPRECATED);return c&&!p0[x]&&(p0[x]=!0,console.warn(u(x," has been deprecated since v"+c+" and will be removed in the near future"))),r?r(h,x,j):!0}};Bi.spelling=function(r){return(c,i)=>(console.warn(`${i} is likely a misspelling of ${r}`),!0)};function ij(n,r,c){if(typeof n!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let u=i.length;for(;u-- >0;){const h=i[u],x=r[h];if(x){const j=n[h],y=j===void 0||x(j,h,n);if(y!==!0)throw new De("option "+h+" must be "+y,De.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new De("Unknown option "+h,De.ERR_BAD_OPTION)}}const Ei={assertOptions:ij,validators:Bi},Aa=Ei.validators;let Zs=class{constructor(r){this.defaults=r||{},this.interceptors={request:new s0,response:new s0}}async request(r,c){try{return await this._request(r,c)}catch(i){if(i instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const h=u.stack?u.stack.replace(/^.+\n/,""):"";try{i.stack?h&&!String(i.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+h):i.stack=h}catch{}}throw i}}_request(r,c){typeof r=="string"?(c=c||{},c.url=r):c=r||{},c=Ks(this.defaults,c);const{transitional:i,paramsSerializer:u,headers:h}=c;i!==void 0&&Ei.assertOptions(i,{silentJSONParsing:Aa.transitional(Aa.boolean),forcedJSONParsing:Aa.transitional(Aa.boolean),clarifyTimeoutError:Aa.transitional(Aa.boolean)},!1),u!=null&&(ee.isFunction(u)?c.paramsSerializer={serialize:u}:Ei.assertOptions(u,{encode:Aa.function,serialize:Aa.function},!0)),c.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?c.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:c.allowAbsoluteUrls=!0),Ei.assertOptions(c,{baseUrl:Aa.spelling("baseURL"),withXsrfToken:Aa.spelling("withXSRFToken")},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let x=h&&ee.merge(h.common,h[c.method]);h&&ee.forEach(["delete","get","head","post","put","patch","common"],k=>{delete h[k]}),c.headers=Pt.concat(x,h);const j=[];let y=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(c)===!1||(y=y&&S.synchronous,j.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let p,g=0,w;if(!y){const k=[h0.bind(this),void 0];for(k.unshift(...j),k.push(...f),w=k.length,p=Promise.resolve(c);g<w;)p=p.then(k[g++],k[g++]);return p}w=j.length;let A=c;for(;g<w;){const k=j[g++],S=j[g++];try{A=k(A)}catch(b){S.call(this,b);break}}try{p=h0.call(this,A)}catch(k){return Promise.reject(k)}for(g=0,w=f.length;g<w;)p=p.then(f[g++],f[g++]);return p}getUri(r){r=Ks(this.defaults,r);const c=up(r.baseURL,r.url,r.allowAbsoluteUrls);return rp(c,r.params,r.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(r){Zs.prototype[r]=function(c,i){return this.request(Ks(i||{},{method:r,url:c,data:(i||{}).data}))}});ee.forEach(["post","put","patch"],function(r){function c(i){return function(h,x,j){return this.request(Ks(j||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:h,data:x}))}}Zs.prototype[r]=c(),Zs.prototype[r+"Form"]=c(!0)});let oj=class fp{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(h){c=h});const i=this;this.promise.then(u=>{if(!i._listeners)return;let h=i._listeners.length;for(;h-- >0;)i._listeners[h](u);i._listeners=null}),this.promise.then=u=>{let h;const x=new Promise(j=>{i.subscribe(j),h=j}).then(u);return x.cancel=function(){i.unsubscribe(h)},x},r(function(h,x,j){i.reason||(i.reason=new Yl(h,x,j),c(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const c=this._listeners.indexOf(r);c!==-1&&this._listeners.splice(c,1)}toAbortSignal(){const r=new AbortController,c=i=>{r.abort(i)};return this.subscribe(c),r.signal.unsubscribe=()=>this.unsubscribe(c),r.signal}static source(){let r;return{token:new fp(function(u){r=u}),cancel:r}}};function cj(n){return function(c){return n.apply(null,c)}}function dj(n){return ee.isObject(n)&&n.isAxiosError===!0}const kd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(kd).forEach(([n,r])=>{kd[r]=n});function gp(n){const r=new Zs(n),c=X0(Zs.prototype.request,r);return ee.extend(c,Zs.prototype,r,{allOwnKeys:!0}),ee.extend(c,r,null,{allOwnKeys:!0}),c.create=function(u){return gp(Ks(n,u))},c}const ot=gp(er);ot.Axios=Zs;ot.CanceledError=Yl;ot.CancelToken=oj;ot.isCancel=cp;ot.VERSION=pp;ot.toFormData=qi;ot.AxiosError=De;ot.Cancel=ot.CanceledError;ot.all=function(r){return Promise.all(r)};ot.spread=cj;ot.isAxiosError=dj;ot.mergeConfig=Ks;ot.AxiosHeaders=Pt;ot.formToJSON=n=>op(ee.isHTMLForm(n)?new FormData(n):n);ot.getAdapter=hp.getAdapter;ot.HttpStatusCode=kd;ot.default=ot;const{Axios:qN,AxiosError:BN,CanceledError:HN,isCancel:GN,CancelToken:FN,VERSION:$N,all:YN,Cancel:QN,isAxiosError:VN,spread:PN,toFormData:XN,AxiosHeaders:ZN,HttpStatusCode:KN,formToJSON:IN,getAdapter:JN,mergeConfig:WN}=ot,uj="https://phm-r3th.onrender.com/api/v1",X=ot.create({baseURL:uj,headers:{"Content-Type":"application/json"}});X.interceptors.request.use(n=>{const r=localStorage.getItem("access_token");return r&&(n.headers.Authorization=`Bearer ${r}`),n},n=>Promise.reject(n));X.interceptors.response.use(n=>n,async n=>{const r=n.config;if(n.response?.status===401&&!r._retry&&!r.url?.includes("/auth/login")){r._retry=!0;try{const c=localStorage.getItem("refresh_token");if(c){const i=await ot.post("/api/v1/auth/refresh",{refresh_token:c}),{access_token:u}=i.data;return localStorage.setItem("access_token",u),r.headers.Authorization=`Bearer ${u}`,X(r)}}catch(c){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.pathname.includes("/login")||(window.location.href="/login?expired=true"),Promise.reject(c)}return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.pathname.includes("/login")||(window.location.href="/login?expired=true"),Promise.reject(n)}return Promise.reject(n)});const bp={login:(n,r)=>{const c=new URLSearchParams;return c.append("username",n),c.append("password",r),X.post("/auth/login",c,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},logout:()=>X.post("/auth/logout"),refreshToken:n=>X.post("/auth/refresh",{refresh_token:n}),me:()=>X.get("/auth/me")},Yn={list:n=>X.get("/users",{params:n}),get:n=>X.get(`/users/${n}`),create:n=>X.post("/users",n),update:(n,r)=>X.put(`/users/${n}`,r),delete:n=>X.delete(`/users/${n}`)},_t={list:n=>X.get("/warehouses",{params:n}),get:n=>X.get(`/warehouses/${n}`),create:n=>X.post("/warehouses",n),update:(n,r)=>X.put(`/warehouses/${n}`,r),delete:n=>X.delete(`/warehouses/${n}`),getShops:n=>X.get(`/warehouses/${n}/shops`),getStock:(n,r)=>X.get(`/warehouses/${n}/stock`,{params:r})},Ct={list:n=>X.get("/shops",{params:n}),get:n=>X.get(`/shops/${n}`),create:n=>X.post("/shops",n),update:(n,r)=>X.put(`/shops/${n}`,r),delete:n=>X.delete(`/shops/${n}`),getStock:(n,r)=>X.get(`/shops/${n}/stock`,{params:r})},vt={list:n=>X.get("/medicines",{params:n}),get:n=>X.get(`/medicines/${n}`),create:n=>X.post("/medicines",n),update:(n,r)=>X.put(`/medicines/${n}`,r),delete:n=>X.delete(`/medicines/${n}`),getBatches:n=>X.get(`/medicines/${n}/batches`),createBatch:(n,r)=>X.post(`/medicines/${n}/batches`,r)},Bl={getMovements:n=>X.get("/stock/movements",{params:n}),stockEntry:n=>X.post("/stock/entry",n),adjustStock:n=>X.post("/stock/adjust",n),getAlerts:n=>X.get("/stock/alerts",{params:{alert_type:n}})},Ps={list:n=>X.get("/purchase-requests",{params:n}),get:n=>X.get(`/purchase-requests/${n}`),create:n=>X.post("/purchase-requests",n),approve:(n,r)=>X.put(`/purchase-requests/${n}/approve`,r),reject:n=>X.put(`/purchase-requests/${n}/reject`)},Is={list:n=>X.get("/dispatches",{params:n}),get:n=>X.get(`/dispatches/${n}`),create:n=>X.post("/dispatches",n),updateStatus:(n,r)=>X.put(`/dispatches/${n}/status`,{status:r})},Xs={list:n=>X.get("/invoices",{params:n}),get:n=>X.get(`/invoices/${n}`),create:n=>X.post("/invoices",n),getItems:n=>X.get(`/invoices/${n}/items`),getReturns:n=>X.get("/invoices/returns",{params:n}),processReturn:(n,r)=>X.post(`/invoices/${n}/returns`,r)},Ul={list:n=>X.get("/customers",{params:n}),get:n=>X.get(`/customers/${n}`),create:n=>X.post("/customers",n),update:(n,r)=>X.put(`/customers/${n}`,r),getFollowups:n=>X.get(`/customers/${n}/followups`),createFollowup:(n,r)=>X.post(`/customers/${n}/followups`,r)},pa={list:n=>X.get("/employees",{params:n}),get:n=>X.get(`/employees/${n}`),create:n=>X.post("/employees",n),update:(n,r)=>X.put(`/employees/${n}`,r),delete:n=>X.delete(`/employees/${n}`),markAttendance:n=>X.post("/employees/attendance",n),getDailyAttendance:n=>X.get("/employees/attendance/daily",{params:{date:n}}),getAttendance:(n,r)=>X.get(`/employees/attendance/${n}`,{params:r}),submitAttendance:n=>X.post("/employees/attendance/submit",n),lockAttendance:n=>X.post("/employees/attendance/lock",n),unlockAttendance:n=>X.post("/employees/attendance/unlock",n),getSalaryRecords:n=>X.get("/employees/salary",{params:n}),processSalary:n=>X.post("/employees/salary/process",n)},Vn={getSales:n=>X.get("/reports/sales",{params:n}),getDailySales:n=>X.get("/reports/sales/daily",{params:n}),getMonthlySales:n=>X.get("/reports/sales/monthly",{params:n}),getInventory:n=>X.get("/reports/inventory",{params:n}),getProfitLoss:n=>X.get("/reports/profit-loss",{params:n}),getExpiry:n=>X.get("/reports/expiry",{params:n})},vi={list:n=>X.get("/notifications",{params:n}),markRead:n=>X.put(`/notifications/${n}/read`),markAllRead:()=>X.put("/notifications/read-all"),delete:n=>X.delete(`/notifications/${n}`)},Ri={get:()=>X.get("/settings"),update:n=>X.put("/settings",n),getTax:()=>X.get("/settings/tax"),updateTax:n=>X.put("/settings/tax",n),getTaxSummary:n=>X.get("/settings/tax/summary",{params:n}),getGstReport:n=>X.get("/settings/tax/gst",{params:n})},Qn={list:n=>X.get("/roles",{params:n}),listAssignable:()=>X.get("/roles/assignable"),get:n=>X.get(`/roles/${n}`),create:n=>X.post("/roles",n),update:(n,r)=>X.put(`/roles/${n}`,r),delete:n=>X.delete(`/roles/${n}`),addPermission:(n,r)=>X.post(`/roles/${n}/permissions/${r}`),removePermission:(n,r)=>X.delete(`/roles/${n}/permissions/${r}`),assignToUser:(n,r)=>X.post(`/roles/${n}/users/${r}`),removeFromUser:(n,r)=>X.delete(`/roles/${n}/users/${r}`)},mj={list:n=>X.get("/permissions",{params:n}),getModules:()=>X.get("/permissions/modules"),getMy:()=>X.get("/permissions/my"),get:n=>X.get(`/permissions/${n}`),create:n=>X.post("/permissions",n),delete:n=>X.delete(`/permissions/${n}`)},f0={getSummary:n=>X.get("/tax/summary",{params:n}),getGstReport:n=>X.get("/tax/gst",{params:n}),getVatReport:n=>X.get("/tax/vat",{params:n}),getPeriodReport:(n,r,c)=>X.get(`/tax/period/${n}/${r}`,{params:{shop_id:c}}),getSettings:()=>X.get("/tax/settings"),updateSettings:n=>X.put("/tax/settings",n)},Ai={list:n=>X.get("/racks",{params:n}),get:n=>X.get(`/racks/${n}`),create:n=>X.post("/racks",n),update:(n,r)=>X.put(`/racks/${n}`,r),delete:n=>X.delete(`/racks/${n}`)},g0={list:n=>X.get("/audit-logs",{params:n}),getStats:()=>X.get("/audit-logs/stats")},b0={list:n=>X.get("/login-activity",{params:n}),getStats:()=>X.get("/login-activity/stats")},Me={listCategories:()=>X.get("/masters/categories"),createCategory:n=>X.post("/masters/categories",n),updateCategory:(n,r)=>X.put(`/masters/categories/${n}`,r),deleteCategory:n=>X.delete(`/masters/categories/${n}`),listUnits:()=>X.get("/masters/units"),createUnit:n=>X.post("/masters/units",n),updateUnit:(n,r)=>X.put(`/masters/units/${n}`,r),deleteUnit:n=>X.delete(`/masters/units/${n}`),listHSN:()=>X.get("/masters/hsn"),createHSN:n=>X.post("/masters/hsn",n),updateHSN:(n,r)=>X.put(`/masters/hsn/${n}`,r),deleteHSN:n=>X.delete(`/masters/hsn/${n}`),listGSTSlabs:()=>X.get("/masters/gst-slabs"),createGSTSlab:n=>X.post("/masters/gst-slabs",n),updateGSTSlab:(n,r)=>X.put(`/masters/gst-slabs/${n}`,r),deleteGSTSlab:n=>X.delete(`/masters/gst-slabs/${n}`),listSuppliers:()=>X.get("/masters/suppliers"),createSupplier:n=>X.post("/masters/suppliers",n),updateSupplier:(n,r)=>X.put(`/masters/suppliers/${n}`,r),deleteSupplier:n=>X.delete(`/masters/suppliers/${n}`),listAdjustmentReasons:()=>X.get("/masters/adjustment-reasons"),createAdjustmentReason:n=>X.post("/masters/adjustment-reasons",n),updateAdjustmentReason:(n,r)=>X.put(`/masters/adjustment-reasons/${n}`,r),deleteAdjustmentReason:n=>X.delete(`/masters/adjustment-reasons/${n}`),listPaymentMethods:()=>X.get("/masters/payment-methods"),createPaymentMethod:n=>X.post("/masters/payment-methods",n),updatePaymentMethod:(n,r)=>X.put(`/masters/payment-methods/${n}`,r),deletePaymentMethod:n=>X.delete(`/masters/payment-methods/${n}`),listMedicineTypes:()=>X.get("/masters/medicine-types"),createMedicineType:n=>X.post("/masters/medicine-types",n),updateMedicineType:(n,r)=>X.put(`/masters/medicine-types/${n}`,r),deleteMedicineType:n=>X.delete(`/masters/medicine-types/${n}`),listBrands:()=>X.get("/masters/brands"),createBrand:n=>X.post("/masters/brands",n),updateBrand:(n,r)=>X.put(`/masters/brands/${n}`,r),deleteBrand:n=>X.delete(`/masters/brands/${n}`),listManufacturers:()=>X.get("/masters/manufacturers"),createManufacturer:n=>X.post("/masters/manufacturers",n),updateManufacturer:(n,r)=>X.put(`/masters/manufacturers/${n}`,r),deleteManufacturer:n=>X.delete(`/masters/manufacturers/${n}`)},yp=m.createContext(void 0);function xj({children:n}){const[r,c]=m.useState(null),[i,u]=m.useState(!0),h=async()=>{if(!localStorage.getItem("access_token")){c(null),u(!1);return}try{const y=await bp.me(),f={...y.data,permissions:y.data.permissions||[]};c(f)}catch(y){console.error("Failed to fetch user:",y),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),c(null)}finally{u(!1)}};m.useEffect(()=>{h()},[]);const x=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),c(null)};return e.jsx(yp.Provider,{value:{user:r,setUser:c,loading:i,logout:x,refreshUser:h},children:n})}function Ie(){const n=m.useContext(yp);if(n===void 0)throw new Error("useUser must be used within a UserProvider");return n}function hj(n,r){return n.includes(r)}function pj(n,r){return r.some(c=>n.includes(c))}function fj(n,r){return r.every(c=>n.includes(c))}function gj(n,r){return n.some(c=>c.startsWith(`${r}.`))}function bj(n,r){for(const c of n)if(c.startsWith(r)){const i=c.split(".");if(i.length>=3)return i[2]}return null}const y0={ROLES_VIEW:"roles.view",ROLES_MANAGE:"roles.manage"},vp=m.createContext(void 0);function yj({children:n}){const{user:r}=Ie(),c=r?.permissions??[],i=r?.role==="super_admin",u={permissions:c,hasPermission:h=>i?!0:hj(c,h),hasAnyPermission:h=>i?!0:pj(c,h),hasAllPermissions:h=>i?!0:fj(c,h),hasModuleAccess:h=>i?!0:gj(c,h),getScopeForPermission:h=>i?"global":bj(c,h)};return e.jsx(vp.Provider,{value:u,children:n})}function Zt(){const n=m.useContext(vp);if(n===void 0)throw new Error("usePermissions must be used within a PermissionProvider");return n}const jp=m.createContext(null);function vj({children:n}){const[r,c]=m.useState(null),[i,u]=m.useState(!0),[h,x]=m.useState(null),j=m.useCallback(async()=>{if(!localStorage.getItem("access_token")){u(!1);return}try{u(!0),x(null);const S=await X.get("/unified-masters/all");S.data&&S.data.categories&&S.data.categories.length>0?c(S.data):(console.warn("Master data API returned empty, using fallback."),c(y()))}catch(S){console.error("Failed to load master data, using fallback:",S),c(y())}finally{u(!1)}},[]),y=()=>({categories:[{id:"cat-1",name:"Antibiotics",is_active:!0},{id:"cat-2",name:"Painkillers",is_active:!0},{id:"cat-3",name:"Supplements",is_active:!0},{id:"cat-4",name:"General",is_active:!0}],units:[{id:"unit-1",name:"Strip",short_name:"stp",is_active:!0},{id:"unit-2",name:"Bottle",short_name:"btl",is_active:!0},{id:"unit-3",name:"Box",short_name:"box",is_active:!0},{id:"unit-4",name:"Vial",short_name:"vl",is_active:!0}],hsn_codes:[{id:"hsn-1",hsn_code:"3004",description:"Medicaments",gst_rate:12,cgst_rate:6,sgst_rate:6,igst_rate:12,is_active:!0},{id:"hsn-2",hsn_code:"3003",description:"Medicaments",gst_rate:5,cgst_rate:2.5,sgst_rate:2.5,igst_rate:5,is_active:!0}],medicine_types:[{id:"type-1",code:"tablet",name:"Tablet",is_active:!0,sort_order:1},{id:"type-2",code:"capsule",name:"Capsule",is_active:!0,sort_order:2},{id:"type-3",code:"syrup",name:"Syrup",is_active:!0,sort_order:3},{id:"type-4",code:"injection",name:"Injection",is_active:!0,sort_order:4}],gst_slabs:[{id:"gst-0",rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0,is_active:!0},{id:"gst-5",rate:5,cgst_rate:2.5,sgst_rate:2.5,igst_rate:5,is_active:!0},{id:"gst-12",rate:12,cgst_rate:6,sgst_rate:6,igst_rate:12,is_active:!0},{id:"gst-18",rate:18,cgst_rate:9,sgst_rate:9,igst_rate:18,is_active:!0},{id:"gst-28",rate:28,cgst_rate:14,sgst_rate:14,igst_rate:28,is_active:!0}],brands:[{id:"br-1",code:"GSK",name:"GSK",is_active:!0},{id:"br-2",code:"CIPLA",name:"Cipla",is_active:!0},{id:"br-3",code:"SUN",name:"Sun Pharma",is_active:!0}],manufacturers:[{id:"mfr-1",code:"GSK",name:"GlaxoSmithKline",is_active:!0},{id:"mfr-2",code:"CIPLA",name:"Cipla Ltd",is_active:!0},{id:"mfr-3",code:"SUN",name:"Sun Pharmaceutical Industries",is_active:!0}],genders:[{id:"gen-1",code:"male",name:"Male",is_active:!0},{id:"gen-2",code:"female",name:"Female",is_active:!0},{id:"gen-3",code:"other",name:"Other",is_active:!0}],employment_types:[{id:"emp-1",code:"full_time",name:"Full Time",is_active:!0},{id:"emp-2",code:"part_time",name:"Part Time",is_active:!0},{id:"emp-3",code:"contract",name:"Contract",is_active:!0},{id:"emp-4",code:"intern",name:"Intern",is_active:!0}],departments:[{id:"dept-1",code:"pharmacy",name:"Pharmacy",is_active:!0},{id:"dept-2",code:"warehouse",name:"Warehouse",is_active:!0},{id:"dept-3",code:"admin",name:"Administration",is_active:!0},{id:"dept-4",code:"hr",name:"Human Resources",is_active:!0},{id:"dept-5",code:"accounts",name:"Accounts",is_active:!0}],designations:[{id:"des-1",code:"pharmacist",name:"Pharmacist",is_active:!0,level:3},{id:"des-2",code:"cashier",name:"Cashier",is_active:!0,level:2},{id:"des-3",code:"manager",name:"Manager",is_active:!0,level:4},{id:"des-4",code:"assistant",name:"Assistant",is_active:!0,level:1},{id:"des-5",code:"supervisor",name:"Supervisor",is_active:!0,level:3}],urgency_levels:[{id:"urg-1",code:"low",name:"Low",is_active:!0,color:"green"},{id:"urg-2",code:"medium",name:"Medium",is_active:!0,color:"yellow"},{id:"urg-3",code:"high",name:"High",is_active:!0,color:"orange"},{id:"urg-4",code:"critical",name:"Critical",is_active:!0,color:"red"}],payment_methods:[{id:"pm-1",code:"cash",name:"Cash",is_active:!0,icon:""},{id:"pm-2",code:"card",name:"Card",is_active:!0,icon:""},{id:"pm-3",code:"upi",name:"UPI",is_active:!0,icon:""},{id:"pm-4",code:"credit",name:"Credit",is_active:!0,icon:""}],shop_types:[{id:"st-1",code:"retail",name:"Retail Pharmacy",is_active:!0},{id:"st-2",code:"hospital",name:"Hospital Pharmacy",is_active:!0}],customer_types:[{id:"ct-1",code:"regular",name:"Regular",is_active:!0,discount_percent:0,credit_limit:0},{id:"ct-2",code:"vip",name:"VIP",is_active:!0,discount_percent:10,credit_limit:5e4}],suppliers:[],statuses:[],roles:[],warehouses:[],shops:[],racks:[],adjustment_reasons:[]});m.useEffect(()=>{j();const k=S=>{S.key==="access_token"&&S.newValue&&j()};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[j]);const f=m.useCallback(k=>r?r[k]||[]:[],[r]),p=m.useCallback(k=>r?r.statuses.filter(S=>S.entity_type===k):[],[r]),g=m.useCallback((k,S)=>f(k).find(E=>E.code===S),[f]),w=m.useCallback((k,S)=>f(k).find(E=>E.id===S),[f]),A={masters:r,isLoading:i,error:h,refresh:j,getMaster:f,getStatusesByEntity:p,findByCode:g,findById:w};return e.jsx(jp.Provider,{value:A,children:n})}function ct(){const n=m.useContext(jp);if(!n)throw new Error("useMasterData must be used within a MasterDataProvider");return n}const Np=m.createContext(void 0);function jj({children:n}){const{user:r}=Ie(),[c,i]=m.useState("global"),[u,h]=m.useState(null),[x,j]=m.useState([]),[y,f]=m.useState([]),[p,g]=m.useState(!0);m.useEffect(()=>{if(!r){g(!1);return}(async()=>{try{g(!0);let k=[],S=[];if(r.role==="super_admin"){const[T,D]=await Promise.all([_t.list({size:100}),Ct.list({size:100})]);k=T.data?.items||[],S=D.data?.items||[]}else r.warehouse_id?k=[(await _t.get(r.warehouse_id)).data]:r.shop_id&&(S=[(await Ct.get(r.shop_id)).data]);const b=k.map(T=>({id:T.id,type:"warehouse",name:T.name})),E=S.map(T=>({id:T.id,type:"shop",name:T.name}));j(b),f(E),r.role==="super_admin"?(i("global"),h(null)):r.warehouse_id?(i("warehouse"),h(b.find(T=>T.id===r.warehouse_id)||null)):r.shop_id?(i("shop"),h(E.find(T=>T.id===r.shop_id)||null)):(i("global"),h(null))}catch(k){console.error("Failed to initialize operational context",k)}finally{g(!1)}})()},[r]);const w=(A,k)=>{if(r?.role!=="super_admin"){console.warn("Attempted context switch by non-super-admin blocked.");return}i(A),h(k||null)};return e.jsx(Np.Provider,{value:{scope:c,activeEntity:u,switchContext:w,availableWarehouses:x,availableShops:y,loading:p},children:n})}function Ta(){const n=m.useContext(Np);if(n===void 0)throw new Error("useOperationalContext must be used within an OperationalProvider");return n}let ji=0;const Sd=new Set;let Lt=[];const Gn=n=>{Sd.forEach(r=>r(n))},Pe={success:n=>{const r={id:`toast-${ji++}`,message:n,type:"success"};Lt=[...Lt,r],Gn(Lt),setTimeout(()=>Pe.dismiss(r.id),5e3)},error:n=>{const r={id:`toast-${ji++}`,message:n,type:"error"};Lt=[...Lt,r],Gn(Lt),setTimeout(()=>Pe.dismiss(r.id),5e3)},warning:n=>{const r={id:`toast-${ji++}`,message:n,type:"warning"};Lt=[...Lt,r],Gn(Lt),setTimeout(()=>Pe.dismiss(r.id),5e3)},info:n=>{const r={id:`toast-${ji++}`,message:n,type:"info"};Lt=[...Lt,r],Gn(Lt),setTimeout(()=>Pe.dismiss(r.id),5e3)},dismiss:n=>{Lt=Lt.filter(r=>r.id!==n),Gn(Lt)}};function Nj(){const[n,r]=m.useState([]);return m.useEffect(()=>{const c=i=>r(i);return Sd.add(c),()=>{Sd.delete(c)}},[]),n}function wj(){const n=Nj(),r=i=>{switch(i){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";case"info":return"info"}},c=i=>{switch(i){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}};return e.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 max-w-md",children:n.map((i,u)=>e.jsxs("div",{className:`flex items-start gap-3 px-4 py-3 rounded-lg border shadow-lg backdrop-blur-sm animate-slideInRight ${c(i.type)}`,style:{animationDelay:`${u*50}ms`},children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:r(i.type)}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:i.message}),e.jsx("button",{onClick:()=>window.toast?.dismiss(i.id),className:"text-current opacity-60 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]},i.id))})}typeof window<"u"&&(window.toast=Pe);const Ni=[{path:"/",label:"Dashboard",icon:"dashboard",permissions:["dashboard.view"]},{path:"/warehouses",label:"Warehouses",icon:"warehouse",permissions:["warehouses.view","warehouses.create"],children:[{path:"/warehouses",label:"View All Warehouses",icon:"list",permissions:["warehouses.view"]},{path:"/warehouses/add",label:"Add Warehouse",icon:"add_circle",permissions:["warehouses.create"]}]},{path:"/shops",label:"Medical Shops",icon:"storefront",permissions:["shops.view","shops.create"],children:[{path:"/shops",label:"View All Shops",icon:"list",permissions:["shops.view"]},{path:"/shops/add",label:"Add Shop",icon:"add_circle",permissions:["shops.create"]}]},{path:"/users-access",label:"Users & Access",icon:"manage_accounts",permissions:["users.view","users.view.warehouse","roles.view","login_activity.view"],excludeFromWarehouseAdmin:!0,children:[{path:"/users",label:"Users",icon:"people",permissions:["users.view","users.view.warehouse"]},{path:"/roles",label:"Roles & Permissions",icon:"admin_panel_settings",permissions:["roles.view","roles.manage"]},{path:"/login-activity",label:"Login Activity",icon:"history",permissions:["login_activity.view"]}]},{path:"/master-data",label:"Master Data",icon:"dataset",permissions:["gst.manage","hsn.manage","categories.manage","units.manage","suppliers.manage","brands.manage","manufacturers.manage","medicine_types.manage","adjustment_reasons.manage","payment_methods.manage","racks.manage","gst.view","hsn.view","categories.view","units.view","suppliers.view","brands.view","manufacturers.view","medicine_types.view","adjustment_reasons.view","payment_methods.view","racks.view"],children:[{path:"/gst-slabs",label:"GST / VAT Slabs",icon:"percent",permissions:["gst.manage","gst.view"]},{path:"/hsn",label:"HSN Codes",icon:"tag",permissions:["hsn.manage","hsn.view"],divider:!0},{path:"/categories",label:"Medicine Categories",icon:"category",permissions:["categories.manage","categories.view"],divider:!0},{path:"/medicine-types",label:"Medicine Types",icon:"medication",permissions:["medicine_types.manage","medicine_types.view"]},{path:"/brands",label:"Brands",icon:"label",permissions:["brands.manage","brands.view"]},{path:"/manufacturers",label:"Manufacturers",icon:"factory",permissions:["manufacturers.manage","manufacturers.view"]},{path:"/units",label:"Units / Packaging",icon:"straighten",permissions:["units.manage","units.view"]},{path:"/racks",label:"Rack Master",icon:"shelves",permissions:["racks.manage","racks.manage.warehouse","racks.view","racks.view.warehouse"],divider:!0},{path:"/adjustment-reasons",label:"Adjustment Reasons",icon:"edit_note",permissions:["adjustment_reasons.manage","adjustment_reasons.view"]},{path:"/suppliers",label:"Suppliers",icon:"local_shipping",permissions:["suppliers.manage","suppliers.view"],divider:!0},{path:"/payment-methods",label:"Payment Methods",icon:"payments",permissions:["payment_methods.manage","payment_methods.view"]}]},{path:"/medicines",label:"Medicine Master",icon:"medication",permissions:["medicines.view","medicines.create"],children:[{path:"/medicines",label:"View Medicines",icon:"list",permissions:["medicines.view"]},{path:"/medicines/add",label:"Add Medicine",icon:"add_circle",permissions:["medicines.create"]}]},{path:"/inventory-oversight",label:"Inventory Oversight",icon:"inventory_2",permissions:["inventory.view.global"],children:[{path:"/inventory-oversight",label:"Overview",icon:"analytics",permissions:["inventory.view.global"]},{path:"/inventory-oversight/expiry",label:"Expiry Monitoring",icon:"event_busy",permissions:["inventory.view.global"]},{path:"/inventory-oversight/dead-stock",label:"Dead Stock",icon:"warning",permissions:["inventory.view.global"]}]},{path:"/reports",label:"Reports",icon:"assessment",permissions:["reports.view.global","reports.view.warehouse","reports.view.shop"],children:[{path:"/reports/sales",label:"Sales Reports",icon:"bar_chart",permissions:["reports.view.global","reports.view.shop"]},{path:"/reports/inventory",label:"Inventory Reports",icon:"inventory",permissions:["reports.view.global","reports.view.warehouse"]},{path:"/reports/tax",label:"Tax Reports",icon:"receipt",permissions:["reports.view.global","reports.view.shop"]},{path:"/reports/expiry",label:"Expiry Reports",icon:"event_busy",permissions:["reports.view.global","reports.view.warehouse","reports.view.shop"]}]},{path:"/system",label:"System",icon:"settings",permissions:["audit.view","settings.manage"],children:[{path:"/audit-logs",label:"Audit Logs",icon:"history",permissions:["audit.view"]},{path:"/system/settings",label:"System Settings",icon:"tune",permissions:["settings.manage"]}]}],v0=[{path:"/shops/stock",label:"Stock Entry",icon:"add_box",permissions:["inventory.entry.warehouse","stock.entry.warehouse"],excludeFromSuperAdmin:!0},{path:"/inventory",label:"Inventory",icon:"inventory_2",permissions:["inventory.view.warehouse","inventory.view.shop"],excludeFromSuperAdmin:!0},{path:"/inventory/adjust",label:"Stock Adjustment",icon:"tune",permissions:["inventory.adjust.warehouse","stock.adjust.warehouse"],excludeFromSuperAdmin:!0},{path:"/dispatches",label:"Dispatches",icon:"local_shipping",permissions:["dispatches.view.warehouse","dispatches.view.shop","dispatches.manage.warehouse"],excludeFromSuperAdmin:!0},{path:"/purchase-requests",label:"Purchase Requests",icon:"shopping_cart",permissions:["purchase_requests.view.warehouse","purchase_requests.view.shop","purchase_requests.create.shop","purchase_requests.approve"],excludeFromSuperAdmin:!0},{path:"/employees",label:"Employees",icon:"badge",permissions:["employees.view.warehouse","employees.view.shop","employees.create.warehouse","employees.view"],excludeFromSuperAdmin:!0},{path:"/employees/attendance",label:"Attendance",icon:"event_available",permissions:["attendance.manage.warehouse","attendance.manage.shop","attendance.view.warehouse"],excludeFromSuperAdmin:!0,children:[{path:"/employees/attendance",label:"Attendance Marker",icon:"edit_calendar",permissions:["attendance.manage.warehouse","attendance.manage.shop"]},{path:"/employees/attendance/report",label:"Attendance Report",icon:"summarize",permissions:["attendance.view.warehouse","attendance.manage.warehouse"]}]},{path:"/employees/salary",label:"Salary",icon:"payments",permissions:["salary.manage.warehouse","salary.manage.shop","payroll.view.warehouse","payroll.process.warehouse"],excludeFromSuperAdmin:!0},{path:"/sales/pos",label:"POS Billing",icon:"point_of_sale",permissions:["billing.create.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/sales/invoices",label:"Invoices",icon:"receipt_long",permissions:["billing.view.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/sales/returns",label:"Returns & Refunds",icon:"assignment_return",permissions:["returns.view.shop","returns.create.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/customers",label:"Customers",icon:"people",permissions:["customers.view.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0}];function kj(){const n=ga(),{user:r}=Ie(),{hasAnyPermission:c}=Zt(),[i,u]=m.useState(!1),[h,x]=m.useState([]),j=r?.role||"user",y=j==="super_admin",f=S=>j==="warehouse_admin"&&"excludeFromWarehouseAdmin"in S&&S.excludeFromWarehouseAdmin?!1:y?!0:S.permissions&&S.permissions.length>0?c(S.permissions):!0;m.useEffect(()=>{(y?Ni:[...Ni,...v0]).forEach(b=>{b.children&&b.children.some(T=>n.pathname===T.path||n.pathname.startsWith(T.path+"/"))&&!h.includes(b.path)&&x(T=>[...T,b.path])})},[n.pathname,y]),m.useEffect(()=>{const S=localStorage.getItem("sidebarCollapsed");S&&u(S==="true")},[]);const p=()=>{const S=!i;u(S),localStorage.setItem("sidebarCollapsed",String(S))},g=S=>{x(b=>b.includes(S)?b.filter(E=>E!==S):[...b,S])},w=S=>S.children?S.children.some(b=>n.pathname===b.path||n.pathname.startsWith(b.path+"/")):n.pathname===S.path,A=(S,b)=>{let E=S.label;S.path==="/dispatches"&&j!=="warehouse_admin"&&j!=="warehouse_employee"&&(E="Incoming Shipments");const T=S.children&&S.children.length>0,D=h.includes(S.path),z=w(S);return T&&!i?e.jsxs("div",{className:"animate-fadeIn",style:{animationDelay:`${b*20}ms`},children:[e.jsxs("button",{onClick:()=>g(S.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group
                            ${z?"bg-primary/10 text-primary dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[22px] transition-transform group-hover:scale-110",children:S.icon}),e.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:E}),e.jsx("span",{className:`material-symbols-outlined text-[18px] transition-transform ${D?"rotate-180":""}`,children:"expand_more"})]}),D&&e.jsx("div",{className:"mt-1 ml-4 pl-4 border-l-2 border-slate-200 dark:border-slate-700 space-y-0.5",children:S.children.filter(R=>f(R)).map(R=>e.jsxs("div",{children:[R.divider&&e.jsx("div",{className:"my-2 border-t border-slate-200 dark:border-slate-700"}),e.jsxs(vd,{to:R.path,end:R.path===S.path,className:({isActive:W})=>`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors text-sm
                                                ${W?"bg-primary text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:R.icon}),e.jsx("span",{className:"font-medium",children:R.label})]})]},R.path))})]},S.path):e.jsxs(vd,{to:S.path,end:S.path==="/",className:({isActive:R})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors group
                    ${R?"bg-primary text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}
                    ${i?"justify-center":""}`,style:{animationDelay:`${b*20}ms`},title:i?E:void 0,children:[e.jsx("span",{className:"material-symbols-outlined text-[22px] transition-transform group-hover:scale-110",children:S.icon}),!i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm font-medium flex-1",children:E}),S.badge&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-red-500 text-white rounded-full",children:S.badge})]})]},S.path)},k=()=>y?Ni.filter(S=>f(S)):[...Ni,...v0].filter(b=>f(b));return e.jsxs("aside",{className:`
                flex flex-col border-r border-slate-200 dark:border-slate-800 
                bg-white dark:bg-slate-900 transition-all duration-300 ease-in-out
                ${i?"w-20":"w-64"}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:`flex items-center gap-3 ${i?"justify-center w-full":""}`,children:[e.jsx("div",{className:"flex items-center justify-center size-10 rounded-lg bg-primary text-white",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"local_pharmacy"})}),!i&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight text-slate-900 dark:text-white",children:"PharmaEC"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:y?"Super Admin":"Management System"})]})]}),!i&&e.jsx("button",{onClick:p,className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Collapse sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})})]}),i&&e.jsx("button",{onClick:p,className:"mx-auto mt-3 p-2 rounded-lg text-slate-400 hover:text-primary hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Expand sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1 no-scrollbar",children:k().map((S,b)=>A(S,b))})]})}function Sj(){const[n,r]=m.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),[c,i]=m.useState(!1),[u,h]=m.useState(""),[x,j]=m.useState(null),y=m.useRef(null),f=Be(),{user:p,logout:g}=Ie();m.useEffect(()=>{n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[n]),m.useEffect(()=>{(async()=>{if(!p){h(""),j(null);return}try{if(p.shop_id){const T=await Ct.get(p.shop_id);h(T.data.name||"Unknown Shop"),j("shop")}else if(p.warehouse_id){const T=await _t.get(p.warehouse_id);h(T.data.name||"Unknown Warehouse"),j("warehouse")}else h(""),j(null)}catch(T){console.error("Failed to fetch entity name:",T),h(""),j(null)}})()},[p]),m.useEffect(()=>{const E=T=>{y.current&&!y.current.contains(T.target)&&i(!1)};return c&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[c]);const w=()=>{r(!n)},A=()=>{g(),f("/login")},k=E=>E.split(" ").map(T=>T[0]).join("").toUpperCase().slice(0,2),S=E=>({super_admin:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",warehouse_admin:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",pharmacy_admin:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",hr_manager:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",pharmacist:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400"})[E]||"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300",b=E=>E.split("_").map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" ");return e.jsxs("header",{className:"flex h-14 items-center justify-between border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-6 sticky top-0 z-10",children:[e.jsx("div",{className:"flex items-center gap-2",children:u&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:`material-symbols-outlined text-[18px] ${x==="shop"?"text-blue-600 dark:text-blue-400":"text-amber-600 dark:text-amber-400"}`,children:x==="shop"?"store":"warehouse"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold leading-none",children:x==="shop"?"Shop":"Warehouse"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white leading-tight",children:u})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:w,className:"flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:n?"Switch to Light Mode":"Switch to Dark Mode",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:n?"light_mode":"dark_mode"})}),e.jsxs("button",{onClick:()=>f("/notifications"),className:"relative flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Notifications",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"notifications"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 rounded-full bg-red-500"})]}),e.jsx("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),p&&e.jsxs("div",{className:"relative",ref:y,children:[e.jsxs("button",{onClick:()=>i(!c),className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm shadow-sm",children:k(p.full_name||p.email)}),e.jsx("span",{className:`material-symbols-outlined text-slate-400 text-[18px] transition-transform ${c?"rotate-180":""}`,children:"expand_more"})]}),c&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50",children:[e.jsxs("div",{className:"p-3 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-md",children:k(p.full_name||p.email)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white truncate",children:p.full_name||"User"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:p.email})]})]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${S(p.role)}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"badge"}),b(p.role)]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{i(!1),f("/settings")},className:"w-full flex items-center gap-2 px-3 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"person"}),e.jsx("span",{className:"text-sm font-medium",children:"My Profile"})]}),e.jsxs("button",{onClick:()=>{i(!1),f("/settings/application")},className:"w-full flex items-center gap-2 px-3 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"settings"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-1"}),e.jsxs("button",{onClick:A,className:"w-full flex items-center gap-2 px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"logout"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]})]})]})}function _j(){return e.jsxs("div",{className:"flex h-screen w-full bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[e.jsx(kj,{}),e.jsxs("div",{className:"flex flex-1 flex-col h-full overflow-hidden min-w-0",children:[e.jsx(Sj,{}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900 scroll-smooth",children:e.jsx("div",{className:"page-content animate-fadeIn p-6",children:e.jsx(Wb,{})})})]})]})}function Cj(){const[n,r]=m.useState(""),[c,i]=m.useState(""),[u,h]=m.useState(!1),[x,j]=m.useState(""),[y,f]=m.useState(!1),p=Be(),{refreshUser:g}=Ie(),w=async A=>{A.preventDefault(),j(""),h(!0);try{const k=await bp.login(n,c),{access_token:S,refresh_token:b}=k.data;localStorage.setItem("access_token",S),localStorage.setItem("refresh_token",b),await g(),p("/")}catch(k){j(k.response?.data?.detail||"Login failed. Please check your credentials.")}finally{h(!1)}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-white rounded-full translate-x-1/3 translate-y-1/3"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-16 text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-12",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"medication"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PharmaEC"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"Enterprise Management"})]})]}),e.jsxs("h2",{className:"text-4xl font-bold leading-tight mb-6",children:["Complete Pharmacy",e.jsx("br",{}),"Management Solution"]}),e.jsx("p",{className:"text-blue-100 text-lg leading-relaxed mb-10 max-w-md",children:"Streamline your operations with our comprehensive platform for warehouses, medical shops, inventory, billing, and more."}),e.jsx("div",{className:"space-y-4",children:[{icon:"warehouse",text:"Multi-Warehouse Management"},{icon:"storefront",text:"Medical Shop Operations"},{icon:"inventory_2",text:"Real-time Inventory Tracking"},{icon:"receipt_long",text:"Integrated POS & Billing"}].map((A,k)=>e.jsxs("div",{className:"flex items-center gap-3 text-blue-100",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:A.icon})}),e.jsx("span",{children:A.text})]},k))})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-blue-600 mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"medication"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"PharmaEC"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Welcome back"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Please enter your credentials to continue"})]}),x&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm flex items-start gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-lg flex-shrink-0",children:"error"}),e.jsx("span",{children:x})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:n,onChange:A=>r(A.target.value),placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",value:c,onChange:A=>i(A.target.value),placeholder:"",required:!0,className:"w-full px-4 py-3 pr-12 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"}),e.jsx("button",{type:"button",onClick:()=>f(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:y?"visibility_off":"visibility"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500 focus:ring-offset-0"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-600/30 hover:shadow-blue-600/40 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign In",e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})]})})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-xl",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"info"}),"Demo Credentials"]}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"Email:"})," admin@pharmaec.com"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"Password:"})," admin123"]})]})]}),e.jsx("p",{className:"text-center text-slate-400 text-sm mt-8",children:" 2024 PharmaEC. All rights reserved."})]})})]})}function Ej(){const n=Be(),{user:r}=Ie(),{scope:c,activeEntity:i}=Ta(),[u,h]=m.useState({warehouses:0,shops:0,medicines:0,invoices:0,customers:0,employees:0,revenue:0,lowStockItems:0,expiringItems:0,pendingRequests:0,dispatchedToday:0}),[x,j]=m.useState([]),[y,f]=m.useState([]),[p,g]=m.useState([]),[w,A]=m.useState(!0),[k,S]=m.useState(null),[b,E]=m.useState([]);m.useEffect(()=>{T()},[c,i]);const T=async()=>{try{A(!0),S(null);const q={};i?.type==="warehouse"&&(q.warehouse_id=i.id),i?.type==="shop"&&(q.shop_id=i.id);const[oe,U,M,Q,he,xe,be,O,V,se]=await Promise.allSettled([_t.list({page:1,size:1}),Ct.list({page:1,size:1}),vt.list({page:1,size:1}),Xs.list({page:1,size:5,...q}),Ul.list({page:1,size:1}),pa.list({page:1,size:1,...q}),Vn.getSales(),Bl.getAlerts(),Ps.list({status:"pending",size:1,...q}),Is.list({size:100,...q})]),te=(fe,Oe)=>fe.status==="fulfilled"&&(fe.value.data?.[Oe]||fe.value.data?.total)||0,N=O.status==="fulfilled"?O.value.data?.alerts||[]:[],_=N.filter(fe=>fe.type==="low_stock").length,Y=N.filter(fe=>fe.type==="expiring"||fe.type==="expired").length,G=V.status==="fulfilled"&&V.value.data?.total||0,F=new Date().toISOString().split("T")[0],pe=(se.status==="fulfilled"?se.value.data?.items||se.value.data||[]:[]).filter(fe=>fe.dispatch_date&&fe.dispatch_date.startsWith(F)).length;h({warehouses:te(oe,"total"),shops:te(U,"total"),medicines:te(M,"total"),invoices:Q.status==="fulfilled"&&(Q.value.data?.total||Q.value.data?.items?.length)||0,customers:te(he,"total"),employees:te(xe,"total"),revenue:be.status==="fulfilled"&&be.value.data?.total_sales||0,lowStockItems:_,expiringItems:Y,pendingRequests:G,dispatchedToday:pe}),Q.status==="fulfilled"&&E((Q.value.data?.items||Q.value.data||[]).slice(0,5)),j(N.slice(0,5).map(fe=>({id:fe.id||Math.random().toString(),title:fe.type==="low_stock"?`Low Stock - ${fe.medicine_name} ${fe.brand?`(${fe.brand})`:""}`:`Expiry Alert - ${fe.medicine_name} ${fe.brand?`(${fe.brand})`:""}`,description:fe.type==="low_stock"?`Only ${fe.current_quantity} units left`:`Expires in ${fe.days_to_expiry} days`,time:"Recently",severity:fe.type==="expired"?"critical":"warning",type:fe.type}))),f([]),g([])}catch(q){console.error("Dashboard fetch error:",q),S("Failed to load dashboard data")}finally{A(!1)}},D=q=>q>=1e7?`${(q/1e7).toFixed(1)}Cr`:q>=1e5?`${(q/1e5).toFixed(1)}L`:q>=1e3?`${(q/1e3).toFixed(0)}K`:`${q}`,z=[{title:"Total Revenue",value:D(u.revenue),icon:"payments",color:"emerald",trend:"+12.5%",trendUp:!0,subtitle:"vs last month"},{title:"Warehouses",value:u.warehouses.toString(),icon:"warehouse",color:"blue",trend:"+2",trendUp:!0,subtitle:"Active locations"},{title:"Medical Shops",value:u.shops.toString(),icon:"storefront",color:"purple",trend:"+5",trendUp:!0,subtitle:"Connected shops"},{title:"Total Medicines",value:u.medicines.toString(),icon:"medication",color:"cyan",trend:"+1.2%",trendUp:!0,subtitle:"SKUs in catalog"}],R=[{title:"Low Stock Items",value:u.lowStockItems.toString(),icon:"inventory",color:"red",badge:"Action Required",badgeColor:"red",subtitle:"Below safety threshold"},{title:"Expiring Soon",value:u.expiringItems.toString(),icon:"schedule",color:"orange",badge:"Review Needed",badgeColor:"orange",subtitle:"Within 30 days"},{title:"Pending Requests",value:u.pendingRequests.toString(),icon:"assignment",color:"amber",badge:"Pending",badgeColor:"amber",subtitle:"Awaiting approval"},{title:"Dispatched Today",value:u.dispatchedToday.toString(),icon:"local_shipping",color:"teal",trend:"",trendUp:!0,subtitle:"Successfully shipped"}],W=[{label:"POS Billing",icon:"point_of_sale",path:"/sales/pos",color:"blue"},{label:"Add Stock",icon:"add_box",path:"/warehouses/stock",color:"green"},{label:"New Order",icon:"shopping_cart",path:"/purchase-requests",color:"purple"},{label:"Dispatches",icon:"local_shipping",path:"/dispatches",color:"orange"},{label:"Reports",icon:"bar_chart",path:"/reports/sales",color:"cyan"},{label:"Employees",icon:"badge",path:"/employees",color:"pink"}];if(w)return e.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-slate-200 border-t-primary mx-auto"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl animate-pulse",children:"dashboard"})})]}),e.jsx("p",{className:"text-slate-500 mt-4 font-medium",children:"Loading dashboard..."})]})});const I=Math.max(...y.map(q=>q.amount),1);return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(()=>{const q=new Date().getHours();return q<12?"Good Morning":q<17?"Good Afternoon":"Good Evening"})(),", ",r?.full_name||"User"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400 text-[20px]",children:"business"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total Locations"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:u.warehouses+u.shops})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Overview of pharmacy operations"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:T,className:"btn btn-secondary",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"refresh"}),"Refresh"]}),c!=="global"&&e.jsxs("button",{onClick:()=>n("/sales/pos"),className:"btn btn-primary",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"add"}),"New Sale"]})]})]}),k&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3 animate-fadeIn",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:k}),e.jsx("button",{onClick:T,className:"ml-auto text-sm text-red-600 hover:text-red-800 font-medium",children:"Retry"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:z.map((q,oe)=>e.jsxs("div",{className:"group relative overflow-hidden bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-fadeInUp",style:{animationDelay:`${oe*100}ms`},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br opacity-5 group-hover:opacity-10 transition-opacity ${q.color==="emerald"?"from-emerald-400 to-emerald-600":q.color==="blue"?"from-blue-400 to-blue-600":q.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"}`}),e.jsxs("div",{className:"flex items-start justify-between mb-4 relative",children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-br ${q.color==="emerald"?"from-emerald-400 to-emerald-600":q.color==="blue"?"from-blue-400 to-blue-600":q.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"} group-hover:scale-110 transition-transform duration-300`,children:e.jsx("span",{className:"material-symbols-outlined text-white",style:{fontSize:28},children:q.icon})}),q.trend&&e.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${q.trendUp?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:14},children:q.trendUp?"trending_up":"trending_down"}),q.trend]})]}),e.jsx("h4",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1 relative",children:q.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-semibold mb-1 relative",children:q.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 relative",children:q.subtitle}),e.jsx("div",{className:`absolute -bottom-2 -right-2 w-24 h-24 rounded-full opacity-10 blur-2xl bg-gradient-to-br ${q.color==="emerald"?"from-emerald-400 to-emerald-600":q.color==="blue"?"from-blue-400 to-blue-600":q.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"}`})]},q.title))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:R.map(q=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400",style:{fontSize:20},children:q.icon})}),q.badge&&e.jsx("span",{className:"badge badge-warning",children:q.badge})]}),e.jsx("h4",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:q.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:q.title})]},q.title))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Sales Overview"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:D(u.revenue)}),e.jsx("span",{className:"text-sm text-emerald-600 font-medium bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded-full",children:"+12.5%"})]})]})}),e.jsx("div",{className:"h-64 flex items-end gap-4 px-4 border-b border-slate-100 dark:border-slate-700 pb-4",children:y.map((q,oe)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-full max-w-[60px] bg-primary rounded-t-lg",style:{height:`${q.amount/I*100}%`,minHeight:"20px"}}),e.jsx("span",{className:"text-xs font-medium text-slate-500",children:q.month})]},oe))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Top Selling Medicine"}),e.jsx("div",{className:"space-y-4",children:p.map((q,oe)=>{const U=Math.max(...p.map(Q=>Q.sales)),M=q.sales/U*100;return e.jsxs("div",{className:"group animate-fadeInUp",style:{animationDelay:`${oe*100}ms`},children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:q.name}),e.jsxs("span",{className:"text-slate-900 dark:text-white font-bold",children:["",(q.sales/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 w-full bg-slate-100 dark:bg-slate-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`${q.color} h-3 rounded-full transition-all duration-700 ease-out`,style:{width:`${M}%`}})}),e.jsx("span",{className:"text-xs text-slate-500 font-medium w-12 text-right",children:q.quantity})]})]},q.name)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-gradient-to-r from-red-50 to-transparent dark:from-red-900/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"warning"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Stock Alerts"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-red-100 text-red-600 rounded-full",children:x.length})]}),e.jsx("button",{onClick:()=>n("/notifications"),className:"text-sm text-primary font-medium hover:underline",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-72 overflow-auto",children:x.length>0?x.map((q,oe)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${oe*50}ms`},children:[e.jsx("div",{className:`mt-0.5 h-3 w-3 rounded-full flex-shrink-0 ${q.severity==="critical"?"bg-red-500":"bg-amber-500"} animate-pulse`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:q.title}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-0.5",children:q.description})]}),e.jsx("button",{className:"px-3 py-1 text-xs font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:q.type==="low_stock"?"Restock":"Review"})]},q.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-green-500 mb-2",children:"check_circle"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"All Clear!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No stock alerts at this time"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"receipt_long"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Recent Invoices"})]}),e.jsx("button",{onClick:()=>n("/sales/invoices"),className:"text-sm text-primary font-medium hover:underline",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-72 overflow-auto",children:b.length>0?b.map((q,oe)=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${oe*50}ms`},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-[18px]",children:"receipt"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:q.invoice_number||`INV-${q.id}`}),e.jsx("p",{className:"text-xs text-slate-500",children:q.customer_name||"Walk-in Customer"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-600",children:D(q.total_amount||0)}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(q.created_at).toLocaleDateString()})]})]},q.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 mb-2",children:"receipt_long"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"No invoices yet"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create an invoice to get started"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:W.map((q,oe)=>e.jsxs("button",{onClick:()=>n(q.path),className:"flex flex-col items-center gap-3 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-primary/50 transition-all hover:-translate-y-1 hover:shadow-lg group animate-fadeInUp",style:{animationDelay:`${oe*50}ms`},children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-${q.color}-100 dark:bg-${q.color}-900/30 flex items-center justify-center group-hover:scale-110 transition-transform`,children:e.jsx("span",{className:`material-symbols-outlined text-${q.color}-600 dark:text-${q.color}-400 text-2xl`,children:q.icon})}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:q.label})]},q.label))})]})]})}function qd({value:n,onChange:r,placeholder:c="Search...",className:i=""}){return e.jsxs("div",{className:`search-bar ${i}`,children:[e.jsx("span",{className:"material-symbols-outlined search-icon",children:"search"}),e.jsx("input",{type:"text",value:n,onChange:u=>r(u.target.value),placeholder:c,className:"search-input"}),n&&e.jsx("button",{onClick:()=>r(""),className:"clear-button",title:"Clear search",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})}),e.jsx("style",{children:`
                .search-bar {
                    position: relative;
                    display: flex;
                    align-items: center;
                    width: 100%;
                    max-width: 400px;
                }
                
                .search-icon {
                    position: absolute;
                    left: 12px;
                    color: #9ca3af;
                    font-size: 20px;
                }
                
                .search-input {
                    width: 100%;
                    padding: 10px 40px 10px 44px;
                    border: 1px solid #e5e7eb;
                    border-radius: 8px;
                    font-size: 14px;
                    transition: all 0.2s;
                }
                
                .search-input:focus {
                    outline: none;
                    border-color: #4a6cf7;
                    box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
                }
                
                .clear-button {
                    position: absolute;
                    right: 8px;
                    background: none;
                    border: none;
                    padding: 4px;
                    cursor: pointer;
                    color: #9ca3af;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                .clear-button:hover {
                    background: #f3f4f6;
                    color: #4b5563;
                }
                
                .clear-button .material-symbols-outlined {
                    font-size: 18px;
                }
            `})]})}function le({variant:n="primary",size:r="md",children:c,icon:i,loading:u,className:h="",disabled:x,...j}){let f="";switch(n){case"primary":f="btn-primary";break;case"secondary":f="btn-secondary";break;case"ghost":f="bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300 border-transparent shadow-none";break;case"danger":case"error":f="bg-red-50 text-red-600 hover:bg-red-100 border-red-200 shadow-sm";break;case"success":f="bg-green-50 text-green-600 hover:bg-green-100 border-green-200 shadow-sm";break;case"warning":f="bg-yellow-50 text-yellow-600 hover:bg-yellow-100 border-yellow-200 shadow-sm";break;case"info":f="bg-blue-50 text-blue-600 hover:bg-blue-100 border-blue-200 shadow-sm";break;case"outline":f="bg-transparent border border-slate-300 text-slate-700 hover:bg-slate-50";break;default:f="btn-primary"}let p="";switch(r){case"sm":p="px-3 py-1.5 text-sm h-8";break;case"lg":p="px-6 py-3 text-lg h-12";break;default:p="px-4 py-2"}return e.jsxs("button",{className:`btn ${f} ${p} ${h} flex items-center justify-center gap-2 transition-all font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed`,disabled:x||u,...j,children:[u?e.jsx("span",{className:`animate-spin rounded-full border-2 border-current border-t-transparent ${r==="sm"?"h-3 w-3":"h-4 w-4"}`}):i?e.jsx("span",{className:`material-symbols-outlined ${r==="sm"?"text-[18px]":"text-[20px]"}`,children:i}):null,c]})}function Aj({title:n,count:r,searchProps:c,onFilterClick:i,actions:u,className:h="",embedded:x=!1}){const j=x?`bg-white dark:bg-slate-800 px-4 py-3 border-b border-slate-100 dark:border-slate-700 ${h}`:`bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 px-4 py-3 ${h}`;return e.jsx("div",{className:j,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("h2",{className:"text-base font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[n,r!==void 0&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap sm:flex-nowrap",children:[c&&e.jsx("div",{className:"w-full sm:w-auto min-w-[220px]",children:e.jsx(qd,{value:c.value,onChange:c.onChange,placeholder:c.placeholder||"Search...",className:"!w-full"})}),i&&e.jsx(le,{variant:"secondary",onClick:i,className:"!p-2",title:"Filter List",children:e.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-500",children:"filter_list"})}),u]})]})})}function Tj({data:n,columns:r,loading:c=!1,emptyMessage:i="No data available",zebra:u=!1,stickyHeader:h=!0,pagination:x,error:j,onRetry:y,headerSlot:f}){const p=()=>Array(5).fill(0).map((g,w)=>e.jsx("tr",{className:"animate-pulse border-b border-slate-100 dark:border-slate-800",children:r.map((A,k)=>e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4"})},k))},`skel-${w}`));return j?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center mb-3",children:e.jsx("span",{className:"material-symbols-outlined text-red-500 text-[24px]",children:"error"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"Failed to load data"}),e.jsx("p",{className:"text-sm mt-1 mb-4 max-w-xs",children:j}),y&&e.jsx("button",{onClick:y,className:"px-4 py-2 bg-white border border-slate-300 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[f&&e.jsx("div",{className:"border-b border-slate-100 dark:border-slate-700",children:f}),e.jsx("div",{className:"overflow-x-auto flex-1 relative",children:e.jsxs("table",{className:`w-full text-left text-sm ${u?"table-zebra":""} border-collapse`,children:[e.jsx("thead",{className:`bg-slate-50 dark:bg-slate-900/90 z-10 ${h?"sticky top-0":""}`,children:e.jsx("tr",{children:r.map((g,w)=>{const A=g.numeric||g.align==="right"?"text-right":g.align==="center"?"text-center":"text-left";return e.jsx("th",{className:`px-4 py-3 font-semibold text-slate-900 dark:text-white uppercase text-xs tracking-wider ${A} ${g.className||""}`,style:{width:g.width},children:g.header},w)})})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:c?p():n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:r.length,className:"px-4 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"inbox"})}),e.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-400",children:i})]})})}):n.map((g,w)=>e.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:r.map((A,k)=>{const S=A.render?A.render(g):g[A.key],b=A.numeric||A.align==="right"?"text-right":A.align==="center"?"text-center":"text-left";return e.jsx("td",{className:`px-4 py-3 text-slate-600 dark:text-slate-300 ${b} ${A.className||""}`,children:S},k)})},w))})]})}),x&&!c&&!j&&n.length>0&&e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Showing ",e.jsx("span",{className:"font-medium",children:(x.currentPage-1)*x.pageSize+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(x.currentPage*x.pageSize,x.totalItems)})," of ",e.jsx("span",{className:"font-medium",children:x.totalItems})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x.onPageChange(Math.max(1,x.currentPage-1)),disabled:x.currentPage===1,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-800 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 disabled:opacity-30 disabled:hover:bg-transparent transition-all",title:"Previous Page",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})}),e.jsx("button",{onClick:()=>x.onPageChange(Math.min(x.totalPages,x.currentPage+1)),disabled:x.currentPage===x.totalPages,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-800 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 disabled:opacity-30 disabled:hover:bg-transparent transition-all",title:"Next Page",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})})]})]})]})}function Dj({title:n,subtitle:r,actions:c}){return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white capitalize tracking-tight",children:n}),r&&e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:r})]}),c]})}function Rj({children:n}){return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 animate-fadeIn",children:n})}function Mj({children:n,className:r="",loading:c=!1}){return c?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px] h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):e.jsx("div",{className:`space-y-6 max-w-[1600px] mx-auto ${r}`,children:n})}const me=Object.assign(Mj,{Header:Dj,KPICards:Rj,ListControls:Aj,DataTable:Tj});function ve({title:n,value:r,change:c,changeType:i="up",icon:u,onClick:h,isActive:x=!1,valueClassName:j,className:y=""}){const f={up:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10",down:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-500/10",neutral:"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-500/10"},p={up:"trending_up",down:"trending_down",neutral:"trending_flat"};return e.jsxs("div",{onClick:h,className:`
                flex flex-col gap-1 rounded-xl p-5 shadow-sm border transition-all duration-200
                ${h?"cursor-pointer hover:shadow-md hover:-translate-y-0.5":""}
                ${x?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 ring-1 ring-blue-500/30":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}
                ${y}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm font-medium ${x?"text-blue-700 dark:text-blue-300":"text-slate-500 dark:text-slate-400"}`,children:n}),e.jsx("span",{className:`material-symbols-outlined ${x?"text-blue-600 dark:text-blue-400":"text-slate-400"}`,children:u})]}),e.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[e.jsx("p",{className:`text-2xl font-bold ${j||(x?"text-blue-900 dark:text-blue-100":"text-slate-900 dark:text-white")}`,children:r}),c&&e.jsxs("span",{className:`flex items-center text-xs font-medium ${f[i]} px-1.5 py-0.5 rounded mb-1`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] mr-0.5",children:p[i]}),c]})]})]})}const Oj={success:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",warning:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",error:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",info:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",secondary:"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",primary:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"};function $e({children:n,variant:r,className:c=""}){return e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${Oj[r]} ${c}`,children:n})}function Et({isOpen:n,onClose:r,title:c,children:i,footer:u,maxWidth:h="md",size:x}){const j=x||h;if(!n)return null;const y={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:`modal-content w-full ${y[j]} mx-4`,onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:c}),e.jsx("button",{onClick:r,className:"p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"close"})})]}),e.jsx("div",{className:"p-6",children:i}),u&&e.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:u})]})})}function Ut({isOpen:n,onClose:r,onConfirm:c,title:i,message:u,confirmText:h="Confirm",cancelText:x="Cancel",variant:j="danger"}){if(!n)return null;const y=()=>{switch(j){case"danger":return"warning";case"warning":return"error";case"info":return"info";default:return"warning"}},p=(()=>{switch(j){case"danger":return{iconBg:"bg-red-100 dark:bg-red-900/30",iconText:"text-red-600 dark:text-red-400",buttonBg:"bg-red-600 hover:bg-red-700 shadow-red-500/20"};case"warning":return{iconBg:"bg-amber-100 dark:bg-amber-900/30",iconText:"text-amber-600 dark:text-amber-400",buttonBg:"bg-amber-600 hover:bg-amber-700 shadow-amber-500/20"};case"info":return{iconBg:"bg-blue-100 dark:bg-blue-900/30",iconText:"text-blue-600 dark:text-blue-400",buttonBg:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20"}}})();return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${p.iconBg} ${p.iconText} flex items-center justify-center mb-4`,children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:y()})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:i}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:u})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 font-medium transition-colors",children:x}),e.jsx("button",{onClick:c,className:`flex-1 px-4 py-2.5 text-white rounded-xl font-medium transition-colors shadow-lg ${p.buttonBg}`,children:h})]})]})})}function zj(){const n=Be(),{user:r}=Ie(),i=(r?.role||"user")==="super_admin",[u,h]=m.useState([]),[x,j]=m.useState(!0),[y,f]=m.useState(""),[p,g]=m.useState("all"),[w,A]=m.useState(1),[k,S]=m.useState(0),[b,E]=m.useState(0),T=10,[D,z]=m.useState(null),[R,W]=m.useState([]),[I,q]=m.useState(!1);m.useEffect(()=>{U(),oe()},[w,y,p]);const oe=async()=>{try{const te=await _t.list({status:"active",size:1});E(te.data.total||0)}catch(te){console.error("Failed to fetch stats",te)}},U=async()=>{try{j(!0);const te={page:w,size:T};y&&(te.search=y),p!=="all"&&(te.status=p);const N=await _t.list(te);h(N.data.items||[]),S(N.data.total||0)}catch(te){console.error("Failed to fetch warehouses:",te),h([])}finally{j(!1)}},M=async te=>{z(te),q(!0);try{const N=await Ct.list({warehouse_id:te.id,size:100});W(N.data.items||[])}catch(N){console.error("Failed to fetch connected shops:",N),W([])}finally{q(!1)}},[Q,he]=m.useState(!1),[xe,be]=m.useState(null),O=te=>{be(te),he(!0)},V=async()=>{if(xe)try{await _t.delete(xe.id),window.toast?.success("Warehouse deleted successfully"),U(),oe()}catch(te){console.error("Failed to delete warehouse:",te),window.toast?.error(te.response?.data?.detail||"Failed to delete warehouse")}finally{he(!1),be(null)}},se=[{header:"Warehouse",key:"name",render:te=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"warehouse"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:te.name}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:te.code})]})]})},{header:"Location",key:"city",render:te=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:te.city}),e.jsx("span",{className:"text-xs text-slate-500",children:te.state})]}),className:"hidden sm:table-cell"},{header:"Shops",key:"shop_count",render:te=>e.jsxs("div",{className:"flex items-center justify-center font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] mr-1 text-slate-400",children:"storefront"}),te.shop_count||0]}),align:"center"},{header:"Status",key:"status",render:te=>e.jsx($e,{variant:te.status==="active"?"success":te.status==="suspended"?"error":"secondary",children:te.status}),align:"center"},{header:"Actions",key:"id",render:te=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"ghost",onClick:()=>M(te),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})}),e.jsx(le,{variant:"ghost",onClick:()=>n(`/warehouses/edit/${te.id}`),className:"!p-1.5 h-8 w-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20",title:"Edit Warehouse",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),i&&e.jsx(le,{variant:"ghost",onClick:()=>O(te),className:"!p-1.5 h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",title:"Delete Warehouse",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Warehouses",subtitle:`Manage ${k} warehouses in your network`,actions:e.jsxs(le,{variant:"primary",onClick:()=>n("/warehouses/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Warehouse"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Warehouses",value:k,icon:"warehouse",onClick:()=>g("all"),isActive:p==="all"}),e.jsx(ve,{title:"Active Warehouses",value:b,icon:"check_circle",onClick:()=>g("active"),isActive:p==="active",trend:"neutral"}),e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:"hidden lg:block"})]}),e.jsx(me.DataTable,{columns:se,data:u,loading:x,emptyMessage:"No warehouses found. Add your first warehouse.",pagination:{currentPage:w,totalPages:Math.ceil(k/T),onPageChange:A,totalItems:k,pageSize:T},headerSlot:e.jsx(me.ListControls,{title:"Warehouse List",count:k,searchProps:{value:y,onChange:te=>{f(te),A(1)},placeholder:"Search warehouses..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:p,onChange:te=>{g(te.target.value),A(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})}),embedded:!0})}),e.jsx(Et,{isOpen:!!D,onClose:()=>z(null),title:D?.name||"Warehouse Details",maxWidth:"lg",children:D&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Code"}),e.jsx("p",{className:"text-sm mt-1 font-mono",children:D.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Status"}),e.jsx($e,{variant:D.status==="active"?"success":"secondary",className:"mt-1",children:D.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Capacity"}),e.jsxs("p",{className:"text-sm mt-1",children:[D.capacity?.toLocaleString()||"-"," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"City"}),e.jsx("p",{className:"text-sm mt-1",children:D.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"State"}),e.jsx("p",{className:"text-sm mt-1",children:D.state})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Contact"}),e.jsx("p",{className:"text-sm mt-1",children:D.phone||"-"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-3",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Address"}),e.jsxs("p",{className:"text-sm mt-1",children:[D.address||"-"," - ",D.pincode]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4",children:["Connected Medical Shops (",R.length,")"]}),I?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):R.length>0?e.jsx("div",{className:"grid gap-3",children:R.map((te,N)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:te.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[te.city,", ",te.state]})]})]}),e.jsx($e,{variant:te.status==="active"?"success":"secondary",className:"text-xs",children:te.status})]},N))}):e.jsx("div",{className:"text-center py-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No medical shops connected to this warehouse."})})]})]})}),e.jsx(Ut,{isOpen:Q,onClose:()=>he(!1),onConfirm:V,title:"Delete Warehouse",message:`Are you sure you want to delete "${xe?.name}"? This action cannot be undone.`,confirmText:"Delete Warehouse"})]})}function Xt({title:n,description:r,subtitle:c,icon:i,actions:u,children:h,className:x="",loading:j=!1}){return e.jsxs("div",{className:`flex flex-col h-full ${x}`,children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6 sm:flex-row sm:items-end sm:justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-[24px]",children:i})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white capitalize",children:n}),(r||c)&&e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:r||c})]})]})}),u&&e.jsx("div",{className:"flex items-center gap-3",children:u})]}),e.jsx("div",{className:"flex-1",children:j?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px] h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):h})]})}function Xe({children:n,className:r="",padding:c,title:i,icon:u}){const h=c?{padding:c}:{};return e.jsxs("div",{className:`card ${r}`,style:h,children:[(i||u)&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[u&&e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400",children:u}),i&&e.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-white",children:i})]}),n]})}function ue({label:n,error:r,required:c,className:i="",...u}){return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[n,c&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{className:`input ${r?"border-red-500":""} ${i}`,...u}),r&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),r]})]})}function j0({label:n,error:r,options:c,placeholder:i,className:u="",...h}){return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[n,h.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:`input appearance-none ${r?"border-red-500":""} ${u}`,...h,children:[i&&e.jsx("option",{value:"",children:i}),c.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"expand_more"})})]}),r&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),r]})]})}function Hi({value:n,onChange:r,options:c,label:i,placeholder:u="Select...",error:h,required:x,disabled:j,className:y=""}){const[f,p]=m.useState(!1),[g,w]=m.useState(""),A=m.useRef(null);m.useEffect(()=>{const S=c.find(b=>b.value===n);S&&w(S.label)},[n,c]),m.useEffect(()=>{function S(b){if(A.current&&!A.current.contains(b.target)){p(!1);const E=c.find(T=>T.value===n);E?w(E.label):n||w("")}}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[A,n,c]);const k=c.filter(S=>S.label.toLowerCase().includes(g.toLowerCase()));return e.jsxs("div",{className:`w-full ${y}`,ref:A,children:[i&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[i,x&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:g,onChange:S=>{w(S.target.value),p(!0),S.target.value||r("")},onFocus:()=>p(!0),placeholder:u,disabled:j,className:`input w-full ${h?"border-red-500":""} ${j?"opacity-50 cursor-not-allowed":""}`}),f&&!j&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-60 overflow-auto",children:k.length>0?k.map(S=>e.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 ${n===S.value?"bg-primary/10 text-primary font-medium":"text-slate-700 dark:text-slate-300"}`,onClick:()=>{r(S.value),w(S.label),p(!1)},children:S.label},S.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-slate-500 text-center",children:"No matches found"})})]}),h&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),h]})]})}function N0(){const n=Be(),{activeEntity:r}=Ta(),[c,i]=m.useState([]),[u,h]=m.useState([]),[x,j]=m.useState([]),y=r?.type,f=r?.id||"",p=r?.name||"",[g,w]=m.useState(""),[A,k]=m.useState(""),[S,b]=m.useState(""),[E,T]=m.useState(""),[D,z]=m.useState(""),[R,W]=m.useState(""),[I,q]=m.useState(""),[oe,U]=m.useState(!1),[M,Q]=m.useState({type:"",text:""}),[he,xe]=m.useState([]),[be,O]=m.useState("");m.useEffect(()=>{(!r||r.type!=="warehouse"&&r.type!=="shop")&&n("/")},[r,n]),m.useEffect(()=>{r&&(V(),r.type==="warehouse"&&te())},[r]),m.useEffect(()=>{g?se(g):h([]),k(""),b(""),z(""),O("")},[g]);const V=async()=>{try{const H=await vt.list({size:100});i(H.data.items||H.data)}catch(H){console.error("Error loading medicines:",H)}},se=async H=>{try{const ge=await vt.getBatches(H);let ke=[];ge.data&&(Array.isArray(ge.data)?ke=ge.data:ge.data.items&&Array.isArray(ge.data.items)?ke=ge.data.items:ge.data.data&&Array.isArray(ge.data.data)&&(ke=ge.data.data)),h(ke)}catch(ge){console.error("Error loading batches:",ge),h([])}},te=async()=>{try{const H=await Ai.list({size:100});j(H.data.items||[])}catch(H){console.error("Error loading racks:",H)}},N=ga(),[_,Y]=m.useState(null),[G,F]=m.useState([]);m.useEffect(()=>{N.state?.dispatchId&&(Y(N.state.dispatchId),P(N.state.dispatchId))},[N.state]);const P=async H=>{try{U(!0);const ge=await Is.get(H);F(ge.data.items||[])}catch(ge){console.error("Failed to load dispatch",ge),Q({type:"error",text:"Failed to load dispatch details"})}finally{U(!1)}},pe=async(H,ge,ke=!1)=>{try{U(!0),await Bl.stockEntry({shop_id:f,medicine_id:H.medicine_id,batch_number:H.batch_number,expiry_date:H.expiry_date,quantity:H.quantity,purchase_price:H.purchase_price||0,selling_price:H.selling_price||0,rack_name:H.rack_name||R,rack_number:H.rack_number||I});const de=[...G];de[ge].status="received",de[ge].rack_name=H.rack_name||R,de[ge].rack_number=H.rack_number||I,F(de),de.every(Ae=>Ae.status==="received")?(await Is.updateStatus(_,"delivered"),Q({type:"success",text:"All items received. Dispatch marked as Delivered."}),setTimeout(()=>n("/dispatches"),2e3)):ke||Q({type:"success",text:"Item received successfully"})}catch(de){console.error(de),Q({type:"error",text:"Failed to receive item"})}finally{U(!1)}},fe=H=>{if(O(H),H){const ge=u.find(ke=>ke.id===H);ge&&(k(ge.batch_number),b(ge.expiry_date))}},Oe=async H=>{if(H.preventDefault(),!f||!g||!A||!S||!E){Q({type:"error",text:"Please fill all required fields"});return}U(!0);try{const ge={medicine_id:g,batch_number:A,expiry_date:S,quantity:parseInt(E),purchase_price:parseFloat(D)||0,selling_price:c.find(de=>de.id===g)?.selling_price||0};y==="warehouse"?(ge.warehouse_id=f,ge.rack_name=R||void 0,ge.rack_number=I||void 0):ge.shop_id=f,await Bl.stockEntry(ge);const ke=c.find(de=>de.id===g);xe(de=>[{medicine:ke?.name,batch:A,quantity:parseInt(E),rack:ge.rack_name?`${ge.rack_number||""} / ${ge.rack_name}`:"-",timestamp:new Date().toLocaleTimeString()},...de.slice(0,9)]),Q({type:"success",text:"Stock entry added successfully"}),T(""),z(""),W(""),q(""),k(""),b(""),w(""),O("")}catch(ge){Q({type:"error",text:ge.response?.data?.detail||"Failed to add stock entry"})}finally{U(!1)}};return e.jsx(Xt,{title:`${y==="shop"?"Shop":"Warehouse"} Stock Entry`,description:`Add new inventory items to your ${y}`,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Xe,{title:"Add Stock",icon:"add_circle",children:[M.text&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-start gap-3 ${M.type==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:M.type==="error"?"error":"check_circle"}),e.jsx("p",{children:M.text})]}),_?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-xl mb-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Receiving Dispatch Shipment"}),e.jsxs("p",{className:"text-sm",children:["Verify and accept items below. Status: ",N.state?.status]})]}),e.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-xl mb-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Bulk Receive Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(ue,{label:"Global Rack No",value:I,onChange:H=>q(H.target.value),placeholder:"Apply to all items",className:"bg-white"}),e.jsx(ue,{label:"Global Box Name",value:R,onChange:H=>W(H.target.value),placeholder:"Apply to all items",className:"bg-white"}),e.jsx("div",{className:"flex items-end",children:e.jsx(le,{onClick:async()=>{if(confirm("Receive all remaining items with these rack details?")){U(!0);try{const H=G.filter(ge=>ge.status!=="received");for(const ge of H){const ke=G.findIndex(de=>de===ge);await pe(ge,ke,!0)}Q({type:"success",text:"All items received successfully"}),setTimeout(()=>n("/dispatches"),1500)}catch(H){console.error(H)}finally{U(!1)}}},variant:"primary",className:"w-full justify-center",disabled:oe||G.every(H=>H.status==="received"),children:"Receive All Remaining"})})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Enters the specified Rack/Box for all items and marks them as received. Individual inputs below override these if set."})]}),G.map((H,ge)=>e.jsxs("div",{className:`p-4 rounded-xl border mb-4 ${H.status==="received"?"bg-green-50 border-green-200 opacity-75":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-white text-lg",children:H.medicine_name}),e.jsxs("div",{className:"text-sm text-slate-500",children:[H.manufacturer,"  Batch: ",H.batch_number]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Exp: ",H.expiry_date,"  MRP: ",H.mrp]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:H.quantity}),e.jsx("div",{className:"text-xs text-slate-500",children:"Qty"})]})]}),H.status!=="received"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(ue,{label:"Rack No",value:H.rack_number||"",onChange:ke=>{const de=[...G];de[ge].rack_number=ke.target.value,F(de)},placeholder:I||"R-01",className:"!text-sm"}),e.jsx(ue,{label:"Box Name",value:H.rack_name||"",onChange:ke=>{const de=[...G];de[ge].rack_name=ke.target.value,F(de)},placeholder:R||"Shelf A",className:"!text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(le,{onClick:()=>pe(H,ge),variant:"success",className:"w-full justify-center !py-2",disabled:oe,children:"Accept"})})]}):e.jsxs("div",{className:"mt-2 flex items-center text-green-600 font-medium",children:[e.jsx("span",{className:"material-symbols-outlined mr-2",children:"check_circle"}),"Received to ",H.rack_name||H.rack_number||"Stock"]})]},ge)),G.length===0&&!oe&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No items found in dispatch."})]}):e.jsxs("form",{onSubmit:Oe,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-white mb-2 capitalize",children:y}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-700 dark:text-slate-300 font-medium flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:y==="warehouse"?"warehouse":"store"}),p]})]}),e.jsxs("div",{children:[e.jsx(Hi,{label:"Medicine *",value:g,onChange:H=>w(H),required:!0,options:c.map(H=>({value:H.id,label:`${H.name} ${H.brand?`(${H.brand})`:""} - ${H.manufacturer}`})),placeholder:"Select Medicine"}),g&&(()=>{const H=c.find(ge=>ge.id===g);return H?e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg text-sm grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between col-span-2 border-b border-blue-200 dark:border-blue-800 pb-2 mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Brand:"}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[H.brand||"-"," (",H.manufacturer,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Generic:"})," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:H.generic_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"MRP:"})," ",e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["",H.mrp]})]})]}):null})()]}),u.length>0&&e.jsx("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:e.jsx(j0,{label:"Quick Fill from Existing Batch (Optional)",value:be,onChange:H=>fe(H.target.value),placeholder:"-- Use new batch details below --",options:u.map(H=>({value:H.id,label:`${H.batch_number} (Exp: ${H.expiry_date})`})),className:"!bg-white"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Batch Number *",value:A,onChange:H=>k(H.target.value.toUpperCase()),placeholder:"New or Existing Batch Number",required:!0,disabled:!g,className:"font-mono"}),e.jsx(ue,{label:"Expiry Date *",type:"date",value:S,onChange:H=>b(H.target.value),required:!0,disabled:!g})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Quantity *",type:"number",value:E,onChange:H=>T(H.target.value),placeholder:"Enter quantity",min:"1",required:!0}),e.jsx(ue,{label:"Purchase Price () *",type:"number",step:"0.01",value:D,onChange:H=>z(H.target.value),placeholder:"Enter purchase price",min:"0",required:!0})]}),y==="warehouse"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(j0,{label:"Rack No",value:x.find(H=>H.rack_number===I)?.id||"",onChange:H=>{const ge=x.find(ke=>ke.id===H.target.value);ge&&q(ge.rack_number)},options:x.map(H=>({value:H.id,label:`${H.rack_number} - ${H.rack_name}`})),placeholder:"Select Rack"}),e.jsx(ue,{label:"Box Name / Location (Optional)",value:R,onChange:H=>W(H.target.value),placeholder:"e.g., Shelf A, Box 2"})]}),e.jsx(le,{type:"submit",variant:"primary",loading:oe,className:"w-full justify-center",children:"Add Stock Entry"})]})]}),e.jsx(Xe,{title:"Recent Entries",icon:"history",className:"h-fit",children:he.length>0?e.jsx("ul",{className:"space-y-4",children:he.map((H,ge)=>e.jsxs("li",{className:"flex justify-between items-start p-3 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 animate-fadeIn",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:H.medicine}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded bg-white border border-slate-200 text-slate-600",children:["Batch: ",H.batch]}),H.rack&&H.rack!=="-"&&e.jsxs($e,{variant:"info",className:"!py-0.5",children:[" ",H.rack]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["+ ",H.quantity]}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:H.timestamp})]})]},ge))}):e.jsxs("div",{className:"text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-900/30 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"post_add"}),e.jsx("p",{children:"No recent entries"}),e.jsx("p",{className:"text-sm opacity-75",children:"Added stock will appear here"})]})})]})})}function Gi({masterKey:n,value:r,onChange:c,placeholder:i="Select...",required:u=!1,disabled:h=!1,valueField:x="id",labelField:j="name",allowAdd:y=!1,onAdd:f,entityType:p,className:g="",style:w}){const{getMaster:A,getStatusesByEntity:k,isLoading:S}=ct();let b=[];n==="statuses"&&p?b=k(p):b=A(n);const E=R=>{const W=R.target.value;if(W==="__ADD_NEW__"&&f){f();return}c(W)},T=R=>x==="code"&&R.code!==void 0?R.code:R.id,D=R=>n==="hsn_codes"?`${R.hsn_code} - ${R.description?.substring(0,30)||""}`:n==="gst_slabs"?`${R.rate}%${R.description?` - ${R.description}`:""}`:n==="units"&&R.short_name?`${R.name} (${R.short_name})`:n==="payment_methods"&&R.icon?`${R.icon} ${R.name}`:R[j]||R.name||R.code||String(R.id),z=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${h||S?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:r,onChange:E,required:u,disabled:h||S,className:g||z,style:w,children:[e.jsx("option",{value:"",children:S?"Loading...":i}),b.map(R=>e.jsx("option",{value:T(R),children:D(R)},R.id)),y&&e.jsx("option",{value:"__ADD_NEW__",children:"+ Add New..."})]})}function Bd({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h,allowAdd:x,onAdd:j}){const{getMaster:y,isLoading:f}=ct(),p=y("categories"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||f?"opacity-60 cursor-not-allowed":""}`,w=!f&&p.length===0;return e.jsxs("select",{value:n,onChange:A=>{const k=A.target.value;if(k==="__ADD_NEW__"&&j){j();return}r(k)},required:c,disabled:i||f||w,className:u||g,title:w?"No categories available. Please ask your Super Admin to add categories in Master Data Management  Medicine Categories":void 0,children:[e.jsx("option",{value:"",children:f?"Loading...":w?" No categories found - Contact Super Admin":h||"Select Category"}),p.map(A=>e.jsx("option",{value:A.name,children:A.name},A.id)),x&&e.jsx("option",{value:"__ADD_NEW__",children:"+ Add New..."})]})}function wp({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:j}=ct(),y=x("medicine_types"),f=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||j?"opacity-60 cursor-not-allowed":""}`,p=!j&&y.length===0;return e.jsxs("select",{value:n,onChange:g=>r(g.target.value),required:c,disabled:i||j||p,className:u||f,title:p?"No medicine types available. Please ask your Super Admin to add medicine types in Master Data Management  Medicine Types":void 0,children:[e.jsx("option",{value:"",children:j?"Loading...":p?" No medicine types found - Contact Super Admin":h||"Select Medicine Type"}),y.map(g=>e.jsx("option",{value:g.code,children:g.name},g.id))]})}function kp({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:j}=ct(),y=x("units"),f=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||j?"opacity-60 cursor-not-allowed":""}`,p=!j&&y.length===0;return e.jsxs("select",{value:n,onChange:g=>r(g.target.value),required:c,disabled:i||j||p,className:u||f,title:p?"No units available. Please ask your Super Admin to add units in Master Data Management  Units":void 0,children:[e.jsx("option",{value:"",children:j?"Loading...":p?" No units found - Contact Super Admin":h||"Select Unit"}),y.map(g=>e.jsxs("option",{value:g.name,children:[g.name," (",g.short_name,")"]},g.id))]})}function Sp({value:n,onChange:r,required:c,disabled:i,className:u}){const{getMaster:h,isLoading:x}=ct(),j=h("gst_slabs"),y=!x&&j.length===0;return e.jsxs("select",{value:n,onChange:f=>r(Number(f.target.value)),required:c,disabled:i||x||y,className:u||"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",title:y?"No GST slabs available. Please ask your Super Admin to add GST slabs in Master Data Management  Tax & Finance Masters  GST/VAT":void 0,children:[y&&e.jsx("option",{value:"",children:" No GST slabs found - Contact Super Admin"}),j.map(f=>e.jsxs("option",{value:f.rate,children:[f.rate,"%",f.description?` - ${f.description}`:""]},f.id))]})}function Lj({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:j}=ct(),y=x("hsn_codes"),f=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||j?"opacity-60 cursor-not-allowed":""}`,p=!j&&y.length===0,g=w=>{const A=w.target.value,k=y.find(S=>S.hsn_code===A);r(A,k?.gst_rate)};return e.jsxs("select",{value:n,onChange:g,required:c,disabled:i||j||p,className:u||f,title:p?"No HSN codes available. Please ask your Super Admin to add HSN codes in Master Data  HSN Codes":void 0,children:[e.jsx("option",{value:"",children:j?"Loading...":p?" No HSN codes found - Contact Super Admin":h||"Select HSN Code"}),y.map(w=>e.jsxs("option",{value:w.hsn_code,children:[w.hsn_code," - ",w.description?.substring(0,40)||"No description"," (",w.gst_rate,"%)"]},w.id))]})}function Uj({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){return e.jsx(Gi,{masterKey:"customer_types",value:n,onChange:r,placeholder:h||"Select Customer Type",valueField:"code",required:c,disabled:i,className:u})}function _p({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){const x=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}];return e.jsxs("select",{value:n,onChange:j=>r(j.target.value),required:c,disabled:i,className:u||"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:h||"Select Gender"}),x.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]})}function qj({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){const x=[{value:"full_time",label:"Full Time"},{value:"part_time",label:"Part Time"},{value:"contract",label:"Contract"},{value:"intern",label:"Intern"}];return e.jsxs("select",{value:n,onChange:j=>r(j.target.value),required:c,disabled:i,className:u||"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:h||"Select Employment Type"}),x.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]})}function Bj({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){return e.jsx(Gi,{masterKey:"urgency_levels",value:n,onChange:r,placeholder:h||"Select Urgency",valueField:"code",required:c,disabled:i,className:u})}function Hd({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){return e.jsx(Gi,{masterKey:"warehouses",value:n,onChange:r,placeholder:h||"Select Warehouse",required:c,disabled:i,className:u})}function Gd({value:n,onChange:r,required:c,disabled:i,className:u,warehouseId:h}){const{getMaster:x,isLoading:j}=ct();let y=x("shops");return h&&(y=y.filter(f=>f.warehouse_id===h)),e.jsxs("select",{value:n,onChange:f=>r(f.target.value),required:c,disabled:i||j||y.length===0,className:u||"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"",children:j?"Loading...":y.length===0?" No shops found":"Select Shop"}),y.map(f=>e.jsxs("option",{value:f.id,children:[f.name," (",f.code,")"]},f.id))]})}function Hj({value:n,onChange:r,entityType:c,required:i,disabled:u,className:h,placeholder:x}){return e.jsx(Gi,{masterKey:"statuses",value:n,onChange:r,placeholder:x||"Select Status",valueField:"code",entityType:c,required:i,disabled:u,className:h})}function Cp({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:j}=ct(),y=x("brands"),f=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||j?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:n,onChange:p=>r(p.target.value),required:c,disabled:i||j,className:u||f,children:[e.jsx("option",{value:"",children:j?"Loading...":h||"Select Brand"}),y.map(p=>e.jsx("option",{value:p.name,children:p.name},p.id))]})}function Ep({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:h}){const{getMaster:x,isLoading:j}=ct(),y=x("manufacturers"),f=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||j?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:n,onChange:p=>r(p.target.value),required:c,disabled:i||j,className:u||f,children:[e.jsx("option",{value:"",children:j?"Loading...":h||"Select Manufacturer"}),y.map(p=>e.jsx("option",{value:p.name,children:p.name},p.id))]})}function Gj(){const n=Be(),{user:r}=Ie(),{isLoading:c}=ct(),u=(r?.role||"user")==="super_admin",[h,x]=m.useState([]),[j,y]=m.useState(!0),[f,p]=m.useState(""),[g,w]=m.useState("all"),[A,k]=m.useState(1),[S,b]=m.useState(0),E=10;m.useEffect(()=>{T()},[A,f,g]);const T=async()=>{try{y(!0);const M={page:A,size:E};f&&(M.search=f),g!=="all"&&g&&(M.status=g);const Q=await Ct.list(M);x(Q.data.items||[]),b(Q.data.total||0)}catch(M){console.error("Failed to fetch shops:",M),x([])}finally{y(!1)}},[D,z]=m.useState(!1),[R,W]=m.useState(null),I=M=>{W(M),z(!0)},q=async()=>{if(R)try{await Ct.delete(R.id),window.toast?.success("Shop deleted successfully"),T()}catch(M){console.error("Failed to delete shop:",M),window.toast?.error(M.response?.data?.detail||"Failed to delete shop")}finally{z(!1),W(null)}},oe={active:h.filter(M=>M.status==="active").length,retail:h.filter(M=>M.shop_type==="retail").length,hospital:h.filter(M=>M.shop_type==="hospital").length},U=[{header:"Shop",key:"name",render:M=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shadow-sm",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:M.name}),e.jsx("div",{className:"text-xs text-slate-500",children:M.phone})]})]})},{header:"Code",key:"code",render:M=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:M.code})},{header:"Type",key:"shop_type",render:M=>e.jsx($e,{variant:"secondary",className:"capitalize",children:M.shop_type}),className:"hidden md:table-cell"},{header:"Location",key:"city",render:M=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:M.city}),e.jsx("span",{className:"text-xs text-slate-500",children:M.state})]}),className:"hidden sm:table-cell"},{header:"Warehouse",key:"warehouse_name",render:M=>M.warehouse_name?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"warehouse"}),e.jsx("span",{children:M.warehouse_name})]}):e.jsxs("span",{className:"text-xs text-slate-400 italic flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link_off"}),"Unassigned"]}),className:"hidden lg:table-cell"},{header:"Status",key:"status",render:M=>e.jsx($e,{variant:M.status==="active"?"success":M.status==="suspended"?"error":"secondary",children:M.status}),align:"center"},{header:"Actions",key:"id",render:M=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"ghost",onClick:()=>n(`/shops/${M.id}/edit`),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Shop",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),u&&e.jsx(le,{variant:"ghost",onClick:()=>I(M),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",title:"Delete Shop",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(me,{loading:c,children:[e.jsx(me.Header,{title:"Medical Shops",subtitle:`Manage ${S} retail pharmacy locations`,actions:e.jsxs(le,{variant:"primary",onClick:()=>n("/shops/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add_business"}),"Add Shop"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Shops",value:S,icon:"storefront",onClick:()=>w("all"),isActive:g==="all"}),e.jsx(ve,{title:"Active",value:oe.active,icon:"check_circle",trend:"up",change:"+2 this month"}),e.jsx(ve,{title:"Retail",value:oe.retail,icon:"shopping_bag",trend:"neutral"}),e.jsx(ve,{title:"Hospital",value:oe.hospital,icon:"local_hospital",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:U,data:h,loading:j,emptyMessage:"No medical shops found in the system.",pagination:{currentPage:A,totalPages:Math.ceil(S/E),onPageChange:k,totalItems:S,pageSize:E},headerSlot:e.jsx(me.ListControls,{title:"Shop List",count:S,searchProps:{value:f,onChange:M=>{p(M),k(1)},placeholder:"Search shops..."},actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Hj,{entityType:"shop",value:g,onChange:M=>{w(M),k(1)},placeholder:"All Status",className:"!w-40 !py-1.5 !text-sm !rounded-lg"})}),embedded:!0})}),e.jsx(Ut,{isOpen:D,onClose:()=>z(!1),onConfirm:q,title:"Delete Shop",message:`Are you sure you want to delete "${R?.name}"? This action cannot be undone.`,confirmText:"Delete Shop"})]})}function Fj(){const n=Be(),{user:r}=Ie(),i=(r?.role||"user")==="super_admin",[u,h]=m.useState([]),[x,j]=m.useState(!0),[y,f]=m.useState(""),[p,g]=m.useState(""),[w,A]=m.useState(1),[k,S]=m.useState(0),b=15;m.useEffect(()=>{E()},[w,y,p]);const E=async()=>{try{j(!0);const U={page:w,size:b};y&&(U.search=y),p&&(U.category=p);const M=await vt.list(U);h(M.data.items||[]),S(M.data.total||0)}catch(U){console.error("Failed to fetch medicines:",U),h([])}finally{j(!1)}},[T,D]=m.useState(!1),[z,R]=m.useState(null),W=U=>{R(U),D(!0)},I=async()=>{if(z)try{await vt.delete(z.id),window.toast?.success("Medicine deleted successfully"),E()}catch(U){console.error("Failed to delete medicine:",U),window.toast?.error(U.response?.data?.detail||"Failed to delete medicine")}finally{D(!1),R(null)}},q={total:k,active:u.filter(U=>U.is_active).length,lowStock:u.filter(U=>U.total_stock<50).length,categories:new Set(u.map(U=>U.category).filter(Boolean)).size||0},oe=[{header:"Medicine",key:"name",render:U=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"medication"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:U.name}),e.jsx("div",{className:"text-xs text-slate-500",children:U.generic_name})]})]})},{header:"Mfg",key:"manufacturer",className:"hidden md:table-cell",render:U=>e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-sm",children:U.manufacturer})},{header:"Purchase",key:"purchase_price",align:"right",className:"hidden lg:table-cell",render:U=>e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:["",U.purchase_price?.toFixed(2)]})},{header:"MRP",key:"mrp",align:"right",className:"hidden sm:table-cell",render:U=>e.jsxs("span",{className:"text-slate-500 dark:text-slate-400 line-through text-xs mr-2",children:["",U.mrp.toFixed(2)]})},{header:"Sale Value",key:"selling_price",align:"right",render:U=>e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:["",(U.selling_price||U.mrp).toFixed(2)]})},{header:"GST",key:"gst_rate",align:"center",className:"hidden xl:table-cell",render:U=>e.jsxs($e,{variant:"secondary",children:[U.gst_rate,"%"]})},{header:"Stock",key:"total_stock",align:"right",render:U=>e.jsx("span",{className:`font-medium ${U.total_stock<50?"text-red-600 dark:text-red-400":"text-slate-600 dark:text-slate-400"}`,children:U.total_stock.toLocaleString()})},{header:"Status",key:"is_active",align:"center",className:"hidden sm:table-cell",render:U=>e.jsx($e,{variant:U.is_active?"success":"secondary",children:U.is_active?"Active":"Inactive"})},{header:"Actions",key:"id",align:"right",render:U=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"ghost",onClick:()=>n(`/medicines/${U.id}/edit`),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Medicine",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),i&&e.jsx(le,{variant:"ghost",onClick:()=>W(U),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",title:"Delete Medicine",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Medicines",subtitle:"Manage your medicine catalog",actions:e.jsxs(le,{variant:"primary",onClick:()=>n("/medicines/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Medicine"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Medicines",value:q.total,icon:"medication",onClick:()=>g(""),isActive:p===""}),e.jsx(ve,{title:"Active",value:q.active,icon:"check_circle",trend:"neutral"}),e.jsx(ve,{title:"Low Stock",value:q.lowStock,icon:"warning",trend:"down",changeType:"down"}),e.jsx(ve,{title:"Categories",value:q.categories,icon:"category",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:oe,data:u,loading:x,emptyMessage:"No medicines found. Add items to your catalog.",pagination:{currentPage:w,totalPages:Math.ceil(k/b),onPageChange:A,totalItems:k,pageSize:b},headerSlot:e.jsx(me.ListControls,{title:"Medicine List",count:k,searchProps:{value:y,onChange:U=>{f(U),A(1)},placeholder:"Search medicines..."},actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Bd,{value:p,onChange:U=>{g(U),A(1)},className:"!w-48 !py-1.5 !text-sm !rounded-lg"})}),embedded:!0})}),e.jsx(Ut,{isOpen:T,onClose:()=>D(!1),onConfirm:I,title:"Delete Medicine",message:`Are you sure you want to delete "${z?.name}"? This action cannot be undone.`,confirmText:"Delete Medicine"})]})}function $j(){const{id:n}=Zn(),r=Be(),[c,i]=m.useState(!0),[u,h]=m.useState(null),[x,j]=m.useState([]);m.useEffect(()=>{n&&y()},[n]);const y=async()=>{try{i(!0);const[g,w]=await Promise.all([vt.get(n),vt.getBatches(n)]);h(g.data),j(w.data?.batches||[])}catch(g){console.error("Failed to fetch medicine:",g)}finally{i(!1)}};if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})});if(!u)return e.jsx(Xt,{title:"Medicine Not Found",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-300",children:"medication_off"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"The requested medicine could not be found."}),e.jsx(le,{variant:"primary",className:"mt-4",onClick:()=>r("/medicines"),children:"Back to Medicines"})]})});const f=Math.round((1-u.purchase_price/u.mrp)*100),p=x.reduce((g,w)=>g+w.quantity,0);return e.jsx(Xt,{title:u.name,description:`${u.generic_name}  ${u.manufacturer}`,actions:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(le,{variant:"secondary",onClick:()=>r(`/medicines/${u.id}/edit`),children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"edit"}),"Edit"]}),e.jsxs(le,{variant:"primary",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"add"}),"Add Stock"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(Xe,{title:"Basic Information",icon:"medication",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsx(Ll,{label:"Brand",value:u.brand||"-"}),e.jsx(Ll,{label:"Category",value:u.category}),e.jsx(Ll,{label:"Type",value:u.medicine_type}),e.jsx(Ll,{label:"Strength",value:u.strength||"-"}),e.jsx(Ll,{label:"Pack Size",value:`${u.pack_size} ${u.unit}`}),e.jsx(Ll,{label:"HSN Code",value:u.hsn_code||"-"})]}),u.composition&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Composition"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.composition})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[u.is_prescription_required&&e.jsxs($e,{variant:"error",className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"prescription"}),"Rx Required"]}),u.is_controlled&&e.jsxs($e,{variant:"warning",className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),"Controlled"]})]})]}),e.jsxs(Xe,{title:"Batch Information",icon:"inventory_2",padding:"0",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:["Total Batches: ",x.length]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-xs uppercase text-slate-500 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Batch No."}),e.jsx("th",{className:"px-6 py-3",children:"Mfg Date"}),e.jsx("th",{className:"px-6 py-3",children:"Exp Date"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Qty"}),e.jsx("th",{className:"px-6 py-3 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-500",children:"No batch information available"})}):x.map(g=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-xs font-medium text-primary",children:g.batch_number}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:g.manufacturing_date}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:g.expiry_date}),e.jsx("td",{className:"px-6 py-4 text-right font-medium text-slate-900 dark:text-white",children:g.quantity}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx($e,{variant:g.is_expired?"error":g.days_to_expiry<60?"warning":"success",children:g.is_expired?"Expired":g.days_to_expiry<60?"Expiring Soon":"Active"})})]},g.id))})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Xe,{title:"Pricing",icon:"payments",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"MRP"}),e.jsxs("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["",u.mrp.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Purchase Price"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["",u.purchase_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Profit Margin"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:[f,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"GST Rate"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:[u.gst_rate,"%"]})]})]})}),e.jsxs(Xe,{title:"Stock Summary",icon:"inventory",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:p}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Units in Stock"})]}),u.storage_conditions&&e.jsx("div",{className:"mt-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-600 dark:text-amber-400 text-[20px]",children:"thermostat"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-amber-800 dark:text-amber-300 mb-0.5",children:"Storage Conditions"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:u.storage_conditions})]})]})})]}),e.jsx(Xe,{title:"Location",icon:"location_on",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Rack Name"}),e.jsx("p",{className:"font-medium",children:u.rack_name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Rack Number"}),e.jsx("p",{className:"font-medium",children:u.rack_number||"-"})]})]})})]})]})})}function Ll({label:n,value:r}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:n}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",title:r,children:r||"-"})]})}function Yj(){const n=Be(),{isLoading:r,refresh:c}=ct();m.useEffect(()=>{c()},[c]);const[i,u]=m.useState({name:"",generic_name:"",brand:"",manufacturer:"",medicine_type:"tablet",category:"",composition:"",strength:"",unit:"Strip",pack_size:10,hsn_code:"",gst_rate:12,mrp:0,purchase_price:0,selling_price:0,is_prescription_required:!1,is_controlled:!1,storage_conditions:""}),[h,x]=m.useState(!1),[j,y]=m.useState(""),f=async p=>{if(p.preventDefault(),y(""),!i.name||!i.category||i.mrp<=0){y("Please fill in all required fields (Name, Category, MRP)");return}x(!0);try{await vt.create(i),n("/medicines")}catch(g){console.error("Failed to create medicine:",g);const w=g.response?.data?.detail;if(Array.isArray(w)){const A=w.map(k=>`${k.loc?.slice(1).join(".")||"Unknown field"}: ${k.msg}`);y(A.join(", "))}else typeof w=="string"?y(w):typeof w=="object"&&w?.msg?y(w.msg):y("Failed to create medicine")}finally{x(!1)}};return e.jsx(Xt,{title:"Add New Medicine",description:"Create a new medicine in your catalog",loading:r,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:f,children:e.jsxs(Xe,{className:"space-y-6",children:[j&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:j}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Medicine Name *",value:i.name,onChange:p=>u({...i,name:p.target.value}),placeholder:"Paracetamol 500mg",required:!0}),e.jsx(ue,{label:"Generic Name",value:i.generic_name,onChange:p=>u({...i,generic_name:p.target.value}),placeholder:"Paracetamol"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Brand"}),e.jsx(Cp,{value:i.brand,onChange:p=>u({...i,brand:p}),disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Manufacturer"}),e.jsx(Ep,{value:i.manufacturer,onChange:p=>u({...i,manufacturer:p}),disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx(Bd,{value:i.category,onChange:p=>u({...i,category:p}),required:!0,disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Medicine Type"}),e.jsx(wp,{value:i.medicine_type,onChange:p=>u({...i,medicine_type:p}),disabled:r})]}),e.jsx(ue,{label:"Strength",value:i.strength,onChange:p=>u({...i,strength:p.target.value}),placeholder:"500mg"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Packaging"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit"}),e.jsx(kp,{value:i.unit,onChange:p=>u({...i,unit:p}),disabled:r})]}),e.jsx(ue,{label:"Pack Size",type:"number",value:i.pack_size,onChange:p=>u({...i,pack_size:parseInt(p.target.value)||1}),min:"1"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"HSN Code"}),e.jsx(Lj,{value:i.hsn_code,onChange:(p,g)=>{u(w=>({...w,hsn_code:p,...g!==void 0?{gst_rate:g}:{}}))},disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ue,{label:"MRP () *",type:"number",step:"0.01",value:i.mrp,onChange:p=>u({...i,mrp:parseFloat(p.target.value)||0}),min:"0",required:!0}),e.jsx(ue,{label:"Purchase Price ()",type:"number",step:"0.01",value:i.purchase_price,onChange:p=>u({...i,purchase_price:parseFloat(p.target.value)||0}),min:"0"}),e.jsx(ue,{label:"Sale Value ()",type:"number",step:"0.01",value:i.selling_price,onChange:p=>u({...i,selling_price:parseFloat(p.target.value)||0}),min:"0"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Rate (%)"}),e.jsx(Sp,{value:i.gst_rate,onChange:p=>u({...i,gst_rate:p}),disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Composition"}),e.jsx("textarea",{value:i.composition,onChange:p=>u({...i,composition:p.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2,placeholder:"Active ingredients..."})]}),e.jsx(ue,{label:"Storage Conditions",value:i.storage_conditions,onChange:p=>u({...i,storage_conditions:p.target.value}),placeholder:"Store below 25C"}),e.jsxs("div",{className:"flex gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_prescription_required,onChange:p=>u({...i,is_prescription_required:p.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Prescription Required"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_controlled,onChange:p=>u({...i,is_controlled:p.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Controlled Substance"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",onClick:()=>n("/medicines"),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:h,children:h?"Creating...":"Create Medicine"})]})]})})})})}function Qj(){const n=Be(),{id:r}=Zn(),{isLoading:c}=ct(),[i,u]=m.useState({name:"",generic_name:"",brand:"",manufacturer:"",medicine_type:"tablet",category:"",composition:"",strength:"",unit:"Strip",pack_size:10,hsn_code:"",gst_rate:12,mrp:0,purchase_price:0,selling_price:0,is_prescription_required:!1,is_controlled:!1,storage_conditions:"",rack_number:"",rack_name:""}),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState("");m.useEffect(()=>{r&&g(r)},[r]);const g=async A=>{try{x(!0);const S=(await vt.get(A)).data;u({name:S.name||"",generic_name:S.generic_name||"",brand:S.brand||"",manufacturer:S.manufacturer||"",medicine_type:S.medicine_type||"tablet",category:S.category||"",composition:S.composition||"",strength:S.strength||"",unit:S.unit||"Strip",pack_size:S.pack_size||10,hsn_code:S.hsn_code||"",gst_rate:S.gst_rate||12,mrp:S.mrp||0,purchase_price:S.purchase_price||0,selling_price:S.selling_price||0,is_prescription_required:S.is_prescription_required||!1,is_controlled:S.is_controlled||!1,storage_conditions:S.storage_conditions||"",rack_number:S.rack_number||"",rack_name:S.rack_name||""})}catch(k){console.error("Failed to fetch medicine:",k),p("Failed to load medicine details")}finally{x(!1)}},w=async A=>{if(A.preventDefault(),p(""),!i.name||!i.category||i.mrp<=0){p("Please fill in all required fields (Name, Category, MRP)");return}y(!0);try{r&&(await vt.update(r,i),n("/medicines"))}catch(k){console.error("Failed to update medicine:",k),p(k.response?.data?.detail||"Failed to update medicine")}finally{y(!1)}};return e.jsx(Xt,{title:"Edit Medicine",description:`Update information for ${i.name}`,loading:h||c,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:w,children:e.jsxs(Xe,{className:"space-y-6",children:[f&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:f}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Medicine Name *",value:i.name,onChange:A=>u({...i,name:A.target.value}),required:!0}),e.jsx(ue,{label:"Generic Name",value:i.generic_name,onChange:A=>u({...i,generic_name:A.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Brand"}),e.jsx(Cp,{value:i.brand,onChange:A=>u({...i,brand:A}),disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Manufacturer"}),e.jsx(Ep,{value:i.manufacturer,onChange:A=>u({...i,manufacturer:A}),disabled:c})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx(Bd,{value:i.category,onChange:A=>u({...i,category:A}),required:!0,disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Medicine Type"}),e.jsx(wp,{value:i.medicine_type,onChange:A=>u({...i,medicine_type:A}),disabled:c})]}),e.jsx(ue,{label:"Strength",value:i.strength,onChange:A=>u({...i,strength:A.target.value})})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Packaging"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit"}),e.jsx(kp,{value:i.unit,onChange:A=>u({...i,unit:A}),disabled:c})]}),e.jsx(ue,{label:"Pack Size",type:"number",value:i.pack_size,onChange:A=>u({...i,pack_size:parseInt(A.target.value)||1}),min:"1"}),e.jsx(ue,{label:"HSN Code",value:i.hsn_code,onChange:A=>u({...i,hsn_code:A.target.value}),className:"font-mono"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ue,{label:"MRP () *",type:"number",step:"0.01",value:i.mrp,onChange:A=>u({...i,mrp:parseFloat(A.target.value)||0}),min:"0",required:!0}),e.jsx(ue,{label:"Purchase Price ()",type:"number",step:"0.01",value:i.purchase_price,onChange:A=>u({...i,purchase_price:parseFloat(A.target.value)||0}),min:"0"}),e.jsx(ue,{label:"Sale Value ()",type:"number",step:"0.01",value:i.selling_price,onChange:A=>u({...i,selling_price:parseFloat(A.target.value)||0}),min:"0"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Rate (%)"}),e.jsx(Sp,{value:i.gst_rate,onChange:A=>u({...i,gst_rate:A}),disabled:c})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Storage Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Rack Name",value:i.rack_name,onChange:A=>u({...i,rack_name:A.target.value})}),e.jsx(ue,{label:"Rack Number",value:i.rack_number,onChange:A=>u({...i,rack_number:A.target.value}),placeholder:"12"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Composition"}),e.jsx("textarea",{value:i.composition,onChange:A=>u({...i,composition:A.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2})]}),e.jsx(ue,{label:"Storage Conditions",value:i.storage_conditions,onChange:A=>u({...i,storage_conditions:A.target.value})}),e.jsxs("div",{className:"flex gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_prescription_required,onChange:A=>u({...i,is_prescription_required:A.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Prescription Required"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_controlled,onChange:A=>u({...i,is_controlled:A.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Controlled Substance"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",onClick:()=>n("/medicines"),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:j,children:j?"Updating...":"Update Medicine"})]})]})})})})}function Vj(){const{id:n}=Zn(),r=Be(),[c,i]=m.useState(!0),[u,h]=m.useState(!1),[x,j]=m.useState(""),[y,f]=m.useState([]),[p,g]=m.useState({name:"",code:"",shop_type:"retail",license_number:"",gst_number:"",phone:"",email:"",address:"",city:"",state:"",pincode:"",warehouse_id:"",status:"active"});m.useEffect(()=>{w(),n&&A()},[n]);const w=async()=>{try{const b=await _t.list({status:"active",size:100});f(b.data.items||[])}catch(b){console.error("Failed to fetch warehouses:",b)}},A=async()=>{try{i(!0);const b=await Ct.get(n);g(b.data)}catch(b){console.error("Failed to fetch shop:",b),j("Failed to load shop details")}finally{i(!1)}},k=async b=>{if(b.preventDefault(),j(""),!p.name||!p.city||!p.state||!p.license_number){j("Please fill in all required fields");return}try{h(!0),await Ct.update(n,p),r("/shops")}catch(E){console.error("Failed to update shop:",E),j(E.response?.data?.detail||"Failed to update shop")}finally{h(!1)}},S=(b,E)=>{g(T=>({...T,[b]:E}))};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):e.jsx(Xt,{title:"Edit Medical Shop",description:`Update information for ${p.name}`,children:e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[x&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:x}),e.jsx(Xe,{title:"Basic Information",icon:"storefront",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Shop Name *",value:p.name||"",onChange:b=>S("name",b.target.value),required:!0}),e.jsx(ue,{label:"Shop Code",value:p.code||"",onChange:b=>S("code",b.target.value),className:"font-mono",disabled:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Shop Type"}),e.jsxs("select",{value:p.shop_type||"retail",onChange:b=>S("shop_type",b.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"hospital",children:"Hospital"}),e.jsx("option",{value:"clinic",children:"Clinic"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Linked Warehouse"}),e.jsxs("select",{value:p.warehouse_id||"",onChange:b=>S("warehouse_id",b.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),y.map(b=>e.jsxs("option",{value:b.id,children:[b.name," (",b.code,")"]},b.id))]})]})]})}),e.jsx(Xe,{title:"License & Tax Information",icon:"verified",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Pharmacy License Number *",value:p.license_number||"",onChange:b=>S("license_number",b.target.value),required:!0}),e.jsx(ue,{label:"GST Number",value:p.gst_number||"",onChange:b=>S("gst_number",b.target.value.toUpperCase()),className:"font-mono"})]})}),e.jsx(Xe,{title:"Contact Information",icon:"contact_phone",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Phone Number",type:"tel",value:p.phone||"",onChange:b=>S("phone",b.target.value)}),e.jsx(ue,{label:"Email Address",type:"email",value:p.email||"",onChange:b=>S("email",b.target.value)}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{rows:2,value:p.address||"",onChange:b=>S("address",b.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"})]}),e.jsx(ue,{label:"City *",value:p.city||"",onChange:b=>S("city",b.target.value),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"State *",value:p.state||"",onChange:b=>S("state",b.target.value),required:!0}),e.jsx(ue,{label:"Pincode",value:p.pincode||"",onChange:b=>S("pincode",b.target.value)})]})]})}),e.jsxs("div",{className:"lg:hidden flex justify-end gap-3 pt-4",children:[e.jsx(le,{variant:"secondary",onClick:()=>r("/shops"),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:u,children:u?"Saving...":"Save Changes"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Xe,{title:"Shop Status",icon:"toggle_on",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Status"}),e.jsxs("select",{value:p.status||"active",onChange:b=>S("status",b.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Current operational status of this shop"})]})})}),e.jsx(Xe,{title:"Quick Stats",icon:"analytics",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Medicines"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:p.total_medicines||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Stock Value"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:["",(p.total_stock_value||0).toLocaleString()]})]})]})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Xe,{children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(le,{variant:"primary",type:"submit",loading:u,className:"w-full justify-center",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"save"}),u?"Saving...":"Save Changes"]}),e.jsx(le,{variant:"secondary",onClick:()=>r("/shops"),type:"button",className:"w-full justify-center",children:"Cancel"})]})})})]})]})})})}function Pj(){const n=Be(),{isLoading:r,refresh:c}=ct();m.useEffect(()=>{c()},[c]);const[i,u]=m.useState({name:"",code:"",shop_type:"retail",license_number:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",gst_number:"",warehouse_id:""}),[h,x]=m.useState(!1),[j,y]=m.useState(""),f=async p=>{if(p.preventDefault(),y(""),!i.name||!i.code||!i.city||!i.state||!i.license_number||!i.warehouse_id){y("Please fill in all required fields (Name, Code, License Number, Warehouse, City, State)");return}x(!0);try{const g={...i,email:i.email||void 0,gst_number:i.gst_number||void 0,warehouse_id:i.warehouse_id};await Ct.create(g),n("/shops")}catch(g){console.error("Failed to create shop:",g),y(g.response?.data?.detail||"Failed to create medical shop")}finally{x(!1)}};return e.jsx(Xt,{title:"Add New Medical Shop",description:"Create a new retail pharmacy location",loading:r,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:f,children:e.jsxs(Xe,{className:"space-y-6",children:[j&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:j}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Shop Name *",value:i.name,onChange:p=>u({...i,name:p.target.value}),placeholder:"GreenCross Pharmacy",required:!0}),e.jsx(ue,{label:"Code *",value:i.code,onChange:p=>u({...i,code:p.target.value.toUpperCase()}),placeholder:"GCP001",className:"font-mono",required:!0})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"License & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Shop Type"}),e.jsxs("select",{value:i.shop_type,onChange:p=>u({...i,shop_type:p.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"retail",children:"Retail Pharmacy"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"hospital",children:"Hospital Pharmacy"}),e.jsx("option",{value:"clinic",children:"Clinic Pharmacy"})]})]}),e.jsx(ue,{label:"License Number *",value:i.license_number,onChange:p=>u({...i,license_number:p.target.value}),placeholder:"PH-2024-001234",required:!0})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-5 border border-amber-200 dark:border-amber-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"warehouse"}),"Warehouse Mapping *"]}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400 mb-4",children:"Every medical shop must be linked to a warehouse. This determines the stock source for this shop."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Warehouse *"}),e.jsx(Hd,{value:i.warehouse_id,onChange:p=>u({...i,warehouse_id:p}),required:!0,className:`w-full ${i.warehouse_id?"":"border-amber-300 dark:border-amber-600"}`}),!i.warehouse_id&&e.jsxs("p",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),"Warehouse selection is mandatory for supply chain integrity"]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:i.address,onChange:p=>u({...i,address:p.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2,placeholder:"45 Main Street, Medical Complex"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ue,{label:"City *",value:i.city,onChange:p=>u({...i,city:p.target.value}),placeholder:"Chennai",required:!0}),e.jsx(ue,{label:"State *",value:i.state,onChange:p=>u({...i,state:p.target.value}),placeholder:"Tamil Nadu",required:!0}),e.jsx(ue,{label:"Pincode",value:i.pincode,onChange:p=>u({...i,pincode:p.target.value}),placeholder:"600001"})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact & Tax Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Phone",type:"tel",value:i.phone,onChange:p=>u({...i,phone:p.target.value}),placeholder:"+91 9876543210"}),e.jsx(ue,{label:"Email",type:"email",value:i.email,onChange:p=>u({...i,email:p.target.value}),placeholder:"shop@example.com"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(ue,{label:"GST Number",value:i.gst_number,onChange:p=>u({...i,gst_number:p.target.value.toUpperCase()}),className:"font-mono",placeholder:"22AAAAA0000A1Z5"})})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",onClick:()=>n("/shops"),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:h,children:h?"Creating...":"Create Shop"})]})]})})})})}function w0(){const[n,r]=m.useState(!0),[c,i]=m.useState(!1),[u,h]=m.useState("en-US"),[x,j]=m.useState("UTC-05:00"),[y,f]=m.useState("MM/DD/YYYY"),[p,g]=m.useState(30),[w,A]=m.useState(7.25),[k,S]=m.useState(!1),[b,E]=m.useState(!0),[T,D]=m.useState(!1),[z,R]=m.useState("helpdesk@pharmacore.io"),[W,I]=m.useState("https://wiki.internal.pharma/support");m.useEffect(()=>{q()},[]);const q=async()=>{try{r(!0);const M=(await Ri.get()).data?.settings;M&&(g(M.session_timeout_minutes||30),A(M.default_tax_rate||7.25),S(M.maintenance_mode||!1),E(M.global_inventory_search??!0),D(M.auto_approve_low_risk||!1),R(M.support_email||"helpdesk@pharmacore.io"),I(M.support_url||""))}catch(U){console.error("Failed to fetch settings:",U)}finally{r(!1)}},oe=async()=>{try{i(!0),await Ri.update({session_timeout_minutes:p,default_tax_rate:w,maintenance_mode:k,global_inventory_search:b,auto_approve_low_risk:T,support_email:z,support_url:W}),alert("Settings saved successfully!")}catch(U){console.error("Failed to save settings:",U),alert("Failed to save settings")}finally{i(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"max-w-5xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight mb-2",children:"Application Settings"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-2xl",children:"Configure global parameters, localization preferences, and system-wide defaults for your pharmacy network."})]}),e.jsxs("button",{onClick:oe,disabled:c,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white px-5 py-2.5 rounded-lg font-semibold shadow-lg shadow-primary/20 transition-all active:scale-95 shrink-0 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:c?"sync":"save"}),c?"Saving...":"Save Changes"]})]}),e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-800 mb-8 overflow-x-auto",children:e.jsxs("nav",{className:"flex gap-8 min-w-max",children:[e.jsx("button",{className:"pb-3 border-b-2 border-primary text-primary font-semibold text-sm px-1 transition-colors",children:"General"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Localization"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Security"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Notifications"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"language"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Regional Settings"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Default System Language"}),e.jsxs("select",{value:u,onChange:U=>h(U.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"en-US",children:"English (United States)"}),e.jsx("option",{value:"es",children:"Spanish (Espaol)"}),e.jsx("option",{value:"fr",children:"French (Franais)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Timezone"}),e.jsxs("select",{value:x,onChange:U=>j(U.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"UTC-05:00",children:"UTC-05:00 (EST)"}),e.jsx("option",{value:"UTC-08:00",children:"UTC-08:00 (PST)"}),e.jsx("option",{value:"UTC+00:00",children:"UTC+00:00 (GMT)"}),e.jsx("option",{value:"UTC+05:30",children:"UTC+05:30 (IST)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Date Format"}),e.jsxs("select",{value:y,onChange:U=>f(U.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Currency Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 font-semibold",children:""}),e.jsx("input",{type:"text",value:"INR",readOnly:!0,className:"w-full pl-8 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded",children:"Locked"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Currency is locked to the organization's primary billing region."})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-purple-50 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"tune"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Operational Defaults"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",value:p,onChange:U=>g(parseInt(U.target.value)),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Auto-logout inactive users for security compliance."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Default Tax Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",value:w,onChange:U=>A(parseFloat(U.target.value)),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Pharmacy ID Prefix"}),e.jsx("input",{type:"text",defaultValue:"PHARM-",className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white uppercase"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Fiscal Year Start"}),e.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{children:"January 1st"}),e.jsx("option",{selected:!0,children:"April 1st"}),e.jsx("option",{children:"October 1st"})]})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-amber-50 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"flag"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Feature Flags"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(hd,{id:"maintenance_mode",title:"Maintenance Mode",description:"Disables access for all non-admin users immediately.",checked:k,onChange:S}),e.jsx(hd,{id:"global_search",title:"Global Inventory Search",description:"Allow pharmacists to search stock across all connected locations.",checked:b,onChange:E}),e.jsx(hd,{id:"auto_approve",title:"Auto-Approve Low Risk Orders",description:"System automatically approves refills for Class C drugs.",checked:T,onChange:D})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-green-50 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"support_agent"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Support Configuration"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Support Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"mail"}),e.jsx("input",{type:"email",value:z,onChange:U=>R(U.target.value),className:"w-full pl-10 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Internal Help Desk URL"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"link"}),e.jsx("input",{type:"url",value:W,onChange:U=>I(U.target.value),className:"w-full pl-10 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800/50 rounded-lg p-4 flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400 shrink-0",children:"info"}),e.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"These contact details will be displayed in the footer of all employee dashboards and on the login screen."})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-slate-200 dark:border-slate-800 text-center",children:e.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500",children:"System Version v2.4.0  Connected to Neon PostgreSQL"})})]})}function hd({title:n,description:r,checked:c,onChange:i}){return e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 dark:border-slate-800 pt-4 first:border-t-0 first:pt-0",children:[e.jsxs("div",{className:"pr-4",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900 dark:text-white",children:n}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:r})]}),e.jsx("button",{type:"button",role:"switch","aria-checked":c,onClick:()=>i(!c),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${c?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c?"translate-x-6":"translate-x-1"}`})})]})}function pd(){const[n,r]=m.useState(!0),[c,i]=m.useState(!1),[u,h]=m.useState("PharmaAdmin Central"),[x,j]=m.useState(!1),[y,f]=m.useState(!0),[p,g]=m.useState("high"),[w,A]=m.useState(30),[k,S]=m.useState(15),[b,E]=m.useState(60);m.useEffect(()=>{T()},[]);const T=async()=>{try{r(!0);const R=(await Ri.get()).data?.settings;R&&(h(R.app_name||"PharmaAdmin Central"),j(R.maintenance_mode||!1),A(R.session_timeout_minutes||30),S(R.low_stock_threshold||15),E(R.expiry_warning_days||60))}catch(z){console.error("Failed to fetch settings:",z)}finally{r(!1)}},D=async()=>{try{i(!0),await Ri.update({app_name:u,maintenance_mode:x,session_timeout_minutes:w,low_stock_threshold:k,expiry_warning_days:b}),alert("Settings saved successfully!")}catch(z){console.error("Failed to save settings:",z),alert("Failed to save settings")}finally{i(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-1 overflow-y-auto bg-background-light dark:bg-background-dark scroll-smooth",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6 md:p-10 pb-24",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 dark:text-white tracking-tight mb-2",children:"System Settings"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base max-w-2xl",children:"Configure global parameters, security protocols, and integration rules for the entire Pharmacy Management Platform."})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg text-sm font-bold text-slate-900 dark:text-white transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"history"}),"View Change Logs"]})]}),e.jsx("div",{className:"sticky top-0 z-10 bg-background-light dark:bg-background-dark pt-2 pb-4 mb-6",children:e.jsxs("div",{className:"flex overflow-x-auto border-b border-slate-300 dark:border-slate-700 gap-8",children:[e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-primary text-primary font-bold text-sm",children:"General Preferences"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Security Policies"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Inventory Rules"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Integrations & API"})]})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"tune"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"General Preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Platform Name"}),e.jsx("input",{type:"text",value:u,onChange:z=>h(z.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-500",children:"This name will appear in emails and dashboard headers."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Default Timezone"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{children:"(GMT+05:30) India Standard Time"}),e.jsx("option",{children:"(GMT-05:00) Eastern Time (US & Canada)"}),e.jsx("option",{children:"(GMT+00:00) London"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Date Format"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{children:"DD/MM/YYYY (e.g. 31/12/2024)"}),e.jsx("option",{children:"MM/DD/YYYY (e.g. 12/31/2024)"}),e.jsx("option",{children:"YYYY-MM-DD (e.g. 2024-12-31)"})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 pt-2 border-t border-slate-200 dark:border-slate-800 mt-2",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Maintenance Mode"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Prevent non-admin users from accessing the system during updates."})]}),e.jsx("button",{onClick:()=>j(!x),className:`relative w-11 h-6 rounded-full transition-colors ${x?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white transition-transform ${x?"translate-x-5":""}`})})]})})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"shield"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Security Policies"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex flex-col max-w-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Two-Factor Authentication (2FA)"}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"RECOMMENDED"})]}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:"Enforce 2FA for all administrator and manager level accounts across the network."})]}),e.jsx("button",{onClick:()=>f(!y),className:`relative w-11 h-6 rounded-full transition-colors ${y?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white transition-transform ${y?"translate-x-5":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Password Complexity"}),e.jsxs("select",{value:p,onChange:z=>g(z.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"high",children:"High (Min 12 chars, symbol, number, upper/lowercase)"}),e.jsx("option",{value:"medium",children:"Medium (Min 8 chars, number, upper/lowercase)"}),e.jsx("option",{value:"low",children:"Low (Min 6 chars)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",value:w,onChange:z=>A(parseInt(z.target.value)),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary"})]})]})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"inventory_2"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Inventory Rules"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("label",{className:"flex items-center justify-between text-sm font-bold text-slate-900 dark:text-white mb-4",children:["Low Stock Threshold Alert",e.jsx("span",{className:"material-symbols-outlined text-slate-500 text-[18px] cursor-help",title:"Triggers an alert when stock falls below this percentage of max capacity",children:"info"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"50",value:k,onChange:z=>S(parseInt(z.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-primary"}),e.jsxs("span",{className:"min-w-[3rem] text-center font-mono font-bold text-primary bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded",children:[k,"%"]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:["Trigger automated re-order suggestions when stock reaches ",k,"% of maximum capacity."]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("label",{className:"flex items-center justify-between text-sm font-bold text-slate-900 dark:text-white mb-4",children:"Drug Expiry Warning Window"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",value:b,onChange:z=>E(parseInt(z.target.value)),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2 text-sm focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Days before expiry"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:['Items will be flagged as "Near Expiry" on dashboards ',b," days before their expiration date."]})]})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 w-full bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 p-4 md:px-10 flex items-center justify-between z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"text-sm text-slate-500 hidden md:block",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"Database:"})," Connected to Neon PostgreSQL"]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-end",children:[e.jsx("button",{className:"px-6 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-200 font-bold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Discard"}),e.jsxs("button",{onClick:D,disabled:c,className:"px-6 py-2.5 rounded-lg bg-primary hover:bg-blue-700 text-white font-bold text-sm shadow-md transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:c?"sync":"save"}),c?"Saving...":"Save Changes"]})]})]})]})}function Xj(){const[n,r]=m.useState("current-month"),[c,i]=m.useState("all"),[u,h]=m.useState(!0),[x,j]=m.useState([]),[y,f]=m.useState({totalExpiring:0,totalExpired:0,totalLoss:0});m.useEffect(()=>{p()},[n,c]);const p=async()=>{try{h(!0);const A=(await Vn.getExpiry({days_ahead:60})).data;j(A.items||[]),f({totalExpiring:A.total_expiring_items||0,totalExpired:A.total_expired_items||0,totalLoss:A.total_loss_value||0})}catch(w){console.error("Failed to fetch expiry data:",w),j([]),f({totalExpiring:0,totalExpired:0,totalLoss:0})}finally{h(!1)}},g=[{label:"Total Expired Items",value:y.totalExpired.toString(),icon:"inventory_2",color:"red"},{label:"Total Expiring Soon",value:y.totalExpiring.toString(),icon:"schedule",color:"amber"},{label:"Estimated Loss",value:`${y.totalLoss.toLocaleString()}`,icon:"trending_down",color:"red"}];return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Expiry & Loss Report"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Real-time expiry data from database"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-semibold text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"refresh"}),"Refresh"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-primary text-white text-sm font-semibold hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"download"}),"Export Report"]})]})]}),e.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 p-4 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Period"}),e.jsxs("select",{value:n,onChange:w=>r(w.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm px-3 py-2 focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"current-month",children:"Current Month"}),e.jsx("option",{value:"last-month",children:"Last Month"}),e.jsx("option",{value:"current-quarter",children:"Current Quarter"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Location"}),e.jsx("select",{value:c,onChange:w=>i(w.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm px-3 py-2 focus:ring-1 focus:ring-primary",children:e.jsx("option",{value:"all",children:"All Locations"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:g.map((w,A)=>e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:w.label}),e.jsx("span",{className:`material-symbols-outlined text-${w.color}-500`,children:w.icon})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-2",children:w.value})]},A))}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Expiry Details"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:["Expired: ",x.filter(w=>w.status==="expired").length]}),e.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:["Expiring Soon: ",x.filter(w=>w.status==="expiring").length]})]})]}),u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):x.length===0?e.jsxs("div",{className:"py-16 text-center text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl mb-3 text-green-500",children:"check_circle"}),e.jsx("p",{className:"text-lg font-medium",children:"No expiring items"}),e.jsx("p",{className:"text-sm",children:"All medicines are within safe expiry dates"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-xs uppercase text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Medicine"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Batch No."}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Unit Cost"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Total Loss"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:x.map((w,A)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:w.name}),w.brand&&e.jsx("div",{className:"text-xs text-slate-500",children:w.brand})]}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400 font-mono text-xs",children:w.batch_number}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:w.expiry_date}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-900 dark:text-white font-medium",children:w.quantity}),e.jsxs("td",{className:"px-6 py-4 text-right text-slate-600 dark:text-slate-400",children:["",w.unit_cost?.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-red-600 dark:text-red-400",children:["",w.total_loss?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-center",children:w.status==="expired"?e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Expired"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:"Expiring"})})]},A))})]})}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-slate-500",children:["Showing ",x.length," items from database"]})})]})]})}function wi(){const[n,r]=m.useState("daily"),[c,i]=m.useState([]),[u,h]=m.useState(""),[x,j]=m.useState(new Date().toISOString().split("T")[0]),[y,f]=m.useState(new Date().getMonth()+1),[p,g]=m.useState(new Date().getFullYear()),[w,A]=m.useState(""),[k,S]=m.useState(""),[b,E]=m.useState(null),[T,D]=m.useState([]),[z,R]=m.useState(!1);m.useEffect(()=>{W()},[]),m.useEffect(()=>{I()},[n,u,x,y,p]);const W=async()=>{try{const U=await Ct.list();i(U.data.items||U.data)}catch(U){console.error("Error loading shops:",U)}},I=async()=>{R(!0);try{let U;n==="daily"?U=await Vn.getDailySales({shop_id:u||void 0,date:x}):n==="monthly"?U=await Vn.getMonthlySales({shop_id:u||void 0,month:y,year:p}):U=await Vn.getSales({shop_id:u||void 0,date_from:w,date_to:k}),E(U.data),U.data.daily_breakdown&&D(U.data.daily_breakdown)}catch(U){console.error("Error loading report:",U)}finally{R(!1)}},q=U=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(U),oe=()=>{const U=["Metric","Value"],M=[["Total Sales",q(b?.total_sales||0)],["Total Invoices",b?.total_invoices||0],["Items Sold",b?.total_items_sold||0],["Average Order Value",q(b?.average_order_value||0)]],Q=[U,...M].map(O=>O.join(",")).join(`
`),he=new Blob([Q],{type:"text/csv"}),xe=URL.createObjectURL(he),be=document.createElement("a");be.href=xe,be.download=`sales-report-${new Date().toISOString().split("T")[0]}.csv`,be.click()};return e.jsxs("div",{className:"sales-reports",children:[e.jsx("style",{children:`
                .sales-reports {
                    padding: 24px;
                    max-width: 1400px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .btn-export {
                    padding: 10px 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .btn-export:hover {
                    background: #059669;
                }
                .filters-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 20px;
                    margin-bottom: 24px;
                }
                .filters-row {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    align-items: flex-end;
                }
                .filter-group {
                    display: flex;
                    flex-direction: column;
                    gap: 6px;
                }
                .filter-group label {
                    font-size: 13px;
                    font-weight: 500;
                    color: #666;
                }
                .filter-group select,
                .filter-group input {
                    padding: 10px 12px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                    min-width: 160px;
                }
                .report-tabs {
                    display: flex;
                    gap: 8px;
                }
                .tab-btn {
                    padding: 10px 20px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.2s;
                }
                .tab-btn.active {
                    background: #4a6cf7;
                    color: white;
                    border-color: #4a6cf7;
                }
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 20px;
                    margin-bottom: 24px;
                }
                @media (max-width: 1024px) {
                    .stats-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }
                @media (max-width: 640px) {
                    .stats-grid {
                        grid-template-columns: 1fr;
                    }
                }
                .stat-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .stat-card.primary {
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    color: white;
                }
                .stat-icon {
                    width: 48px;
                    height: 48px;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    margin-bottom: 16px;
                }
                .stat-card:not(.primary) .stat-icon {
                    background: #f0f4ff;
                }
                .stat-card.primary .stat-icon {
                    background: rgba(255,255,255,0.2);
                }
                .stat-value {
                    font-size: 28px;
                    font-weight: 700;
                    margin-bottom: 4px;
                }
                .stat-label {
                    font-size: 14px;
                    opacity: 0.8;
                }
                .chart-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .chart-title {
                    font-size: 18px;
                    font-weight: 600;
                    margin: 0 0 20px 0;
                    color: #1a1a2e;
                }
                .chart-bars {
                    display: flex;
                    gap: 8px;
                    align-items: flex-end;
                    height: 200px;
                    padding-top: 20px;
                }
                .chart-bar-wrapper {
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 8px;
                }
                .chart-bar {
                    width: 100%;
                    max-width: 40px;
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    border-radius: 4px 4px 0 0;
                    min-height: 4px;
                    transition: height 0.3s ease;
                }
                .chart-label {
                    font-size: 11px;
                    color: #666;
                    text-align: center;
                }
                .loading-overlay {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Sales Reports"}),e.jsx("button",{className:"btn-export",onClick:oe,children:"Export CSV"})]}),e.jsx("div",{className:"filters-card",children:e.jsxs("div",{className:"filters-row",children:[e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-btn ${n==="daily"?"active":""}`,onClick:()=>r("daily"),children:"Daily"}),e.jsx("button",{className:`tab-btn ${n==="monthly"?"active":""}`,onClick:()=>r("monthly"),children:"Monthly"}),e.jsx("button",{className:`tab-btn ${n==="custom"?"active":""}`,onClick:()=>r("custom"),children:"Custom Range"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Shop"}),e.jsxs("select",{value:u,onChange:U=>h(U.target.value),children:[e.jsx("option",{value:"",children:"All Shops"}),c.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]}),n==="daily"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:x,onChange:U=>j(U.target.value)})]}),n==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Month"}),e.jsx("select",{value:y,onChange:U=>f(Number(U.target.value)),children:Array.from({length:12},(U,M)=>e.jsx("option",{value:M+1,children:new Date(2e3,M).toLocaleString("default",{month:"long"})},M+1))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Year"}),e.jsx("select",{value:p,onChange:U=>g(Number(U.target.value)),children:Array.from({length:5},(U,M)=>e.jsx("option",{value:new Date().getFullYear()-M,children:new Date().getFullYear()-M},M))})]})]}),n==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From"}),e.jsx("input",{type:"date",value:w,onChange:U=>A(U.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To"}),e.jsx("input",{type:"date",value:k,onChange:U=>S(U.target.value)})]})]})]})}),z?e.jsx("div",{className:"loading-overlay",children:"Loading report data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:q(b?.total_sales||0)}),e.jsx("div",{className:"stat-label",children:"Total Sales"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:b?.total_invoices||0}),e.jsx("div",{className:"stat-label",children:"Invoices"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:b?.total_items_sold||0}),e.jsx("div",{className:"stat-label",children:"Items Sold"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:q(b?.average_order_value||0)}),e.jsx("div",{className:"stat-label",children:"Avg Order Value"})]})]}),T.length>0&&e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{className:"chart-title",children:"Daily Breakdown"}),e.jsx("div",{className:"chart-bars",children:T.slice(0,14).map((U,M)=>{const Q=Math.max(...T.map(xe=>xe.sales)),he=Q>0?U.sales/Q*180:4;return e.jsxs("div",{className:"chart-bar-wrapper",children:[e.jsx("div",{className:"chart-bar",style:{height:`${he}px`},title:`${q(U.sales)}`}),e.jsx("span",{className:"chart-label",children:new Date(U.date).getDate()})]},M)})})]})]})]})}function Zj(){const[n,r]=m.useState("summary"),[c,i]=m.useState(new Date().getMonth()+1),[u,h]=m.useState(new Date().getFullYear()),[x,j]=m.useState(null),[y,f]=m.useState(null),[p,g]=m.useState(!0);m.useEffect(()=>{w()},[n,c,u]);const w=async()=>{g(!0);try{if(n==="summary"){const b=await X.get("/tax/summary",{params:{month:c,year:u}});j(b.data)}else if(n==="gst"){const b=await X.get("/tax/gst",{params:{month:c,year:u}});f(b.data)}}catch(b){console.error("Error loading tax report:",b)}finally{g(!1)}},A=b=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(b),k=b=>new Date(2e3,b-1).toLocaleString("default",{month:"long"}),S=()=>{let b=[],E="";n==="summary"&&x?(b=[["Tax Summary Report",`${k(c)} ${u}`],[""],["Metric","Amount"],["Total Sales",A(x.total_sales)],["Net Taxable Value",A(x.net_taxable_value)],["Total Tax Collected",A(x.total_tax_collected)],["GST Amount",A(x.gst_amount)],["VAT Amount",A(x.vat_amount)]],E=`tax-summary-${u}-${c}.csv`):n==="gst"&&y&&(b=[["GST Report",y.period],[""],["Component","Amount"],["Taxable Value",A(y.total_taxable_value)],["CGST",A(y.cgst_amount)],["SGST",A(y.sgst_amount)],["IGST",A(y.igst_amount)],["Total GST",A(y.total_gst)],["Invoice Count",y.invoice_count.toString()]],E=`gst-report-${u}-${c}.csv`);const T=b.map(W=>W.join(",")).join(`
`),D=new Blob([T],{type:"text/csv"}),z=URL.createObjectURL(D),R=document.createElement("a");R.href=z,R.download=E,R.click()};return e.jsxs("div",{className:"tax-reports",children:[e.jsx("style",{children:`
                .tax-reports {
                    padding: 24px;
                    max-width: 1200px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .btn-export {
                    padding: 10px 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .btn-export:hover {
                    background: #059669;
                }
                .controls-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 20px;
                    margin-bottom: 24px;
                }
                .controls-row {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    align-items: center;
                }
                .report-tabs {
                    display: flex;
                    gap: 8px;
                }
                .tab-btn {
                    padding: 10px 20px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.2s;
                }
                .tab-btn.active {
                    background: #4a6cf7;
                    color: white;
                    border-color: #4a6cf7;
                }
                .period-selector {
                    display: flex;
                    gap: 8px;
                    margin-left: auto;
                }
                .period-selector select {
                    padding: 10px 16px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                }
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin-bottom: 24px;
                }
                .stat-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .stat-card.primary {
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    color: white;
                }
                .stat-card.success {
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: white;
                }
                .stat-card.warning {
                    background: linear-gradient(135deg, #f59e0b, #d97706);
                    color: white;
                }
                .stat-icon {
                    font-size: 28px;
                    margin-bottom: 12px;
                }
                .stat-value {
                    font-size: 24px;
                    font-weight: 700;
                    margin-bottom: 4px;
                }
                .stat-label {
                    font-size: 13px;
                    opacity: 0.8;
                }
                .gst-breakdown {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .breakdown-title {
                    font-size: 18px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0 0 20px 0;
                    padding-bottom: 12px;
                    border-bottom: 1px solid #eee;
                }
                .breakdown-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 24px;
                }
                @media (max-width: 768px) {
                    .breakdown-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }
                .breakdown-item {
                    text-align: center;
                    padding: 20px;
                    background: #f8f9ff;
                    border-radius: 12px;
                }
                .breakdown-value {
                    font-size: 24px;
                    font-weight: 700;
                    color: #4a6cf7;
                    margin-bottom: 8px;
                }
                .breakdown-label {
                    font-size: 14px;
                    color: #666;
                    font-weight: 500;
                }
                .info-card {
                    background: #f0f8ff;
                    border: 1px solid #bfdbfe;
                    border-radius: 12px;
                    padding: 16px 20px;
                    margin-top: 24px;
                    display: flex;
                    gap: 12px;
                    align-items: flex-start;
                }
                .info-card-icon {
                    font-size: 20px;
                }
                .info-card-content h4 {
                    margin: 0 0 4px 0;
                    color: #1e40af;
                }
                .info-card-content p {
                    margin: 0;
                    color: #3b82f6;
                    font-size: 14px;
                }
                .loading {
                    text-align: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Tax Reports"}),e.jsx("button",{className:"btn-export",onClick:S,children:"Export for CA Filing"})]}),e.jsx("div",{className:"controls-card",children:e.jsxs("div",{className:"controls-row",children:[e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-btn ${n==="summary"?"active":""}`,onClick:()=>r("summary"),children:"Summary"}),e.jsx("button",{className:`tab-btn ${n==="gst"?"active":""}`,onClick:()=>r("gst"),children:"GST Report"}),e.jsx("button",{className:`tab-btn ${n==="vat"?"active":""}`,onClick:()=>r("vat"),children:"VAT Report"})]}),e.jsxs("div",{className:"period-selector",children:[e.jsx("select",{value:c,onChange:b=>i(Number(b.target.value)),children:Array.from({length:12},(b,E)=>e.jsx("option",{value:E+1,children:k(E+1)},E+1))}),e.jsx("select",{value:u,onChange:b=>h(Number(b.target.value)),children:Array.from({length:5},(b,E)=>e.jsx("option",{value:new Date().getFullYear()-E,children:new Date().getFullYear()-E},E))})]})]})}),p?e.jsx("div",{className:"loading",children:"Loading tax data..."}):n==="summary"&&x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:A(x.total_sales)}),e.jsx("div",{className:"stat-label",children:"Total Sales"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:A(x.net_taxable_value)}),e.jsx("div",{className:"stat-label",children:"Taxable Value"})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:A(x.total_tax_collected)}),e.jsx("div",{className:"stat-label",children:"Total Tax Collected"})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:A(x.gst_amount)}),e.jsx("div",{className:"stat-label",children:"GST Liability"})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("span",{className:"info-card-icon",children:""}),e.jsxs("div",{className:"info-card-content",children:[e.jsx("h4",{children:"Tax Filing Reminder"}),e.jsx("p",{children:"GST returns (GSTR-1, GSTR-3B) must be filed by the 11th and 20th of each month respectively."})]})]})]}):n==="gst"&&y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:A(y.total_taxable_value)}),e.jsx("div",{className:"stat-label",children:"Taxable Value"})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:A(y.total_gst)}),e.jsx("div",{className:"stat-label",children:"Total GST"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:y.invoice_count}),e.jsx("div",{className:"stat-label",children:"Invoices"})]})]}),e.jsxs("div",{className:"gst-breakdown",children:[e.jsx("h3",{className:"breakdown-title",children:"GST Component Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:A(y.cgst_amount)}),e.jsx("div",{className:"breakdown-label",children:"CGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:A(y.sgst_amount)}),e.jsx("div",{className:"breakdown-label",children:"SGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:A(y.igst_amount)}),e.jsx("div",{className:"breakdown-label",children:"IGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",style:{color:"#10b981"},children:A(y.total_gst)}),e.jsx("div",{className:"breakdown-label",children:"Total Payable"})]})]})]})]}):e.jsx("div",{className:"loading",children:"Select a report type to view data"})]})}function Kj(){const[n,r]=m.useState(""),[c,i]=m.useState(!1),[u,h]=m.useState(null),[x,j]=m.useState([]),[y,f]=m.useState([]),[p,g]=m.useState(!1);m.useEffect(()=>{w()},[]);const w=async()=>{try{g(!0);const b=await Xs.getReturns({page:1,size:10});f(b.data?.data?.items||b.data?.items||[])}catch(b){console.error("Failed to fetch recent returns:",b),f([])}finally{g(!1)}},A=async()=>{if(!n.trim()){Pe.error("Please enter an invoice number");return}try{i(!0);const b=await Xs.get(n),E=b.data?.data||b.data;if(!E){Pe.error("Invoice not found");return}h(E);const T=await Xs.getItems(n),D=T.data?.data?.items||T.data?.items||[];j(D),D.length===0&&Pe.info("No items found for this invoice")}catch(b){console.error("Invoice not found:",b),Pe.error(b.response?.data?.detail||"Invoice not found"),h(null),j([])}finally{i(!1)}},k=async()=>{if(x.length===0){Pe.error("No items to return");return}try{i(!0),await Xs.processReturn(u.id,{items:x.map(b=>({medicine_id:b.medicine_id,quantity:b.quantity,reason:b.reason||"Customer return"})),refund_method:"cash"}),Pe.success("Return processed successfully!"),h(null),j([]),r(""),w()}catch(b){console.error("Failed to process return:",b),Pe.error(b.response?.data?.detail||"Failed to process return")}finally{i(!1)}},S=x.reduce((b,E)=>b+(E.refund_amount||E.unit_price*E.quantity),0);return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"storefront"}),e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Return / Refund"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Process customer returns and issue refunds"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"receipt_long"}),"New Return Request"]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Original Invoice Number"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"search"}),e.jsx("input",{type:"text",value:n,onChange:b=>r(b.target.value),placeholder:"Enter invoice number (e.g., INV-2024-0001)",className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary",onKeyPress:b=>b.key==="Enter"&&A()})]}),e.jsx("button",{onClick:A,disabled:c,className:"px-5 py-2.5 rounded-lg bg-primary text-white font-semibold text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",children:c?"Searching...":"Find Invoice"})]})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Invoice"}),e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:u.id||u.invoice_number})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Date"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:u.date||new Date(u.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-sm",children:(u.customer_name||"C").split(" ").map(b=>b[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:u.customer_name||"Walk-in Customer"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:u.customer_phone||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-3",children:"Select Items to Return"}),x.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"inventory_2"}),e.jsx("p",{children:"No items found for this invoice"})]}):e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-xs uppercase text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-primary focus:ring-primary"})}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold",children:"Refund"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:x.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-slate-300 text-primary focus:ring-primary"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:b.medicine_name}),e.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400 font-mono text-xs",children:b.batch_number}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"number",defaultValue:b.quantity,min:"1",className:"w-16 text-center rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2 py-1 text-sm"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{className:"w-full rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2 py-1 text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("option",{children:"Wrong medication"}),e.jsx("option",{children:"Damaged packaging"}),e.jsx("option",{children:"Expired product"}),e.jsx("option",{children:"Customer changed mind"})]})}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-slate-900 dark:text-white",children:["",(b.refund_amount||b.unit_price*b.quantity).toFixed(2)]})]},b.id))})]})})]}),x.length>0&&e.jsxs("div",{className:"bg-primary/5 dark:bg-primary/10 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Refund Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["",S.toFixed(2)]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("select",{className:"rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-3 py-2 text-sm",children:[e.jsx("option",{children:"Cash Refund"}),e.jsx("option",{children:"Store Credit"}),e.jsx("option",{children:"Original Payment Method"})]})})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{h(null),j([])},className:"px-5 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 font-semibold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:k,disabled:c||x.length===0,className:"px-5 py-2.5 rounded-lg bg-primary text-white font-semibold text-sm hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check_circle"}),c?"Processing...":"Process Return"]})]})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm h-fit",children:[e.jsx("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"history"}),"Recent Returns"]})}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:p?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Loading..."})]}):y.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"assignment_return"}),e.jsx("p",{children:"No recent returns"})]}):y.map(b=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-mono text-sm font-medium text-primary",children:b.return_number||b.id}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${b.status==="completed"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"}`,children:b.status})]}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:b.customer_name||"Walk-in Customer"}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:b.created_at?new Date(b.created_at).toLocaleDateString():"N/A"}),e.jsxs("span",{children:[b.items_count||0," items  ",(b.refund_amount||0).toFixed(2)]})]})]},b.id))}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 text-center",children:e.jsx("button",{className:"text-sm text-primary font-medium hover:text-blue-700",children:"View All Returns"})})]})]})]})}function Ij(){const{user:n}=Ie(),r=n?.role||"",[c,i]=m.useState([]),[u,h]=m.useState(!0),[x,j]=m.useState(""),[y,f]=m.useState(!1),[p,g]=m.useState(null),[w,A]=m.useState(!1),[k,S]=m.useState("active"),[b,E]=m.useState("all"),[T,D]=m.useState({email:"",full_name:"",phone:"",role:"",role_id:"",password:"",assigned_warehouse_id:"",assigned_shop_id:""}),[z,R]=m.useState([]),[W,I]=m.useState([]),[q,oe]=m.useState([]);m.useEffect(()=>{M(),U()},[k,b]);const U=async()=>{try{const[P,pe,fe]=await Promise.all([_t.list(),Ct.list(),Qn.listAssignable()]);R(P.data?.items||P.data||[]),I(pe.data?.items||pe.data||[]);const Oe=fe.data?.roles||fe.data?.items||(Array.isArray(fe.data)?fe.data:[]);oe(Oe.filter(H=>H.name!=="super_admin"))}catch(P){console.error("Failed to fetch entities:",P),oe([])}},M=async()=>{try{h(!0);const P={search:x};k!=="all"&&(P.is_active=k==="active"),b!=="all"&&(P.role=b);const pe=await Yn.list(P);i(pe.data?.items||pe.data?.data||pe.data||[])}catch(P){console.error("Failed to fetch users:",P)}finally{h(!1)}},Q=()=>{g(null),D({email:"",full_name:"",phone:"",role:"",role_id:"",password:"",assigned_warehouse_id:"",assigned_shop_id:""}),f(!0)},he=P=>{g(P);const pe=q.find(fe=>fe.name===P.role);D({email:P.email||"",full_name:P.full_name||"",phone:P.phone||"",role:P.role,role_id:pe?.id||"",password:"",assigned_warehouse_id:P.assigned_warehouse_id||"",assigned_shop_id:P.assigned_shop_id||""}),f(!0)},xe=async P=>{P.preventDefault();try{console.log("Submitting user data:",T),p?(await Yn.update(p.id,T),window.toast?.success("User updated successfully")):(await Yn.create(T),window.toast?.success("User created successfully")),f(!1),M()}catch(pe){console.error("Failed to save user:",pe),console.error("Error response:",pe.response?.data),console.error("Error status:",pe.response?.status);const fe=pe.response?.data?.detail?Array.isArray(pe.response.data.detail)?pe.response.data.detail.map(Oe=>`${Oe.loc.join(".")}: ${Oe.msg}`).join(", "):pe.response.data.detail:pe.message||"Failed to save user";window.toast?.error(fe)}},[be,O]=m.useState(!1),[V,se]=m.useState(null),te=P=>{se(P),O(!0)},N=async()=>{if(V)try{await Yn.delete(V.id),window.toast?.success("User deleted successfully"),M()}catch(P){console.error("Failed to delete user:",P);const pe=P.response?.data?.detail||"Failed to delete user";window.toast?.error(pe)}finally{O(!1),se(null)}},_=P=>{switch(P){case"super_admin":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300";case"admin":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";case"manager":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}},Y={total:c.length,active:c.filter(P=>P.is_active).length,inactive:c.filter(P=>!P.is_active).length,admins:c.filter(P=>P.role==="admin"||P.role==="super_admin").length},G=(P,pe="all")=>{S(P),E(pe)},F=[{header:"User",key:"full_name",render:P=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white text-sm font-medium shadow-sm",children:P.full_name?.charAt(0)||P.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:P.full_name||"N/A"}),e.jsx("div",{className:"text-xs text-slate-500",children:P.email})]})]})},{header:"Role",key:"role",render:P=>e.jsx("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-[11px] font-medium uppercase tracking-wide ${_(P.role)}`,children:P.role.replace("_"," ")})},{header:"Location",key:"assigned_shop_id",render:P=>{if(P.role==="super_admin")return e.jsx("span",{className:"text-slate-400 italic",children:"Global Access"});if(P.assigned_shop_id){const pe=W.find(fe=>fe.id===P.assigned_shop_id);return e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-blue-500",children:"store"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",title:pe?.name,children:pe?.name||"Unknown Shop"})]})}if(P.assigned_warehouse_id){const pe=z.find(fe=>fe.id===P.assigned_warehouse_id);return e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-amber-500",children:"warehouse"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",title:pe?.name,children:pe?.name||"Unknown Warehouse"})]})}return e.jsx("span",{className:"text-slate-400",children:"-"})}},{header:"Status",key:"is_active",render:P=>e.jsx($e,{variant:P.is_active?"success":"error",children:P.is_active?"Active":"Inactive"}),align:"center"},{header:"Last Login",key:"last_login",render:P=>e.jsx("span",{className:"text-slate-500",children:P.last_login?new Date(P.last_login).toLocaleDateString():"Never"})},{header:"Actions",key:"id",align:"right",render:P=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"secondary",onClick:()=>he(P),className:"!p-1.5 h-8 w-8 justify-center",title:"Edit User",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r==="super_admin"&&e.jsx(le,{variant:"secondary",onClick:()=>te(P),className:"!p-1.5 h-8 w-8 justify-center text-red-600 hover:bg-red-50 hover:text-red-700",title:"Delete User",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"User Management",subtitle:`Manage ${Y.total} users across your organization`,actions:e.jsxs(le,{variant:"primary",onClick:Q,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"person_add"}),"Add User"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Users",value:Y.total,icon:"groups",onClick:()=>G("all"),isActive:k==="all"&&b==="all"}),e.jsx(ve,{title:"Active Users",value:Y.active,icon:"check_circle",onClick:()=>G("active"),isActive:k==="active",change:(Y.active/Y.total*100).toFixed(0)+"%",changeType:"up"}),e.jsx(ve,{title:"Inactive Users",value:Y.inactive,icon:"cancel",onClick:()=>G("inactive"),isActive:k==="inactive",changeType:"down"}),e.jsx(ve,{title:"Administrators",value:Y.admins,icon:"admin_panel_settings",onClick:()=>G("all","admin"),isActive:b==="admin"})]}),e.jsx(me.DataTable,{columns:F,data:c,loading:u,emptyMessage:"No users found matching your criteria.",headerSlot:e.jsx(me.ListControls,{title:"User List",count:c.length,searchProps:{value:x,onChange:P=>{j(P),M()}},onFilterClick:M,embedded:!0})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4",children:p?"Edit User":"Add User"}),e.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:T.full_name,onChange:P=>D({...T,full_name:P.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:T.email,onChange:P=>D({...T,email:P.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:T.phone,onChange:P=>D({...T,phone:P.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Role"}),e.jsxs("select",{value:T.role,onChange:P=>{const pe=P.target.value,fe=q.find(Oe=>Oe.name===pe);D({...T,role:pe,role_id:fe?.id||"",assigned_warehouse_id:"",assigned_shop_id:""})},className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Role"}),q.map(P=>e.jsx("option",{value:P.name,children:P.name.replace(/_/g," ").replace(/\b\w/g,pe=>pe.toUpperCase())},P.id))]})]}),q.find(P=>P.name===T.role)?.entity_type==="warehouse"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Assign to Warehouse *"}),e.jsxs("select",{value:T.assigned_warehouse_id,onChange:P=>D({...T,assigned_warehouse_id:P.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Warehouse"}),z.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),q.find(P=>P.name===T.role)?.entity_type==="shop"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Assign to Medical Shop *"}),e.jsxs("select",{value:T.assigned_shop_id,onChange:P=>D({...T,assigned_shop_id:P.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Medical Shop"}),W.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),!p&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Password ",e.jsx("span",{className:"text-xs text-slate-500",children:"(min. 8 characters)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:T.password,onChange:P=>D({...T,password:P.target.value}),className:"w-full px-3 pr-10 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!p,minLength:8}),e.jsx("button",{type:"button",onClick:()=>A(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:w?"Hide password":"Show password",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:w?"visibility_off":"visibility"})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:p?"Update":"Create"})]})]})]})}),be&&V&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"warning"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Delete User?"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Are you sure you want to delete ",e.jsx("strong",{children:V.full_name}),"? This action cannot be undone."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:N,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl hover:bg-red-700 font-medium transition-colors shadow-lg shadow-red-500/20",children:"Delete User"})]})]})})]})}function Jj(){const{isLoading:n}=ct(),{user:r}=Ie(),{activeEntity:c,scope:i}=Ta(),[u,h]=m.useState([]),[x,j]=m.useState(!0),[y,f]=m.useState(""),[p,g]=m.useState(1),[w,A]=m.useState(0),k=15,[S,b]=m.useState(!1),[E,T]=m.useState(null),[D,z]=m.useState({name:"",phone:"",email:"",address:"",customer_type:"regular",gender:""});m.useEffect(()=>{R()},[p,y]);const R=async()=>{try{j(!0);const M={page:p,size:k};y&&(M.search=y);const Q=await Ul.list(M);h(Q.data?.items||Q.data?.data||[]),A(Q.data?.total||0)}catch(M){console.error("Failed to fetch customers:",M),h([])}finally{j(!1)}},W=()=>{T(null),z({name:"",phone:"",email:"",address:"",customer_type:"regular",gender:""}),b(!0)},I=M=>{T(M),z({name:M.name,phone:M.phone,email:M.email||"",address:M.address||"",customer_type:M.customer_type||"regular",gender:M.gender||""}),b(!0)},q=async M=>{M.preventDefault();try{if(E)await Ul.update(E.id,D);else{let Q=r?.shop_id;i==="shop"&&c?.id&&(Q=c.id),!Q&&r?.role,await Ul.create({...D,shop_id:Q,customer_type:(D.customer_type||"regular").toLowerCase()})}b(!1),R()}catch(Q){console.error("Failed to save customer:",Q)}},oe=M=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(M),U=[{header:"Customer",key:"name",render:M=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 font-semibold",children:M.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:M.name}),e.jsx("div",{className:"text-xs text-slate-500",children:M.phone})]})]})},{header:"Type",key:"customer_type",render:M=>e.jsx($e,{variant:M.customer_type==="premium"?"warning":"secondary",className:"capitalize",children:M.customer_type||"regular"})},{header:"Email / Address",key:"email",className:"hidden md:table-cell",render:M=>e.jsxs("div",{className:"text-sm",children:[M.email&&e.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:M.email}),M.address&&e.jsx("div",{className:"text-xs text-slate-500 truncate max-w-[200px]",children:M.address})]})},{header:"Total Spend",key:"total_purchases",align:"right",render:M=>e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:oe(M.total_purchases||0)})},{header:"Last Visit",key:"last_visit",align:"right",render:M=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:M.last_visit?new Date(M.last_visit).toLocaleDateString():"-"})},{header:"Actions",key:"id",align:"right",render:M=>e.jsx(le,{variant:"ghost",onClick:()=>I(M),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Customer",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})})}];return e.jsxs(me,{loading:n,children:[e.jsx(me.Header,{title:"Customers",subtitle:"Manage customer profiles and history",actions:e.jsxs(le,{variant:"primary",onClick:W,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Customer"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Customers",value:w,icon:"group",isActive:!0}),e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:"hidden lg:block"})]}),e.jsx(me.DataTable,{columns:U,data:u,loading:x,emptyMessage:"No customers found.",pagination:{currentPage:p,totalPages:Math.ceil(w/k),onPageChange:g,totalItems:w,pageSize:k},headerSlot:e.jsx(me.ListControls,{title:"Customer List",count:w,searchProps:{value:y,onChange:M=>{f(M),g(1)},placeholder:"Search customers..."},embedded:!0})}),e.jsx(Et,{isOpen:S,onClose:()=>b(!1),title:E?"Edit Customer":"Add Customer",children:e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:D.name,onChange:M=>z({...D,name:M.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",value:D.phone,onChange:M=>z({...D,phone:M.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Type"}),e.jsx(Uj,{value:D.customer_type,onChange:M=>z({...D,customer_type:M}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gender"}),e.jsx(_p,{value:D.gender,onChange:M=>z({...D,gender:M}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:D.email,onChange:M=>z({...D,email:M.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Address"}),e.jsx("textarea",{value:D.address,onChange:M=>z({...D,address:M.target.value}),rows:2,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{type:"button",variant:"ghost",onClick:()=>b(!1),className:"flex-1",children:"Cancel"}),e.jsx(le,{type:"submit",variant:"primary",className:"flex-1",children:E?"Update":"Create"})]})]})})]})}const k0={name:"",email:"",password:"",phone:"",employment_type:"full_time",salary:0,shop_id:"",date_of_joining:new Date().toISOString().split("T")[0],address:"",emergency_contact:"",gender:"",hra_percent:40,allowances_percent:20,pf_percent:12,esi_percent:.75,esi_applicable:!0};function Wj(){const{user:n}=Ie(),{isLoading:r}=ct(),[c,i]=m.useState([]),[u,h]=m.useState(!0),[x,j]=m.useState(""),[y,f]=m.useState(""),[p,g]=m.useState(1),[w,A]=m.useState(0),k=10,[S,b]=m.useState(!1),[E,T]=m.useState(null),[D,z]=m.useState(k0),[R,W]=m.useState(!1),[I,q]=m.useState(""),[oe,U]=m.useState(null),[M,Q]=m.useState(!1),[he,xe]=m.useState(null),[be,O]=m.useState(!1),[V,se]=m.useState(""),te=n?.role==="warehouse_admin",N=n?.role==="super_admin";m.useEffect(()=>{_()},[y,p,x,V]);const _=async()=>{try{h(!0);const H={page:p,size:k};x&&(H.search=x),y&&(H.department=y),V&&(H.status=V);const ge=await pa.list(H);i(ge.data.items||ge.data.data||ge.data||[]),A(ge.data.total||ge.data.length||0)}catch(H){console.error(H),i([])}finally{h(!1)}},Y=()=>{T(null),z(k0),q(""),b(!0)},G=async H=>{try{const ke=(await pa.get(H.id)).data;T(H),z({name:ke.name||"",email:ke.email||"",phone:ke.phone||"",employment_type:ke.employment_type||"full_time",salary:ke.basic_salary||0,shop_id:ke.shop_id||"",date_of_joining:ke.date_of_joining?.split("T")[0]||"",address:ke.address||"",emergency_contact:ke.emergency_contact||"",gender:ke.gender||"",hra_percent:ke.hra_percent||40,allowances_percent:ke.allowances_percent||20,pf_percent:ke.pf_percent||12,esi_percent:ke.esi_percent||.75,esi_applicable:ke.esi_applicable!==void 0?ke.esi_applicable:!0,password:""}),q(""),b(!0)}catch(ge){console.error("Failed to fetch employee details:",ge),alert("Failed to load employee details")}},F=async H=>{if(H.preventDefault(),q(""),!D.name||!D.phone){q("Please fill in all required fields (Name, Phone)");return}if(!D.salary||D.salary<=0){q("Please enter a valid salary amount");return}W(!0);try{const ge={name:D.name,phone:D.phone,employment_type:D.employment_type,date_of_joining:D.date_of_joining,basic_salary:Number(D.salary)||void 0,email:D.email||void 0,password:D.password||void 0,gender:D.gender||void 0,address:D.address||void 0,emergency_contact:D.emergency_contact||void 0,shop_id:D.shop_id||void 0,hra_percent:D.hra_percent,allowances_percent:D.allowances_percent,pf_percent:D.pf_percent,esi_percent:D.esi_percent,esi_applicable:D.esi_applicable};if(E)await pa.update(E.id,ge),b(!1),_();else{const ke=await pa.create(ge);ke.data?.data?.credentials&&U(ke.data.data.credentials),b(!1),_()}}catch(ge){console.error("Failed to save employee:",ge);let ke="Failed to save employee";if(ge.response?.data?.detail){const de=ge.response.data.detail;Array.isArray(de)?ke=de.map(Ae=>`${Ae.loc?.join(".")||"Field"}: ${Ae.msg}`).join(", "):typeof de=="string"&&(ke=de)}q(ke)}finally{W(!1)}},P=async()=>{if(he){O(!0);try{await pa.delete(he.id),Q(!1),xe(null),_()}catch(H){console.error("Failed to delete employee:",H);let ge="Failed to delete employee";H.response?.data?.detail&&(ge=H.response.data.detail),alert(ge)}finally{O(!1)}}},pe=H=>{xe(H),Q(!0)},fe=H=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(H),Oe=[{header:"Employee",key:"name",render:H=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center text-violet-600 dark:text-violet-400 text-sm font-bold",children:H.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:H.name}),e.jsx("div",{className:"text-xs text-slate-500",children:H.phone})]})]})},{header:"Department",key:"department",render:H=>e.jsx($e,{variant:"secondary",className:"capitalize",children:H.department})},{header:"Designation",key:"designation",className:"hidden sm:table-cell"},{header:"Salary",key:"basic_salary",render:H=>e.jsx("span",{className:"font-medium font-mono text-slate-700 dark:text-slate-300",children:fe(H.basic_salary||0)}),align:"right"},{header:"Status",key:"status",render:H=>e.jsx($e,{variant:H.status==="active"?"success":H.status==="on_leave"?"warning":"error",children:H.status||"Active"}),align:"center"},{header:"Actions",key:"id",render:H=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"ghost",onClick:()=>G(H),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-blue-600",title:"Edit Employee",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx(le,{variant:"ghost",onClick:()=>pe(H),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-red-600",title:"Delete Employee",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(me,{loading:r,children:[e.jsx(me.Header,{title:"Employees",subtitle:"Manage staff, payroll, and assignments",actions:e.jsxs(le,{variant:"primary",onClick:Y,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Employee"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"All Employees",value:V?"-":w,icon:"badge",onClick:()=>{se(""),f("")},isActive:!V&&!y}),e.jsx(ve,{title:"Active",value:V==="active"?w:"-",icon:"check_circle",onClick:()=>se("active"),isActive:V==="active"}),e.jsx(ve,{title:"On Leave",value:V==="on_leave"?w:"-",icon:"event_busy",onClick:()=>se("on_leave"),isActive:V==="on_leave"}),e.jsx(ve,{title:"Inactive",value:V==="inactive"?w:"-",icon:"cancel",onClick:()=>se("inactive"),isActive:V==="inactive"}),N&&e.jsx(ve,{title:"Terminated",value:V==="terminated"?w:"-",icon:"delete",onClick:()=>se("terminated"),isActive:V==="terminated",className:"!bg-red-50 dark:!bg-red-900/10 !border-red-200 dark:!border-red-800"})]}),e.jsx(me.DataTable,{columns:Oe,data:c,loading:u,emptyMessage:"No employees found. Add your first employee.",pagination:{currentPage:p,totalPages:Math.ceil(w/k),onPageChange:g,totalItems:w,pageSize:k},headerSlot:e.jsx(me.ListControls,{title:"Employee List",count:w,searchProps:{value:x,onChange:H=>{j(H),g(1)},placeholder:"Search employees..."},actions:null,embedded:!0})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800 z-10",children:e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:E?"Edit Employee":"Add New Employee"})}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[I&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),I]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:D.name,onChange:H=>z({...D,name:H.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:D.phone,onChange:H=>z({...D,phone:H.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Email"}),e.jsx("input",{type:"email",value:D.email,onChange:H=>z({...D,email:H.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors"})]}),!E&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Password"}),e.jsx("input",{type:"password",value:D.password,onChange:H=>z({...D,password:H.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",placeholder:"Enter password for user account"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Join Date"}),e.jsx("input",{type:"date",value:D.date_of_joining,onChange:H=>z({...D,date_of_joining:H.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Employment Type"}),e.jsx(qj,{value:D.employment_type,onChange:H=>z({...D,employment_type:H}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Gender"}),e.jsx(_p,{value:D.gender,onChange:H=>z({...D,gender:H}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Salary ()"}),e.jsx("input",{type:"number",value:D.salary,onChange:H=>z({...D,salary:parseFloat(H.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono"})]}),!te&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Assigned Shop"}),e.jsx(Gd,{value:D.shop_id,onChange:H=>z({...D,shop_id:H}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"percent"}),"Salary Component Configuration"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"HRA %"}),e.jsx("input",{type:"number",value:D.hra_percent,onChange:H=>z({...D,hra_percent:parseFloat(H.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Allowances %"}),e.jsx("input",{type:"number",value:D.allowances_percent,onChange:H=>z({...D,allowances_percent:parseFloat(H.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"PF %"}),e.jsx("input",{type:"number",value:D.pf_percent,onChange:H=>z({...D,pf_percent:parseFloat(H.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"ESI %"}),e.jsx("input",{type:"number",value:D.esi_percent,onChange:H=>z({...D,esi_percent:parseFloat(H.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100",disabled:!D.esi_applicable})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.esi_applicable,onChange:H=>z({...D,esi_applicable:H.target.checked}),className:"rounded border-slate-300"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"ESI Applicable (only for salary < 21,000)"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Address"}),e.jsx("textarea",{value:D.address,onChange:H=>z({...D,address:H.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",rows:2})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx(le,{variant:"secondary",onClick:()=>b(!1),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",disabled:R,loading:R,children:E?"Update Employee":"Add Employee"})]})]})]})}),M&&he&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400 text-2xl",children:"warning"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Delete Employee"}),e.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mt-0.5",children:"info"}),e.jsxs("span",{children:["Are you sure you want to delete ",e.jsx("strong",{children:he.name}),'? The employee status will be set to "terminated".']})]})}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Employee Code:"}),e.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-white",children:he.employee_code||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Department:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:he.department})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Phone:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:he.phone})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx(le,{variant:"secondary",onClick:()=>{Q(!1),xe(null)},disabled:be,children:"Cancel"}),e.jsx(le,{variant:"primary",onClick:P,disabled:be,loading:be,className:"!bg-red-600 hover:!bg-red-700",children:"Delete Employee"})]})]})}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400 text-2xl",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Employee Created!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"User account credentials generated"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mt-0.5",children:"info"}),e.jsx("span",{children:"Please save these credentials securely and share them with the employee. They won't be shown again."})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:oe.email,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 font-mono text-sm"}),e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(oe.email),className:"!p-2",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Temporary Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:oe.temporary_password,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 font-mono text-sm font-bold"}),e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(oe.temporary_password),className:"!p-2",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:e.jsx(le,{variant:"primary",onClick:()=>U(null),children:"Got It"})})]})})]})}function eN(){const[n,r]=m.useState(new Date().toISOString().split("T")[0]),[c,i]=m.useState({}),[u,h]=m.useState(null),[x,j]=m.useState(!0),[y,f]=m.useState(!1),[p,g]=m.useState({type:"",text:""}),[w,A]=m.useState("");m.useEffect(()=>{k()},[n]);const k=async()=>{try{j(!0);const R=(await pa.getDailyAttendance(n)).data;h(R);const W={};R.attendance.forEach(I=>{const q=I.check_in?I.check_in.split("T")[1]?.substr(0,5):"09:00",oe=I.check_out?I.check_out.split("T")[1]?.substr(0,5):"18:00";W[I.employee_id]={employee_id:I.employee_id,date:n,status:I.status||"present",check_in:q,check_out:oe}}),i(W)}catch(z){console.error("Error loading attendance:",z),g({type:"error",text:"Failed to load attendance records"})}finally{j(!1)}},S=(z,R,W)=>{i(I=>({...I,[z]:{...I[z],[R]:W}}))},b=async()=>{f(!0);try{const z=Object.values(c);for(const R of z){const W={employee_id:R.employee_id,date:R.date,status:R.status,check_in:R.check_in?`${R.date}T${R.check_in}:00`:void 0,check_out:R.check_out?`${R.date}T${R.check_out}:00`:void 0};await pa.markAttendance(W)}g({type:"success",text:"Attendance saved as draft!"}),await k()}catch(z){let R="Failed to save attendance";if(z.response?.data?.detail){const W=z.response.data.detail;Array.isArray(W)?R=W.map(I=>`${I.loc?.join(".")||"Unknown field"}: ${I.msg}`).join(", "):typeof W=="string"&&(R=W)}g({type:"error",text:R})}finally{f(!1)}},E=z=>{const R={not_marked:{icon:"",label:"Not Marked",color:"#f59e0b"},draft:{icon:"",label:"Draft",color:"#3b82f6"},submitted:{icon:"",label:"Submitted",color:"#10b981"},locked:{icon:"",label:"Locked",color:"#ef4444"}},{icon:W,label:I,color:q}=R[z]||R.not_marked;return e.jsxs("div",{style:{display:"inline-block",padding:"6px 16px",borderRadius:"20px",background:q+"20",color:q,fontWeight:"bold",fontSize:"14px"},children:[W," ",I]})},T=z=>{switch(z){case"present":return"#10b981";case"absent":return"#ef4444";case"half_day":return"#f59e0b";case"leave":return"#8b5cf6";default:return"#6b7280"}},D={present:Object.values(c).filter(z=>z.status==="present").length,absent:Object.values(c).filter(z=>z.status==="absent").length,half_day:Object.values(c).filter(z=>z.status==="half_day").length,leave:Object.values(c).filter(z=>z.status==="leave").length};return e.jsxs("div",{className:"attendance-marker",children:[e.jsxs("div",{className:"header",children:[e.jsx("h2",{children:"Attendance Marker"}),e.jsxs("div",{className:"header-controls",children:[e.jsx("input",{type:"date",value:n,onChange:z=>r(z.target.value),className:"date-picker"}),u&&E(u.date_status)]})]}),p.text&&e.jsx("div",{className:`message ${p.type}`,children:p.text}),e.jsx("div",{className:"controls-card",children:e.jsxs("div",{className:"stats-row",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#10b981"},children:D.present}),e.jsx("div",{className:"stat-label",children:"Present"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#ef4444"},children:D.absent}),e.jsx("div",{className:"stat-label",children:"Absent"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#f59e0b"},children:D.half_day}),e.jsx("div",{className:"stat-label",children:"Half Day"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#8b5cf6"},children:D.leave}),e.jsx("div",{className:"stat-label",children:"Leave"})]})]})}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(qd,{value:w,onChange:A,placeholder:"Search employees by name or code..."})}),x?e.jsx("div",{className:"loading",children:"Loading employees..."}):e.jsxs("div",{className:"attendance-table",children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"})]})}),e.jsx("tbody",{children:u?.attendance.filter(z=>{if(!w)return!0;const R=w.toLowerCase();return z.employee_name.toLowerCase().includes(R)||z.employee_code.toLowerCase().includes(R)||z.department.toLowerCase().includes(R)}).map(z=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"employee-info",children:[e.jsx("div",{className:"employee-avatar",children:z.employee_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"employee-name",children:z.employee_name}),e.jsx("div",{className:"employee-code",children:z.employee_code})]})]})}),e.jsx("td",{children:z.employee_role}),e.jsx("td",{children:z.department}),e.jsx("td",{children:e.jsxs("select",{className:"status-select",value:c[z.employee_id]?.status||"present",onChange:R=>S(z.employee_id,"status",R.target.value),disabled:!1,style:{borderColor:T(c[z.employee_id]?.status||"present")},children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"half_day",children:"Half Day"}),e.jsx("option",{value:"leave",children:"Leave"})]})}),e.jsx("td",{children:e.jsx("input",{type:"time",className:"time-input",value:c[z.employee_id]?.check_in||"09:00",onChange:R=>S(z.employee_id,"check_in",R.target.value),disabled:c[z.employee_id]?.status==="absent"||c[z.employee_id]?.status==="leave"})}),e.jsx("td",{children:e.jsx("input",{type:"time",className:"time-input",value:c[z.employee_id]?.check_out||"18:00",onChange:R=>S(z.employee_id,"check_out",R.target.value),disabled:c[z.employee_id]?.status==="absent"||c[z.employee_id]?.status==="leave"})})]},z.employee_id))})]}),e.jsx("div",{className:"table-footer",children:e.jsx("button",{className:"btn-submit",onClick:b,disabled:y,children:y?"Saving...":"Save Attendance"})})]})]})}function tN(){const[n,r]=m.useState(new Date().toISOString().split("T")[0]),[c,i]=m.useState([]),[u,h]=m.useState(!0),[x,j]=m.useState("");m.useEffect(()=>{y()},[n]);const y=async()=>{try{h(!0);const g=(await pa.getDailyAttendance(n)).data.attendance.filter(w=>w.is_marked);i(g)}catch(p){console.error("Error loading attendance:",p)}finally{h(!1)}},f={present:c.filter(p=>p.status==="present").length,absent:c.filter(p=>p.status==="absent").length,half_day:c.filter(p=>p.status==="half_day").length,leave:c.filter(p=>p.status==="leave").length};return e.jsxs("div",{className:"attendance-marker",style:{padding:"24px"},children:[e.jsxs("div",{className:"header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{children:"Attendance Report"}),e.jsx("input",{type:"date",value:n,onChange:p=>r(p.target.value),className:"date-picker"})]}),e.jsxs("div",{className:"summary-cards",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"#d4edda",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#155724"},children:f.present}),e.jsx("div",{style:{color:"#155724",marginTop:"8px"},children:"Present"})]}),e.jsxs("div",{style:{background:"#f8d7da",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#721c24"},children:f.absent}),e.jsx("div",{style:{color:"#721c24",marginTop:"8px"},children:"Absent"})]}),e.jsxs("div",{style:{background:"#fff3cd",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#856404"},children:f.half_day}),e.jsx("div",{style:{color:"#856404",marginTop:"8px"},children:"Half Day"})]}),e.jsxs("div",{style:{background:"#e2e3e5",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#383d41"},children:f.leave}),e.jsx("div",{style:{color:"#383d41",marginTop:"8px"},children:"Leave"})]})]}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(qd,{value:x,onChange:j,placeholder:"Search by name, code, or department..."})}),u?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsx("div",{className:"attendance-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"}),e.jsx("th",{children:"Working Hours"})]})}),e.jsx("tbody",{children:c.filter(p=>{if(!x)return!0;const g=x.toLowerCase();return p.employee_name.toLowerCase().includes(g)||p.employee_code.toLowerCase().includes(g)||p.department.toLowerCase().includes(g)}).length>0?c.filter(p=>{if(!x)return!0;const g=x.toLowerCase();return p.employee_name.toLowerCase().includes(g)||p.employee_code.toLowerCase().includes(g)||p.department.toLowerCase().includes(g)}).map(p=>e.jsxs("tr",{children:[e.jsx("td",{children:p.employee_name}),e.jsx("td",{children:p.employee_code}),e.jsx("td",{children:p.employee_role}),e.jsx("td",{children:p.department}),e.jsx("td",{children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",background:p.status==="present"?"#d4edda":p.status==="absent"?"#f8d7da":p.status==="half_day"?"#fff3cd":"#e2e3e5",color:p.status==="present"?"#155724":p.status==="absent"?"#721c24":p.status==="half_day"?"#856404":"#383d41"},children:p.status?.replace("_"," ").toUpperCase()})}),e.jsx("td",{children:p.check_in?new Date(p.check_in).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{children:p.check_out?new Date(p.check_out).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{children:p.working_hours?p.working_hours.toFixed(1)+"h":"-"})]},p.employee_id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:8,style:{textAlign:"center",padding:"40px",color:"#888"},children:["No attendance records found for ",n]})})})]})})]})}const Fn={HRA_PERCENTAGE:.4,ALLOWANCE_PERCENTAGE:.2,PF_PERCENTAGE:.12,ESI_PERCENTAGE:.0075,ESI_LIMIT:21e3};function aN(){const[n,r]=m.useState([]),[c,i]=m.useState([]),[u,h]=m.useState(new Date().getMonth()+1),[x,j]=m.useState(new Date().getFullYear()),[y,f]=m.useState(!0),[p,g]=m.useState(!1),[w,A]=m.useState(null),[k,S]=m.useState(!1),[b,E]=m.useState(!1),[T,D]=m.useState(""),[z,R]=m.useState("all"),[W,I]=m.useState(1),[q,oe]=m.useState(new Set),U=15;m.useEffect(()=>{M()},[]),m.useEffect(()=>{n.length>0&&Q()},[u,x,n]);const M=async()=>{try{const de=await pa.list({size:500}),Ae=de.data.items||de.data||[];r(Ae.filter(Ve=>Ve.status==="active"))}catch(de){console.error("Error loading employees:",de),Pe.error("Failed to load employees")}finally{f(!1)}},Q=async()=>{try{const de=await pa.getSalaryRecords({month:u,year:x});i(de.data||[])}catch(de){console.error("Error loading salary records:",de),i([])}},he=(de,Ae)=>{const Ve=Ae?.basic_salary||de.basic_salary||0,Wa=Ae?.hra||Ve*Fn.HRA_PERCENTAGE,Da=Ae?.allowances||Ve*Fn.ALLOWANCE_PERCENTAGE,es=Ve+Wa+Da,Cs=Ae?.pf_deduction||Ve*Fn.PF_PERCENTAGE,Ra=Ae?.esi_deduction||(Ve<Fn.ESI_LIMIT?Ve*Fn.ESI_PERCENTAGE:0),qt=Ae?.tax_deduction||0,ts=Cs+Ra+qt,At=es-ts;return{employee:de,record:Ae||null,basic:Ve,hra:Wa,allowances:Da,grossEarnings:es,pf:Cs,esi:Ra,tax:qt,totalDeductions:ts,netSalary:At}},xe=()=>{const de=new Map(c.map(Ae=>[Ae.employee_id,Ae]));return n.map(Ae=>he(Ae,de.get(Ae.id)))},be=()=>{if(q.size===0){Pe.error("Please select at least one employee to process salary");return}E(!0)},O=async()=>{E(!1),g(!0);try{await pa.processSalary({month:u,year:x,employee_ids:Array.from(q)}),Pe.success(`Salary processed for ${q.size} employee(s)`),oe(new Set),Q()}catch(de){Pe.error(de.response?.data?.detail||"Failed to process salary")}finally{g(!1)}},V=de=>{oe(Ae=>{const Ve=new Set(Ae);return Ve.has(de)?Ve.delete(de):Ve.add(de),Ve})},se=()=>{q.size===F.length?oe(new Set):oe(new Set(F.map(de=>de.employee.id)))},te=de=>{A(de),S(!0)},N=de=>new Date(2e3,de-1).toLocaleString("default",{month:"long"}),_=de=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(de),Y=de=>new Date(de).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),G=xe(),F=G.filter(de=>{const Ae=de.employee.name.toLowerCase().includes(T.toLowerCase())||de.employee.employee_code.toLowerCase().includes(T.toLowerCase()),Ve=z==="all"||z==="paid"&&de.record?.is_paid||z==="pending"&&!de.record?.is_paid;return Ae&&Ve}),P=F.reduce((de,Ae)=>de+Ae.grossEarnings,0),pe=F.reduce((de,Ae)=>de+Ae.totalDeductions,0),fe=F.reduce((de,Ae)=>de+Ae.netSalary,0),Oe=F.filter(de=>de.record?.is_paid).length,H=F.filter(de=>!de.record?.is_paid).length,ge=F.slice((W-1)*U,W*U),ke=[{header:e.jsx("input",{type:"checkbox",checked:q.size>0&&q.size===F.length,onChange:se,className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),key:"select",width:"50px",render:de=>e.jsx("input",{type:"checkbox",checked:q.has(de.employee.id),onChange:()=>V(de.employee.id),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"})},{header:"Employee",key:"employee",render:de=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm",children:de.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:de.employee.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[de.employee.employee_code,"  ",de.employee.designation]})]})]})},{header:"Basic",key:"basic",align:"right",render:de=>e.jsx("span",{className:"font-mono text-sm text-slate-900 dark:text-white",children:_(de.basic)})},{header:"HRA",key:"hra",align:"right",render:de=>e.jsx("span",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-400",children:_(de.hra)})},{header:"Allowances",key:"allowances",align:"right",render:de=>e.jsx("span",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-400",children:_(de.allowances)})},{header:"Gross",key:"grossEarnings",align:"right",render:de=>e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900 dark:text-white",children:_(de.grossEarnings)})},{header:"Deductions",key:"totalDeductions",align:"right",render:de=>e.jsxs("span",{className:"font-mono text-sm text-red-600 dark:text-red-400",children:["-",_(de.totalDeductions)]})},{header:"Net Salary",key:"netSalary",align:"right",render:de=>e.jsx("span",{className:"font-mono text-base font-bold text-blue-600 dark:text-blue-400",children:_(de.netSalary)})},{header:"Status",key:"status",align:"center",render:de=>de.record?.is_paid?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Paid"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Pending"]})},{header:"Actions",key:"actions",align:"center",render:de=>e.jsx(le,{variant:"ghost",onClick:()=>te(de),className:"!p-1.5 h-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"description"})})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Salary Management",subtitle:"Process and manage employee salaries",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[q.size>0&&e.jsxs("span",{className:"px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg",children:[q.size," selected"]}),e.jsx(le,{variant:"primary",onClick:be,loading:p,disabled:y||q.size===0,icon:p?"hourglass_empty":"calculate",className:"bg-gradient-to-r from-blue-600 to-indigo-600",children:p?"Processing...":`Process Salary${q.size>0?` (${q.size})`:""}`})]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Employees",value:F.length,icon:"group",isActive:!0}),e.jsx(ve,{title:"Gross Payroll",value:_(P),icon:"trending_up",trend:"up",valueClassName:"text-emerald-600 dark:text-emerald-400"}),e.jsx(ve,{title:"Total Deductions",value:_(pe),icon:"trending_down",trend:"down",valueClassName:"text-red-600 dark:text-red-400"}),e.jsx(ve,{title:"Net Payable",value:_(fe),icon:"payments",isActive:!0,valueClassName:"text-blue-600 dark:text-blue-400"})]}),e.jsx(me.DataTable,{columns:ke,data:ge,loading:y,emptyMessage:"No employees found",pagination:{currentPage:W,totalPages:Math.ceil(F.length/U),onPageChange:I,totalItems:F.length,pageSize:U},headerSlot:e.jsx(me.ListControls,{title:"Salary List",count:F.length,searchProps:{value:T,onChange:de=>{D(de),I(1)},placeholder:"Search employees..."},actions:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-xl",children:"calendar_month"}),e.jsx("select",{value:u,onChange:de=>h(Number(de.target.value)),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:Array.from({length:12},(de,Ae)=>e.jsx("option",{value:Ae+1,children:N(Ae+1)},Ae+1))}),e.jsx("select",{value:x,onChange:de=>j(Number(de.target.value)),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:Array.from({length:5},(de,Ae)=>{const Ve=new Date().getFullYear()-Ae;return e.jsx("option",{value:Ve,children:Ve},Ve)})})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>R("all"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${z==="all"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["All (",G.length,")"]}),e.jsxs("button",{onClick:()=>R("paid"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${z==="paid"?"bg-white dark:bg-slate-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["Paid (",Oe,")"]}),e.jsxs("button",{onClick:()=>R("pending"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${z==="pending"?"bg-white dark:bg-slate-600 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["Pending (",H,")"]})]})]}),embedded:!0})}),k&&w&&e.jsx(Et,{isOpen:k,onClose:()=>S(!1),title:"Salary Slip",maxWidth:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center pb-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-1",children:"Salary Slip"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[N(u)," ",x]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Employee Name"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Employee Code"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.employee_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Designation"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.designation})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Department"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.department})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-emerald-600 dark:text-emerald-400",children:"add_circle"}),"Earnings"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Basic Salary"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:_(w.basic)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"HRA (40%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:_(w.hra)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Allowances (20%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:_(w.allowances)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Gross Earnings"}),e.jsx("span",{className:"font-mono font-bold text-emerald-600 dark:text-emerald-400",children:_(w.grossEarnings)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400",children:"remove_circle"}),"Deductions"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"PF (12%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:_(w.pf)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"ESI (0.75%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:_(w.esi)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tax"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:_(w.tax)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Total Deductions"}),e.jsx("span",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:_(w.totalDeductions)})]})]})]})]}),e.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Net Salary"}),e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:_(w.netSalary)})]})}),w.record&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"info"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Payment Status:"})]}),w.record.is_paid?e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Paid"]}),w.record.paid_at&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["on ",Y(w.record.paid_at)]})]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Pending"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"print"}),"Print Slip"]}),e.jsx("button",{onClick:()=>S(!1),className:"px-6 py-2.5 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 font-medium rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Close"})]})]})}),e.jsx(Et,{isOpen:b,onClose:()=>E(!1),title:"Confirm Salary Processing",maxWidth:"sm",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg",children:[e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Attention Needed"}),e.jsx("p",{className:"text-sm opacity-90",children:"This action will generate salary records."})]})]}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-300 mb-6 text-center",children:["Are you sure you want to process salary for ",e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:q.size})," selected employee(s) for ",e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[N(u)," ",x]}),"?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(le,{variant:"secondary",onClick:()=>E(!1),className:"flex-1",children:"Cancel"}),e.jsx(le,{variant:"primary",onClick:O,loading:p,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600",children:"Confirm Process"})]})]})})]})}function S0(){const[n,r]=m.useState([]),[c,i]=m.useState(!0),[u,h]=m.useState(""),[x,j]=m.useState(""),[y,f]=m.useState(1),[p,g]=m.useState(0),w=15;m.useEffect(()=>{A()},[y,x,u]);const A=async()=>{try{i(!0);const E={page:y,size:w,status:u||void 0};x&&(E.search=x);const T=await Xs.list(E);r(T.data?.items||T.data?.data||[]),g(T.data?.total||0)}catch(E){console.error(E),r([])}finally{i(!1)}},k=E=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(E),S={paid:n.filter(E=>E.payment_status==="paid").length,pending:n.filter(E=>E.payment_status==="pending").length,cancelled:n.filter(E=>E.payment_status==="cancelled").length},b=[{header:"Invoice #",key:"invoice_number",render:E=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"receipt_long"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:E.invoice_number}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(E.created_at).toLocaleDateString()})]})]})},{header:"Customer",key:"customer_name",render:E=>e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:E.customer_name||"Walk-in Customer"})},{header:"Shop",key:"shop_name",render:E=>E.shop_name||"N/A",className:"hidden md:table-cell"},{header:"Amount",key:"total_amount",align:"right",render:E=>e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:k(E.total_amount)})},{header:"Status",key:"payment_status",align:"center",render:E=>{const T=E.payment_status==="paid"?"success":E.payment_status==="cancelled"?"error":"warning";return e.jsx($e,{variant:T,className:"capitalize",children:E.payment_status})}},{header:"Actions",key:"id",align:"right",render:()=>e.jsx(le,{variant:"ghost",className:"!p-1.5 h-8 w-8 text-slate-500",title:"View Invoice",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Invoices",subtitle:"View and manage sales invoices"}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Invoices",value:p,icon:"receipt",onClick:()=>h(""),isActive:u===""}),e.jsx(ve,{title:"Paid",value:S.paid,icon:"check_circle",onClick:()=>h("paid"),isActive:u==="paid",trend:"up"}),e.jsx(ve,{title:"Pending",value:S.pending,icon:"pending",onClick:()=>h("pending"),isActive:u==="pending",trend:"neutral"}),e.jsx(ve,{title:"Cancelled",value:S.cancelled,icon:"cancel",onClick:()=>h("cancelled"),isActive:u==="cancelled",trend:"down"})]}),e.jsx(me.DataTable,{columns:b,data:n,loading:c,emptyMessage:"No invoices found.",pagination:{currentPage:y,totalPages:Math.ceil(p/w),onPageChange:f,totalItems:p,pageSize:w},headerSlot:e.jsx(me.ListControls,{title:"Invoice List",count:p,searchProps:{value:x,onChange:E=>{j(E),f(1)},placeholder:"Search invoices..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:u,onChange:E=>{h(E.target.value),f(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),embedded:!0})})]})}function _0(){const n=Be(),{activeEntity:r}=Ta(),[c,i]=m.useState([]),[u,h]=m.useState(!0),[x,j]=m.useState(""),[y,f]=m.useState(""),[p,g]=m.useState(1),[w,A]=m.useState(0),k=10,[S,b]=m.useState(null);m.useEffect(()=>{E()},[p,y,x]);const E=async()=>{try{h(!0);const R={page:p,size:k,status:x||void 0};y&&(R.search=y);const W=await Is.list(R);i(W.data?.items||[]),A(W.data?.total||0)}catch(R){console.error(R),i([])}finally{h(!1)}},T=async(R,W)=>{try{b(R),await Is.updateStatus(R,W),E()}catch(I){console.error(I),alert("Failed to update status")}finally{b(null)}},D={pending:c.filter(R=>R.status==="pending").length,inTransit:c.filter(R=>R.status==="in_transit").length,delivered:c.filter(R=>R.status==="delivered").length},z=[{header:"Dispatch #",key:"dispatch_number",render:R=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${R.status==="delivered"?"bg-green-100 text-green-600":R.status==="in_transit"?"bg-blue-100 text-blue-600":"bg-amber-100 text-amber-600"}`,children:e.jsx("span",{className:"material-symbols-outlined",children:R.status==="delivered"?"check_circle":R.status==="in_transit"?"local_shipping":"schedule"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:R.dispatch_number||R.id.slice(0,8)}),e.jsx("div",{className:"text-xs text-slate-500",children:R.dispatch_date?new Date(R.dispatch_date).toLocaleDateString():"Pending Date"})]})]})},{header:"From Warehouse",key:"warehouse_name",render:R=>R.warehouse_name||"N/A"},{header:"To Shop",key:"shop_name",render:R=>R.shop_name||"N/A"},{header:"Items",key:"total_items",render:R=>e.jsx("span",{className:"font-mono",children:R.total_items}),align:"center"},{header:"Status",key:"status",render:R=>{const W=R.status==="delivered"?"success":R.status==="cancelled"?"error":R.status==="in_transit"?"primary":"warning";return e.jsx($e,{variant:W,children:R.status.replace("_"," ")})},align:"center"},{header:"Actions",key:"id",align:"right",render:R=>e.jsxs("div",{className:"flex justify-end gap-2",children:[R.status==="pending"&&e.jsx(le,{variant:"primary",onClick:()=>T(R.id,"in_transit"),disabled:S===R.id,className:"!py-1 !px-2 !text-xs",children:"Start"}),r?.type==="shop"&&["pending","created","in_transit"].includes(R.status?.toLowerCase())&&e.jsx(le,{variant:"success",onClick:()=>n("/shops/stock",{state:{dispatchId:R.id}}),className:"!py-1 !px-2 !text-xs",children:"Receive Stock"}),e.jsx(le,{variant:"ghost",onClick:()=>n(`/dispatches/${R.id}`),className:"!p-1.5 h-8 w-8 text-slate-500",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})]})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Dispatch History",subtitle:"Track warehouse to shop deliveries and shipments",actions:e.jsxs(le,{variant:"primary",onClick:()=>n("/dispatches/create"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"New Dispatch"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Dispatches",value:w,icon:"local_shipping",onClick:()=>j(""),isActive:x===""}),e.jsx(ve,{title:"Pending",value:D.pending,icon:"schedule",onClick:()=>j("pending"),isActive:x==="pending",trend:"neutral"}),e.jsx(ve,{title:"In Transit",value:D.inTransit,icon:"near_me",onClick:()=>j("in_transit"),isActive:x==="in_transit",trend:"up"}),e.jsx(ve,{title:"Delivered",value:D.delivered,icon:"check_circle",onClick:()=>j("delivered"),isActive:x==="delivered",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:z,data:c,loading:u,emptyMessage:"No dispatches found.",pagination:{currentPage:p,totalPages:Math.ceil(w/k),onPageChange:g,totalItems:w,pageSize:k},headerSlot:e.jsx(me.ListControls,{title:"Dispatch List",count:w,searchProps:{value:y,onChange:R=>{f(R),g(1)},placeholder:"Search dispatches..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:x,onChange:R=>{j(R.target.value),g(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),embedded:!0})})]})}function sN(){const n=Be(),{user:r}=Ie(),[c,i]=m.useState(!1),[u,h]=m.useState(""),[x,j]=m.useState(""),[y,f]=m.useState(""),[p,g]=m.useState(""),[w,A]=m.useState([]),[k,S]=m.useState([]),[b,E]=m.useState([]),[T,D]=m.useState([]);m.useEffect(()=>{I(),q(),oe()},[]);const[z]=Ty(),R=z.get("pr_id");m.useEffect(()=>{R&&W(R)},[R]);const W=async O=>{try{const V=await Ps.get(O),se=V.data||V;j(se.warehouse_id),f(se.shop_id),g(`Fulfilled from PR-${se.request_number}`);const te=[];for(const N of se.items||[]){let _=[];if(N.medicine_id)try{const Y=await vt.getBatches(N.medicine_id);_=Y.data?.batches||Y.data||[]}catch(Y){console.error(`Failed to fetch batches for ${N.medicine_id}`,Y)}te.push({medicine_id:N.medicine_id,medicine_name:N.medicine_name,medicine_search:N.medicine_name,batch_id:"",batch_number:"",quantity:N.quantity_approved||N.quantity_requested||0,available_batches:_})}A(te)}catch(V){console.error("Failed to load PR",V),h("Failed to load purchase request")}};m.useEffect(()=>{!x&&r?.role==="warehouse_admin"&&r?.warehouse_id&&j(r.warehouse_id)},[r,x]);const I=async()=>{try{const O=await _t.list({size:100});S(O.data?.items||O.data||[])}catch(O){console.error("Failed to fetch warehouses",O)}},q=async()=>{try{const O=await Ct.list({size:100});E(O.data?.items||O.data||[])}catch(O){console.error("Failed to fetch shops",O)}},oe=async()=>{try{const O=await vt.list({size:100});D(O.data?.items||O.data||[])}catch(O){console.error("Failed to fetch medicines",O)}},U=()=>{A([...w,{medicine_id:"",batch_id:"",quantity:1,available_batches:[]}])},M=O=>{A(w.filter((V,se)=>se!==O))},Q=async(O,V,se)=>{const te=[...w];if(V==="medicine_id"){if(te[O]={...te[O],[V]:se,batch_id:"",batch_number:"",available_stock:0,available_batches:[]},se){const N=T.find(_=>_.id===se);te[O].medicine_name=N?.name,te[O].brand=N?.brand;try{const _=await vt.getBatches(se),Y=_.data?.batches||_.data||[];te[O].available_batches=Y.filter(G=>(G.quantity||0)>0)}catch(_){console.error("Failed to fetch batches",_)}}}else if(V==="batch_id"){const N=te[O].available_batches?.find(_=>_.id===se);te[O].batch_id=se,te[O].batch_number=N?.batch_number||"",te[O].available_stock=N?.quantity||0,te[O].quantity>(N?.quantity||0)&&(te[O].quantity=N?.quantity||0)}else te[O]={...te[O],[V]:se};A(te)},he=()=>{if(!x)return h("Please select a warehouse"),!1;if(!y)return h("Please select a shop"),!1;if(w.length===0)return h("Please add at least one item"),!1;for(let O=0;O<w.length;O++){const V=w[O];if(!V.medicine_id||!V.batch_id)return h(`Item ${O+1}: Please select medicine and batch`),!1;if(V.quantity<=0)return h(`Item ${O+1}: Quantity must be greater than 0`),!1;if(V.available_stock!==void 0&&V.quantity>V.available_stock)return h(`Item ${O+1}: Quantity (${V.quantity}) exceeds available stock (${V.available_stock})`),!1}return!0},xe=async O=>{if(O.preventDefault(),h(""),!!he()){i(!0);try{const V={warehouse_id:x,shop_id:y,notes:p||void 0,items:w.map(se=>({medicine_id:se.medicine_id,batch_id:se.batch_id,quantity:se.quantity}))};await Is.create(V),n("/dispatches")}catch(V){console.error("Failed to create dispatch:",V),h(V.response?.data?.detail||"Failed to create dispatch")}finally{i(!1)}}},be=r?.role==="warehouse_admin";return e.jsx(Xt,{title:"Create New Dispatch",subtitle:"Create a dispatch from warehouse to shop",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),u]}),e.jsxs("form",{onSubmit:xe,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"From Warehouse *"}),e.jsxs("select",{value:x,onChange:O=>j(O.target.value),disabled:be,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 disabled:opacity-50",required:!0,children:[e.jsx("option",{value:"",children:"Select Warehouse"}),k.map(O=>e.jsx("option",{value:O.id,children:O.name},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"To Shop *"}),e.jsxs("select",{value:y,onChange:O=>f(O.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Shop"}),b.map(O=>e.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Dispatch Items"}),e.jsxs(le,{variant:"secondary",onClick:U,type:"button",disabled:!x,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-1",children:"add"}),"Add Item"]})]}),w.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:'No items added. Click "Add Item" to start.'}):e.jsx("div",{className:"space-y-3",children:w.map((O,V)=>{const se=O.available_stock||0,te=O.quantity||0;let N="bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700";return O.batch_id&&te>se?N="bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":O.batch_id&&te>0&&te>=se*.8&&(N="bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"),e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${N}`,children:[e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Medicine"}),e.jsx(Hi,{value:O.medicine_id,onChange:_=>Q(V,"medicine_id",_),options:T.map(_=>({value:_.id,label:_.name})),placeholder:"Type medicine name..."})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Brand"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-300 h-[38px] flex items-center",children:O.brand||"-"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Batch"}),e.jsxs("select",{value:O.batch_id,onChange:_=>Q(V,"batch_id",_.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 h-[38px]",required:!0,disabled:!O.medicine_id,children:[e.jsx("option",{value:"",children:"Select Batch"}),(O.available_batches||[]).map(_=>e.jsxs("option",{value:_.id,children:[_.batch_number," (Exp: ",new Date(_.expiry_date).toLocaleDateString(),") - Qty: ",_.quantity]},_.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",value:O.quantity,onChange:_=>Q(V,"quantity",parseInt(_.target.value)||0),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 h-[38px]",placeholder:"Qty",min:"1",required:!0}),O.available_stock!==void 0&&e.jsxs("div",{className:`text-xs mt-1 ${te>se?"text-red-600 font-bold":"text-slate-500"}`,children:["Max: ",O.available_stock,te>se&&" (Insufficient Stock!)"]})]})]}),e.jsx(le,{variant:"ghost",onClick:()=>M(V),type:"button",className:"!p-1.5 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},V)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:p,onChange:O=>g(O.target.value),rows:3,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",placeholder:"Add any special instructions or notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",onClick:()=>n("/dispatches"),type:"button",disabled:c,children:"Cancel"}),e.jsxs(le,{variant:"primary",type:"submit",disabled:c||w.length===0,loading:c,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"local_shipping"}),"Create Dispatch"]})]})]})]})})})}function lN(){const{id:n}=Zn(),r=Be(),{activeEntity:c}=Ta(),[i,u]=m.useState(null),[h,x]=m.useState(!0);m.useEffect(()=>{n&&j()},[n]);const j=async()=>{try{x(!0);const f=await Is.get(n);u(f.data)}catch(f){console.error(f)}finally{x(!1)}};if(h)return e.jsx("div",{className:"p-8",children:"Loading..."});if(!i)return e.jsx("div",{className:"p-8",children:"Dispatch not found"});const y=c?.type==="shop"&&["pending","created","in_transit"].includes(i.status.toLowerCase());return e.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Dispatch #",i.dispatch_number||i.id.slice(0,8)]}),e.jsxs("p",{className:"text-slate-500",children:["From ",i.warehouse_name," to ",i.shop_name]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{variant:i.status==="delivered"?"success":"primary",children:i.status.replace("_"," ")}),y&&e.jsx(le,{variant:"success",onClick:()=>r("/shops/stock",{state:{dispatchId:i.id}}),children:"Receive Stock"}),e.jsx(le,{variant:"ghost",onClick:()=>r(-1),children:"Back"})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase",children:"Quantity"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:i.items?.map((f,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-slate-900 dark:text-white font-medium",children:f.medicine_name}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:f.batch_number}),e.jsx("td",{className:"px-6 py-4 text-right font-mono text-slate-900 dark:text-white",children:f.quantity})]},p))})]})})]})}function nN(){const n=Be(),{isLoading:r}=ct(),{user:c}=Ie(),i=c?.role,[u,h]=m.useState([]),[x,j]=m.useState(!0),[y,f]=m.useState(""),[p,g]=m.useState(""),[w,A]=m.useState(1),[k,S]=m.useState(0),b=10,[E,T]=m.useState(!1),[D,z]=m.useState([]),[R,W]=m.useState(!1),[I,q]=m.useState({shop_id:"",warehouse_id:"",priority:"normal",items:[{medicine_id:"",quantity:1}]});m.useEffect(()=>{oe()},[w,p,y]),m.useEffect(()=>{E&&D.length===0&&vt.list({size:1e3}).then(G=>{z(G.data?.items||G.data||[])})},[E]);const oe=async()=>{try{j(!0);const G={page:w,size:b,status:y||void 0};p&&(G.search=p);const F=await Ps.list(G);h(F.data?.items||[]),S(F.data?.total||0)}catch(G){console.error(G),h([])}finally{j(!1)}},U=async G=>{try{await Ps.approve(G,{}),oe()}catch(F){console.error(F),alert("Failed to approve")}},M=async G=>{try{await Ps.reject(G),oe()}catch(F){console.error(F),alert("Failed to reject")}},{activeEntity:Q}=Ta(),he=Q?.type==="shop";m.useEffect(()=>{E&&he&&Q?.id&&q(G=>({...G,shop_id:Q.id}))},[E,he,Q]);const xe=async()=>{if(!I.shop_id||!I.warehouse_id||I.items.length===0){alert("Please fill all required fields");return}try{W(!0),await Ps.create({shop_id:I.shop_id,warehouse_id:I.warehouse_id,urgency:I.priority,items:I.items.filter(G=>G.medicine_id&&G.quantity>0).map(G=>({medicine_id:G.medicine_id,quantity_requested:G.quantity}))}),T(!1),q({shop_id:"",warehouse_id:"",priority:"normal",items:[{medicine_id:"",quantity:1}]}),oe()}catch(G){console.error(G),alert(G.response?.data?.detail||"Failed to create request")}finally{W(!1)}},be=()=>{q(G=>({...G,items:[...G.items,{medicine_id:"",quantity:1}]}))},O=G=>{q(F=>({...F,items:F.items.filter((P,pe)=>pe!==G)}))},V=(G,F,P)=>{q(pe=>({...pe,items:pe.items.map((fe,Oe)=>Oe===G?{...fe,[F]:P}:fe)}))},se={pending:u.filter(G=>G.status==="pending").length,approved:u.filter(G=>G.status==="approved").length,rejected:u.filter(G=>G.status==="rejected").length},te=[{header:"Request #",key:"request_number",render:G=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"shopping_cart"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:G.request_number||G.id.slice(0,8)}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(G.created_at).toLocaleDateString()})]})]})},{header:"Shop",key:"shop_name",render:G=>G.shop_name||"N/A"},{header:"Warehouse",key:"warehouse_name",render:G=>G.warehouse_name||"N/A"},{header:"Items",key:"total_items",render:G=>e.jsx("span",{className:"font-mono",children:G.total_items}),align:"center"},{header:"Priority",key:"priority",render:G=>e.jsx($e,{variant:G.priority==="urgent"||G.priority==="critical"?"error":G.priority==="high"?"warning":"secondary",children:G.priority||"Normal"}),align:"center"},{header:"Status",key:"status",render:G=>{const F=G.status==="approved"?"success":G.status==="rejected"?"error":G.status==="dispatched"?"info":"warning";return e.jsx($e,{variant:F,children:G.status})},align:"center"},{header:"Actions",key:"id",align:"right",render:G=>e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>_(G.id),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-slate-500",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"visibility"})}),G.status==="pending"&&(i==="warehouse_admin"||i==="warehouse_employee")&&e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"success",onClick:()=>U(G.id),className:"!py-1 !px-2 !text-xs",children:"Approve"}),e.jsx(le,{variant:"danger",onClick:()=>M(G.id),className:"!py-1 !px-2 !text-xs",children:"Reject"})]}),G.status==="approved"&&(i==="warehouse_admin"||i==="warehouse_employee")&&e.jsx(le,{variant:"primary",onClick:()=>n(`/dispatches/create?pr_id=${G.id}`),className:"!py-1 !px-2 !text-xs",children:"Create Dispatch"})]})}],[N,_]=m.useState(null),Y=G=>u.find(F=>F.id===G)?.status;return e.jsxs(me,{loading:r,children:[e.jsx(me.Header,{title:"Purchase Requests",subtitle:"Manage stock requests from shops to warehouses",actions:i!=="warehouse_admin"&&i!=="warehouse_employee"&&e.jsxs(le,{variant:"primary",onClick:()=>T(!0),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"New Request"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Requests",value:k,icon:"list_alt",onClick:()=>f(""),isActive:y===""}),e.jsx(ve,{title:"Pending",value:se.pending,icon:"pending",onClick:()=>f("pending"),isActive:y==="pending",trend:"neutral"}),e.jsx(ve,{title:"Approved",value:se.approved,icon:"check_circle",onClick:()=>f("approved"),isActive:y==="approved",trend:"up"}),e.jsx(ve,{title:"Rejected",value:se.rejected,icon:"cancel",onClick:()=>f("rejected"),isActive:y==="rejected",trend:"down"})]}),e.jsx(me.DataTable,{columns:te,data:u,loading:x,emptyMessage:"No purchase requests found.",pagination:{currentPage:w,totalPages:Math.ceil(k/b),onPageChange:A,totalItems:k,pageSize:b},headerSlot:e.jsx(me.ListControls,{title:"Request List",count:k,searchProps:{value:p,onChange:G=>{g(G),A(1)},placeholder:"Search requests..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:y,onChange:G=>{f(G.target.value),A(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"dispatched",children:"Dispatched"})]})}),embedded:!0})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-scaleIn border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"New Purchase Request"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create a stock request from a shop to warehouse"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[!he&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Shop *"}),e.jsx(Gd,{value:I.shop_id,onChange:G=>q(F=>({...F,shop_id:G})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Warehouse *"}),e.jsx(Hd,{value:I.warehouse_id,onChange:G=>q(F=>({...F,warehouse_id:G})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Priority"}),e.jsx(Bj,{value:I.priority,onChange:G=>q(F=>({...F,priority:G})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Items *"}),e.jsx("button",{onClick:be,className:"text-sm text-blue-600 font-medium hover:underline",children:"+ Add Item"})]}),e.jsx("div",{className:"space-y-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:I.items.map((G,F)=>e.jsxs("div",{className:"flex gap-2 items-start py-2 border-b border-slate-100 dark:border-slate-800 last:border-0",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Medicine"}),e.jsx(Hi,{value:G.medicine_id,onChange:P=>{const pe=D.find(fe=>fe.id===P);q(fe=>({...fe,items:fe.items.map((Oe,H)=>H===F?{...Oe,medicine_id:P,brand:pe?.brand}:Oe)}))},options:D.map(P=>({value:P.id,label:P.name})),placeholder:"Select Medicine",className:"w-full"})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Brand"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-300 h-[38px] flex items-center truncate",children:G.brand||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:G.quantity,onChange:P=>V(F,"quantity",parseInt(P.target.value)),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 h-[38px]",placeholder:"Qty"})]})]}),e.jsx("div",{className:"mt-6",children:I.items.length>1&&e.jsx("button",{onClick:()=>O(F),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg h-[38px] w-[38px] flex items-center justify-center transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})})})]},F))})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300",children:"Cancel"}),e.jsx(le,{variant:"primary",onClick:xe,disabled:R,children:R?"Creating...":"Create Request"})]})]})}),N&&e.jsx(rN,{requestId:N,onClose:()=>_(null),onApprove:()=>{_(null),U(N)},onReject:()=>{_(null),M(N)},canAction:Y(N)==="pending"&&(i==="warehouse_admin"||i==="warehouse_employee")})]})}function rN({requestId:n,onClose:r,onApprove:c,onReject:i,canAction:u}){const[h,x]=m.useState(null),[j,y]=m.useState(!0);return m.useEffect(()=>{Ps.get(n).then(f=>{x(f.data)}).catch(console.error).finally(()=>y(!1))},[n]),n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-scaleIn border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["#",h?.request_number||n.slice(0,8)]})]}),e.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"p-6",children:j?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"From Shop"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white text-lg",children:h.shop_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"To Warehouse"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white text-lg",children:h.warehouse_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"Status"}),e.jsx($e,{variant:h.status==="approved"?"success":h.status==="rejected"?"error":"warning",children:h.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"Date"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:new Date(h.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white mb-3",children:"Requested Items"}),e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qty"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:h.items?.map((f,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:f.medicine_name})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:f.quantity_requested})]},p))})]})})]})]}):e.jsx("div",{className:"text-center text-red-500",children:"Failed to load details"})}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Close"}),u&&h&&e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"danger",onClick:i,children:"Reject"}),e.jsx(le,{variant:"success",onClick:c,children:"Approve"})]})]})]})}):null}function iN({isOpen:n,onClose:r,medicineName:c,batches:i,onSelect:u}){const h=[...i].sort((p,g)=>new Date(p.expiry_date).getTime()-new Date(g.expiry_date).getTime()),x=p=>p?new Date(p).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"N/A",j=p=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(p),y=p=>new Date(p)<new Date,f=p=>{const g=new Date,A=new Date(p).getTime()-g.getTime(),k=Math.ceil(A/(1e3*60*60*24));return k>0&&k<=60};return e.jsx(Et,{isOpen:n,onClose:r,title:`Select Batch - ${c}`,maxWidth:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Multiple batches found for this medicine. Please select one to proceed."}),e.jsx("div",{className:"max-h-96 overflow-y-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Batch #"}),e.jsx("th",{className:"px-4 py-3",children:"Expiry"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"MRP"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Stock"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:h.map(p=>{const g=y(p.expiry_date),w=f(p.expiry_date);return e.jsxs("tr",{className:`
                                            bg-white dark:bg-slate-800 
                                            ${g?"opacity-60 bg-slate-50 dark:bg-slate-900":"hover:bg-slate-50 dark:hover:bg-slate-700"}
                                        `,children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:p.batch_number}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-medium ${g?"text-red-500":w?"text-amber-500":"text-slate-700 dark:text-slate-300"}`,children:x(p.expiry_date)}),g&&e.jsx("span",{className:"text-[10px] text-red-500 font-bold uppercase",children:"Expired"}),w&&!g&&e.jsx("span",{className:"text-[10px] text-amber-500 font-bold uppercase",children:"Expiring Soon"})]})}),e.jsx("td",{className:"px-4 py-3 text-right text-slate-700 dark:text-slate-300",children:j(p.mrp)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium text-slate-900 dark:text-white",children:p.quantity}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx(le,{size:"sm",variant:g?"secondary":"primary",disabled:g||p.quantity<=0,onClick:()=>u(p),children:"Select"})})]},p.id)})})]})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(le,{variant:"ghost",onClick:r,children:"Cancel"})})]})})}function oN({onSelect:n,onNewCustomer:r,selectedCustomer:c}){const[i,u]=m.useState(""),[h,x]=m.useState([]),[j,y]=m.useState(!1),[f,p]=m.useState(!1),g=m.useRef(null);m.useEffect(()=>{function k(S){g.current&&!g.current.contains(S.target)&&p(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[g]),m.useEffect(()=>{const k=setTimeout(()=>{i.length>=2?w():x([])},300);return()=>clearTimeout(k)},[i]);const w=async()=>{y(!0);try{const k=await Ul.list({search:i,size:5});x(k.data?.items||k.data||[]),p(!0)}catch(k){console.error(k)}finally{y(!1)}},A=k=>{n(k),p(!1),u("")};return c?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-800 flex items-center justify-center text-blue-600 dark:text-blue-300 font-bold",children:c.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:c.name}),e.jsx("p",{className:"text-xs text-slate-500",children:c.phone})]})]}),e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>n(null),children:"Change"})]}):e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Search customer by name or phone...",value:i,onChange:k=>{u(k.target.value),p(!0)},onFocus:()=>i.length>=2&&p(!0),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none"}),j&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"})]}),e.jsxs(le,{onClick:r,className:"whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-1",children:"person_add"}),"New"]})]}),f&&i.length>=2&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto",children:h.length>0?e.jsx("div",{className:"py-1",children:h.map(k=>e.jsxs("button",{onClick:()=>A(k),className:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center gap-3 border-b border-slate-50 dark:border-slate-700 last:border-b-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500 text-xs font-bold",children:k.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:k.name}),e.jsx("p",{className:"text-xs text-slate-500",children:k.phone})]}),k.loyalty_points&&k.loyalty_points>0&&e.jsxs("div",{className:"ml-auto text-xs text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:[k.loyalty_points," pts"]})]},k.id))}):e.jsxs("div",{className:"p-4 text-center text-slate-500 text-sm",children:[e.jsx("p",{children:"No customers found."}),e.jsx("button",{onClick:r,className:"text-blue-600 font-medium mt-1 hover:underline",children:"Create new customer?"})]})})]})}function cN({isOpen:n,onClose:r,onSuccess:c,shopId:i}){const[u,h]=m.useState(!1),[x,j]=m.useState({name:"",phone:"",email:"",address:"",city:"",pincode:""}),y=async f=>{f.preventDefault(),h(!0);try{console.log("Creating customer with shop_id:",i);const p=await Ul.create({...x,shop_id:i,customer_type:"regular"});Pe.success("Customer created successfully");const g=p.data?.data?.id||p.data?.id;c({id:g,...x,shop_id:i}),r()}catch(p){console.error("Failed to save customer:",p),console.error("Error response:",p.response?.data);const g=p.response?.data?.detail;let w="Failed to create customer";typeof g=="string"?w=g:Array.isArray(g)?w=g.map(A=>A.msg||A.message||"Validation error").join(", "):g&&(w=JSON.stringify(g)),Pe.error(w)}finally{h(!1)}};return e.jsx(Et,{isOpen:n,onClose:r,title:"Add New Customer",maxWidth:"md",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx(ue,{label:"Customer Name",value:x.name,onChange:f=>j({...x,name:f.target.value}),required:!0,placeholder:"Enter full name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Phone Number",value:x.phone,onChange:f=>j({...x,phone:f.target.value}),required:!0,placeholder:"10-digit mobile",type:"tel"}),e.jsx(ue,{label:"Email (Optional)",value:x.email,onChange:f=>j({...x,email:f.target.value}),placeholder:"email@example.com",type:"email"})]}),e.jsx(ue,{label:"Address",value:x.address,onChange:f=>j({...x,address:f.target.value}),placeholder:"Street, locality"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"City",value:x.city,onChange:f=>j({...x,city:f.target.value}),placeholder:"City"}),e.jsx(ue,{label:"Pincode",value:x.pincode,onChange:f=>j({...x,pincode:f.target.value}),placeholder:"Pincode"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(le,{type:"button",variant:"secondary",onClick:r,className:"flex-1",children:"Cancel"}),e.jsx(le,{type:"submit",variant:"primary",loading:u,className:"flex-1",children:"Create Customer"})]})]})})}const dN=({isOpen:n,onClose:r,title:c,children:i,width:u="w-96"})=>(m.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),n?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),e.jsxs("div",{className:`absolute inset-y-0 right-0 ${u} bg-white dark:bg-slate-800 shadow-xl flex flex-col`,children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:c}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i})]})]}):null);function uN(){const n=Be(),{activeEntity:r}=Ta(),{isLoading:c}=ct();if(m.useEffect(()=>{(!r||r.type!=="shop")&&n("/")},[r,n]),!r||r.type!=="shop")return null;if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-120px)]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})});const i=r.id,u=[{code:"cash",name:"Cash"},{code:"card",name:"Credit/Debit Card"},{code:"upi",name:"UPI / QR Code"},{code:"net_banking",name:"Net Banking"},{code:"cheque",name:"Cheque"},{code:"credit",name:"Credit (Postpaid)"}],[h,x]=m.useState([]),[j,y]=m.useState(""),[f,p]=m.useState([]),[g,w]=m.useState("cash"),[A,k]=m.useState(!1),[S,b]=m.useState(null),[E,T]=m.useState(!1),[D,z]=m.useState(!1),[R,W]=m.useState(null),[I,q]=m.useState([]),[oe,U]=m.useState(!1),[M,Q]=m.useState(null),[he,xe]=m.useState(""),[be,O]=m.useState(""),[V,se]=m.useState(""),[te,N]=m.useState(""),[_,Y]=m.useState(""),G=m.useRef(null);m.useEffect(()=>{const ie=setTimeout(()=>{j.length>=2?F():x([])},300);return()=>clearTimeout(ie)},[j]);const F=async()=>{try{const ie=new AbortController,_e=setTimeout(()=>ie.abort(),1e4),Ce=await vt.list({search:j,shop_id:i});clearTimeout(_e),x(Ce.data?.items||Ce.data||[])}catch(ie){console.error("Search error:",ie),ie.name==="AbortError"&&Pe.error("Search timed out. Please try again.")}},P=async ie=>{try{const Ye=((await vt.getBatches(ie.id)).data?.batches||[]).filter(gt=>gt.quantity>0);if(Ye.length===0){Pe.error("No stock available for this medicine");return}Ye.length===1?fe(ie,Ye[0]):(W(ie),q(Ye),z(!0))}catch(_e){console.error(_e),Pe.error("Failed to fetch batch details")}},pe=ie=>{R&&(fe(R,ie),z(!1),W(null),q([]))},fe=(ie,_e)=>{if(ie.is_prescription_required&&!S){Pe.warning("Prescription required! Please select a customer first.");return}const Ce=f.findIndex(Ye=>Ye.medicine.id===ie.id&&Ye.batch.id===_e.id);if(Ce>=0){if(f[Ce].quantity+1>_e.quantity){Pe.warning(`Only ${_e.quantity} units available in this batch`);return}const gt=[...f];gt[Ce].quantity+=1,p(gt)}else{const Ye={medicine:ie,batch:_e,quantity:1,discount:0,tax_rate:ie.gst_rate||12};p([...f,Ye])}y(""),x([]),G.current?.focus()},Oe=(ie,_e)=>{const Ce=f[ie];if(_e<=0){const Ye=f.filter((gt,ka)=>ka!==ie);p(Ye)}else{if(_e>Ce.batch.quantity){Pe.warning(`Only ${Ce.batch.quantity} units available`);return}const Ye=[...f];Ye[ie].quantity=_e,p(Ye)}},H=(ie,_e)=>{const Ce=[...f];Ce[ie].discount=Math.max(0,_e),p(Ce)},ge=ie=>{p(f.filter((_e,Ce)=>Ce!==ie))},ke=ie=>{const _e=ie.batch?.selling_price||ie.batch?.mrp||0;return isNaN(_e)?0:_e},de=ie=>{const _e=ke(ie)*(ie.quantity||0);return isNaN(_e)?0:_e},Ae=ie=>{const _e=ie.discount||0;return isNaN(_e)?0:_e},Ve=ie=>{const _e=de(ie)-Ae(ie);return isNaN(_e)?0:_e},Wa=ie=>{const _e=ie.tax_rate||0,Ce=Ve(ie)*(_e/100);return isNaN(Ce)?0:Ce},Da=()=>{const ie=f.reduce((_e,Ce)=>_e+de(Ce),0);return isNaN(ie)?0:ie},es=()=>{const ie=f.reduce((_e,Ce)=>_e+Ae(Ce),0);return isNaN(ie)?0:ie},Cs=()=>{const ie=Da()-es();return isNaN(ie)?0:ie},Ra=()=>{const ie=f.reduce((_e,Ce)=>_e+Wa(Ce),0);return isNaN(ie)?0:ie},qt=()=>{const ie=Cs()+Ra();return isNaN(ie)?0:ie},ts=()=>{const ie=parseFloat(he||"0")-qt();return isNaN(ie)?0:ie},At=ie=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(ie),Fi=()=>{const ie=qt(),_e=he&&!isNaN(parseFloat(he))?parseFloat(he):ie;if(ie-_e>1&&!S&&g!=="cash"&&g!=="credit")return{valid:!1,error:"Customer selection required for partial payment"};if(g==="credit")return S?_?{valid:!0}:{valid:!1,error:"Due date required for credit payment"}:{valid:!1,error:"Customer selection required for credit payment"};if(["upi","net_banking"].includes(g)&&!be)return{valid:!1,error:`${g==="upi"?"UPI":"Net Banking"} reference number required`};if(g==="card"&&!be)return{valid:!1,error:"Card transaction ID required"};if(g==="cheque"){if(!V)return{valid:!1,error:"Cheque number required"};if(!te)return{valid:!1,error:"Cheque date required"}}return{valid:!0}},Ot=async()=>{if(f.length===0)return Pe.warning("Cart is empty");const ie=Fi();if(!ie.valid){Pe.error(ie.error);return}if(f.some(Ce=>Ce.medicine.is_prescription_required)&&!S){Pe.error("Customer selection required for prescription medicines!");return}k(!0);try{const Ce=qt(),Ye=he&&!isNaN(parseFloat(he))?parseFloat(he):Ce,gt={shop_id:i,customer_id:S?.id,items:f.map(ba=>{const as=ke(ba)*ba.quantity,Tt=as>0?ba.discount/as*100:0,ya=ba.batch?.selling_price||ba.batch?.mrp||0,Dt=ba.tax_rate||12;return{medicine_id:ba.medicine.id,batch_id:ba.batch.id,quantity:Math.floor(ba.quantity)||1,unit_price:isNaN(ya)?0:ya,discount_percent:Number.isFinite(Tt)?Tt:0,tax_percent:isNaN(Dt)?12:Dt}}),payment_method:g,paid_amount:isNaN(Ye)?0:Ye,discount_percent:0,payment_reference:be||void 0,cheque_number:V||void 0,cheque_date:te||void 0,due_date:_||void 0};console.log("=== Invoice Payload ==="),console.log("Total from getTotal():",Ce),console.log("Paid Amount:",Ye),console.log("Items count:",gt.items.length),console.log("Full Payload:",JSON.stringify(gt,null,2)),console.log("======================");const ka=await Xs.create(gt),tr=ka.data?.data||ka.data;console.log("=== Invoice Response ==="),console.log("Full response:",ka.data),console.log("Invoice data:",tr),console.log("========================"),Q(tr),U(!0),p([]),b(null),xe(""),Pe.success("Invoice created successfully")}catch(Ce){console.error("Invoice creation error:",Ce);let Ye="Failed to create invoice";if(Ce.code==="ECONNABORTED"||Ce.message?.includes("timeout"))Ye="Request timed out. Please check your connection and try again.";else if(Ce.response?.data?.detail){const gt=Ce.response.data.detail;Array.isArray(gt)?Ye=gt.map(ka=>ka.msg||"Validation error").join(", "):typeof gt=="object"?Ye=gt.msg||JSON.stringify(gt):Ye=String(gt)}else Ce.response||(Ye="Network error. Please check your connection.");Pe.error(Ye)}finally{k(!1)}};return e.jsxs("div",{className:"flex h-[calc(100vh-120px)] gap-6",children:[e.jsx(iN,{isOpen:D,onClose:()=>z(!1),medicineName:R?.name||"",batches:I,onSelect:pe}),e.jsx(cN,{isOpen:E,onClose:()=>T(!1),onSuccess:ie=>{b(ie),Pe.success("Customer added to sale")},shopId:i}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"POS Billing"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"shopping_cart"}),f.length," items"]})]}),e.jsxs("div",{className:"relative z-[20]",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400",children:"search"}),e.jsx("input",{ref:G,type:"text",placeholder:"Search medicine by name, generic or brand...",value:j,onChange:ie=>y(ie.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-lg shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all",autoFocus:!0}),h.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-96 overflow-auto z-50",children:h.map(ie=>e.jsxs("button",{onClick:()=>P(ie),className:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 flex justify-between items-center border-b border-slate-50 dark:border-slate-700 last:border-b-0 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:ie.name}),e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400 font-medium",children:[ie.stock_quantity," in stock"]})]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:[ie.generic_name,ie.brand&&`  ${ie.brand}`,ie.manufacturer&&`  ${ie.manufacturer}`]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:At(ie.mrp)}),e.jsx("p",{className:"text-xs text-slate-400",children:"MRP"})]})]},ie.id))})]}),e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-sm",children:e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-500 uppercase w-32",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-24",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-24",children:"Disc"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-28",children:"Total"}),e.jsx("th",{className:"w-12"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:f.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-4 py-24 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"shopping_cart"})}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium mb-1",children:"Your cart is empty"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto",children:"Search for medicines above to add them to your billing cart."})]})}):f.map((ie,_e)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:ie.medicine.name}),e.jsx("p",{className:"text-xs text-slate-500",children:ie.medicine.generic_name})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:ie.batch.batch_number}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Exp: ",new Date(ie.batch.expiry_date).toLocaleDateString()]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>Oe(_e,ie.quantity-1),className:"w-7 h-7 rounded bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:"-"}),e.jsx("input",{type:"number",value:ie.quantity,onChange:Ce=>Oe(_e,parseInt(Ce.target.value)||1),className:"w-12 text-center font-medium border border-slate-200 dark:border-slate-700 rounded py-1 bg-transparent text-slate-900 dark:text-white text-sm"}),e.jsx("button",{onClick:()=>Oe(_e,ie.quantity+1),className:"w-7 h-7 rounded bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:"+"})]})}),e.jsxs("td",{className:"px-4 py-3 text-right text-slate-700 dark:text-slate-300 text-sm",children:[ie.batch.selling_price&&ie.batch.selling_price!==ie.batch.mrp&&e.jsx("div",{className:"text-xs text-slate-400 line-through mr-1 inline-block",children:At(ie.batch.mrp)}),At(ie.batch.selling_price||ie.batch.mrp)]}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("input",{type:"number",value:ie.discount||"",onChange:Ce=>H(_e,parseFloat(Ce.target.value)||0),placeholder:"0",className:"w-16 text-right border border-slate-200 dark:border-slate-700 rounded py-1 px-2 bg-transparent text-sm focus:ring-1 focus:ring-blue-500 outline-none"})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-slate-900 dark:text-white text-sm",children:At((ie.batch.selling_price||ie.batch.mrp)*ie.quantity-ie.discount)}),e.jsx("td",{className:"px-2",children:e.jsx("button",{onClick:()=>ge(_e),className:"text-slate-400 hover:text-red-500 rounded p-1 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})})]},`${ie.medicine.id}-${ie.batch.id}`))})]})})})]}),e.jsxs("div",{className:"w-96 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col shadow-sm max-h-[calc(100vh-120px)] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Checkout Details"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full font-medium",children:"Running"})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Customer"}),e.jsx(oN,{onSelect:b,selectedCustomer:S,onNewCustomer:()=>T(!0)})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:u?.map(ie=>e.jsx("button",{onClick:()=>w(ie.code),className:`py-2 px-3 rounded-lg text-sm font-medium border transition-all duration-200 ${g===ie.code?"bg-blue-600 border-blue-600 text-white shadow-md":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:ie.name})},ie.code))||[e.jsx("button",{onClick:()=>w("cash"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${g==="cash"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"Cash"},"cash"),e.jsx("button",{onClick:()=>w("card"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${g==="card"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"Card"},"card"),e.jsx("button",{onClick:()=>w("upi"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${g==="upi"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"UPI"},"upi")]})]}),["upi","card","net_banking"].includes(g)&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[g==="card"?"Transaction ID":"Reference Number"," *"]}),e.jsx("input",{type:"text",value:be,onChange:ie=>O(ie.target.value),placeholder:`Enter ${g==="card"?"transaction ID":"reference number"}`,className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),g==="cheque"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Cheque Number *"}),e.jsx("input",{type:"text",value:V,onChange:ie=>se(ie.target.value),placeholder:"Enter cheque number",className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Cheque Date *"}),e.jsx("input",{type:"date",value:te,onChange:ie=>N(ie.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),g==="credit"&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Due Date *"}),e.jsx("input",{type:"date",value:_,onChange:ie=>Y(ie.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[g==="cash"?"Amount Received":"Amount Paid",g==="credit"&&" (Optional)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-medium z-10 pointer-events-none",children:""}),e.jsx("input",{type:"number",value:he,onChange:ie=>xe(ie.target.value),placeholder:qt().toFixed(2),disabled:!["cash","credit"].includes(g),className:`w-full pl-8 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 text-lg font-semibold text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none ${["cash","credit"].includes(g)?"bg-slate-50 dark:bg-slate-900":"bg-slate-100 dark:bg-slate-900/50 cursor-not-allowed"}`})]}),g==="cash"&&parseFloat(he)>=qt()&&qt()>0&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 px-3 py-2 rounded-lg text-sm font-medium flex justify-between",children:[e.jsx("span",{children:"Change to Return:"}),e.jsx("span",{children:At(ts())})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"space-y-3 pt-6 border-t border-dashed border-slate-300 dark:border-slate-600",children:[e.jsxs("div",{className:"flex justify-between text-slate-600 dark:text-slate-400 text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:At(Da())})]}),es()>0&&e.jsxs("div",{className:"flex justify-between text-green-600 text-sm",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-medium",children:["-",At(es())]})]}),e.jsxs("div",{className:"flex justify-between text-slate-600 dark:text-slate-400 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:["GST (12%)",e.jsx("span",{className:"text-[10px] text-slate-400",children:"(Auto)"})]}),e.jsx("span",{className:"font-medium",children:At(Ra())})]}),e.jsxs("div",{className:"flex justify-between items-end pt-2",children:[e.jsx("span",{className:"text-slate-900 dark:text-white font-bold text-lg",children:"Total Amount"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:At(qt())})]})]}),e.jsx("button",{onClick:Ot,disabled:A||f.length===0,className:"mt-6 w-full py-4 bg-slate-900 hover:bg-slate-800 text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-xl active:scale-[0.98]",children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Complete Sale"}),e.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]}),e.jsx(dN,{isOpen:oe,onClose:()=>{U(!1),Q(null)},title:"Payment Receipt",width:"w-[400px]",children:M&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-4xl text-green-600 dark:text-green-400",children:"check_circle"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-slate-500",children:["Invoice #",M.invoice_number||"N/A"]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-500",children:"Customer"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:M.customer_id?S?.name:"Walk-in Customer"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-500",children:"Payment Method"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:String(M.payment_method||"").replace("_"," ")})]}),e.jsxs("div",{className:"pt-2 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Total Amount"}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:At(Number(M.total_amount)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Amount Paid"}),e.jsx("span",{className:"font-bold text-green-600",children:At(Number(M.paid_amount)||0)})]}),(Number(M.balance_amount)||0)>0&&e.jsxs("div",{className:"flex justify-between items-center text-lg text-red-600 font-bold",children:[e.jsx("span",{children:"Balance Due"}),e.jsx("span",{children:At(Number(M.balance_amount)||0)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center justify-center gap-2 px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-xl font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"print"}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>{U(!1),Q(null),p([]),b(null),xe(""),w("cash")},className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-blue-900/20",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"}),"New Sale"]})]})]})})]})}function mN(){const[n,r]=m.useState([]),[c,i]=m.useState(!0),[u,h]=m.useState("all"),[x,j]=m.useState("");m.useEffect(()=>{y()},[u,x]);const y=async()=>{i(!0);try{const b={size:50};u==="unread"&&(b.is_read=!1),u==="read"&&(b.is_read=!0),x&&(b.notification_type=x);const E=await vi.list(b);r(E.data?.items||E.data||[])}catch(b){console.error("Error loading notifications:",b)}finally{i(!1)}},f=async b=>{try{await vi.markRead(b),r(E=>E.map(T=>T.id===b?{...T,is_read:!0}:T))}catch(E){console.error("Error marking notification as read:",E)}},p=async()=>{try{await vi.markAllRead(),r(b=>b.map(E=>({...E,is_read:!0})))}catch(b){console.error("Error marking all as read:",b)}},g=async b=>{try{await vi.delete(b),r(E=>E.filter(T=>T.id!==b))}catch(E){console.error("Error deleting notification:",E)}},w=b=>{const E={low_stock:"",expiry_alert:"",order_received:"",dispatch_update:"",payment_received:"",system:"",default:""};return E[b]||E.default},A=b=>{const E={high:"#ef4444",medium:"#f59e0b",low:"#10b981"};return E[b]||E.medium},k=b=>{const E=new Date(b),D=new Date().getTime()-E.getTime();return D<6e4?"Just now":D<36e5?`${Math.floor(D/6e4)}m ago`:D<864e5?`${Math.floor(D/36e5)}h ago`:D<6048e5?`${Math.floor(D/864e5)}d ago`:E.toLocaleDateString()},S=Array.isArray(n)?n.filter(b=>!b.is_read).length:0;return e.jsxs("div",{className:"notifications-page",children:[e.jsx("style",{children:`
                .notifications-page {
                    padding: 24px;
                    max-width: 900px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-title {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                }
                .page-title h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .unread-badge {
                    background: #ef4444;
                    color: white;
                    padding: 4px 12px;
                    border-radius: 20px;
                    font-size: 13px;
                    font-weight: 600;
                }
                .btn-mark-all {
                    padding: 10px 20px;
                    background: #4a6cf7;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                }
                .btn-mark-all:hover {
                    background: #3b5ce4;
                }
                .btn-mark-all:disabled {
                    opacity: 0.5;
                    cursor: not-allowed;
                }
                .filters {
                    display: flex;
                    gap: 16px;
                    margin-bottom: 24px;
                }
                .filter-tabs {
                    display: flex;
                    background: #f0f4ff;
                    border-radius: 8px;
                    padding: 4px;
                }
                .filter-tab {
                    padding: 8px 16px;
                    border: none;
                    background: transparent;
                    border-radius: 6px;
                    cursor: pointer;
                    font-weight: 500;
                    color: #666;
                    transition: all 0.2s;
                }
                .filter-tab.active {
                    background: white;
                    color: #4a6cf7;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                }
                .type-filter {
                    padding: 8px 12px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                }
                .notifications-list {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                }
                .notification-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 16px;
                    display: flex;
                    gap: 16px;
                    transition: all 0.2s;
                    cursor: pointer;
                }
                .notification-card:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
                }
                .notification-card.unread {
                    border-left: 4px solid #4a6cf7;
                    background: #f8faff;
                }
                .notification-icon {
                    width: 48px;
                    height: 48px;
                    border-radius: 12px;
                    background: #f0f4ff;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    flex-shrink: 0;
                }
                .notification-content {
                    flex: 1;
                    min-width: 0;
                }
                .notification-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 4px;
                }
                .notification-title {
                    font-weight: 600;
                    color: #1a1a2e;
                    font-size: 15px;
                }
                .notification-time {
                    font-size: 12px;
                    color: #999;
                    white-space: nowrap;
                }
                .notification-message {
                    color: #666;
                    font-size: 14px;
                    line-height: 1.5;
                }
                .notification-meta {
                    display: flex;
                    gap: 12px;
                    margin-top: 8px;
                    align-items: center;
                }
                .priority-badge {
                    padding: 2px 8px;
                    border-radius: 4px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    color: white;
                }
                .type-badge {
                    padding: 2px 8px;
                    background: #e0e7ff;
                    color: #4a6cf7;
                    border-radius: 4px;
                    font-size: 11px;
                    font-weight: 500;
                }
                .notification-actions {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
                .action-btn {
                    padding: 6px 12px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 12px;
                    transition: all 0.2s;
                }
                .action-btn:hover {
                    background: #f5f5f5;
                }
                .action-btn.delete:hover {
                    background: #fee2e2;
                    border-color: #ef4444;
                    color: #ef4444;
                }
                .empty-state {
                    text-align: center;
                    padding: 60px 20px;
                    color: #999;
                }
                .empty-state-icon {
                    font-size: 64px;
                    margin-bottom: 16px;
                }
                .loading {
                    text-align: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"page-title",children:[e.jsx("h1",{children:" Notifications"}),S>0&&e.jsxs("span",{className:"unread-badge",children:[S," unread"]})]}),e.jsx("button",{className:"btn-mark-all",onClick:p,disabled:S===0,children:"Mark all as read"})]}),e.jsxs("div",{className:"filters",children:[e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:`filter-tab ${u==="all"?"active":""}`,onClick:()=>h("all"),children:"All"}),e.jsx("button",{className:`filter-tab ${u==="unread"?"active":""}`,onClick:()=>h("unread"),children:"Unread"}),e.jsx("button",{className:`filter-tab ${u==="read"?"active":""}`,onClick:()=>h("read"),children:"Read"})]}),e.jsxs("select",{className:"type-filter",value:x,onChange:b=>j(b.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"expiry_alert",children:"Expiry Alert"}),e.jsx("option",{value:"order_received",children:"Orders"}),e.jsx("option",{value:"dispatch_update",children:"Dispatch"}),e.jsx("option",{value:"payment_received",children:"Payments"}),e.jsx("option",{value:"system",children:"System"})]})]}),c?e.jsx("div",{className:"loading",children:"Loading notifications..."}):!Array.isArray(n)||n.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:""}),e.jsx("h3",{children:"No notifications"}),e.jsx("p",{children:"You're all caught up!"})]}):e.jsx("div",{className:"notifications-list",children:n.map(b=>e.jsxs("div",{className:`notification-card ${b.is_read?"":"unread"}`,onClick:()=>!b.is_read&&f(b.id),children:[e.jsx("div",{className:"notification-icon",children:w(b.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsxs("div",{className:"notification-header",children:[e.jsx("span",{className:"notification-title",children:b.title}),e.jsx("span",{className:"notification-time",children:k(b.created_at)})]}),e.jsx("p",{className:"notification-message",children:b.message}),e.jsxs("div",{className:"notification-meta",children:[e.jsx("span",{className:"priority-badge",style:{backgroundColor:A(b.priority)},children:b.priority}),e.jsx("span",{className:"type-badge",children:b.type.replace(/_/g," ")})]})]}),e.jsxs("div",{className:"notification-actions",onClick:E=>E.stopPropagation(),children:[!b.is_read&&e.jsx("button",{className:"action-btn",onClick:()=>f(b.id),children:" Read"}),e.jsx("button",{className:"action-btn delete",onClick:()=>g(b.id),children:""})]})]},b.id))})]})}function fd(){const{activeEntity:n,scope:r}=Ta(),[c,i]=m.useState("stock"),[u,h]=m.useState([]),[x,j]=m.useState([]),[y,f]=m.useState(!0),[p,g]=m.useState(""),[w,A]=m.useState(""),[k,S]=m.useState(""),[b,E]=m.useState(1),[T,D]=m.useState(0),z=20;m.useEffect(()=>{c==="stock"?R():W()},[c,b,p,w,k,n]);const R=async()=>{f(!0);try{let M;const Q={page:b,size:z};if(k&&(Q.search=k),n?.type==="warehouse")M=await _t.getStock(n.id,Q);else if(n?.type==="shop")M=await Ct.getStock(n.id,Q);else if(r==="global")if(p)M=await _t.getStock(p,Q);else{j([]),D(0),f(!1);return}M?.data&&(j(M.data.items||[]),D(M.data.total||0))}catch(M){console.error("Failed to fetch stock:",M),j([])}finally{f(!1)}},W=async()=>{try{f(!0);const M={page:b,size:z};n?.type==="warehouse"?M.warehouse_id=n.id:n?.type==="shop"?M.shop_id=n.id:r==="global"&&p&&(M.warehouse_id=p),w&&(M.movement_type=w);const Q=await Bl.getMovements(M);let he=[];Q.data&&(Array.isArray(Q.data)?he=Q.data:Q.data.items&&Array.isArray(Q.data.items)?he=Q.data.items:Q.data.data&&Array.isArray(Q.data.data)&&(he=Q.data.data)),h(he),D(Q.data?.total||he.length)}catch(M){console.error("Failed to fetch movements:",M),h([]),D(0)}finally{f(!1)}},I=M=>{switch(M){case"in":return"success";case"out":return"error";case"transfer":return"info";case"adjustment":return"warning";default:return"secondary"}},q=M=>{switch(M){case"in":return"login";case"out":return"logout";case"transfer":return"swap_horiz";case"adjustment":return"tune";default:return"history"}},oe=[{header:"Medicine Name",key:"medicine_name",render:M=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:M.medicine_name}),e.jsx("p",{className:"text-[11px] text-slate-500",children:M.medicine_code||"N/A"})]})},{header:"Brand",key:"brand",className:"hidden md:table-cell",render:M=>e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:M.brand||"-"})},{header:"Batch Info",key:"batch_number",render:M=>e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-xs bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:M.batch_number}),M.expiry_date&&e.jsxs("p",{className:"text-[10px] text-slate-500 mt-0.5",children:["Exp: ",new Date(M.expiry_date).toLocaleDateString()]})]})},{header:"Location",key:"rack_name",className:"hidden lg:table-cell",render:M=>e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:M.rack_name||M.rack_number?e.jsxs("span",{children:[M.rack_name," ",M.rack_number?`(${M.rack_number})`:""]}):e.jsx("span",{className:"italic text-slate-400",children:"No Rack"})})},{header:"Quantity",key:"quantity",align:"right",render:M=>e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:M.quantity.toLocaleString()})}],U=[{header:"Details",key:"id",render:M=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[11px] font-mono text-slate-500",children:M.reference_type.toUpperCase()}),e.jsxs("span",{className:"text-[11px] text-slate-400",children:["By: ",M.performed_by||"System"]})]})},{header:"Product",key:"medicine_name",render:M=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:M.medicine_name}),e.jsxs("p",{className:"text-[11px] text-slate-500",children:["Batch: ",M.batch_number]})]})},{header:"Type",key:"movement_type",render:M=>e.jsxs($e,{variant:I(M.movement_type),className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:q(M.movement_type)}),e.jsx("span",{className:"capitalize",children:M.movement_type})]})},{header:"Qty",key:"quantity",align:"right",render:M=>e.jsxs("span",{className:`font-mono text-sm font-medium ${M.movement_type==="out"?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[M.movement_type==="out"?"-":"+",Math.abs(M.quantity)]})},{header:"Date",key:"created_at",align:"right",render:M=>e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:new Date(M.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-[10px] text-slate-400",children:new Date(M.created_at).toLocaleTimeString()})]})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Inventory Management",subtitle:`Manage stock and view history ${r==="global"?"across all locations":n?.name?`for ${n.name}`:""}`,actions:e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>{i("stock"),E(1)},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${c==="stock"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Current Stock"}),e.jsx("button",{onClick:()=>{i("movements"),E(1)},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${c==="movements"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"History"})]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:c==="stock"?"Total Stock Items":"Total Movements",value:T,icon:c==="stock"?"inventory_2":"history",onClick:()=>{},isActive:!0}),e.jsx(ve,{title:"Stock In",value:"-",icon:"login",trend:"neutral"}),e.jsx(ve,{title:"Stock Out",value:"-",icon:"logout",trend:"neutral"}),e.jsx(ve,{title:"Transfers",value:"-",icon:"swap_horiz",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:c==="stock"?oe:U,data:c==="stock"?x:u,loading:y,emptyMessage:c==="stock"?"No stock found in this location.":"No stock movements found.",pagination:{currentPage:b,totalPages:Math.ceil(T/z),onPageChange:E,totalItems:T,pageSize:z},headerSlot:e.jsx(me.ListControls,{title:c==="stock"?"Stock List":"Movement List",count:T,searchProps:c==="stock"?{value:k,onChange:M=>{S(M),E(1)},placeholder:"Search medicines..."}:void 0,actions:e.jsxs("div",{className:"flex items-center gap-2",children:[r==="global"&&e.jsxs("select",{value:p,onChange:M=>{g(M.target.value),E(1)},className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),e.jsx("option",{value:"WH001",children:"Central Warehouse"})]}),c==="movements"&&e.jsxs("select",{value:w,onChange:M=>{A(M.target.value),E(1)},className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"in",children:"Stock In"}),e.jsx("option",{value:"out",children:"Stock Out"}),e.jsx("option",{value:"transfer",children:"Transfer"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]})]}),embedded:!0})})]})}function xN(){const n=Be(),{refresh:r}=ct(),[c,i]=m.useState({name:"",code:"",address:"",city:"",state:"",country:"India",pincode:"",phone:"",email:"",capacity:1e4}),[u,h]=m.useState(!1),[x,j]=m.useState(""),y=async f=>{if(f.preventDefault(),j(""),!c.name||!c.code||!c.city||!c.state){j("Please fill in all required fields (Name, Code, City, State)");return}h(!0);try{console.log("Sending warehouse data:",c),await _t.create(c),await r(),n("/warehouses")}catch(p){console.error("Failed to create warehouse:",p),j(p.response?.data?.detail||"Failed to create warehouse")}finally{h(!1)}};return e.jsx(Xt,{title:"Add New Warehouse",description:"Create a new distribution center",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:y,children:e.jsxs(Xe,{className:"space-y-6",children:[x&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:x}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Warehouse Name *",value:c.name,onChange:f=>i({...c,name:f.target.value}),placeholder:"Main Warehouse",required:!0}),e.jsx(ue,{label:"Code *",value:c.code,onChange:f=>i({...c,code:f.target.value.toUpperCase()}),placeholder:"WH001",required:!0,className:"font-mono"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:c.address,onChange:f=>i({...c,address:f.target.value}),className:"input min-h-[80px] py-2",placeholder:"Street address..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"City *",value:c.city,onChange:f=>i({...c,city:f.target.value}),placeholder:"Chennai",required:!0}),e.jsx(ue,{label:"State *",value:c.state,onChange:f=>i({...c,state:f.target.value}),placeholder:"Tamil Nadu",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ue,{label:"Pincode",value:c.pincode,onChange:f=>i({...c,pincode:f.target.value}),placeholder:"600001"}),e.jsx(ue,{label:"Phone",type:"tel",value:c.phone,onChange:f=>i({...c,phone:f.target.value}),placeholder:"+91 9876543210"}),e.jsx(ue,{label:"Capacity",type:"number",value:c.capacity,onChange:f=>i({...c,capacity:parseInt(f.target.value)||0}),placeholder:"10000"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(ue,{label:"Email",type:"email",value:c.email,onChange:f=>i({...c,email:f.target.value}),placeholder:"warehouse@example.com"})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>n("/warehouses"),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:u,children:u?"Creating...":"Create Warehouse"})]})]})})})})}function hN(){const n=Be(),{id:r}=Zn(),[c,i]=m.useState(!0),[u,h]=m.useState({name:"",code:"",address:"",city:"",state:"",country:"India",pincode:"",phone:"",email:"",capacity:1e4}),[x,j]=m.useState(!1),[y,f]=m.useState("");m.useEffect(()=>{p()},[r]);const p=async()=>{try{const A=(await _t.get(r)).data;h({name:A.name||"",code:A.code||"",address:A.address||"",city:A.city||"",state:A.state||"",country:A.country||"India",pincode:A.pincode||"",phone:A.phone||"",email:A.email||"",capacity:A.capacity||1e4})}catch(w){console.error("Failed to load warehouse:",w),f("Failed to load warehouse details")}finally{i(!1)}},g=async w=>{if(w.preventDefault(),f(""),!u.name||!u.code||!u.city||!u.state){f("Please fill in all required fields");return}j(!0);try{await _t.update(r,u),n("/warehouses")}catch(A){console.error("Failed to update warehouse:",A),f(A.response?.data?.detail||"Failed to update warehouse")}finally{j(!1)}};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):e.jsx(Xt,{title:"Edit Warehouse",description:"Update warehouse information",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:g,children:e.jsxs(Xe,{className:"space-y-6",children:[y&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:y}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Warehouse Name *",value:u.name,onChange:w=>h({...u,name:w.target.value}),required:!0}),e.jsx(ue,{label:"Code *",value:u.code,className:"font-mono bg-slate-100 dark:bg-slate-800",disabled:!0,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:u.address,onChange:w=>h({...u,address:w.target.value}),className:"input min-h-[80px] py-2",placeholder:"Address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"City *",value:u.city,onChange:w=>h({...u,city:w.target.value}),required:!0}),e.jsx(ue,{label:"State *",value:u.state,onChange:w=>h({...u,state:w.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ue,{label:"Pincode",value:u.pincode,onChange:w=>h({...u,pincode:w.target.value})}),e.jsx(ue,{label:"Phone",type:"tel",value:u.phone,onChange:w=>h({...u,phone:w.target.value})}),e.jsx(ue,{label:"Capacity",type:"number",value:u.capacity,onChange:w=>h({...u,capacity:parseInt(w.target.value)||0})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(ue,{label:"Email",type:"email",value:u.email,onChange:w=>h({...u,email:w.target.value})})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>n("/warehouses"),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:x,children:x?"Updating...":"Update Warehouse"})]})]})})})})}function pN(){const[n,r]=m.useState([]),[c,i]=m.useState([]),[u,h]=m.useState([]),[x,j]=m.useState(null),[y,f]=m.useState([]),[p,g]=m.useState(!0),[w,A]=m.useState(!1);m.useEffect(()=>{k()},[]),m.useEffect(()=>{if(x){const E=c.filter(T=>T.warehouse_id===x.id);f(E)}else f([])},[x,c]),m.useEffect(()=>{h(c.filter(E=>!E.warehouse_id))},[c]);const k=async()=>{try{g(!0);const[E,T]=await Promise.all([_t.list({size:100}),Ct.list({size:100})]);r(E.data.items||[]),i(T.data.items||[])}catch(E){console.error("Failed to load data:",E)}finally{g(!1)}},S=async E=>{if(x){A(!0);try{await Ct.update(E,{warehouse_id:x.id}),await k()}catch(T){console.error("Failed to assign shop:",T)}finally{A(!1)}}},b=async E=>{A(!0);try{await Ct.update(E,{warehouse_id:null}),await k()}catch(T){console.error("Failed to unassign shop:",T)}finally{A(!1)}};return p?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"spinner"})}):e.jsx(Xt,{title:"Warehouse  Shop Mapping",description:"Assign medical shops to warehouses",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(Xe,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"warehouse"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:n.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total Warehouses"})]})]}),e.jsxs(Xe,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:c.filter(E=>E.warehouse_id).length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Assigned Shops"})]})]}),e.jsxs(Xe,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:u.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Unassigned Shops"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Xe,{title:"Select Warehouse",icon:"warehouse",padding:"0",children:e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-[500px] overflow-auto",children:n.map(E=>e.jsx("button",{onClick:()=>j(E),className:`w-full p-4 text-left transition-colors ${x?.id===E.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-primary":"hover:bg-slate-50 dark:hover:bg-slate-800/50 border-l-4 border-transparent"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:E.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[E.code,"  ",E.city]})]}),e.jsxs($e,{variant:"info",children:[E.shop_count||0," shops"]})]})},E.id))})}),e.jsx(Xe,{title:x?`Shops in ${x.name}`:"Select a Warehouse",icon:"storefront",padding:"0",children:x?e.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50",children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-3",children:["Assigned Shops (",y.length,")"]}),y.length===0?e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No shops assigned yet"}):e.jsx("div",{className:"space-y-2",children:y.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:E.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[E.code,"  ",E.city]})]}),e.jsx(le,{variant:"secondary",onClick:()=>b(E.id),disabled:w,className:"!p-1.5 !h-8 text-red-500 hover:text-red-600 hover:bg-red-50",title:"Unassign Shop",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"link_off"})})]},E.id))})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-3",children:["Available to Assign (",u.length,")"]}),u.length===0?e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"All shops are assigned"}):e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-auto pr-2",children:u.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/30 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:E.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[E.code,"  ",E.city]})]}),e.jsxs(le,{variant:"primary",onClick:()=>S(E.id),disabled:w,className:"!px-3 !py-1 !text-xs gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:14},children:"link"}),"Assign"]})]},E.id))})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"arrow_back"}),e.jsx("p",{children:"Select a warehouse to manage shops"})]})})]})]})})}function fN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState([]),[j,y]=m.useState(!0),[f,p]=m.useState(!1),[g,w]=m.useState(""),[A]=m.useState(""),[k,S]=m.useState({rack_name:"",rack_number:"",warehouse_id:""}),[b,E]=m.useState(!1),[T,D]=m.useState(""),z=15,[R,W]=m.useState(1);m.useEffect(()=>{n&&!r("racks.view")&&c("/")},[n,c,r]),m.useEffect(()=>{I()},[]);const I=async()=>{y(!0);try{const[N,_]=await Promise.all([_t.list({size:100}),Ai.list({size:100})]);x(N.data.items?.map(Y=>({id:Y.id,name:Y.name}))||[]),u(_.data.items||[])}catch(N){console.error("Failed to load data:",N)}finally{y(!1)}},q=()=>{S({rack_name:"",rack_number:"",warehouse_id:""}),D(""),p(!0)},oe=async N=>{if(N.preventDefault(),D(""),!k.rack_name||!k.rack_number){D("Rack Name and Rack Number are required");return}E(!0);try{await Ai.create({rack_name:k.rack_name,rack_number:k.rack_number.toUpperCase(),warehouse_id:k.warehouse_id||void 0}),await I(),p(!1)}catch(_){D(_.response?.data?.detail||"Failed to add rack")}finally{E(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=N=>{he(N),M(!0)},be=async()=>{if(Q)try{await Ai.delete(Q.id),window.toast?.success("Rack deleted successfully"),await I()}catch(N){console.error("Failed to delete rack:",N),window.toast?.error(N.response?.data?.detail||"Failed to delete rack")}finally{M(!1),he(null)}},O=i.filter(N=>{const _=!g||N.rack_name.toLowerCase().includes(g.toLowerCase())||N.rack_number.toLowerCase().includes(g.toLowerCase()),Y=!A||N.warehouse_id===A;return _&&Y}),V={total:i.length,warehouses:new Set(i.map(N=>N.warehouse_id).filter(Boolean)).size},se=[{header:"Rack Name",key:"rack_name",render:N=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600 text-[18px]",children:"view_column"})}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:N.rack_name})]})},{header:"Rack Number",key:"rack_number",render:N=>e.jsx("span",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:N.rack_number})},{header:"Warehouse",key:"warehouse_name",render:N=>e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:N.warehouse_name||"-"})},{header:"Created",key:"created_at",render:N=>e.jsx("span",{className:"text-sm text-slate-500",children:new Date(N.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:N=>e.jsx("div",{className:"flex justify-end gap-1",children:r("racks.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>xe(N),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})})}],te=O.slice((R-1)*z,R*z);return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Rack Master",subtitle:"Manage racks for physical stock location.",actions:r("racks.create")&&e.jsx(le,{variant:"primary",onClick:q,className:"bg-purple-600 hover:bg-purple-700 text-white shadow-purple-500/30",icon:"add",children:"Add Rack"})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Racks",value:V.total,icon:"view_column",isActive:!0}),e.jsx(ve,{title:"Warehouses",value:V.warehouses,icon:"warehouse",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:se,data:te,loading:j,emptyMessage:"No racks found.",pagination:{currentPage:R,totalPages:Math.ceil(O.length/z),onPageChange:W,totalItems:O.length,pageSize:z},headerSlot:e.jsx(me.ListControls,{title:"Rack List",count:O.length,searchProps:{value:g,onChange:N=>{w(N),W(1)},placeholder:"Search racks..."},embedded:!0})}),e.jsx(Et,{isOpen:f,onClose:()=>p(!1),title:"Add New Rack",size:"md",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[T&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:T}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Rack Name *",value:k.rack_name,onChange:N=>S({...k,rack_name:N.target.value}),placeholder:"e.g., Rack A1",required:!0}),e.jsx(ue,{label:"Rack Number *",value:k.rack_number,onChange:N=>S({...k,rack_number:N.target.value.toUpperCase()}),placeholder:"e.g., RA1",required:!0,className:"font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Warehouse"}),e.jsxs("select",{value:k.warehouse_id,onChange:N=>S({...k,warehouse_id:N.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),h.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>p(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:b,className:"bg-purple-600 hover:bg-purple-700",children:b?"Adding...":"Add Rack"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Rack",message:`Are you sure you want to delete "${Q?.rack_name}"? This action cannot be undone.`,confirmText:"Delete Rack"})]})}function $n(){const n=ga(),{activeEntity:r,scope:c}=Ta(),{isLoading:i}=ct(),u=()=>{const T=n.pathname;return T.includes("/expiry")?"expiry":T.includes("/dead-stock")?"dead-stock":T.includes("/shop")?"shop":"warehouse"},[h,x]=m.useState(u()),[j,y]=m.useState([]),[f,p]=m.useState(!0),[g,w]=m.useState(""),[A,k]=m.useState("");m.useEffect(()=>{x(u())},[n.pathname]),m.useEffect(()=>{r?.type==="warehouse"?w(r.id):r?.type==="shop"&&k(r.id)},[r]),m.useEffect(()=>{S()},[h,g,A,r]);const S=async()=>{p(!0);try{const z=((await Bl.getAlerts()).data?.alerts||[]).map(R=>({id:R.id||Math.random().toString(),medicine_name:R.medicine_name,brand:R.brand,batch_number:R.batch_number||"N/A",quantity:R.current_quantity||0,location_type:R.location_type||"warehouse",location_name:R.location_name||"Unknown",expiry_date:R.expiry_date||"",days_to_expiry:R.days_to_expiry||0,last_movement:R.last_movement_date}));y(z)}catch(T){console.error("Failed to load stock data:",T),y([])}finally{p(!1)}},b=[{id:"warehouse",label:"Warehouse Stock",icon:"warehouse",description:"All warehouse inventory"},{id:"shop",label:"Shop Stock (Derived)",icon:"storefront",description:"Stock derived from dispatches"},{id:"expiry",label:"Expiry Monitoring",icon:"schedule",description:"Items expiring soon"},{id:"dead-stock",label:"Dead Stock",icon:"block",description:"No movement in 90+ days"}],E={totalItems:j.length,totalQuantity:j.reduce((T,D)=>T+D.quantity,0),expiringSoon:j.filter(T=>T.days_to_expiry>0&&T.days_to_expiry<=30).length,expired:j.filter(T=>T.days_to_expiry<=0).length};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-2 py-1 text-xs font-bold bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:"READ-ONLY"})}),e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Inventory Oversight"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Global view of all inventory across warehouses and shops. This is a read-only view for Super Admin oversight."}),r&&c!=="global"&&e.jsxs("div",{className:"mt-2 text-sm text-slate-500",children:["Viewing as: ",e.jsx("span",{className:"font-semibold",children:r.name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"inventory_2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:E.totalItems}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Items"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"package_2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:E.totalQuantity.toLocaleString()}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Quantity"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-orange-200 dark:border-orange-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-orange-600",children:"schedule"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:E.expiringSoon}),e.jsx("p",{className:"text-xs text-slate-500",children:"Expiring Soon"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:E.expired}),e.jsx("p",{className:"text-xs text-slate-500",children:"Expired"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:b.map(T=>e.jsxs("button",{onClick:()=>x(T.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${h===T.id?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:T.icon}),T.label]},T.id))})}),e.jsx("div",{className:"px-6 py-3 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.find(T=>T.id===h)?.description})}),e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[(h==="warehouse"||h==="expiry"||h==="dead-stock")&&e.jsx(Hd,{value:g,onChange:w,placeholder:"All Warehouses",className:"w-[200px]",disabled:c!=="global"&&r?.type==="warehouse"}),h==="shop"&&e.jsx(Gd,{value:A,onChange:k,placeholder:"All Shops",className:"w-[200px]",disabled:c!=="global"&&r?.type==="shop"}),e.jsx("button",{onClick:S,className:"px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"p-6",children:f?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):j.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:b.find(T=>T.id===h)?.icon}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No data available"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:h==="dead-stock"?"No dead stock items found. All items have recent movement.":"No inventory data matches your filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Brand"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase",children:"Quantity"}),(h==="expiry"||h==="dead-stock")&&e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-500 uppercase",children:h==="expiry"?"Expiry":"Last Movement"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:j.map((T,D)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${D*20}ms`},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:T.medicine_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:T.brand||"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:T.batch_number})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-slate-400",children:T.location_type==="warehouse"?"warehouse":"storefront"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:T.location_name})]})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono font-medium text-slate-900 dark:text-white",children:T.quantity.toLocaleString()}),h==="expiry"&&e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.days_to_expiry<=0?"bg-red-100 text-red-700":T.days_to_expiry<=30?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:T.days_to_expiry<=0?"Expired":`${T.days_to_expiry} days`})}),h==="dead-stock"&&e.jsx("td",{className:"px-4 py-3 text-center text-sm text-slate-500",children:T.last_movement?new Date(T.last_movement).toLocaleDateString():"Never"})]},T.id))})]})})}),e.jsx("div",{className:"px-6 py-4 bg-purple-50 dark:bg-purple-900/10 border-t border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 dark:text-purple-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"info"}),e.jsx("p",{className:"text-sm",children:"This is a read-only oversight view. To make inventory adjustments, use the operational modules."})]})})]})]})}function gN(){const n=Be(),{activeEntity:r}=Ta(),[c,i]=m.useState([]),[u,h]=m.useState([]),[x,j]=m.useState(!1),[y,f]=m.useState(""),[p,g]=m.useState(""),[w,A]=m.useState("decrease"),[k,S]=m.useState(""),[b,E]=m.useState(""),[T,D]=m.useState(!1),[z,R]=m.useState({type:"",text:""});m.useEffect(()=>{W()},[]),m.useEffect(()=>{y?(I(y),g("")):(h([]),j(!1))},[y]);const W=async()=>{try{const U=await vt.list({size:100});i(U.data.items||U.data)}catch(U){console.error("Error loading medicines:",U)}},I=async U=>{j(!0);try{console.log("Loading batches for medicine:",U);const M=await vt.getBatches(U);console.log("Batches API response:",M.data);const Q=M.data?.batches||[];console.log("Extracted batches:",Q),h(Q),Q.length===0?R({type:"error",text:"No batches found for this medicine. Please add stock first."}):z.type==="error"&&z.text.includes("No batches")&&R({type:"",text:""})}catch(M){console.error("Error loading batches:",M),console.error("Error details:",M.response?.data),h([]),R({type:"error",text:M.response?.data?.detail||"Failed to load batches"})}finally{j(!1)}},q=async U=>{if(U.preventDefault(),!y||!p||!k||!b){R({type:"error",text:"Please fill all required fields"});return}D(!0),R({type:"",text:""});try{await Bl.adjustStock({medicine_id:y,batch_id:p,adjustment_type:w,quantity:parseInt(k),reason:b}),R({type:"success",text:"Stock adjusted successfully"}),S(""),E(""),I(y)}catch(M){R({type:"error",text:M.response?.data?.detail||"Failed to adjust stock"})}finally{D(!1)}},oe=u.find(U=>U.id===p);return e.jsxs("div",{className:"p-6 lg:p-8 max-w-4xl mx-auto animate-fadeIn",children:[e.jsxs("button",{onClick:()=>n("/inventory"),className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white mb-6 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back"}),e.jsx("span",{children:"Back to Inventory"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white",children:" Stock Adjustment"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Correct stock levels for damages, expiry, or corrections."}),r&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-sm font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:r.type==="warehouse"?"warehouse":"storefront"}),e.jsx("span",{children:r.name})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[z.text&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-start gap-3 ${z.type==="error"?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:z.type==="error"?"error":"check_circle"}),e.jsx("p",{children:z.text})]}),e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(Hi,{label:"Medicine *",value:y,onChange:U=>f(U),required:!0,options:c.map(U=>({value:U.id,label:`${U.name} ${U.brand?`(${U.brand})`:""}`})),placeholder:"Select Medicine"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Batch *"}),e.jsxs("select",{value:p,onChange:U=>g(U.target.value),required:!0,disabled:!y||x,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50 disabled:opacity-50",children:[e.jsx("option",{value:"",children:y?x?"Loading batches...":u.length===0?"No batches available":"Select Batch":"Select medicine first"}),u.map(U=>e.jsxs("option",{value:U.id,children:[U.batch_number," (Stock: ",U.quantity,", Exp: ",new Date(U.expiry_date).toLocaleDateString(),")"]},U.id))]}),y&&u.length===0&&!x&&e.jsxs("p",{className:"mt-2 text-sm text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"info"}),"No batches found for this medicine. Add stock first."]})]})]}),oe&&e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Current Stock"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:oe.quantity})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Expiry Date"}),e.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mt-1",children:oe.expiry_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Adjustment Type"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl",children:[e.jsx("button",{type:"button",onClick:()=>A("decrease"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${w==="decrease"?"bg-white dark:bg-slate-700 text-red-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Decrease (-)"}),e.jsx("button",{type:"button",onClick:()=>A("increase"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${w==="increase"?"bg-white dark:bg-slate-700 text-green-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Increase (+)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quantity to Adjust *"}),e.jsx("input",{type:"number",value:k,onChange:U=>S(U.target.value),min:"1",placeholder:"Example: 5",required:!0,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Reason for Adjustment *"}),e.jsx("textarea",{value:b,onChange:U=>E(U.target.value),placeholder:"e.g. Broken in transit, Expired stock removal...",required:!0,rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50 resize-none"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:T,className:`w-full py-3 rounded-xl font-semibold text-white shadow-lg shadow-blue-500/20 transition-all active:scale-[0.98] ${T?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"}`,children:T?"Processing Adjustment...":"Confirm Adjustment"})})]})]})]})}function bN(){const[n,r]=m.useState([]),[c,i]=m.useState(!0),[u,h]=m.useState({total:0,creates:0,updates:0,deletes:0}),[x,j]=m.useState(""),[y,f]=m.useState(""),[p,g]=m.useState("");m.useEffect(()=>{w()},[x,y]);const w=async()=>{i(!0);try{const[b,E]=await Promise.all([g0.list({size:100,action:x||void 0,entity_type:y||void 0}),g0.getStats()]);r(b.data.items?.map(T=>({...T,timestamp:T.created_at,details:T.new_values||""}))||[]),h(E.data)}catch(b){console.error("Failed to load audit logs:",b)}finally{i(!1)}},A=b=>{switch(b?.toUpperCase()){case"CREATE":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"UPDATE":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"DELETE":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"LOGIN":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"LOGOUT":return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400"}},k=b=>{switch(b?.toLowerCase()){case"warehouse":return"warehouse";case"shop":return"storefront";case"medicine":return"medication";case"user":return"person";case"invoice":return"receipt";case"dispatch":return"local_shipping";case"batch":return"inventory";case"rack":return"view_column";default:return"description"}},S=n.filter(b=>!p||b.entity_name?.toLowerCase().includes(p.toLowerCase())||b.user_name?.toLowerCase().includes(p.toLowerCase()));return e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Audit Logs"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Complete audit trail of all system activities. Track who did what and when."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600",children:"history"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.total}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Logs"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-green-200 dark:border-green-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"add_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.creates}),e.jsx("p",{className:"text-xs text-slate-500",children:"Creates"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"edit"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.updates}),e.jsx("p",{className:"text-xs text-slate-500",children:"Updates"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"delete"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.deletes}),e.jsx("p",{className:"text-xs text-slate-500",children:"Deletes"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:p,onChange:b=>g(b.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})}),e.jsxs("select",{value:x,onChange:b=>j(b.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"CREATE",children:"Create"}),e.jsx("option",{value:"UPDATE",children:"Update"}),e.jsx("option",{value:"DELETE",children:"Delete"})]}),e.jsxs("select",{value:y,onChange:b=>f(b.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Entities"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"shop",children:"Shop"}),e.jsx("option",{value:"medicine",children:"Medicine"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"invoice",children:"Invoice"}),e.jsx("option",{value:"dispatch",children:"Dispatch"}),e.jsx("option",{value:"rack",children:"Rack"})]}),e.jsx("button",{onClick:w,className:"p-2.5 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Refresh",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:c?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):S.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"history"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No logs found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Adjust your filters to see more results"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Action"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Entity"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"IP"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:S.map((b,E)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${E*20}ms`},children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm text-slate-900 dark:text-white",children:new Date(b.timestamp||b.created_at).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(b.timestamp||b.created_at).toLocaleTimeString()})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:b.user_name||"System"}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:b.user_role?.replace("_"," ")||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${A(b.action)}`,children:b.action})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-slate-400",children:k(b.entity_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:b.entity_name||b.entity_id||"-"}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:b.entity_type})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-xs text-slate-500",children:b.ip_address||"-"})})]},b.id))})]})})})]})}function yN(){const[n,r]=m.useState([]),[c,i]=m.useState(!0),[u,h]=m.useState({total:0,successful:0,failed:0}),[x,j]=m.useState(""),[y,f]=m.useState(""),[p,g]=m.useState("");m.useEffect(()=>{w()},[x]);const w=async()=>{i(!0);try{const[S,b]=await Promise.all([b0.list({size:100,status:x||void 0}),b0.getStats()]);r(S.data.items||[]),h(b.data)}catch(S){console.error("Failed to load login activity:",S)}finally{i(!1)}},A=n.filter(S=>{const b=!p||S.user_name?.toLowerCase().includes(p.toLowerCase())||S.user_email?.toLowerCase().includes(p.toLowerCase()),E=!y||S.user_role===y;return b&&E}),k=n.filter(S=>S.action==="login_success"&&new Date(S.created_at).toDateString()===new Date().toDateString()).length;return e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Login Activity"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Monitor user login activity and identify security issues."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"login"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.total}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Logins"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-green-200 dark:border-green-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.successful}),e.jsx("p",{className:"text-xs text-slate-500",children:"Successful"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.failed}),e.jsx("p",{className:"text-xs text-slate-500",children:"Failed"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-purple-200 dark:border-purple-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"person"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:k}),e.jsx("p",{className:"text-xs text-slate-500",children:"Active Today"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:p,onChange:S=>g(S.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})}),e.jsxs("select",{value:x,onChange:S=>j(S.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Successful"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:y,onChange:S=>f(S.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"warehouse_admin",children:"Warehouse Admin"}),e.jsx("option",{value:"shop_owner",children:"Shop Owner"}),e.jsx("option",{value:"pharmacist",children:"Pharmacist"})]}),e.jsx("button",{onClick:w,className:"p-2.5 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Refresh",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:c?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):A.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"login"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No login records found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Adjust your filters to see more results"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Login Time"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"IP Address"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:A.map((S,b)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${b*20}ms`},children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:S.user_name||"Unknown"}),e.jsx("p",{className:"text-xs text-slate-500",children:S.user_email})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded-full capitalize",children:S.user_role?.replace("_"," ")||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-900 dark:text-white",children:new Date(S.created_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-slate-600 dark:text-slate-400",children:S.ip_address||"-"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${S.action==="login_success"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:S.action==="login_success"?"Success":"Failed"})})]},S.id))})]})})]})}function vN(){const{hasPermission:n}=Zt(),{user:r}=Ie(),c=n(y0.ROLES_VIEW),i=n(y0.ROLES_MANAGE),[u,h]=m.useState([]),[x,j]=m.useState([]),[y,f]=m.useState([]),[p,g]=m.useState(!0),[w,A]=m.useState(!1),[k,S]=m.useState(null),[b,E]=m.useState({name:"",description:"",entity_type:"",permission_ids:[]}),[T,D]=m.useState(!1),[z,R]=m.useState("");m.useEffect(()=>{c&&r?W():c||g(!1)},[c,r]);const W=async()=>{g(!0);try{const[N,_,Y]=await Promise.all([Qn.list(),mj.list(),Yn.list({size:100})]);let G=N.data.items||[];r?.role==="warehouse_admin"&&(G=G.filter(F=>F.name!=="super_admin"&&F.entity_type!=="shop")),h(G),j(_.data.items||[]),f(Y.data.items||[])}catch(N){console.error("Failed to load data:",N)}finally{g(!1)}},I=()=>{S(null),E({name:"",description:"",entity_type:null,permission_ids:[]}),R(""),A(!0)},q=N=>{S(N),E({name:N.name,description:N.description||"",entity_type:N.entity_type,permission_ids:N.permissions.map(_=>_.id)}),R(""),A(!0)},oe=async N=>{if(N.preventDefault(),!b.name.trim()){R("Role name is required");return}D(!0),R("");try{k?await Qn.update(k.id,b):await Qn.create(b),A(!1),W()}catch(_){R(_.response?.data?.detail||"Failed to save role")}finally{D(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=N=>{he(N),M(!0)},be=async()=>{if(Q)try{await Qn.delete(Q.id),window.toast?.success("Role deleted successfully"),W()}catch(N){console.error("Failed to delete role:",N),window.toast?.error(N.response?.data?.detail||"Failed to delete role")}finally{M(!1),he(null)}},O=N=>{E(_=>({..._,permission_ids:_.permission_ids.includes(N)?_.permission_ids.filter(Y=>Y!==N):[..._.permission_ids,N]}))},V=N=>y.filter(_=>_.role===N),se=x.reduce((N,_)=>(N[_.module]||(N[_.module]=[]),N[_.module].push(_),N),{}),te=N=>{switch(N){case"global":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"warehouse":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"shop":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}};return c?e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Roles & Permissions"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Manage user roles and their permissions. System roles cannot be modified."})]}),i&&e.jsxs("button",{onClick:I,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-medium shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"add"}),"Create Role"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"admin_panel_settings"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"shield"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.filter(N=>N.is_system).length}),e.jsx("p",{className:"text-xs text-slate-500",children:"System Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"tune"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.filter(N=>!N.is_system).length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Custom Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"key"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:x.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Permissions"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:p?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-600"})}):u.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"admin_panel_settings"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No roles found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create your first role to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:u.map((N,_)=>{const Y=V(N.name);return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4 border border-slate-200 dark:border-slate-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors animate-fadeIn",style:{animationDelay:`${_*50}ms`},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${N.is_system?"bg-blue-100 dark:bg-blue-900/30":"bg-purple-100 dark:bg-purple-900/30"}`,children:e.jsx("span",{className:`material-symbols-outlined ${N.is_system?"text-blue-600":"text-purple-600"}`,children:N.is_system?"shield":"badge"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:N.name.replace(/_/g," ")}),e.jsxs("div",{className:"flex gap-1 mt-0.5",children:[N.is_system&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",children:"System"}),N.entity_type&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded capitalize ${te(N.entity_type)}`,children:N.entity_type}),!N.entity_type&&!N.is_system&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",children:"Custom"})]})]})]}),!N.is_system&&i&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>q(N),className:"p-1.5 text-slate-400 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{onClick:()=>xe(N),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-3 line-clamp-2",children:N.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"key"}),e.jsxs("span",{children:[N.permissions?.length||0," permissions"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"group"}),e.jsxs("span",{children:[Y.length," users"]})]})]}),N.permissions&&N.permissions.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[N.permissions.slice(0,4).map(G=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${te(G.scope)}`,title:G.code,children:G.action},G.id)),N.permissions.length>4&&e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-600 rounded-full",children:["+",N.permissions.length-4," more"]})]})})]},N.id)})})}),w&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate-scaleIn",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:k?"Edit Role":"Create New Role"}),k?.is_system&&e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:" System roles have limited editing options"})]}),e.jsxs("form",{onSubmit:oe,className:"p-6 space-y-6 max-h-[calc(90vh-180px)] overflow-y-auto",children:[z&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:z}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:N=>E({...b,name:N.target.value}),placeholder:"e.g., Sales Manager",disabled:k?.is_system,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Entity Type"}),e.jsxs("select",{value:b.entity_type||"",onChange:N=>E({...b,entity_type:N.target.value||null}),disabled:k?.is_system,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[e.jsx("option",{value:"",children:"None (Global)"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"shop",children:"Shop"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:N=>E({...b,description:N.target.value}),placeholder:"Brief description of this role...",rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:["Permissions (",b.permission_ids.length," selected)"]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:Object.entries(se).map(([N,_])=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 capitalize",children:N.replace(/_/g," ")}),e.jsxs("span",{className:"text-xs text-slate-400",children:[_.length," permissions"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(Y=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",title:Y.description||Y.code,children:[e.jsx("input",{type:"checkbox",checked:b.permission_ids.includes(Y.id),onChange:()=>O(Y.id),disabled:k?.is_system&&k?.name==="super_admin",className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 group-hover:text-slate-900 dark:group-hover:text-white",children:Y.action}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${te(Y.scope)}`,children:Y.scope})]},Y.id))})]},N))})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-5 py-2.5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:oe,disabled:T||k?.is_system&&k?.name==="super_admin",className:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-medium shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:T?"Saving...":k?"Update Role":"Create Role"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Role",message:`Are you sure you want to delete "${Q?.name}"? This action cannot be undone.`,confirmText:"Delete Role"})]}):e.jsx("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-12 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-red-500 mb-4",children:"block"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"You don't have permission to view roles and permissions."}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-2",children:"Contact your administrator if you need access."})]})})}function jN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState(null),[g,w]=m.useState({name:"",description:"",parent_id:""}),[A,k]=m.useState(!1),[S,b]=m.useState(""),[E,T]=m.useState(""),D=15,[z,R]=m.useState(1);m.useEffect(()=>{n&&!r("categories.view")&&c("/")},[n,c,r]),m.useEffect(()=>{W()},[]);const W=async()=>{x(!0);try{const _=await Me.listCategories();u(_.data||[])}catch(_){console.error("Failed to load categories:",_)}finally{x(!1)}},I=()=>{p(null),w({name:"",description:"",parent_id:""}),b(""),y(!0)},q=_=>{p(_),w({name:_.name,description:_.description||"",parent_id:_.parent_id||""}),b(""),y(!0)},oe=async _=>{if(_.preventDefault(),!g.name.trim()){b("Category name is required");return}k(!0),b("");try{const Y={...g,parent_id:g.parent_id||null};f?await Me.updateCategory(f.id,Y):await Me.createCategory(Y),y(!1),W()}catch(Y){b(Y.response?.data?.detail||"Failed to save category")}finally{k(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=_=>{he(_),M(!0)},be=async()=>{if(Q)try{await Me.deleteCategory(Q.id),window.toast?.success("Category deleted successfully"),W()}catch(_){console.error("Failed to delete category:",_),window.toast?.error(_.response?.data?.detail||"Failed to delete category")}finally{M(!1),he(null)}},O=i.filter(_=>_.name.toLowerCase().includes(E.toLowerCase())||_.description?.toLowerCase().includes(E.toLowerCase())),V=_=>_?i.find(G=>G.id===_)?.name:null,se={total:i.length,active:i.filter(_=>_.is_active).length,subcategories:i.filter(_=>_.parent_id).length},te=[{header:"Category",key:"name",render:_=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-emerald-600 text-[18px]",children:"folder"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:_.name}),_.description&&e.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:_.description})]})]})},{header:"Parent",key:"parent_id",render:_=>{const Y=V(_.parent_id);return Y?e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:Y}):e.jsx("span",{className:"text-sm text-slate-400",children:""})}},{header:"Status",key:"is_active",align:"center",render:_=>e.jsx($e,{variant:_.is_active?"success":"secondary",children:_.is_active?"Active":"Inactive"})},{header:"Created",key:"created_at",render:_=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(_.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:_=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("categories.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>q(_),className:"!p-1.5 h-8 w-8 text-emerald-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("categories.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>xe(_),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],N=O.slice((z-1)*D,z*D);return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Categories",subtitle:"Manage medicine categories and subcategories.",actions:r("categories.create")&&e.jsx(le,{variant:"primary",onClick:I,className:"bg-gradient-to-r from-emerald-600 to-teal-600",icon:"add",children:"Add Category"})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Categories",value:se.total,icon:"category",isActive:!0}),e.jsx(ve,{title:"Active",value:se.active,icon:"check_circle",trend:"neutral"}),e.jsx(ve,{title:"Subcategories",value:se.subcategories,icon:"account_tree",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:te,data:N,loading:h,emptyMessage:"No categories found.",pagination:{currentPage:z,totalPages:Math.ceil(O.length/D),onPageChange:R,totalItems:O.length,pageSize:D},headerSlot:e.jsx(me.ListControls,{title:"Category List",count:O.length,searchProps:{value:E,onChange:_=>{T(_),R(1)},placeholder:"Search categories..."},embedded:!0})}),e.jsx(Et,{isOpen:j,onClose:()=>y(!1),title:f?"Edit Category":"Add Category",size:"md",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsx(ue,{label:"Category Name *",value:g.name,onChange:_=>w({...g,name:_.target.value}),placeholder:"e.g., Antibiotics",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Parent Category"}),e.jsxs("select",{value:g.parent_id,onChange:_=>w({...g,parent_id:_.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),i.filter(_=>_.id!==f?.id&&!_.parent_id).map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:g.description,onChange:_=>w({...g,description:_.target.value}),placeholder:"Brief description...",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:A,className:"bg-gradient-to-r from-emerald-600 to-teal-600",children:A?"Saving...":"Save"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Category",message:`Are you sure you want to delete "${Q?.name}"? This action cannot be undone.`,confirmText:"Delete Category"})]})}function NN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState(null),[g,w]=m.useState({name:"",short_name:"",description:""}),[A,k]=m.useState(!1),[S,b]=m.useState(""),[E,T]=m.useState(""),D=15,[z,R]=m.useState(1);m.useEffect(()=>{n&&!r("units.view")&&c("/")},[n,c,r]),m.useEffect(()=>{W()},[]);const W=async()=>{x(!0);try{const N=await Me.listUnits();u(N.data||[])}catch(N){console.error("Failed to load units:",N)}finally{x(!1)}},I=()=>{p(null),w({name:"",short_name:"",description:""}),b(""),y(!0)},q=N=>{p(N),w({name:N.name,short_name:N.short_name,description:N.description||""}),b(""),y(!0)},oe=async N=>{if(N.preventDefault(),!g.name.trim()||!g.short_name.trim()){b("Name and short name are required");return}k(!0),b("");try{f?await Me.updateUnit(f.id,g):await Me.createUnit(g),y(!1),W()}catch(_){b(_.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=N=>{he(N),M(!0)},be=async()=>{if(Q)try{await Me.deleteUnit(Q.id),window.toast?.success("Unit deleted successfully"),W()}catch(N){console.error("Failed to delete unit:",N),window.toast?.error(N.response?.data?.detail||"Failed to delete unit")}finally{M(!1),he(null)}},O=i.filter(N=>N.name.toLowerCase().includes(E.toLowerCase())),V={total:i.length,active:i.filter(N=>N.is_active).length},se=[{header:"Unit Name",key:"name",render:N=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-xs",children:N.short_name.slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:N.name}),N.description&&e.jsx("p",{className:"text-xs text-slate-500",children:N.description})]})]})},{header:"Short Name",key:"short_name",render:N=>e.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs",children:N.short_name})},{header:"Status",key:"is_active",align:"center",render:N=>e.jsx($e,{variant:N.is_active?"success":"secondary",children:N.is_active?"Active":"Inactive"})},{header:"Created",key:"created_at",render:N=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(N.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:N=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("units.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>q(N),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("units.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>xe(N),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],te=O.slice((z-1)*D,z*D);return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Units",subtitle:"Manage units of measurement.",actions:r("units.create")&&e.jsx(le,{variant:"primary",onClick:I,className:"bg-gradient-to-r from-blue-600 to-cyan-600",icon:"add",children:"Add Unit"})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Units",value:V.total,icon:"straighten",isActive:!0}),e.jsx(ve,{title:"Active",value:V.active,icon:"check_circle",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:se,data:te,loading:h,emptyMessage:"No units found.",pagination:{currentPage:z,totalPages:Math.ceil(O.length/D),onPageChange:R,totalItems:O.length,pageSize:D},headerSlot:e.jsx(me.ListControls,{title:"Unit List",count:O.length,searchProps:{value:E,onChange:N=>{T(N),R(1)},placeholder:"Search units..."},embedded:!0})}),e.jsx(Et,{isOpen:j,onClose:()=>y(!1),title:f?"Edit Unit":"Add Unit",size:"sm",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsx(ue,{label:"Name *",value:g.name,onChange:N=>w({...g,name:N.target.value}),placeholder:"e.g., Tablet",required:!0}),e.jsx(ue,{label:"Short Name *",value:g.short_name,onChange:N=>w({...g,short_name:N.target.value}),placeholder:"e.g., Tab",maxLength:10,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:g.description,onChange:N=>w({...g,description:N.target.value}),rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:A,className:"bg-gradient-to-r from-blue-600 to-cyan-600",children:A?"Saving...":"Save"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Unit",message:`Are you sure you want to delete "${Q?.name}"? This action cannot be undone.`,confirmText:"Delete Unit"})]})}function wN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),{getMaster:i,isLoading:u}=ct(),h=i("gst_slabs"),[x,j]=m.useState([]),[y,f]=m.useState(!0),[p,g]=m.useState(!1),[w,A]=m.useState(null),[k,S]=m.useState({hsn_code:"",description:"",gst_slab_id:"",gst_rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0}),[b,E]=m.useState(!1),[T,D]=m.useState(""),[z,R]=m.useState(""),W=15,[I,q]=m.useState(1);m.useEffect(()=>{n&&!r("hsn.view")&&c("/")},[n,c,r]),m.useEffect(()=>{oe()},[]);const oe=async()=>{f(!0);try{const F=await Me.listHSN();j(F.data||[])}catch(F){console.error("Failed to load HSN codes:",F)}finally{f(!1)}},U=()=>{A(null),S({hsn_code:"",description:"",gst_slab_id:"",gst_rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0}),D(""),g(!0)},M=F=>{A(F),S({hsn_code:F.hsn_code,description:F.description,gst_slab_id:F.gst_slab_id||"",gst_rate:F.gst_rate,cgst_rate:F.cgst_rate,sgst_rate:F.sgst_rate,igst_rate:F.igst_rate}),D(""),g(!0)},Q=F=>{const P=h.find(pe=>pe.id===F);P&&S({...k,gst_slab_id:F,gst_rate:P.rate,cgst_rate:P.rate/2,sgst_rate:P.rate/2,igst_rate:P.rate})},he=async F=>{if(F.preventDefault(),!k.hsn_code.trim()||!k.description.trim()){D("HSN code and description are required");return}E(!0),D("");try{w?await Me.updateHSN(w.id,k):await Me.createHSN(k),g(!1),oe()}catch(P){D(P.response?.data?.detail||"Failed to save")}finally{E(!1)}},[xe,be]=m.useState(!1),[O,V]=m.useState(null),se=F=>{V(F),be(!0)},te=async()=>{if(O)try{await Me.deleteHSN(O.id),window.toast?.success("HSN Code deleted successfully"),oe()}catch(F){console.error("Failed to delete HSN Code:",F),window.toast?.error(F.response?.data?.detail||"Failed to delete HSN Code")}finally{be(!1),V(null)}},N=x.filter(F=>F.hsn_code.toLowerCase().includes(z.toLowerCase())||F.description.toLowerCase().includes(z.toLowerCase())),_={total:x.length,gst5:x.filter(F=>F.gst_rate===5).length,gst12:x.filter(F=>F.gst_rate===12).length},Y=[{header:"HSN Code",key:"hsn_code",render:F=>e.jsx("span",{className:"font-mono font-semibold text-amber-600 dark:text-amber-500",children:F.hsn_code})},{header:"Description",key:"description",render:F=>e.jsx("span",{className:"text-slate-900 dark:text-white",children:F.description})},{header:"GST %",key:"gst_rate",align:"center",render:F=>e.jsxs($e,{variant:"warning",children:[F.gst_rate,"%"]})},{header:"CGST",key:"cgst_rate",align:"center",render:F=>e.jsxs("span",{className:"text-slate-500",children:[F.cgst_rate,"%"]})},{header:"SGST",key:"sgst_rate",align:"center",render:F=>e.jsxs("span",{className:"text-slate-500",children:[F.sgst_rate,"%"]})},{header:"Status",key:"is_active",align:"center",render:F=>e.jsx($e,{variant:F.is_active?"success":"secondary",children:F.is_active?"Active":"Inactive"})},{header:"Actions",key:"id",align:"right",render:F=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("hsn.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>M(F),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("hsn.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>se(F),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],G=N.slice((I-1)*W,I*W);return e.jsxs(me,{loading:u,children:[e.jsx(me.Header,{title:"HSN Codes",subtitle:"Manage HSN codes with GST rates.",actions:r("hsn.create")&&e.jsx(le,{variant:"primary",onClick:U,className:"bg-gradient-to-r from-amber-600 to-orange-600",icon:"add",children:"Add HSN Code"})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total HSN Codes",value:_.total,icon:"tag",isActive:!0}),e.jsx(ve,{title:"5% GST Items",value:_.gst5,icon:"percent",trend:"neutral"}),e.jsx(ve,{title:"12% GST Items",value:_.gst12,icon:"percent",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:Y,data:G,loading:y,emptyMessage:"No HSN codes found.",pagination:{currentPage:I,totalPages:Math.ceil(N.length/W),onPageChange:q,totalItems:N.length,pageSize:W},headerSlot:e.jsx(me.ListControls,{title:"HSN List",count:N.length,searchProps:{value:z,onChange:F=>{R(F),q(1)},placeholder:"Search HSN codes..."},embedded:!0})}),e.jsx(Et,{isOpen:p,onClose:()=>g(!1),title:w?"Edit HSN Code":"Add HSN Code",size:"md",children:e.jsxs("form",{onSubmit:he,className:"space-y-4",children:[T&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:T}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"HSN Code *",value:k.hsn_code,onChange:F=>S({...k,hsn_code:F.target.value}),placeholder:"e.g. 3004",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Slab *"}),e.jsxs("select",{value:k.gst_slab_id,onChange:F=>Q(F.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Select GST Slab"}),h.map(F=>e.jsxs("option",{value:F.id,children:[F.rate,"% - ",F.description]},F.id))]})]})]}),e.jsx(ue,{label:"Description *",value:k.description,onChange:F=>S({...k,description:F.target.value}),placeholder:"e.g., Medicaments",required:!0}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-200 mb-3 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"Auto-calculated Tax Rates"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"Total"}),e.jsxs("div",{className:"mt-1 font-mono font-bold text-blue-600",children:[k.gst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"CGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.cgst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"SGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.sgst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"IGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.igst_rate,"%"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>g(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:b,className:"bg-gradient-to-r from-amber-600 to-orange-600",children:b?"Saving...":"Save"})]})]})}),e.jsx(Ut,{isOpen:xe,onClose:()=>be(!1),onConfirm:te,title:"Delete HSN Code",message:`Are you sure you want to delete HSN Code "${O?.hsn_code}"? This action cannot be undone.`,confirmText:"Delete HSN Code"})]})}function kN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),{getMaster:i,isLoading:u}=ct(),h=i("gst_slabs"),[x,j]=m.useState({enable_gst:!0,default_gst_rate:12,enable_vat:!1,default_vat_rate:5,tax_inclusive_pricing:!1,round_off_tax:!0,gst_number:"",business_name:"",business_address:""}),[y,f]=m.useState(!0),[p,g]=m.useState(!1),[w,A]=m.useState(!1);m.useEffect(()=>{n&&!r("gst.view")&&c("/")},[n,c,r]),m.useEffect(()=>{k()},[]);const k=async()=>{f(!0);try{const b=await f0.getSettings();b.data&&j(b.data)}catch(b){console.error("Failed to load tax settings:",b)}finally{f(!1)}},S=async()=>{g(!0);try{await f0.updateSettings(x),A(!0),setTimeout(()=>A(!1),3e3)}catch(b){console.error("Failed to save:",b),alert("Failed to save settings")}finally{g(!1)}};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"spinner"})}):e.jsx(Xt,{title:"GST / VAT Settings",description:"Configure tax settings for your business",icon:"receipt_long",actions:w?e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),"Saved Successfully"]}):void 0,loading:y||u,children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(Xe,{title:"GST Configuration",icon:"receipt_long",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Enable GST"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Apply GST to all transactions"})]}),e.jsx("button",{onClick:()=>j({...x,enable_gst:!x.enable_gst}),className:`relative w-12 h-6 rounded-full transition-colors ${x.enable_gst?"bg-orange-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${x.enable_gst?"left-7":"left-1"}`})})]}),x.enable_gst&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Default GST Rate"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.length>0?h.map(b=>e.jsxs("button",{onClick:()=>j({...x,default_gst_rate:b.rate}),className:`px-4 py-2 rounded-xl font-medium transition-all ${x.default_gst_rate===b.rate?"bg-orange-500 text-white shadow-lg shadow-orange-500/25":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200"}`,children:[b.rate,"%"]},b.id)):e.jsx("div",{className:"text-sm text-slate-500 italic",children:"No GST slabs found. Check master data."})})]}),e.jsx(ue,{label:"GST Number (GSTIN)",value:x.gst_number,onChange:b=>j({...x,gst_number:b.target.value}),placeholder:"e.g., 29ABCDE1234F1Z5",className:"font-mono"})]})]})}),e.jsx(Xe,{title:"VAT Configuration",icon:"percent",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Enable VAT"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Apply VAT in addition to or instead of GST"})]}),e.jsx("button",{onClick:()=>j({...x,enable_vat:!x.enable_vat}),className:`relative w-12 h-6 rounded-full transition-colors ${x.enable_vat?"bg-purple-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${x.enable_vat?"left-7":"left-1"}`})})]}),x.enable_vat&&e.jsx(ue,{label:"Default VAT Rate (%)",type:"number",value:x.default_vat_rate,onChange:b=>j({...x,default_vat_rate:Number(b.target.value)}),className:"w-32"})]})}),e.jsx(Xe,{title:"Pricing Options",icon:"tune",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Tax Inclusive Pricing"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Product prices already include tax"})]}),e.jsx("button",{onClick:()=>j({...x,tax_inclusive_pricing:!x.tax_inclusive_pricing}),className:`relative w-12 h-6 rounded-full transition-colors ${x.tax_inclusive_pricing?"bg-blue-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${x.tax_inclusive_pricing?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Round Off Tax"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Round tax amounts to nearest rupee"})]}),e.jsx("button",{onClick:()=>j({...x,round_off_tax:!x.round_off_tax}),className:`relative w-12 h-6 rounded-full transition-colors ${x.round_off_tax?"bg-blue-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${x.round_off_tax?"left-7":"left-1"}`})})]})]})}),e.jsx(Xe,{title:"Business Details",icon:"business",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ue,{label:"Business Name",value:x.business_name,onChange:b=>j({...x,business_name:b.target.value}),placeholder:"Your business name"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Business Address"}),e.jsx("textarea",{value:x.business_address,onChange:b=>j({...x,business_address:b.target.value}),placeholder:"Full business address",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 resize-none"})]})]})}),e.jsx("div",{className:"flex justify-end",children:r("gst.edit")&&e.jsxs(le,{variant:"primary",onClick:S,loading:p,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"save"}),p?"Saving...":"Save Settings"]})})]})})}function SN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),{refresh:i,isLoading:u}=ct(),[h,x]=m.useState([]),[j,y]=m.useState(!0),[f,p]=m.useState(!1),[g,w]=m.useState(null),[A,k]=m.useState({rate:0,description:""}),[S,b]=m.useState(!1),[E,T]=m.useState("");m.useEffect(()=>{n&&!r("gst.view")&&c("/")},[n,c,r]),m.useEffect(()=>{D()},[]);const D=async()=>{y(!0);try{const xe=await Me.listGSTSlabs();x(xe.data||[])}catch(xe){console.error("Failed to load GST slabs:",xe)}finally{y(!1)}},z=()=>{w(null),k({rate:0,description:""}),T(""),p(!0)},R=xe=>{w(xe),k({rate:xe.rate,description:xe.description||""}),T(""),p(!0)},W=async xe=>{if(xe.preventDefault(),A.rate<=0){T("GST rate must be greater than 0");return}b(!0),T("");try{g?await Me.updateGSTSlab(g.id,A):await Me.createGSTSlab(A),p(!1),D(),i()}catch(be){T(be.response?.data?.detail||"Failed to save GST slab")}finally{b(!1)}},[I,q]=m.useState(!1),[oe,U]=m.useState(null),M=xe=>{U(xe),q(!0)},Q=async()=>{if(oe)try{await Me.deleteGSTSlab(oe.id),window.toast?.success("GST Slab deleted successfully"),D(),i()}catch(xe){console.error("Failed to delete GST Slab:",xe),window.toast?.error(xe.response?.data?.detail||"Failed to delete GST Slab")}finally{q(!1),U(null)}},he=[0,5,12,18,28];return e.jsxs(Xt,{title:"GST Slabs",description:"Manage GST tax rates for your products",actions:r("gst.create")&&e.jsxs(le,{variant:"primary",onClick:z,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add GST Slab"]}),loading:u,children:[e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"info"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"GST Slabs are Required"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"GST Slabs must be created before you can add HSN Codes or Medicines. Standard Indian GST rates are 0%, 5%, 12%, 18%, and 28%."})]})]})}),h.length===0&&!j&&r("gst.create")&&e.jsxs(Xe,{title:"Quick Setup",icon:"bolt",children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Click to quickly add standard GST slabs:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:he.map(xe=>e.jsxs(le,{variant:"secondary",onClick:async()=>{try{await Me.createGSTSlab({rate:xe,description:`GST ${xe}%`}),D(),i()}catch(be){console.error(be)}},children:["Add ",xe,"%"]},xe))})]}),e.jsx(Xe,{className:"!p-0",children:j?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"spinner"})}):h.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"percent"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No GST Slabs"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create GST slabs to enable HSN codes and medicines"}),r("gst.create")&&e.jsx(le,{variant:"primary",className:"mt-4",onClick:z,children:"Add First GST Slab"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Rate"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"CGST"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"SGST"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:h.map(xe=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[xe.rate,"%"]})}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:xe.description||"-"}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:[(xe.rate/2).toFixed(1),"%"]}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:[(xe.rate/2).toFixed(1),"%"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx($e,{variant:xe.is_active?"success":"secondary",children:xe.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[r("gst.edit")&&e.jsx(le,{variant:"secondary",onClick:()=>R(xe),className:"!p-1.5",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("gst.delete")&&e.jsx(le,{variant:"secondary",onClick:()=>M(xe),className:"!p-1.5 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},xe.id))})]})})]}),e.jsx(Et,{isOpen:f,onClose:()=>p(!1),title:g?"Edit GST Slab":"Add GST Slab",children:e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[E&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:E}),e.jsx(ue,{label:"GST Rate (%)",type:"number",value:A.rate,onChange:xe=>k({...A,rate:Number(xe.target.value)}),placeholder:"e.g., 18",min:0,max:100,required:!0}),e.jsx(ue,{label:"Description (Optional)",value:A.description,onChange:xe=>k({...A,description:xe.target.value}),placeholder:"e.g., Standard GST Rate"}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase mb-2",children:"Tax Breakdown Preview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-primary",children:[A.rate,"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total GST"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[(A.rate/2).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"CGST"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[(A.rate/2).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"SGST"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>p(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:S,children:S?"Saving...":g?"Update":"Create"})]})]})}),e.jsx(Ut,{isOpen:I,onClose:()=>q(!1),onConfirm:Q,title:"Delete GST Slab",message:`Are you sure you want to delete GST Slab "${oe?.rate}%"? This action cannot be undone.`,confirmText:"Delete Slab"})]})}function _N(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState(null),[g,w]=m.useState({name:"",code:"",contact_person:"",phone:"",email:"",gst_number:"",address:"",city:"",state:"",pincode:""}),[A,k]=m.useState(!1),[S,b]=m.useState(""),[E,T]=m.useState(""),D=15,[z,R]=m.useState(1);m.useEffect(()=>{n&&!r("suppliers.view")&&c("/")},[n,c,r]),m.useEffect(()=>{W()},[]);const W=async()=>{x(!0);try{const N=await Me.listSuppliers();u(N.data||[])}catch(N){console.error("Failed to load suppliers:",N),u([])}finally{x(!1)}},I=()=>{p(null),w({name:"",code:"",contact_person:"",phone:"",email:"",gst_number:"",address:"",city:"",state:"",pincode:""}),b(""),y(!0)},q=N=>{p(N),w({name:N.name,code:N.code,contact_person:N.contact_person||"",phone:N.phone||"",email:N.email||"",gst_number:N.gst_number||"",address:N.address||"",city:N.city||"",state:N.state||"",pincode:N.pincode||""}),b(""),y(!0)},oe=async N=>{if(N.preventDefault(),!g.name.trim()||!g.code.trim()){b("Name and code are required");return}k(!0),b("");try{f?await Me.updateSupplier(f.id,g):await Me.createSupplier(g),y(!1),W()}catch(_){b(_.response?.data?.detail||"Failed to save supplier")}finally{k(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=N=>{he(N),M(!0)},be=async()=>{if(Q)try{await Me.deleteSupplier(Q.id),window.toast?.success("Supplier deleted successfully"),W()}catch(N){console.error("Failed to delete supplier:",N),window.toast?.error(N.response?.data?.detail||"Failed to delete supplier")}finally{M(!1),he(null)}},O=i.filter(N=>N.name.toLowerCase().includes(E.toLowerCase())||N.code.toLowerCase().includes(E.toLowerCase())),V={total:i.length,active:i.filter(N=>N.is_active).length,inactive:i.filter(N=>!N.is_active).length,cities:new Set(i.map(N=>N.city).filter(Boolean)).size},se=[{header:"Code",key:"code",render:N=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:N.code})},{header:"Supplier",key:"name",render:N=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:N.name}),e.jsx("div",{className:"text-xs text-slate-500",children:N.city||"No Location"})]})},{header:"Contact",key:"contact_person",render:N=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:N.contact_person}),e.jsx("div",{className:"text-xs text-slate-500",children:N.phone})]})},{header:"GST Number",key:"gst_number",render:N=>e.jsx("span",{className:"font-mono text-xs",children:N.gst_number||"-"}),className:"hidden md:table-cell"},{header:"Status",key:"is_active",render:N=>e.jsx($e,{variant:N.is_active?"success":"secondary",children:N.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",render:N=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("suppliers.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>q(N),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("suppliers.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>xe(N),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}],te=O.slice((z-1)*D,z*D);return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Suppliers",subtitle:"Manage suppliers for stock entry and purchase orders",actions:r("suppliers.create")&&e.jsxs(le,{variant:"primary",onClick:I,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Supplier"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Suppliers",value:V.total,icon:"local_shipping",isActive:!0}),e.jsx(ve,{title:"Active",value:V.active,icon:"check_circle",trend:"neutral"}),e.jsx(ve,{title:"Inactive",value:V.inactive,icon:"cancel",trend:"neutral"}),e.jsx(ve,{title:"Cities",value:V.cities,icon:"location_city",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:se,data:te,loading:h,emptyMessage:"No suppliers found.",pagination:{currentPage:z,totalPages:Math.ceil(O.length/D),onPageChange:R,totalItems:O.length,pageSize:D},headerSlot:e.jsx(me.ListControls,{title:"Supplier List",count:O.length,searchProps:{value:E,onChange:N=>{T(N),R(1)},placeholder:"Search suppliers..."},embedded:!0})}),e.jsx(Et,{isOpen:j,onClose:()=>y(!1),title:f?"Edit Supplier":"Add Supplier",size:"lg",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Supplier Code *",value:g.code,onChange:N=>w({...g,code:N.target.value}),placeholder:"SUP001",required:!0}),e.jsx(ue,{label:"Supplier Name *",value:g.name,onChange:N=>w({...g,name:N.target.value}),placeholder:"ABC Pharmaceuticals",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Contact Person",value:g.contact_person,onChange:N=>w({...g,contact_person:N.target.value}),placeholder:"John Doe"}),e.jsx(ue,{label:"Phone",value:g.phone,onChange:N=>w({...g,phone:N.target.value}),placeholder:"+91 9876543210"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Email",type:"email",value:g.email,onChange:N=>w({...g,email:N.target.value}),placeholder:"supplier@example.com"}),e.jsx(ue,{label:"GST Number",value:g.gst_number,onChange:N=>w({...g,gst_number:N.target.value}),placeholder:"29ABCDE1234F1Z5",className:"font-mono"})]}),e.jsx(ue,{label:"Address",value:g.address,onChange:N=>w({...g,address:N.target.value}),placeholder:"Street address"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ue,{label:"City",value:g.city,onChange:N=>w({...g,city:N.target.value}),placeholder:"Mumbai"}),e.jsx(ue,{label:"State",value:g.state,onChange:N=>w({...g,state:N.target.value}),placeholder:"Maharashtra"}),e.jsx(ue,{label:"Pincode",value:g.pincode,onChange:N=>w({...g,pincode:N.target.value}),placeholder:"400001"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:A,children:A?"Saving...":"Save"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Supplier",message:`Are you sure you want to delete "${Q?.name}"? This action cannot be undone.`,confirmText:"Delete Supplier"})]})}function CN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState(null),[g,w]=m.useState({name:"",code:"",description:"",adjustment_type:"decrease"}),[A,k]=m.useState(!1),[S,b]=m.useState(""),[E,T]=m.useState(""),[D,z]=m.useState(1),R=10;m.useEffect(()=>{n&&!r("adjustment_reasons.view")&&c("/")},[n,c,r]),m.useEffect(()=>{W()},[]);const W=async()=>{x(!0);try{const N=await Me.listAdjustmentReasons();u(N.data||[])}catch(N){console.error("Failed to load adjustment reasons:",N),i.length===0&&u([])}finally{x(!1)}},I=()=>{p(null),w({name:"",code:"",description:"",adjustment_type:"decrease"}),b(""),y(!0)},q=N=>{p(N),w({name:N.name,code:N.code,description:N.description||"",adjustment_type:N.adjustment_type}),b(""),y(!0)},oe=async N=>{if(N.preventDefault(),!g.name.trim()||!g.code.trim()){b("Name and code are required");return}k(!0),b("");try{f?await Me.updateAdjustmentReason(f.id,g):await Me.createAdjustmentReason(g),y(!1),W()}catch(_){b(_.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=N=>{he(N),M(!0)},be=async()=>{if(Q)try{await Me.deleteAdjustmentReason(Q.id),window.toast?.success("Adjustment reason deleted successfully"),W()}catch(N){console.error("Failed to delete adjustment reason:",N),window.toast?.error(N.response?.data?.detail||"Failed to delete adjustment reason")}finally{M(!1),he(null)}},O=i.filter(N=>N.name.toLowerCase().includes(E.toLowerCase())||N.code.toLowerCase().includes(E.toLowerCase())),V=O.slice((D-1)*R,D*R),se={total:i.length,increase:i.filter(N=>N.adjustment_type==="increase").length,decrease:i.filter(N=>N.adjustment_type==="decrease").length},te=[{header:"Code",key:"code",render:N=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:N.code})},{header:"Reason Name",key:"name",render:N=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:N.name}),N.description&&e.jsx("div",{className:"text-xs text-slate-500",children:N.description})]})},{header:"Type",key:"adjustment_type",render:N=>e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full ${N.adjustment_type==="increase"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:N.adjustment_type==="increase"?"arrow_upward":"arrow_downward"}),N.adjustment_type==="increase"?"Increase":"Decrease"]})},{header:"Actions",key:"id",align:"right",render:N=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("adjustment_reasons.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>q(N),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("adjustment_reasons.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>xe(N),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Adjustment Reasons",subtitle:"Manage stock adjustment reasons",actions:r("adjustment_reasons.create")&&e.jsxs(le,{variant:"primary",onClick:I,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Reason"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Reasons",value:se.total,icon:"swap_vert",isActive:!0}),e.jsx(ve,{title:"Increase Types",value:se.increase,icon:"trending_up",trend:"up",valueClassName:"text-green-600"}),e.jsx(ve,{title:"Decrease Types",value:se.decrease,icon:"trending_down",trend:"down",valueClassName:"text-red-600"})]}),e.jsx(me.DataTable,{columns:te,data:V,loading:h,emptyMessage:"No adjustment reasons found.",pagination:{currentPage:D,totalPages:Math.ceil(O.length/R),onPageChange:z,totalItems:O.length,pageSize:R},headerSlot:e.jsx(me.ListControls,{title:"Reason List",count:O.length,searchProps:{value:E,onChange:N=>{T(N),z(1)},placeholder:"Search reasons..."},embedded:!0})}),e.jsx(Et,{isOpen:j,onClose:()=>y(!1),title:f?"Edit Reason":"Add Reason",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Code *",value:g.code,onChange:N=>w({...g,code:N.target.value}),placeholder:"DAMAGE",required:!0}),e.jsx(ue,{label:"Name *",value:g.name,onChange:N=>w({...g,name:N.target.value}),placeholder:"Damaged Goods",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Adjustment Type *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"radio",checked:g.adjustment_type==="decrease",onChange:()=>w({...g,adjustment_type:"decrease"}),className:"text-primary w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Decrease (Stock Out)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"radio",checked:g.adjustment_type==="increase",onChange:()=>w({...g,adjustment_type:"increase"}),className:"text-primary w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Increase (Stock In)"})]})]})]}),e.jsx(ue,{label:"Description",value:g.description,onChange:N=>w({...g,description:N.target.value}),placeholder:"Explain when this reason is used"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:A,children:A?"Saving...":"Save"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Adjustment Reason",message:`Are you sure you want to delete "${Q?.name}"? This action cannot be undone.`,confirmText:"Delete Reason"})]})}function EN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState(null),[g,w]=m.useState({name:"",code:"",icon:"payments"}),[A,k]=m.useState(!1),[S,b]=m.useState("");m.useEffect(()=>{n&&!r("payment_methods.view")&&c("/")},[n,c,r]),m.useEffect(()=>{E()},[]);const E=async()=>{x(!0);try{const Q=await Me.listPaymentMethods();u(Q.data||[])}catch(Q){console.error("Failed to load payment methods:",Q),u([{id:"1",code:"CASH",name:"Cash",icon:"payments",is_active:!0,created_at:new Date().toISOString()},{id:"2",code:"CARD",name:"Credit/Debit Card",icon:"credit_card",is_active:!0,created_at:new Date().toISOString()},{id:"3",code:"UPI",name:"UPI",icon:"qr_code_scanner",is_active:!0,created_at:new Date().toISOString()},{id:"4",code:"WALLET",name:"Digital Wallet",icon:"account_balance_wallet",is_active:!0,created_at:new Date().toISOString()},{id:"5",code:"CREDIT",name:"Store Credit",icon:"receipt",is_active:!0,created_at:new Date().toISOString()}])}finally{x(!1)}},T=()=>{p(null),w({name:"",code:"",icon:"payments"}),b(""),y(!0)},D=Q=>{p(Q),w({name:Q.name,code:Q.code,icon:Q.icon||"payments"}),b(""),y(!0)},z=async Q=>{if(Q.preventDefault(),!g.name.trim()||!g.code.trim()){b("Name and code are required");return}k(!0),b("");try{f?await Me.updatePaymentMethod(f.id,g):await Me.createPaymentMethod(g),y(!1),E()}catch(he){b(he.response?.data?.detail||"Failed to save")}finally{k(!1)}},[R,W]=m.useState(!1),[I,q]=m.useState(null),oe=Q=>{q(Q),W(!0)},U=async()=>{if(I)try{await Me.deletePaymentMethod(I.id),window.toast?.success("Payment method deleted successfully"),E()}catch(Q){console.error("Failed to delete payment method:",Q),window.toast?.error(Q.response?.data?.detail||"Failed to delete payment method")}finally{W(!1),q(null)}},M=["payments","credit_card","qr_code_scanner","account_balance_wallet","receipt","account_balance"];return e.jsxs(Xt,{title:"Payment Methods",description:"Manage payment methods for billing and POS",icon:"credit_card",actions:r("payment_methods.create")&&e.jsxs(le,{variant:"primary",onClick:T,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Method"]}),children:[e.jsx(Xe,{className:"space-y-6",children:h?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):i.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 mb-3",children:"credit_card"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No payment methods"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Add payment methods to enable billing"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(Q=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:Q.icon||"payments"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:Q.name}),e.jsx("p",{className:"text-sm text-slate-500 font-mono",children:Q.code})]}),e.jsxs("div",{className:"flex gap-1",children:[r("payment_methods.edit")&&e.jsx("button",{onClick:()=>D(Q),className:"p-1.5 text-slate-400 hover:text-primary rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("payment_methods.delete")&&e.jsx("button",{onClick:()=>oe(Q),className:"p-1.5 text-slate-400 hover:text-red-600 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})]},Q.id))})}),e.jsx(Et,{isOpen:j,onClose:()=>y(!1),title:f?"Edit Payment Method":"Add Payment Method",children:e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Code *",value:g.code,onChange:Q=>w({...g,code:Q.target.value}),placeholder:"CASH",required:!0}),e.jsx(ue,{label:"Name *",value:g.name,onChange:Q=>w({...g,name:Q.target.value}),placeholder:"Cash Payment",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Icon"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(Q=>e.jsx("button",{type:"button",onClick:()=>w({...g,icon:Q}),className:`p-3 rounded-lg border ${g.icon===Q?"border-primary bg-primary/10":"border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:Q})},Q))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:A,children:A?"Saving...":"Save"})]})]})}),e.jsx(Ut,{isOpen:R,onClose:()=>W(!1),onConfirm:U,title:"Delete Payment Method",message:`Are you sure you want to delete "${I?.name}"? This action cannot be undone.`,confirmText:"Delete Method"})]})}function AN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState(null),[g,w]=m.useState({code:"",name:"",description:""}),[A,k]=m.useState(!1),[S,b]=m.useState(""),[E,T]=m.useState(""),[D,z]=m.useState(1),R=10;m.useEffect(()=>{n&&!r("medicine_types.view")&&c("/")},[n,c,r]),m.useEffect(()=>{W()},[]);const W=async()=>{x(!0);try{const N=await Me.listMedicineTypes();u(N.data||[])}catch(N){console.error("Failed to load medicine types:",N)}finally{x(!1)}},I=()=>{p(null),w({code:"",name:"",description:""}),b(""),y(!0)},q=N=>{p(N),w({code:N.code,name:N.name,description:N.description||""}),b(""),y(!0)},oe=async N=>{if(N.preventDefault(),!g.code||!g.name){b("Code and Name are required");return}k(!0),b("");try{f?await Me.updateMedicineType(f.id,g):await Me.createMedicineType(g),y(!1),W()}catch(_){b(_.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=N=>{he(N),M(!0)},be=async()=>{if(Q)try{await Me.deleteMedicineType(Q.id),window.toast?.success("Medicine type deleted successfully"),W()}catch(N){console.error("Failed to delete medicine type:",N),window.toast?.error(N.response?.data?.detail||"Failed to delete medicine type")}finally{M(!1),he(null)}},O=i.filter(N=>N.name.toLowerCase().includes(E.toLowerCase())||N.code.toLowerCase().includes(E.toLowerCase())),V=O.slice((D-1)*R,D*R),se={total:i.length,active:i.filter(N=>N.is_active).length,inactive:i.filter(N=>!N.is_active).length},te=[{header:"Code",key:"code",render:N=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:N.code})},{header:"Type Name",key:"name",render:N=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:N.name}),N.description&&e.jsx("div",{className:"text-xs text-slate-500",children:N.description})]})},{header:"Status",key:"is_active",render:N=>e.jsx($e,{variant:N.is_active?"success":"secondary",children:N.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:N=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("medicine_types.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>q(N),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("medicine_types.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>xe(N),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Medicine Types",subtitle:"Manage medicine form types (tablet, capsule, syrup, etc.)",actions:r("medicine_types.create")&&e.jsxs(le,{variant:"primary",onClick:I,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Type"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Types",value:se.total,icon:"medication",isActive:!0}),e.jsx(ve,{title:"Active",value:se.active,icon:"check_circle",trend:"neutral"}),e.jsx(ve,{title:"Inactive",value:se.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:te,data:V,loading:h,emptyMessage:"No medicine types found.",pagination:{currentPage:D,totalPages:Math.ceil(O.length/R),onPageChange:z,totalItems:O.length,pageSize:R},headerSlot:e.jsx(me.ListControls,{title:"Type List",count:O.length,searchProps:{value:E,onChange:N=>{T(N),z(1)},placeholder:"Search types..."},embedded:!0})}),e.jsx(Et,{isOpen:j,onClose:()=>y(!1),title:f?"Edit Medicine Type":"Add Medicine Type",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsx(ue,{label:"Code",value:g.code,onChange:N=>w({...g,code:N.target.value.toLowerCase()}),placeholder:"e.g., tablet",required:!0}),e.jsx(ue,{label:"Name",value:g.name,onChange:N=>w({...g,name:N.target.value}),placeholder:"e.g., Tablet",required:!0}),e.jsx(ue,{label:"Description (Optional)",value:g.description,onChange:N=>w({...g,description:N.target.value}),placeholder:"e.g., Solid oral dosage form"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:A,children:A?"Saving...":f?"Update":"Create"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Medicine Type",message:`Are you sure you want to delete "${Q?.name}"? This action cannot be undone.`,confirmText:"Delete Type"})]})}function TN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState(null),[g,w]=m.useState({code:"",name:"",description:""}),[A,k]=m.useState(!1),[S,b]=m.useState(""),[E,T]=m.useState(""),[D,z]=m.useState(1),R=10;m.useEffect(()=>{n&&!r("brands.view")&&c("/")},[n,c,r]),m.useEffect(()=>{W()},[]);const W=async()=>{x(!0);try{const N=await Me.listBrands();u(N.data||[])}catch(N){console.error("Failed to load brands:",N)}finally{x(!1)}},I=()=>{p(null),w({code:"",name:"",description:""}),b(""),y(!0)},q=N=>{p(N),w({code:N.code,name:N.name,description:N.description||""}),b(""),y(!0)},oe=async N=>{if(N.preventDefault(),!g.code||!g.name){b("Code and Name are required");return}k(!0),b("");try{f?await Me.updateBrand(f.id,g):await Me.createBrand(g),y(!1),W()}catch(_){b(_.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=N=>{he(N),M(!0)},be=async()=>{if(Q)try{await Me.deleteBrand(Q.id),window.toast?.success("Brand deleted successfully"),W()}catch(N){console.error("Failed to delete brand:",N),window.toast?.error(N.response?.data?.detail||"Failed to delete brand")}finally{M(!1),he(null)}},O=i.filter(N=>N.name.toLowerCase().includes(E.toLowerCase())||N.code.toLowerCase().includes(E.toLowerCase())),V=O.slice((D-1)*R,D*R),se={total:i.length,active:i.filter(N=>N.is_active).length,inactive:i.filter(N=>!N.is_active).length},te=[{header:"Code",key:"code",render:N=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:N.code})},{header:"Brand Name",key:"name",render:N=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:N.name}),N.description&&e.jsx("div",{className:"text-xs text-slate-500",children:N.description})]})},{header:"Status",key:"is_active",render:N=>e.jsx($e,{variant:N.is_active?"success":"secondary",children:N.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:N=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("brands.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>q(N),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("brands.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>xe(N),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Brands",subtitle:"Manage medicine brand masters",actions:r("brands.create")&&e.jsxs(le,{variant:"primary",onClick:I,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Brand"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Brands",value:se.total,icon:"label",isActive:!0}),e.jsx(ve,{title:"Active",value:se.active,icon:"check_circle",trend:"neutral"}),e.jsx(ve,{title:"Inactive",value:se.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:te,data:V,loading:h,emptyMessage:"No brands found.",pagination:{currentPage:D,totalPages:Math.ceil(O.length/R),onPageChange:z,totalItems:O.length,pageSize:R},headerSlot:e.jsx(me.ListControls,{title:"Brand List",count:O.length,searchProps:{value:E,onChange:N=>{T(N),z(1)},placeholder:"Search brands..."},embedded:!0})}),e.jsx(Et,{isOpen:j,onClose:()=>y(!1),title:f?"Edit Brand":"Add Brand",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsx(ue,{label:"Code",value:g.code,onChange:N=>w({...g,code:N.target.value.toLowerCase()}),placeholder:"e.g., cipla",required:!0}),e.jsx(ue,{label:"Name",value:g.name,onChange:N=>w({...g,name:N.target.value}),placeholder:"e.g., Cipla",required:!0}),e.jsx(ue,{label:"Description (Optional)",value:g.description,onChange:N=>w({...g,description:N.target.value}),placeholder:"Brand description"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:A,children:A?"Saving...":f?"Update":"Create"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Brand",message:`Are you sure you want to delete "${Q?.name}"? This action cannot be undone.`,confirmText:"Delete Brand"})]})}function DN(){const{user:n}=Ie(),{hasPermission:r}=Zt(),c=Be(),[i,u]=m.useState([]),[h,x]=m.useState(!0),[j,y]=m.useState(!1),[f,p]=m.useState(null),[g,w]=m.useState({code:"",name:"",description:""}),[A,k]=m.useState(!1),[S,b]=m.useState(""),[E,T]=m.useState(""),[D,z]=m.useState(1),R=10;m.useEffect(()=>{n&&!r("manufacturers.view")&&c("/")},[n,c,r]),m.useEffect(()=>{W()},[]);const W=async()=>{x(!0);try{const N=await Me.listManufacturers();u(N.data||[])}catch(N){console.error("Failed to load manufacturers:",N)}finally{x(!1)}},I=()=>{p(null),w({code:"",name:"",description:""}),b(""),y(!0)},q=N=>{p(N),w({code:N.code,name:N.name,description:N.description||""}),b(""),y(!0)},oe=async N=>{if(N.preventDefault(),!g.code||!g.name){b("Code and Name are required");return}k(!0),b("");try{f?await Me.updateManufacturer(f.id,g):await Me.createManufacturer(g),y(!1),W()}catch(_){b(_.response?.data?.detail||"Failed to save")}finally{k(!1)}},[U,M]=m.useState(!1),[Q,he]=m.useState(null),xe=N=>{he(N),M(!0)},be=async()=>{if(Q)try{await Me.deleteManufacturer(Q.id),window.toast?.success("Manufacturer deleted successfully"),W()}catch(N){console.error("Failed to delete manufacturer:",N),window.toast?.error(N.response?.data?.detail||"Failed to delete manufacturer")}finally{M(!1),he(null)}},O=i.filter(N=>N.name.toLowerCase().includes(E.toLowerCase())||N.code.toLowerCase().includes(E.toLowerCase())),V=O.slice((D-1)*R,D*R),se={total:i.length,active:i.filter(N=>N.is_active).length,inactive:i.filter(N=>!N.is_active).length},te=[{header:"Code",key:"code",render:N=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:N.code})},{header:"Manufacturer",key:"name",render:N=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:N.name}),N.description&&e.jsx("div",{className:"text-xs text-slate-500",children:N.description})]})},{header:"Status",key:"is_active",render:N=>e.jsx($e,{variant:N.is_active?"success":"secondary",children:N.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:N=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("manufacturers.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>q(N),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("manufacturers.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>xe(N),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(me,{children:[e.jsx(me.Header,{title:"Manufacturers",subtitle:"Manage medicine manufacturer masters",actions:r("manufacturers.create")&&e.jsxs(le,{variant:"primary",onClick:I,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Manufacturer"]})}),e.jsxs(me.KPICards,{children:[e.jsx(ve,{title:"Total Manufacturers",value:se.total,icon:"factory",isActive:!0}),e.jsx(ve,{title:"Active",value:se.active,icon:"check_circle",trend:"neutral"}),e.jsx(ve,{title:"Inactive",value:se.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(me.DataTable,{columns:te,data:V,loading:h,emptyMessage:"No manufacturers found.",pagination:{currentPage:D,totalPages:Math.ceil(O.length/R),onPageChange:z,totalItems:O.length,pageSize:R},headerSlot:e.jsx(me.ListControls,{title:"Manufacturer List",count:O.length,searchProps:{value:E,onChange:N=>{T(N),z(1)},placeholder:"Search manufacturers..."},embedded:!0})}),e.jsx(Et,{isOpen:j,onClose:()=>y(!1),title:f?"Edit Manufacturer":"Add Manufacturer",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsx(ue,{label:"Code",value:g.code,onChange:N=>w({...g,code:N.target.value.toLowerCase()}),placeholder:"e.g., sunpharma",required:!0}),e.jsx(ue,{label:"Name",value:g.name,onChange:N=>w({...g,name:N.target.value}),placeholder:"e.g., Sun Pharmaceutical",required:!0}),e.jsx(ue,{label:"Description (Optional)",value:g.description,onChange:N=>w({...g,description:N.target.value}),placeholder:"Manufacturer description"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>y(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:A,children:A?"Saving...":f?"Update":"Create"})]})]})}),e.jsx(Ut,{isOpen:U,onClose:()=>M(!1),onConfirm:be,title:"Delete Manufacturer",message:`Are you sure you want to delete "${Q?.name}"? This action cannot be undone.`,confirmText:"Delete Manufacturer"})]})}function RN(){const n=Be(),{logout:r}=Ie();return m.useEffect(()=>{const c=()=>{console.log("Session expired - redirecting to login"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),r(),n("/login",{replace:!0})};return window.addEventListener("auth:session-expired",c),()=>window.removeEventListener("auth:session-expired",c)},[n,r]),null}function MN({children:n}){const{user:r,loading:c}=Ie();return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Initializing..."})]})}):r?e.jsx(e.Fragment,{children:n}):e.jsx(F0,{to:"/login",replace:!0})}function ON(){return e.jsx(Ej,{})}function zN(){return e.jsx(xj,{children:e.jsx(yj,{children:e.jsx(vj,{children:e.jsxs(jj,{children:[e.jsx(wj,{}),e.jsxs(_y,{children:[e.jsxs(ty,{children:[e.jsx(ye,{path:"/login",element:e.jsx(Cj,{})}),e.jsxs(ye,{path:"/",element:e.jsx(MN,{children:e.jsx(_j,{})}),children:[e.jsx(ye,{index:!0,element:e.jsx(ON,{})}),e.jsx(ye,{path:"users",element:e.jsx(Ij,{})}),e.jsx(ye,{path:"roles",element:e.jsx(vN,{})}),e.jsx(ye,{path:"login-activity",element:e.jsx(yN,{})}),e.jsx(ye,{path:"warehouses",element:e.jsx(zj,{})}),e.jsx(ye,{path:"warehouses/add",element:e.jsx(xN,{})}),e.jsx(ye,{path:"warehouses/edit/:id",element:e.jsx(hN,{})}),e.jsx(ye,{path:"warehouses/stock",element:e.jsx(N0,{})}),e.jsx(ye,{path:"shops",element:e.jsx(Gj,{})}),e.jsx(ye,{path:"shops/add",element:e.jsx(Pj,{})}),e.jsx(ye,{path:"shops/:id/edit",element:e.jsx(Vj,{})}),e.jsx(ye,{path:"shops/stock",element:e.jsx(N0,{})}),e.jsx(ye,{path:"warehouse-mapping",element:e.jsx(pN,{})}),e.jsx(ye,{path:"medicines",element:e.jsx(Fj,{})}),e.jsx(ye,{path:"medicines/add",element:e.jsx(Yj,{})}),e.jsx(ye,{path:"medicines/:id",element:e.jsx($j,{})}),e.jsx(ye,{path:"medicines/:id/edit",element:e.jsx(Qj,{})}),e.jsx(ye,{path:"categories",element:e.jsx(jN,{})}),e.jsx(ye,{path:"units",element:e.jsx(NN,{})}),e.jsx(ye,{path:"hsn",element:e.jsx(wN,{})}),e.jsx(ye,{path:"gst",element:e.jsx(kN,{})}),e.jsx(ye,{path:"gst-slabs",element:e.jsx(SN,{})}),e.jsx(ye,{path:"suppliers",element:e.jsx(_N,{})}),e.jsx(ye,{path:"adjustment-reasons",element:e.jsx(CN,{})}),e.jsx(ye,{path:"payment-methods",element:e.jsx(EN,{})}),e.jsx(ye,{path:"medicine-types",element:e.jsx(AN,{})}),e.jsx(ye,{path:"brands",element:e.jsx(TN,{})}),e.jsx(ye,{path:"manufacturers",element:e.jsx(DN,{})}),e.jsx(ye,{path:"racks",element:e.jsx(fN,{})}),e.jsx(ye,{path:"inventory",element:e.jsx(fd,{})}),e.jsx(ye,{path:"inventory/adjust",element:e.jsx(gN,{})}),e.jsx(ye,{path:"inventory-oversight",element:e.jsx($n,{})}),e.jsx(ye,{path:"inventory-oversight/warehouse",element:e.jsx($n,{})}),e.jsx(ye,{path:"inventory-oversight/shop",element:e.jsx($n,{})}),e.jsx(ye,{path:"inventory-oversight/expiry",element:e.jsx($n,{})}),e.jsx(ye,{path:"inventory-oversight/dead-stock",element:e.jsx($n,{})}),e.jsx(ye,{path:"analytics/dispatch",element:e.jsx(_0,{})})," ",e.jsx(ye,{path:"analytics/demand",element:e.jsx(wi,{})})," ",e.jsx(ye,{path:"customers",element:e.jsx(Jj,{})}),e.jsx(ye,{path:"employees",element:e.jsx(Wj,{})}),e.jsx(ye,{path:"employees/attendance",element:e.jsx(eN,{})}),e.jsx(ye,{path:"employees/attendance/report",element:e.jsx(tN,{})}),e.jsx(ye,{path:"employees/salary",element:e.jsx(aN,{})}),e.jsx(ye,{path:"dispatches",element:e.jsx(_0,{})}),e.jsx(ye,{path:"dispatches/create",element:e.jsx(sN,{})}),e.jsx(ye,{path:"dispatches/:id",element:e.jsx(lN,{})}),e.jsx(ye,{path:"purchase-requests",element:e.jsx(nN,{})}),e.jsx(ye,{path:"sales",element:e.jsx(S0,{})}),e.jsx(ye,{path:"sales/pos",element:e.jsx(uN,{})}),e.jsx(ye,{path:"sales/invoices",element:e.jsx(S0,{})}),e.jsx(ye,{path:"sales/returns",element:e.jsx(Kj,{})}),e.jsx(ye,{path:"reports",element:e.jsx(wi,{})}),e.jsx(ye,{path:"reports/sales",element:e.jsx(wi,{})}),e.jsx(ye,{path:"reports/expiry",element:e.jsx(Xj,{})}),e.jsx(ye,{path:"reports/tax",element:e.jsx(Zj,{})}),e.jsx(ye,{path:"reports/inventory",element:e.jsx(fd,{})}),e.jsx(ye,{path:"reports/inventory-aging",element:e.jsx(fd,{})})," ",e.jsx(ye,{path:"reports/compliance",element:e.jsx(wi,{})})," ",e.jsx(ye,{path:"notifications",element:e.jsx(mN,{})}),e.jsx(ye,{path:"settings",element:e.jsx(w0,{})}),e.jsx(ye,{path:"settings/application",element:e.jsx(w0,{})}),e.jsx(ye,{path:"settings/system",element:e.jsx(pd,{})}),e.jsx(ye,{path:"feature-flags",element:e.jsx(pd,{})})," ",e.jsx(ye,{path:"audit-logs",element:e.jsx(bN,{})}),e.jsx(ye,{path:"backup-restore",element:e.jsx(pd,{})})," "]}),e.jsx(ye,{path:"*",element:e.jsx(F0,{to:"/",replace:!0})})]}),e.jsx(RN,{})]})]})})})})}const C0=localStorage.getItem("theme");C0==="dark"||!C0&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");tb.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(zN,{})}));
