(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const x of u)if(x.type==="childList")for(const h of x.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function c(u){const x={};return u.integrity&&(x.integrity=u.integrity),u.referrerPolicy&&(x.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?x.credentials="include":u.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function i(u){if(u.ep)return;u.ep=!0;const x=c(u);fetch(u.href,x)}})();var ad={exports:{}},Bn={};var qx;function Qg(){if(qx)return Bn;qx=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(i,u,x){var h=null;if(x!==void 0&&(h=""+x),u.key!==void 0&&(h=""+u.key),"key"in u){x={};for(var N in u)N!=="key"&&(x[N]=u[N])}else x=u;return u=x.ref,{$$typeof:n,type:i,key:h,ref:u!==void 0?u:null,props:x}}return Bn.Fragment=r,Bn.jsx=c,Bn.jsxs=c,Bn}var Bx;function Vg(){return Bx||(Bx=1,ad.exports=Qg()),ad.exports}var e=Vg(),sd={exports:{}},Te={};var Hx;function Xg(){if(Hx)return Te;Hx=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),h=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),w=Symbol.iterator;function _(p){return p===null||typeof p!="object"?null:(p=w&&p[w]||p["@@iterator"],typeof p=="function"?p:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,y={};function E(p,M,ne){this.props=p,this.context=M,this.refs=y,this.updater=ne||k}E.prototype.isReactComponent={},E.prototype.setState=function(p,M){if(typeof p!="object"&&typeof p!="function"&&p!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,p,M,"setState")},E.prototype.forceUpdate=function(p){this.updater.enqueueForceUpdate(this,p,"forceUpdate")};function A(){}A.prototype=E.prototype;function U(p,M,ne){this.props=p,this.context=M,this.refs=y,this.updater=ne||k}var D=U.prototype=new A;D.constructor=U,S(D,E.prototype),D.isPureReactComponent=!0;var R=Array.isArray;function H(){}var P={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function re(p,M,ne){var Y=ne.ref;return{$$typeof:n,type:p,key:M,ref:Y!==void 0?Y:null,props:ne}}function G(p,M){return re(p.type,M,p.props)}function I(p){return typeof p=="object"&&p!==null&&p.$$typeof===n}function T(p){var M={"=":"=0",":":"=2"};return"$"+p.replace(/[=:]/g,function(ne){return M[ne]})}var ce=/\/+/g;function oe(p,M){return typeof p=="object"&&p!==null&&p.key!=null?T(""+p.key):M.toString(36)}function ye(p){switch(p.status){case"fulfilled":return p.value;case"rejected":throw p.reason;default:switch(typeof p.status=="string"?p.then(H,H):(p.status="pending",p.then(function(M){p.status==="pending"&&(p.status="fulfilled",p.value=M)},function(M){p.status==="pending"&&(p.status="rejected",p.reason=M)})),p.status){case"fulfilled":return p.value;case"rejected":throw p.reason}}throw p}function z(p,M,ne,Y,Z){var ve=typeof p;(ve==="undefined"||ve==="boolean")&&(p=null);var be=!1;if(p===null)be=!0;else switch(ve){case"bigint":case"string":case"number":be=!0;break;case"object":switch(p.$$typeof){case n:case r:be=!0;break;case f:return be=p._init,z(be(p._payload),M,ne,Y,Z)}}if(be)return Z=Z(p),be=Y===""?"."+oe(p,0):Y,R(Z)?(ne="",be!=null&&(ne=be.replace(ce,"$&/")+"/"),z(Z,M,ne,"",function(se){return se})):Z!=null&&(I(Z)&&(Z=G(Z,ne+(Z.key==null||p&&p.key===Z.key?"":(""+Z.key).replace(ce,"$&/")+"/")+be)),M.push(Z)),1;be=0;var De=Y===""?".":Y+":";if(R(p))for(var ae=0;ae<p.length;ae++)Y=p[ae],ve=De+oe(Y,ae),be+=z(Y,M,ne,ve,Z);else if(ae=_(p),typeof ae=="function")for(p=ae.call(p),ae=0;!(Y=p.next()).done;)Y=Y.value,ve=De+oe(Y,ae++),be+=z(Y,M,ne,ve,Z);else if(ve==="object"){if(typeof p.then=="function")return z(ye(p),M,ne,Y,Z);throw M=String(p),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return be}function $(p,M,ne){if(p==null)return p;var Y=[],Z=0;return z(p,Y,"","",function(ve){return M.call(ne,ve,Z++)}),Y}function te(p){if(p._status===-1){var M=p._result;M=M(),M.then(function(ne){(p._status===0||p._status===-1)&&(p._status=1,p._result=ne)},function(ne){(p._status===0||p._status===-1)&&(p._status=2,p._result=ne)}),p._status===-1&&(p._status=0,p._result=M)}if(p._status===1)return p._result.default;throw p._result}var me=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},B={map:$,forEach:function(p,M,ne){$(p,function(){M.apply(this,arguments)},ne)},count:function(p){var M=0;return $(p,function(){M++}),M},toArray:function(p){return $(p,function(M){return M})||[]},only:function(p){if(!I(p))throw Error("React.Children.only expected to receive a single React element child.");return p}};return Te.Activity=b,Te.Children=B,Te.Component=E,Te.Fragment=c,Te.Profiler=u,Te.PureComponent=U,Te.StrictMode=i,Te.Suspense=v,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Te.__COMPILER_RUNTIME={__proto__:null,c:function(p){return P.H.useMemoCache(p)}},Te.cache=function(p){return function(){return p.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(p,M,ne){if(p==null)throw Error("The argument must be a React element, but you passed "+p+".");var Y=S({},p.props),Z=p.key;if(M!=null)for(ve in M.key!==void 0&&(Z=""+M.key),M)!L.call(M,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&M.ref===void 0||(Y[ve]=M[ve]);var ve=arguments.length-2;if(ve===1)Y.children=ne;else if(1<ve){for(var be=Array(ve),De=0;De<ve;De++)be[De]=arguments[De+2];Y.children=be}return re(p.type,Z,Y)},Te.createContext=function(p){return p={$$typeof:h,_currentValue:p,_currentValue2:p,_threadCount:0,Provider:null,Consumer:null},p.Provider=p,p.Consumer={$$typeof:x,_context:p},p},Te.createElement=function(p,M,ne){var Y,Z={},ve=null;if(M!=null)for(Y in M.key!==void 0&&(ve=""+M.key),M)L.call(M,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(Z[Y]=M[Y]);var be=arguments.length-2;if(be===1)Z.children=ne;else if(1<be){for(var De=Array(be),ae=0;ae<be;ae++)De[ae]=arguments[ae+2];Z.children=De}if(p&&p.defaultProps)for(Y in be=p.defaultProps,be)Z[Y]===void 0&&(Z[Y]=be[Y]);return re(p,ve,Z)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(p){return{$$typeof:N,render:p}},Te.isValidElement=I,Te.lazy=function(p){return{$$typeof:f,_payload:{_status:-1,_result:p},_init:te}},Te.memo=function(p,M){return{$$typeof:g,type:p,compare:M===void 0?null:M}},Te.startTransition=function(p){var M=P.T,ne={};P.T=ne;try{var Y=p(),Z=P.S;Z!==null&&Z(ne,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(H,me)}catch(ve){me(ve)}finally{M!==null&&ne.types!==null&&(M.types=ne.types),P.T=M}},Te.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Te.use=function(p){return P.H.use(p)},Te.useActionState=function(p,M,ne){return P.H.useActionState(p,M,ne)},Te.useCallback=function(p,M){return P.H.useCallback(p,M)},Te.useContext=function(p){return P.H.useContext(p)},Te.useDebugValue=function(){},Te.useDeferredValue=function(p,M){return P.H.useDeferredValue(p,M)},Te.useEffect=function(p,M){return P.H.useEffect(p,M)},Te.useEffectEvent=function(p){return P.H.useEffectEvent(p)},Te.useId=function(){return P.H.useId()},Te.useImperativeHandle=function(p,M,ne){return P.H.useImperativeHandle(p,M,ne)},Te.useInsertionEffect=function(p,M){return P.H.useInsertionEffect(p,M)},Te.useLayoutEffect=function(p,M){return P.H.useLayoutEffect(p,M)},Te.useMemo=function(p,M){return P.H.useMemo(p,M)},Te.useOptimistic=function(p,M){return P.H.useOptimistic(p,M)},Te.useReducer=function(p,M,ne){return P.H.useReducer(p,M,ne)},Te.useRef=function(p){return P.H.useRef(p)},Te.useState=function(p){return P.H.useState(p)},Te.useSyncExternalStore=function(p,M,ne){return P.H.useSyncExternalStore(p,M,ne)},Te.useTransition=function(){return P.H.useTransition()},Te.version="19.2.3",Te}var Gx;function _d(){return Gx||(Gx=1,sd.exports=Xg()),sd.exports}var m=_d(),ld={exports:{}},Hn={},nd={exports:{}},rd={};var Fx;function Zg(){return Fx||(Fx=1,(function(n){function r(z,$){var te=z.length;z.push($);e:for(;0<te;){var me=te-1>>>1,B=z[me];if(0<u(B,$))z[me]=$,z[te]=B,te=me;else break e}}function c(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var $=z[0],te=z.pop();if(te!==$){z[0]=te;e:for(var me=0,B=z.length,p=B>>>1;me<p;){var M=2*(me+1)-1,ne=z[M],Y=M+1,Z=z[Y];if(0>u(ne,te))Y<B&&0>u(Z,ne)?(z[me]=Z,z[Y]=te,me=Y):(z[me]=ne,z[M]=te,me=M);else if(Y<B&&0>u(Z,te))z[me]=Z,z[Y]=te,me=Y;else break e}}return $}function u(z,$){var te=z.sortIndex-$.sortIndex;return te!==0?te:z.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;n.unstable_now=function(){return x.now()}}else{var h=Date,N=h.now();n.unstable_now=function(){return h.now()-N}}var v=[],g=[],f=1,b=null,w=3,_=!1,k=!1,S=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var $=c(g);$!==null;){if($.callback===null)i(g);else if($.startTime<=z)i(g),$.sortIndex=$.expirationTime,r(v,$);else break;$=c(g)}}function R(z){if(S=!1,D(z),!k)if(c(v)!==null)k=!0,H||(H=!0,T());else{var $=c(g);$!==null&&ye(R,$.startTime-z)}}var H=!1,P=-1,L=5,re=-1;function G(){return y?!0:!(n.unstable_now()-re<L)}function I(){if(y=!1,H){var z=n.unstable_now();re=z;var $=!0;try{e:{k=!1,S&&(S=!1,A(P),P=-1),_=!0;var te=w;try{t:{for(D(z),b=c(v);b!==null&&!(b.expirationTime>z&&G());){var me=b.callback;if(typeof me=="function"){b.callback=null,w=b.priorityLevel;var B=me(b.expirationTime<=z);if(z=n.unstable_now(),typeof B=="function"){b.callback=B,D(z),$=!0;break t}b===c(v)&&i(v),D(z)}else i(v);b=c(v)}if(b!==null)$=!0;else{var p=c(g);p!==null&&ye(R,p.startTime-z),$=!1}}break e}finally{b=null,w=te,_=!1}$=void 0}}finally{$?T():H=!1}}}var T;if(typeof U=="function")T=function(){U(I)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,oe=ce.port2;ce.port1.onmessage=I,T=function(){oe.postMessage(null)}}else T=function(){E(I,0)};function ye(z,$){P=E(function(){z(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(z){switch(w){case 1:case 2:case 3:var $=3;break;default:$=w}var te=w;w=$;try{return z()}finally{w=te}},n.unstable_requestPaint=function(){y=!0},n.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=w;w=z;try{return $()}finally{w=te}},n.unstable_scheduleCallback=function(z,$,te){var me=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?me+te:me):te=me,z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=te+B,z={id:f++,callback:$,priorityLevel:z,startTime:te,expirationTime:B,sortIndex:-1},te>me?(z.sortIndex=te,r(g,z),c(v)===null&&z===c(g)&&(S?(A(P),P=-1):S=!0,ye(R,te-me))):(z.sortIndex=B,r(v,z),k||_||(k=!0,H||(H=!0,T()))),z},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(z){var $=w;return function(){var te=w;w=$;try{return z.apply(this,arguments)}finally{w=te}}}})(rd)),rd}var $x;function Ig(){return $x||($x=1,nd.exports=Zg()),nd.exports}var id={exports:{}},Mt={};var Yx;function Kg(){if(Yx)return Mt;Yx=1;var n=_d();function r(v){var g="https://react.dev/errors/"+v;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)g+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+v+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var i={d:{f:c,r:function(){throw Error(r(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},u=Symbol.for("react.portal");function x(v,g,f){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:v,containerInfo:g,implementation:f}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function N(v,g){if(v==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Mt.createPortal=function(v,g){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return x(v,g,null,f)},Mt.flushSync=function(v){var g=h.T,f=i.p;try{if(h.T=null,i.p=2,v)return v()}finally{h.T=g,i.p=f,i.d.f()}},Mt.preconnect=function(v,g){typeof v=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(v,g))},Mt.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},Mt.preinit=function(v,g){if(typeof v=="string"&&g&&typeof g.as=="string"){var f=g.as,b=N(f,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;f==="style"?i.d.S(v,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:_}):f==="script"&&i.d.X(v,{crossOrigin:b,integrity:w,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Mt.preinitModule=function(v,g){if(typeof v=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var f=N(g.as,g.crossOrigin);i.d.M(v,{crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(v)},Mt.preload=function(v,g){if(typeof v=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var f=g.as,b=N(f,g.crossOrigin);i.d.L(v,f,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Mt.preloadModule=function(v,g){if(typeof v=="string")if(g){var f=N(g.as,g.crossOrigin);i.d.m(v,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(v)},Mt.requestFormReset=function(v){i.d.r(v)},Mt.unstable_batchedUpdates=function(v,g){return v(g)},Mt.useFormState=function(v,g,f){return h.H.useFormState(v,g,f)},Mt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Mt.version="19.2.3",Mt}var Px;function Jg(){if(Px)return id.exports;Px=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),id.exports=Kg(),id.exports}var Qx;function Wg(){if(Qx)return Hn;Qx=1;var n=Ig(),r=_d(),c=Jg();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function h(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function N(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function v(t){if(x(t)!==t)throw Error(i(188))}function g(t){var a=t.alternate;if(!a){if(a=x(t),a===null)throw Error(i(188));return a!==t?null:t}for(var s=t,l=a;;){var o=s.return;if(o===null)break;var d=o.alternate;if(d===null){if(l=o.return,l!==null){s=l;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===s)return v(o),t;if(d===l)return v(o),a;d=d.sibling}throw Error(i(188))}if(s.return!==l.return)s=o,l=d;else{for(var j=!1,C=o.child;C;){if(C===s){j=!0,s=o,l=d;break}if(C===l){j=!0,l=o,s=d;break}C=C.sibling}if(!j){for(C=d.child;C;){if(C===s){j=!0,s=d,l=o;break}if(C===l){j=!0,l=d,s=o;break}C=C.sibling}if(!j)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?t:a}function f(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=f(t),a!==null)return a;t=t.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),U=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function T(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Symbol.for("react.client.reference");function oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ce?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case S:return"Fragment";case E:return"Profiler";case y:return"StrictMode";case R:return"Suspense";case H:return"SuspenseList";case re:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case U:return t.displayName||"Context";case A:return(t._context.displayName||"Context")+".Consumer";case D:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return a=t.displayName||null,a!==null?a:oe(t.type)||"Memo";case L:a=t._payload,t=t._init;try{return oe(t(a))}catch{}}return null}var ye=Array.isArray,z=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},me=[],B=-1;function p(t){return{current:t}}function M(t){0>B||(t.current=me[B],me[B]=null,B--)}function ne(t,a){B++,me[B]=t.current,t.current=a}var Y=p(null),Z=p(null),ve=p(null),be=p(null);function De(t,a){switch(ne(ve,a),ne(Z,t),ne(Y,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?ix(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=ix(a),t=ox(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}M(Y),ne(Y,t)}function ae(){M(Y),M(Z),M(ve)}function se(t){t.memoizedState!==null&&ne(be,t);var a=Y.current,s=ox(a,t.type);a!==s&&(ne(Z,t),ne(Y,s))}function W(t){Z.current===t&&(M(Y),M(Z)),be.current===t&&(M(be),On._currentValue=te)}var ge,xe;function _e(t){if(ge===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);ge=a&&a[1]||"",xe=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+t+xe}var Je=!1;function Ra(t,a){if(!t||Je)return"";Je=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ee){var K=ee}Reflect.construct(t,[],he)}else{try{he.call()}catch(ee){K=ee}t.call(he.prototype)}}else{try{throw Error()}catch(ee){K=ee}(he=t())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ee){if(ee&&K&&typeof ee.stack=="string")return[ee.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),j=d[0],C=d[1];if(j&&C){var O=j.split(`
`),X=C.split(`
`);for(o=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;o<X.length&&!X[o].includes("DetermineComponentFrameRoot");)o++;if(l===O.length||o===X.length)for(l=O.length-1,o=X.length-1;1<=l&&0<=o&&O[l]!==X[o];)o--;for(;1<=l&&0<=o;l--,o--)if(O[l]!==X[o]){if(l!==1||o!==1)do if(l--,o--,0>o||O[l]!==X[o]){var ie=`
`+O[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=o);break}}}finally{Je=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?_e(s):""}function es(t,a){switch(t.tag){case 26:case 27:case 5:return _e(t.type);case 16:return _e("Lazy");case 13:return t.child!==a&&a!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Ra(t.type,!1);case 11:return Ra(t.type.render,!1);case 1:return Ra(t.type,!0);case 31:return _e("Activity");default:return""}}function Cs(t){try{var a="",s=null;do a+=es(t,s),s=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ma=Object.prototype.hasOwnProperty,Bt=n.unstable_scheduleCallback,ts=n.unstable_cancelCallback,Nt=n.unstable_shouldYield,Ql=n.unstable_requestPaint,Ot=n.unstable_now,ue=n.unstable_getCurrentPriorityLevel,Ee=n.unstable_ImmediatePriority,Ae=n.unstable_UserBlockingPriority,Pe=n.unstable_NormalPriority,bt=n.unstable_LowPriority,Sa=n.unstable_IdlePriority,sr=n.log,ya=n.unstable_setDisableYieldValue,as=null,Dt=null;function va(t){if(typeof sr=="function"&&ya(t),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(as,t)}catch{}}var Rt=Math.clz32?Math.clz32:Dp,Ap=Math.log,Tp=Math.LN2;function Dp(t){return t>>>=0,t===0?32:31-(Ap(t)/Tp|0)|0}var lr=256,nr=262144,rr=4194304;function Es(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ir(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var o=0,d=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var C=l&134217727;return C!==0?(l=C&~d,l!==0?o=Es(l):(j&=C,j!==0?o=Es(j):s||(s=C&~t,s!==0&&(o=Es(s))))):(C=l&~d,C!==0?o=Es(C):j!==0?o=Es(j):s||(s=l&~t,s!==0&&(o=Es(s)))),o===0?0:a!==0&&a!==o&&(a&d)===0&&(d=o&-o,s=a&-a,d>=s||d===32&&(s&4194048)!==0)?a:o}function Vl(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Rp(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fd(){var t=rr;return rr<<=1,(rr&62914560)===0&&(rr=4194304),t}function $i(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Xl(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mp(t,a,s,l,o,d){var j=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var C=t.entanglements,O=t.expirationTimes,X=t.hiddenUpdates;for(s=j&~s;0<s;){var ie=31-Rt(s),he=1<<ie;C[ie]=0,O[ie]=-1;var K=X[ie];if(K!==null)for(X[ie]=null,ie=0;ie<K.length;ie++){var ee=K[ie];ee!==null&&(ee.lane&=-536870913)}s&=~he}l!==0&&$d(t,l,0),d!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=d&~(j&~a))}function $d(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Rt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function Yd(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-Rt(s),o=1<<l;o&a|t[l]&a&&(t[l]|=a),s&=~o}}function Pd(t,a){var s=a&-a;return s=(s&42)!==0?1:Yi(s),(s&(t.suspendedLanes|a))!==0?0:s}function Yi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Qd(){var t=$.p;return t!==0?t:(t=window.event,t===void 0?32:Dx(t.type))}function Vd(t,a){var s=$.p;try{return $.p=t,a()}finally{$.p=s}}var ss=Math.random().toString(36).slice(2),wt="__reactFiber$"+ss,Ht="__reactProps$"+ss,Js="__reactContainer$"+ss,Qi="__reactEvents$"+ss,zp="__reactListeners$"+ss,Op="__reactHandles$"+ss,Xd="__reactResources$"+ss,Zl="__reactMarker$"+ss;function Vi(t){delete t[wt],delete t[Ht],delete t[Qi],delete t[zp],delete t[Op]}function Ws(t){var a=t[wt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[Js]||s[wt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=px(t);t!==null;){if(s=t[wt])return s;t=px(t)}return a}t=s,s=t.parentNode}return null}function el(t){if(t=t[wt]||t[Js]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Il(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function tl(t){var a=t[Xd];return a||(a=t[Xd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function yt(t){t[Zl]=!0}var Zd=new Set,Id={};function As(t,a){al(t,a),al(t+"Capture",a)}function al(t,a){for(Id[t]=a,t=0;t<a.length;t++)Zd.add(a[t])}var Lp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kd={},Jd={};function Up(t){return Ma.call(Jd,t)?!0:Ma.call(Kd,t)?!1:Lp.test(t)?Jd[t]=!0:(Kd[t]=!0,!1)}function or(t,a,s){if(Up(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function cr(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function za(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}function ra(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wd(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qp(t,a,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,d=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return o.call(this)},set:function(j){s=""+j,d.call(this,j)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(j){s=""+j},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Xi(t){if(!t._valueTracker){var a=Wd(t)?"checked":"value";t._valueTracker=qp(t,a,""+t[a])}}function eu(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=Wd(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function dr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Bp=/[\n"\\]/g;function ia(t){return t.replace(Bp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Zi(t,a,s,l,o,d,j,C){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),a!=null?j==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+ra(a)):t.value!==""+ra(a)&&(t.value=""+ra(a)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),a!=null?Ii(t,j,ra(a)):s!=null?Ii(t,j,ra(s)):l!=null&&t.removeAttribute("value"),o==null&&d!=null&&(t.defaultChecked=!!d),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.name=""+ra(C):t.removeAttribute("name")}function tu(t,a,s,l,o,d,j,C){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),a!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||a!=null)){Xi(t);return}s=s!=null?""+ra(s):"",a=a!=null?""+ra(a):s,C||a===t.value||(t.value=a),t.defaultValue=a}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=C?t.checked:!!l,t.defaultChecked=!!l,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),Xi(t)}function Ii(t,a,s){a==="number"&&dr(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function sl(t,a,s,l){if(t=t.options,a){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=!0;for(s=0;s<t.length;s++)o=a.hasOwnProperty("$"+t[s].value),t[s].selected!==o&&(t[s].selected=o),o&&l&&(t[s].defaultSelected=!0)}else{for(s=""+ra(s),a=null,o=0;o<t.length;o++){if(t[o].value===s){t[o].selected=!0,l&&(t[o].defaultSelected=!0);return}a!==null||t[o].disabled||(a=t[o])}a!==null&&(a.selected=!0)}}function au(t,a,s){if(a!=null&&(a=""+ra(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+ra(s):""}function su(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(i(92));if(ye(l)){if(1<l.length)throw Error(i(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=ra(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),Xi(t)}function ll(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var Hp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lu(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||Hp.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function nu(t,a,s){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var o in a)l=a[o],a.hasOwnProperty(o)&&s[o]!==l&&lu(t,o,l)}else for(var d in a)a.hasOwnProperty(d)&&lu(t,d,a[d])}function Ki(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ur(t){return Fp.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Oa(){}var Ji=null;function Wi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nl=null,rl=null;function ru(t){var a=el(t);if(a&&(t=a.stateNode)){var s=t[Ht]||null;e:switch(t=a.stateNode,a.type){case"input":if(Zi(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ia(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var o=l[Ht]||null;if(!o)throw Error(i(90));Zi(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&eu(l)}break e;case"textarea":au(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&sl(t,!!s.multiple,a,!1)}}}var eo=!1;function iu(t,a,s){if(eo)return t(a,s);eo=!0;try{var l=t(a);return l}finally{if(eo=!1,(nl!==null||rl!==null)&&(Jr(),nl&&(a=nl,t=rl,rl=nl=null,ru(a),t)))for(a=0;a<t.length;a++)ru(t[a])}}function Kl(t,a){var s=t.stateNode;if(s===null)return null;var l=s[Ht]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(i(231,a,typeof s));return s}var La=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(La)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){to=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{to=!1}var ls=null,ao=null,mr=null;function ou(){if(mr)return mr;var t,a=ao,s=a.length,l,o="value"in ls?ls.value:ls.textContent,d=o.length;for(t=0;t<s&&a[t]===o[t];t++);var j=s-t;for(l=1;l<=j&&a[s-l]===o[d-l];l++);return mr=o.slice(t,1<l?1-l:void 0)}function hr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function xr(){return!0}function cu(){return!1}function Gt(t){function a(s,l,o,d,j){this._reactName=s,this._targetInst=o,this.type=l,this.nativeEvent=d,this.target=j,this.currentTarget=null;for(var C in t)t.hasOwnProperty(C)&&(s=t[C],this[C]=s?s(d):d[C]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?xr:cu,this.isPropagationStopped=cu,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),a}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=Gt(Ts),Wl=b({},Ts,{view:0,detail:0}),$p=Gt(Wl),so,lo,en,fr=b({},Wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==en&&(en&&t.type==="mousemove"?(so=t.screenX-en.screenX,lo=t.screenY-en.screenY):lo=so=0,en=t),so)},movementY:function(t){return"movementY"in t?t.movementY:lo}}),du=Gt(fr),Yp=b({},fr,{dataTransfer:0}),Pp=Gt(Yp),Qp=b({},Wl,{relatedTarget:0}),no=Gt(Qp),Vp=b({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Xp=Gt(Vp),Zp=b({},Ts,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ip=Gt(Zp),Kp=b({},Ts,{data:0}),uu=Gt(Kp),Jp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ef={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tf(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=ef[t])?!!a[t]:!1}function ro(){return tf}var af=b({},Wl,{key:function(t){if(t.key){var a=Jp[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=hr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(t){return t.type==="keypress"?hr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sf=Gt(af),lf=b({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mu=Gt(lf),nf=b({},Wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),rf=Gt(nf),of=b({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=Gt(of),df=b({},fr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uf=Gt(df),mf=b({},Ts,{newState:0,oldState:0}),hf=Gt(mf),xf=[9,13,27,32],io=La&&"CompositionEvent"in window,tn=null;La&&"documentMode"in document&&(tn=document.documentMode);var pf=La&&"TextEvent"in window&&!tn,hu=La&&(!io||tn&&8<tn&&11>=tn),xu=" ",pu=!1;function fu(t,a){switch(t){case"keyup":return xf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var il=!1;function ff(t,a){switch(t){case"compositionend":return gu(a);case"keypress":return a.which!==32?null:(pu=!0,xu);case"textInput":return t=a.data,t===xu&&pu?null:t;default:return null}}function gf(t,a){if(il)return t==="compositionend"||!io&&fu(t,a)?(t=ou(),mr=ao=ls=null,il=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return hu&&a.locale!=="ko"?null:a.data;default:return null}}var bf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!bf[t.type]:a==="textarea"}function yu(t,a,s,l){nl?rl?rl.push(l):rl=[l]:nl=l,a=ni(a,"onChange"),0<a.length&&(s=new pr("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var an=null,sn=null;function yf(t){tx(t,0)}function gr(t){var a=Il(t);if(eu(a))return t}function vu(t,a){if(t==="change")return a}var ju=!1;if(La){var oo;if(La){var co="oninput"in document;if(!co){var Nu=document.createElement("div");Nu.setAttribute("oninput","return;"),co=typeof Nu.oninput=="function"}oo=co}else oo=!1;ju=oo&&(!document.documentMode||9<document.documentMode)}function wu(){an&&(an.detachEvent("onpropertychange",ku),sn=an=null)}function ku(t){if(t.propertyName==="value"&&gr(sn)){var a=[];yu(a,sn,t,Wi(t)),iu(yf,a)}}function vf(t,a,s){t==="focusin"?(wu(),an=a,sn=s,an.attachEvent("onpropertychange",ku)):t==="focusout"&&wu()}function jf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gr(sn)}function Nf(t,a){if(t==="click")return gr(a)}function wf(t,a){if(t==="input"||t==="change")return gr(a)}function kf(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Kt=typeof Object.is=="function"?Object.is:kf;function ln(t,a){if(Kt(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var o=s[l];if(!Ma.call(a,o)||!Kt(t[o],a[o]))return!1}return!0}function Su(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _u(t,a){var s=Su(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Su(s)}}function Cu(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Cu(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Eu(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=dr(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=dr(t.document)}return a}function uo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Sf=La&&"documentMode"in document&&11>=document.documentMode,ol=null,mo=null,nn=null,ho=!1;function Au(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ho||ol==null||ol!==dr(l)||(l=ol,"selectionStart"in l&&uo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),nn&&ln(nn,l)||(nn=l,l=ni(mo,"onSelect"),0<l.length&&(a=new pr("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=ol)))}function Ds(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var cl={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionrun:Ds("Transition","TransitionRun"),transitionstart:Ds("Transition","TransitionStart"),transitioncancel:Ds("Transition","TransitionCancel"),transitionend:Ds("Transition","TransitionEnd")},xo={},Tu={};La&&(Tu=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Rs(t){if(xo[t])return xo[t];if(!cl[t])return t;var a=cl[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in Tu)return xo[t]=a[s];return t}var Du=Rs("animationend"),Ru=Rs("animationiteration"),Mu=Rs("animationstart"),_f=Rs("transitionrun"),Cf=Rs("transitionstart"),Ef=Rs("transitioncancel"),zu=Rs("transitionend"),Ou=new Map,po="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");po.push("scrollEnd");function ja(t,a){Ou.set(t,a),As(a,[t])}var br=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},oa=[],dl=0,fo=0;function yr(){for(var t=dl,a=fo=dl=0;a<t;){var s=oa[a];oa[a++]=null;var l=oa[a];oa[a++]=null;var o=oa[a];oa[a++]=null;var d=oa[a];if(oa[a++]=null,l!==null&&o!==null){var j=l.pending;j===null?o.next=o:(o.next=j.next,j.next=o),l.pending=o}d!==0&&Lu(s,o,d)}}function vr(t,a,s,l){oa[dl++]=t,oa[dl++]=a,oa[dl++]=s,oa[dl++]=l,fo|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function go(t,a,s,l){return vr(t,a,s,l),jr(t)}function Ms(t,a){return vr(t,null,null,a),jr(t)}function Lu(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var o=!1,d=t.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(o=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,o&&a!==null&&(o=31-Rt(s),t=d.hiddenUpdates,l=t[o],l===null?t[o]=[a]:l.push(a),a.lane=s|536870912),d):null}function jr(t){if(50<En)throw En=0,_c=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ul={};function Af(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,a,s,l){return new Af(t,a,s,l)}function bo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ua(t,a){var s=t.alternate;return s===null?(s=Jt(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Uu(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Nr(t,a,s,l,o,d){var j=0;if(l=t,typeof t=="function")bo(t)&&(j=1);else if(typeof t=="string")j=zg(t,s,Y.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case re:return t=Jt(31,s,a,o),t.elementType=re,t.lanes=d,t;case S:return zs(s.children,o,d,a);case y:j=8,o|=24;break;case E:return t=Jt(12,s,a,o|2),t.elementType=E,t.lanes=d,t;case R:return t=Jt(13,s,a,o),t.elementType=R,t.lanes=d,t;case H:return t=Jt(19,s,a,o),t.elementType=H,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:j=10;break e;case A:j=9;break e;case D:j=11;break e;case P:j=14;break e;case L:j=16,l=null;break e}j=29,s=Error(i(130,t===null?"null":typeof t,"")),l=null}return a=Jt(j,s,a,o),a.elementType=t,a.type=l,a.lanes=d,a}function zs(t,a,s,l){return t=Jt(7,t,l,a),t.lanes=s,t}function yo(t,a,s){return t=Jt(6,t,null,a),t.lanes=s,t}function qu(t){var a=Jt(18,null,null,0);return a.stateNode=t,a}function vo(t,a,s){return a=Jt(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Bu=new WeakMap;function ca(t,a){if(typeof t=="object"&&t!==null){var s=Bu.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Cs(a)},Bu.set(t,a),a)}return{value:t,source:a,stack:Cs(a)}}var ml=[],hl=0,wr=null,rn=0,da=[],ua=0,ns=null,_a=1,Ca="";function qa(t,a){ml[hl++]=rn,ml[hl++]=wr,wr=t,rn=a}function Hu(t,a,s){da[ua++]=_a,da[ua++]=Ca,da[ua++]=ns,ns=t;var l=_a;t=Ca;var o=32-Rt(l)-1;l&=~(1<<o),s+=1;var d=32-Rt(a)+o;if(30<d){var j=o-o%5;d=(l&(1<<j)-1).toString(32),l>>=j,o-=j,_a=1<<32-Rt(a)+o|s<<o|l,Ca=d+t}else _a=1<<d|s<<o|l,Ca=t}function jo(t){t.return!==null&&(qa(t,1),Hu(t,1,0))}function No(t){for(;t===wr;)wr=ml[--hl],ml[hl]=null,rn=ml[--hl],ml[hl]=null;for(;t===ns;)ns=da[--ua],da[ua]=null,Ca=da[--ua],da[ua]=null,_a=da[--ua],da[ua]=null}function Gu(t,a){da[ua++]=_a,da[ua++]=Ca,da[ua++]=ns,_a=a.id,Ca=a.overflow,ns=t}var kt=null,st=null,Ge=!1,rs=null,ma=!1,wo=Error(i(519));function is(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw on(ca(a,t)),wo}function Fu(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[wt]=t,a[Ht]=l,s){case"dialog":Ue("cancel",a),Ue("close",a);break;case"iframe":case"object":case"embed":Ue("load",a);break;case"video":case"audio":for(s=0;s<Tn.length;s++)Ue(Tn[s],a);break;case"source":Ue("error",a);break;case"img":case"image":case"link":Ue("error",a),Ue("load",a);break;case"details":Ue("toggle",a);break;case"input":Ue("invalid",a),tu(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ue("invalid",a);break;case"textarea":Ue("invalid",a),su(a,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||nx(a.textContent,s)?(l.popover!=null&&(Ue("beforetoggle",a),Ue("toggle",a)),l.onScroll!=null&&Ue("scroll",a),l.onScrollEnd!=null&&Ue("scrollend",a),l.onClick!=null&&(a.onclick=Oa),a=!0):a=!1,a||is(t,!0)}function $u(t){for(kt=t.return;kt;)switch(kt.tag){case 5:case 31:case 13:ma=!1;return;case 27:case 3:ma=!0;return;default:kt=kt.return}}function xl(t){if(t!==kt)return!1;if(!Ge)return $u(t),Ge=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Gc(t.type,t.memoizedProps)),s=!s),s&&st&&is(t),$u(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));st=xx(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));st=xx(t)}else a===27?(a=st,js(t.type)?(t=Qc,Qc=null,st=t):st=a):st=kt?xa(t.stateNode.nextSibling):null;return!0}function Os(){st=kt=null,Ge=!1}function ko(){var t=rs;return t!==null&&(Pt===null?Pt=t:Pt.push.apply(Pt,t),rs=null),t}function on(t){rs===null?rs=[t]:rs.push(t)}var So=p(null),Ls=null,Ba=null;function os(t,a,s){ne(So,a._currentValue),a._currentValue=s}function Ha(t){t._currentValue=So.current,M(So)}function _o(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function Co(t,a,s,l){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){var j=o.child;d=d.firstContext;e:for(;d!==null;){var C=d;d=o;for(var O=0;O<a.length;O++)if(C.context===a[O]){d.lanes|=s,C=d.alternate,C!==null&&(C.lanes|=s),_o(d.return,s,t),l||(j=null);break e}d=C.next}}else if(o.tag===18){if(j=o.return,j===null)throw Error(i(341));j.lanes|=s,d=j.alternate,d!==null&&(d.lanes|=s),_o(j,s,t),j=null}else j=o.child;if(j!==null)j.return=o;else for(j=o;j!==null;){if(j===t){j=null;break}if(o=j.sibling,o!==null){o.return=j.return,j=o;break}j=j.return}o=j}}function pl(t,a,s,l){t=null;for(var o=a,d=!1;o!==null;){if(!d){if((o.flags&524288)!==0)d=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var j=o.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var C=o.type;Kt(o.pendingProps.value,j.value)||(t!==null?t.push(C):t=[C])}}else if(o===be.current){if(j=o.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(On):t=[On])}o=o.return}t!==null&&Co(a,t,s,l),a.flags|=262144}function kr(t){for(t=t.firstContext;t!==null;){if(!Kt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Us(t){Ls=t,Ba=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function St(t){return Yu(Ls,t)}function Sr(t,a){return Ls===null&&Us(t),Yu(t,a)}function Yu(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Ba===null){if(t===null)throw Error(i(308));Ba=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ba=Ba.next=a;return s}var Tf=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},Df=n.unstable_scheduleCallback,Rf=n.unstable_NormalPriority,ht={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Eo(){return{controller:new Tf,data:new Map,refCount:0}}function cn(t){t.refCount--,t.refCount===0&&Df(Rf,function(){t.controller.abort()})}var dn=null,Ao=0,fl=0,gl=null;function Mf(t,a){if(dn===null){var s=dn=[];Ao=0,fl=Rc(),gl={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Ao++,a.then(Pu,Pu),a}function Pu(){if(--Ao===0&&dn!==null){gl!==null&&(gl.status="fulfilled");var t=dn;dn=null,fl=0,gl=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function zf(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(o){s.push(o)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var o=0;o<s.length;o++)(0,s[o])(a)},function(o){for(l.status="rejected",l.reason=o,o=0;o<s.length;o++)(0,s[o])(void 0)}),l}var Qu=z.S;z.S=function(t,a){Ah=Ot(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Mf(t,a),Qu!==null&&Qu(t,a)};var qs=p(null);function To(){var t=qs.current;return t!==null?t:at.pooledCache}function _r(t,a){a===null?ne(qs,qs.current):ne(qs,a.pool)}function Vu(){var t=To();return t===null?null:{parent:ht._currentValue,pool:t}}var bl=Error(i(460)),Do=Error(i(474)),Cr=Error(i(542)),Er={then:function(){}};function Xu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Zu(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(Oa,Oa),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Ku(t),t;default:if(typeof a.status=="string")a.then(Oa,Oa);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var o=a;o.status="fulfilled",o.value=l}},function(l){if(a.status==="pending"){var o=a;o.status="rejected",o.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Ku(t),t}throw Hs=a,bl}}function Bs(t){try{var a=t._init;return a(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Hs=s,bl):s}}var Hs=null;function Iu(){if(Hs===null)throw Error(i(459));var t=Hs;return Hs=null,t}function Ku(t){if(t===bl||t===Cr)throw Error(i(483))}var yl=null,un=0;function Ar(t){var a=un;return un+=1,yl===null&&(yl=[]),Zu(yl,t,a)}function mn(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Tr(t,a){throw a.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Ju(t){function a(F,q){if(t){var V=F.deletions;V===null?(F.deletions=[q],F.flags|=16):V.push(q)}}function s(F,q){if(!t)return null;for(;q!==null;)a(F,q),q=q.sibling;return null}function l(F){for(var q=new Map;F!==null;)F.key!==null?q.set(F.key,F):q.set(F.index,F),F=F.sibling;return q}function o(F,q){return F=Ua(F,q),F.index=0,F.sibling=null,F}function d(F,q,V){return F.index=V,t?(V=F.alternate,V!==null?(V=V.index,V<q?(F.flags|=67108866,q):V):(F.flags|=67108866,q)):(F.flags|=1048576,q)}function j(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function C(F,q,V,de){return q===null||q.tag!==6?(q=yo(V,F.mode,de),q.return=F,q):(q=o(q,V),q.return=F,q)}function O(F,q,V,de){var Se=V.type;return Se===S?ie(F,q,V.props.children,de,V.key):q!==null&&(q.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===L&&Bs(Se)===q.type)?(q=o(q,V.props),mn(q,V),q.return=F,q):(q=Nr(V.type,V.key,V.props,null,F.mode,de),mn(q,V),q.return=F,q)}function X(F,q,V,de){return q===null||q.tag!==4||q.stateNode.containerInfo!==V.containerInfo||q.stateNode.implementation!==V.implementation?(q=vo(V,F.mode,de),q.return=F,q):(q=o(q,V.children||[]),q.return=F,q)}function ie(F,q,V,de,Se){return q===null||q.tag!==7?(q=zs(V,F.mode,de,Se),q.return=F,q):(q=o(q,V),q.return=F,q)}function he(F,q,V){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=yo(""+q,F.mode,V),q.return=F,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _:return V=Nr(q.type,q.key,q.props,null,F.mode,V),mn(V,q),V.return=F,V;case k:return q=vo(q,F.mode,V),q.return=F,q;case L:return q=Bs(q),he(F,q,V)}if(ye(q)||T(q))return q=zs(q,F.mode,V,null),q.return=F,q;if(typeof q.then=="function")return he(F,Ar(q),V);if(q.$$typeof===U)return he(F,Sr(F,q),V);Tr(F,q)}return null}function K(F,q,V,de){var Se=q!==null?q.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Se!==null?null:C(F,q,""+V,de);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case _:return V.key===Se?O(F,q,V,de):null;case k:return V.key===Se?X(F,q,V,de):null;case L:return V=Bs(V),K(F,q,V,de)}if(ye(V)||T(V))return Se!==null?null:ie(F,q,V,de,null);if(typeof V.then=="function")return K(F,q,Ar(V),de);if(V.$$typeof===U)return K(F,q,Sr(F,V),de);Tr(F,V)}return null}function ee(F,q,V,de,Se){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return F=F.get(V)||null,C(q,F,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case _:return F=F.get(de.key===null?V:de.key)||null,O(q,F,de,Se);case k:return F=F.get(de.key===null?V:de.key)||null,X(q,F,de,Se);case L:return de=Bs(de),ee(F,q,V,de,Se)}if(ye(de)||T(de))return F=F.get(V)||null,ie(q,F,de,Se,null);if(typeof de.then=="function")return ee(F,q,V,Ar(de),Se);if(de.$$typeof===U)return ee(F,q,V,Sr(q,de),Se);Tr(q,de)}return null}function we(F,q,V,de){for(var Se=null,Fe=null,ke=q,ze=q=0,Be=null;ke!==null&&ze<V.length;ze++){ke.index>ze?(Be=ke,ke=null):Be=ke.sibling;var $e=K(F,ke,V[ze],de);if($e===null){ke===null&&(ke=Be);break}t&&ke&&$e.alternate===null&&a(F,ke),q=d($e,q,ze),Fe===null?Se=$e:Fe.sibling=$e,Fe=$e,ke=Be}if(ze===V.length)return s(F,ke),Ge&&qa(F,ze),Se;if(ke===null){for(;ze<V.length;ze++)ke=he(F,V[ze],de),ke!==null&&(q=d(ke,q,ze),Fe===null?Se=ke:Fe.sibling=ke,Fe=ke);return Ge&&qa(F,ze),Se}for(ke=l(ke);ze<V.length;ze++)Be=ee(ke,F,ze,V[ze],de),Be!==null&&(t&&Be.alternate!==null&&ke.delete(Be.key===null?ze:Be.key),q=d(Be,q,ze),Fe===null?Se=Be:Fe.sibling=Be,Fe=Be);return t&&ke.forEach(function(_s){return a(F,_s)}),Ge&&qa(F,ze),Se}function Ce(F,q,V,de){if(V==null)throw Error(i(151));for(var Se=null,Fe=null,ke=q,ze=q=0,Be=null,$e=V.next();ke!==null&&!$e.done;ze++,$e=V.next()){ke.index>ze?(Be=ke,ke=null):Be=ke.sibling;var _s=K(F,ke,$e.value,de);if(_s===null){ke===null&&(ke=Be);break}t&&ke&&_s.alternate===null&&a(F,ke),q=d(_s,q,ze),Fe===null?Se=_s:Fe.sibling=_s,Fe=_s,ke=Be}if($e.done)return s(F,ke),Ge&&qa(F,ze),Se;if(ke===null){for(;!$e.done;ze++,$e=V.next())$e=he(F,$e.value,de),$e!==null&&(q=d($e,q,ze),Fe===null?Se=$e:Fe.sibling=$e,Fe=$e);return Ge&&qa(F,ze),Se}for(ke=l(ke);!$e.done;ze++,$e=V.next())$e=ee(ke,F,ze,$e.value,de),$e!==null&&(t&&$e.alternate!==null&&ke.delete($e.key===null?ze:$e.key),q=d($e,q,ze),Fe===null?Se=$e:Fe.sibling=$e,Fe=$e);return t&&ke.forEach(function(Pg){return a(F,Pg)}),Ge&&qa(F,ze),Se}function tt(F,q,V,de){if(typeof V=="object"&&V!==null&&V.type===S&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case _:e:{for(var Se=V.key;q!==null;){if(q.key===Se){if(Se=V.type,Se===S){if(q.tag===7){s(F,q.sibling),de=o(q,V.props.children),de.return=F,F=de;break e}}else if(q.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===L&&Bs(Se)===q.type){s(F,q.sibling),de=o(q,V.props),mn(de,V),de.return=F,F=de;break e}s(F,q);break}else a(F,q);q=q.sibling}V.type===S?(de=zs(V.props.children,F.mode,de,V.key),de.return=F,F=de):(de=Nr(V.type,V.key,V.props,null,F.mode,de),mn(de,V),de.return=F,F=de)}return j(F);case k:e:{for(Se=V.key;q!==null;){if(q.key===Se)if(q.tag===4&&q.stateNode.containerInfo===V.containerInfo&&q.stateNode.implementation===V.implementation){s(F,q.sibling),de=o(q,V.children||[]),de.return=F,F=de;break e}else{s(F,q);break}else a(F,q);q=q.sibling}de=vo(V,F.mode,de),de.return=F,F=de}return j(F);case L:return V=Bs(V),tt(F,q,V,de)}if(ye(V))return we(F,q,V,de);if(T(V)){if(Se=T(V),typeof Se!="function")throw Error(i(150));return V=Se.call(V),Ce(F,q,V,de)}if(typeof V.then=="function")return tt(F,q,Ar(V),de);if(V.$$typeof===U)return tt(F,q,Sr(F,V),de);Tr(F,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,q!==null&&q.tag===6?(s(F,q.sibling),de=o(q,V),de.return=F,F=de):(s(F,q),de=yo(V,F.mode,de),de.return=F,F=de),j(F)):s(F,q)}return function(F,q,V,de){try{un=0;var Se=tt(F,q,V,de);return yl=null,Se}catch(ke){if(ke===bl||ke===Cr)throw ke;var Fe=Jt(29,ke,null,F.mode);return Fe.lanes=de,Fe.return=F,Fe}}}var Gs=Ju(!0),Wu=Ju(!1),cs=!1;function Ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mo(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ds(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function us(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var o=l.pending;return o===null?a.next=a:(a.next=o.next,o.next=a),l.pending=a,a=jr(t),Lu(t,null,s),a}return vr(t,l,a,s),jr(t)}function hn(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,Yd(t,s)}}function zo(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var o=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var j={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?o=d=j:d=d.next=j,s=s.next}while(s!==null);d===null?o=d=a:d=d.next=a}else o=d=a;s={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var Oo=!1;function xn(){if(Oo){var t=gl;if(t!==null)throw t}}function pn(t,a,s,l){Oo=!1;var o=t.updateQueue;cs=!1;var d=o.firstBaseUpdate,j=o.lastBaseUpdate,C=o.shared.pending;if(C!==null){o.shared.pending=null;var O=C,X=O.next;O.next=null,j===null?d=X:j.next=X,j=O;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,C=ie.lastBaseUpdate,C!==j&&(C===null?ie.firstBaseUpdate=X:C.next=X,ie.lastBaseUpdate=O))}if(d!==null){var he=o.baseState;j=0,ie=X=O=null,C=d;do{var K=C.lane&-536870913,ee=K!==C.lane;if(ee?(qe&K)===K:(l&K)===K){K!==0&&K===fl&&(Oo=!0),ie!==null&&(ie=ie.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var we=t,Ce=C;K=a;var tt=s;switch(Ce.tag){case 1:if(we=Ce.payload,typeof we=="function"){he=we.call(tt,he,K);break e}he=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ce.payload,K=typeof we=="function"?we.call(tt,he,K):we,K==null)break e;he=b({},he,K);break e;case 2:cs=!0}}K=C.callback,K!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=o.callbacks,ee===null?o.callbacks=[K]:ee.push(K))}else ee={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ie===null?(X=ie=ee,O=he):ie=ie.next=ee,j|=K;if(C=C.next,C===null){if(C=o.shared.pending,C===null)break;ee=C,C=ee.next,ee.next=null,o.lastBaseUpdate=ee,o.shared.pending=null}}while(!0);ie===null&&(O=he),o.baseState=O,o.firstBaseUpdate=X,o.lastBaseUpdate=ie,d===null&&(o.shared.lanes=0),fs|=j,t.lanes=j,t.memoizedState=he}}function em(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function tm(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)em(s[t],a)}var vl=p(null),Dr=p(0);function am(t,a){t=Za,ne(Dr,t),ne(vl,a),Za=t|a.baseLanes}function Lo(){ne(Dr,Za),ne(vl,vl.current)}function Uo(){Za=Dr.current,M(vl),M(Dr)}var Wt=p(null),ha=null;function ms(t){var a=t.alternate;ne(ut,ut.current&1),ne(Wt,t),ha===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(ha=t)}function qo(t){ne(ut,ut.current),ne(Wt,t),ha===null&&(ha=t)}function sm(t){t.tag===22?(ne(ut,ut.current),ne(Wt,t),ha===null&&(ha=t)):hs()}function hs(){ne(ut,ut.current),ne(Wt,Wt.current)}function ea(t){M(Wt),ha===t&&(ha=null),M(ut)}var ut=p(0);function Rr(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Yc(s)||Pc(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ga=0,Re=null,We=null,xt=null,Mr=!1,jl=!1,Fs=!1,zr=0,fn=0,Nl=null,Of=0;function it(){throw Error(i(321))}function Bo(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!Kt(t[s],a[s]))return!1;return!0}function Ho(t,a,s,l,o,d){return Ga=d,Re=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=t===null||t.memoizedState===null?Hm:tc,Fs=!1,d=s(l,o),Fs=!1,jl&&(d=nm(a,s,l,o)),lm(t),d}function lm(t){z.H=yn;var a=We!==null&&We.next!==null;if(Ga=0,xt=We=Re=null,Mr=!1,fn=0,Nl=null,a)throw Error(i(300));t===null||pt||(t=t.dependencies,t!==null&&kr(t)&&(pt=!0))}function nm(t,a,s,l){Re=t;var o=0;do{if(jl&&(Nl=null),fn=0,jl=!1,25<=o)throw Error(i(301));if(o+=1,xt=We=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}z.H=Gm,d=a(s,l)}while(jl);return d}function Lf(){var t=z.H,a=t.useState()[0];return a=typeof a.then=="function"?gn(a):a,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(Re.flags|=1024),a}function Go(){var t=zr!==0;return zr=0,t}function Fo(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function $o(t){if(Mr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Mr=!1}Ga=0,xt=We=Re=null,jl=!1,fn=zr=0,Nl=null}function Lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Re.memoizedState=xt=t:xt=xt.next=t,xt}function mt(){if(We===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var a=xt===null?Re.memoizedState:xt.next;if(a!==null)xt=a,We=t;else{if(t===null)throw Re.alternate===null?Error(i(467)):Error(i(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},xt===null?Re.memoizedState=xt=t:xt=xt.next=t}return xt}function Or(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gn(t){var a=fn;return fn+=1,Nl===null&&(Nl=[]),t=Zu(Nl,t,a),a=Re,(xt===null?a.memoizedState:xt.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?Hm:tc),t}function Lr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gn(t);if(t.$$typeof===U)return St(t)}throw Error(i(438,String(t)))}function Yo(t){var a=null,s=Re.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(o){return o.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Or(),Re.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=G;return a.index++,s}function Fa(t,a){return typeof a=="function"?a(t):a}function Ur(t){var a=mt();return Po(a,We,t)}function Po(t,a,s){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var o=t.baseQueue,d=l.pending;if(d!==null){if(o!==null){var j=o.next;o.next=d.next,d.next=j}a.baseQueue=o=d,l.pending=null}if(d=t.baseState,o===null)t.memoizedState=d;else{a=o.next;var C=j=null,O=null,X=a,ie=!1;do{var he=X.lane&-536870913;if(he!==X.lane?(qe&he)===he:(Ga&he)===he){var K=X.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),he===fl&&(ie=!0);else if((Ga&K)===K){X=X.next,K===fl&&(ie=!0);continue}else he={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},O===null?(C=O=he,j=d):O=O.next=he,Re.lanes|=K,fs|=K;he=X.action,Fs&&s(d,he),d=X.hasEagerState?X.eagerState:s(d,he)}else K={lane:he,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},O===null?(C=O=K,j=d):O=O.next=K,Re.lanes|=he,fs|=he;X=X.next}while(X!==null&&X!==a);if(O===null?j=d:O.next=C,!Kt(d,t.memoizedState)&&(pt=!0,ie&&(s=gl,s!==null)))throw s;t.memoizedState=d,t.baseState=j,t.baseQueue=O,l.lastRenderedState=d}return o===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Qo(t){var a=mt(),s=a.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var l=s.dispatch,o=s.pending,d=a.memoizedState;if(o!==null){s.pending=null;var j=o=o.next;do d=t(d,j.action),j=j.next;while(j!==o);Kt(d,a.memoizedState)||(pt=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),s.lastRenderedState=d}return[d,l]}function rm(t,a,s){var l=Re,o=mt(),d=Ge;if(d){if(s===void 0)throw Error(i(407));s=s()}else s=a();var j=!Kt((We||o).memoizedState,s);if(j&&(o.memoizedState=s,pt=!0),o=o.queue,Zo(cm.bind(null,l,o,t),[t]),o.getSnapshot!==a||j||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,wl(9,{destroy:void 0},om.bind(null,l,o,s,a),null),at===null)throw Error(i(349));d||(Ga&127)!==0||im(l,a,s)}return s}function im(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=Re.updateQueue,a===null?(a=Or(),Re.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function om(t,a,s,l){a.value=s,a.getSnapshot=l,dm(a)&&um(t)}function cm(t,a,s){return s(function(){dm(a)&&um(t)})}function dm(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!Kt(t,s)}catch{return!0}}function um(t){var a=Ms(t,2);a!==null&&Qt(a,t,2)}function Vo(t){var a=Lt();if(typeof t=="function"){var s=t;if(t=s(),Fs){va(!0);try{s()}finally{va(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:t},a}function mm(t,a,s,l){return t.baseState=s,Po(t,We,typeof l=="function"?l:Fa)}function Uf(t,a,s,l,o){if(Hr(t))throw Error(i(485));if(t=a.action,t!==null){var d={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){d.listeners.push(j)}};z.T!==null?s(!0):d.isTransition=!1,l(d),s=a.pending,s===null?(d.next=a.pending=d,hm(a,d)):(d.next=s.next,a.pending=s.next=d)}}function hm(t,a){var s=a.action,l=a.payload,o=t.state;if(a.isTransition){var d=z.T,j={};z.T=j;try{var C=s(o,l),O=z.S;O!==null&&O(j,C),xm(t,a,C)}catch(X){Xo(t,a,X)}finally{d!==null&&j.types!==null&&(d.types=j.types),z.T=d}}else try{d=s(o,l),xm(t,a,d)}catch(X){Xo(t,a,X)}}function xm(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){pm(t,a,l)},function(l){return Xo(t,a,l)}):pm(t,a,s)}function pm(t,a,s){a.status="fulfilled",a.value=s,fm(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,hm(t,s)))}function Xo(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,fm(a),a=a.next;while(a!==l)}t.action=null}function fm(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function gm(t,a){return a}function bm(t,a){if(Ge){var s=at.formState;if(s!==null){e:{var l=Re;if(Ge){if(st){t:{for(var o=st,d=ma;o.nodeType!==8;){if(!d){o=null;break t}if(o=xa(o.nextSibling),o===null){o=null;break t}}d=o.data,o=d==="F!"||d==="F"?o:null}if(o){st=xa(o.nextSibling),l=o.data==="F!";break e}}is(l)}l=!1}l&&(a=s[0])}}return s=Lt(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gm,lastRenderedState:a},s.queue=l,s=Um.bind(null,Re,l),l.dispatch=s,l=Vo(!1),d=ec.bind(null,Re,!1,l.queue),l=Lt(),o={state:a,dispatch:null,action:t,pending:null},l.queue=o,s=Uf.bind(null,Re,o,d,s),o.dispatch=s,l.memoizedState=t,[a,s,!1]}function ym(t){var a=mt();return vm(a,We,t)}function vm(t,a,s){if(a=Po(t,a,gm)[0],t=Ur(Fa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=gn(a)}catch(j){throw j===bl?Cr:j}else l=a;a=mt();var o=a.queue,d=o.dispatch;return s!==a.memoizedState&&(Re.flags|=2048,wl(9,{destroy:void 0},qf.bind(null,o,s),null)),[l,d,t]}function qf(t,a){t.action=a}function jm(t){var a=mt(),s=We;if(s!==null)return vm(a,s,t);mt(),a=a.memoizedState,s=mt();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function wl(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=Re.updateQueue,a===null&&(a=Or(),Re.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function Nm(){return mt().memoizedState}function qr(t,a,s,l){var o=Lt();Re.flags|=t,o.memoizedState=wl(1|a,{destroy:void 0},s,l===void 0?null:l)}function Br(t,a,s,l){var o=mt();l=l===void 0?null:l;var d=o.memoizedState.inst;We!==null&&l!==null&&Bo(l,We.memoizedState.deps)?o.memoizedState=wl(a,d,s,l):(Re.flags|=t,o.memoizedState=wl(1|a,d,s,l))}function wm(t,a){qr(8390656,8,t,a)}function Zo(t,a){Br(2048,8,t,a)}function Bf(t){Re.flags|=4;var a=Re.updateQueue;if(a===null)a=Or(),Re.updateQueue=a,a.events=[t];else{var s=a.events;s===null?a.events=[t]:s.push(t)}}function km(t){var a=mt().memoizedState;return Bf({ref:a,nextImpl:t}),function(){if((Qe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Sm(t,a){return Br(4,2,t,a)}function _m(t,a){return Br(4,4,t,a)}function Cm(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Em(t,a,s){s=s!=null?s.concat([t]):null,Br(4,4,Cm.bind(null,a,t),s)}function Io(){}function Am(t,a){var s=mt();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&Bo(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function Tm(t,a){var s=mt();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&Bo(a,l[1]))return l[0];if(l=t(),Fs){va(!0);try{t()}finally{va(!1)}}return s.memoizedState=[l,a],l}function Ko(t,a,s){return s===void 0||(Ga&1073741824)!==0&&(qe&261930)===0?t.memoizedState=a:(t.memoizedState=s,t=Dh(),Re.lanes|=t,fs|=t,s)}function Dm(t,a,s,l){return Kt(s,a)?s:vl.current!==null?(t=Ko(t,s,l),Kt(t,a)||(pt=!0),t):(Ga&42)===0||(Ga&1073741824)!==0&&(qe&261930)===0?(pt=!0,t.memoizedState=s):(t=Dh(),Re.lanes|=t,fs|=t,a)}function Rm(t,a,s,l,o){var d=$.p;$.p=d!==0&&8>d?d:8;var j=z.T,C={};z.T=C,ec(t,!1,a,s);try{var O=o(),X=z.S;if(X!==null&&X(C,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ie=zf(O,l);bn(t,a,ie,sa(t))}else bn(t,a,l,sa(t))}catch(he){bn(t,a,{then:function(){},status:"rejected",reason:he},sa())}finally{$.p=d,j!==null&&C.types!==null&&(j.types=C.types),z.T=j}}function Hf(){}function Jo(t,a,s,l){if(t.tag!==5)throw Error(i(476));var o=Mm(t).queue;Rm(t,o,a,te,s===null?Hf:function(){return zm(t),s(l)})}function Mm(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:te},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function zm(t){var a=Mm(t);a.next===null&&(a=t.alternate.memoizedState),bn(t,a.next.queue,{},sa())}function Wo(){return St(On)}function Om(){return mt().memoizedState}function Lm(){return mt().memoizedState}function Gf(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=sa();t=ds(s);var l=us(a,t,s);l!==null&&(Qt(l,a,s),hn(l,a,s)),a={cache:Eo()},t.payload=a;return}a=a.return}}function Ff(t,a,s){var l=sa();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Hr(t)?qm(a,s):(s=go(t,a,s,l),s!==null&&(Qt(s,t,l),Bm(s,a,l)))}function Um(t,a,s){var l=sa();bn(t,a,s,l)}function bn(t,a,s,l){var o={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hr(t))qm(a,o);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var j=a.lastRenderedState,C=d(j,s);if(o.hasEagerState=!0,o.eagerState=C,Kt(C,j))return vr(t,a,o,0),at===null&&yr(),!1}catch{}if(s=go(t,a,o,l),s!==null)return Qt(s,t,l),Bm(s,a,l),!0}return!1}function ec(t,a,s,l){if(l={lane:2,revertLane:Rc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Hr(t)){if(a)throw Error(i(479))}else a=go(t,s,l,2),a!==null&&Qt(a,t,2)}function Hr(t){var a=t.alternate;return t===Re||a!==null&&a===Re}function qm(t,a){jl=Mr=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function Bm(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,Yd(t,s)}}var yn={readContext:St,use:Lr,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};yn.useEffectEvent=it;var Hm={readContext:St,use:Lr,useCallback:function(t,a){return Lt().memoizedState=[t,a===void 0?null:a],t},useContext:St,useEffect:wm,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,qr(4194308,4,Cm.bind(null,a,t),s)},useLayoutEffect:function(t,a){return qr(4194308,4,t,a)},useInsertionEffect:function(t,a){qr(4,2,t,a)},useMemo:function(t,a){var s=Lt();a=a===void 0?null:a;var l=t();if(Fs){va(!0);try{t()}finally{va(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=Lt();if(s!==void 0){var o=s(a);if(Fs){va(!0);try{s(a)}finally{va(!1)}}}else o=a;return l.memoizedState=l.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},l.queue=t,t=t.dispatch=Ff.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var a=Lt();return t={current:t},a.memoizedState=t},useState:function(t){t=Vo(t);var a=t.queue,s=Um.bind(null,Re,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Io,useDeferredValue:function(t,a){var s=Lt();return Ko(s,t,a)},useTransition:function(){var t=Vo(!1);return t=Rm.bind(null,Re,t.queue,!0,!1),Lt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=Re,o=Lt();if(Ge){if(s===void 0)throw Error(i(407));s=s()}else{if(s=a(),at===null)throw Error(i(349));(qe&127)!==0||im(l,a,s)}o.memoizedState=s;var d={value:s,getSnapshot:a};return o.queue=d,wm(cm.bind(null,l,d,t),[t]),l.flags|=2048,wl(9,{destroy:void 0},om.bind(null,l,d,s,a),null),s},useId:function(){var t=Lt(),a=at.identifierPrefix;if(Ge){var s=Ca,l=_a;s=(l&~(1<<32-Rt(l)-1)).toString(32)+s,a="_"+a+"R_"+s,s=zr++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=Of++,a="_"+a+"r_"+s.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Wo,useFormState:bm,useActionState:bm,useOptimistic:function(t){var a=Lt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=ec.bind(null,Re,!0,s),s.dispatch=a,[t,a]},useMemoCache:Yo,useCacheRefresh:function(){return Lt().memoizedState=Gf.bind(null,Re)},useEffectEvent:function(t){var a=Lt(),s={impl:t};return a.memoizedState=s,function(){if((Qe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},tc={readContext:St,use:Lr,useCallback:Am,useContext:St,useEffect:Zo,useImperativeHandle:Em,useInsertionEffect:Sm,useLayoutEffect:_m,useMemo:Tm,useReducer:Ur,useRef:Nm,useState:function(){return Ur(Fa)},useDebugValue:Io,useDeferredValue:function(t,a){var s=mt();return Dm(s,We.memoizedState,t,a)},useTransition:function(){var t=Ur(Fa)[0],a=mt().memoizedState;return[typeof t=="boolean"?t:gn(t),a]},useSyncExternalStore:rm,useId:Om,useHostTransitionStatus:Wo,useFormState:ym,useActionState:ym,useOptimistic:function(t,a){var s=mt();return mm(s,We,t,a)},useMemoCache:Yo,useCacheRefresh:Lm};tc.useEffectEvent=km;var Gm={readContext:St,use:Lr,useCallback:Am,useContext:St,useEffect:Zo,useImperativeHandle:Em,useInsertionEffect:Sm,useLayoutEffect:_m,useMemo:Tm,useReducer:Qo,useRef:Nm,useState:function(){return Qo(Fa)},useDebugValue:Io,useDeferredValue:function(t,a){var s=mt();return We===null?Ko(s,t,a):Dm(s,We.memoizedState,t,a)},useTransition:function(){var t=Qo(Fa)[0],a=mt().memoizedState;return[typeof t=="boolean"?t:gn(t),a]},useSyncExternalStore:rm,useId:Om,useHostTransitionStatus:Wo,useFormState:jm,useActionState:jm,useOptimistic:function(t,a){var s=mt();return We!==null?mm(s,We,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Yo,useCacheRefresh:Lm};Gm.useEffectEvent=km;function ac(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:b({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var sc={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=sa(),o=ds(l);o.payload=a,s!=null&&(o.callback=s),a=us(t,o,l),a!==null&&(Qt(a,t,l),hn(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=sa(),o=ds(l);o.tag=1,o.payload=a,s!=null&&(o.callback=s),a=us(t,o,l),a!==null&&(Qt(a,t,l),hn(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=sa(),l=ds(s);l.tag=2,a!=null&&(l.callback=a),a=us(t,l,s),a!==null&&(Qt(a,t,s),hn(a,t,s))}};function Fm(t,a,s,l,o,d,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,j):a.prototype&&a.prototype.isPureReactComponent?!ln(s,l)||!ln(o,d):!0}function $m(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&sc.enqueueReplaceState(a,a.state,null)}function $s(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=b({},s));for(var o in t)s[o]===void 0&&(s[o]=t[o])}return s}function Ym(t){br(t)}function Pm(t){console.error(t)}function Qm(t){br(t)}function Gr(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Vm(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function lc(t,a,s){return s=ds(s),s.tag=3,s.payload={element:null},s.callback=function(){Gr(t,a)},s}function Xm(t){return t=ds(t),t.tag=3,t}function Zm(t,a,s,l){var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var d=l.value;t.payload=function(){return o(d)},t.callback=function(){Vm(a,s,l)}}var j=s.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){Vm(a,s,l),typeof o!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function $f(t,a,s,l,o){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&pl(a,s,o,!0),s=Wt.current,s!==null){switch(s.tag){case 31:case 13:return ha===null?Wr():s.alternate===null&&ot===0&&(ot=3),s.flags&=-257,s.flags|=65536,s.lanes=o,l===Er?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),Ac(t,l,o)),!1;case 22:return s.flags|=65536,l===Er?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),Ac(t,l,o)),!1}throw Error(i(435,s.tag))}return Ac(t,l,o),Wr(),!1}if(Ge)return a=Wt.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=o,l!==wo&&(t=Error(i(422),{cause:l}),on(ca(t,s)))):(l!==wo&&(a=Error(i(423),{cause:l}),on(ca(a,s))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,l=ca(l,s),o=lc(t.stateNode,l,o),zo(t,o),ot!==4&&(ot=2)),!1;var d=Error(i(520),{cause:l});if(d=ca(d,s),Cn===null?Cn=[d]:Cn.push(d),ot!==4&&(ot=2),a===null)return!0;l=ca(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=o&-o,s.lanes|=t,t=lc(s.stateNode,l,t),zo(s,t),!1;case 1:if(a=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(gs===null||!gs.has(d))))return s.flags|=65536,o&=-o,s.lanes|=o,o=Xm(o),Zm(o,t,s,l),zo(s,o),!1}s=s.return}while(s!==null);return!1}var nc=Error(i(461)),pt=!1;function _t(t,a,s,l){a.child=t===null?Wu(a,null,s,l):Gs(a,t.child,s,l)}function Im(t,a,s,l,o){s=s.render;var d=a.ref;if("ref"in l){var j={};for(var C in l)C!=="ref"&&(j[C]=l[C])}else j=l;return Us(a),l=Ho(t,a,s,j,d,o),C=Go(),t!==null&&!pt?(Fo(t,a,o),$a(t,a,o)):(Ge&&C&&jo(a),a.flags|=1,_t(t,a,l,o),a.child)}function Km(t,a,s,l,o){if(t===null){var d=s.type;return typeof d=="function"&&!bo(d)&&d.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=d,Jm(t,a,d,l,o)):(t=Nr(s.type,null,l,a,a.mode,o),t.ref=a.ref,t.return=a,a.child=t)}if(d=t.child,!hc(t,o)){var j=d.memoizedProps;if(s=s.compare,s=s!==null?s:ln,s(j,l)&&t.ref===a.ref)return $a(t,a,o)}return a.flags|=1,t=Ua(d,l),t.ref=a.ref,t.return=a,a.child=t}function Jm(t,a,s,l,o){if(t!==null){var d=t.memoizedProps;if(ln(d,l)&&t.ref===a.ref)if(pt=!1,a.pendingProps=l=d,hc(t,o))(t.flags&131072)!==0&&(pt=!0);else return a.lanes=t.lanes,$a(t,a,o)}return rc(t,a,s,l,o)}function Wm(t,a,s,l){var o=l.children,d=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,t!==null){for(l=a.child=t.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~d}else l=0,a.child=null;return eh(t,a,d,s,l)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&_r(a,d!==null?d.cachePool:null),d!==null?am(a,d):Lo(),sm(a);else return l=a.lanes=536870912,eh(t,a,d!==null?d.baseLanes|s:s,s,l)}else d!==null?(_r(a,d.cachePool),am(a,d),hs(),a.memoizedState=null):(t!==null&&_r(a,null),Lo(),hs());return _t(t,a,o,s),a.child}function vn(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function eh(t,a,s,l,o){var d=To();return d=d===null?null:{parent:ht._currentValue,pool:d},a.memoizedState={baseLanes:s,cachePool:d},t!==null&&_r(a,null),Lo(),sm(a),t!==null&&pl(t,a,l,!0),a.childLanes=o,null}function Fr(t,a){return a=Yr({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function th(t,a,s){return Gs(a,t.child,null,s),t=Fr(a,a.pendingProps),t.flags|=2,ea(a),a.memoizedState=null,t}function Yf(t,a,s){var l=a.pendingProps,o=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ge){if(l.mode==="hidden")return t=Fr(a,l),a.lanes=536870912,vn(null,t);if(qo(a),(t=st)?(t=hx(t,ma),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ns!==null?{id:_a,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},s=qu(t),s.return=a,a.child=s,kt=a,st=null)):t=null,t===null)throw is(a);return a.lanes=536870912,null}return Fr(a,l)}var d=t.memoizedState;if(d!==null){var j=d.dehydrated;if(qo(a),o)if(a.flags&256)a.flags&=-257,a=th(t,a,s);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(pt||pl(t,a,s,!1),o=(s&t.childLanes)!==0,pt||o){if(l=at,l!==null&&(j=Pd(l,s),j!==0&&j!==d.retryLane))throw d.retryLane=j,Ms(t,j),Qt(l,t,j),nc;Wr(),a=th(t,a,s)}else t=d.treeContext,st=xa(j.nextSibling),kt=a,Ge=!0,rs=null,ma=!1,t!==null&&Gu(a,t),a=Fr(a,l),a.flags|=4096;return a}return t=Ua(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function $r(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function rc(t,a,s,l,o){return Us(a),s=Ho(t,a,s,l,void 0,o),l=Go(),t!==null&&!pt?(Fo(t,a,o),$a(t,a,o)):(Ge&&l&&jo(a),a.flags|=1,_t(t,a,s,o),a.child)}function ah(t,a,s,l,o,d){return Us(a),a.updateQueue=null,s=nm(a,l,s,o),lm(t),l=Go(),t!==null&&!pt?(Fo(t,a,d),$a(t,a,d)):(Ge&&l&&jo(a),a.flags|=1,_t(t,a,s,d),a.child)}function sh(t,a,s,l,o){if(Us(a),a.stateNode===null){var d=ul,j=s.contextType;typeof j=="object"&&j!==null&&(d=St(j)),d=new s(l,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sc,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=l,d.state=a.memoizedState,d.refs={},Ro(a),j=s.contextType,d.context=typeof j=="object"&&j!==null?St(j):ul,d.state=a.memoizedState,j=s.getDerivedStateFromProps,typeof j=="function"&&(ac(a,s,j,l),d.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(j=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),j!==d.state&&sc.enqueueReplaceState(d,d.state,null),pn(a,l,d,o),xn(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){d=a.stateNode;var C=a.memoizedProps,O=$s(s,C);d.props=O;var X=d.context,ie=s.contextType;j=ul,typeof ie=="object"&&ie!==null&&(j=St(ie));var he=s.getDerivedStateFromProps;ie=typeof he=="function"||typeof d.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,ie||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(C||X!==j)&&$m(a,d,l,j),cs=!1;var K=a.memoizedState;d.state=K,pn(a,l,d,o),xn(),X=a.memoizedState,C||K!==X||cs?(typeof he=="function"&&(ac(a,s,he,l),X=a.memoizedState),(O=cs||Fm(a,s,O,l,K,X,j))?(ie||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=X),d.props=l,d.state=X,d.context=j,l=O):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{d=a.stateNode,Mo(t,a),j=a.memoizedProps,ie=$s(s,j),d.props=ie,he=a.pendingProps,K=d.context,X=s.contextType,O=ul,typeof X=="object"&&X!==null&&(O=St(X)),C=s.getDerivedStateFromProps,(X=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(j!==he||K!==O)&&$m(a,d,l,O),cs=!1,K=a.memoizedState,d.state=K,pn(a,l,d,o),xn();var ee=a.memoizedState;j!==he||K!==ee||cs||t!==null&&t.dependencies!==null&&kr(t.dependencies)?(typeof C=="function"&&(ac(a,s,C,l),ee=a.memoizedState),(ie=cs||Fm(a,s,ie,l,K,ee,O)||t!==null&&t.dependencies!==null&&kr(t.dependencies))?(X||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,ee,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,ee,O)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||j===t.memoizedProps&&K===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&K===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=ee),d.props=l,d.state=ee,d.context=O,l=ie):(typeof d.componentDidUpdate!="function"||j===t.memoizedProps&&K===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&K===t.memoizedState||(a.flags|=1024),l=!1)}return d=l,$r(t,a),l=(a.flags&128)!==0,d||l?(d=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,t!==null&&l?(a.child=Gs(a,t.child,null,o),a.child=Gs(a,null,s,o)):_t(t,a,s,o),a.memoizedState=d.state,t=a.child):t=$a(t,a,o),t}function lh(t,a,s,l){return Os(),a.flags|=256,_t(t,a,s,l),a.child}var ic={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oc(t){return{baseLanes:t,cachePool:Vu()}}function cc(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=aa),t}function nh(t,a,s){var l=a.pendingProps,o=!1,d=(a.flags&128)!==0,j;if((j=d)||(j=t!==null&&t.memoizedState===null?!1:(ut.current&2)!==0),j&&(o=!0,a.flags&=-129),j=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ge){if(o?ms(a):hs(),(t=st)?(t=hx(t,ma),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ns!==null?{id:_a,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},s=qu(t),s.return=a,a.child=s,kt=a,st=null)):t=null,t===null)throw is(a);return Pc(t)?a.lanes=32:a.lanes=536870912,null}var C=l.children;return l=l.fallback,o?(hs(),o=a.mode,C=Yr({mode:"hidden",children:C},o),l=zs(l,o,s,null),C.return=a,l.return=a,C.sibling=l,a.child=C,l=a.child,l.memoizedState=oc(s),l.childLanes=cc(t,j,s),a.memoizedState=ic,vn(null,l)):(ms(a),dc(a,C))}var O=t.memoizedState;if(O!==null&&(C=O.dehydrated,C!==null)){if(d)a.flags&256?(ms(a),a.flags&=-257,a=uc(t,a,s)):a.memoizedState!==null?(hs(),a.child=t.child,a.flags|=128,a=null):(hs(),C=l.fallback,o=a.mode,l=Yr({mode:"visible",children:l.children},o),C=zs(C,o,s,null),C.flags|=2,l.return=a,C.return=a,l.sibling=C,a.child=l,Gs(a,t.child,null,s),l=a.child,l.memoizedState=oc(s),l.childLanes=cc(t,j,s),a.memoizedState=ic,a=vn(null,l));else if(ms(a),Pc(C)){if(j=C.nextSibling&&C.nextSibling.dataset,j)var X=j.dgst;j=X,l=Error(i(419)),l.stack="",l.digest=j,on({value:l,source:null,stack:null}),a=uc(t,a,s)}else if(pt||pl(t,a,s,!1),j=(s&t.childLanes)!==0,pt||j){if(j=at,j!==null&&(l=Pd(j,s),l!==0&&l!==O.retryLane))throw O.retryLane=l,Ms(t,l),Qt(j,t,l),nc;Yc(C)||Wr(),a=uc(t,a,s)}else Yc(C)?(a.flags|=192,a.child=t.child,a=null):(t=O.treeContext,st=xa(C.nextSibling),kt=a,Ge=!0,rs=null,ma=!1,t!==null&&Gu(a,t),a=dc(a,l.children),a.flags|=4096);return a}return o?(hs(),C=l.fallback,o=a.mode,O=t.child,X=O.sibling,l=Ua(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,X!==null?C=Ua(X,C):(C=zs(C,o,s,null),C.flags|=2),C.return=a,l.return=a,l.sibling=C,a.child=l,vn(null,l),l=a.child,C=t.child.memoizedState,C===null?C=oc(s):(o=C.cachePool,o!==null?(O=ht._currentValue,o=o.parent!==O?{parent:O,pool:O}:o):o=Vu(),C={baseLanes:C.baseLanes|s,cachePool:o}),l.memoizedState=C,l.childLanes=cc(t,j,s),a.memoizedState=ic,vn(t.child,l)):(ms(a),s=t.child,t=s.sibling,s=Ua(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(j=a.deletions,j===null?(a.deletions=[t],a.flags|=16):j.push(t)),a.child=s,a.memoizedState=null,s)}function dc(t,a){return a=Yr({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Yr(t,a){return t=Jt(22,t,null,a),t.lanes=0,t}function uc(t,a,s){return Gs(a,t.child,null,s),t=dc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function rh(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),_o(t.return,a,s)}function mc(t,a,s,l,o,d){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:o,treeForkCount:d}:(j.isBackwards=a,j.rendering=null,j.renderingStartTime=0,j.last=l,j.tail=s,j.tailMode=o,j.treeForkCount=d)}function ih(t,a,s){var l=a.pendingProps,o=l.revealOrder,d=l.tail;l=l.children;var j=ut.current,C=(j&2)!==0;if(C?(j=j&1|2,a.flags|=128):j&=1,ne(ut,j),_t(t,a,l,s),l=Ge?rn:0,!C&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rh(t,s,a);else if(t.tag===19)rh(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(s=a.child,o=null;s!==null;)t=s.alternate,t!==null&&Rr(t)===null&&(o=s),s=s.sibling;s=o,s===null?(o=a.child,a.child=null):(o=s.sibling,s.sibling=null),mc(a,!1,o,s,d,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,o=a.child,a.child=null;o!==null;){if(t=o.alternate,t!==null&&Rr(t)===null){a.child=o;break}t=o.sibling,o.sibling=s,s=o,o=t}mc(a,!0,s,null,d,l);break;case"together":mc(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function $a(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),fs|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(pl(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,s=Ua(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=Ua(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function hc(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&kr(t)))}function Pf(t,a,s){switch(a.tag){case 3:De(a,a.stateNode.containerInfo),os(a,ht,t.memoizedState.cache),Os();break;case 27:case 5:se(a);break;case 4:De(a,a.stateNode.containerInfo);break;case 10:os(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,qo(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ms(a),a.flags|=128,null):(s&a.child.childLanes)!==0?nh(t,a,s):(ms(a),t=$a(t,a,s),t!==null?t.sibling:null);ms(a);break;case 19:var o=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(pl(t,a,s,!1),l=(s&a.childLanes)!==0),o){if(l)return ih(t,a,s);a.flags|=128}if(o=a.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ne(ut,ut.current),l)break;return null;case 22:return a.lanes=0,Wm(t,a,s,a.pendingProps);case 24:os(a,ht,t.memoizedState.cache)}return $a(t,a,s)}function oh(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)pt=!0;else{if(!hc(t,s)&&(a.flags&128)===0)return pt=!1,Pf(t,a,s);pt=(t.flags&131072)!==0}else pt=!1,Ge&&(a.flags&1048576)!==0&&Hu(a,rn,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=Bs(a.elementType),a.type=t,typeof t=="function")bo(t)?(l=$s(t,l),a.tag=1,a=sh(null,a,t,l,s)):(a.tag=0,a=rc(null,a,t,l,s));else{if(t!=null){var o=t.$$typeof;if(o===D){a.tag=11,a=Im(null,a,t,l,s);break e}else if(o===P){a.tag=14,a=Km(null,a,t,l,s);break e}}throw a=oe(t)||t,Error(i(306,a,""))}}return a;case 0:return rc(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,o=$s(l,a.pendingProps),sh(t,a,l,o,s);case 3:e:{if(De(a,a.stateNode.containerInfo),t===null)throw Error(i(387));l=a.pendingProps;var d=a.memoizedState;o=d.element,Mo(t,a),pn(a,l,null,s);var j=a.memoizedState;if(l=j.cache,os(a,ht,l),l!==d.cache&&Co(a,[ht],s,!0),xn(),l=j.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:j.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=lh(t,a,l,s);break e}else if(l!==o){o=ca(Error(i(424)),a),on(o),a=lh(t,a,l,s);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,st=xa(t.firstChild),kt=a,Ge=!0,rs=null,ma=!0,s=Wu(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Os(),l===o){a=$a(t,a,s);break e}_t(t,a,l,s)}a=a.child}return a;case 26:return $r(t,a),t===null?(s=yx(a.type,null,a.pendingProps,null))?a.memoizedState=s:Ge||(s=a.type,t=a.pendingProps,l=ri(ve.current).createElement(s),l[wt]=a,l[Ht]=t,Ct(l,s,t),yt(l),a.stateNode=l):a.memoizedState=yx(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return se(a),t===null&&Ge&&(l=a.stateNode=fx(a.type,a.pendingProps,ve.current),kt=a,ma=!0,o=st,js(a.type)?(Qc=o,st=xa(l.firstChild)):st=o),_t(t,a,a.pendingProps.children,s),$r(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ge&&((o=l=st)&&(l=jg(l,a.type,a.pendingProps,ma),l!==null?(a.stateNode=l,kt=a,st=xa(l.firstChild),ma=!1,o=!0):o=!1),o||is(a)),se(a),o=a.type,d=a.pendingProps,j=t!==null?t.memoizedProps:null,l=d.children,Gc(o,d)?l=null:j!==null&&Gc(o,j)&&(a.flags|=32),a.memoizedState!==null&&(o=Ho(t,a,Lf,null,null,s),On._currentValue=o),$r(t,a),_t(t,a,l,s),a.child;case 6:return t===null&&Ge&&((t=s=st)&&(s=Ng(s,a.pendingProps,ma),s!==null?(a.stateNode=s,kt=a,st=null,t=!0):t=!1),t||is(a)),null;case 13:return nh(t,a,s);case 4:return De(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Gs(a,null,l,s):_t(t,a,l,s),a.child;case 11:return Im(t,a,a.type,a.pendingProps,s);case 7:return _t(t,a,a.pendingProps,s),a.child;case 8:return _t(t,a,a.pendingProps.children,s),a.child;case 12:return _t(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,os(a,a.type,l.value),_t(t,a,l.children,s),a.child;case 9:return o=a.type._context,l=a.pendingProps.children,Us(a),o=St(o),l=l(o),a.flags|=1,_t(t,a,l,s),a.child;case 14:return Km(t,a,a.type,a.pendingProps,s);case 15:return Jm(t,a,a.type,a.pendingProps,s);case 19:return ih(t,a,s);case 31:return Yf(t,a,s);case 22:return Wm(t,a,s,a.pendingProps);case 24:return Us(a),l=St(ht),t===null?(o=To(),o===null&&(o=at,d=Eo(),o.pooledCache=d,d.refCount++,d!==null&&(o.pooledCacheLanes|=s),o=d),a.memoizedState={parent:l,cache:o},Ro(a),os(a,ht,o)):((t.lanes&s)!==0&&(Mo(t,a),pn(a,null,null,s),xn()),o=t.memoizedState,d=a.memoizedState,o.parent!==l?(o={parent:l,cache:l},a.memoizedState=o,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=o),os(a,ht,l)):(l=d.cache,os(a,ht,l),l!==o.cache&&Co(a,[ht],s,!0))),_t(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ya(t){t.flags|=4}function xc(t,a,s,l,o){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(Oh())t.flags|=8192;else throw Hs=Er,Do}else t.flags&=-16777217}function ch(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!kx(a))if(Oh())t.flags|=8192;else throw Hs=Er,Do}function Pr(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Fd():536870912,t.lanes|=a,Cl|=a)}function jn(t,a){if(!Ge)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function lt(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var o=t.child;o!==null;)s|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)s|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function Qf(t,a,s){var l=a.pendingProps;switch(No(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(a),null;case 1:return lt(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ha(ht),ae(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(xl(a)?Ya(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ko())),lt(a),null;case 26:var o=a.type,d=a.memoizedState;return t===null?(Ya(a),d!==null?(lt(a),ch(a,d)):(lt(a),xc(a,o,null,l,s))):d?d!==t.memoizedState?(Ya(a),lt(a),ch(a,d)):(lt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ya(a),lt(a),xc(a,o,t,l,s)),null;case 27:if(W(a),s=ve.current,o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ya(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return lt(a),null}t=Y.current,xl(a)?Fu(a):(t=fx(o,l,s),a.stateNode=t,Ya(a))}return lt(a),null;case 5:if(W(a),o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ya(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return lt(a),null}if(d=Y.current,xl(a))Fu(a);else{var j=ri(ve.current);switch(d){case 1:d=j.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:d=j.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":d=j.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":d=j.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":d=j.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?j.createElement("select",{is:l.is}):j.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?j.createElement(o,{is:l.is}):j.createElement(o)}}d[wt]=a,d[Ht]=l;e:for(j=a.child;j!==null;){if(j.tag===5||j.tag===6)d.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===a)break e;for(;j.sibling===null;){if(j.return===null||j.return===a)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}a.stateNode=d;e:switch(Ct(d,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ya(a)}}return lt(a),xc(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,s),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&Ya(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(i(166));if(t=ve.current,xl(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,o=kt,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}t[wt]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||nx(t.nodeValue,s)),t||is(a,!0)}else t=ri(t).createTextNode(l),t[wt]=a,a.stateNode=t}return lt(a),null;case 31:if(s=a.memoizedState,t===null||t.memoizedState!==null){if(l=xl(a),s!==null){if(t===null){if(!l)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[wt]=a}else Os(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;lt(a),t=!1}else s=ko(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return a.flags&256?(ea(a),a):(ea(a),null);if((a.flags&128)!==0)throw Error(i(558))}return lt(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=xl(a),l!==null&&l.dehydrated!==null){if(t===null){if(!o)throw Error(i(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[wt]=a}else Os(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;lt(a),o=!1}else o=ko(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return a.flags&256?(ea(a),a):(ea(a),null)}return ea(a),(a.flags&128)!==0?(a.lanes=s,a):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=a.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==o&&(l.flags|=2048)),s!==t&&s&&(a.child.flags|=8192),Pr(a,a.updateQueue),lt(a),null);case 4:return ae(),t===null&&Lc(a.stateNode.containerInfo),lt(a),null;case 10:return Ha(a.type),lt(a),null;case 19:if(M(ut),l=a.memoizedState,l===null)return lt(a),null;if(o=(a.flags&128)!==0,d=l.rendering,d===null)if(o)jn(l,!1);else{if(ot!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(d=Rr(t),d!==null){for(a.flags|=128,jn(l,!1),t=d.updateQueue,a.updateQueue=t,Pr(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)Uu(s,t),s=s.sibling;return ne(ut,ut.current&1|2),Ge&&qa(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&Ot()>Ir&&(a.flags|=128,o=!0,jn(l,!1),a.lanes=4194304)}else{if(!o)if(t=Rr(d),t!==null){if(a.flags|=128,o=!0,t=t.updateQueue,a.updateQueue=t,Pr(a,t),jn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ge)return lt(a),null}else 2*Ot()-l.renderingStartTime>Ir&&s!==536870912&&(a.flags|=128,o=!0,jn(l,!1),a.lanes=4194304);l.isBackwards?(d.sibling=a.child,a.child=d):(t=l.last,t!==null?t.sibling=d:a.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ot(),t.sibling=null,s=ut.current,ne(ut,o?s&1|2:s&1),Ge&&qa(a,l.treeForkCount),t):(lt(a),null);case 22:case 23:return ea(a),Uo(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(lt(a),a.subtreeFlags&6&&(a.flags|=8192)):lt(a),s=a.updateQueue,s!==null&&Pr(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&M(qs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Ha(ht),lt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Vf(t,a){switch(No(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ha(ht),ae(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return W(a),null;case 31:if(a.memoizedState!==null){if(ea(a),a.alternate===null)throw Error(i(340));Os()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(ea(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Os()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return M(ut),null;case 4:return ae(),null;case 10:return Ha(a.type),null;case 22:case 23:return ea(a),Uo(),t!==null&&M(qs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ha(ht),null;case 25:return null;default:return null}}function dh(t,a){switch(No(a),a.tag){case 3:Ha(ht),ae();break;case 26:case 27:case 5:W(a);break;case 4:ae();break;case 31:a.memoizedState!==null&&ea(a);break;case 13:ea(a);break;case 19:M(ut);break;case 10:Ha(a.type);break;case 22:case 23:ea(a),Uo(),t!==null&&M(qs);break;case 24:Ha(ht)}}function Nn(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var o=l.next;s=o;do{if((s.tag&t)===t){l=void 0;var d=s.create,j=s.inst;l=d(),j.destroy=l}s=s.next}while(s!==o)}}catch(C){Ie(a,a.return,C)}}function xs(t,a,s){try{var l=a.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var d=o.next;l=d;do{if((l.tag&t)===t){var j=l.inst,C=j.destroy;if(C!==void 0){j.destroy=void 0,o=a;var O=s,X=C;try{X()}catch(ie){Ie(o,O,ie)}}}l=l.next}while(l!==d)}}catch(ie){Ie(a,a.return,ie)}}function uh(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{tm(a,s)}catch(l){Ie(t,t.return,l)}}}function mh(t,a,s){s.props=$s(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Ie(t,a,l)}}function wn(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(o){Ie(t,a,o)}}function Ea(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(o){Ie(t,a,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(o){Ie(t,a,o)}else s.current=null}function hh(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(o){Ie(t,t.return,o)}}function pc(t,a,s){try{var l=t.stateNode;pg(l,t.type,s,a),l[Ht]=a}catch(o){Ie(t,t.return,o)}}function xh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&js(t.type)||t.tag===4}function fc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Oa));else if(l!==4&&(l===27&&js(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(gc(t,a,s),t=t.sibling;t!==null;)gc(t,a,s),t=t.sibling}function Qr(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&js(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Qr(t,a,s),t=t.sibling;t!==null;)Qr(t,a,s),t=t.sibling}function ph(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Ct(a,l,s),a[wt]=t,a[Ht]=s}catch(d){Ie(t,t.return,d)}}var Pa=!1,ft=!1,bc=!1,fh=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Xf(t,a){if(t=t.containerInfo,Bc=hi,t=Eu(t),uo(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var o=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var j=0,C=-1,O=-1,X=0,ie=0,he=t,K=null;t:for(;;){for(var ee;he!==s||o!==0&&he.nodeType!==3||(C=j+o),he!==d||l!==0&&he.nodeType!==3||(O=j+l),he.nodeType===3&&(j+=he.nodeValue.length),(ee=he.firstChild)!==null;)K=he,he=ee;for(;;){if(he===t)break t;if(K===s&&++X===o&&(C=j),K===d&&++ie===l&&(O=j),(ee=he.nextSibling)!==null)break;he=K,K=he.parentNode}he=ee}s=C===-1||O===-1?null:{start:C,end:O}}else s=null}s=s||{start:0,end:0}}else s=null;for(Hc={focusedElem:t,selectionRange:s},hi=!1,vt=a;vt!==null;)if(a=vt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,vt=t;else for(;vt!==null;){switch(a=vt,d=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)o=t[s],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,s=a,o=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var we=$s(s.type,o);t=l.getSnapshotBeforeUpdate(we,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ce){Ie(s,s.return,Ce)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)$c(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$c(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,vt=t;break}vt=a.return}}function gh(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Va(t,s),l&4&&Nn(5,s);break;case 1:if(Va(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(j){Ie(s,s.return,j)}else{var o=$s(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(o,a,t.__reactInternalSnapshotBeforeUpdate)}catch(j){Ie(s,s.return,j)}}l&64&&uh(s),l&512&&wn(s,s.return);break;case 3:if(Va(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{tm(t,a)}catch(j){Ie(s,s.return,j)}}break;case 27:a===null&&l&4&&ph(s);case 26:case 5:Va(t,s),a===null&&l&4&&hh(s),l&512&&wn(s,s.return);break;case 12:Va(t,s);break;case 31:Va(t,s),l&4&&vh(t,s);break;case 13:Va(t,s),l&4&&jh(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=sg.bind(null,s),wg(t,s))));break;case 22:if(l=s.memoizedState!==null||Pa,!l){a=a!==null&&a.memoizedState!==null||ft,o=Pa;var d=ft;Pa=l,(ft=a)&&!d?Xa(t,s,(s.subtreeFlags&8772)!==0):Va(t,s),Pa=o,ft=d}break;case 30:break;default:Va(t,s)}}function bh(t){var a=t.alternate;a!==null&&(t.alternate=null,bh(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Vi(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var nt=null,Ft=!1;function Qa(t,a,s){for(s=s.child;s!==null;)yh(t,a,s),s=s.sibling}function yh(t,a,s){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(as,s)}catch{}switch(s.tag){case 26:ft||Ea(s,a),Qa(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ft||Ea(s,a);var l=nt,o=Ft;js(s.type)&&(nt=s.stateNode,Ft=!1),Qa(t,a,s),Rn(s.stateNode),nt=l,Ft=o;break;case 5:ft||Ea(s,a);case 6:if(l=nt,o=Ft,nt=null,Qa(t,a,s),nt=l,Ft=o,nt!==null)if(Ft)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(s.stateNode)}catch(d){Ie(s,a,d)}else try{nt.removeChild(s.stateNode)}catch(d){Ie(s,a,d)}break;case 18:nt!==null&&(Ft?(t=nt,ux(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Ol(t)):ux(nt,s.stateNode));break;case 4:l=nt,o=Ft,nt=s.stateNode.containerInfo,Ft=!0,Qa(t,a,s),nt=l,Ft=o;break;case 0:case 11:case 14:case 15:xs(2,s,a),ft||xs(4,s,a),Qa(t,a,s);break;case 1:ft||(Ea(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&mh(s,a,l)),Qa(t,a,s);break;case 21:Qa(t,a,s);break;case 22:ft=(l=ft)||s.memoizedState!==null,Qa(t,a,s),ft=l;break;default:Qa(t,a,s)}}function vh(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ol(t)}catch(s){Ie(a,a.return,s)}}}function jh(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ol(t)}catch(s){Ie(a,a.return,s)}}function Zf(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new fh),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new fh),a;default:throw Error(i(435,t.tag))}}function Vr(t,a){var s=Zf(t);a.forEach(function(l){if(!s.has(l)){s.add(l);var o=lg.bind(null,t,l);l.then(o,o)}})}function $t(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var o=s[l],d=t,j=a,C=j;e:for(;C!==null;){switch(C.tag){case 27:if(js(C.type)){nt=C.stateNode,Ft=!1;break e}break;case 5:nt=C.stateNode,Ft=!1;break e;case 3:case 4:nt=C.stateNode.containerInfo,Ft=!0;break e}C=C.return}if(nt===null)throw Error(i(160));yh(d,j,o),nt=null,Ft=!1,d=o.alternate,d!==null&&(d.return=null),o.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Nh(a,t),a=a.sibling}var Na=null;function Nh(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:$t(a,t),Yt(t),l&4&&(xs(3,t,t.return),Nn(3,t),xs(5,t,t.return));break;case 1:$t(a,t),Yt(t),l&512&&(ft||s===null||Ea(s,s.return)),l&64&&Pa&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var o=Na;if($t(a,t),Yt(t),l&512&&(ft||s===null||Ea(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":d=o.getElementsByTagName("title")[0],(!d||d[Zl]||d[wt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=o.createElement(l),o.head.insertBefore(d,o.querySelector("head > title"))),Ct(d,l,s),d[wt]=t,yt(d),l=d;break e;case"link":var j=Nx("link","href",o).get(l+(s.href||""));if(j){for(var C=0;C<j.length;C++)if(d=j[C],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){j.splice(C,1);break t}}d=o.createElement(l),Ct(d,l,s),o.head.appendChild(d);break;case"meta":if(j=Nx("meta","content",o).get(l+(s.content||""))){for(C=0;C<j.length;C++)if(d=j[C],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){j.splice(C,1);break t}}d=o.createElement(l),Ct(d,l,s),o.head.appendChild(d);break;default:throw Error(i(468,l))}d[wt]=t,yt(d),l=d}t.stateNode=l}else wx(o,t.type,t.stateNode);else t.stateNode=jx(o,l,t.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?wx(o,t.type,t.stateNode):jx(o,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pc(t,t.memoizedProps,s.memoizedProps)}break;case 27:$t(a,t),Yt(t),l&512&&(ft||s===null||Ea(s,s.return)),s!==null&&l&4&&pc(t,t.memoizedProps,s.memoizedProps);break;case 5:if($t(a,t),Yt(t),l&512&&(ft||s===null||Ea(s,s.return)),t.flags&32){o=t.stateNode;try{ll(o,"")}catch(we){Ie(t,t.return,we)}}l&4&&t.stateNode!=null&&(o=t.memoizedProps,pc(t,o,s!==null?s.memoizedProps:o)),l&1024&&(bc=!0);break;case 6:if($t(a,t),Yt(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(we){Ie(t,t.return,we)}}break;case 3:if(ci=null,o=Na,Na=ii(a.containerInfo),$t(a,t),Na=o,Yt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Ol(a.containerInfo)}catch(we){Ie(t,t.return,we)}bc&&(bc=!1,wh(t));break;case 4:l=Na,Na=ii(t.stateNode.containerInfo),$t(a,t),Yt(t),Na=l;break;case 12:$t(a,t),Yt(t);break;case 31:$t(a,t),Yt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vr(t,l)));break;case 13:$t(a,t),Yt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Zr=Ot()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vr(t,l)));break;case 22:o=t.memoizedState!==null;var O=s!==null&&s.memoizedState!==null,X=Pa,ie=ft;if(Pa=X||o,ft=ie||O,$t(a,t),ft=ie,Pa=X,Yt(t),l&8192)e:for(a=t.stateNode,a._visibility=o?a._visibility&-2:a._visibility|1,o&&(s===null||O||Pa||ft||Ys(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){O=s=a;try{if(d=O.stateNode,o)j=d.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{C=O.stateNode;var he=O.memoizedProps.style,K=he!=null&&he.hasOwnProperty("display")?he.display:null;C.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(we){Ie(O,O.return,we)}}}else if(a.tag===6){if(s===null){O=a;try{O.stateNode.nodeValue=o?"":O.memoizedProps}catch(we){Ie(O,O.return,we)}}}else if(a.tag===18){if(s===null){O=a;try{var ee=O.stateNode;o?mx(ee,!0):mx(O.stateNode,!1)}catch(we){Ie(O,O.return,we)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Vr(t,s))));break;case 19:$t(a,t),Yt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vr(t,l)));break;case 30:break;case 21:break;default:$t(a,t),Yt(t)}}function Yt(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(xh(l)){s=l;break}l=l.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var o=s.stateNode,d=fc(t);Qr(t,d,o);break;case 5:var j=s.stateNode;s.flags&32&&(ll(j,""),s.flags&=-33);var C=fc(t);Qr(t,C,j);break;case 3:case 4:var O=s.stateNode.containerInfo,X=fc(t);gc(t,X,O);break;default:throw Error(i(161))}}catch(ie){Ie(t,t.return,ie)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function wh(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;wh(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Va(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)gh(t,a.alternate,a),a=a.sibling}function Ys(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:xs(4,a,a.return),Ys(a);break;case 1:Ea(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&mh(a,a.return,s),Ys(a);break;case 27:Rn(a.stateNode);case 26:case 5:Ea(a,a.return),Ys(a);break;case 22:a.memoizedState===null&&Ys(a);break;case 30:Ys(a);break;default:Ys(a)}t=t.sibling}}function Xa(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,o=t,d=a,j=d.flags;switch(d.tag){case 0:case 11:case 15:Xa(o,d,s),Nn(4,d);break;case 1:if(Xa(o,d,s),l=d,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(X){Ie(l,l.return,X)}if(l=d,o=l.updateQueue,o!==null){var C=l.stateNode;try{var O=o.shared.hiddenCallbacks;if(O!==null)for(o.shared.hiddenCallbacks=null,o=0;o<O.length;o++)em(O[o],C)}catch(X){Ie(l,l.return,X)}}s&&j&64&&uh(d),wn(d,d.return);break;case 27:ph(d);case 26:case 5:Xa(o,d,s),s&&l===null&&j&4&&hh(d),wn(d,d.return);break;case 12:Xa(o,d,s);break;case 31:Xa(o,d,s),s&&j&4&&vh(o,d);break;case 13:Xa(o,d,s),s&&j&4&&jh(o,d);break;case 22:d.memoizedState===null&&Xa(o,d,s),wn(d,d.return);break;case 30:break;default:Xa(o,d,s)}a=a.sibling}}function yc(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&cn(s))}function vc(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&cn(t))}function wa(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)kh(t,a,s,l),a=a.sibling}function kh(t,a,s,l){var o=a.flags;switch(a.tag){case 0:case 11:case 15:wa(t,a,s,l),o&2048&&Nn(9,a);break;case 1:wa(t,a,s,l);break;case 3:wa(t,a,s,l),o&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&cn(t)));break;case 12:if(o&2048){wa(t,a,s,l),t=a.stateNode;try{var d=a.memoizedProps,j=d.id,C=d.onPostCommit;typeof C=="function"&&C(j,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){Ie(a,a.return,O)}}else wa(t,a,s,l);break;case 31:wa(t,a,s,l);break;case 13:wa(t,a,s,l);break;case 23:break;case 22:d=a.stateNode,j=a.alternate,a.memoizedState!==null?d._visibility&2?wa(t,a,s,l):kn(t,a):d._visibility&2?wa(t,a,s,l):(d._visibility|=2,kl(t,a,s,l,(a.subtreeFlags&10256)!==0||!1)),o&2048&&yc(j,a);break;case 24:wa(t,a,s,l),o&2048&&vc(a.alternate,a);break;default:wa(t,a,s,l)}}function kl(t,a,s,l,o){for(o=o&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var d=t,j=a,C=s,O=l,X=j.flags;switch(j.tag){case 0:case 11:case 15:kl(d,j,C,O,o),Nn(8,j);break;case 23:break;case 22:var ie=j.stateNode;j.memoizedState!==null?ie._visibility&2?kl(d,j,C,O,o):kn(d,j):(ie._visibility|=2,kl(d,j,C,O,o)),o&&X&2048&&yc(j.alternate,j);break;case 24:kl(d,j,C,O,o),o&&X&2048&&vc(j.alternate,j);break;default:kl(d,j,C,O,o)}a=a.sibling}}function kn(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,o=l.flags;switch(l.tag){case 22:kn(s,l),o&2048&&yc(l.alternate,l);break;case 24:kn(s,l),o&2048&&vc(l.alternate,l);break;default:kn(s,l)}a=a.sibling}}var Sn=8192;function Sl(t,a,s){if(t.subtreeFlags&Sn)for(t=t.child;t!==null;)Sh(t,a,s),t=t.sibling}function Sh(t,a,s){switch(t.tag){case 26:Sl(t,a,s),t.flags&Sn&&t.memoizedState!==null&&Og(s,Na,t.memoizedState,t.memoizedProps);break;case 5:Sl(t,a,s);break;case 3:case 4:var l=Na;Na=ii(t.stateNode.containerInfo),Sl(t,a,s),Na=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Sn,Sn=16777216,Sl(t,a,s),Sn=l):Sl(t,a,s));break;default:Sl(t,a,s)}}function _h(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function _n(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];vt=l,Eh(l,t)}_h(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ch(t),t=t.sibling}function Ch(t){switch(t.tag){case 0:case 11:case 15:_n(t),t.flags&2048&&xs(9,t,t.return);break;case 3:_n(t);break;case 12:_n(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Xr(t)):_n(t);break;default:_n(t)}}function Xr(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];vt=l,Eh(l,t)}_h(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:xs(8,a,a.return),Xr(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Xr(a));break;default:Xr(a)}t=t.sibling}}function Eh(t,a){for(;vt!==null;){var s=vt;switch(s.tag){case 0:case 11:case 15:xs(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cn(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,vt=l;else e:for(s=t;vt!==null;){l=vt;var o=l.sibling,d=l.return;if(bh(l),l===s){vt=null;break e}if(o!==null){o.return=d,vt=o;break e}vt=d}}}var If={getCacheForType:function(t){var a=St(ht),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s},cacheSignal:function(){return St(ht).controller.signal}},Kf=typeof WeakMap=="function"?WeakMap:Map,Qe=0,at=null,Le=null,qe=0,Ze=0,ta=null,ps=!1,_l=!1,jc=!1,Za=0,ot=0,fs=0,Ps=0,Nc=0,aa=0,Cl=0,Cn=null,Pt=null,wc=!1,Zr=0,Ah=0,Ir=1/0,Kr=null,gs=null,gt=0,bs=null,El=null,Ia=0,kc=0,Sc=null,Th=null,En=0,_c=null;function sa(){return(Qe&2)!==0&&qe!==0?qe&-qe:z.T!==null?Rc():Qd()}function Dh(){if(aa===0)if((qe&536870912)===0||Ge){var t=nr;nr<<=1,(nr&3932160)===0&&(nr=262144),aa=t}else aa=536870912;return t=Wt.current,t!==null&&(t.flags|=32),aa}function Qt(t,a,s){(t===at&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(Al(t,0),ys(t,qe,aa,!1)),Xl(t,s),((Qe&2)===0||t!==at)&&(t===at&&((Qe&2)===0&&(Ps|=s),ot===4&&ys(t,qe,aa,!1)),Aa(t))}function Rh(t,a,s){if((Qe&6)!==0)throw Error(i(327));var l=!s&&(a&127)===0&&(a&t.expiredLanes)===0||Vl(t,a),o=l?eg(t,a):Ec(t,a,!0),d=l;do{if(o===0){_l&&!l&&ys(t,a,0,!1);break}else{if(s=t.current.alternate,d&&!Jf(s)){o=Ec(t,a,!1),d=!1;continue}if(o===2){if(d=a,t.errorRecoveryDisabledLanes&d)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){a=j;e:{var C=t;o=Cn;var O=C.current.memoizedState.isDehydrated;if(O&&(Al(C,j).flags|=256),j=Ec(C,j,!1),j!==2){if(jc&&!O){C.errorRecoveryDisabledLanes|=d,Ps|=d,o=4;break e}d=Pt,Pt=o,d!==null&&(Pt===null?Pt=d:Pt.push.apply(Pt,d))}o=j}if(d=!1,o!==2)continue}}if(o===1){Al(t,0),ys(t,a,0,!0);break}e:{switch(l=t,d=o,d){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:ys(l,a,aa,!ps);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(o=Zr+300-Ot(),10<o)){if(ys(l,a,aa,!ps),ir(l,0,!0)!==0)break e;Ia=a,l.timeoutHandle=cx(Mh.bind(null,l,s,Pt,Kr,wc,a,aa,Ps,Cl,ps,d,"Throttled",-0,0),o);break e}Mh(l,s,Pt,Kr,wc,a,aa,Ps,Cl,ps,d,null,-0,0)}}break}while(!0);Aa(t)}function Mh(t,a,s,l,o,d,j,C,O,X,ie,he,K,ee){if(t.timeoutHandle=-1,he=a.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oa},Sh(a,d,he);var we=(d&62914560)===d?Zr-Ot():(d&4194048)===d?Ah-Ot():0;if(we=Lg(he,we),we!==null){Ia=d,t.cancelPendingCommit=we(Gh.bind(null,t,a,d,s,l,o,j,C,O,ie,he,null,K,ee)),ys(t,d,j,!X);return}}Gh(t,a,d,s,l,o,j,C,O)}function Jf(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var o=s[l],d=o.getSnapshot;o=o.value;try{if(!Kt(d(),o))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ys(t,a,s,l){a&=~Nc,a&=~Ps,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var o=a;0<o;){var d=31-Rt(o),j=1<<d;l[d]=-1,o&=~j}s!==0&&$d(t,s,a)}function Jr(){return(Qe&6)===0?(An(0),!1):!0}function Cc(){if(Le!==null){if(Ze===0)var t=Le.return;else t=Le,Ba=Ls=null,$o(t),yl=null,un=0,t=Le;for(;t!==null;)dh(t.alternate,t),t=t.return;Le=null}}function Al(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,bg(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Ia=0,Cc(),at=t,Le=s=Ua(t.current,null),qe=a,Ze=0,ta=null,ps=!1,_l=Vl(t,a),jc=!1,Cl=aa=Nc=Ps=fs=ot=0,Pt=Cn=null,wc=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var o=31-Rt(l),d=1<<o;a|=t[o],l&=~d}return Za=a,yr(),s}function zh(t,a){Re=null,z.H=yn,a===bl||a===Cr?(a=Iu(),Ze=3):a===Do?(a=Iu(),Ze=4):Ze=a===nc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ta=a,Le===null&&(ot=1,Gr(t,ca(a,t.current)))}function Oh(){var t=Wt.current;return t===null?!0:(qe&4194048)===qe?ha===null:(qe&62914560)===qe||(qe&536870912)!==0?t===ha:!1}function Lh(){var t=z.H;return z.H=yn,t===null?yn:t}function Uh(){var t=z.A;return z.A=If,t}function Wr(){ot=4,ps||(qe&4194048)!==qe&&Wt.current!==null||(_l=!0),(fs&134217727)===0&&(Ps&134217727)===0||at===null||ys(at,qe,aa,!1)}function Ec(t,a,s){var l=Qe;Qe|=2;var o=Lh(),d=Uh();(at!==t||qe!==a)&&(Kr=null,Al(t,a)),a=!1;var j=ot;e:do try{if(Ze!==0&&Le!==null){var C=Le,O=ta;switch(Ze){case 8:Cc(),j=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(a=!0);var X=Ze;if(Ze=0,ta=null,Tl(t,C,O,X),s&&_l){j=0;break e}break;default:X=Ze,Ze=0,ta=null,Tl(t,C,O,X)}}Wf(),j=ot;break}catch(ie){zh(t,ie)}while(!0);return a&&t.shellSuspendCounter++,Ba=Ls=null,Qe=l,z.H=o,z.A=d,Le===null&&(at=null,qe=0,yr()),j}function Wf(){for(;Le!==null;)qh(Le)}function eg(t,a){var s=Qe;Qe|=2;var l=Lh(),o=Uh();at!==t||qe!==a?(Kr=null,Ir=Ot()+500,Al(t,a)):_l=Vl(t,a);e:do try{if(Ze!==0&&Le!==null){a=Le;var d=ta;t:switch(Ze){case 1:Ze=0,ta=null,Tl(t,a,d,1);break;case 2:case 9:if(Xu(d)){Ze=0,ta=null,Bh(a);break}a=function(){Ze!==2&&Ze!==9||at!==t||(Ze=7),Aa(t)},d.then(a,a);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Xu(d)?(Ze=0,ta=null,Bh(a)):(Ze=0,ta=null,Tl(t,a,d,7));break;case 5:var j=null;switch(Le.tag){case 26:j=Le.memoizedState;case 5:case 27:var C=Le;if(j?kx(j):C.stateNode.complete){Ze=0,ta=null;var O=C.sibling;if(O!==null)Le=O;else{var X=C.return;X!==null?(Le=X,ei(X)):Le=null}break t}}Ze=0,ta=null,Tl(t,a,d,5);break;case 6:Ze=0,ta=null,Tl(t,a,d,6);break;case 8:Cc(),ot=6;break e;default:throw Error(i(462))}}tg();break}catch(ie){zh(t,ie)}while(!0);return Ba=Ls=null,z.H=l,z.A=o,Qe=s,Le!==null?0:(at=null,qe=0,yr(),ot)}function tg(){for(;Le!==null&&!Nt();)qh(Le)}function qh(t){var a=oh(t.alternate,t,Za);t.memoizedProps=t.pendingProps,a===null?ei(t):Le=a}function Bh(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=ah(s,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=ah(s,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:$o(a);default:dh(s,a),a=Le=Uu(a,Za),a=oh(s,a,Za)}t.memoizedProps=t.pendingProps,a===null?ei(t):Le=a}function Tl(t,a,s,l){Ba=Ls=null,$o(a),yl=null,un=0;var o=a.return;try{if($f(t,o,a,s,qe)){ot=1,Gr(t,ca(s,t.current)),Le=null;return}}catch(d){if(o!==null)throw Le=o,d;ot=1,Gr(t,ca(s,t.current)),Le=null;return}a.flags&32768?(Ge||l===1?t=!0:_l||(qe&536870912)!==0?t=!1:(ps=t=!0,(l===2||l===9||l===3||l===6)&&(l=Wt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Hh(a,t)):ei(a)}function ei(t){var a=t;do{if((a.flags&32768)!==0){Hh(a,ps);return}t=a.return;var s=Qf(a.alternate,a,Za);if(s!==null){Le=s;return}if(a=a.sibling,a!==null){Le=a;return}Le=a=t}while(a!==null);ot===0&&(ot=5)}function Hh(t,a){do{var s=Vf(t.alternate,t);if(s!==null){s.flags&=32767,Le=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Le=t;return}Le=t=s}while(t!==null);ot=6,Le=null}function Gh(t,a,s,l,o,d,j,C,O){t.cancelPendingCommit=null;do ti();while(gt!==0);if((Qe&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(d=a.lanes|a.childLanes,d|=fo,Mp(t,s,d,j,C,O),t===at&&(Le=at=null,qe=0),El=a,bs=t,Ia=s,kc=d,Sc=o,Th=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ng(Pe,function(){return Qh(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,o=$.p,$.p=2,j=Qe,Qe|=4;try{Xf(t,a,s)}finally{Qe=j,$.p=o,z.T=l}}gt=1,Fh(),$h(),Yh()}}function Fh(){if(gt===1){gt=0;var t=bs,a=El,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=z.T,z.T=null;var l=$.p;$.p=2;var o=Qe;Qe|=4;try{Nh(a,t);var d=Hc,j=Eu(t.containerInfo),C=d.focusedElem,O=d.selectionRange;if(j!==C&&C&&C.ownerDocument&&Cu(C.ownerDocument.documentElement,C)){if(O!==null&&uo(C)){var X=O.start,ie=O.end;if(ie===void 0&&(ie=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(ie,C.value.length);else{var he=C.ownerDocument||document,K=he&&he.defaultView||window;if(K.getSelection){var ee=K.getSelection(),we=C.textContent.length,Ce=Math.min(O.start,we),tt=O.end===void 0?Ce:Math.min(O.end,we);!ee.extend&&Ce>tt&&(j=tt,tt=Ce,Ce=j);var F=_u(C,Ce),q=_u(C,tt);if(F&&q&&(ee.rangeCount!==1||ee.anchorNode!==F.node||ee.anchorOffset!==F.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var V=he.createRange();V.setStart(F.node,F.offset),ee.removeAllRanges(),Ce>tt?(ee.addRange(V),ee.extend(q.node,q.offset)):(V.setEnd(q.node,q.offset),ee.addRange(V))}}}}for(he=[],ee=C;ee=ee.parentNode;)ee.nodeType===1&&he.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<he.length;C++){var de=he[C];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}hi=!!Bc,Hc=Bc=null}finally{Qe=o,$.p=l,z.T=s}}t.current=a,gt=2}}function $h(){if(gt===2){gt=0;var t=bs,a=El,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=z.T,z.T=null;var l=$.p;$.p=2;var o=Qe;Qe|=4;try{gh(t,a.alternate,a)}finally{Qe=o,$.p=l,z.T=s}}gt=3}}function Yh(){if(gt===4||gt===3){gt=0,Ql();var t=bs,a=El,s=Ia,l=Th;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?gt=5:(gt=0,El=bs=null,Ph(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(gs=null),Pi(s),a=a.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(as,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=z.T,o=$.p,$.p=2,z.T=null;try{for(var d=t.onRecoverableError,j=0;j<l.length;j++){var C=l[j];d(C.value,{componentStack:C.stack})}}finally{z.T=a,$.p=o}}(Ia&3)!==0&&ti(),Aa(t),o=t.pendingLanes,(s&261930)!==0&&(o&42)!==0?t===_c?En++:(En=0,_c=t):En=0,An(0)}}function Ph(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,cn(a)))}function ti(){return Fh(),$h(),Yh(),Qh()}function Qh(){if(gt!==5)return!1;var t=bs,a=kc;kc=0;var s=Pi(Ia),l=z.T,o=$.p;try{$.p=32>s?32:s,z.T=null,s=Sc,Sc=null;var d=bs,j=Ia;if(gt=0,El=bs=null,Ia=0,(Qe&6)!==0)throw Error(i(331));var C=Qe;if(Qe|=4,Ch(d.current),kh(d,d.current,j,s),Qe=C,An(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(as,d)}catch{}return!0}finally{$.p=o,z.T=l,Ph(t,a)}}function Vh(t,a,s){a=ca(s,a),a=lc(t.stateNode,a,2),t=us(t,a,2),t!==null&&(Xl(t,2),Aa(t))}function Ie(t,a,s){if(t.tag===3)Vh(t,t,s);else for(;a!==null;){if(a.tag===3){Vh(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(gs===null||!gs.has(l))){t=ca(s,t),s=Xm(2),l=us(a,s,2),l!==null&&(Zm(s,l,a,t),Xl(l,2),Aa(l));break}}a=a.return}}function Ac(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Kf;var o=new Set;l.set(a,o)}else o=l.get(a),o===void 0&&(o=new Set,l.set(a,o));o.has(s)||(jc=!0,o.add(s),t=ag.bind(null,t,a,s),a.then(t,t))}function ag(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,at===t&&(qe&s)===s&&(ot===4||ot===3&&(qe&62914560)===qe&&300>Ot()-Zr?(Qe&2)===0&&Al(t,0):Nc|=s,Cl===qe&&(Cl=0)),Aa(t)}function Xh(t,a){a===0&&(a=Fd()),t=Ms(t,a),t!==null&&(Xl(t,a),Aa(t))}function sg(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),Xh(t,s)}function lg(t,a){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,o=t.memoizedState;o!==null&&(s=o.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(a),Xh(t,s)}function ng(t,a){return Bt(t,a)}var ai=null,Dl=null,Tc=!1,si=!1,Dc=!1,vs=0;function Aa(t){t!==Dl&&t.next===null&&(Dl===null?ai=Dl=t:Dl=Dl.next=t),si=!0,Tc||(Tc=!0,ig())}function An(t,a){if(!Dc&&si){Dc=!0;do for(var s=!1,l=ai;l!==null;){if(t!==0){var o=l.pendingLanes;if(o===0)var d=0;else{var j=l.suspendedLanes,C=l.pingedLanes;d=(1<<31-Rt(42|t)+1)-1,d&=o&~(j&~C),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,Jh(l,d))}else d=qe,d=ir(l,l===at?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Vl(l,d)||(s=!0,Jh(l,d));l=l.next}while(s);Dc=!1}}function rg(){Zh()}function Zh(){si=Tc=!1;var t=0;vs!==0&&gg()&&(t=vs);for(var a=Ot(),s=null,l=ai;l!==null;){var o=l.next,d=Ih(l,a);d===0?(l.next=null,s===null?ai=o:s.next=o,o===null&&(Dl=s)):(s=l,(t!==0||(d&3)!==0)&&(si=!0)),l=o}gt!==0&&gt!==5||An(t),vs!==0&&(vs=0)}function Ih(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,o=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var j=31-Rt(d),C=1<<j,O=o[j];O===-1?((C&s)===0||(C&l)!==0)&&(o[j]=Rp(C,a)):O<=a&&(t.expiredLanes|=C),d&=~C}if(a=at,s=qe,s=ir(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ts(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Vl(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&ts(l),Pi(s)){case 2:case 8:s=Ae;break;case 32:s=Pe;break;case 268435456:s=Sa;break;default:s=Pe}return l=Kh.bind(null,t),s=Bt(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&ts(l),t.callbackPriority=2,t.callbackNode=null,2}function Kh(t,a){if(gt!==0&&gt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(ti()&&t.callbackNode!==s)return null;var l=qe;return l=ir(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Rh(t,l,a),Ih(t,Ot()),t.callbackNode!=null&&t.callbackNode===s?Kh.bind(null,t):null)}function Jh(t,a){if(ti())return null;Rh(t,a,!0)}function ig(){yg(function(){(Qe&6)!==0?Bt(Ee,rg):Zh()})}function Rc(){if(vs===0){var t=fl;t===0&&(t=lr,lr<<=1,(lr&261888)===0&&(lr=256)),vs=t}return vs}function Wh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ur(""+t)}function ex(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function og(t,a,s,l,o){if(a==="submit"&&s&&s.stateNode===o){var d=Wh((o[Ht]||null).action),j=l.submitter;j&&(a=(a=j[Ht]||null)?Wh(a.formAction):j.getAttribute("formAction"),a!==null&&(d=a,j=null));var C=new pr("action","action",null,l,o);t.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(vs!==0){var O=j?ex(o,j):new FormData(o);Jo(s,{pending:!0,data:O,method:o.method,action:d},null,O)}}else typeof d=="function"&&(C.preventDefault(),O=j?ex(o,j):new FormData(o),Jo(s,{pending:!0,data:O,method:o.method,action:d},d,O))},currentTarget:o}]})}}for(var Mc=0;Mc<po.length;Mc++){var zc=po[Mc],cg=zc.toLowerCase(),dg=zc[0].toUpperCase()+zc.slice(1);ja(cg,"on"+dg)}ja(Du,"onAnimationEnd"),ja(Ru,"onAnimationIteration"),ja(Mu,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(_f,"onTransitionRun"),ja(Cf,"onTransitionStart"),ja(Ef,"onTransitionCancel"),ja(zu,"onTransitionEnd"),al("onMouseEnter",["mouseout","mouseover"]),al("onMouseLeave",["mouseout","mouseover"]),al("onPointerEnter",["pointerout","pointerover"]),al("onPointerLeave",["pointerout","pointerover"]),As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),As("onBeforeInput",["compositionend","keypress","textInput","paste"]),As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tn));function tx(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],o=l.event;l=l.listeners;e:{var d=void 0;if(a)for(var j=l.length-1;0<=j;j--){var C=l[j],O=C.instance,X=C.currentTarget;if(C=C.listener,O!==d&&o.isPropagationStopped())break e;d=C,o.currentTarget=X;try{d(o)}catch(ie){br(ie)}o.currentTarget=null,d=O}else for(j=0;j<l.length;j++){if(C=l[j],O=C.instance,X=C.currentTarget,C=C.listener,O!==d&&o.isPropagationStopped())break e;d=C,o.currentTarget=X;try{d(o)}catch(ie){br(ie)}o.currentTarget=null,d=O}}}}function Ue(t,a){var s=a[Qi];s===void 0&&(s=a[Qi]=new Set);var l=t+"__bubble";s.has(l)||(ax(a,t,2,!1),s.add(l))}function Oc(t,a,s){var l=0;a&&(l|=4),ax(s,t,l,a)}var li="_reactListening"+Math.random().toString(36).slice(2);function Lc(t){if(!t[li]){t[li]=!0,Zd.forEach(function(s){s!=="selectionchange"&&(ug.has(s)||Oc(s,!1,t),Oc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[li]||(a[li]=!0,Oc("selectionchange",!1,a))}}function ax(t,a,s,l){switch(Dx(a)){case 2:var o=Bg;break;case 8:o=Hg;break;default:o=Kc}s=o.bind(null,a,s,t),o=void 0,!to||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(o=!0),l?o!==void 0?t.addEventListener(a,s,{capture:!0,passive:o}):t.addEventListener(a,s,!0):o!==void 0?t.addEventListener(a,s,{passive:o}):t.addEventListener(a,s,!1)}function Uc(t,a,s,l,o){var d=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var j=l.tag;if(j===3||j===4){var C=l.stateNode.containerInfo;if(C===o)break;if(j===4)for(j=l.return;j!==null;){var O=j.tag;if((O===3||O===4)&&j.stateNode.containerInfo===o)return;j=j.return}for(;C!==null;){if(j=Ws(C),j===null)return;if(O=j.tag,O===5||O===6||O===26||O===27){l=d=j;continue e}C=C.parentNode}}l=l.return}iu(function(){var X=d,ie=Wi(s),he=[];e:{var K=Ou.get(t);if(K!==void 0){var ee=pr,we=t;switch(t){case"keypress":if(hr(s)===0)break e;case"keydown":case"keyup":ee=sf;break;case"focusin":we="focus",ee=no;break;case"focusout":we="blur",ee=no;break;case"beforeblur":case"afterblur":ee=no;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Pp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=rf;break;case Du:case Ru:case Mu:ee=Xp;break;case zu:ee=cf;break;case"scroll":case"scrollend":ee=$p;break;case"wheel":ee=uf;break;case"copy":case"cut":case"paste":ee=Ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=mu;break;case"toggle":case"beforetoggle":ee=hf}var Ce=(a&4)!==0,tt=!Ce&&(t==="scroll"||t==="scrollend"),F=Ce?K!==null?K+"Capture":null:K;Ce=[];for(var q=X,V;q!==null;){var de=q;if(V=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||V===null||F===null||(de=Kl(q,F),de!=null&&Ce.push(Dn(q,de,V))),tt)break;q=q.return}0<Ce.length&&(K=new ee(K,we,null,s,ie),he.push({event:K,listeners:Ce}))}}if((a&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",K&&s!==Ji&&(we=s.relatedTarget||s.fromElement)&&(Ws(we)||we[Js]))break e;if((ee||K)&&(K=ie.window===ie?ie:(K=ie.ownerDocument)?K.defaultView||K.parentWindow:window,ee?(we=s.relatedTarget||s.toElement,ee=X,we=we?Ws(we):null,we!==null&&(tt=x(we),Ce=we.tag,we!==tt||Ce!==5&&Ce!==27&&Ce!==6)&&(we=null)):(ee=null,we=X),ee!==we)){if(Ce=du,de="onMouseLeave",F="onMouseEnter",q="mouse",(t==="pointerout"||t==="pointerover")&&(Ce=mu,de="onPointerLeave",F="onPointerEnter",q="pointer"),tt=ee==null?K:Il(ee),V=we==null?K:Il(we),K=new Ce(de,q+"leave",ee,s,ie),K.target=tt,K.relatedTarget=V,de=null,Ws(ie)===X&&(Ce=new Ce(F,q+"enter",we,s,ie),Ce.target=V,Ce.relatedTarget=tt,de=Ce),tt=de,ee&&we)t:{for(Ce=mg,F=ee,q=we,V=0,de=F;de;de=Ce(de))V++;de=0;for(var Se=q;Se;Se=Ce(Se))de++;for(;0<V-de;)F=Ce(F),V--;for(;0<de-V;)q=Ce(q),de--;for(;V--;){if(F===q||q!==null&&F===q.alternate){Ce=F;break t}F=Ce(F),q=Ce(q)}Ce=null}else Ce=null;ee!==null&&sx(he,K,ee,Ce,!1),we!==null&&tt!==null&&sx(he,tt,we,Ce,!0)}}e:{if(K=X?Il(X):window,ee=K.nodeName&&K.nodeName.toLowerCase(),ee==="select"||ee==="input"&&K.type==="file")var Fe=vu;else if(bu(K))if(ju)Fe=wf;else{Fe=jf;var ke=vf}else ee=K.nodeName,!ee||ee.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?X&&Ki(X.elementType)&&(Fe=vu):Fe=Nf;if(Fe&&(Fe=Fe(t,X))){yu(he,Fe,s,ie);break e}ke&&ke(t,K,X),t==="focusout"&&X&&K.type==="number"&&X.memoizedProps.value!=null&&Ii(K,"number",K.value)}switch(ke=X?Il(X):window,t){case"focusin":(bu(ke)||ke.contentEditable==="true")&&(ol=ke,mo=X,nn=null);break;case"focusout":nn=mo=ol=null;break;case"mousedown":ho=!0;break;case"contextmenu":case"mouseup":case"dragend":ho=!1,Au(he,s,ie);break;case"selectionchange":if(Sf)break;case"keydown":case"keyup":Au(he,s,ie)}var ze;if(io)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else il?fu(t,s)&&(Be="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Be="onCompositionStart");Be&&(hu&&s.locale!=="ko"&&(il||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&il&&(ze=ou()):(ls=ie,ao="value"in ls?ls.value:ls.textContent,il=!0)),ke=ni(X,Be),0<ke.length&&(Be=new uu(Be,t,null,s,ie),he.push({event:Be,listeners:ke}),ze?Be.data=ze:(ze=gu(s),ze!==null&&(Be.data=ze)))),(ze=pf?ff(t,s):gf(t,s))&&(Be=ni(X,"onBeforeInput"),0<Be.length&&(ke=new uu("onBeforeInput","beforeinput",null,s,ie),he.push({event:ke,listeners:Be}),ke.data=ze)),og(he,t,X,s,ie)}tx(he,a)})}function Dn(t,a,s){return{instance:t,listener:a,currentTarget:s}}function ni(t,a){for(var s=a+"Capture",l=[];t!==null;){var o=t,d=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||d===null||(o=Kl(t,s),o!=null&&l.unshift(Dn(t,o,d)),o=Kl(t,a),o!=null&&l.push(Dn(t,o,d))),t.tag===3)return l;t=t.return}return[]}function mg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function sx(t,a,s,l,o){for(var d=a._reactName,j=[];s!==null&&s!==l;){var C=s,O=C.alternate,X=C.stateNode;if(C=C.tag,O!==null&&O===l)break;C!==5&&C!==26&&C!==27||X===null||(O=X,o?(X=Kl(s,d),X!=null&&j.unshift(Dn(s,X,O))):o||(X=Kl(s,d),X!=null&&j.push(Dn(s,X,O)))),s=s.return}j.length!==0&&t.push({event:a,listeners:j})}var hg=/\r\n?/g,xg=/\u0000|\uFFFD/g;function lx(t){return(typeof t=="string"?t:""+t).replace(hg,`
`).replace(xg,"")}function nx(t,a){return a=lx(a),lx(t)===a}function et(t,a,s,l,o,d){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||ll(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&ll(t,""+l);break;case"className":cr(t,"class",l);break;case"tabIndex":cr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(t,s,l);break;case"style":nu(t,l,d);break;case"data":if(a!=="object"){cr(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ur(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(a!=="input"&&et(t,a,"name",o.name,o,null),et(t,a,"formEncType",o.formEncType,o,null),et(t,a,"formMethod",o.formMethod,o,null),et(t,a,"formTarget",o.formTarget,o,null)):(et(t,a,"encType",o.encType,o,null),et(t,a,"method",o.method,o,null),et(t,a,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ur(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Oa);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(o.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=ur(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),or(t,"popover",l);break;case"xlinkActuate":za(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":za(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":za(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":za(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":za(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":za(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":za(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":za(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":za(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":or(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Gp.get(s)||s,or(t,s,l))}}function qc(t,a,s,l,o,d){switch(s){case"style":nu(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(o.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"children":typeof l=="string"?ll(t,l):(typeof l=="number"||typeof l=="bigint")&&ll(t,""+l);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Oa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Id.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(o=s.endsWith("Capture"),a=s.slice(2,o?s.length-7:void 0),d=t[Ht]||null,d=d!=null?d[s]:null,typeof d=="function"&&t.removeEventListener(a,d,o),typeof l=="function")){typeof d!="function"&&d!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,o);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):or(t,s,l)}}}function Ct(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var l=!1,o=!1,d;for(d in s)if(s.hasOwnProperty(d)){var j=s[d];if(j!=null)switch(d){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:et(t,a,d,j,s,null)}}o&&et(t,a,"srcSet",s.srcSet,s,null),l&&et(t,a,"src",s.src,s,null);return;case"input":Ue("invalid",t);var C=d=j=o=null,O=null,X=null;for(l in s)if(s.hasOwnProperty(l)){var ie=s[l];if(ie!=null)switch(l){case"name":o=ie;break;case"type":j=ie;break;case"checked":O=ie;break;case"defaultChecked":X=ie;break;case"value":d=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:et(t,a,l,ie,s,null)}}tu(t,d,C,O,X,j,o,!1);return;case"select":Ue("invalid",t),l=j=d=null;for(o in s)if(s.hasOwnProperty(o)&&(C=s[o],C!=null))switch(o){case"value":d=C;break;case"defaultValue":j=C;break;case"multiple":l=C;default:et(t,a,o,C,s,null)}a=d,s=j,t.multiple=!!l,a!=null?sl(t,!!l,a,!1):s!=null&&sl(t,!!l,s,!0);return;case"textarea":Ue("invalid",t),d=o=l=null;for(j in s)if(s.hasOwnProperty(j)&&(C=s[j],C!=null))switch(j){case"value":l=C;break;case"defaultValue":o=C;break;case"children":d=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:et(t,a,j,C,s,null)}su(t,l,o,d);return;case"option":for(O in s)s.hasOwnProperty(O)&&(l=s[O],l!=null)&&(O==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":et(t,a,O,l,s,null));return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(l=0;l<Tn.length;l++)Ue(Tn[l],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in s)if(s.hasOwnProperty(X)&&(l=s[X],l!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:et(t,a,X,l,s,null)}return;default:if(Ki(a)){for(ie in s)s.hasOwnProperty(ie)&&(l=s[ie],l!==void 0&&qc(t,a,ie,l,s,void 0));return}}for(C in s)s.hasOwnProperty(C)&&(l=s[C],l!=null&&et(t,a,C,l,s,null))}function pg(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,d=null,j=null,C=null,O=null,X=null,ie=null;for(ee in s){var he=s[ee];if(s.hasOwnProperty(ee)&&he!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":O=he;default:l.hasOwnProperty(ee)||et(t,a,ee,null,l,he)}}for(var K in l){var ee=l[K];if(he=s[K],l.hasOwnProperty(K)&&(ee!=null||he!=null))switch(K){case"type":d=ee;break;case"name":o=ee;break;case"checked":X=ee;break;case"defaultChecked":ie=ee;break;case"value":j=ee;break;case"defaultValue":C=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:ee!==he&&et(t,a,K,ee,l,he)}}Zi(t,j,C,O,X,ie,d,o);return;case"select":ee=j=C=K=null;for(d in s)if(O=s[d],s.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":ee=O;default:l.hasOwnProperty(d)||et(t,a,d,null,l,O)}for(o in l)if(d=l[o],O=s[o],l.hasOwnProperty(o)&&(d!=null||O!=null))switch(o){case"value":K=d;break;case"defaultValue":C=d;break;case"multiple":j=d;default:d!==O&&et(t,a,o,d,l,O)}a=C,s=j,l=ee,K!=null?sl(t,!!s,K,!1):!!l!=!!s&&(a!=null?sl(t,!!s,a,!0):sl(t,!!s,s?[]:"",!1));return;case"textarea":ee=K=null;for(C in s)if(o=s[C],s.hasOwnProperty(C)&&o!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:et(t,a,C,null,l,o)}for(j in l)if(o=l[j],d=s[j],l.hasOwnProperty(j)&&(o!=null||d!=null))switch(j){case"value":K=o;break;case"defaultValue":ee=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==d&&et(t,a,j,o,l,d)}au(t,K,ee);return;case"option":for(var we in s)K=s[we],s.hasOwnProperty(we)&&K!=null&&!l.hasOwnProperty(we)&&(we==="selected"?t.selected=!1:et(t,a,we,null,l,K));for(O in l)K=l[O],ee=s[O],l.hasOwnProperty(O)&&K!==ee&&(K!=null||ee!=null)&&(O==="selected"?t.selected=K&&typeof K!="function"&&typeof K!="symbol":et(t,a,O,K,l,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in s)K=s[Ce],s.hasOwnProperty(Ce)&&K!=null&&!l.hasOwnProperty(Ce)&&et(t,a,Ce,null,l,K);for(X in l)if(K=l[X],ee=s[X],l.hasOwnProperty(X)&&K!==ee&&(K!=null||ee!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:et(t,a,X,K,l,ee)}return;default:if(Ki(a)){for(var tt in s)K=s[tt],s.hasOwnProperty(tt)&&K!==void 0&&!l.hasOwnProperty(tt)&&qc(t,a,tt,void 0,l,K);for(ie in l)K=l[ie],ee=s[ie],!l.hasOwnProperty(ie)||K===ee||K===void 0&&ee===void 0||qc(t,a,ie,K,l,ee);return}}for(var F in s)K=s[F],s.hasOwnProperty(F)&&K!=null&&!l.hasOwnProperty(F)&&et(t,a,F,null,l,K);for(he in l)K=l[he],ee=s[he],!l.hasOwnProperty(he)||K===ee||K==null&&ee==null||et(t,a,he,K,l,ee)}function rx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var o=s[l],d=o.transferSize,j=o.initiatorType,C=o.duration;if(d&&C&&rx(j)){for(j=0,C=o.responseEnd,l+=1;l<s.length;l++){var O=s[l],X=O.startTime;if(X>C)break;var ie=O.transferSize,he=O.initiatorType;ie&&rx(he)&&(O=O.responseEnd,j+=ie*(O<C?1:(C-X)/(O-X)))}if(--l,a+=8*(d+j)/(o.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bc=null,Hc=null;function ri(t){return t.nodeType===9?t:t.ownerDocument}function ix(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ox(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Gc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fc=null;function gg(){var t=window.event;return t&&t.type==="popstate"?t===Fc?!1:(Fc=t,!0):(Fc=null,!1)}var cx=typeof setTimeout=="function"?setTimeout:void 0,bg=typeof clearTimeout=="function"?clearTimeout:void 0,dx=typeof Promise=="function"?Promise:void 0,yg=typeof queueMicrotask=="function"?queueMicrotask:typeof dx<"u"?function(t){return dx.resolve(null).then(t).catch(vg)}:cx;function vg(t){setTimeout(function(){throw t})}function js(t){return t==="head"}function ux(t,a){var s=a,l=0;do{var o=s.nextSibling;if(t.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(o),Ol(a);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")Rn(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Rn(s);for(var d=s.firstChild;d;){var j=d.nextSibling,C=d.nodeName;d[Zl]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=j}}else s==="body"&&Rn(t.ownerDocument.body);s=o}while(s);Ol(a)}function mx(t,a){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function $c(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":$c(s),Vi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function jg(t,a,s,l){for(;t.nodeType===1;){var o=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Zl])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var d=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=xa(t.nextSibling),t===null)break}return null}function Ng(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=xa(t.nextSibling),t===null))return null;return t}function hx(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=xa(t.nextSibling),t===null))return null;return t}function Yc(t){return t.data==="$?"||t.data==="$~"}function Pc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function wg(t,a){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||s.readyState!=="loading")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function xa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Qc=null;function xx(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(a===0)return xa(t.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}t=t.nextSibling}return null}function px(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return t;a--}else s!=="/$"&&s!=="/&"||a++}t=t.previousSibling}return null}function fx(t,a,s){switch(a=ri(s),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Rn(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Vi(t)}var pa=new Map,gx=new Set;function ii(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ka=$.d;$.d={f:kg,r:Sg,D:_g,C:Cg,L:Eg,m:Ag,X:Dg,S:Tg,M:Rg};function kg(){var t=Ka.f(),a=Jr();return t||a}function Sg(t){var a=el(t);a!==null&&a.tag===5&&a.type==="form"?zm(a):Ka.r(t)}var Rl=typeof document>"u"?null:document;function bx(t,a,s){var l=Rl;if(l&&typeof a=="string"&&a){var o=ia(a);o='link[rel="'+t+'"][href="'+o+'"]',typeof s=="string"&&(o+='[crossorigin="'+s+'"]'),gx.has(o)||(gx.add(o),t={rel:t,crossOrigin:s,href:a},l.querySelector(o)===null&&(a=l.createElement("link"),Ct(a,"link",t),yt(a),l.head.appendChild(a)))}}function _g(t){Ka.D(t),bx("dns-prefetch",t,null)}function Cg(t,a){Ka.C(t,a),bx("preconnect",t,a)}function Eg(t,a,s){Ka.L(t,a,s);var l=Rl;if(l&&t&&a){var o='link[rel="preload"][as="'+ia(a)+'"]';a==="image"&&s&&s.imageSrcSet?(o+='[imagesrcset="'+ia(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(o+='[imagesizes="'+ia(s.imageSizes)+'"]')):o+='[href="'+ia(t)+'"]';var d=o;switch(a){case"style":d=Ml(t);break;case"script":d=zl(t)}pa.has(d)||(t=b({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),pa.set(d,t),l.querySelector(o)!==null||a==="style"&&l.querySelector(Mn(d))||a==="script"&&l.querySelector(zn(d))||(a=l.createElement("link"),Ct(a,"link",t),yt(a),l.head.appendChild(a)))}}function Ag(t,a){Ka.m(t,a);var s=Rl;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",o='link[rel="modulepreload"][as="'+ia(l)+'"][href="'+ia(t)+'"]',d=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=zl(t)}if(!pa.has(d)&&(t=b({rel:"modulepreload",href:t},a),pa.set(d,t),s.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(zn(d)))return}l=s.createElement("link"),Ct(l,"link",t),yt(l),s.head.appendChild(l)}}}function Tg(t,a,s){Ka.S(t,a,s);var l=Rl;if(l&&t){var o=tl(l).hoistableStyles,d=Ml(t);a=a||"default";var j=o.get(d);if(!j){var C={loading:0,preload:null};if(j=l.querySelector(Mn(d)))C.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":a},s),(s=pa.get(d))&&Vc(t,s);var O=j=l.createElement("link");yt(O),Ct(O,"link",t),O._p=new Promise(function(X,ie){O.onload=X,O.onerror=ie}),O.addEventListener("load",function(){C.loading|=1}),O.addEventListener("error",function(){C.loading|=2}),C.loading|=4,oi(j,a,l)}j={type:"stylesheet",instance:j,count:1,state:C},o.set(d,j)}}}function Dg(t,a){Ka.X(t,a);var s=Rl;if(s&&t){var l=tl(s).hoistableScripts,o=zl(t),d=l.get(o);d||(d=s.querySelector(zn(o)),d||(t=b({src:t,async:!0},a),(a=pa.get(o))&&Xc(t,a),d=s.createElement("script"),yt(d),Ct(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(o,d))}}function Rg(t,a){Ka.M(t,a);var s=Rl;if(s&&t){var l=tl(s).hoistableScripts,o=zl(t),d=l.get(o);d||(d=s.querySelector(zn(o)),d||(t=b({src:t,async:!0,type:"module"},a),(a=pa.get(o))&&Xc(t,a),d=s.createElement("script"),yt(d),Ct(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(o,d))}}function yx(t,a,s,l){var o=(o=ve.current)?ii(o):null;if(!o)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Ml(s.href),s=tl(o).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ml(s.href);var d=tl(o).hoistableStyles,j=d.get(t);if(j||(o=o.ownerDocument||o,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,j),(d=o.querySelector(Mn(t)))&&!d._p&&(j.instance=d,j.state.loading=5),pa.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},pa.set(t,s),d||Mg(o,t,s,j.state))),a&&l===null)throw Error(i(528,""));return j}if(a&&l!==null)throw Error(i(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=zl(s),s=tl(o).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Ml(t){return'href="'+ia(t)+'"'}function Mn(t){return'link[rel="stylesheet"]['+t+"]"}function vx(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function Mg(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Ct(a,"link",s),yt(a),t.head.appendChild(a))}function zl(t){return'[src="'+ia(t)+'"]'}function zn(t){return"script[async]"+t}function jx(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+ia(s.href)+'"]');if(l)return a.instance=l,yt(l),l;var o=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),yt(l),Ct(l,"style",o),oi(l,s.precedence,t),a.instance=l;case"stylesheet":o=Ml(s.href);var d=t.querySelector(Mn(o));if(d)return a.state.loading|=4,a.instance=d,yt(d),d;l=vx(s),(o=pa.get(o))&&Vc(l,o),d=(t.ownerDocument||t).createElement("link"),yt(d);var j=d;return j._p=new Promise(function(C,O){j.onload=C,j.onerror=O}),Ct(d,"link",l),a.state.loading|=4,oi(d,s.precedence,t),a.instance=d;case"script":return d=zl(s.src),(o=t.querySelector(zn(d)))?(a.instance=o,yt(o),o):(l=s,(o=pa.get(d))&&(l=b({},s),Xc(l,o)),t=t.ownerDocument||t,o=t.createElement("script"),yt(o),Ct(o,"link",l),t.head.appendChild(o),a.instance=o);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,oi(l,s.precedence,t));return a.instance}function oi(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,d=o,j=0;j<l.length;j++){var C=l[j];if(C.dataset.precedence===a)d=C;else if(d!==o)break}d?d.parentNode.insertBefore(t,d.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Vc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Xc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var ci=null;function Nx(t,a,s){if(ci===null){var l=new Map,o=ci=new Map;o.set(s,l)}else o=ci,l=o.get(s),l||(l=new Map,o.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),o=0;o<s.length;o++){var d=s[o];if(!(d[Zl]||d[wt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var j=d.getAttribute(a)||"";j=t+j;var C=l.get(j);C?C.push(d):l.set(j,[d])}}return l}function wx(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function zg(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function kx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Og(t,a,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var o=Ml(l.href),d=a.querySelector(Mn(o));if(d){a=d._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=di.bind(t),a.then(t,t)),s.state.loading|=4,s.instance=d,yt(d);return}d=a.ownerDocument||a,l=vx(l),(o=pa.get(o))&&Vc(l,o),d=d.createElement("link"),yt(d);var j=d;j._p=new Promise(function(C,O){j.onload=C,j.onerror=O}),Ct(d,"link",l),s.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=di.bind(t),a.addEventListener("load",s),a.addEventListener("error",s))}}var Zc=0;function Lg(t,a){return t.stylesheets&&t.count===0&&mi(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&mi(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+a);0<t.imgBytes&&Zc===0&&(Zc=62500*fg());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&mi(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Zc?50:800)+a);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function di(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mi(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ui=null;function mi(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ui=new Map,a.forEach(Ug,t),ui=null,di.call(t))}function Ug(t,a){if(!(a.state.loading&4)){var s=ui.get(t);if(s)var l=s.get(null);else{s=new Map,ui.set(t,s);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<o.length;d++){var j=o[d];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(s.set(j.dataset.precedence,j),l=j)}l&&s.set(null,l)}o=a.instance,j=o.getAttribute("data-precedence"),d=s.get(j)||l,d===l&&s.set(null,o),s.set(j,o),this.count++,l=di.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),d?d.parentNode.insertBefore(o,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),a.state.loading|=4}}var On={$$typeof:U,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function qg(t,a,s,l,o,d,j,C,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.hiddenUpdates=$i(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=d,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Sx(t,a,s,l,o,d,j,C,O,X,ie,he){return t=new qg(t,a,s,j,O,X,ie,he,C),a=1,d===!0&&(a|=24),d=Jt(3,null,null,a),t.current=d,d.stateNode=t,a=Eo(),a.refCount++,t.pooledCache=a,a.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:a},Ro(d),t}function _x(t){return t?(t=ul,t):ul}function Cx(t,a,s,l,o,d){o=_x(o),l.context===null?l.context=o:l.pendingContext=o,l=ds(a),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=us(t,l,a),s!==null&&(Qt(s,t,a),hn(s,t,a))}function Ex(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Ic(t,a){Ex(t,a),(t=t.alternate)&&Ex(t,a)}function Ax(t){if(t.tag===13||t.tag===31){var a=Ms(t,67108864);a!==null&&Qt(a,t,67108864),Ic(t,67108864)}}function Tx(t){if(t.tag===13||t.tag===31){var a=sa();a=Yi(a);var s=Ms(t,a);s!==null&&Qt(s,t,a),Ic(t,a)}}var hi=!0;function Bg(t,a,s,l){var o=z.T;z.T=null;var d=$.p;try{$.p=2,Kc(t,a,s,l)}finally{$.p=d,z.T=o}}function Hg(t,a,s,l){var o=z.T;z.T=null;var d=$.p;try{$.p=8,Kc(t,a,s,l)}finally{$.p=d,z.T=o}}function Kc(t,a,s,l){if(hi){var o=Jc(l);if(o===null)Uc(t,a,l,xi,s),Rx(t,l);else if(Fg(o,t,a,s,l))l.stopPropagation();else if(Rx(t,l),a&4&&-1<Gg.indexOf(t)){for(;o!==null;){var d=el(o);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var j=Es(d.pendingLanes);if(j!==0){var C=d;for(C.pendingLanes|=2,C.entangledLanes|=2;j;){var O=1<<31-Rt(j);C.entanglements[1]|=O,j&=~O}Aa(d),(Qe&6)===0&&(Ir=Ot()+500,An(0))}}break;case 31:case 13:C=Ms(d,2),C!==null&&Qt(C,d,2),Jr(),Ic(d,2)}if(d=Jc(l),d===null&&Uc(t,a,l,xi,s),d===o)break;o=d}o!==null&&l.stopPropagation()}else Uc(t,a,l,null,s)}}function Jc(t){return t=Wi(t),Wc(t)}var xi=null;function Wc(t){if(xi=null,t=Ws(t),t!==null){var a=x(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=h(a),t!==null)return t;t=null}else if(s===31){if(t=N(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return xi=t,null}function Dx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case Ee:return 2;case Ae:return 8;case Pe:case bt:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var ed=!1,Ns=null,ws=null,ks=null,Ln=new Map,Un=new Map,Ss=[],Gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rx(t,a){switch(t){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":Ln.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(a.pointerId)}}function qn(t,a,s,l,o,d){return t===null||t.nativeEvent!==d?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[o]},a!==null&&(a=el(a),a!==null&&Ax(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,o!==null&&a.indexOf(o)===-1&&a.push(o),t)}function Fg(t,a,s,l,o){switch(a){case"focusin":return Ns=qn(Ns,t,a,s,l,o),!0;case"dragenter":return ws=qn(ws,t,a,s,l,o),!0;case"mouseover":return ks=qn(ks,t,a,s,l,o),!0;case"pointerover":var d=o.pointerId;return Ln.set(d,qn(Ln.get(d)||null,t,a,s,l,o)),!0;case"gotpointercapture":return d=o.pointerId,Un.set(d,qn(Un.get(d)||null,t,a,s,l,o)),!0}return!1}function Mx(t){var a=Ws(t.target);if(a!==null){var s=x(a);if(s!==null){if(a=s.tag,a===13){if(a=h(s),a!==null){t.blockedOn=a,Vd(t.priority,function(){Tx(s)});return}}else if(a===31){if(a=N(s),a!==null){t.blockedOn=a,Vd(t.priority,function(){Tx(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pi(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=Jc(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Ji=l,s.target.dispatchEvent(l),Ji=null}else return a=el(s),a!==null&&Ax(a),t.blockedOn=s,!1;a.shift()}return!0}function zx(t,a,s){pi(t)&&s.delete(a)}function $g(){ed=!1,Ns!==null&&pi(Ns)&&(Ns=null),ws!==null&&pi(ws)&&(ws=null),ks!==null&&pi(ks)&&(ks=null),Ln.forEach(zx),Un.forEach(zx)}function fi(t,a){t.blockedOn===a&&(t.blockedOn=null,ed||(ed=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$g)))}var gi=null;function Ox(t){gi!==t&&(gi=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gi===t&&(gi=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],o=t[a+2];if(typeof l!="function"){if(Wc(l||s)===null)continue;break}var d=el(s);d!==null&&(t.splice(a,3),a-=3,Jo(d,{pending:!0,data:o,method:s.method,action:l},l,o))}}))}function Ol(t){function a(O){return fi(O,t)}Ns!==null&&fi(Ns,t),ws!==null&&fi(ws,t),ks!==null&&fi(ks,t),Ln.forEach(a),Un.forEach(a);for(var s=0;s<Ss.length;s++){var l=Ss[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ss.length&&(s=Ss[0],s.blockedOn===null);)Mx(s),s.blockedOn===null&&Ss.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var o=s[l],d=s[l+1],j=o[Ht]||null;if(typeof d=="function")j||Ox(s);else if(j){var C=null;if(d&&d.hasAttribute("formAction")){if(o=d,j=d[Ht]||null)C=j.formAction;else if(Wc(o)!==null)continue}else C=j.action;typeof C=="function"?s[l+1]=C:(s.splice(l,3),l-=3),Ox(s)}}}function Lx(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(j){return o=j})},focusReset:"manual",scroll:"manual"})}function a(){o!==null&&(o(),o=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),o!==null&&(o(),o=null)}}}function td(t){this._internalRoot=t}bi.prototype.render=td.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var s=a.current,l=sa();Cx(s,l,t,a,null,null)},bi.prototype.unmount=td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Cx(t.current,2,null,t,null,null),Jr(),a[Js]=null}};function bi(t){this._internalRoot=t}bi.prototype.unstable_scheduleHydration=function(t){if(t){var a=Qd();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Ss.length&&a!==0&&a<Ss[s].priority;s++);Ss.splice(s,0,t),s===0&&Mx(t)}};var Ux=r.version;if(Ux!=="19.2.3")throw Error(i(527,Ux,"19.2.3"));$.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(a),t=t!==null?f(t):null,t=t===null?null:t.stateNode,t};var Yg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{as=yi.inject(Yg),Dt=yi}catch{}}return Hn.createRoot=function(t,a){if(!u(t))throw Error(i(299));var s=!1,l="",o=Ym,d=Pm,j=Qm;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(j=a.onRecoverableError)),a=Sx(t,1,!1,null,null,s,l,null,o,d,j,Lx),t[Js]=a.current,Lc(t),new td(a)},Hn.hydrateRoot=function(t,a,s){if(!u(t))throw Error(i(299));var l=!1,o="",d=Ym,j=Pm,C=Qm,O=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(j=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.formState!==void 0&&(O=s.formState)),a=Sx(t,1,!0,a,s??null,l,o,O,d,j,C,Lx),a.context=_x(null),s=a.current,l=sa(),l=Yi(l),o=ds(l),o.callback=null,us(s,o,l),s=l,a.current.lanes=s,Xl(a,s),Aa(a),t[Js]=a.current,Lc(t),new bi(a)},Hn.version="19.2.3",Hn}var Vx;function eb(){if(Vx)return ld.exports;Vx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),ld.exports=Wg(),ld.exports}var tb=eb();var Xx="popstate";function ab(n={}){function r(i,u){let{pathname:x,search:h,hash:N}=i.location;return gd("",{pathname:x,search:h,hash:N},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function c(i,u){return typeof u=="string"?u:Zn(u)}return lb(r,c,null,n)}function rt(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function la(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function sb(){return Math.random().toString(36).substring(2,10)}function Zx(n,r){return{usr:n.state,key:n.key,idx:r}}function gd(n,r,c=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof r=="string"?Gl(r):r,state:c,key:r&&r.key||i||sb()}}function Zn({pathname:n="/",search:r="",hash:c=""}){return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function Gl(n){let r={};if(n){let c=n.indexOf("#");c>=0&&(r.hash=n.substring(c),n=n.substring(0,c));let i=n.indexOf("?");i>=0&&(r.search=n.substring(i),n=n.substring(0,i)),n&&(r.pathname=n)}return r}function lb(n,r,c,i={}){let{window:u=document.defaultView,v5Compat:x=!1}=i,h=u.history,N="POP",v=null,g=f();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function f(){return(h.state||{idx:null}).idx}function b(){N="POP";let y=f(),E=y==null?null:y-g;g=y,v&&v({action:N,location:S.location,delta:E})}function w(y,E){N="PUSH";let A=gd(S.location,y,E);g=f()+1;let U=Zx(A,g),D=S.createHref(A);try{h.pushState(U,"",D)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;u.location.assign(D)}x&&v&&v({action:N,location:S.location,delta:1})}function _(y,E){N="REPLACE";let A=gd(S.location,y,E);g=f();let U=Zx(A,g),D=S.createHref(A);h.replaceState(U,"",D),x&&v&&v({action:N,location:S.location,delta:0})}function k(y){return nb(y)}let S={get action(){return N},get location(){return n(u,h)},listen(y){if(v)throw new Error("A history only accepts one active listener");return u.addEventListener(Xx,b),v=y,()=>{u.removeEventListener(Xx,b),v=null}},createHref(y){return r(u,y)},createURL:k,encodeLocation(y){let E=k(y);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:w,replace:_,go(y){return h.go(y)}};return S}function nb(n,r=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),rt(c,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Zn(n);return i=i.replace(/ $/,"%20"),!r&&i.startsWith("//")&&(i=c+i),new URL(i,c)}function E0(n,r,c="/"){return rb(n,r,c,!1)}function rb(n,r,c,i){let u=typeof r=="string"?Gl(r):r,x=Wa(u.pathname||"/",c);if(x==null)return null;let h=A0(n);ib(h);let N=null;for(let v=0;N==null&&v<h.length;++v){let g=bb(x);N=fb(h[v],g,i)}return N}function A0(n,r=[],c=[],i="",u=!1){let x=(h,N,v=u,g)=>{let f={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:N,route:h};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(i)&&v)return;rt(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length)}let b=Ja([i,f.relativePath]),w=c.concat(f);h.children&&h.children.length>0&&(rt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),A0(h.children,r,w,b,v)),!(h.path==null&&!h.index)&&r.push({path:b,score:xb(b,h.index),routesMeta:w})};return n.forEach((h,N)=>{if(h.path===""||!h.path?.includes("?"))x(h,N);else for(let v of T0(h.path))x(h,N,!0,v)}),r}function T0(n){let r=n.split("/");if(r.length===0)return[];let[c,...i]=r,u=c.endsWith("?"),x=c.replace(/\?$/,"");if(i.length===0)return u?[x,""]:[x];let h=T0(i.join("/")),N=[];return N.push(...h.map(v=>v===""?x:[x,v].join("/"))),u&&N.push(...h),N.map(v=>n.startsWith("/")&&v===""?"/":v)}function ib(n){n.sort((r,c)=>r.score!==c.score?c.score-r.score:pb(r.routesMeta.map(i=>i.childrenIndex),c.routesMeta.map(i=>i.childrenIndex)))}var ob=/^:[\w-]+$/,cb=3,db=2,ub=1,mb=10,hb=-2,Ix=n=>n==="*";function xb(n,r){let c=n.split("/"),i=c.length;return c.some(Ix)&&(i+=hb),r&&(i+=db),c.filter(u=>!Ix(u)).reduce((u,x)=>u+(ob.test(x)?cb:x===""?ub:mb),i)}function pb(n,r){return n.length===r.length&&n.slice(0,-1).every((i,u)=>i===r[u])?n[n.length-1]-r[r.length-1]:0}function fb(n,r,c=!1){let{routesMeta:i}=n,u={},x="/",h=[];for(let N=0;N<i.length;++N){let v=i[N],g=N===i.length-1,f=x==="/"?r:r.slice(x.length)||"/",b=Ri({path:v.relativePath,caseSensitive:v.caseSensitive,end:g},f),w=v.route;if(!b&&g&&c&&!i[i.length-1].route.index&&(b=Ri({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},f)),!b)return null;Object.assign(u,b.params),h.push({params:u,pathname:Ja([x,b.pathname]),pathnameBase:Nb(Ja([x,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(x=Ja([x,b.pathnameBase]))}return h}function Ri(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[c,i]=gb(n.path,n.caseSensitive,n.end),u=r.match(c);if(!u)return null;let x=u[0],h=x.replace(/(.)\/+$/,"$1"),N=u.slice(1);return{params:i.reduce((g,{paramName:f,isOptional:b},w)=>{if(f==="*"){let k=N[w]||"";h=x.slice(0,x.length-k.length).replace(/(.)\/+$/,"$1")}const _=N[w];return b&&!_?g[f]=void 0:g[f]=(_||"").replace(/%2F/g,"/"),g},{}),pathname:x,pathnameBase:h,pattern:n}}function gb(n,r=!1,c=!0){la(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,N,v)=>(i.push({paramName:N,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,r?void 0:"i"),i]}function bb(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return la(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),n}}function Wa(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let c=r.endsWith("/")?r.length-1:r.length,i=n.charAt(c);return i&&i!=="/"?null:n.slice(c)||"/"}var D0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yb=n=>D0.test(n);function vb(n,r="/"){let{pathname:c,search:i="",hash:u=""}=typeof n=="string"?Gl(n):n,x;if(c)if(yb(c))x=c;else{if(c.includes("//")){let h=c;c=c.replace(/\/\/+/g,"/"),la(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${c}`)}c.startsWith("/")?x=Kx(c.substring(1),"/"):x=Kx(c,r)}else x=r;return{pathname:x,search:wb(i),hash:kb(u)}}function Kx(n,r){let c=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?c.length>1&&c.pop():u!=="."&&c.push(u)}),c.length>1?c.join("/"):"/"}function od(n,r,c,i){return`Cannot include a '${n}' character in a manually specified \`to.${r}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jb(n){return n.filter((r,c)=>c===0||r.route.path&&r.route.path.length>0)}function Cd(n){let r=jb(n);return r.map((c,i)=>i===r.length-1?c.pathname:c.pathnameBase)}function Ed(n,r,c,i=!1){let u;typeof n=="string"?u=Gl(n):(u={...n},rt(!u.pathname||!u.pathname.includes("?"),od("?","pathname","search",u)),rt(!u.pathname||!u.pathname.includes("#"),od("#","pathname","hash",u)),rt(!u.search||!u.search.includes("#"),od("#","search","hash",u)));let x=n===""||u.pathname==="",h=x?"/":u.pathname,N;if(h==null)N=c;else{let b=r.length-1;if(!i&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),b-=1;u.pathname=w.join("/")}N=b>=0?r[b]:"/"}let v=vb(u,N),g=h&&h!=="/"&&h.endsWith("/"),f=(x||h===".")&&c.endsWith("/");return!v.pathname.endsWith("/")&&(g||f)&&(v.pathname+="/"),v}var Ja=n=>n.join("/").replace(/\/\/+/g,"/"),Nb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Sb=class{constructor(n,r,c,i=!1){this.status=n,this.statusText=r||"",this.internal=i,c instanceof Error?(this.data=c.toString(),this.error=c):this.data=c}};function _b(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Cb(n){return n.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var R0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function M0(n,r){let c=n;if(typeof c!="string"||!D0.test(c))return{absoluteURL:void 0,isExternal:!1,to:c};let i=c,u=!1;if(R0)try{let x=new URL(window.location.href),h=c.startsWith("//")?new URL(x.protocol+c):new URL(c),N=Wa(h.pathname,r);h.origin===x.origin&&N!=null?c=N+h.search+h.hash:u=!0}catch{la(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:u,to:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var z0=["POST","PUT","PATCH","DELETE"];new Set(z0);var Eb=["GET",...z0];new Set(Eb);var Fl=m.createContext(null);Fl.displayName="DataRouter";var Oi=m.createContext(null);Oi.displayName="DataRouterState";var Ab=m.createContext(!1),O0=m.createContext({isTransitioning:!1});O0.displayName="ViewTransition";var Tb=m.createContext(new Map);Tb.displayName="Fetchers";var Db=m.createContext(null);Db.displayName="Await";var na=m.createContext(null);na.displayName="Navigation";var In=m.createContext(null);In.displayName="Location";var ga=m.createContext({outlet:null,matches:[],isDataRoute:!1});ga.displayName="Route";var Ad=m.createContext(null);Ad.displayName="RouteError";var L0="REACT_ROUTER_ERROR",Rb="REDIRECT",Mb="ROUTE_ERROR_RESPONSE";function zb(n){if(n.startsWith(`${L0}:${Rb}:{`))try{let r=JSON.parse(n.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function Ob(n){if(n.startsWith(`${L0}:${Mb}:{`))try{let r=JSON.parse(n.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new Sb(r.status,r.statusText,r.data)}catch{}}function Lb(n,{relative:r}={}){rt($l(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:i}=m.useContext(na),{hash:u,pathname:x,search:h}=Jn(n,{relative:r}),N=x;return c!=="/"&&(N=x==="/"?c:Ja([c,x])),i.createHref({pathname:N,search:h,hash:u})}function $l(){return m.useContext(In)!=null}function ba(){return rt($l(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(In).location}var U0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function q0(n){m.useContext(na).static||m.useLayoutEffect(n)}function He(){let{isDataRoute:n}=m.useContext(ga);return n?Kb():Ub()}function Ub(){rt($l(),"useNavigate() may be used only in the context of a <Router> component.");let n=m.useContext(Fl),{basename:r,navigator:c}=m.useContext(na),{matches:i}=m.useContext(ga),{pathname:u}=ba(),x=JSON.stringify(Cd(i)),h=m.useRef(!1);return q0(()=>{h.current=!0}),m.useCallback((v,g={})=>{if(la(h.current,U0),!h.current)return;if(typeof v=="number"){c.go(v);return}let f=Ed(v,JSON.parse(x),u,g.relative==="path");n==null&&r!=="/"&&(f.pathname=f.pathname==="/"?r:Ja([r,f.pathname])),(g.replace?c.replace:c.push)(f,g.state,g)},[r,c,x,u,n])}var qb=m.createContext(null);function Bb(n){let r=m.useContext(ga).outlet;return m.useMemo(()=>r&&m.createElement(qb.Provider,{value:n},r),[r,n])}function Kn(){let{matches:n}=m.useContext(ga),r=n[n.length-1];return r?r.params:{}}function Jn(n,{relative:r}={}){let{matches:c}=m.useContext(ga),{pathname:i}=ba(),u=JSON.stringify(Cd(c));return m.useMemo(()=>Ed(n,JSON.parse(u),i,r==="path"),[n,u,i,r])}function Hb(n,r){return B0(n,r)}function B0(n,r,c,i,u){rt($l(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:x}=m.useContext(na),{matches:h}=m.useContext(ga),N=h[h.length-1],v=N?N.params:{},g=N?N.pathname:"/",f=N?N.pathnameBase:"/",b=N&&N.route;{let A=b&&b.path||"";G0(g,!b||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let w=ba(),_;if(r){let A=typeof r=="string"?Gl(r):r;rt(f==="/"||A.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${A.pathname}" was given in the \`location\` prop.`),_=A}else _=w;let k=_.pathname||"/",S=k;if(f!=="/"){let A=f.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(A.length).join("/")}let y=E0(n,{pathname:S});la(b||y!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),la(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Pb(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},v,A.params),pathname:Ja([f,x.encodeLocation?x.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:Ja([f,x.encodeLocation?x.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),h,c,i,u);return r&&E?m.createElement(In.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},E):E}function Gb(){let n=Ib(),r=_b(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),c=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:i},x={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:x},"ErrorBoundary")," or"," ",m.createElement("code",{style:x},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},r),c?m.createElement("pre",{style:u},c):null,h)}var Fb=m.createElement(Gb,null),H0=class extends m.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){this.props.onError?this.props.onError(n,r):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const c=Ob(n.digest);c&&(n=c)}let r=n!==void 0?m.createElement(ga.Provider,{value:this.props.routeContext},m.createElement(Ad.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?m.createElement($b,{error:n},r):r}};H0.contextType=Ab;var cd=new WeakMap;function $b({children:n,error:r}){let{basename:c}=m.useContext(na);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let i=zb(r.digest);if(i){let u=cd.get(r);if(u)throw u;let x=M0(i.location,c);if(R0&&!cd.get(r))if(x.isExternal||i.reloadDocument)window.location.href=x.absoluteURL||x.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(x.to,{replace:i.replace}));throw cd.set(r,h),h}return m.createElement("meta",{httpEquiv:"refresh",content:`0;url=${x.absoluteURL||x.to}`})}}return n}function Yb({routeContext:n,match:r,children:c}){let i=m.useContext(Fl);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(ga.Provider,{value:n},c)}function Pb(n,r=[],c=null,i=null,u=null){if(n==null){if(!c)return null;if(c.errors)n=c.matches;else if(r.length===0&&!c.initialized&&c.matches.length>0)n=c.matches;else return null}let x=n,h=c?.errors;if(h!=null){let f=x.findIndex(b=>b.route.id&&h?.[b.route.id]!==void 0);rt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),x=x.slice(0,Math.min(x.length,f+1))}let N=!1,v=-1;if(c)for(let f=0;f<x.length;f++){let b=x[f];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(v=f),b.route.id){let{loaderData:w,errors:_}=c,k=b.route.loader&&!w.hasOwnProperty(b.route.id)&&(!_||_[b.route.id]===void 0);if(b.route.lazy||k){N=!0,v>=0?x=x.slice(0,v+1):x=[x[0]];break}}}let g=c&&i?(f,b)=>{i(f,{location:c.location,params:c.matches?.[0]?.params??{},unstable_pattern:Cb(c.matches),errorInfo:b})}:void 0;return x.reduceRight((f,b,w)=>{let _,k=!1,S=null,y=null;c&&(_=h&&b.route.id?h[b.route.id]:void 0,S=b.route.errorElement||Fb,N&&(v<0&&w===0?(G0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,y=null):v===w&&(k=!0,y=b.route.hydrateFallbackElement||null)));let E=r.concat(x.slice(0,w+1)),A=()=>{let U;return _?U=S:k?U=y:b.route.Component?U=m.createElement(b.route.Component,null):b.route.element?U=b.route.element:U=f,m.createElement(Yb,{match:b,routeContext:{outlet:f,matches:E,isDataRoute:c!=null},children:U})};return c&&(b.route.ErrorBoundary||b.route.errorElement||w===0)?m.createElement(H0,{location:c.location,revalidation:c.revalidation,component:S,error:_,children:A(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:g}):A()},null)}function Td(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qb(n){let r=m.useContext(Fl);return rt(r,Td(n)),r}function Vb(n){let r=m.useContext(Oi);return rt(r,Td(n)),r}function Xb(n){let r=m.useContext(ga);return rt(r,Td(n)),r}function Dd(n){let r=Xb(n),c=r.matches[r.matches.length-1];return rt(c.route.id,`${n} can only be used on routes that contain a unique "id"`),c.route.id}function Zb(){return Dd("useRouteId")}function Ib(){let n=m.useContext(Ad),r=Vb("useRouteError"),c=Dd("useRouteError");return n!==void 0?n:r.errors?.[c]}function Kb(){let{router:n}=Qb("useNavigate"),r=Dd("useNavigate"),c=m.useRef(!1);return q0(()=>{c.current=!0}),m.useCallback(async(u,x={})=>{la(c.current,U0),c.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:r,...x}))},[n,r])}var Jx={};function G0(n,r,c){!r&&!Jx[n]&&(Jx[n]=!0,la(!1,c))}m.memo(Jb);function Jb({routes:n,future:r,state:c,onError:i}){return B0(n,void 0,c,i,r)}function F0({to:n,replace:r,state:c,relative:i}){rt($l(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=m.useContext(na);la(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:x}=m.useContext(ga),{pathname:h}=ba(),N=He(),v=Ed(n,Cd(x),h,i==="path"),g=JSON.stringify(v);return m.useEffect(()=>{N(JSON.parse(g),{replace:r,state:c,relative:i})},[N,g,i,r,c]),null}function Wb(n){return Bb(n.context)}function je(n){rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ey({basename:n="/",children:r=null,location:c,navigationType:i="POP",navigator:u,static:x=!1,unstable_useTransitions:h}){rt(!$l(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let N=n.replace(/^\/*/,"/"),v=m.useMemo(()=>({basename:N,navigator:u,static:x,unstable_useTransitions:h,future:{}}),[N,u,x,h]);typeof c=="string"&&(c=Gl(c));let{pathname:g="/",search:f="",hash:b="",state:w=null,key:_="default"}=c,k=m.useMemo(()=>{let S=Wa(g,N);return S==null?null:{location:{pathname:S,search:f,hash:b,state:w,key:_},navigationType:i}},[N,g,f,b,w,_,i]);return la(k!=null,`<Router basename="${N}"> is not able to match the URL "${g}${f}${b}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:m.createElement(na.Provider,{value:v},m.createElement(In.Provider,{children:r,value:k}))}function ty({children:n,location:r}){return Hb(bd(n),r)}function bd(n,r=[]){let c=[];return m.Children.forEach(n,(i,u)=>{if(!m.isValidElement(i))return;let x=[...r,u];if(i.type===m.Fragment){c.push.apply(c,bd(i.props.children,x));return}rt(i.type===je,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||x.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=bd(i.props.children,x)),c.push(h)}),c}var _i="get",Ci="application/x-www-form-urlencoded";function Li(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ay(n){return Li(n)&&n.tagName.toLowerCase()==="button"}function sy(n){return Li(n)&&n.tagName.toLowerCase()==="form"}function ly(n){return Li(n)&&n.tagName.toLowerCase()==="input"}function ny(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ry(n,r){return n.button===0&&(!r||r==="_self")&&!ny(n)}function yd(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((r,c)=>{let i=n[c];return r.concat(Array.isArray(i)?i.map(u=>[c,u]):[[c,i]])},[]))}function iy(n,r){let c=yd(n);return r&&r.forEach((i,u)=>{c.has(u)||r.getAll(u).forEach(x=>{c.append(u,x)})}),c}var vi=null;function oy(){if(vi===null)try{new FormData(document.createElement("form"),0),vi=!1}catch{vi=!0}return vi}var cy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dd(n){return n!=null&&!cy.has(n)?(la(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ci}"`),null):n}function dy(n,r){let c,i,u,x,h;if(sy(n)){let N=n.getAttribute("action");i=N?Wa(N,r):null,c=n.getAttribute("method")||_i,u=dd(n.getAttribute("enctype"))||Ci,x=new FormData(n)}else if(ay(n)||ly(n)&&(n.type==="submit"||n.type==="image")){let N=n.form;if(N==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=n.getAttribute("formaction")||N.getAttribute("action");if(i=v?Wa(v,r):null,c=n.getAttribute("formmethod")||N.getAttribute("method")||_i,u=dd(n.getAttribute("formenctype"))||dd(N.getAttribute("enctype"))||Ci,x=new FormData(N,n),!oy()){let{name:g,type:f,value:b}=n;if(f==="image"){let w=g?`${g}.`:"";x.append(`${w}x`,"0"),x.append(`${w}y`,"0")}else g&&x.append(g,b)}}else{if(Li(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=_i,i=null,u=Ci,h=n}return x&&u==="text/plain"&&(h=x,x=void 0),{action:i,method:c.toLowerCase(),encType:u,formData:x,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rd(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function uy(n,r,c){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${c}`:r&&Wa(i.pathname,r)==="/"?i.pathname=`${r.replace(/\/$/,"")}/_root.${c}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${c}`,i}async function my(n,r){if(n.id in r)return r[n.id];try{let c=await import(n.module);return r[n.id]=c,c}catch(c){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hy(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function xy(n,r,c){let i=await Promise.all(n.map(async u=>{let x=r.routes[u.route.id];if(x){let h=await my(x,c);return h.links?h.links():[]}return[]}));return by(i.flat(1).filter(hy).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Wx(n,r,c,i,u,x){let h=(v,g)=>c[g]?v.route.id!==c[g].route.id:!0,N=(v,g)=>c[g].pathname!==v.pathname||c[g].route.path?.endsWith("*")&&c[g].params["*"]!==v.params["*"];return x==="assets"?r.filter((v,g)=>h(v,g)||N(v,g)):x==="data"?r.filter((v,g)=>{let f=i.routes[v.route.id];if(!f||!f.hasLoader)return!1;if(h(v,g)||N(v,g))return!0;if(v.route.shouldRevalidate){let b=v.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:c[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function py(n,r,{includeHydrateFallback:c}={}){return fy(n.map(i=>{let u=r.routes[i.route.id];if(!u)return[];let x=[u.module];return u.clientActionModule&&(x=x.concat(u.clientActionModule)),u.clientLoaderModule&&(x=x.concat(u.clientLoaderModule)),c&&u.hydrateFallbackModule&&(x=x.concat(u.hydrateFallbackModule)),u.imports&&(x=x.concat(u.imports)),x}).flat(1))}function fy(n){return[...new Set(n)]}function gy(n){let r={},c=Object.keys(n).sort();for(let i of c)r[i]=n[i];return r}function by(n,r){let c=new Set;return new Set(r),n.reduce((i,u)=>{let x=JSON.stringify(gy(u));return c.has(x)||(c.add(x),i.push({key:x,link:u})),i},[])}function $0(){let n=m.useContext(Fl);return Rd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yy(){let n=m.useContext(Oi);return Rd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Md=m.createContext(void 0);Md.displayName="FrameworkContext";function Y0(){let n=m.useContext(Md);return Rd(n,"You must render this element inside a <HydratedRouter> element"),n}function vy(n,r){let c=m.useContext(Md),[i,u]=m.useState(!1),[x,h]=m.useState(!1),{onFocus:N,onBlur:v,onMouseEnter:g,onMouseLeave:f,onTouchStart:b}=r,w=m.useRef(null);m.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let S=E=>{E.forEach(A=>{h(A.isIntersecting)})},y=new IntersectionObserver(S,{threshold:.5});return w.current&&y.observe(w.current),()=>{y.disconnect()}}},[n]),m.useEffect(()=>{if(i){let S=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(S)}}},[i]);let _=()=>{u(!0)},k=()=>{u(!1),h(!1)};return c?n!=="intent"?[x,w,{}]:[x,w,{onFocus:Gn(N,_),onBlur:Gn(v,k),onMouseEnter:Gn(g,_),onMouseLeave:Gn(f,k),onTouchStart:Gn(b,_)}]:[!1,w,{}]}function Gn(n,r){return c=>{n&&n(c),c.defaultPrevented||r(c)}}function jy({page:n,...r}){let{router:c}=$0(),i=m.useMemo(()=>E0(c.routes,n,c.basename),[c.routes,n,c.basename]);return i?m.createElement(wy,{page:n,matches:i,...r}):null}function Ny(n){let{manifest:r,routeModules:c}=Y0(),[i,u]=m.useState([]);return m.useEffect(()=>{let x=!1;return xy(n,r,c).then(h=>{x||u(h)}),()=>{x=!0}},[n,r,c]),i}function wy({page:n,matches:r,...c}){let i=ba(),{manifest:u,routeModules:x}=Y0(),{basename:h}=$0(),{loaderData:N,matches:v}=yy(),g=m.useMemo(()=>Wx(n,r,v,u,i,"data"),[n,r,v,u,i]),f=m.useMemo(()=>Wx(n,r,v,u,i,"assets"),[n,r,v,u,i]),b=m.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let k=new Set,S=!1;if(r.forEach(E=>{let A=u.routes[E.route.id];!A||!A.hasLoader||(!g.some(U=>U.route.id===E.route.id)&&E.route.id in N&&x[E.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:k.add(E.route.id))}),k.size===0)return[];let y=uy(n,h,"data");return S&&k.size>0&&y.searchParams.set("_routes",r.filter(E=>k.has(E.route.id)).map(E=>E.route.id).join(",")),[y.pathname+y.search]},[h,N,i,u,g,r,n,x]),w=m.useMemo(()=>py(f,u),[f,u]),_=Ny(f);return m.createElement(m.Fragment,null,b.map(k=>m.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...c})),w.map(k=>m.createElement("link",{key:k,rel:"modulepreload",href:k,...c})),_.map(({key:k,link:S})=>m.createElement("link",{key:k,nonce:c.nonce,...S})))}function ky(...n){return r=>{n.forEach(c=>{typeof c=="function"?c(r):c!=null&&(c.current=r)})}}var Sy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sy&&(window.__reactRouterVersion="7.11.0")}catch{}function _y({basename:n,children:r,unstable_useTransitions:c,window:i}){let u=m.useRef();u.current==null&&(u.current=ab({window:i,v5Compat:!0}));let x=u.current,[h,N]=m.useState({action:x.action,location:x.location}),v=m.useCallback(g=>{c===!1?N(g):m.startTransition(()=>N(g))},[c]);return m.useLayoutEffect(()=>x.listen(v),[x,v]),m.createElement(ey,{basename:n,children:r,location:h.location,navigationType:h.action,navigator:x,unstable_useTransitions:c})}var P0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q0=m.forwardRef(function({onClick:r,discover:c="render",prefetch:i="none",relative:u,reloadDocument:x,replace:h,state:N,target:v,to:g,preventScrollReset:f,viewTransition:b,unstable_defaultShouldRevalidate:w,..._},k){let{basename:S,unstable_useTransitions:y}=m.useContext(na),E=typeof g=="string"&&P0.test(g),A=M0(g,S);g=A.to;let U=Lb(g,{relative:u}),[D,R,H]=vy(i,_),P=Ay(g,{replace:h,state:N,target:v,preventScrollReset:f,relative:u,viewTransition:b,unstable_defaultShouldRevalidate:w,unstable_useTransitions:y});function L(G){r&&r(G),G.defaultPrevented||P(G)}let re=m.createElement("a",{..._,...H,href:A.absoluteURL||U,onClick:A.isExternal||x?r:L,ref:ky(k,R),target:v,"data-discover":!E&&c==="render"?"true":void 0});return D&&!E?m.createElement(m.Fragment,null,re,m.createElement(jy,{page:U})):re});Q0.displayName="Link";var vd=m.forwardRef(function({"aria-current":r="page",caseSensitive:c=!1,className:i="",end:u=!1,style:x,to:h,viewTransition:N,children:v,...g},f){let b=Jn(h,{relative:g.relative}),w=ba(),_=m.useContext(Oi),{navigator:k,basename:S}=m.useContext(na),y=_!=null&&Oy(b)&&N===!0,E=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,A=w.pathname,U=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;c||(A=A.toLowerCase(),U=U?U.toLowerCase():null,E=E.toLowerCase()),U&&S&&(U=Wa(U,S)||U);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let R=A===E||!u&&A.startsWith(E)&&A.charAt(D)==="/",H=U!=null&&(U===E||!u&&U.startsWith(E)&&U.charAt(E.length)==="/"),P={isActive:R,isPending:H,isTransitioning:y},L=R?r:void 0,re;typeof i=="function"?re=i(P):re=[i,R?"active":null,H?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let G=typeof x=="function"?x(P):x;return m.createElement(Q0,{...g,"aria-current":L,className:re,ref:f,style:G,to:h,viewTransition:N},typeof v=="function"?v(P):v)});vd.displayName="NavLink";var Cy=m.forwardRef(({discover:n="render",fetcherKey:r,navigate:c,reloadDocument:i,replace:u,state:x,method:h=_i,action:N,onSubmit:v,relative:g,preventScrollReset:f,viewTransition:b,unstable_defaultShouldRevalidate:w,..._},k)=>{let{unstable_useTransitions:S}=m.useContext(na),y=My(),E=zy(N,{relative:g}),A=h.toLowerCase()==="get"?"get":"post",U=typeof N=="string"&&P0.test(N),D=R=>{if(v&&v(R),R.defaultPrevented)return;R.preventDefault();let H=R.nativeEvent.submitter,P=H?.getAttribute("formmethod")||h,L=()=>y(H||R.currentTarget,{fetcherKey:r,method:P,navigate:c,replace:u,state:x,relative:g,preventScrollReset:f,viewTransition:b,unstable_defaultShouldRevalidate:w});S&&c!==!1?m.startTransition(()=>L()):L()};return m.createElement("form",{ref:k,method:A,action:E,onSubmit:i?v:D,..._,"data-discover":!U&&n==="render"?"true":void 0})});Cy.displayName="Form";function Ey(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V0(n){let r=m.useContext(Fl);return rt(r,Ey(n)),r}function Ay(n,{target:r,replace:c,state:i,preventScrollReset:u,relative:x,viewTransition:h,unstable_defaultShouldRevalidate:N,unstable_useTransitions:v}={}){let g=He(),f=ba(),b=Jn(n,{relative:x});return m.useCallback(w=>{if(ry(w,r)){w.preventDefault();let _=c!==void 0?c:Zn(f)===Zn(b),k=()=>g(n,{replace:_,state:i,preventScrollReset:u,relative:x,viewTransition:h,unstable_defaultShouldRevalidate:N});v?m.startTransition(()=>k()):k()}},[f,g,b,c,i,r,n,u,x,h,N,v])}function Ty(n){la(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=m.useRef(yd(n)),c=m.useRef(!1),i=ba(),u=m.useMemo(()=>iy(i.search,c.current?null:r.current),[i.search]),x=He(),h=m.useCallback((N,v)=>{const g=yd(typeof N=="function"?N(new URLSearchParams(u)):N);c.current=!0,x("?"+g,v)},[x,u]);return[u,h]}var Dy=0,Ry=()=>`__${String(++Dy)}__`;function My(){let{router:n}=V0("useSubmit"),{basename:r}=m.useContext(na),c=Zb(),i=n.fetch,u=n.navigate;return m.useCallback(async(x,h={})=>{let{action:N,method:v,encType:g,formData:f,body:b}=dy(x,r);if(h.navigate===!1){let w=h.fetcherKey||Ry();await i(w,c,h.action||N,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:f,body:b,formMethod:h.method||v,formEncType:h.encType||g,flushSync:h.flushSync})}else await u(h.action||N,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:f,body:b,formMethod:h.method||v,formEncType:h.encType||g,replace:h.replace,state:h.state,fromRouteId:c,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,u,r,c])}function zy(n,{relative:r}={}){let{basename:c}=m.useContext(na),i=m.useContext(ga);rt(i,"useFormAction must be used inside a RouteContext");let[u]=i.matches.slice(-1),x={...Jn(n||".",{relative:r})},h=ba();if(n==null){x.search=h.search;let N=new URLSearchParams(x.search),v=N.getAll("index");if(v.some(f=>f==="")){N.delete("index"),v.filter(b=>b).forEach(b=>N.append("index",b));let f=N.toString();x.search=f?`?${f}`:""}}return(!n||n===".")&&u.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(x.pathname=x.pathname==="/"?c:Ja([c,x.pathname])),Zn(x)}function Oy(n,{relative:r}={}){let c=m.useContext(O0);rt(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=V0("useViewTransitionState"),u=Jn(n,{relative:r});if(!c.isTransitioning)return!1;let x=Wa(c.currentLocation.pathname,i)||c.currentLocation.pathname,h=Wa(c.nextLocation.pathname,i)||c.nextLocation.pathname;return Ri(u.pathname,h)!=null||Ri(u.pathname,x)!=null}function X0(n,r){return function(){return n.apply(r,arguments)}}const{toString:Ly}=Object.prototype,{getPrototypeOf:zd}=Object,{iterator:Ui,toStringTag:Z0}=Symbol,qi=(n=>r=>{const c=Ly.call(r);return n[c]||(n[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),ka=n=>(n=n.toLowerCase(),r=>qi(r)===n),Bi=n=>r=>typeof r===n,{isArray:Yl}=Array,ql=Bi("undefined");function Wn(n){return n!==null&&!ql(n)&&n.constructor!==null&&!ql(n.constructor)&&Vt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const I0=ka("ArrayBuffer");function Uy(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&I0(n.buffer),r}const qy=Bi("string"),Vt=Bi("function"),K0=Bi("number"),er=n=>n!==null&&typeof n=="object",By=n=>n===!0||n===!1,Ei=n=>{if(qi(n)!=="object")return!1;const r=zd(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Z0 in n)&&!(Ui in n)},Hy=n=>{if(!er(n)||Wn(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Gy=ka("Date"),Fy=ka("File"),$y=ka("Blob"),Yy=ka("FileList"),Py=n=>er(n)&&Vt(n.pipe),Qy=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||Vt(n.append)&&((r=qi(n))==="formdata"||r==="object"&&Vt(n.toString)&&n.toString()==="[object FormData]"))},Vy=ka("URLSearchParams"),[Xy,Zy,Iy,Ky]=["ReadableStream","Request","Response","Headers"].map(ka),Jy=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tr(n,r,{allOwnKeys:c=!1}={}){if(n===null||typeof n>"u")return;let i,u;if(typeof n!="object"&&(n=[n]),Yl(n))for(i=0,u=n.length;i<u;i++)r.call(null,n[i],i,n);else{if(Wn(n))return;const x=c?Object.getOwnPropertyNames(n):Object.keys(n),h=x.length;let N;for(i=0;i<h;i++)N=x[i],r.call(null,n[N],N,n)}}function J0(n,r){if(Wn(n))return null;r=r.toLowerCase();const c=Object.keys(n);let i=c.length,u;for(;i-- >0;)if(u=c[i],r===u.toLowerCase())return u;return null}const Qs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,W0=n=>!ql(n)&&n!==Qs;function jd(){const{caseless:n,skipUndefined:r}=W0(this)&&this||{},c={},i=(u,x)=>{const h=n&&J0(c,x)||x;Ei(c[h])&&Ei(u)?c[h]=jd(c[h],u):Ei(u)?c[h]=jd({},u):Yl(u)?c[h]=u.slice():(!r||!ql(u))&&(c[h]=u)};for(let u=0,x=arguments.length;u<x;u++)arguments[u]&&tr(arguments[u],i);return c}const Wy=(n,r,c,{allOwnKeys:i}={})=>(tr(r,(u,x)=>{c&&Vt(u)?n[x]=X0(u,c):n[x]=u},{allOwnKeys:i}),n),ev=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),tv=(n,r,c,i)=>{n.prototype=Object.create(r.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),c&&Object.assign(n.prototype,c)},av=(n,r,c,i)=>{let u,x,h;const N={};if(r=r||{},n==null)return r;do{for(u=Object.getOwnPropertyNames(n),x=u.length;x-- >0;)h=u[x],(!i||i(h,n,r))&&!N[h]&&(r[h]=n[h],N[h]=!0);n=c!==!1&&zd(n)}while(n&&(!c||c(n,r))&&n!==Object.prototype);return r},sv=(n,r,c)=>{n=String(n),(c===void 0||c>n.length)&&(c=n.length),c-=r.length;const i=n.indexOf(r,c);return i!==-1&&i===c},lv=n=>{if(!n)return null;if(Yl(n))return n;let r=n.length;if(!K0(r))return null;const c=new Array(r);for(;r-- >0;)c[r]=n[r];return c},nv=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&zd(Uint8Array)),rv=(n,r)=>{const i=(n&&n[Ui]).call(n);let u;for(;(u=i.next())&&!u.done;){const x=u.value;r.call(n,x[0],x[1])}},iv=(n,r)=>{let c;const i=[];for(;(c=n.exec(r))!==null;)i.push(c);return i},ov=ka("HTMLFormElement"),cv=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,i,u){return i.toUpperCase()+u}),e0=(({hasOwnProperty:n})=>(r,c)=>n.call(r,c))(Object.prototype),dv=ka("RegExp"),ep=(n,r)=>{const c=Object.getOwnPropertyDescriptors(n),i={};tr(c,(u,x)=>{let h;(h=r(u,x,n))!==!1&&(i[x]=h||u)}),Object.defineProperties(n,i)},uv=n=>{ep(n,(r,c)=>{if(Vt(n)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const i=n[c];if(Vt(i)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},mv=(n,r)=>{const c={},i=u=>{u.forEach(x=>{c[x]=!0})};return Yl(n)?i(n):i(String(n).split(r)),c},hv=()=>{},xv=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r;function pv(n){return!!(n&&Vt(n.append)&&n[Z0]==="FormData"&&n[Ui])}const fv=n=>{const r=new Array(10),c=(i,u)=>{if(er(i)){if(r.indexOf(i)>=0)return;if(Wn(i))return i;if(!("toJSON"in i)){r[u]=i;const x=Yl(i)?[]:{};return tr(i,(h,N)=>{const v=c(h,u+1);!ql(v)&&(x[N]=v)}),r[u]=void 0,x}}return i};return c(n,0)},gv=ka("AsyncFunction"),bv=n=>n&&(er(n)||Vt(n))&&Vt(n.then)&&Vt(n.catch),tp=((n,r)=>n?setImmediate:r?((c,i)=>(Qs.addEventListener("message",({source:u,data:x})=>{u===Qs&&x===c&&i.length&&i.shift()()},!1),u=>{i.push(u),Qs.postMessage(c,"*")}))(`axios@${Math.random()}`,[]):c=>setTimeout(c))(typeof setImmediate=="function",Vt(Qs.postMessage)),yv=typeof queueMicrotask<"u"?queueMicrotask.bind(Qs):typeof process<"u"&&process.nextTick||tp,vv=n=>n!=null&&Vt(n[Ui]),J={isArray:Yl,isArrayBuffer:I0,isBuffer:Wn,isFormData:Qy,isArrayBufferView:Uy,isString:qy,isNumber:K0,isBoolean:By,isObject:er,isPlainObject:Ei,isEmptyObject:Hy,isReadableStream:Xy,isRequest:Zy,isResponse:Iy,isHeaders:Ky,isUndefined:ql,isDate:Gy,isFile:Fy,isBlob:$y,isRegExp:dv,isFunction:Vt,isStream:Py,isURLSearchParams:Vy,isTypedArray:nv,isFileList:Yy,forEach:tr,merge:jd,extend:Wy,trim:Jy,stripBOM:ev,inherits:tv,toFlatObject:av,kindOf:qi,kindOfTest:ka,endsWith:sv,toArray:lv,forEachEntry:rv,matchAll:iv,isHTMLForm:ov,hasOwnProperty:e0,hasOwnProp:e0,reduceDescriptors:ep,freezeMethods:uv,toObjectSet:mv,toCamelCase:cv,noop:hv,toFiniteNumber:xv,findKey:J0,global:Qs,isContextDefined:W0,isSpecCompliantForm:pv,toJSONObject:fv,isAsyncFn:gv,isThenable:bv,setImmediate:tp,asap:yv,isIterable:vv};function Me(n,r,c,i,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),c&&(this.config=c),i&&(this.request=i),u&&(this.response=u,this.status=u.status?u.status:null)}J.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const ap=Me.prototype,sp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{sp[n]={value:n}});Object.defineProperties(Me,sp);Object.defineProperty(ap,"isAxiosError",{value:!0});Me.from=(n,r,c,i,u,x)=>{const h=Object.create(ap);J.toFlatObject(n,h,function(f){return f!==Error.prototype},g=>g!=="isAxiosError");const N=n&&n.message?n.message:"Error",v=r==null&&n?n.code:r;return Me.call(h,N,v,c,i,u),n&&h.cause==null&&Object.defineProperty(h,"cause",{value:n,configurable:!0}),h.name=n&&n.name||"Error",x&&Object.assign(h,x),h};const jv=null;function Nd(n){return J.isPlainObject(n)||J.isArray(n)}function lp(n){return J.endsWith(n,"[]")?n.slice(0,-2):n}function t0(n,r,c){return n?n.concat(r).map(function(u,x){return u=lp(u),!c&&x?"["+u+"]":u}).join(c?".":""):r}function Nv(n){return J.isArray(n)&&!n.some(Nd)}const wv=J.toFlatObject(J,{},null,function(r){return/^is[A-Z]/.test(r)});function Hi(n,r,c){if(!J.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,c=J.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,y){return!J.isUndefined(y[S])});const i=c.metaTokens,u=c.visitor||f,x=c.dots,h=c.indexes,v=(c.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(r);if(!J.isFunction(u))throw new TypeError("visitor must be a function");function g(k){if(k===null)return"";if(J.isDate(k))return k.toISOString();if(J.isBoolean(k))return k.toString();if(!v&&J.isBlob(k))throw new Me("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(k)||J.isTypedArray(k)?v&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function f(k,S,y){let E=k;if(k&&!y&&typeof k=="object"){if(J.endsWith(S,"{}"))S=i?S:S.slice(0,-2),k=JSON.stringify(k);else if(J.isArray(k)&&Nv(k)||(J.isFileList(k)||J.endsWith(S,"[]"))&&(E=J.toArray(k)))return S=lp(S),E.forEach(function(U,D){!(J.isUndefined(U)||U===null)&&r.append(h===!0?t0([S],D,x):h===null?S:S+"[]",g(U))}),!1}return Nd(k)?!0:(r.append(t0(y,S,x),g(k)),!1)}const b=[],w=Object.assign(wv,{defaultVisitor:f,convertValue:g,isVisitable:Nd});function _(k,S){if(!J.isUndefined(k)){if(b.indexOf(k)!==-1)throw Error("Circular reference detected in "+S.join("."));b.push(k),J.forEach(k,function(E,A){(!(J.isUndefined(E)||E===null)&&u.call(r,E,J.isString(A)?A.trim():A,S,w))===!0&&_(E,S?S.concat(A):[A])}),b.pop()}}if(!J.isObject(n))throw new TypeError("data must be an object");return _(n),r}function a0(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return r[i]})}function Od(n,r){this._pairs=[],n&&Hi(n,this,r)}const np=Od.prototype;np.append=function(r,c){this._pairs.push([r,c])};np.toString=function(r){const c=r?function(i){return r.call(this,i,a0)}:a0;return this._pairs.map(function(u){return c(u[0])+"="+c(u[1])},"").join("&")};function kv(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rp(n,r,c){if(!r)return n;const i=c&&c.encode||kv;J.isFunction(c)&&(c={serialize:c});const u=c&&c.serialize;let x;if(u?x=u(r,c):x=J.isURLSearchParams(r)?r.toString():new Od(r,c).toString(i),x){const h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+x}return n}class s0{constructor(){this.handlers=[]}use(r,c,i){return this.handlers.push({fulfilled:r,rejected:c,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){J.forEach(this.handlers,function(i){i!==null&&r(i)})}}const ip={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sv=typeof URLSearchParams<"u"?URLSearchParams:Od,_v=typeof FormData<"u"?FormData:null,Cv=typeof Blob<"u"?Blob:null,Ev={isBrowser:!0,classes:{URLSearchParams:Sv,FormData:_v,Blob:Cv},protocols:["http","https","file","blob","url","data"]},Ld=typeof window<"u"&&typeof document<"u",wd=typeof navigator=="object"&&navigator||void 0,Av=Ld&&(!wd||["ReactNative","NativeScript","NS"].indexOf(wd.product)<0),Tv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Dv=Ld&&window.location.href||"http://localhost",Rv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ld,hasStandardBrowserEnv:Av,hasStandardBrowserWebWorkerEnv:Tv,navigator:wd,origin:Dv},Symbol.toStringTag,{value:"Module"})),zt={...Rv,...Ev};function Mv(n,r){return Hi(n,new zt.classes.URLSearchParams,{visitor:function(c,i,u,x){return zt.isNode&&J.isBuffer(c)?(this.append(i,c.toString("base64")),!1):x.defaultVisitor.apply(this,arguments)},...r})}function zv(n){return J.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Ov(n){const r={},c=Object.keys(n);let i;const u=c.length;let x;for(i=0;i<u;i++)x=c[i],r[x]=n[x];return r}function op(n){function r(c,i,u,x){let h=c[x++];if(h==="__proto__")return!0;const N=Number.isFinite(+h),v=x>=c.length;return h=!h&&J.isArray(u)?u.length:h,v?(J.hasOwnProp(u,h)?u[h]=[u[h],i]:u[h]=i,!N):((!u[h]||!J.isObject(u[h]))&&(u[h]=[]),r(c,i,u[h],x)&&J.isArray(u[h])&&(u[h]=Ov(u[h])),!N)}if(J.isFormData(n)&&J.isFunction(n.entries)){const c={};return J.forEachEntry(n,(i,u)=>{r(zv(i),u,c,0)}),c}return null}function Lv(n,r,c){if(J.isString(n))try{return(r||JSON.parse)(n),J.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(c||JSON.stringify)(n)}const ar={transitional:ip,adapter:["xhr","http","fetch"],transformRequest:[function(r,c){const i=c.getContentType()||"",u=i.indexOf("application/json")>-1,x=J.isObject(r);if(x&&J.isHTMLForm(r)&&(r=new FormData(r)),J.isFormData(r))return u?JSON.stringify(op(r)):r;if(J.isArrayBuffer(r)||J.isBuffer(r)||J.isStream(r)||J.isFile(r)||J.isBlob(r)||J.isReadableStream(r))return r;if(J.isArrayBufferView(r))return r.buffer;if(J.isURLSearchParams(r))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let N;if(x){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Mv(r,this.formSerializer).toString();if((N=J.isFileList(r))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Hi(N?{"files[]":r}:r,v&&new v,this.formSerializer)}}return x||u?(c.setContentType("application/json",!1),Lv(r)):r}],transformResponse:[function(r){const c=this.transitional||ar.transitional,i=c&&c.forcedJSONParsing,u=this.responseType==="json";if(J.isResponse(r)||J.isReadableStream(r))return r;if(r&&J.isString(r)&&(i&&!this.responseType||u)){const h=!(c&&c.silentJSONParsing)&&u;try{return JSON.parse(r,this.parseReviver)}catch(N){if(h)throw N.name==="SyntaxError"?Me.from(N,Me.ERR_BAD_RESPONSE,this,null,this.response):N}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zt.classes.FormData,Blob:zt.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],n=>{ar.headers[n]={}});const Uv=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qv=n=>{const r={};let c,i,u;return n&&n.split(`
`).forEach(function(h){u=h.indexOf(":"),c=h.substring(0,u).trim().toLowerCase(),i=h.substring(u+1).trim(),!(!c||r[c]&&Uv[c])&&(c==="set-cookie"?r[c]?r[c].push(i):r[c]=[i]:r[c]=r[c]?r[c]+", "+i:i)}),r},l0=Symbol("internals");function Fn(n){return n&&String(n).trim().toLowerCase()}function Ai(n){return n===!1||n==null?n:J.isArray(n)?n.map(Ai):String(n)}function Bv(n){const r=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=c.exec(n);)r[i[1]]=i[2];return r}const Hv=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ud(n,r,c,i,u){if(J.isFunction(i))return i.call(this,r,c);if(u&&(r=c),!!J.isString(r)){if(J.isString(i))return r.indexOf(i)!==-1;if(J.isRegExp(i))return i.test(r)}}function Gv(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,c,i)=>c.toUpperCase()+i)}function Fv(n,r){const c=J.toCamelCase(" "+r);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+c,{value:function(u,x,h){return this[i].call(this,r,u,x,h)},configurable:!0})})}let Xt=class{constructor(r){r&&this.set(r)}set(r,c,i){const u=this;function x(N,v,g){const f=Fn(v);if(!f)throw new Error("header name must be a non-empty string");const b=J.findKey(u,f);(!b||u[b]===void 0||g===!0||g===void 0&&u[b]!==!1)&&(u[b||v]=Ai(N))}const h=(N,v)=>J.forEach(N,(g,f)=>x(g,f,v));if(J.isPlainObject(r)||r instanceof this.constructor)h(r,c);else if(J.isString(r)&&(r=r.trim())&&!Hv(r))h(qv(r),c);else if(J.isObject(r)&&J.isIterable(r)){let N={},v,g;for(const f of r){if(!J.isArray(f))throw TypeError("Object iterator must return a key-value pair");N[g=f[0]]=(v=N[g])?J.isArray(v)?[...v,f[1]]:[v,f[1]]:f[1]}h(N,c)}else r!=null&&x(c,r,i);return this}get(r,c){if(r=Fn(r),r){const i=J.findKey(this,r);if(i){const u=this[i];if(!c)return u;if(c===!0)return Bv(u);if(J.isFunction(c))return c.call(this,u,i);if(J.isRegExp(c))return c.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,c){if(r=Fn(r),r){const i=J.findKey(this,r);return!!(i&&this[i]!==void 0&&(!c||ud(this,this[i],i,c)))}return!1}delete(r,c){const i=this;let u=!1;function x(h){if(h=Fn(h),h){const N=J.findKey(i,h);N&&(!c||ud(i,i[N],N,c))&&(delete i[N],u=!0)}}return J.isArray(r)?r.forEach(x):x(r),u}clear(r){const c=Object.keys(this);let i=c.length,u=!1;for(;i--;){const x=c[i];(!r||ud(this,this[x],x,r,!0))&&(delete this[x],u=!0)}return u}normalize(r){const c=this,i={};return J.forEach(this,(u,x)=>{const h=J.findKey(i,x);if(h){c[h]=Ai(u),delete c[x];return}const N=r?Gv(x):String(x).trim();N!==x&&delete c[x],c[N]=Ai(u),i[N]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const c=Object.create(null);return J.forEach(this,(i,u)=>{i!=null&&i!==!1&&(c[u]=r&&J.isArray(i)?i.join(", "):i)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,c])=>r+": "+c).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...c){const i=new this(r);return c.forEach(u=>i.set(u)),i}static accessor(r){const i=(this[l0]=this[l0]={accessors:{}}).accessors,u=this.prototype;function x(h){const N=Fn(h);i[N]||(Fv(u,h),i[N]=!0)}return J.isArray(r)?r.forEach(x):x(r),this}};Xt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);J.reduceDescriptors(Xt.prototype,({value:n},r)=>{let c=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(i){this[c]=i}}});J.freezeMethods(Xt);function md(n,r){const c=this||ar,i=r||c,u=Xt.from(i.headers);let x=i.data;return J.forEach(n,function(N){x=N.call(c,x,u.normalize(),r?r.status:void 0)}),u.normalize(),x}function cp(n){return!!(n&&n.__CANCEL__)}function Pl(n,r,c){Me.call(this,n??"canceled",Me.ERR_CANCELED,r,c),this.name="CanceledError"}J.inherits(Pl,Me,{__CANCEL__:!0});function dp(n,r,c){const i=c.config.validateStatus;!c.status||!i||i(c.status)?n(c):r(new Me("Request failed with status code "+c.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function $v(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function Yv(n,r){n=n||10;const c=new Array(n),i=new Array(n);let u=0,x=0,h;return r=r!==void 0?r:1e3,function(v){const g=Date.now(),f=i[x];h||(h=g),c[u]=v,i[u]=g;let b=x,w=0;for(;b!==u;)w+=c[b++],b=b%n;if(u=(u+1)%n,u===x&&(x=(x+1)%n),g-h<r)return;const _=f&&g-f;return _?Math.round(w*1e3/_):void 0}}function Pv(n,r){let c=0,i=1e3/r,u,x;const h=(g,f=Date.now())=>{c=f,u=null,x&&(clearTimeout(x),x=null),n(...g)};return[(...g)=>{const f=Date.now(),b=f-c;b>=i?h(g,f):(u=g,x||(x=setTimeout(()=>{x=null,h(u)},i-b)))},()=>u&&h(u)]}const Mi=(n,r,c=3)=>{let i=0;const u=Yv(50,250);return Pv(x=>{const h=x.loaded,N=x.lengthComputable?x.total:void 0,v=h-i,g=u(v),f=h<=N;i=h;const b={loaded:h,total:N,progress:N?h/N:void 0,bytes:v,rate:g||void 0,estimated:g&&N&&f?(N-h)/g:void 0,event:x,lengthComputable:N!=null,[r?"download":"upload"]:!0};n(b)},c)},n0=(n,r)=>{const c=n!=null;return[i=>r[0]({lengthComputable:c,total:n,loaded:i}),r[1]]},r0=n=>(...r)=>J.asap(()=>n(...r)),Qv=zt.hasStandardBrowserEnv?((n,r)=>c=>(c=new URL(c,zt.origin),n.protocol===c.protocol&&n.host===c.host&&(r||n.port===c.port)))(new URL(zt.origin),zt.navigator&&/(msie|trident)/i.test(zt.navigator.userAgent)):()=>!0,Vv=zt.hasStandardBrowserEnv?{write(n,r,c,i,u,x,h){if(typeof document>"u")return;const N=[`${n}=${encodeURIComponent(r)}`];J.isNumber(c)&&N.push(`expires=${new Date(c).toUTCString()}`),J.isString(i)&&N.push(`path=${i}`),J.isString(u)&&N.push(`domain=${u}`),x===!0&&N.push("secure"),J.isString(h)&&N.push(`SameSite=${h}`),document.cookie=N.join("; ")},read(n){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Xv(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Zv(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function up(n,r,c){let i=!Xv(r);return n&&(i||c==!1)?Zv(n,r):r}const i0=n=>n instanceof Xt?{...n}:n;function Is(n,r){r=r||{};const c={};function i(g,f,b,w){return J.isPlainObject(g)&&J.isPlainObject(f)?J.merge.call({caseless:w},g,f):J.isPlainObject(f)?J.merge({},f):J.isArray(f)?f.slice():f}function u(g,f,b,w){if(J.isUndefined(f)){if(!J.isUndefined(g))return i(void 0,g,b,w)}else return i(g,f,b,w)}function x(g,f){if(!J.isUndefined(f))return i(void 0,f)}function h(g,f){if(J.isUndefined(f)){if(!J.isUndefined(g))return i(void 0,g)}else return i(void 0,f)}function N(g,f,b){if(b in r)return i(g,f);if(b in n)return i(void 0,g)}const v={url:x,method:x,data:x,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:N,headers:(g,f,b)=>u(i0(g),i0(f),b,!0)};return J.forEach(Object.keys({...n,...r}),function(f){const b=v[f]||u,w=b(n[f],r[f],f);J.isUndefined(w)&&b!==N||(c[f]=w)}),c}const mp=n=>{const r=Is({},n);let{data:c,withXSRFToken:i,xsrfHeaderName:u,xsrfCookieName:x,headers:h,auth:N}=r;if(r.headers=h=Xt.from(h),r.url=rp(up(r.baseURL,r.url,r.allowAbsoluteUrls),n.params,n.paramsSerializer),N&&h.set("Authorization","Basic "+btoa((N.username||"")+":"+(N.password?unescape(encodeURIComponent(N.password)):""))),J.isFormData(c)){if(zt.hasStandardBrowserEnv||zt.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(J.isFunction(c.getHeaders)){const v=c.getHeaders(),g=["content-type","content-length"];Object.entries(v).forEach(([f,b])=>{g.includes(f.toLowerCase())&&h.set(f,b)})}}if(zt.hasStandardBrowserEnv&&(i&&J.isFunction(i)&&(i=i(r)),i||i!==!1&&Qv(r.url))){const v=u&&x&&Vv.read(x);v&&h.set(u,v)}return r},Iv=typeof XMLHttpRequest<"u",Kv=Iv&&function(n){return new Promise(function(c,i){const u=mp(n);let x=u.data;const h=Xt.from(u.headers).normalize();let{responseType:N,onUploadProgress:v,onDownloadProgress:g}=u,f,b,w,_,k;function S(){_&&_(),k&&k(),u.cancelToken&&u.cancelToken.unsubscribe(f),u.signal&&u.signal.removeEventListener("abort",f)}let y=new XMLHttpRequest;y.open(u.method.toUpperCase(),u.url,!0),y.timeout=u.timeout;function E(){if(!y)return;const U=Xt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),R={data:!N||N==="text"||N==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:U,config:n,request:y};dp(function(P){c(P),S()},function(P){i(P),S()},R),y=null}"onloadend"in y?y.onloadend=E:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(E)},y.onabort=function(){y&&(i(new Me("Request aborted",Me.ECONNABORTED,n,y)),y=null)},y.onerror=function(D){const R=D&&D.message?D.message:"Network Error",H=new Me(R,Me.ERR_NETWORK,n,y);H.event=D||null,i(H),y=null},y.ontimeout=function(){let D=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const R=u.transitional||ip;u.timeoutErrorMessage&&(D=u.timeoutErrorMessage),i(new Me(D,R.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,n,y)),y=null},x===void 0&&h.setContentType(null),"setRequestHeader"in y&&J.forEach(h.toJSON(),function(D,R){y.setRequestHeader(R,D)}),J.isUndefined(u.withCredentials)||(y.withCredentials=!!u.withCredentials),N&&N!=="json"&&(y.responseType=u.responseType),g&&([w,k]=Mi(g,!0),y.addEventListener("progress",w)),v&&y.upload&&([b,_]=Mi(v),y.upload.addEventListener("progress",b),y.upload.addEventListener("loadend",_)),(u.cancelToken||u.signal)&&(f=U=>{y&&(i(!U||U.type?new Pl(null,n,y):U),y.abort(),y=null)},u.cancelToken&&u.cancelToken.subscribe(f),u.signal&&(u.signal.aborted?f():u.signal.addEventListener("abort",f)));const A=$v(u.url);if(A&&zt.protocols.indexOf(A)===-1){i(new Me("Unsupported protocol "+A+":",Me.ERR_BAD_REQUEST,n));return}y.send(x||null)})},Jv=(n,r)=>{const{length:c}=n=n?n.filter(Boolean):[];if(r||c){let i=new AbortController,u;const x=function(g){if(!u){u=!0,N();const f=g instanceof Error?g:this.reason;i.abort(f instanceof Me?f:new Pl(f instanceof Error?f.message:f))}};let h=r&&setTimeout(()=>{h=null,x(new Me(`timeout ${r} of ms exceeded`,Me.ETIMEDOUT))},r);const N=()=>{n&&(h&&clearTimeout(h),h=null,n.forEach(g=>{g.unsubscribe?g.unsubscribe(x):g.removeEventListener("abort",x)}),n=null)};n.forEach(g=>g.addEventListener("abort",x));const{signal:v}=i;return v.unsubscribe=()=>J.asap(N),v}},Wv=function*(n,r){let c=n.byteLength;if(c<r){yield n;return}let i=0,u;for(;i<c;)u=i+r,yield n.slice(i,u),i=u},ej=async function*(n,r){for await(const c of tj(n))yield*Wv(c,r)},tj=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:c,value:i}=await r.read();if(c)break;yield i}}finally{await r.cancel()}},o0=(n,r,c,i)=>{const u=ej(n,r);let x=0,h,N=v=>{h||(h=!0,i&&i(v))};return new ReadableStream({async pull(v){try{const{done:g,value:f}=await u.next();if(g){N(),v.close();return}let b=f.byteLength;if(c){let w=x+=b;c(w)}v.enqueue(new Uint8Array(f))}catch(g){throw N(g),g}},cancel(v){return N(v),u.return()}},{highWaterMark:2})},c0=64*1024,{isFunction:ji}=J,aj=(({Request:n,Response:r})=>({Request:n,Response:r}))(J.global),{ReadableStream:d0,TextEncoder:u0}=J.global,m0=(n,...r)=>{try{return!!n(...r)}catch{return!1}},sj=n=>{n=J.merge.call({skipUndefined:!0},aj,n);const{fetch:r,Request:c,Response:i}=n,u=r?ji(r):typeof fetch=="function",x=ji(c),h=ji(i);if(!u)return!1;const N=u&&ji(d0),v=u&&(typeof u0=="function"?(k=>S=>k.encode(S))(new u0):async k=>new Uint8Array(await new c(k).arrayBuffer())),g=x&&N&&m0(()=>{let k=!1;const S=new c(zt.origin,{body:new d0,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!S}),f=h&&N&&m0(()=>J.isReadableStream(new i("").body)),b={stream:f&&(k=>k.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!b[k]&&(b[k]=(S,y)=>{let E=S&&S[k];if(E)return E.call(S);throw new Me(`Response type '${k}' is not supported`,Me.ERR_NOT_SUPPORT,y)})});const w=async k=>{if(k==null)return 0;if(J.isBlob(k))return k.size;if(J.isSpecCompliantForm(k))return(await new c(zt.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(J.isArrayBufferView(k)||J.isArrayBuffer(k))return k.byteLength;if(J.isURLSearchParams(k)&&(k=k+""),J.isString(k))return(await v(k)).byteLength},_=async(k,S)=>{const y=J.toFiniteNumber(k.getContentLength());return y??w(S)};return async k=>{let{url:S,method:y,data:E,signal:A,cancelToken:U,timeout:D,onDownloadProgress:R,onUploadProgress:H,responseType:P,headers:L,withCredentials:re="same-origin",fetchOptions:G}=mp(k),I=r||fetch;P=P?(P+"").toLowerCase():"text";let T=Jv([A,U&&U.toAbortSignal()],D),ce=null;const oe=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let ye;try{if(H&&g&&y!=="get"&&y!=="head"&&(ye=await _(L,E))!==0){let p=new c(S,{method:"POST",body:E,duplex:"half"}),M;if(J.isFormData(E)&&(M=p.headers.get("content-type"))&&L.setContentType(M),p.body){const[ne,Y]=n0(ye,Mi(r0(H)));E=o0(p.body,c0,ne,Y)}}J.isString(re)||(re=re?"include":"omit");const z=x&&"credentials"in c.prototype,$={...G,signal:T,method:y.toUpperCase(),headers:L.normalize().toJSON(),body:E,duplex:"half",credentials:z?re:void 0};ce=x&&new c(S,$);let te=await(x?I(ce,G):I(S,$));const me=f&&(P==="stream"||P==="response");if(f&&(R||me&&oe)){const p={};["status","statusText","headers"].forEach(Z=>{p[Z]=te[Z]});const M=J.toFiniteNumber(te.headers.get("content-length")),[ne,Y]=R&&n0(M,Mi(r0(R),!0))||[];te=new i(o0(te.body,c0,ne,()=>{Y&&Y(),oe&&oe()}),p)}P=P||"text";let B=await b[J.findKey(b,P)||"text"](te,k);return!me&&oe&&oe(),await new Promise((p,M)=>{dp(p,M,{data:B,headers:Xt.from(te.headers),status:te.status,statusText:te.statusText,config:k,request:ce})})}catch(z){throw oe&&oe(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,k,ce),{cause:z.cause||z}):Me.from(z,z&&z.code,k,ce)}}},lj=new Map,hp=n=>{let r=n&&n.env||{};const{fetch:c,Request:i,Response:u}=r,x=[i,u,c];let h=x.length,N=h,v,g,f=lj;for(;N--;)v=x[N],g=f.get(v),g===void 0&&f.set(v,g=N?new Map:sj(r)),f=g;return g};hp();const Ud={http:jv,xhr:Kv,fetch:{get:hp}};J.forEach(Ud,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const h0=n=>`- ${n}`,nj=n=>J.isFunction(n)||n===null||n===!1;function rj(n,r){n=J.isArray(n)?n:[n];const{length:c}=n;let i,u;const x={};for(let h=0;h<c;h++){i=n[h];let N;if(u=i,!nj(i)&&(u=Ud[(N=String(i)).toLowerCase()],u===void 0))throw new Me(`Unknown adapter '${N}'`);if(u&&(J.isFunction(u)||(u=u.get(r))))break;x[N||"#"+h]=u}if(!u){const h=Object.entries(x).map(([v,g])=>`adapter ${v} `+(g===!1?"is not supported by the environment":"is not available in the build"));let N=c?h.length>1?`since :
`+h.map(h0).join(`
`):" "+h0(h[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+N,"ERR_NOT_SUPPORT")}return u}const xp={getAdapter:rj,adapters:Ud};function hd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Pl(null,n)}function x0(n){return hd(n),n.headers=Xt.from(n.headers),n.data=md.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),xp.getAdapter(n.adapter||ar.adapter,n)(n).then(function(i){return hd(n),i.data=md.call(n,n.transformResponse,i),i.headers=Xt.from(i.headers),i},function(i){return cp(i)||(hd(n),i&&i.response&&(i.response.data=md.call(n,n.transformResponse,i.response),i.response.headers=Xt.from(i.response.headers))),Promise.reject(i)})}const pp="1.13.2",Gi={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{Gi[n]=function(i){return typeof i===n||"a"+(r<1?"n ":" ")+n}});const p0={};Gi.transitional=function(r,c,i){function u(x,h){return"[Axios v"+pp+"] Transitional option '"+x+"'"+h+(i?". "+i:"")}return(x,h,N)=>{if(r===!1)throw new Me(u(h," has been removed"+(c?" in "+c:"")),Me.ERR_DEPRECATED);return c&&!p0[h]&&(p0[h]=!0,console.warn(u(h," has been deprecated since v"+c+" and will be removed in the near future"))),r?r(x,h,N):!0}};Gi.spelling=function(r){return(c,i)=>(console.warn(`${i} is likely a misspelling of ${r}`),!0)};function ij(n,r,c){if(typeof n!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let u=i.length;for(;u-- >0;){const x=i[u],h=r[x];if(h){const N=n[x],v=N===void 0||h(N,x,n);if(v!==!0)throw new Me("option "+x+" must be "+v,Me.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Me("Unknown option "+x,Me.ERR_BAD_OPTION)}}const Ti={assertOptions:ij,validators:Gi},Ta=Ti.validators;let Zs=class{constructor(r){this.defaults=r||{},this.interceptors={request:new s0,response:new s0}}async request(r,c){try{return await this._request(r,c)}catch(i){if(i instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const x=u.stack?u.stack.replace(/^.+\n/,""):"";try{i.stack?x&&!String(i.stack).endsWith(x.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+x):i.stack=x}catch{}}throw i}}_request(r,c){typeof r=="string"?(c=c||{},c.url=r):c=r||{},c=Is(this.defaults,c);const{transitional:i,paramsSerializer:u,headers:x}=c;i!==void 0&&Ti.assertOptions(i,{silentJSONParsing:Ta.transitional(Ta.boolean),forcedJSONParsing:Ta.transitional(Ta.boolean),clarifyTimeoutError:Ta.transitional(Ta.boolean)},!1),u!=null&&(J.isFunction(u)?c.paramsSerializer={serialize:u}:Ti.assertOptions(u,{encode:Ta.function,serialize:Ta.function},!0)),c.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?c.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:c.allowAbsoluteUrls=!0),Ti.assertOptions(c,{baseUrl:Ta.spelling("baseURL"),withXsrfToken:Ta.spelling("withXSRFToken")},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let h=x&&J.merge(x.common,x[c.method]);x&&J.forEach(["delete","get","head","post","put","patch","common"],k=>{delete x[k]}),c.headers=Xt.concat(h,x);const N=[];let v=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(c)===!1||(v=v&&S.synchronous,N.unshift(S.fulfilled,S.rejected))});const g=[];this.interceptors.response.forEach(function(S){g.push(S.fulfilled,S.rejected)});let f,b=0,w;if(!v){const k=[x0.bind(this),void 0];for(k.unshift(...N),k.push(...g),w=k.length,f=Promise.resolve(c);b<w;)f=f.then(k[b++],k[b++]);return f}w=N.length;let _=c;for(;b<w;){const k=N[b++],S=N[b++];try{_=k(_)}catch(y){S.call(this,y);break}}try{f=x0.call(this,_)}catch(k){return Promise.reject(k)}for(b=0,w=g.length;b<w;)f=f.then(g[b++],g[b++]);return f}getUri(r){r=Is(this.defaults,r);const c=up(r.baseURL,r.url,r.allowAbsoluteUrls);return rp(c,r.params,r.paramsSerializer)}};J.forEach(["delete","get","head","options"],function(r){Zs.prototype[r]=function(c,i){return this.request(Is(i||{},{method:r,url:c,data:(i||{}).data}))}});J.forEach(["post","put","patch"],function(r){function c(i){return function(x,h,N){return this.request(Is(N||{},{method:r,headers:i?{"Content-Type":"multipart/form-data"}:{},url:x,data:h}))}}Zs.prototype[r]=c(),Zs.prototype[r+"Form"]=c(!0)});let oj=class fp{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(x){c=x});const i=this;this.promise.then(u=>{if(!i._listeners)return;let x=i._listeners.length;for(;x-- >0;)i._listeners[x](u);i._listeners=null}),this.promise.then=u=>{let x;const h=new Promise(N=>{i.subscribe(N),x=N}).then(u);return h.cancel=function(){i.unsubscribe(x)},h},r(function(x,h,N){i.reason||(i.reason=new Pl(x,h,N),c(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const c=this._listeners.indexOf(r);c!==-1&&this._listeners.splice(c,1)}toAbortSignal(){const r=new AbortController,c=i=>{r.abort(i)};return this.subscribe(c),r.signal.unsubscribe=()=>this.unsubscribe(c),r.signal}static source(){let r;return{token:new fp(function(u){r=u}),cancel:r}}};function cj(n){return function(c){return n.apply(null,c)}}function dj(n){return J.isObject(n)&&n.isAxiosError===!0}const kd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(kd).forEach(([n,r])=>{kd[r]=n});function gp(n){const r=new Zs(n),c=X0(Zs.prototype.request,r);return J.extend(c,Zs.prototype,r,{allOwnKeys:!0}),J.extend(c,r,null,{allOwnKeys:!0}),c.create=function(u){return gp(Is(n,u))},c}const ct=gp(ar);ct.Axios=Zs;ct.CanceledError=Pl;ct.CancelToken=oj;ct.isCancel=cp;ct.VERSION=pp;ct.toFormData=Hi;ct.AxiosError=Me;ct.Cancel=ct.CanceledError;ct.all=function(r){return Promise.all(r)};ct.spread=cj;ct.isAxiosError=dj;ct.mergeConfig=Is;ct.AxiosHeaders=Xt;ct.formToJSON=n=>op(J.isHTMLForm(n)?new FormData(n):n);ct.getAdapter=xp.getAdapter;ct.HttpStatusCode=kd;ct.default=ct;const{Axios:qN,AxiosError:BN,CanceledError:HN,isCancel:GN,CancelToken:FN,VERSION:$N,all:YN,Cancel:PN,isAxiosError:QN,spread:VN,toFormData:XN,AxiosHeaders:ZN,HttpStatusCode:IN,formToJSON:KN,getAdapter:JN,mergeConfig:WN}=ct,uj="http://localhost:8000/api/v1",Q=ct.create({baseURL:uj,headers:{"Content-Type":"application/json"}});Q.interceptors.request.use(n=>{const r=localStorage.getItem("access_token");return r&&(n.headers.Authorization=`Bearer ${r}`),n},n=>Promise.reject(n));Q.interceptors.response.use(n=>n,async n=>{const r=n.config;if(n.response?.status===401&&!r._retry&&!r.url?.includes("/auth/login")){r._retry=!0;try{const c=localStorage.getItem("refresh_token");if(c){const i=await ct.post("/api/v1/auth/refresh",{refresh_token:c}),{access_token:u}=i.data;return localStorage.setItem("access_token",u),r.headers.Authorization=`Bearer ${u}`,Q(r)}}catch(c){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.pathname.includes("/login")||(window.location.href="/login?expired=true"),Promise.reject(c)}return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.pathname.includes("/login")||(window.location.href="/login?expired=true"),Promise.reject(n)}return Promise.reject(n)});const bp={login:(n,r)=>{const c=new URLSearchParams;return c.append("username",n),c.append("password",r),Q.post("/auth/login",c,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},logout:()=>Q.post("/auth/logout"),refreshToken:n=>Q.post("/auth/refresh",{refresh_token:n}),me:()=>Q.get("/auth/me")},Qn={list:n=>Q.get("/users",{params:n}),get:n=>Q.get(`/users/${n}`),create:n=>Q.post("/users",n),update:(n,r)=>Q.put(`/users/${n}`,r),delete:n=>Q.delete(`/users/${n}`)},Et={list:n=>Q.get("/warehouses",{params:n}),get:n=>Q.get(`/warehouses/${n}`),create:n=>Q.post("/warehouses",n),update:(n,r)=>Q.put(`/warehouses/${n}`,r),delete:n=>Q.delete(`/warehouses/${n}`),getShops:n=>Q.get(`/warehouses/${n}/shops`),getStock:(n,r)=>Q.get(`/warehouses/${n}/stock`,{params:r})},At={list:n=>Q.get("/shops",{params:n}),get:n=>Q.get(`/shops/${n}`),create:n=>Q.post("/shops",n),update:(n,r)=>Q.put(`/shops/${n}`,r),delete:n=>Q.delete(`/shops/${n}`),getStock:(n,r)=>Q.get(`/shops/${n}/stock`,{params:r})},jt={list:n=>Q.get("/medicines",{params:n}),get:n=>Q.get(`/medicines/${n}`),create:n=>Q.post("/medicines",n),update:(n,r)=>Q.put(`/medicines/${n}`,r),delete:n=>Q.delete(`/medicines/${n}`),getBatches:n=>Q.get(`/medicines/${n}/batches`),createBatch:(n,r)=>Q.post(`/medicines/${n}/batches`,r)},Bl={getMovements:n=>Q.get("/stock/movements",{params:n}),stockEntry:n=>Q.post("/stock/entry",n),adjustStock:n=>Q.post("/stock/adjust",n),getAlerts:n=>Q.get("/stock/alerts",{params:{alert_type:n}})},Vs={list:n=>Q.get("/purchase-requests",{params:n}),get:n=>Q.get(`/purchase-requests/${n}`),create:n=>Q.post("/purchase-requests",n),approve:(n,r)=>Q.put(`/purchase-requests/${n}/approve`,r),reject:n=>Q.put(`/purchase-requests/${n}/reject`)},Ks={list:n=>Q.get("/dispatches",{params:n}),get:n=>Q.get(`/dispatches/${n}`),create:n=>Q.post("/dispatches",n),updateStatus:(n,r)=>Q.put(`/dispatches/${n}/status`,{status:r})},Xs={list:n=>Q.get("/invoices",{params:n}),get:n=>Q.get(`/invoices/${n}`),create:n=>Q.post("/invoices",n),getItems:n=>Q.get(`/invoices/${n}/items`),getReturns:n=>Q.get("/invoices/returns",{params:n}),processReturn:(n,r)=>Q.post(`/invoices/${n}/returns`,r)},Ul={list:n=>Q.get("/customers",{params:n}),get:n=>Q.get(`/customers/${n}`),create:n=>Q.post("/customers",n),update:(n,r)=>Q.put(`/customers/${n}`,r),getFollowups:n=>Q.get(`/customers/${n}/followups`),createFollowup:(n,r)=>Q.post(`/customers/${n}/followups`,r)},fa={list:n=>Q.get("/employees",{params:n}),get:n=>Q.get(`/employees/${n}`),create:n=>Q.post("/employees",n),update:(n,r)=>Q.put(`/employees/${n}`,r),delete:n=>Q.delete(`/employees/${n}`),markAttendance:n=>Q.post("/employees/attendance",n),getDailyAttendance:n=>Q.get("/employees/attendance/daily",{params:{date:n}}),getAttendance:(n,r)=>Q.get(`/employees/attendance/${n}`,{params:r}),submitAttendance:n=>Q.post("/employees/attendance/submit",n),lockAttendance:n=>Q.post("/employees/attendance/lock",n),unlockAttendance:n=>Q.post("/employees/attendance/unlock",n),getSalaryRecords:n=>Q.get("/employees/salary",{params:n}),processSalary:n=>Q.post("/employees/salary/process",n)},Xn={getSales:n=>Q.get("/reports/sales",{params:n}),getDailySales:n=>Q.get("/reports/sales/daily",{params:n}),getMonthlySales:n=>Q.get("/reports/sales/monthly",{params:n}),getInventory:n=>Q.get("/reports/inventory",{params:n}),getProfitLoss:n=>Q.get("/reports/profit-loss",{params:n}),getExpiry:n=>Q.get("/reports/expiry",{params:n})},Ni={list:n=>Q.get("/notifications",{params:n}),markRead:n=>Q.put(`/notifications/${n}/read`),markAllRead:()=>Q.put("/notifications/read-all"),delete:n=>Q.delete(`/notifications/${n}`)},zi={get:()=>Q.get("/settings"),update:n=>Q.put("/settings",n),getTax:()=>Q.get("/settings/tax"),updateTax:n=>Q.put("/settings/tax",n),getTaxSummary:n=>Q.get("/settings/tax/summary",{params:n}),getGstReport:n=>Q.get("/settings/tax/gst",{params:n})},Vn={list:n=>Q.get("/roles",{params:n}),listAssignable:()=>Q.get("/roles/assignable"),get:n=>Q.get(`/roles/${n}`),create:n=>Q.post("/roles",n),update:(n,r)=>Q.put(`/roles/${n}`,r),delete:n=>Q.delete(`/roles/${n}`),addPermission:(n,r)=>Q.post(`/roles/${n}/permissions/${r}`),removePermission:(n,r)=>Q.delete(`/roles/${n}/permissions/${r}`),assignToUser:(n,r)=>Q.post(`/roles/${n}/users/${r}`),removeFromUser:(n,r)=>Q.delete(`/roles/${n}/users/${r}`)},mj={list:n=>Q.get("/permissions",{params:n}),getModules:()=>Q.get("/permissions/modules"),getMy:()=>Q.get("/permissions/my"),get:n=>Q.get(`/permissions/${n}`),create:n=>Q.post("/permissions",n),delete:n=>Q.delete(`/permissions/${n}`)},f0={getSummary:n=>Q.get("/tax/summary",{params:n}),getGstReport:n=>Q.get("/tax/gst",{params:n}),getVatReport:n=>Q.get("/tax/vat",{params:n}),getPeriodReport:(n,r,c)=>Q.get(`/tax/period/${n}/${r}`,{params:{shop_id:c}}),getSettings:()=>Q.get("/tax/settings"),updateSettings:n=>Q.put("/tax/settings",n)},Di={list:n=>Q.get("/racks",{params:n}),get:n=>Q.get(`/racks/${n}`),create:n=>Q.post("/racks",n),update:(n,r)=>Q.put(`/racks/${n}`,r),delete:n=>Q.delete(`/racks/${n}`)},g0={list:n=>Q.get("/audit-logs",{params:n}),getStats:()=>Q.get("/audit-logs/stats")},b0={list:n=>Q.get("/login-activity",{params:n}),getStats:()=>Q.get("/login-activity/stats")},Oe={listCategories:n=>Q.get("/masters/categories",{params:n}),createCategory:n=>Q.post("/masters/categories",n),updateCategory:(n,r)=>Q.put(`/masters/categories/${n}`,r),deleteCategory:n=>Q.delete(`/masters/categories/${n}`),listUnits:n=>Q.get("/masters/units",{params:n}),createUnit:n=>Q.post("/masters/units",n),updateUnit:(n,r)=>Q.put(`/masters/units/${n}`,r),deleteUnit:n=>Q.delete(`/masters/units/${n}`),listHSN:n=>Q.get("/masters/hsn",{params:n}),createHSN:n=>Q.post("/masters/hsn",n),updateHSN:(n,r)=>Q.put(`/masters/hsn/${n}`,r),deleteHSN:n=>Q.delete(`/masters/hsn/${n}`),listGSTSlabs:n=>Q.get("/masters/gst-slabs",{params:n}),createGSTSlab:n=>Q.post("/masters/gst-slabs",n),updateGSTSlab:(n,r)=>Q.put(`/masters/gst-slabs/${n}`,r),deleteGSTSlab:n=>Q.delete(`/masters/gst-slabs/${n}`),listSuppliers:n=>Q.get("/masters/suppliers",{params:n}),createSupplier:n=>Q.post("/masters/suppliers",n),updateSupplier:(n,r)=>Q.put(`/masters/suppliers/${n}`,r),deleteSupplier:n=>Q.delete(`/masters/suppliers/${n}`),listAdjustmentReasons:n=>Q.get("/masters/adjustment-reasons",{params:n}),createAdjustmentReason:n=>Q.post("/masters/adjustment-reasons",n),updateAdjustmentReason:(n,r)=>Q.put(`/masters/adjustment-reasons/${n}`,r),deleteAdjustmentReason:n=>Q.delete(`/masters/adjustment-reasons/${n}`),listPaymentMethods:n=>Q.get("/masters/payment-methods",{params:n}),createPaymentMethod:n=>Q.post("/masters/payment-methods",n),updatePaymentMethod:(n,r)=>Q.put(`/masters/payment-methods/${n}`,r),deletePaymentMethod:n=>Q.delete(`/masters/payment-methods/${n}`),listMedicineTypes:n=>Q.get("/masters/medicine-types",{params:n}),createMedicineType:n=>Q.post("/masters/medicine-types",n),updateMedicineType:(n,r)=>Q.put(`/masters/medicine-types/${n}`,r),deleteMedicineType:n=>Q.delete(`/masters/medicine-types/${n}`),listBrands:n=>Q.get("/masters/brands",{params:n}),createBrand:n=>Q.post("/masters/brands",n),updateBrand:(n,r)=>Q.put(`/masters/brands/${n}`,r),deleteBrand:n=>Q.delete(`/masters/brands/${n}`),listManufacturers:n=>Q.get("/masters/manufacturers",{params:n}),createManufacturer:n=>Q.post("/masters/manufacturers",n),updateManufacturer:(n,r)=>Q.put(`/masters/manufacturers/${n}`,r),deleteManufacturer:n=>Q.delete(`/masters/manufacturers/${n}`)},yp=m.createContext(void 0);function hj({children:n}){const[r,c]=m.useState(null),[i,u]=m.useState(!0),x=async()=>{if(!localStorage.getItem("access_token")){c(null),u(!1);return}try{const v=await bp.me(),g={...v.data,permissions:v.data.permissions||[]};c(g)}catch(v){console.error("Failed to fetch user:",v),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),c(null)}finally{u(!1)}};m.useEffect(()=>{x()},[]);const h=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),c(null)};return e.jsx(yp.Provider,{value:{user:r,setUser:c,loading:i,logout:h,refreshUser:x},children:n})}function Ke(){const n=m.useContext(yp);if(n===void 0)throw new Error("useUser must be used within a UserProvider");return n}function xj(n,r){return n.includes(r)}function pj(n,r){return r.some(c=>n.includes(c))}function fj(n,r){return r.every(c=>n.includes(c))}function gj(n,r){return n.some(c=>c.startsWith(`${r}.`))}function bj(n,r){for(const c of n)if(c.startsWith(r)){const i=c.split(".");if(i.length>=3)return i[2]}return null}const y0={ROLES_VIEW:"roles.view",ROLES_MANAGE:"roles.manage"},vp=m.createContext(void 0);function yj({children:n}){const{user:r}=Ke(),c=r?.permissions??[],i=r?.role==="super_admin",u={permissions:c,hasPermission:x=>i?!0:xj(c,x),hasAnyPermission:x=>i?!0:pj(c,x),hasAllPermissions:x=>i?!0:fj(c,x),hasModuleAccess:x=>i?!0:gj(c,x),getScopeForPermission:x=>i?"global":bj(c,x)};return e.jsx(vp.Provider,{value:u,children:n})}function It(){const n=m.useContext(vp);if(n===void 0)throw new Error("usePermissions must be used within a PermissionProvider");return n}const jp=m.createContext(null);function vj({children:n}){const[r,c]=m.useState(null),[i,u]=m.useState(!0),[x,h]=m.useState(null),N=m.useCallback(async()=>{const k=localStorage.getItem("access_token");if(console.log("[MasterData] Loading masters, token exists:",!!k),!k){console.warn("[MasterData] No access token, skipping load"),u(!1);return}try{u(!0),h(null),console.log("[MasterData] Fetching /unified-masters/all...");const S=await Q.get("/unified-masters/all");console.log("[MasterData] API Response:",{status:S.status,hasData:!!S.data,keys:S.data?Object.keys(S.data):[],categoriesCount:S.data?.categories?.length||0,unitsCount:S.data?.units?.length||0,gstSlabsCount:S.data?.gst_slabs?.length||0}),S.data&&S.data.categories&&S.data.categories.length>0?(console.log("[MasterData] Using API data"),c(S.data)):(console.warn("[MasterData] API returned empty, using fallback"),c(v()))}catch(S){console.error("[MasterData] Failed to load:",S.response?.status,S.message),c(v())}finally{u(!1)}},[]),v=()=>({categories:[{id:"cat-1",name:"Antibiotics",is_active:!0},{id:"cat-2",name:"Painkillers",is_active:!0},{id:"cat-3",name:"Supplements",is_active:!0},{id:"cat-4",name:"General",is_active:!0}],units:[{id:"unit-1",name:"Strip",short_name:"stp",is_active:!0},{id:"unit-2",name:"Bottle",short_name:"btl",is_active:!0},{id:"unit-3",name:"Box",short_name:"box",is_active:!0},{id:"unit-4",name:"Vial",short_name:"vl",is_active:!0}],hsn_codes:[{id:"hsn-1",hsn_code:"3004",description:"Medicaments",gst_rate:12,cgst_rate:6,sgst_rate:6,igst_rate:12,is_active:!0},{id:"hsn-2",hsn_code:"3003",description:"Medicaments",gst_rate:5,cgst_rate:2.5,sgst_rate:2.5,igst_rate:5,is_active:!0}],medicine_types:[{id:"type-1",code:"tablet",name:"Tablet",is_active:!0,sort_order:1},{id:"type-2",code:"capsule",name:"Capsule",is_active:!0,sort_order:2},{id:"type-3",code:"syrup",name:"Syrup",is_active:!0,sort_order:3},{id:"type-4",code:"injection",name:"Injection",is_active:!0,sort_order:4}],gst_slabs:[{id:"gst-0",rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0,is_active:!0},{id:"gst-5",rate:5,cgst_rate:2.5,sgst_rate:2.5,igst_rate:5,is_active:!0},{id:"gst-12",rate:12,cgst_rate:6,sgst_rate:6,igst_rate:12,is_active:!0},{id:"gst-18",rate:18,cgst_rate:9,sgst_rate:9,igst_rate:18,is_active:!0},{id:"gst-28",rate:28,cgst_rate:14,sgst_rate:14,igst_rate:28,is_active:!0}],brands:[{id:"br-1",code:"GSK",name:"GSK",is_active:!0},{id:"br-2",code:"CIPLA",name:"Cipla",is_active:!0},{id:"br-3",code:"SUN",name:"Sun Pharma",is_active:!0}],manufacturers:[{id:"mfr-1",code:"GSK",name:"GlaxoSmithKline",is_active:!0},{id:"mfr-2",code:"CIPLA",name:"Cipla Ltd",is_active:!0},{id:"mfr-3",code:"SUN",name:"Sun Pharmaceutical Industries",is_active:!0}],genders:[{id:"gen-1",code:"male",name:"Male",is_active:!0},{id:"gen-2",code:"female",name:"Female",is_active:!0},{id:"gen-3",code:"other",name:"Other",is_active:!0}],employment_types:[{id:"emp-1",code:"full_time",name:"Full Time",is_active:!0},{id:"emp-2",code:"part_time",name:"Part Time",is_active:!0},{id:"emp-3",code:"contract",name:"Contract",is_active:!0},{id:"emp-4",code:"intern",name:"Intern",is_active:!0}],departments:[{id:"dept-1",code:"pharmacy",name:"Pharmacy",is_active:!0},{id:"dept-2",code:"warehouse",name:"Warehouse",is_active:!0},{id:"dept-3",code:"admin",name:"Administration",is_active:!0},{id:"dept-4",code:"hr",name:"Human Resources",is_active:!0},{id:"dept-5",code:"accounts",name:"Accounts",is_active:!0}],designations:[{id:"des-1",code:"pharmacist",name:"Pharmacist",is_active:!0,level:3},{id:"des-2",code:"cashier",name:"Cashier",is_active:!0,level:2},{id:"des-3",code:"manager",name:"Manager",is_active:!0,level:4},{id:"des-4",code:"assistant",name:"Assistant",is_active:!0,level:1},{id:"des-5",code:"supervisor",name:"Supervisor",is_active:!0,level:3}],urgency_levels:[{id:"urg-1",code:"low",name:"Low",is_active:!0,color:"green"},{id:"urg-2",code:"medium",name:"Medium",is_active:!0,color:"yellow"},{id:"urg-3",code:"high",name:"High",is_active:!0,color:"orange"},{id:"urg-4",code:"critical",name:"Critical",is_active:!0,color:"red"}],payment_methods:[{id:"pm-1",code:"cash",name:"Cash",is_active:!0,icon:""},{id:"pm-2",code:"card",name:"Card",is_active:!0,icon:""},{id:"pm-3",code:"upi",name:"UPI",is_active:!0,icon:""},{id:"pm-4",code:"credit",name:"Credit",is_active:!0,icon:""}],shop_types:[{id:"st-1",code:"retail",name:"Retail Pharmacy",is_active:!0},{id:"st-2",code:"hospital",name:"Hospital Pharmacy",is_active:!0}],customer_types:[{id:"ct-1",code:"regular",name:"Regular",is_active:!0,discount_percent:0,credit_limit:0},{id:"ct-2",code:"vip",name:"VIP",is_active:!0,discount_percent:10,credit_limit:5e4}],suppliers:[],statuses:[],roles:[],warehouses:[],shops:[],racks:[],adjustment_reasons:[]});m.useEffect(()=>{N();const k=S=>{S.key==="access_token"&&S.newValue&&N()};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[N]);const g=m.useCallback(k=>r?r[k]||[]:[],[r]),f=m.useCallback(k=>r?r.statuses.filter(S=>S.entity_type===k):[],[r]),b=m.useCallback((k,S)=>g(k).find(E=>E.code===S),[g]),w=m.useCallback((k,S)=>g(k).find(E=>E.id===S),[g]),_={masters:r,isLoading:i,error:x,refresh:N,getMaster:g,getStatusesByEntity:f,findByCode:b,findById:w};return e.jsx(jp.Provider,{value:_,children:n})}function dt(){const n=m.useContext(jp);if(!n)throw new Error("useMasterData must be used within a MasterDataProvider");return n}const Np=m.createContext(void 0);function jj({children:n}){const{user:r}=Ke(),[c,i]=m.useState("global"),[u,x]=m.useState(null),[h,N]=m.useState([]),[v,g]=m.useState([]),[f,b]=m.useState(!0);m.useEffect(()=>{if(!r){b(!1);return}(async()=>{try{b(!0);let k=[],S=[];if(r.role==="super_admin"){const[A,U]=await Promise.all([Et.list({size:500}),At.list({size:500})]);k=A.data?.items||[],S=U.data?.items||[]}else r.warehouse_id?k=[(await Et.get(r.warehouse_id)).data]:r.shop_id&&(S=[(await At.get(r.shop_id)).data]);const y=k.map(A=>({id:A.id,type:"warehouse",name:A.name})),E=S.map(A=>({id:A.id,type:"shop",name:A.name}));N(y),g(E),r.role==="super_admin"?(i("global"),x(null)):r.warehouse_id?(i("warehouse"),x(y.find(A=>A.id===r.warehouse_id)||null)):r.shop_id?(i("shop"),x(E.find(A=>A.id===r.shop_id)||null)):(i("global"),x(null))}catch(k){console.error("Failed to initialize operational context",k)}finally{b(!1)}})()},[r]);const w=(_,k)=>{if(r?.role!=="super_admin"){console.warn("Attempted context switch by non-super-admin blocked.");return}i(_),x(k||null)};return e.jsx(Np.Provider,{value:{scope:c,activeEntity:u,switchContext:w,availableWarehouses:h,availableShops:v,loading:f},children:n})}function Da(){const n=m.useContext(Np);if(n===void 0)throw new Error("useOperationalContext must be used within an OperationalProvider");return n}let wi=0;const Sd=new Set;let Ut=[];const $n=n=>{Sd.forEach(r=>r(n))},Ve={success:n=>{const r={id:`toast-${wi++}`,message:n,type:"success"};Ut=[...Ut,r],$n(Ut),setTimeout(()=>Ve.dismiss(r.id),5e3)},error:n=>{const r={id:`toast-${wi++}`,message:n,type:"error"};Ut=[...Ut,r],$n(Ut),setTimeout(()=>Ve.dismiss(r.id),5e3)},warning:n=>{const r={id:`toast-${wi++}`,message:n,type:"warning"};Ut=[...Ut,r],$n(Ut),setTimeout(()=>Ve.dismiss(r.id),5e3)},info:n=>{const r={id:`toast-${wi++}`,message:n,type:"info"};Ut=[...Ut,r],$n(Ut),setTimeout(()=>Ve.dismiss(r.id),5e3)},dismiss:n=>{Ut=Ut.filter(r=>r.id!==n),$n(Ut)}};function Nj(){const[n,r]=m.useState([]);return m.useEffect(()=>{const c=i=>r(i);return Sd.add(c),()=>{Sd.delete(c)}},[]),n}function wj(){const n=Nj(),r=i=>{switch(i){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";case"info":return"info"}},c=i=>{switch(i){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}};return e.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 max-w-md",children:n.map((i,u)=>e.jsxs("div",{className:`flex items-start gap-3 px-4 py-3 rounded-lg border shadow-lg backdrop-blur-sm animate-slideInRight ${c(i.type)}`,style:{animationDelay:`${u*50}ms`},children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:r(i.type)}),e.jsx("p",{className:"flex-1 text-sm font-medium",children:i.message}),e.jsx("button",{onClick:()=>window.toast?.dismiss(i.id),className:"text-current opacity-60 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]},i.id))})}typeof window<"u"&&(window.toast=Ve);const ki=[{path:"/",label:"Dashboard",icon:"dashboard",permissions:["dashboard.view"]},{path:"/warehouses",label:"Warehouses",icon:"warehouse",permissions:["warehouses.view","warehouses.create"],children:[{path:"/warehouses",label:"View All Warehouses",icon:"list",permissions:["warehouses.view"]},{path:"/warehouses/add",label:"Add Warehouse",icon:"add_circle",permissions:["warehouses.create"]}]},{path:"/shops",label:"Medical Shops",icon:"storefront",permissions:["shops.view","shops.create"],children:[{path:"/shops",label:"View All Shops",icon:"list",permissions:["shops.view"]},{path:"/shops/add",label:"Add Shop",icon:"add_circle",permissions:["shops.create"]}]},{path:"/users-access",label:"Users & Access",icon:"manage_accounts",permissions:["users.view","users.view.warehouse","roles.view","login_activity.view"],excludeFromWarehouseAdmin:!0,children:[{path:"/users",label:"Users",icon:"people",permissions:["users.view","users.view.warehouse"]},{path:"/roles",label:"Roles & Permissions",icon:"admin_panel_settings",permissions:["roles.view","roles.manage"]},{path:"/login-activity",label:"Login Activity",icon:"history",permissions:["login_activity.view"]}]},{path:"/master-data",label:"Master Data",icon:"dataset",permissions:["gst.manage","hsn.manage","categories.manage","units.manage","suppliers.manage","brands.manage","manufacturers.manage","medicine_types.manage","adjustment_reasons.manage","payment_methods.manage","racks.manage","gst.view","hsn.view","categories.view","units.view","suppliers.view","brands.view","manufacturers.view","medicine_types.view","adjustment_reasons.view","payment_methods.view","racks.view"],children:[{path:"/gst-slabs",label:"GST / VAT Slabs",icon:"percent",permissions:["gst.manage","gst.view"]},{path:"/hsn",label:"HSN Codes",icon:"tag",permissions:["hsn.manage","hsn.view"],divider:!0},{path:"/categories",label:"Medicine Categories",icon:"category",permissions:["categories.manage","categories.view"],divider:!0},{path:"/medicine-types",label:"Medicine Types",icon:"medication",permissions:["medicine_types.manage","medicine_types.view"]},{path:"/brands",label:"Brands",icon:"label",permissions:["brands.manage","brands.view"]},{path:"/manufacturers",label:"Manufacturers",icon:"factory",permissions:["manufacturers.manage","manufacturers.view"]},{path:"/units",label:"Units / Packaging",icon:"straighten",permissions:["units.manage","units.view"]},{path:"/racks",label:"Rack Master",icon:"shelves",permissions:["racks.manage","racks.manage.warehouse","racks.view","racks.view.warehouse"],divider:!0},{path:"/adjustment-reasons",label:"Adjustment Reasons",icon:"edit_note",permissions:["adjustment_reasons.manage","adjustment_reasons.view"]},{path:"/suppliers",label:"Suppliers",icon:"local_shipping",permissions:["suppliers.manage","suppliers.view"],divider:!0},{path:"/payment-methods",label:"Payment Methods",icon:"payments",permissions:["payment_methods.manage","payment_methods.view"]}]},{path:"/medicines",label:"Medicine Master",icon:"medication",permissions:["medicines.view","medicines.create"],children:[{path:"/medicines",label:"View Medicines",icon:"list",permissions:["medicines.view"]},{path:"/medicines/add",label:"Add Medicine",icon:"add_circle",permissions:["medicines.create"]}]},{path:"/inventory-oversight",label:"Inventory Oversight",icon:"inventory_2",permissions:["inventory.view.global"],children:[{path:"/inventory-oversight",label:"Overview",icon:"analytics",permissions:["inventory.view.global"]},{path:"/inventory-oversight/expiry",label:"Expiry Monitoring",icon:"event_busy",permissions:["inventory.view.global"]},{path:"/inventory-oversight/dead-stock",label:"Dead Stock",icon:"warning",permissions:["inventory.view.global"]}]},{path:"/reports",label:"Reports",icon:"assessment",permissions:["reports.view.global","reports.view.warehouse","reports.view.shop"],children:[{path:"/reports/sales",label:"Sales Reports",icon:"bar_chart",permissions:["reports.view.global","reports.view.shop"]},{path:"/reports/inventory",label:"Inventory Reports",icon:"inventory",permissions:["reports.view.global","reports.view.warehouse"]},{path:"/reports/tax",label:"Tax Reports",icon:"receipt",permissions:["reports.view.global","reports.view.shop"]},{path:"/reports/expiry",label:"Expiry Reports",icon:"event_busy",permissions:["reports.view.global","reports.view.warehouse","reports.view.shop"]}]},{path:"/system",label:"System",icon:"settings",permissions:["audit.view","settings.manage"],children:[{path:"/audit-logs",label:"Audit Logs",icon:"history",permissions:["audit.view"]},{path:"/system/settings",label:"System Settings",icon:"tune",permissions:["settings.manage"]}]}],v0=[{path:"/shops/stock",label:"Stock Entry",icon:"add_box",permissions:["inventory.entry.warehouse","stock.entry.warehouse"],excludeFromSuperAdmin:!0},{path:"/inventory",label:"Inventory",icon:"inventory_2",permissions:["inventory.view.warehouse","inventory.view.shop"],excludeFromSuperAdmin:!0},{path:"/inventory/adjust",label:"Stock Adjustment",icon:"tune",permissions:["inventory.adjust.warehouse","stock.adjust.warehouse"],excludeFromSuperAdmin:!0},{path:"/dispatches",label:"Dispatches",icon:"local_shipping",permissions:["dispatches.view.warehouse","dispatches.view.shop","dispatches.manage.warehouse"],excludeFromSuperAdmin:!0},{path:"/purchase-requests",label:"Purchase Requests",icon:"shopping_cart",permissions:["purchase_requests.view.warehouse","purchase_requests.view.shop","purchase_requests.create.shop","purchase_requests.approve"],excludeFromSuperAdmin:!0},{path:"/employees",label:"Employees",icon:"badge",permissions:["employees.view.warehouse","employees.view.shop","employees.create.warehouse","employees.view"],excludeFromSuperAdmin:!0},{path:"/employees/attendance",label:"Attendance",icon:"event_available",permissions:["attendance.manage.warehouse","attendance.manage.shop","attendance.view.warehouse"],excludeFromSuperAdmin:!0,children:[{path:"/employees/attendance",label:"Attendance Marker",icon:"edit_calendar",permissions:["attendance.manage.warehouse","attendance.manage.shop"]},{path:"/employees/attendance/report",label:"Attendance Report",icon:"summarize",permissions:["attendance.view.warehouse","attendance.manage.warehouse"]}]},{path:"/employees/salary",label:"Salary",icon:"payments",permissions:["salary.manage.warehouse","salary.manage.shop","payroll.view.warehouse","payroll.process.warehouse"],excludeFromSuperAdmin:!0},{path:"/sales/pos",label:"POS Billing",icon:"point_of_sale",permissions:["billing.create.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/sales/invoices",label:"Invoices",icon:"receipt_long",permissions:["billing.view.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/sales/returns",label:"Returns & Refunds",icon:"assignment_return",permissions:["returns.view.shop","returns.create.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0},{path:"/customers",label:"Customers",icon:"people",permissions:["customers.view.shop"],excludeFromSuperAdmin:!0,excludeFromWarehouseAdmin:!0}];function kj(){const n=ba(),{user:r}=Ke(),{hasAnyPermission:c}=It(),[i,u]=m.useState(!1),[x,h]=m.useState([]),N=r?.role||"user",v=N==="super_admin",g=S=>N==="warehouse_admin"&&"excludeFromWarehouseAdmin"in S&&S.excludeFromWarehouseAdmin?!1:v?!0:S.permissions&&S.permissions.length>0?c(S.permissions):!0;m.useEffect(()=>{(v?ki:[...ki,...v0]).forEach(y=>{y.children&&y.children.some(A=>n.pathname===A.path||n.pathname.startsWith(A.path+"/"))&&!x.includes(y.path)&&h(A=>[...A,y.path])})},[n.pathname,v]),m.useEffect(()=>{const S=localStorage.getItem("sidebarCollapsed");S&&u(S==="true")},[]);const f=()=>{const S=!i;u(S),localStorage.setItem("sidebarCollapsed",String(S))},b=S=>{h(y=>y.includes(S)?y.filter(E=>E!==S):[...y,S])},w=S=>S.children?S.children.some(y=>n.pathname===y.path||n.pathname.startsWith(y.path+"/")):n.pathname===S.path,_=(S,y)=>{let E=S.label;S.path==="/dispatches"&&N!=="warehouse_admin"&&N!=="warehouse_employee"&&(E="Incoming Shipments");const A=S.children&&S.children.length>0,U=x.includes(S.path),D=w(S);return A&&!i?e.jsxs("div",{className:"animate-fadeIn",style:{animationDelay:`${y*20}ms`},children:[e.jsxs("button",{onClick:()=>b(S.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group
                            ${D?"bg-primary/10 text-primary dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[22px] transition-transform group-hover:scale-110",children:S.icon}),e.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:E}),e.jsx("span",{className:`material-symbols-outlined text-[18px] transition-transform ${U?"rotate-180":""}`,children:"expand_more"})]}),U&&e.jsx("div",{className:"mt-1 ml-4 pl-4 border-l-2 border-slate-200 dark:border-slate-700 space-y-0.5",children:S.children.filter(R=>g(R)).map(R=>e.jsxs("div",{children:[R.divider&&e.jsx("div",{className:"my-2 border-t border-slate-200 dark:border-slate-700"}),e.jsxs(vd,{to:R.path,end:R.path===S.path,className:({isActive:H})=>`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors text-sm
                                                ${H?"bg-primary text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:R.icon}),e.jsx("span",{className:"font-medium",children:R.label})]})]},R.path))})]},S.path):e.jsxs(vd,{to:S.path,end:S.path==="/",className:({isActive:R})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors group
                    ${R?"bg-primary text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"}
                    ${i?"justify-center":""}`,style:{animationDelay:`${y*20}ms`},title:i?E:void 0,children:[e.jsx("span",{className:"material-symbols-outlined text-[22px] transition-transform group-hover:scale-110",children:S.icon}),!i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm font-medium flex-1",children:E}),S.badge&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-red-500 text-white rounded-full",children:S.badge})]})]},S.path)},k=()=>v?ki.filter(S=>g(S)):[...ki,...v0].filter(y=>g(y));return e.jsxs("aside",{className:`
                flex flex-col border-r border-slate-200 dark:border-slate-800 
                bg-white dark:bg-slate-900 transition-all duration-300 ease-in-out
                ${i?"w-20":"w-64"}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:`flex items-center gap-3 ${i?"justify-center w-full":""}`,children:[e.jsx("div",{className:"flex items-center justify-center size-10 rounded-lg bg-primary text-white",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"local_pharmacy"})}),!i&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight text-slate-900 dark:text-white",children:"PharmaEC"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:v?"Super Admin":"Management System"})]})]}),!i&&e.jsx("button",{onClick:f,className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Collapse sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})})]}),i&&e.jsx("button",{onClick:f,className:"mx-auto mt-3 p-2 rounded-lg text-slate-400 hover:text-primary hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",title:"Expand sidebar",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1 no-scrollbar",children:k().map((S,y)=>_(S,y))})]})}function Sj(){const[n,r]=m.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),[c,i]=m.useState(!1),[u,x]=m.useState(""),[h,N]=m.useState(null),v=m.useRef(null),g=He(),{user:f,logout:b}=Ke();m.useEffect(()=>{n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[n]),m.useEffect(()=>{(async()=>{if(!f){x(""),N(null);return}try{if(f.shop_id){const A=await At.get(f.shop_id);x(A.data.name||"Unknown Shop"),N("shop")}else if(f.warehouse_id){const A=await Et.get(f.warehouse_id);x(A.data.name||"Unknown Warehouse"),N("warehouse")}else x(""),N(null)}catch(A){console.error("Failed to fetch entity name:",A),x(""),N(null)}})()},[f]),m.useEffect(()=>{const E=A=>{v.current&&!v.current.contains(A.target)&&i(!1)};return c&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[c]);const w=()=>{r(!n)},_=()=>{b(),g("/login")},k=E=>E.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2),S=E=>({super_admin:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400",warehouse_admin:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",pharmacy_admin:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",hr_manager:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",pharmacist:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400"})[E]||"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300",y=E=>E.split("_").map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" ");return e.jsxs("header",{className:"flex h-14 items-center justify-between border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 px-6 sticky top-0 z-10",children:[e.jsx("div",{className:"flex items-center gap-2",children:u&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:`material-symbols-outlined text-[18px] ${h==="shop"?"text-blue-600 dark:text-blue-400":"text-amber-600 dark:text-amber-400"}`,children:h==="shop"?"store":"warehouse"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400 font-semibold leading-none",children:h==="shop"?"Shop":"Warehouse"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white leading-tight",children:u})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:w,className:"flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:n?"Switch to Light Mode":"Switch to Dark Mode",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:n?"light_mode":"dark_mode"})}),e.jsxs("button",{onClick:()=>g("/notifications"),className:"relative flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-primary hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Notifications",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"notifications"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 rounded-full bg-red-500"})]}),e.jsx("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),f&&e.jsxs("div",{className:"relative",ref:v,children:[e.jsxs("button",{onClick:()=>i(!c),className:"flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm shadow-sm",children:k(f.full_name||f.email)}),e.jsx("span",{className:`material-symbols-outlined text-slate-400 text-[18px] transition-transform ${c?"rotate-180":""}`,children:"expand_more"})]}),c&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50",children:[e.jsxs("div",{className:"p-3 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-md",children:k(f.full_name||f.email)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white truncate",children:f.full_name||"User"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:f.email})]})]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${S(f.role)}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"badge"}),y(f.role)]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{i(!1),g("/settings")},className:"w-full flex items-center gap-2 px-3 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"person"}),e.jsx("span",{className:"text-sm font-medium",children:"My Profile"})]}),e.jsxs("button",{onClick:()=>{i(!1),g("/settings/application")},className:"w-full flex items-center gap-2 px-3 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"settings"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-1"}),e.jsxs("button",{onClick:_,className:"w-full flex items-center gap-2 px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"logout"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]})]})]})}function _j(){return e.jsxs("div",{className:"flex h-screen w-full bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[e.jsx(kj,{}),e.jsxs("div",{className:"flex flex-1 flex-col h-full overflow-hidden min-w-0",children:[e.jsx(Sj,{}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900 scroll-smooth",children:e.jsx("div",{className:"page-content animate-fadeIn p-6",children:e.jsx(Wb,{})})})]})]})}function Cj(){const[n,r]=m.useState(""),[c,i]=m.useState(""),[u,x]=m.useState(!1),[h,N]=m.useState(""),[v,g]=m.useState(!1),f=He(),{refreshUser:b}=Ke(),w=async _=>{_.preventDefault(),N(""),x(!0);try{const k=await bp.login(n,c),{access_token:S,refresh_token:y}=k.data;localStorage.setItem("access_token",S),localStorage.setItem("refresh_token",y),await b(),f("/")}catch(k){N(k.response?.data?.detail||"Login failed. Please check your credentials.")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-white rounded-full translate-x-1/3 translate-y-1/3"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-white rounded-full -translate-x-1/2 -translate-y-1/2"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-16 text-white",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-12",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"medication"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PharmaEC"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"Enterprise Management"})]})]}),e.jsxs("h2",{className:"text-4xl font-bold leading-tight mb-6",children:["Complete Pharmacy",e.jsx("br",{}),"Management Solution"]}),e.jsx("p",{className:"text-blue-100 text-lg leading-relaxed mb-10 max-w-md",children:"Streamline your operations with our comprehensive platform for warehouses, medical shops, inventory, billing, and more."}),e.jsx("div",{className:"space-y-4",children:[{icon:"warehouse",text:"Multi-Warehouse Management"},{icon:"storefront",text:"Medical Shop Operations"},{icon:"inventory_2",text:"Real-time Inventory Tracking"},{icon:"receipt_long",text:"Integrated POS & Billing"}].map((_,k)=>e.jsxs("div",{className:"flex items-center gap-3 text-blue-100",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:_.icon})}),e.jsx("span",{children:_.text})]},k))})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-blue-600 mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"medication"})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"PharmaEC"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Welcome back"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Please enter your credentials to continue"})]}),h&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm flex items-start gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-lg flex-shrink-0",children:"error"}),e.jsx("span",{children:h})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:n,onChange:_=>r(_.target.value),placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v?"text":"password",value:c,onChange:_=>i(_.target.value),placeholder:"",required:!0,className:"w-full px-4 py-3 pr-12 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"}),e.jsx("button",{type:"button",onClick:()=>g(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:v?"visibility_off":"visibility"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500 focus:ring-offset-0"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-600/30 hover:shadow-blue-600/40 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign In",e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})]})})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-xl",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"info"}),"Demo Credentials"]}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"Email:"})," admin@pharmaec.com"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"Password:"})," admin123"]})]})]}),e.jsx("p",{className:"text-center text-slate-400 text-sm mt-8",children:" 2024 PharmaEC. All rights reserved."})]})})]})}function Ej(){const n=He(),{user:r}=Ke(),{scope:c,activeEntity:i}=Da(),[u,x]=m.useState({warehouses:0,shops:0,medicines:0,invoices:0,customers:0,employees:0,revenue:0,lowStockItems:0,expiringItems:0,pendingRequests:0,dispatchedToday:0}),[h,N]=m.useState([]),[v,g]=m.useState([]),[f,b]=m.useState([]),[w,_]=m.useState(!0),[k,S]=m.useState(null),[y,E]=m.useState([]);m.useEffect(()=>{A()},[c,i]);const A=async()=>{try{_(!0),S(null);const L={};i?.type==="warehouse"&&(L.warehouse_id=i.id),i?.type==="shop"&&(L.shop_id=i.id);const[re,G,I,T,ce,oe,ye,z,$,te]=await Promise.allSettled([Et.list({page:1,size:1}),At.list({page:1,size:1}),jt.list({page:1,size:1}),Xs.list({page:1,size:5,...L}),Ul.list({page:1,size:1}),fa.list({page:1,size:1,...L}),Xn.getSales(),Bl.getAlerts(),Vs.list({status:"pending",size:1,...L}),Ks.list({size:500,...L})]),me=(be,De)=>be.status==="fulfilled"&&(be.value.data?.[De]||be.value.data?.total)||0,B=z.status==="fulfilled"?z.value.data?.alerts||[]:[],p=B.filter(be=>be.type==="low_stock").length,M=B.filter(be=>be.type==="expiring"||be.type==="expired").length,ne=$.status==="fulfilled"&&$.value.data?.total||0,Y=new Date().toISOString().split("T")[0],ve=(te.status==="fulfilled"?te.value.data?.items||te.value.data||[]:[]).filter(be=>be.dispatch_date&&be.dispatch_date.startsWith(Y)).length;x({warehouses:me(re,"total"),shops:me(G,"total"),medicines:me(I,"total"),invoices:T.status==="fulfilled"&&(T.value.data?.total||T.value.data?.items?.length)||0,customers:me(ce,"total"),employees:me(oe,"total"),revenue:ye.status==="fulfilled"&&ye.value.data?.total_sales||0,lowStockItems:p,expiringItems:M,pendingRequests:ne,dispatchedToday:ve}),T.status==="fulfilled"&&E((T.value.data?.items||T.value.data||[]).slice(0,5)),N(B.slice(0,5).map(be=>({id:be.id||Math.random().toString(),title:be.type==="low_stock"?`Low Stock - ${be.medicine_name} ${be.brand?`(${be.brand})`:""}`:`Expiry Alert - ${be.medicine_name} ${be.brand?`(${be.brand})`:""}`,description:be.type==="low_stock"?`Only ${be.current_quantity} units left`:`Expires in ${be.days_to_expiry} days`,time:"Recently",severity:be.type==="expired"?"critical":"warning",type:be.type}))),g([]),b([])}catch(L){console.error("Dashboard fetch error:",L),S("Failed to load dashboard data")}finally{_(!1)}},U=L=>L>=1e7?`${(L/1e7).toFixed(1)}Cr`:L>=1e5?`${(L/1e5).toFixed(1)}L`:L>=1e3?`${(L/1e3).toFixed(0)}K`:`${L}`,D=[{title:"Total Revenue",value:U(u.revenue),icon:"payments",color:"emerald",trend:"+12.5%",trendUp:!0,subtitle:"vs last month"},{title:"Warehouses",value:u.warehouses.toString(),icon:"warehouse",color:"blue",trend:"+2",trendUp:!0,subtitle:"Active locations"},{title:"Medical Shops",value:u.shops.toString(),icon:"storefront",color:"purple",trend:"+5",trendUp:!0,subtitle:"Connected shops"},{title:"Total Medicines",value:u.medicines.toString(),icon:"medication",color:"cyan",trend:"+1.2%",trendUp:!0,subtitle:"SKUs in catalog"}],R=[{title:"Low Stock Items",value:u.lowStockItems.toString(),icon:"inventory",color:"red",badge:"Action Required",badgeColor:"red",subtitle:"Below safety threshold"},{title:"Expiring Soon",value:u.expiringItems.toString(),icon:"schedule",color:"orange",badge:"Review Needed",badgeColor:"orange",subtitle:"Within 30 days"},{title:"Pending Requests",value:u.pendingRequests.toString(),icon:"assignment",color:"amber",badge:"Pending",badgeColor:"amber",subtitle:"Awaiting approval"},{title:"Dispatched Today",value:u.dispatchedToday.toString(),icon:"local_shipping",color:"teal",trend:"",trendUp:!0,subtitle:"Successfully shipped"}],H=[{label:"POS Billing",icon:"point_of_sale",path:"/sales/pos",color:"blue"},{label:"Add Stock",icon:"add_box",path:"/warehouses/stock",color:"green"},{label:"New Order",icon:"shopping_cart",path:"/purchase-requests",color:"purple"},{label:"Dispatches",icon:"local_shipping",path:"/dispatches",color:"orange"},{label:"Reports",icon:"bar_chart",path:"/reports/sales",color:"cyan"},{label:"Employees",icon:"badge",path:"/employees",color:"pink"}];if(w)return e.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-slate-200 border-t-primary mx-auto"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl animate-pulse",children:"dashboard"})})]}),e.jsx("p",{className:"text-slate-500 mt-4 font-medium",children:"Loading dashboard..."})]})});const P=Math.max(...v.map(L=>L.amount),1);return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(()=>{const L=new Date().getHours();return L<12?"Good Morning":L<17?"Good Afternoon":"Good Evening"})(),", ",r?.full_name||"User"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400 text-[20px]",children:"business"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total Locations"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:u.warehouses+u.shops})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Overview of pharmacy operations"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:A,className:"btn btn-secondary",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"refresh"}),"Refresh"]}),c!=="global"&&e.jsxs("button",{onClick:()=>n("/sales/pos"),className:"btn btn-primary",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"add"}),"New Sale"]})]})]}),k&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex items-center gap-3 animate-fadeIn",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"error"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:k}),e.jsx("button",{onClick:A,className:"ml-auto text-sm text-red-600 hover:text-red-800 font-medium",children:"Retry"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:D.map((L,re)=>e.jsxs("div",{className:"group relative overflow-hidden bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-fadeInUp",style:{animationDelay:`${re*100}ms`},children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br opacity-5 group-hover:opacity-10 transition-opacity ${L.color==="emerald"?"from-emerald-400 to-emerald-600":L.color==="blue"?"from-blue-400 to-blue-600":L.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"}`}),e.jsxs("div",{className:"flex items-start justify-between mb-4 relative",children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-br ${L.color==="emerald"?"from-emerald-400 to-emerald-600":L.color==="blue"?"from-blue-400 to-blue-600":L.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"} group-hover:scale-110 transition-transform duration-300`,children:e.jsx("span",{className:"material-symbols-outlined text-white",style:{fontSize:28},children:L.icon})}),L.trend&&e.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${L.trendUp?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:14},children:L.trendUp?"trending_up":"trending_down"}),L.trend]})]}),e.jsx("h4",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1 relative",children:L.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-semibold mb-1 relative",children:L.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 relative",children:L.subtitle}),e.jsx("div",{className:`absolute -bottom-2 -right-2 w-24 h-24 rounded-full opacity-10 blur-2xl bg-gradient-to-br ${L.color==="emerald"?"from-emerald-400 to-emerald-600":L.color==="blue"?"from-blue-400 to-blue-600":L.color==="purple"?"from-purple-400 to-purple-600":"from-cyan-400 to-cyan-600"}`})]},L.title))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:R.map(L=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400",style:{fontSize:20},children:L.icon})}),L.badge&&e.jsx("span",{className:"badge badge-warning",children:L.badge})]}),e.jsx("h4",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:L.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:L.title})]},L.title))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Sales Overview"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:U(u.revenue)}),e.jsx("span",{className:"text-sm text-emerald-600 font-medium bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded-full",children:"+12.5%"})]})]})}),e.jsx("div",{className:"h-64 flex items-end gap-4 px-4 border-b border-slate-100 dark:border-slate-700 pb-4",children:v.map((L,re)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-full max-w-[60px] bg-primary rounded-t-lg",style:{height:`${L.amount/P*100}%`,minHeight:"20px"}}),e.jsx("span",{className:"text-xs font-medium text-slate-500",children:L.month})]},re))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Top Selling Medicine"}),e.jsx("div",{className:"space-y-4",children:f.map((L,re)=>{const G=Math.max(...f.map(T=>T.sales)),I=L.sales/G*100;return e.jsxs("div",{className:"group animate-fadeInUp",style:{animationDelay:`${re*100}ms`},children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:L.name}),e.jsxs("span",{className:"text-slate-900 dark:text-white font-bold",children:["",(L.sales/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 w-full bg-slate-100 dark:bg-slate-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`${L.color} h-3 rounded-full transition-all duration-700 ease-out`,style:{width:`${I}%`}})}),e.jsx("span",{className:"text-xs text-slate-500 font-medium w-12 text-right",children:L.quantity})]})]},L.name)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-gradient-to-r from-red-50 to-transparent dark:from-red-900/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"warning"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Stock Alerts"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-bold bg-red-100 text-red-600 rounded-full",children:h.length})]}),e.jsx("button",{onClick:()=>n("/notifications"),className:"text-sm text-primary font-medium hover:underline",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-72 overflow-auto",children:h.length>0?h.map((L,re)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${re*50}ms`},children:[e.jsx("div",{className:`mt-0.5 h-3 w-3 rounded-full flex-shrink-0 ${L.severity==="critical"?"bg-red-500":"bg-amber-500"} animate-pulse`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:L.title}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-0.5",children:L.description})]}),e.jsx("button",{className:"px-3 py-1 text-xs font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors",children:L.type==="low_stock"?"Restock":"Review"})]},L.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-green-500 mb-2",children:"check_circle"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"All Clear!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No stock alerts at this time"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"receipt_long"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Recent Invoices"})]}),e.jsx("button",{onClick:()=>n("/sales/invoices"),className:"text-sm text-primary font-medium hover:underline",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-72 overflow-auto",children:y.length>0?y.map((L,re)=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${re*50}ms`},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-[18px]",children:"receipt"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:L.invoice_number||`INV-${L.id}`}),e.jsx("p",{className:"text-xs text-slate-500",children:L.customer_name||"Walk-in Customer"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-emerald-600",children:U(L.total_amount||0)}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(L.created_at).toLocaleDateString()})]})]},L.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 mb-2",children:"receipt_long"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"No invoices yet"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create an invoice to get started"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:H.map((L,re)=>e.jsxs("button",{onClick:()=>n(L.path),className:"flex flex-col items-center gap-3 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-primary/50 transition-all hover:-translate-y-1 hover:shadow-lg group animate-fadeInUp",style:{animationDelay:`${re*50}ms`},children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-${L.color}-100 dark:bg-${L.color}-900/30 flex items-center justify-center group-hover:scale-110 transition-transform`,children:e.jsx("span",{className:`material-symbols-outlined text-${L.color}-600 dark:text-${L.color}-400 text-2xl`,children:L.icon})}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:L.label})]},L.label))})]})]})}function qd({value:n,onChange:r,placeholder:c="Search...",className:i=""}){return e.jsxs("div",{className:`search-bar ${i}`,children:[e.jsx("span",{className:"material-symbols-outlined search-icon",children:"search"}),e.jsx("input",{type:"text",value:n,onChange:u=>r(u.target.value),placeholder:c,className:"search-input"}),n&&e.jsx("button",{onClick:()=>r(""),className:"clear-button",title:"Clear search",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})}),e.jsx("style",{children:`
                .search-bar {
                    position: relative;
                    display: flex;
                    align-items: center;
                    width: 100%;
                    max-width: 400px;
                }
                
                .search-icon {
                    position: absolute;
                    left: 12px;
                    color: #9ca3af;
                    font-size: 20px;
                }
                
                .search-input {
                    width: 100%;
                    padding: 10px 40px 10px 44px;
                    border: 1px solid #e5e7eb;
                    border-radius: 8px;
                    font-size: 14px;
                    transition: all 0.2s;
                }
                
                .search-input:focus {
                    outline: none;
                    border-color: #4a6cf7;
                    box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
                }
                
                .clear-button {
                    position: absolute;
                    right: 8px;
                    background: none;
                    border: none;
                    padding: 4px;
                    cursor: pointer;
                    color: #9ca3af;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                .clear-button:hover {
                    background: #f3f4f6;
                    color: #4b5563;
                }
                
                .clear-button .material-symbols-outlined {
                    font-size: 18px;
                }
            `})]})}function le({variant:n="primary",size:r="md",children:c,icon:i,loading:u,className:x="",disabled:h,...N}){let g="";switch(n){case"primary":g="btn-primary";break;case"secondary":g="btn-secondary";break;case"ghost":g="bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300 border-transparent shadow-none";break;case"danger":case"error":g="bg-red-50 text-red-600 hover:bg-red-100 border-red-200 shadow-sm";break;case"success":g="bg-green-50 text-green-600 hover:bg-green-100 border-green-200 shadow-sm";break;case"warning":g="bg-yellow-50 text-yellow-600 hover:bg-yellow-100 border-yellow-200 shadow-sm";break;case"info":g="bg-blue-50 text-blue-600 hover:bg-blue-100 border-blue-200 shadow-sm";break;case"outline":g="bg-transparent border border-slate-300 text-slate-700 hover:bg-slate-50";break;default:g="btn-primary"}let f="";switch(r){case"sm":f="px-3 py-1.5 text-sm h-8";break;case"lg":f="px-6 py-3 text-lg h-12";break;default:f="px-4 py-2"}return e.jsxs("button",{className:`btn ${g} ${f} ${x} flex items-center justify-center gap-2 transition-all font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed`,disabled:h||u,...N,children:[u?e.jsx("span",{className:`animate-spin rounded-full border-2 border-current border-t-transparent ${r==="sm"?"h-3 w-3":"h-4 w-4"}`}):i?e.jsx("span",{className:`material-symbols-outlined ${r==="sm"?"text-[18px]":"text-[20px]"}`,children:i}):null,c]})}function Aj({title:n,count:r,searchProps:c,onFilterClick:i,actions:u,className:x="",embedded:h=!1}){const N=h?`bg-white dark:bg-slate-800 px-4 py-3 border-b border-slate-100 dark:border-slate-700 ${x}`:`bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 px-4 py-3 ${x}`;return e.jsx("div",{className:N,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("h2",{className:"text-base font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[n,r!==void 0&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap sm:flex-nowrap",children:[c&&e.jsx("div",{className:"w-full sm:w-auto min-w-[220px]",children:e.jsx(qd,{value:c.value,onChange:c.onChange,placeholder:c.placeholder||"Search...",className:"!w-full"})}),i&&e.jsx(le,{variant:"secondary",onClick:i,className:"!p-2",title:"Filter List",children:e.jsx("span",{className:"material-symbols-outlined text-[20px] text-slate-500",children:"filter_list"})}),u]})]})})}function Tj({data:n,columns:r,loading:c=!1,emptyMessage:i="No data available",zebra:u=!1,stickyHeader:x=!0,pagination:h,error:N,onRetry:v,headerSlot:g}){const f=()=>Array(5).fill(0).map((b,w)=>e.jsx("tr",{className:"animate-pulse border-b border-slate-100 dark:border-slate-800",children:r.map((_,k)=>e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4"})},k))},`skel-${w}`));return N?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center mb-3",children:e.jsx("span",{className:"material-symbols-outlined text-red-500 text-[24px]",children:"error"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"Failed to load data"}),e.jsx("p",{className:"text-sm mt-1 mb-4 max-w-xs",children:N}),v&&e.jsx("button",{onClick:v,className:"px-4 py-2 bg-white border border-slate-300 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[g&&e.jsx("div",{className:"border-b border-slate-100 dark:border-slate-700",children:g}),e.jsx("div",{className:"overflow-x-auto flex-1 relative",children:e.jsxs("table",{className:`w-full text-left text-sm ${u?"table-zebra":""} border-collapse`,children:[e.jsx("thead",{className:`bg-slate-50 dark:bg-slate-900/90 z-10 ${x?"sticky top-0":""}`,children:e.jsx("tr",{children:r.map((b,w)=>{const _=b.numeric||b.align==="right"?"text-right":b.align==="center"?"text-center":"text-left";return e.jsx("th",{className:`px-4 py-3 font-semibold text-slate-900 dark:text-white uppercase text-xs tracking-wider ${_} ${b.className||""}`,style:{width:b.width},children:b.header},w)})})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:c?f():n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:r.length,className:"px-4 py-16 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"inbox"})}),e.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-400",children:i})]})})}):n.map((b,w)=>e.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:r.map((_,k)=>{const S=_.render?_.render(b):b[_.key],y=_.numeric||_.align==="right"?"text-right":_.align==="center"?"text-center":"text-left";return e.jsx("td",{className:`px-4 py-3 text-slate-600 dark:text-slate-300 ${y} ${_.className||""}`,children:S},k)})},w))})]})}),h&&!c&&!N&&n.length>0&&e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50 px-4 py-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Showing ",e.jsx("span",{className:"font-medium",children:(h.currentPage-1)*h.pageSize+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(h.currentPage*h.pageSize,h.totalItems)})," of ",e.jsx("span",{className:"font-medium",children:h.totalItems})]}),h.onPageSizeChange&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Show:"}),e.jsx("select",{value:h.pageSize,onChange:b=>h.onPageSizeChange?.(Number(b.target.value)),className:"px-2 py-1 text-sm border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(h.pageSizeOptions||[10,15,25,50]).map(b=>e.jsx("option",{value:b,children:b},b))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>h.onPageChange(Math.max(1,h.currentPage-1)),disabled:h.currentPage===1,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-800 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:border-transparent transition-all",title:"Previous Page",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_left"})}),(()=>{const{currentPage:b,totalPages:w}=h,_=[];if(w<=7)for(let k=1;k<=w;k++)_.push(k);else{_.push(1),b>3&&_.push("...");const k=Math.max(2,b-1),S=Math.min(w-1,b+1);for(let y=k;y<=S;y++)_.includes(y)||_.push(y);b<w-2&&_.push("..."),_.includes(w)||_.push(w)}return _.map((k,S)=>k==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."},`ellipsis-${S}`):e.jsx("button",{onClick:()=>h.onPageChange(k),className:`min-w-[32px] h-8 px-2 rounded-lg text-sm font-medium transition-all ${b===k?"bg-blue-600 text-white shadow-sm":"hover:bg-white dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 border border-transparent hover:border-slate-200 dark:hover:border-slate-700"}`,children:k},k))})(),e.jsx("button",{onClick:()=>h.onPageChange(Math.min(h.totalPages,h.currentPage+1)),disabled:h.currentPage===h.totalPages,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-800 border border-transparent hover:border-slate-200 dark:hover:border-slate-700 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:border-transparent transition-all",title:"Next Page",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})})]})]})]})}function Dj({title:n,subtitle:r,actions:c}){return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white capitalize tracking-tight",children:n}),r&&e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:r})]}),c]})}function Rj({children:n}){return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 animate-fadeIn",children:n})}function Mj({children:n,className:r="",loading:c=!1}){return c?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px] h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):e.jsx("div",{className:`space-y-6 max-w-[1600px] mx-auto ${r}`,children:n})}const fe=Object.assign(Mj,{Header:Dj,KPICards:Rj,ListControls:Aj,DataTable:Tj});function Ne({title:n,value:r,change:c,changeType:i="up",icon:u,onClick:x,isActive:h=!1,valueClassName:N,className:v=""}){const g={up:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10",down:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-500/10",neutral:"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-500/10"},f={up:"trending_up",down:"trending_down",neutral:"trending_flat"};return e.jsxs("div",{onClick:x,className:`
                flex flex-col gap-1 rounded-xl p-5 shadow-sm border transition-all duration-200
                ${x?"cursor-pointer hover:shadow-md hover:-translate-y-0.5":""}
                ${h?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 ring-1 ring-blue-500/30":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}
                ${v}
            `,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm font-medium ${h?"text-blue-700 dark:text-blue-300":"text-slate-500 dark:text-slate-400"}`,children:n}),e.jsx("span",{className:`material-symbols-outlined ${h?"text-blue-600 dark:text-blue-400":"text-slate-400"}`,children:u})]}),e.jsxs("div",{className:"flex items-end gap-2 mt-2",children:[e.jsx("p",{className:`text-2xl font-bold ${N||(h?"text-blue-900 dark:text-blue-100":"text-slate-900 dark:text-white")}`,children:r}),c&&e.jsxs("span",{className:`flex items-center text-xs font-medium ${g[i]} px-1.5 py-0.5 rounded mb-1`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] mr-0.5",children:f[i]}),c]})]})]})}const zj={success:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",warning:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",error:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",info:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",secondary:"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",primary:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"};function Ye({children:n,variant:r,className:c=""}){return e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${zj[r]} ${c}`,children:n})}function Tt({isOpen:n,onClose:r,title:c,children:i,footer:u,maxWidth:x="md",size:h}){const N=h||x;if(!n)return null;const v={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:`modal-content w-full ${v[N]} mx-4`,onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:c}),e.jsx("button",{onClick:r,className:"p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"close"})})]}),e.jsx("div",{className:"p-6",children:i}),u&&e.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:u})]})})}function qt({isOpen:n,onClose:r,onConfirm:c,title:i,message:u,confirmText:x="Confirm",cancelText:h="Cancel",variant:N="danger"}){if(!n)return null;const v=()=>{switch(N){case"danger":return"warning";case"warning":return"error";case"info":return"info";default:return"warning"}},f=(()=>{switch(N){case"danger":return{iconBg:"bg-red-100 dark:bg-red-900/30",iconText:"text-red-600 dark:text-red-400",buttonBg:"bg-red-600 hover:bg-red-700 shadow-red-500/20"};case"warning":return{iconBg:"bg-amber-100 dark:bg-amber-900/30",iconText:"text-amber-600 dark:text-amber-400",buttonBg:"bg-amber-600 hover:bg-amber-700 shadow-amber-500/20"};case"info":return{iconBg:"bg-blue-100 dark:bg-blue-900/30",iconText:"text-blue-600 dark:text-blue-400",buttonBg:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20"}}})();return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${f.iconBg} ${f.iconText} flex items-center justify-center mb-4`,children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:v()})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:i}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:u})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 font-medium transition-colors",children:h}),e.jsx("button",{onClick:c,className:`flex-1 px-4 py-2.5 text-white rounded-xl font-medium transition-colors shadow-lg ${f.buttonBg}`,children:x})]})]})})}function Oj(){const n=He(),{user:r}=Ke(),i=(r?.role||"user")==="super_admin",[u,x]=m.useState([]),[h,N]=m.useState(!0),[v,g]=m.useState(""),[f,b]=m.useState("all"),[w,_]=m.useState(1),[k,S]=m.useState(0),[y,E]=m.useState(0),[A,U]=m.useState(10),[D,R]=m.useState(null),[H,P]=m.useState([]),[L,re]=m.useState(!1);m.useEffect(()=>{I(),G()},[w,A,v,f]);const G=async()=>{try{const B=await Et.list({status:"active",size:1});E(B.data.total||0)}catch(B){console.error("Failed to fetch stats",B)}},I=async()=>{try{N(!0);const B={page:w,size:A};v&&(B.search=v),f!=="all"&&(B.status=f);const p=await Et.list(B);x(p.data.items||[]),S(p.data.total||0)}catch(B){console.error("Failed to fetch warehouses:",B),x([])}finally{N(!1)}},T=async B=>{R(B),re(!0);try{const p=await At.list({warehouse_id:B.id,size:100});P(p.data.items||[])}catch(p){console.error("Failed to fetch connected shops:",p),P([])}finally{re(!1)}},[ce,oe]=m.useState(!1),[ye,z]=m.useState(null),$=B=>{z(B),oe(!0)},te=async()=>{if(ye)try{await Et.delete(ye.id),window.toast?.success("Warehouse deleted successfully"),I(),G()}catch(B){console.error("Failed to delete warehouse:",B),window.toast?.error(B.response?.data?.detail||"Failed to delete warehouse")}finally{oe(!1),z(null)}},me=[{header:"Warehouse",key:"name",render:B=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"warehouse"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:B.name}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:B.code})]})]})},{header:"Location",key:"city",render:B=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:B.city}),e.jsx("span",{className:"text-xs text-slate-500",children:B.state})]}),className:"hidden sm:table-cell"},{header:"Shops",key:"shop_count",render:B=>e.jsxs("div",{className:"flex items-center justify-center font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] mr-1 text-slate-400",children:"storefront"}),B.shop_count||0]}),align:"center"},{header:"Status",key:"status",render:B=>e.jsx(Ye,{variant:B.status==="active"?"success":B.status==="suspended"?"error":"secondary",children:B.status}),align:"center"},{header:"Actions",key:"id",render:B=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"ghost",onClick:()=>T(B),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})}),e.jsx(le,{variant:"ghost",onClick:()=>n(`/warehouses/edit/${B.id}`),className:"!p-1.5 h-8 w-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20",title:"Edit Warehouse",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),i&&e.jsx(le,{variant:"ghost",onClick:()=>$(B),className:"!p-1.5 h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",title:"Delete Warehouse",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Warehouses",subtitle:`Manage ${k} warehouses in your network`,actions:e.jsxs(le,{variant:"primary",onClick:()=>n("/warehouses/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Warehouse"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Warehouses",value:k,icon:"warehouse",onClick:()=>b("all"),isActive:f==="all"}),e.jsx(Ne,{title:"Active Warehouses",value:y,icon:"check_circle",onClick:()=>b("active"),isActive:f==="active",trend:"neutral"}),e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:"hidden lg:block"})]}),e.jsx(fe.DataTable,{columns:me,data:u,loading:h,emptyMessage:"No warehouses found. Add your first warehouse.",pagination:{currentPage:w,totalPages:Math.ceil(k/A),onPageChange:_,totalItems:k,pageSize:A,onPageSizeChange:B=>{U(B),_(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Warehouse List",count:k,searchProps:{value:v,onChange:B=>{g(B),_(1)},placeholder:"Search warehouses..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:f,onChange:B=>{b(B.target.value),_(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})}),embedded:!0})}),e.jsx(Tt,{isOpen:!!D,onClose:()=>R(null),title:D?.name||"Warehouse Details",maxWidth:"lg",children:D&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Code"}),e.jsx("p",{className:"text-sm mt-1 font-mono",children:D.code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Status"}),e.jsx(Ye,{variant:D.status==="active"?"success":"secondary",className:"mt-1",children:D.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Capacity"}),e.jsxs("p",{className:"text-sm mt-1",children:[D.capacity?.toLocaleString()||"-"," units"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"City"}),e.jsx("p",{className:"text-sm mt-1",children:D.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"State"}),e.jsx("p",{className:"text-sm mt-1",children:D.state})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Contact"}),e.jsx("p",{className:"text-sm mt-1",children:D.phone||"-"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-3",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Address"}),e.jsxs("p",{className:"text-sm mt-1",children:[D.address||"-"," - ",D.pincode]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-4",children:["Connected Medical Shops (",H.length,")"]}),L?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):H.length>0?e.jsx("div",{className:"grid gap-3",children:H.map((B,p)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:B.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[B.city,", ",B.state]})]})]}),e.jsx(Ye,{variant:B.status==="active"?"success":"secondary",className:"text-xs",children:B.status})]},p))}):e.jsx("div",{className:"text-center py-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No medical shops connected to this warehouse."})})]})]})}),e.jsx(qt,{isOpen:ce,onClose:()=>oe(!1),onConfirm:te,title:"Delete Warehouse",message:`Are you sure you want to delete "${ye?.name}"? This action cannot be undone.`,confirmText:"Delete Warehouse"})]})}function Zt({title:n,description:r,subtitle:c,icon:i,actions:u,children:x,className:h="",loading:N=!1}){return e.jsxs("div",{className:`flex flex-col h-full ${h}`,children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6 sm:flex-row sm:items-end sm:justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-[24px]",children:i})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white capitalize",children:n}),(r||c)&&e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:r||c})]})]})}),u&&e.jsx("div",{className:"flex items-center gap-3",children:u})]}),e.jsx("div",{className:"flex-1",children:N?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px] h-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):x})]})}function Xe({children:n,className:r="",padding:c,title:i,icon:u}){const x=c?{padding:c}:{};return e.jsxs("div",{className:`card ${r}`,style:x,children:[(i||u)&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[u&&e.jsx("span",{className:"material-symbols-outlined text-slate-600 dark:text-slate-400",children:u}),i&&e.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-white",children:i})]}),n]})}function pe({label:n,error:r,required:c,className:i="",...u}){return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[n,c&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{className:`input ${r?"border-red-500":""} ${i}`,...u}),r&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),r]})]})}function j0({label:n,error:r,options:c,placeholder:i,className:u="",...x}){return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[n,x.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:`input appearance-none ${r?"border-red-500":""} ${u}`,...x,children:[i&&e.jsx("option",{value:"",children:i}),c.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:20},children:"expand_more"})})]}),r&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),r]})]})}function Hl({value:n,onChange:r,options:c,label:i,placeholder:u="Select...",error:x,required:h,disabled:N,className:v=""}){const[g,f]=m.useState(!1),[b,w]=m.useState(""),_=m.useRef(null);m.useEffect(()=>{const S=c.find(y=>y.value===n);S&&w(S.label)},[n,c]),m.useEffect(()=>{function S(y){if(_.current&&!_.current.contains(y.target)){f(!1);const E=c.find(A=>A.value===n);E?w(E.label):n||w("")}}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[_,n,c]);const k=c.filter(S=>{const y=S.label.toLowerCase().replace(/\s+/g,""),E=b.toLowerCase().replace(/\s+/g,"");if(y.includes(E))return!0;const A=b.toLowerCase().split(/\s+/).filter(D=>D.length>0),U=S.label.toLowerCase();return A.every(D=>U.includes(D))});return e.jsxs("div",{className:`w-full ${v}`,ref:_,children:[i&&e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[i,h&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:b,onChange:S=>{w(S.target.value),f(!0),S.target.value||r("")},onFocus:()=>f(!0),placeholder:u,disabled:N,className:`input w-full ${x?"border-red-500":""} ${N?"opacity-50 cursor-not-allowed":""}`}),g&&!N&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-60 overflow-auto",children:k.length>0?k.map(S=>e.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 ${n===S.value?"bg-primary/10 text-primary font-medium":"text-slate-700 dark:text-slate-300"}`,onClick:()=>{r(S.value),w(S.label),f(!1)},children:S.label},S.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-slate-500 text-center",children:"No matches found"})})]}),x&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:16},children:"error"}),x]})]})}function N0(){const n=He(),{activeEntity:r}=Da(),[c,i]=m.useState([]),[u,x]=m.useState([]),[h,N]=m.useState([]),v=r?.type,g=r?.id||"",f=r?.name||"",[b,w]=m.useState(""),[_,k]=m.useState(""),[S,y]=m.useState(""),[E,A]=m.useState(""),[U,D]=m.useState(""),[R,H]=m.useState(""),[P,L]=m.useState(""),[re,G]=m.useState(!1),[I,T]=m.useState({type:"",text:""}),[ce,oe]=m.useState([]),[ye,z]=m.useState("");m.useEffect(()=>{(!r||r.type!=="warehouse"&&r.type!=="shop")&&n("/")},[r,n]),m.useEffect(()=>{r&&($(),r.type==="warehouse"&&me())},[r]),m.useEffect(()=>{b?te(b):x([]),k(""),y(""),D(""),z("")},[b]);const $=async()=>{try{const ae=await jt.list({size:500});i(ae.data.items||ae.data)}catch(ae){console.error("Error loading medicines:",ae)}},te=async ae=>{try{const se=await jt.getBatches(ae);let W=[];se.data&&(Array.isArray(se.data)?W=se.data:se.data.items&&Array.isArray(se.data.items)?W=se.data.items:se.data.data&&Array.isArray(se.data.data)&&(W=se.data.data)),x(W)}catch(se){console.error("Error loading batches:",se),x([])}},me=async()=>{try{const ae=await Di.list({size:500});N(ae.data.items||[])}catch(ae){console.error("Error loading racks:",ae)}},B=ba(),[p,M]=m.useState(null),[ne,Y]=m.useState([]);m.useEffect(()=>{B.state?.dispatchId&&(M(B.state.dispatchId),Z(B.state.dispatchId))},[B.state]);const Z=async ae=>{try{G(!0);const se=await Ks.get(ae);Y(se.data.items||[])}catch(se){console.error("Failed to load dispatch",se),T({type:"error",text:"Failed to load dispatch details"})}finally{G(!1)}},ve=async(ae,se,W=!1)=>{try{G(!0),await Bl.stockEntry({shop_id:g,medicine_id:ae.medicine_id,batch_number:ae.batch_number,expiry_date:ae.expiry_date,quantity:ae.quantity,purchase_price:ae.purchase_price||0,selling_price:ae.selling_price||0,rack_name:ae.rack_name||R,rack_number:ae.rack_number||P});const ge=[...ne];ge[se].status="received",ge[se].rack_name=ae.rack_name||R,ge[se].rack_number=ae.rack_number||P,Y(ge),ge.every(xe=>xe.status==="received")?(await Ks.updateStatus(p,"delivered"),T({type:"success",text:"All items received. Dispatch marked as Delivered."}),setTimeout(()=>n("/dispatches"),2e3)):W||T({type:"success",text:"Item received successfully"})}catch(ge){console.error(ge),T({type:"error",text:"Failed to receive item"})}finally{G(!1)}},be=ae=>{if(z(ae),ae){const se=u.find(W=>W.id===ae);se&&(k(se.batch_number),y(se.expiry_date))}},De=async ae=>{if(ae.preventDefault(),!g||!b||!_||!S||!E){T({type:"error",text:"Please fill all required fields"});return}G(!0);try{const se={medicine_id:b,batch_number:_,expiry_date:S,quantity:parseInt(E),purchase_price:parseFloat(U)||0,selling_price:c.find(ge=>ge.id===b)?.selling_price||0};v==="warehouse"?(se.warehouse_id=g,se.rack_name=R||void 0,se.rack_number=P||void 0):se.shop_id=g,await Bl.stockEntry(se);const W=c.find(ge=>ge.id===b);oe(ge=>[{medicine:W?.name,batch:_,quantity:parseInt(E),rack:se.rack_name?`${se.rack_number||""} / ${se.rack_name}`:"-",timestamp:new Date().toLocaleTimeString()},...ge.slice(0,9)]),T({type:"success",text:"Stock entry added successfully"}),A(""),D(""),H(""),L(""),k(""),y(""),w(""),z("")}catch(se){T({type:"error",text:se.response?.data?.detail||"Failed to add stock entry"})}finally{G(!1)}};return e.jsx(Zt,{title:`${v==="shop"?"Shop":"Warehouse"} Stock Entry`,description:`Add new inventory items to your ${v}`,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Xe,{title:"Add Stock",icon:"add_circle",children:[I.text&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-start gap-3 ${I.type==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:I.type==="error"?"error":"check_circle"}),e.jsx("p",{children:I.text})]}),p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-xl mb-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Receiving Dispatch Shipment"}),e.jsxs("p",{className:"text-sm",children:["Verify and accept items below. Status: ",B.state?.status]})]}),e.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-xl mb-6",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Bulk Receive Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(pe,{label:"Global Rack No",value:P,onChange:ae=>L(ae.target.value),placeholder:"Apply to all items",className:"bg-white"}),e.jsx(pe,{label:"Global Box Name",value:R,onChange:ae=>H(ae.target.value),placeholder:"Apply to all items",className:"bg-white"}),e.jsx("div",{className:"flex items-end",children:e.jsx(le,{onClick:async()=>{if(confirm("Receive all remaining items with these rack details?")){G(!0);try{const ae=ne.filter(se=>se.status!=="received");for(const se of ae){const W=ne.findIndex(ge=>ge===se);await ve(se,W,!0)}T({type:"success",text:"All items received successfully"}),setTimeout(()=>n("/dispatches"),1500)}catch(ae){console.error(ae)}finally{G(!1)}}},variant:"primary",className:"w-full justify-center",disabled:re||ne.every(ae=>ae.status==="received"),children:"Receive All Remaining"})})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Enters the specified Rack/Box for all items and marks them as received. Individual inputs below override these if set."})]}),ne.map((ae,se)=>e.jsxs("div",{className:`p-4 rounded-xl border mb-4 ${ae.status==="received"?"bg-green-50 border-green-200 opacity-75":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-white text-lg",children:ae.medicine_name}),e.jsxs("div",{className:"text-sm text-slate-500",children:[ae.manufacturer,"  Batch: ",ae.batch_number]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Exp: ",ae.expiry_date,"  MRP: ",ae.mrp]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ae.quantity}),e.jsx("div",{className:"text-xs text-slate-500",children:"Qty"})]})]}),ae.status!=="received"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(pe,{label:"Rack No",value:ae.rack_number||"",onChange:W=>{const ge=[...ne];ge[se].rack_number=W.target.value,Y(ge)},placeholder:P||"R-01",className:"!text-sm"}),e.jsx(pe,{label:"Box Name",value:ae.rack_name||"",onChange:W=>{const ge=[...ne];ge[se].rack_name=W.target.value,Y(ge)},placeholder:R||"Shelf A",className:"!text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(le,{onClick:()=>ve(ae,se),variant:"success",className:"w-full justify-center !py-2",disabled:re,children:"Accept"})})]}):e.jsxs("div",{className:"mt-2 flex items-center text-green-600 font-medium",children:[e.jsx("span",{className:"material-symbols-outlined mr-2",children:"check_circle"}),"Received to ",ae.rack_name||ae.rack_number||"Stock"]})]},se)),ne.length===0&&!re&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No items found in dispatch."})]}):e.jsxs("form",{onSubmit:De,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-white mb-2 capitalize",children:v}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-700 dark:text-slate-300 font-medium flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:v==="warehouse"?"warehouse":"store"}),f]})]}),e.jsxs("div",{children:[e.jsx(Hl,{label:"Medicine *",value:b,onChange:ae=>w(ae),required:!0,options:c.map(ae=>({value:ae.id,label:`${ae.name} ${ae.brand?`(${ae.brand})`:""} - ${ae.manufacturer}`})),placeholder:"Select Medicine"}),b&&(()=>{const ae=c.find(se=>se.id===b);return ae?e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg text-sm grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex justify-between col-span-2 border-b border-blue-200 dark:border-blue-800 pb-2 mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Brand:"}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[ae.brand||"-"," (",ae.manufacturer,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Generic:"})," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:ae.generic_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"MRP:"})," ",e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["",ae.mrp]})]})]}):null})()]}),u.length>0&&e.jsx("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:e.jsx(j0,{label:"Quick Fill from Existing Batch (Optional)",value:ye,onChange:ae=>be(ae.target.value),placeholder:"-- Use new batch details below --",options:u.map(ae=>({value:ae.id,label:`${ae.batch_number} (Exp: ${ae.expiry_date})`})),className:"!bg-white"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Batch Number *",value:_,onChange:ae=>k(ae.target.value.toUpperCase()),placeholder:"New or Existing Batch Number",required:!0,disabled:!b,className:"font-mono"}),e.jsx(pe,{label:"Expiry Date *",type:"date",value:S,onChange:ae=>y(ae.target.value),required:!0,disabled:!b})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Quantity *",type:"number",value:E,onChange:ae=>A(ae.target.value),placeholder:"Enter quantity",min:"1",required:!0}),e.jsx(pe,{label:"Purchase Price () *",type:"number",step:"0.01",value:U,onChange:ae=>D(ae.target.value),placeholder:"Enter purchase price",min:"0",required:!0})]}),v==="warehouse"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(j0,{label:"Rack No",value:h.find(ae=>ae.rack_number===P)?.id||"",onChange:ae=>{const se=h.find(W=>W.id===ae.target.value);se&&L(se.rack_number)},options:h.map(ae=>({value:ae.id,label:`${ae.rack_number} - ${ae.rack_name}`})),placeholder:"Select Rack"}),e.jsx(pe,{label:"Box Name / Location (Optional)",value:R,onChange:ae=>H(ae.target.value),placeholder:"e.g., Shelf A, Box 2"})]}),e.jsx(le,{type:"submit",variant:"primary",loading:re,className:"w-full justify-center",children:"Add Stock Entry"})]})]}),e.jsx(Xe,{title:"Recent Entries",icon:"history",className:"h-fit",children:ce.length>0?e.jsx("ul",{className:"space-y-4",children:ce.map((ae,se)=>e.jsxs("li",{className:"flex justify-between items-start p-3 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 animate-fadeIn",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:ae.medicine}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded bg-white border border-slate-200 text-slate-600",children:["Batch: ",ae.batch]}),ae.rack&&ae.rack!=="-"&&e.jsxs(Ye,{variant:"info",className:"!py-0.5",children:[" ",ae.rack]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["+ ",ae.quantity]}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:ae.timestamp})]})]},se))}):e.jsxs("div",{className:"text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-900/30 rounded-xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"post_add"}),e.jsx("p",{children:"No recent entries"}),e.jsx("p",{className:"text-sm opacity-75",children:"Added stock will appear here"})]})})]})})}function Fi({masterKey:n,value:r,onChange:c,placeholder:i="Select...",required:u=!1,disabled:x=!1,valueField:h="id",labelField:N="name",allowAdd:v=!1,onAdd:g,entityType:f,className:b="",style:w}){const{getMaster:_,getStatusesByEntity:k,isLoading:S}=dt();let y=[];n==="statuses"&&f?y=k(f):y=_(n);const E=R=>{const H=R.target.value;if(H==="__ADD_NEW__"&&g){g();return}c(H)},A=R=>h==="code"&&R.code!==void 0?R.code:R.id,U=R=>n==="hsn_codes"?`${R.hsn_code} - ${R.description?.substring(0,30)||""}`:n==="gst_slabs"?`${R.rate}%${R.description?` - ${R.description}`:""}`:n==="units"&&R.short_name?`${R.name} (${R.short_name})`:n==="payment_methods"&&R.icon?`${R.icon} ${R.name}`:R[N]||R.name||R.code||String(R.id),D=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${x||S?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:r,onChange:E,required:u,disabled:x||S,className:b||D,style:w,children:[e.jsx("option",{value:"",children:S?"Loading...":i}),y.map(R=>e.jsx("option",{value:A(R),children:U(R)},R.id)),v&&e.jsx("option",{value:"__ADD_NEW__",children:"+ Add New..."})]})}function Bd({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x,allowAdd:h,onAdd:N}){const{getMaster:v,isLoading:g}=dt(),f=v("categories"),b=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||g?"opacity-60 cursor-not-allowed":""}`,w=!g&&f.length===0;return e.jsxs("select",{value:n,onChange:_=>{const k=_.target.value;if(k==="__ADD_NEW__"&&N){N();return}r(k)},required:c,disabled:i||g||w,className:u||b,title:w?"No categories available. Please ask your Super Admin to add categories in Master Data Management  Medicine Categories":void 0,children:[e.jsx("option",{value:"",children:g?"Loading...":w?" No categories found - Contact Super Admin":x||"Select Category"}),f.map(_=>e.jsx("option",{value:_.name,children:_.name},_.id)),h&&e.jsx("option",{value:"__ADD_NEW__",children:"+ Add New..."})]})}function wp({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=dt(),v=h("medicine_types"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`,f=!N&&v.length===0;return e.jsxs("select",{value:n,onChange:b=>r(b.target.value),required:c,disabled:i||N||f,className:u||g,title:f?"No medicine types available. Please ask your Super Admin to add medicine types in Master Data Management  Medicine Types":void 0,children:[e.jsx("option",{value:"",children:N?"Loading...":f?" No medicine types found - Contact Super Admin":x||"Select Medicine Type"}),v.map(b=>e.jsx("option",{value:b.code,children:b.name},b.id))]})}function kp({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=dt(),v=h("units"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`,f=!N&&v.length===0;return e.jsxs("select",{value:n,onChange:b=>r(b.target.value),required:c,disabled:i||N||f,className:u||g,title:f?"No units available. Please ask your Super Admin to add units in Master Data Management  Units":void 0,children:[e.jsx("option",{value:"",children:N?"Loading...":f?" No units found - Contact Super Admin":x||"Select Unit"}),v.map(b=>e.jsxs("option",{value:b.name,children:[b.name," (",b.short_name,")"]},b.id))]})}function Sp({value:n,onChange:r,required:c,disabled:i,className:u}){const{getMaster:x,isLoading:h}=dt(),N=x("gst_slabs"),v=!h&&N.length===0;return e.jsxs("select",{value:n,onChange:g=>r(Number(g.target.value)),required:c,disabled:i||h||v,className:u||"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",title:v?"No GST slabs available. Please ask your Super Admin to add GST slabs in Master Data Management  Tax & Finance Masters  GST/VAT":void 0,children:[v&&e.jsx("option",{value:"",children:" No GST slabs found - Contact Super Admin"}),N.map(g=>e.jsxs("option",{value:g.rate,children:[g.rate,"%",g.description?` - ${g.description}`:""]},g.id))]})}function Lj({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=dt(),v=h("hsn_codes"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`,f=!N&&v.length===0,b=w=>{const _=w.target.value,k=v.find(S=>S.hsn_code===_);r(_,k?.gst_rate)};return e.jsxs("select",{value:n,onChange:b,required:c,disabled:i||N||f,className:u||g,title:f?"No HSN codes available. Please ask your Super Admin to add HSN codes in Master Data  HSN Codes":void 0,children:[e.jsx("option",{value:"",children:N?"Loading...":f?" No HSN codes found - Contact Super Admin":x||"Select HSN Code"}),v.map(w=>e.jsxs("option",{value:w.hsn_code,children:[w.hsn_code," - ",w.description?.substring(0,40)||"No description"," (",w.gst_rate,"%)"]},w.id))]})}function Uj({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){return e.jsx(Fi,{masterKey:"customer_types",value:n,onChange:r,placeholder:x||"Select Customer Type",valueField:"code",required:c,disabled:i,className:u})}function _p({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){const h=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}];return e.jsxs("select",{value:n,onChange:N=>r(N.target.value),required:c,disabled:i,className:u||"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:x||"Select Gender"}),h.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]})}function qj({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){const h=[{value:"full_time",label:"Full Time"},{value:"part_time",label:"Part Time"},{value:"contract",label:"Contract"},{value:"intern",label:"Intern"}];return e.jsxs("select",{value:n,onChange:N=>r(N.target.value),required:c,disabled:i,className:u||"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:x||"Select Employment Type"}),h.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]})}function Bj({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){return e.jsx(Fi,{masterKey:"urgency_levels",value:n,onChange:r,placeholder:x||"Select Urgency",valueField:"code",required:c,disabled:i,className:u})}function Hd({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){return e.jsx(Fi,{masterKey:"warehouses",value:n,onChange:r,placeholder:x||"Select Warehouse",required:c,disabled:i,className:u})}function Gd({value:n,onChange:r,required:c,disabled:i,className:u,warehouseId:x}){const{getMaster:h,isLoading:N}=dt();let v=h("shops");return x&&(v=v.filter(g=>g.warehouse_id===x)),e.jsxs("select",{value:n,onChange:g=>r(g.target.value),required:c,disabled:i||N||v.length===0,className:u||"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"",children:N?"Loading...":v.length===0?" No shops found":"Select Shop"}),v.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (",g.code,")"]},g.id))]})}function Hj({value:n,onChange:r,entityType:c,required:i,disabled:u,className:x,placeholder:h}){return e.jsx(Fi,{masterKey:"statuses",value:n,onChange:r,placeholder:h||"Select Status",valueField:"code",entityType:c,required:i,disabled:u,className:x})}function Cp({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=dt(),v=h("brands"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:n,onChange:f=>r(f.target.value),required:c,disabled:i||N,className:u||g,children:[e.jsx("option",{value:"",children:N?"Loading...":x||"Select Brand"}),v.map(f=>e.jsx("option",{value:f.name,children:f.name},f.id))]})}function Ep({value:n,onChange:r,required:c,disabled:i,className:u,placeholder:x}){const{getMaster:h,isLoading:N}=dt(),v=h("manufacturers"),g=`w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all ${i||N?"opacity-60 cursor-not-allowed":""}`;return e.jsxs("select",{value:n,onChange:f=>r(f.target.value),required:c,disabled:i||N,className:u||g,children:[e.jsx("option",{value:"",children:N?"Loading...":x||"Select Manufacturer"}),v.map(f=>e.jsx("option",{value:f.name,children:f.name},f.id))]})}function Gj(){const n=He(),{user:r}=Ke(),{isLoading:c}=dt(),u=(r?.role||"user")==="super_admin",[x,h]=m.useState([]),[N,v]=m.useState(!0),[g,f]=m.useState(""),[b,w]=m.useState("all"),[_,k]=m.useState(1),[S,y]=m.useState(0),[E,A]=m.useState(10);m.useEffect(()=>{U()},[_,E,g,b]);const U=async()=>{try{v(!0);const T={page:_,size:E};g&&(T.search=g),b!=="all"&&b&&(T.status=b);const ce=await At.list(T);h(ce.data.items||[]),y(ce.data.total||0)}catch(T){console.error("Failed to fetch shops:",T),h([])}finally{v(!1)}},[D,R]=m.useState(!1),[H,P]=m.useState(null),L=T=>{P(T),R(!0)},re=async()=>{if(H)try{await At.delete(H.id),window.toast?.success("Shop deleted successfully"),U()}catch(T){console.error("Failed to delete shop:",T),window.toast?.error(T.response?.data?.detail||"Failed to delete shop")}finally{R(!1),P(null)}},G={active:x.filter(T=>T.status==="active").length,retail:x.filter(T=>T.shop_type==="retail").length,hospital:x.filter(T=>T.shop_type==="hospital").length},I=[{header:"Shop",key:"name",render:T=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shadow-sm",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:T.name}),e.jsx("div",{className:"text-xs text-slate-500",children:T.phone})]})]})},{header:"Code",key:"code",render:T=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:T.code})},{header:"Type",key:"shop_type",render:T=>e.jsx(Ye,{variant:"secondary",className:"capitalize",children:T.shop_type}),className:"hidden md:table-cell"},{header:"Location",key:"city",render:T=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:T.city}),e.jsx("span",{className:"text-xs text-slate-500",children:T.state})]}),className:"hidden sm:table-cell"},{header:"Warehouse",key:"warehouse_name",render:T=>T.warehouse_name?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"warehouse"}),e.jsx("span",{children:T.warehouse_name})]}):e.jsxs("span",{className:"text-xs text-slate-400 italic flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link_off"}),"Unassigned"]}),className:"hidden lg:table-cell"},{header:"Status",key:"status",render:T=>e.jsx(Ye,{variant:T.status==="active"?"success":T.status==="suspended"?"error":"secondary",children:T.status}),align:"center"},{header:"Actions",key:"id",render:T=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"ghost",onClick:()=>n(`/shops/${T.id}/edit`),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Shop",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),u&&e.jsx(le,{variant:"ghost",onClick:()=>L(T),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",title:"Delete Shop",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(fe,{loading:c,children:[e.jsx(fe.Header,{title:"Medical Shops",subtitle:`Manage ${S} retail pharmacy locations`,actions:e.jsxs(le,{variant:"primary",onClick:()=>n("/shops/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add_business"}),"Add Shop"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Shops",value:S,icon:"storefront",onClick:()=>w("all"),isActive:b==="all"}),e.jsx(Ne,{title:"Active",value:G.active,icon:"check_circle",trend:"up",change:"+2 this month"}),e.jsx(Ne,{title:"Retail",value:G.retail,icon:"shopping_bag",trend:"neutral"}),e.jsx(Ne,{title:"Hospital",value:G.hospital,icon:"local_hospital",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:I,data:x,loading:N,emptyMessage:"No medical shops found in the system.",pagination:{currentPage:_,totalPages:Math.ceil(S/E),onPageChange:k,totalItems:S,pageSize:E,onPageSizeChange:T=>{A(T),k(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Shop List",count:S,searchProps:{value:g,onChange:T=>{f(T),k(1)},placeholder:"Search shops..."},actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Hj,{entityType:"shop",value:b,onChange:T=>{w(T),k(1)},placeholder:"All Status",className:"!w-40 !py-1.5 !text-sm !rounded-lg"})}),embedded:!0})}),e.jsx(qt,{isOpen:D,onClose:()=>R(!1),onConfirm:re,title:"Delete Shop",message:`Are you sure you want to delete "${H?.name}"? This action cannot be undone.`,confirmText:"Delete Shop"})]})}function Fj(){const n=He(),{user:r}=Ke(),i=(r?.role||"user")==="super_admin",[u,x]=m.useState([]),[h,N]=m.useState(!0),[v,g]=m.useState(""),[f,b]=m.useState(""),[w,_]=m.useState(1),[k,S]=m.useState(0),[y,E]=m.useState(10);m.useEffect(()=>{A()},[w,y,v,f]);const A=async()=>{try{N(!0);const I={page:w,size:y};v&&(I.search=v),f&&(I.category=f);const T=await jt.list(I);x(T.data.items||[]),S(T.data.total||0)}catch(I){console.error("Failed to fetch medicines:",I),x([])}finally{N(!1)}},[U,D]=m.useState(!1),[R,H]=m.useState(null),P=I=>{H(I),D(!0)},L=async()=>{if(R)try{await jt.delete(R.id),window.toast?.success("Medicine deleted successfully"),A()}catch(I){console.error("Failed to delete medicine:",I),window.toast?.error(I.response?.data?.detail||"Failed to delete medicine")}finally{D(!1),H(null)}},re={total:k,active:u.filter(I=>I.is_active).length,lowStock:u.filter(I=>I.total_stock<50).length,categories:new Set(u.map(I=>I.category).filter(Boolean)).size||0},G=[{header:"Medicine",key:"name",render:I=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"medication"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:I.name}),e.jsx("div",{className:"text-xs text-slate-500",children:I.generic_name})]})]})},{header:"Mfg",key:"manufacturer",className:"hidden md:table-cell",render:I=>e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-sm",children:I.manufacturer})},{header:"Purchase",key:"purchase_price",align:"right",className:"hidden lg:table-cell",render:I=>e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:["",I.purchase_price?.toFixed(2)]})},{header:"MRP",key:"mrp",align:"right",className:"hidden sm:table-cell",render:I=>e.jsxs("span",{className:"text-slate-500 dark:text-slate-400 line-through text-xs mr-2",children:["",I.mrp.toFixed(2)]})},{header:"Sale Value",key:"selling_price",align:"right",render:I=>e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:["",(I.selling_price||I.mrp).toFixed(2)]})},{header:"GST",key:"gst_rate",align:"center",className:"hidden xl:table-cell",render:I=>e.jsxs(Ye,{variant:"secondary",children:[I.gst_rate,"%"]})},{header:"Stock",key:"total_stock",align:"right",render:I=>e.jsx("span",{className:`font-medium ${I.total_stock<50?"text-red-600 dark:text-red-400":"text-slate-600 dark:text-slate-400"}`,children:I.total_stock.toLocaleString()})},{header:"Status",key:"is_active",align:"center",className:"hidden sm:table-cell",render:I=>e.jsx(Ye,{variant:I.is_active?"success":"secondary",children:I.is_active?"Active":"Inactive"})},{header:"Actions",key:"id",align:"right",render:I=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"ghost",onClick:()=>n(`/medicines/${I.id}/edit`),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Medicine",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),i&&e.jsx(le,{variant:"ghost",onClick:()=>P(I),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",title:"Delete Medicine",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Medicines",subtitle:"Manage your medicine catalog",actions:e.jsxs(le,{variant:"primary",onClick:()=>n("/medicines/add"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Medicine"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Medicines",value:re.total,icon:"medication",onClick:()=>b(""),isActive:f===""}),e.jsx(Ne,{title:"Active",value:re.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Low Stock",value:re.lowStock,icon:"warning",trend:"down",changeType:"down"}),e.jsx(Ne,{title:"Categories",value:re.categories,icon:"category",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:G,data:u,loading:h,emptyMessage:"No medicines found. Add items to your catalog.",pagination:{currentPage:w,totalPages:Math.ceil(k/y),onPageChange:_,totalItems:k,pageSize:y,onPageSizeChange:I=>{E(I),_(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Medicine List",count:k,searchProps:{value:v,onChange:I=>{g(I),_(1)},placeholder:"Search medicines..."},actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Bd,{value:f,onChange:I=>{b(I),_(1)},className:"!w-48 !py-1.5 !text-sm !rounded-lg"})}),embedded:!0})}),e.jsx(qt,{isOpen:U,onClose:()=>D(!1),onConfirm:L,title:"Delete Medicine",message:`Are you sure you want to delete "${R?.name}"? This action cannot be undone.`,confirmText:"Delete Medicine"})]})}function $j(){const{id:n}=Kn(),r=He(),[c,i]=m.useState(!0),[u,x]=m.useState(null),[h,N]=m.useState([]);m.useEffect(()=>{n&&v()},[n]);const v=async()=>{try{i(!0);const[b,w]=await Promise.all([jt.get(n),jt.getBatches(n)]);x(b.data),N(w.data?.batches||[])}catch(b){console.error("Failed to fetch medicine:",b)}finally{i(!1)}};if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})});if(!u)return e.jsx(Zt,{title:"Medicine Not Found",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-300",children:"medication_off"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"The requested medicine could not be found."}),e.jsx(le,{variant:"primary",className:"mt-4",onClick:()=>r("/medicines"),children:"Back to Medicines"})]})});const g=Math.round((1-u.purchase_price/u.mrp)*100),f=h.reduce((b,w)=>b+w.quantity,0);return e.jsx(Zt,{title:u.name,description:`${u.generic_name}  ${u.manufacturer}`,actions:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(le,{variant:"secondary",onClick:()=>r(`/medicines/${u.id}/edit`),children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"edit"}),"Edit"]}),e.jsxs(le,{variant:"primary",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"add"}),"Add Stock"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(Xe,{title:"Basic Information",icon:"medication",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[e.jsx(Ll,{label:"Brand",value:u.brand||"-"}),e.jsx(Ll,{label:"Category",value:u.category}),e.jsx(Ll,{label:"Type",value:u.medicine_type}),e.jsx(Ll,{label:"Strength",value:u.strength||"-"}),e.jsx(Ll,{label:"Pack Size",value:`${u.pack_size} ${u.unit}`}),e.jsx(Ll,{label:"HSN Code",value:u.hsn_code||"-"})]}),u.composition&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Composition"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:u.composition})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[u.is_prescription_required&&e.jsxs(Ye,{variant:"error",className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"prescription"}),"Rx Required"]}),u.is_controlled&&e.jsxs(Ye,{variant:"warning",className:"flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),"Controlled"]})]})]}),e.jsxs(Xe,{title:"Batch Information",icon:"inventory_2",padding:"0",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:["Total Batches: ",h.length]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-xs uppercase text-slate-500 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Batch No."}),e.jsx("th",{className:"px-6 py-3",children:"Mfg Date"}),e.jsx("th",{className:"px-6 py-3",children:"Exp Date"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Qty"}),e.jsx("th",{className:"px-6 py-3 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-500",children:"No batch information available"})}):h.map(b=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-xs font-medium text-primary",children:b.batch_number}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:b.manufacturing_date}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:b.expiry_date}),e.jsx("td",{className:"px-6 py-4 text-right font-medium text-slate-900 dark:text-white",children:b.quantity}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(Ye,{variant:b.is_expired?"error":b.days_to_expiry<60?"warning":"success",children:b.is_expired?"Expired":b.days_to_expiry<60?"Expiring Soon":"Active"})})]},b.id))})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Xe,{title:"Pricing",icon:"payments",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"MRP"}),e.jsxs("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["",u.mrp.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Purchase Price"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["",u.purchase_price.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Profit Margin"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:[g,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"GST Rate"}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:[u.gst_rate,"%"]})]})]})}),e.jsxs(Xe,{title:"Stock Summary",icon:"inventory",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:f}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Units in Stock"})]}),u.storage_conditions&&e.jsx("div",{className:"mt-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-600 dark:text-amber-400 text-[20px]",children:"thermostat"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-amber-800 dark:text-amber-300 mb-0.5",children:"Storage Conditions"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:u.storage_conditions})]})]})})]}),e.jsx(Xe,{title:"Location",icon:"location_on",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Rack Name"}),e.jsx("p",{className:"font-medium",children:u.rack_name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Rack Number"}),e.jsx("p",{className:"font-medium",children:u.rack_number||"-"})]})]})})]})]})})}function Ll({label:n,value:r}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:n}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",title:r,children:r||"-"})]})}function Yj(){const n=He(),{isLoading:r,refresh:c}=dt();m.useEffect(()=>{c()},[c]);const[i,u]=m.useState({name:"",generic_name:"",brand:"",manufacturer:"",medicine_type:"tablet",category:"",composition:"",strength:"",unit:"Strip",pack_size:10,hsn_code:"",gst_rate:12,mrp:0,purchase_price:0,selling_price:0,is_prescription_required:!1,is_controlled:!1,storage_conditions:""}),[x,h]=m.useState(!1),[N,v]=m.useState(""),g=async f=>{if(f.preventDefault(),v(""),!i.name||!i.category||i.mrp<=0){v("Please fill in all required fields (Name, Category, MRP)");return}h(!0);try{await jt.create(i),n("/medicines")}catch(b){console.error("Failed to create medicine:",b);const w=b.response?.data?.detail;if(Array.isArray(w)){const _=w.map(k=>`${k.loc?.slice(1).join(".")||"Unknown field"}: ${k.msg}`);v(_.join(", "))}else typeof w=="string"?v(w):typeof w=="object"&&w?.msg?v(w.msg):v("Failed to create medicine")}finally{h(!1)}};return e.jsx(Zt,{title:"Add New Medicine",description:"Create a new medicine in your catalog",loading:r,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:g,children:e.jsxs(Xe,{className:"space-y-6",children:[N&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:N}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Medicine Name *",value:i.name,onChange:f=>u({...i,name:f.target.value}),placeholder:"Paracetamol 500mg",required:!0}),e.jsx(pe,{label:"Generic Name",value:i.generic_name,onChange:f=>u({...i,generic_name:f.target.value}),placeholder:"Paracetamol"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Brand"}),e.jsx(Cp,{value:i.brand,onChange:f=>u({...i,brand:f}),disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Manufacturer"}),e.jsx(Ep,{value:i.manufacturer,onChange:f=>u({...i,manufacturer:f}),disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx(Bd,{value:i.category,onChange:f=>u({...i,category:f}),required:!0,disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Medicine Type"}),e.jsx(wp,{value:i.medicine_type,onChange:f=>u({...i,medicine_type:f}),disabled:r})]}),e.jsx(pe,{label:"Strength",value:i.strength,onChange:f=>u({...i,strength:f.target.value}),placeholder:"500mg"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Packaging"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit"}),e.jsx(kp,{value:i.unit,onChange:f=>u({...i,unit:f}),disabled:r})]}),e.jsx(pe,{label:"Pack Size",type:"number",value:i.pack_size,onChange:f=>u({...i,pack_size:parseInt(f.target.value)||1}),min:"1"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"HSN Code"}),e.jsx(Lj,{value:i.hsn_code,onChange:(f,b)=>{u(w=>({...w,hsn_code:f,...b!==void 0?{gst_rate:b}:{}}))},disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(pe,{label:"MRP () *",type:"number",step:"0.01",value:i.mrp,onChange:f=>u({...i,mrp:parseFloat(f.target.value)||0}),min:"0",required:!0}),e.jsx(pe,{label:"Purchase Price ()",type:"number",step:"0.01",value:i.purchase_price,onChange:f=>u({...i,purchase_price:parseFloat(f.target.value)||0}),min:"0"}),e.jsx(pe,{label:"Sale Value ()",type:"number",step:"0.01",value:i.selling_price,onChange:f=>u({...i,selling_price:parseFloat(f.target.value)||0}),min:"0"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Rate (%)"}),e.jsx(Sp,{value:i.gst_rate,onChange:f=>u({...i,gst_rate:f}),disabled:r})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Composition"}),e.jsx("textarea",{value:i.composition,onChange:f=>u({...i,composition:f.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2,placeholder:"Active ingredients..."})]}),e.jsx(pe,{label:"Storage Conditions",value:i.storage_conditions,onChange:f=>u({...i,storage_conditions:f.target.value}),placeholder:"Store below 25C"}),e.jsxs("div",{className:"flex gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_prescription_required,onChange:f=>u({...i,is_prescription_required:f.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Prescription Required"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_controlled,onChange:f=>u({...i,is_controlled:f.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Controlled Substance"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",onClick:()=>n("/medicines"),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:x,children:x?"Creating...":"Create Medicine"})]})]})})})})}function Pj(){const n=He(),{id:r}=Kn(),{isLoading:c}=dt(),[i,u]=m.useState({name:"",generic_name:"",brand:"",manufacturer:"",medicine_type:"tablet",category:"",composition:"",strength:"",unit:"Strip",pack_size:10,hsn_code:"",gst_rate:12,mrp:0,purchase_price:0,selling_price:0,is_prescription_required:!1,is_controlled:!1,storage_conditions:"",rack_number:"",rack_name:""}),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState("");m.useEffect(()=>{r&&b(r)},[r]);const b=async _=>{try{h(!0);const S=(await jt.get(_)).data;u({name:S.name||"",generic_name:S.generic_name||"",brand:S.brand||"",manufacturer:S.manufacturer||"",medicine_type:S.medicine_type||"tablet",category:S.category||"",composition:S.composition||"",strength:S.strength||"",unit:S.unit||"Strip",pack_size:S.pack_size||10,hsn_code:S.hsn_code||"",gst_rate:S.gst_rate||12,mrp:S.mrp||0,purchase_price:S.purchase_price||0,selling_price:S.selling_price||0,is_prescription_required:S.is_prescription_required||!1,is_controlled:S.is_controlled||!1,storage_conditions:S.storage_conditions||"",rack_number:S.rack_number||"",rack_name:S.rack_name||""})}catch(k){console.error("Failed to fetch medicine:",k),f("Failed to load medicine details")}finally{h(!1)}},w=async _=>{if(_.preventDefault(),f(""),!i.name||!i.category||i.mrp<=0){f("Please fill in all required fields (Name, Category, MRP)");return}v(!0);try{r&&(await jt.update(r,i),n("/medicines"))}catch(k){console.error("Failed to update medicine:",k),f(k.response?.data?.detail||"Failed to update medicine")}finally{v(!1)}};return e.jsx(Zt,{title:"Edit Medicine",description:`Update information for ${i.name}`,loading:x||c,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:w,children:e.jsxs(Xe,{className:"space-y-6",children:[g&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:g}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Medicine Name *",value:i.name,onChange:_=>u({...i,name:_.target.value}),required:!0}),e.jsx(pe,{label:"Generic Name",value:i.generic_name,onChange:_=>u({...i,generic_name:_.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Brand"}),e.jsx(Cp,{value:i.brand,onChange:_=>u({...i,brand:_}),disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Manufacturer"}),e.jsx(Ep,{value:i.manufacturer,onChange:_=>u({...i,manufacturer:_}),disabled:c})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Category & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx(Bd,{value:i.category,onChange:_=>u({...i,category:_}),required:!0,disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Medicine Type"}),e.jsx(wp,{value:i.medicine_type,onChange:_=>u({...i,medicine_type:_}),disabled:c})]}),e.jsx(pe,{label:"Strength",value:i.strength,onChange:_=>u({...i,strength:_.target.value})})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Packaging"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Unit"}),e.jsx(kp,{value:i.unit,onChange:_=>u({...i,unit:_}),disabled:c})]}),e.jsx(pe,{label:"Pack Size",type:"number",value:i.pack_size,onChange:_=>u({...i,pack_size:parseInt(_.target.value)||1}),min:"1"}),e.jsx(pe,{label:"HSN Code",value:i.hsn_code,onChange:_=>u({...i,hsn_code:_.target.value}),className:"font-mono"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(pe,{label:"MRP () *",type:"number",step:"0.01",value:i.mrp,onChange:_=>u({...i,mrp:parseFloat(_.target.value)||0}),min:"0",required:!0}),e.jsx(pe,{label:"Purchase Price ()",type:"number",step:"0.01",value:i.purchase_price,onChange:_=>u({...i,purchase_price:parseFloat(_.target.value)||0}),min:"0"}),e.jsx(pe,{label:"Sale Value ()",type:"number",step:"0.01",value:i.selling_price,onChange:_=>u({...i,selling_price:parseFloat(_.target.value)||0}),min:"0"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Rate (%)"}),e.jsx(Sp,{value:i.gst_rate,onChange:_=>u({...i,gst_rate:_}),disabled:c})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Storage Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Rack Name",value:i.rack_name,onChange:_=>u({...i,rack_name:_.target.value})}),e.jsx(pe,{label:"Rack Number",value:i.rack_number,onChange:_=>u({...i,rack_number:_.target.value}),placeholder:"12"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Composition"}),e.jsx("textarea",{value:i.composition,onChange:_=>u({...i,composition:_.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2})]}),e.jsx(pe,{label:"Storage Conditions",value:i.storage_conditions,onChange:_=>u({...i,storage_conditions:_.target.value})}),e.jsxs("div",{className:"flex gap-6 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_prescription_required,onChange:_=>u({...i,is_prescription_required:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Prescription Required"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_controlled,onChange:_=>u({...i,is_controlled:_.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Controlled Substance"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",onClick:()=>n("/medicines"),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:N,children:N?"Updating...":"Update Medicine"})]})]})})})})}function Qj(){const{id:n}=Kn(),r=He(),[c,i]=m.useState(!0),[u,x]=m.useState(!1),[h,N]=m.useState(""),[v,g]=m.useState([]),[f,b]=m.useState({name:"",code:"",shop_type:"retail",license_number:"",gst_number:"",phone:"",email:"",address:"",city:"",state:"",pincode:"",warehouse_id:"",status:"active"});m.useEffect(()=>{w(),n&&_()},[n]);const w=async()=>{try{const y=await Et.list({status:"active",size:100});g(y.data.items||[])}catch(y){console.error("Failed to fetch warehouses:",y)}},_=async()=>{try{i(!0);const y=await At.get(n);b(y.data)}catch(y){console.error("Failed to fetch shop:",y),N("Failed to load shop details")}finally{i(!1)}},k=async y=>{if(y.preventDefault(),N(""),!f.name||!f.city||!f.state||!f.license_number){N("Please fill in all required fields");return}try{x(!0),await At.update(n,f),r("/shops")}catch(E){console.error("Failed to update shop:",E),N(E.response?.data?.detail||"Failed to update shop")}finally{x(!1)}},S=(y,E)=>{b(A=>({...A,[y]:E}))};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):e.jsx(Zt,{title:"Edit Medical Shop",description:`Update information for ${f.name}`,children:e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[h&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:h}),e.jsx(Xe,{title:"Basic Information",icon:"storefront",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Shop Name *",value:f.name||"",onChange:y=>S("name",y.target.value),required:!0}),e.jsx(pe,{label:"Shop Code",value:f.code||"",onChange:y=>S("code",y.target.value),className:"font-mono",disabled:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Shop Type"}),e.jsxs("select",{value:f.shop_type||"retail",onChange:y=>S("shop_type",y.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"hospital",children:"Hospital"}),e.jsx("option",{value:"clinic",children:"Clinic"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Linked Warehouse"}),e.jsxs("select",{value:f.warehouse_id||"",onChange:y=>S("warehouse_id",y.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),v.map(y=>e.jsxs("option",{value:y.id,children:[y.name," (",y.code,")"]},y.id))]})]})]})}),e.jsx(Xe,{title:"License & Tax Information",icon:"verified",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Pharmacy License Number *",value:f.license_number||"",onChange:y=>S("license_number",y.target.value),required:!0}),e.jsx(pe,{label:"GST Number",value:f.gst_number||"",onChange:y=>S("gst_number",y.target.value.toUpperCase()),className:"font-mono"})]})}),e.jsx(Xe,{title:"Contact Information",icon:"contact_phone",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Phone Number",type:"tel",value:f.phone||"",onChange:y=>S("phone",y.target.value)}),e.jsx(pe,{label:"Email Address",type:"email",value:f.email||"",onChange:y=>S("email",y.target.value)}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{rows:2,value:f.address||"",onChange:y=>S("address",y.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all"})]}),e.jsx(pe,{label:"City *",value:f.city||"",onChange:y=>S("city",y.target.value),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"State *",value:f.state||"",onChange:y=>S("state",y.target.value),required:!0}),e.jsx(pe,{label:"Pincode",value:f.pincode||"",onChange:y=>S("pincode",y.target.value)})]})]})}),e.jsxs("div",{className:"lg:hidden flex justify-end gap-3 pt-4",children:[e.jsx(le,{variant:"secondary",onClick:()=>r("/shops"),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:u,children:u?"Saving...":"Save Changes"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Xe,{title:"Shop Status",icon:"toggle_on",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Current Status"}),e.jsxs("select",{value:f.status||"active",onChange:y=>S("status",y.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Current operational status of this shop"})]})})}),e.jsx(Xe,{title:"Quick Stats",icon:"analytics",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Medicines"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:f.total_medicines||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Stock Value"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:["",(f.total_stock_value||0).toLocaleString()]})]})]})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Xe,{children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(le,{variant:"primary",type:"submit",loading:u,className:"w-full justify-center",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"save"}),u?"Saving...":"Save Changes"]}),e.jsx(le,{variant:"secondary",onClick:()=>r("/shops"),type:"button",className:"w-full justify-center",children:"Cancel"})]})})})]})]})})})}function Vj(){const n=He(),{isLoading:r,refresh:c}=dt();m.useEffect(()=>{c()},[c]);const[i,u]=m.useState({name:"",code:"",shop_type:"retail",license_number:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",gst_number:"",warehouse_id:""}),[x,h]=m.useState(!1),[N,v]=m.useState(""),g=async f=>{if(f.preventDefault(),v(""),!i.name||!i.code||!i.city||!i.state||!i.license_number||!i.warehouse_id){v("Please fill in all required fields (Name, Code, License Number, Warehouse, City, State)");return}h(!0);try{const b={...i,email:i.email||void 0,gst_number:i.gst_number||void 0,warehouse_id:i.warehouse_id};await At.create(b),n("/shops")}catch(b){console.error("Failed to create shop:",b),v(b.response?.data?.detail||"Failed to create medical shop")}finally{h(!1)}};return e.jsx(Zt,{title:"Add New Medical Shop",description:"Create a new retail pharmacy location",loading:r,children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:g,children:e.jsxs(Xe,{className:"space-y-6",children:[N&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:N}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Shop Name *",value:i.name,onChange:f=>u({...i,name:f.target.value}),placeholder:"GreenCross Pharmacy",required:!0}),e.jsx(pe,{label:"Code *",value:i.code,onChange:f=>u({...i,code:f.target.value.toUpperCase()}),placeholder:"GCP001",className:"font-mono",required:!0})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"License & Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Shop Type"}),e.jsxs("select",{value:i.shop_type,onChange:f=>u({...i,shop_type:f.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:[e.jsx("option",{value:"retail",children:"Retail Pharmacy"}),e.jsx("option",{value:"wholesale",children:"Wholesale"}),e.jsx("option",{value:"hospital",children:"Hospital Pharmacy"}),e.jsx("option",{value:"clinic",children:"Clinic Pharmacy"})]})]}),e.jsx(pe,{label:"License Number *",value:i.license_number,onChange:f=>u({...i,license_number:f.target.value}),placeholder:"PH-2024-001234",required:!0})]})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-5 border border-amber-200 dark:border-amber-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"warehouse"}),"Warehouse Mapping *"]}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400 mb-4",children:"Every medical shop must be linked to a warehouse. This determines the stock source for this shop."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Warehouse *"}),e.jsx(Hd,{value:i.warehouse_id,onChange:f=>u({...i,warehouse_id:f}),required:!0,className:`w-full ${i.warehouse_id?"":"border-amber-300 dark:border-amber-600"}`}),!i.warehouse_id&&e.jsxs("p",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"warning"}),"Warehouse selection is mandatory for supply chain integrity"]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:i.address,onChange:f=>u({...i,address:f.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",rows:2,placeholder:"45 Main Street, Medical Complex"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(pe,{label:"City *",value:i.city,onChange:f=>u({...i,city:f.target.value}),placeholder:"Chennai",required:!0}),e.jsx(pe,{label:"State *",value:i.state,onChange:f=>u({...i,state:f.target.value}),placeholder:"Tamil Nadu",required:!0}),e.jsx(pe,{label:"Pincode",value:i.pincode,onChange:f=>u({...i,pincode:f.target.value}),placeholder:"600001"})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact & Tax Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Phone",type:"tel",value:i.phone,onChange:f=>u({...i,phone:f.target.value}),placeholder:"+91 9876543210"}),e.jsx(pe,{label:"Email",type:"email",value:i.email,onChange:f=>u({...i,email:f.target.value}),placeholder:"shop@example.com"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(pe,{label:"GST Number",value:i.gst_number,onChange:f=>u({...i,gst_number:f.target.value.toUpperCase()}),className:"font-mono",placeholder:"22AAAAA0000A1Z5"})})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",onClick:()=>n("/shops"),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:x,children:x?"Creating...":"Create Shop"})]})]})})})})}function w0(){const[n,r]=m.useState(!0),[c,i]=m.useState(!1),[u,x]=m.useState("en-US"),[h,N]=m.useState("UTC-05:00"),[v,g]=m.useState("MM/DD/YYYY"),[f,b]=m.useState(30),[w,_]=m.useState(7.25),[k,S]=m.useState(!1),[y,E]=m.useState(!0),[A,U]=m.useState(!1),[D,R]=m.useState("helpdesk@pharmacore.io"),[H,P]=m.useState("https://wiki.internal.pharma/support");m.useEffect(()=>{L()},[]);const L=async()=>{try{r(!0);const I=(await zi.get()).data?.settings;I&&(b(I.session_timeout_minutes||30),_(I.default_tax_rate||7.25),S(I.maintenance_mode||!1),E(I.global_inventory_search??!0),U(I.auto_approve_low_risk||!1),R(I.support_email||"helpdesk@pharmacore.io"),P(I.support_url||""))}catch(G){console.error("Failed to fetch settings:",G)}finally{r(!1)}},re=async()=>{try{i(!0),await zi.update({session_timeout_minutes:f,default_tax_rate:w,maintenance_mode:k,global_inventory_search:y,auto_approve_low_risk:A,support_email:D,support_url:H}),alert("Settings saved successfully!")}catch(G){console.error("Failed to save settings:",G),alert("Failed to save settings")}finally{i(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"max-w-5xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight mb-2",children:"Application Settings"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-2xl",children:"Configure global parameters, localization preferences, and system-wide defaults for your pharmacy network."})]}),e.jsxs("button",{onClick:re,disabled:c,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white px-5 py-2.5 rounded-lg font-semibold shadow-lg shadow-primary/20 transition-all active:scale-95 shrink-0 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:c?"sync":"save"}),c?"Saving...":"Save Changes"]})]}),e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-800 mb-8 overflow-x-auto",children:e.jsxs("nav",{className:"flex gap-8 min-w-max",children:[e.jsx("button",{className:"pb-3 border-b-2 border-primary text-primary font-semibold text-sm px-1 transition-colors",children:"General"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Localization"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Security"}),e.jsx("button",{className:"pb-3 border-b-2 border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 font-medium text-sm px-1 transition-colors",children:"Notifications"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"language"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Regional Settings"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Default System Language"}),e.jsxs("select",{value:u,onChange:G=>x(G.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"en-US",children:"English (United States)"}),e.jsx("option",{value:"es",children:"Spanish (Espaol)"}),e.jsx("option",{value:"fr",children:"French (Franais)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Timezone"}),e.jsxs("select",{value:h,onChange:G=>N(G.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"UTC-05:00",children:"UTC-05:00 (EST)"}),e.jsx("option",{value:"UTC-08:00",children:"UTC-08:00 (PST)"}),e.jsx("option",{value:"UTC+00:00",children:"UTC+00:00 (GMT)"}),e.jsx("option",{value:"UTC+05:30",children:"UTC+05:30 (IST)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Date Format"}),e.jsxs("select",{value:v,onChange:G=>g(G.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Currency Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 font-semibold",children:""}),e.jsx("input",{type:"text",value:"INR",readOnly:!0,className:"w-full pl-8 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded",children:"Locked"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Currency is locked to the organization's primary billing region."})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-purple-50 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"tune"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Operational Defaults"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",value:f,onChange:G=>b(parseInt(G.target.value)),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Auto-logout inactive users for security compliance."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Default Tax Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",value:w,onChange:G=>_(parseFloat(G.target.value)),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Pharmacy ID Prefix"}),e.jsx("input",{type:"text",defaultValue:"PHARM-",className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white uppercase"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Fiscal Year Start"}),e.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white",children:[e.jsx("option",{children:"January 1st"}),e.jsx("option",{selected:!0,children:"April 1st"}),e.jsx("option",{children:"October 1st"})]})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-amber-50 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"flag"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Feature Flags"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(xd,{id:"maintenance_mode",title:"Maintenance Mode",description:"Disables access for all non-admin users immediately.",checked:k,onChange:S}),e.jsx(xd,{id:"global_search",title:"Global Inventory Search",description:"Allow pharmacists to search stock across all connected locations.",checked:y,onChange:E}),e.jsx(xd,{id:"auto_approve",title:"Auto-Approve Low Risk Orders",description:"System automatically approves refills for Class C drugs.",checked:A,onChange:U})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"size-8 rounded-full bg-green-50 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"support_agent"})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Support Configuration"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Support Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"mail"}),e.jsx("input",{type:"email",value:D,onChange:G=>R(G.target.value),className:"w-full pl-10 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Internal Help Desk URL"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"link"}),e.jsx("input",{type:"url",value:H,onChange:G=>P(G.target.value),className:"w-full pl-10 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm px-3 py-2.5 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:text-white"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800/50 rounded-lg p-4 flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400 shrink-0",children:"info"}),e.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"These contact details will be displayed in the footer of all employee dashboards and on the login screen."})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-slate-200 dark:border-slate-800 text-center",children:e.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500",children:"System Version v2.4.0  Connected to Neon PostgreSQL"})})]})}function xd({title:n,description:r,checked:c,onChange:i}){return e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 dark:border-slate-800 pt-4 first:border-t-0 first:pt-0",children:[e.jsxs("div",{className:"pr-4",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900 dark:text-white",children:n}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:r})]}),e.jsx("button",{type:"button",role:"switch","aria-checked":c,onClick:()=>i(!c),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${c?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${c?"translate-x-6":"translate-x-1"}`})})]})}function pd(){const[n,r]=m.useState(!0),[c,i]=m.useState(!1),[u,x]=m.useState("PharmaAdmin Central"),[h,N]=m.useState(!1),[v,g]=m.useState(!0),[f,b]=m.useState("high"),[w,_]=m.useState(30),[k,S]=m.useState(15),[y,E]=m.useState(60);m.useEffect(()=>{A()},[]);const A=async()=>{try{r(!0);const R=(await zi.get()).data?.settings;R&&(x(R.app_name||"PharmaAdmin Central"),N(R.maintenance_mode||!1),_(R.session_timeout_minutes||30),S(R.low_stock_threshold||15),E(R.expiry_warning_days||60))}catch(D){console.error("Failed to fetch settings:",D)}finally{r(!1)}},U=async()=>{try{i(!0),await zi.update({app_name:u,maintenance_mode:h,session_timeout_minutes:w,low_stock_threshold:k,expiry_warning_days:y}),alert("Settings saved successfully!")}catch(D){console.error("Failed to save settings:",D),alert("Failed to save settings")}finally{i(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-1 overflow-y-auto bg-background-light dark:bg-background-dark scroll-smooth",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6 md:p-10 pb-24",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 dark:text-white tracking-tight mb-2",children:"System Settings"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base max-w-2xl",children:"Configure global parameters, security protocols, and integration rules for the entire Pharmacy Management Platform."})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg text-sm font-bold text-slate-900 dark:text-white transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"history"}),"View Change Logs"]})]}),e.jsx("div",{className:"sticky top-0 z-10 bg-background-light dark:bg-background-dark pt-2 pb-4 mb-6",children:e.jsxs("div",{className:"flex overflow-x-auto border-b border-slate-300 dark:border-slate-700 gap-8",children:[e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-primary text-primary font-bold text-sm",children:"General Preferences"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Security Policies"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Inventory Rules"}),e.jsx("button",{className:"whitespace-nowrap pb-3 px-1 border-b-[3px] border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white font-medium text-sm transition-colors",children:"Integrations & API"})]})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"tune"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"General Preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Platform Name"}),e.jsx("input",{type:"text",value:u,onChange:D=>x(D.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-500",children:"This name will appear in emails and dashboard headers."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Default Timezone"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{children:"(GMT+05:30) India Standard Time"}),e.jsx("option",{children:"(GMT-05:00) Eastern Time (US & Canada)"}),e.jsx("option",{children:"(GMT+00:00) London"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Date Format"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{children:"DD/MM/YYYY (e.g. 31/12/2024)"}),e.jsx("option",{children:"MM/DD/YYYY (e.g. 12/31/2024)"}),e.jsx("option",{children:"YYYY-MM-DD (e.g. 2024-12-31)"})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 pt-2 border-t border-slate-200 dark:border-slate-800 mt-2",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Maintenance Mode"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Prevent non-admin users from accessing the system during updates."})]}),e.jsx("button",{onClick:()=>N(!h),className:`relative w-11 h-6 rounded-full transition-colors ${h?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white transition-transform ${h?"translate-x-5":""}`})})]})})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"shield"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Security Policies"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex flex-col max-w-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Two-Factor Authentication (2FA)"}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"RECOMMENDED"})]}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:"Enforce 2FA for all administrator and manager level accounts across the network."})]}),e.jsx("button",{onClick:()=>g(!v),className:`relative w-11 h-6 rounded-full transition-colors ${v?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white transition-transform ${v?"translate-x-5":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Password Complexity"}),e.jsxs("select",{value:f,onChange:D=>b(D.target.value),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"high",children:"High (Min 12 chars, symbol, number, upper/lowercase)"}),e.jsx("option",{value:"medium",children:"Medium (Min 8 chars, number, upper/lowercase)"}),e.jsx("option",{value:"low",children:"Low (Min 6 chars)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-slate-200 mb-2",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",value:w,onChange:D=>_(parseInt(D.target.value)),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2.5 text-sm focus:border-primary focus:ring-1 focus:ring-primary"})]})]})]})]}),e.jsxs("section",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"inventory_2"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Inventory Rules"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("label",{className:"flex items-center justify-between text-sm font-bold text-slate-900 dark:text-white mb-4",children:["Low Stock Threshold Alert",e.jsx("span",{className:"material-symbols-outlined text-slate-500 text-[18px] cursor-help",title:"Triggers an alert when stock falls below this percentage of max capacity",children:"info"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"50",value:k,onChange:D=>S(parseInt(D.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-primary"}),e.jsxs("span",{className:"min-w-[3rem] text-center font-mono font-bold text-primary bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded",children:[k,"%"]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:["Trigger automated re-order suggestions when stock reaches ",k,"% of maximum capacity."]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("label",{className:"flex items-center justify-between text-sm font-bold text-slate-900 dark:text-white mb-4",children:"Drug Expiry Warning Window"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",value:y,onChange:D=>E(parseInt(D.target.value)),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-4 py-2 text-sm focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Days before expiry"})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3",children:['Items will be flagged as "Near Expiry" on dashboards ',y," days before their expiration date."]})]})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 w-full bg-surface-light dark:bg-surface-dark border-t border-slate-200 dark:border-slate-800 p-4 md:px-10 flex items-center justify-between z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"text-sm text-slate-500 hidden md:block",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"Database:"})," Connected to Neon PostgreSQL"]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-end",children:[e.jsx("button",{className:"px-6 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-900 dark:text-slate-200 font-bold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Discard"}),e.jsxs("button",{onClick:U,disabled:c,className:"px-6 py-2.5 rounded-lg bg-primary hover:bg-blue-700 text-white font-bold text-sm shadow-md transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:c?"sync":"save"}),c?"Saving...":"Save Changes"]})]})]})]})}function Xj(){const[n,r]=m.useState("current-month"),[c,i]=m.useState("all"),[u,x]=m.useState(!0),[h,N]=m.useState([]),[v,g]=m.useState({totalExpiring:0,totalExpired:0,totalLoss:0});m.useEffect(()=>{f()},[n,c]);const f=async()=>{try{x(!0);const _=(await Xn.getExpiry({days_ahead:60})).data;N(_.items||[]),g({totalExpiring:_.total_expiring_items||0,totalExpired:_.total_expired_items||0,totalLoss:_.total_loss_value||0})}catch(w){console.error("Failed to fetch expiry data:",w),N([]),g({totalExpiring:0,totalExpired:0,totalLoss:0})}finally{x(!1)}},b=[{label:"Total Expired Items",value:v.totalExpired.toString(),icon:"inventory_2",color:"red"},{label:"Total Expiring Soon",value:v.totalExpiring.toString(),icon:"schedule",color:"amber"},{label:"Estimated Loss",value:`${v.totalLoss.toLocaleString()}`,icon:"trending_down",color:"red"}];return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Expiry & Loss Report"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Real-time expiry data from database"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-semibold text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"refresh"}),"Refresh"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-primary text-white text-sm font-semibold hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"download"}),"Export Report"]})]})]}),e.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 p-4 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Period"}),e.jsxs("select",{value:n,onChange:w=>r(w.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm px-3 py-2 focus:ring-1 focus:ring-primary",children:[e.jsx("option",{value:"current-month",children:"Current Month"}),e.jsx("option",{value:"last-month",children:"Last Month"}),e.jsx("option",{value:"current-quarter",children:"Current Quarter"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Location"}),e.jsx("select",{value:c,onChange:w=>i(w.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm px-3 py-2 focus:ring-1 focus:ring-primary",children:e.jsx("option",{value:"all",children:"All Locations"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:b.map((w,_)=>e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:w.label}),e.jsx("span",{className:`material-symbols-outlined text-${w.color}-500`,children:w.icon})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-2",children:w.value})]},_))}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Expiry Details"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:["Expired: ",h.filter(w=>w.status==="expired").length]}),e.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:["Expiring Soon: ",h.filter(w=>w.status==="expiring").length]})]})]}),u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):h.length===0?e.jsxs("div",{className:"py-16 text-center text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl mb-3 text-green-500",children:"check_circle"}),e.jsx("p",{className:"text-lg font-medium",children:"No expiring items"}),e.jsx("p",{className:"text-sm",children:"All medicines are within safe expiry dates"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-xs uppercase text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Medicine"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Batch No."}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Expiry Date"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Unit Cost"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Total Loss"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:h.map((w,_)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:w.name}),w.brand&&e.jsx("div",{className:"text-xs text-slate-500",children:w.brand})]}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400 font-mono text-xs",children:w.batch_number}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:w.expiry_date}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-900 dark:text-white font-medium",children:w.quantity}),e.jsxs("td",{className:"px-6 py-4 text-right text-slate-600 dark:text-slate-400",children:["",w.unit_cost?.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-red-600 dark:text-red-400",children:["",w.total_loss?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-center",children:w.status==="expired"?e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Expired"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:"Expiring"})})]},_))})]})}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-slate-500",children:["Showing ",h.length," items from database"]})})]})]})}function Si(){const[n,r]=m.useState("daily"),[c,i]=m.useState([]),[u,x]=m.useState(""),[h,N]=m.useState(new Date().toISOString().split("T")[0]),[v,g]=m.useState(new Date().getMonth()+1),[f,b]=m.useState(new Date().getFullYear()),[w,_]=m.useState(""),[k,S]=m.useState(""),[y,E]=m.useState(null),[A,U]=m.useState([]),[D,R]=m.useState(!1);m.useEffect(()=>{H()},[]),m.useEffect(()=>{P()},[n,u,h,v,f]);const H=async()=>{try{const G=await At.list({size:500});i(G.data.items||G.data)}catch(G){console.error("Error loading shops:",G)}},P=async()=>{R(!0);try{let G;n==="daily"?G=await Xn.getDailySales({shop_id:u||void 0,date:h}):n==="monthly"?G=await Xn.getMonthlySales({shop_id:u||void 0,month:v,year:f}):G=await Xn.getSales({shop_id:u||void 0,date_from:w,date_to:k}),E(G.data),G.data.daily_breakdown&&U(G.data.daily_breakdown)}catch(G){console.error("Error loading report:",G)}finally{R(!1)}},L=G=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(G),re=()=>{const G=["Metric","Value"],I=[["Total Sales",L(y?.total_sales||0)],["Total Invoices",y?.total_invoices||0],["Items Sold",y?.total_items_sold||0],["Average Order Value",L(y?.average_order_value||0)]],T=[G,...I].map(z=>z.join(",")).join(`
`),ce=new Blob([T],{type:"text/csv"}),oe=URL.createObjectURL(ce),ye=document.createElement("a");ye.href=oe,ye.download=`sales-report-${new Date().toISOString().split("T")[0]}.csv`,ye.click()};return e.jsxs("div",{className:"sales-reports",children:[e.jsx("style",{children:`
                .sales-reports {
                    padding: 24px;
                    max-width: 1400px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .btn-export {
                    padding: 10px 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .btn-export:hover {
                    background: #059669;
                }
                .filters-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 20px;
                    margin-bottom: 24px;
                }
                .filters-row {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    align-items: flex-end;
                }
                .filter-group {
                    display: flex;
                    flex-direction: column;
                    gap: 6px;
                }
                .filter-group label {
                    font-size: 13px;
                    font-weight: 500;
                    color: #666;
                }
                .filter-group select,
                .filter-group input {
                    padding: 10px 12px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                    min-width: 160px;
                }
                .report-tabs {
                    display: flex;
                    gap: 8px;
                }
                .tab-btn {
                    padding: 10px 20px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.2s;
                }
                .tab-btn.active {
                    background: #4a6cf7;
                    color: white;
                    border-color: #4a6cf7;
                }
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 20px;
                    margin-bottom: 24px;
                }
                @media (max-width: 1024px) {
                    .stats-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }
                @media (max-width: 640px) {
                    .stats-grid {
                        grid-template-columns: 1fr;
                    }
                }
                .stat-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .stat-card.primary {
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    color: white;
                }
                .stat-icon {
                    width: 48px;
                    height: 48px;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    margin-bottom: 16px;
                }
                .stat-card:not(.primary) .stat-icon {
                    background: #f0f4ff;
                }
                .stat-card.primary .stat-icon {
                    background: rgba(255,255,255,0.2);
                }
                .stat-value {
                    font-size: 28px;
                    font-weight: 700;
                    margin-bottom: 4px;
                }
                .stat-label {
                    font-size: 14px;
                    opacity: 0.8;
                }
                .chart-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .chart-title {
                    font-size: 18px;
                    font-weight: 600;
                    margin: 0 0 20px 0;
                    color: #1a1a2e;
                }
                .chart-bars {
                    display: flex;
                    gap: 8px;
                    align-items: flex-end;
                    height: 200px;
                    padding-top: 20px;
                }
                .chart-bar-wrapper {
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 8px;
                }
                .chart-bar {
                    width: 100%;
                    max-width: 40px;
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    border-radius: 4px 4px 0 0;
                    min-height: 4px;
                    transition: height 0.3s ease;
                }
                .chart-label {
                    font-size: 11px;
                    color: #666;
                    text-align: center;
                }
                .loading-overlay {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Sales Reports"}),e.jsx("button",{className:"btn-export",onClick:re,children:"Export CSV"})]}),e.jsx("div",{className:"filters-card",children:e.jsxs("div",{className:"filters-row",children:[e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-btn ${n==="daily"?"active":""}`,onClick:()=>r("daily"),children:"Daily"}),e.jsx("button",{className:`tab-btn ${n==="monthly"?"active":""}`,onClick:()=>r("monthly"),children:"Monthly"}),e.jsx("button",{className:`tab-btn ${n==="custom"?"active":""}`,onClick:()=>r("custom"),children:"Custom Range"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Shop"}),e.jsxs("select",{value:u,onChange:G=>x(G.target.value),children:[e.jsx("option",{value:"",children:"All Shops"}),c.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]}),n==="daily"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:h,onChange:G=>N(G.target.value)})]}),n==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Month"}),e.jsx("select",{value:v,onChange:G=>g(Number(G.target.value)),children:Array.from({length:12},(G,I)=>e.jsx("option",{value:I+1,children:new Date(2e3,I).toLocaleString("default",{month:"long"})},I+1))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Year"}),e.jsx("select",{value:f,onChange:G=>b(Number(G.target.value)),children:Array.from({length:5},(G,I)=>e.jsx("option",{value:new Date().getFullYear()-I,children:new Date().getFullYear()-I},I))})]})]}),n==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From"}),e.jsx("input",{type:"date",value:w,onChange:G=>_(G.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To"}),e.jsx("input",{type:"date",value:k,onChange:G=>S(G.target.value)})]})]})]})}),D?e.jsx("div",{className:"loading-overlay",children:"Loading report data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:L(y?.total_sales||0)}),e.jsx("div",{className:"stat-label",children:"Total Sales"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:y?.total_invoices||0}),e.jsx("div",{className:"stat-label",children:"Invoices"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:y?.total_items_sold||0}),e.jsx("div",{className:"stat-label",children:"Items Sold"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:L(y?.average_order_value||0)}),e.jsx("div",{className:"stat-label",children:"Avg Order Value"})]})]}),A.length>0&&e.jsxs("div",{className:"chart-card",children:[e.jsx("h3",{className:"chart-title",children:"Daily Breakdown"}),e.jsx("div",{className:"chart-bars",children:A.slice(0,14).map((G,I)=>{const T=Math.max(...A.map(oe=>oe.sales)),ce=T>0?G.sales/T*180:4;return e.jsxs("div",{className:"chart-bar-wrapper",children:[e.jsx("div",{className:"chart-bar",style:{height:`${ce}px`},title:`${L(G.sales)}`}),e.jsx("span",{className:"chart-label",children:new Date(G.date).getDate()})]},I)})})]})]})]})}function Zj(){const[n,r]=m.useState("summary"),[c,i]=m.useState(new Date().getMonth()+1),[u,x]=m.useState(new Date().getFullYear()),[h,N]=m.useState(null),[v,g]=m.useState(null),[f,b]=m.useState(!0);m.useEffect(()=>{w()},[n,c,u]);const w=async()=>{b(!0);try{if(n==="summary"){const y=await Q.get("/tax/summary",{params:{month:c,year:u}});N(y.data)}else if(n==="gst"){const y=await Q.get("/tax/gst",{params:{month:c,year:u}});g(y.data)}}catch(y){console.error("Error loading tax report:",y)}finally{b(!1)}},_=y=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(y),k=y=>new Date(2e3,y-1).toLocaleString("default",{month:"long"}),S=()=>{let y=[],E="";n==="summary"&&h?(y=[["Tax Summary Report",`${k(c)} ${u}`],[""],["Metric","Amount"],["Total Sales",_(h.total_sales)],["Net Taxable Value",_(h.net_taxable_value)],["Total Tax Collected",_(h.total_tax_collected)],["GST Amount",_(h.gst_amount)],["VAT Amount",_(h.vat_amount)]],E=`tax-summary-${u}-${c}.csv`):n==="gst"&&v&&(y=[["GST Report",v.period],[""],["Component","Amount"],["Taxable Value",_(v.total_taxable_value)],["CGST",_(v.cgst_amount)],["SGST",_(v.sgst_amount)],["IGST",_(v.igst_amount)],["Total GST",_(v.total_gst)],["Invoice Count",v.invoice_count.toString()]],E=`gst-report-${u}-${c}.csv`);const A=y.map(H=>H.join(",")).join(`
`),U=new Blob([A],{type:"text/csv"}),D=URL.createObjectURL(U),R=document.createElement("a");R.href=D,R.download=E,R.click()};return e.jsxs("div",{className:"tax-reports",children:[e.jsx("style",{children:`
                .tax-reports {
                    padding: 24px;
                    max-width: 1200px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-header h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .btn-export {
                    padding: 10px 20px;
                    background: #10b981;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .btn-export:hover {
                    background: #059669;
                }
                .controls-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 20px;
                    margin-bottom: 24px;
                }
                .controls-row {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    align-items: center;
                }
                .report-tabs {
                    display: flex;
                    gap: 8px;
                }
                .tab-btn {
                    padding: 10px 20px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.2s;
                }
                .tab-btn.active {
                    background: #4a6cf7;
                    color: white;
                    border-color: #4a6cf7;
                }
                .period-selector {
                    display: flex;
                    gap: 8px;
                    margin-left: auto;
                }
                .period-selector select {
                    padding: 10px 16px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                }
                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin-bottom: 24px;
                }
                .stat-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .stat-card.primary {
                    background: linear-gradient(135deg, #4a6cf7, #6366f1);
                    color: white;
                }
                .stat-card.success {
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: white;
                }
                .stat-card.warning {
                    background: linear-gradient(135deg, #f59e0b, #d97706);
                    color: white;
                }
                .stat-icon {
                    font-size: 28px;
                    margin-bottom: 12px;
                }
                .stat-value {
                    font-size: 24px;
                    font-weight: 700;
                    margin-bottom: 4px;
                }
                .stat-label {
                    font-size: 13px;
                    opacity: 0.8;
                }
                .gst-breakdown {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px;
                }
                .breakdown-title {
                    font-size: 18px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0 0 20px 0;
                    padding-bottom: 12px;
                    border-bottom: 1px solid #eee;
                }
                .breakdown-grid {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 24px;
                }
                @media (max-width: 768px) {
                    .breakdown-grid {
                        grid-template-columns: repeat(2, 1fr);
                    }
                }
                .breakdown-item {
                    text-align: center;
                    padding: 20px;
                    background: #f8f9ff;
                    border-radius: 12px;
                }
                .breakdown-value {
                    font-size: 24px;
                    font-weight: 700;
                    color: #4a6cf7;
                    margin-bottom: 8px;
                }
                .breakdown-label {
                    font-size: 14px;
                    color: #666;
                    font-weight: 500;
                }
                .info-card {
                    background: #f0f8ff;
                    border: 1px solid #bfdbfe;
                    border-radius: 12px;
                    padding: 16px 20px;
                    margin-top: 24px;
                    display: flex;
                    gap: 12px;
                    align-items: flex-start;
                }
                .info-card-icon {
                    font-size: 20px;
                }
                .info-card-content h4 {
                    margin: 0 0 4px 0;
                    color: #1e40af;
                }
                .info-card-content p {
                    margin: 0;
                    color: #3b82f6;
                    font-size: 14px;
                }
                .loading {
                    text-align: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Tax Reports"}),e.jsx("button",{className:"btn-export",onClick:S,children:"Export for CA Filing"})]}),e.jsx("div",{className:"controls-card",children:e.jsxs("div",{className:"controls-row",children:[e.jsxs("div",{className:"report-tabs",children:[e.jsx("button",{className:`tab-btn ${n==="summary"?"active":""}`,onClick:()=>r("summary"),children:"Summary"}),e.jsx("button",{className:`tab-btn ${n==="gst"?"active":""}`,onClick:()=>r("gst"),children:"GST Report"}),e.jsx("button",{className:`tab-btn ${n==="vat"?"active":""}`,onClick:()=>r("vat"),children:"VAT Report"})]}),e.jsxs("div",{className:"period-selector",children:[e.jsx("select",{value:c,onChange:y=>i(Number(y.target.value)),children:Array.from({length:12},(y,E)=>e.jsx("option",{value:E+1,children:k(E+1)},E+1))}),e.jsx("select",{value:u,onChange:y=>x(Number(y.target.value)),children:Array.from({length:5},(y,E)=>e.jsx("option",{value:new Date().getFullYear()-E,children:new Date().getFullYear()-E},E))})]})]})}),f?e.jsx("div",{className:"loading",children:"Loading tax data..."}):n==="summary"&&h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:_(h.total_sales)}),e.jsx("div",{className:"stat-label",children:"Total Sales"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:_(h.net_taxable_value)}),e.jsx("div",{className:"stat-label",children:"Taxable Value"})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:_(h.total_tax_collected)}),e.jsx("div",{className:"stat-label",children:"Total Tax Collected"})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:_(h.gst_amount)}),e.jsx("div",{className:"stat-label",children:"GST Liability"})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("span",{className:"info-card-icon",children:""}),e.jsxs("div",{className:"info-card-content",children:[e.jsx("h4",{children:"Tax Filing Reminder"}),e.jsx("p",{children:"GST returns (GSTR-1, GSTR-3B) must be filed by the 11th and 20th of each month respectively."})]})]})]}):n==="gst"&&v?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon"}),e.jsx("div",{className:"stat-value",children:_(v.total_taxable_value)}),e.jsx("div",{className:"stat-label",children:"Taxable Value"})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:_(v.total_gst)}),e.jsx("div",{className:"stat-label",children:"Total GST"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:""}),e.jsx("div",{className:"stat-value",children:v.invoice_count}),e.jsx("div",{className:"stat-label",children:"Invoices"})]})]}),e.jsxs("div",{className:"gst-breakdown",children:[e.jsx("h3",{className:"breakdown-title",children:"GST Component Breakdown"}),e.jsxs("div",{className:"breakdown-grid",children:[e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:_(v.cgst_amount)}),e.jsx("div",{className:"breakdown-label",children:"CGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:_(v.sgst_amount)}),e.jsx("div",{className:"breakdown-label",children:"SGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",children:_(v.igst_amount)}),e.jsx("div",{className:"breakdown-label",children:"IGST"})]}),e.jsxs("div",{className:"breakdown-item",children:[e.jsx("div",{className:"breakdown-value",style:{color:"#10b981"},children:_(v.total_gst)}),e.jsx("div",{className:"breakdown-label",children:"Total Payable"})]})]})]})]}):e.jsx("div",{className:"loading",children:"Select a report type to view data"})]})}function Ij(){const[n,r]=m.useState(""),[c,i]=m.useState(!1),[u,x]=m.useState(null),[h,N]=m.useState([]),[v,g]=m.useState([]),[f,b]=m.useState(!1);m.useEffect(()=>{w()},[]);const w=async()=>{try{b(!0);const y=await Xs.getReturns({page:1,size:10});g(y.data?.data?.items||y.data?.items||[])}catch(y){console.error("Failed to fetch recent returns:",y),g([])}finally{b(!1)}},_=async()=>{if(!n.trim()){Ve.error("Please enter an invoice number");return}try{i(!0);const y=await Xs.get(n),E=y.data?.data||y.data;if(!E){Ve.error("Invoice not found");return}x(E);const A=await Xs.getItems(n),U=A.data?.data?.items||A.data?.items||[];N(U),U.length===0&&Ve.info("No items found for this invoice")}catch(y){console.error("Invoice not found:",y),Ve.error(y.response?.data?.detail||"Invoice not found"),x(null),N([])}finally{i(!1)}},k=async()=>{if(h.length===0){Ve.error("No items to return");return}try{i(!0),await Xs.processReturn(u.id,{items:h.map(y=>({medicine_id:y.medicine_id,quantity:y.quantity,reason:y.reason||"Customer return"})),refund_method:"cash"}),Ve.success("Return processed successfully!"),x(null),N([]),r(""),w()}catch(y){console.error("Failed to process return:",y),Ve.error(y.response?.data?.detail||"Failed to process return")}finally{i(!1)}},S=h.reduce((y,E)=>y+(E.refund_amount||E.unit_price*E.quantity),0);return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex flex-wrap items-end justify-between gap-4 mb-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"storefront"}),e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Return / Refund"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Process customer returns and issue refunds"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"receipt_long"}),"New Return Request"]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"Original Invoice Number"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"search"}),e.jsx("input",{type:"text",value:n,onChange:y=>r(y.target.value),placeholder:"Enter invoice number (e.g., INV-2024-0001)",className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary/20 focus:border-primary",onKeyPress:y=>y.key==="Enter"&&_()})]}),e.jsx("button",{onClick:_,disabled:c,className:"px-5 py-2.5 rounded-lg bg-primary text-white font-semibold text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",children:c?"Searching...":"Find Invoice"})]})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Invoice"}),e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:u.id||u.invoice_number})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Date"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:u.date||new Date(u.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-sm",children:(u.customer_name||"C").split(" ").map(y=>y[0]).join("")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:u.customer_name||"Walk-in Customer"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:u.customer_phone||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 dark:text-white mb-3",children:"Select Items to Return"}),h.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"inventory_2"}),e.jsx("p",{children:"No items found for this invoice"})]}):e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-xs uppercase text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-primary focus:ring-primary"})}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold",children:"Refund"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:h.map(y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-slate-300 text-primary focus:ring-primary"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:y.medicine_name}),e.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400 font-mono text-xs",children:y.batch_number}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"number",defaultValue:y.quantity,min:"1",className:"w-16 text-center rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2 py-1 text-sm"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{className:"w-full rounded border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-2 py-1 text-sm text-slate-700 dark:text-slate-300",children:[e.jsx("option",{children:"Wrong medication"}),e.jsx("option",{children:"Damaged packaging"}),e.jsx("option",{children:"Expired product"}),e.jsx("option",{children:"Customer changed mind"})]})}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-slate-900 dark:text-white",children:["",(y.refund_amount||y.unit_price*y.quantity).toFixed(2)]})]},y.id))})]})})]}),h.length>0&&e.jsxs("div",{className:"bg-primary/5 dark:bg-primary/10 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Refund Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["",S.toFixed(2)]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("select",{className:"rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 px-3 py-2 text-sm",children:[e.jsx("option",{children:"Cash Refund"}),e.jsx("option",{children:"Store Credit"}),e.jsx("option",{children:"Original Payment Method"})]})})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{x(null),N([])},className:"px-5 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 font-semibold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:k,disabled:c||h.length===0,className:"px-5 py-2.5 rounded-lg bg-primary text-white font-semibold text-sm hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check_circle"}),c?"Processing...":"Process Return"]})]})]})]})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm h-fit",children:[e.jsx("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"history"}),"Recent Returns"]})}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:f?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Loading..."})]}):v.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"assignment_return"}),e.jsx("p",{children:"No recent returns"})]}):v.map(y=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-mono text-sm font-medium text-primary",children:y.return_number||y.id}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${y.status==="completed"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"}`,children:y.status})]}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:y.customer_name||"Walk-in Customer"}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:y.created_at?new Date(y.created_at).toLocaleDateString():"N/A"}),e.jsxs("span",{children:[y.items_count||0," items  ",(y.refund_amount||0).toFixed(2)]})]})]},y.id))}),e.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 text-center",children:e.jsx("button",{className:"text-sm text-primary font-medium hover:text-blue-700",children:"View All Returns"})})]})]})]})}function Kj(){const{user:n}=Ke(),r=n?.role||"",[c,i]=m.useState([]),[u,x]=m.useState(!0),[h,N]=m.useState(""),[v,g]=m.useState(!1),[f,b]=m.useState(null),[w,_]=m.useState(!1),[k,S]=m.useState("active"),[y,E]=m.useState("all"),[A,U]=m.useState(1),[D,R]=m.useState(0),[H,P]=m.useState(10),[L,re]=m.useState({email:"",full_name:"",phone:"",role:"",role_id:"",password:"",assigned_warehouse_id:"",assigned_shop_id:""}),[G,I]=m.useState([]),[T,ce]=m.useState([]),[oe,ye]=m.useState([]);m.useEffect(()=>{$(),z()},[k,y,A,H]);const z=async()=>{try{const[W,ge,xe]=await Promise.all([Et.list({size:500}),At.list({size:500}),Vn.listAssignable()]);I(W.data?.items||W.data||[]),ce(ge.data?.items||ge.data||[]);const _e=xe.data?.roles||xe.data?.items||(Array.isArray(xe.data)?xe.data:[]);ye(_e.filter(Je=>Je.name!=="super_admin"))}catch(W){console.error("Failed to fetch entities:",W),ye([])}},$=async()=>{try{x(!0);const W={search:h,page:A,size:H};k!=="all"&&(W.is_active=k==="active"),y!=="all"&&(W.role=y);const ge=await Qn.list(W);i(ge.data?.items||ge.data?.data||ge.data||[]),R(ge.data?.total||(ge.data?.items||ge.data?.data||ge.data||[]).length)}catch(W){console.error("Failed to fetch users:",W)}finally{x(!1)}},te=()=>{b(null),re({email:"",full_name:"",phone:"",role:"",role_id:"",password:"",assigned_warehouse_id:"",assigned_shop_id:""}),g(!0)},me=W=>{b(W);const ge=oe.find(xe=>xe.name===W.role);re({email:W.email||"",full_name:W.full_name||"",phone:W.phone||"",role:W.role,role_id:ge?.id||"",password:"",assigned_warehouse_id:W.assigned_warehouse_id||"",assigned_shop_id:W.assigned_shop_id||""}),g(!0)},B=async W=>{W.preventDefault();try{console.log("Submitting user data:",L),f?(await Qn.update(f.id,L),window.toast?.success("User updated successfully")):(await Qn.create(L),window.toast?.success("User created successfully")),g(!1),$()}catch(ge){console.error("Failed to save user:",ge),console.error("Error response:",ge.response?.data),console.error("Error status:",ge.response?.status);const xe=ge.response?.data?.detail?Array.isArray(ge.response.data.detail)?ge.response.data.detail.map(_e=>`${_e.loc.join(".")}: ${_e.msg}`).join(", "):ge.response.data.detail:ge.message||"Failed to save user";window.toast?.error(xe)}},[p,M]=m.useState(!1),[ne,Y]=m.useState(null),Z=W=>{Y(W),M(!0)},ve=async()=>{if(ne)try{await Qn.delete(ne.id),window.toast?.success("User deleted successfully"),$()}catch(W){console.error("Failed to delete user:",W);const ge=W.response?.data?.detail||"Failed to delete user";window.toast?.error(ge)}finally{M(!1),Y(null)}},be=W=>{switch(W){case"super_admin":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300";case"admin":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";case"manager":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}},De={total:D||c.length,active:c.filter(W=>W.is_active).length,inactive:c.filter(W=>!W.is_active).length,admins:c.filter(W=>W.role==="admin"||W.role==="super_admin").length},ae=(W,ge="all")=>{S(W),E(ge),U(1)},se=[{header:"User",key:"full_name",render:W=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white text-sm font-medium shadow-sm",children:W.full_name?.charAt(0)||W.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:W.full_name||"N/A"}),e.jsx("div",{className:"text-xs text-slate-500",children:W.email})]})]})},{header:"Role",key:"role",render:W=>e.jsx("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-[11px] font-medium uppercase tracking-wide ${be(W.role)}`,children:W.role.replace("_"," ")})},{header:"Location",key:"assigned_shop_id",render:W=>{if(W.role==="super_admin")return e.jsx("span",{className:"text-slate-400 italic",children:"Global Access"});if(W.assigned_shop_id){const ge=T.find(xe=>xe.id===W.assigned_shop_id);return e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-blue-500",children:"store"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",title:ge?.name,children:ge?.name||"Unknown Shop"})]})}if(W.assigned_warehouse_id){const ge=G.find(xe=>xe.id===W.assigned_warehouse_id);return e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-amber-500",children:"warehouse"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[150px]",title:ge?.name,children:ge?.name||"Unknown Warehouse"})]})}return e.jsx("span",{className:"text-slate-400",children:"-"})}},{header:"Status",key:"is_active",render:W=>e.jsx(Ye,{variant:W.is_active?"success":"error",children:W.is_active?"Active":"Inactive"}),align:"center"},{header:"Last Login",key:"last_login",render:W=>e.jsx("span",{className:"text-slate-500",children:W.last_login?new Date(W.last_login).toLocaleDateString():"Never"})},{header:"Actions",key:"id",align:"right",render:W=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"secondary",onClick:()=>me(W),className:"!p-1.5 h-8 w-8 justify-center",title:"Edit User",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r==="super_admin"&&e.jsx(le,{variant:"secondary",onClick:()=>Z(W),className:"!p-1.5 h-8 w-8 justify-center text-red-600 hover:bg-red-50 hover:text-red-700",title:"Delete User",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"User Management",subtitle:`Manage ${De.total} users across your organization`,actions:e.jsxs(le,{variant:"primary",onClick:te,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"person_add"}),"Add User"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Users",value:De.total,icon:"groups",onClick:()=>ae("all"),isActive:k==="all"&&y==="all"}),e.jsx(Ne,{title:"Active Users",value:De.active,icon:"check_circle",onClick:()=>ae("active"),isActive:k==="active",change:(De.active/De.total*100).toFixed(0)+"%",changeType:"up"}),e.jsx(Ne,{title:"Inactive Users",value:De.inactive,icon:"cancel",onClick:()=>ae("inactive"),isActive:k==="inactive",changeType:"down"}),e.jsx(Ne,{title:"Administrators",value:De.admins,icon:"admin_panel_settings",onClick:()=>ae("all","admin"),isActive:y==="admin"})]}),e.jsx(fe.DataTable,{columns:se,data:c,loading:u,emptyMessage:"No users found matching your criteria.",pagination:{currentPage:A,totalPages:Math.ceil(D/H),onPageChange:U,totalItems:D,pageSize:H,onPageSizeChange:W=>{P(W),U(1)}},headerSlot:e.jsx(fe.ListControls,{title:"User List",count:D||c.length,searchProps:{value:h,onChange:W=>{N(W),U(1),$()}},onFilterClick:$,embedded:!0})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-md shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4",children:f?"Edit User":"Add User"}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:L.full_name,onChange:W=>re({...L,full_name:W.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:L.email,onChange:W=>re({...L,email:W.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:L.phone,onChange:W=>re({...L,phone:W.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Role"}),e.jsxs("select",{value:L.role,onChange:W=>{const ge=W.target.value,xe=oe.find(_e=>_e.name===ge);re({...L,role:ge,role_id:xe?.id||"",assigned_warehouse_id:"",assigned_shop_id:""})},className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Role"}),oe.map(W=>e.jsx("option",{value:W.name,children:W.name.replace(/_/g," ").replace(/\b\w/g,ge=>ge.toUpperCase())},W.id))]})]}),oe.find(W=>W.name===L.role)?.entity_type==="warehouse"&&e.jsx(Hl,{label:"Assign to Warehouse",value:L.assigned_warehouse_id,onChange:W=>re({...L,assigned_warehouse_id:W}),options:G.map(W=>({value:W.id,label:W.name})),placeholder:"Search and select warehouse...",required:!0}),oe.find(W=>W.name===L.role)?.entity_type==="shop"&&e.jsx(Hl,{label:"Assign to Medical Shop",value:L.assigned_shop_id,onChange:W=>re({...L,assigned_shop_id:W}),options:T.map(W=>({value:W.id,label:W.name})),placeholder:"Search and select shop...",required:!0}),!f&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Password ",e.jsx("span",{className:"text-xs text-slate-500",children:"(min. 8 characters)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:L.password,onChange:W=>re({...L,password:W.target.value}),className:"w-full px-3 pr-10 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white",required:!f,minLength:8}),e.jsx("button",{type:"button",onClick:()=>_(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:w?"Hide password":"Show password",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:w?"visibility_off":"visibility"})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:f?"Update":"Create"})]})]})]})}),p&&ne&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"warning"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Delete User?"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Are you sure you want to delete ",e.jsx("strong",{children:ne.full_name}),"? This action cannot be undone."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>M(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ve,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl hover:bg-red-700 font-medium transition-colors shadow-lg shadow-red-500/20",children:"Delete User"})]})]})})]})}function Jj(){const{isLoading:n}=dt(),{user:r}=Ke(),{activeEntity:c,scope:i}=Da(),[u,x]=m.useState([]),[h,N]=m.useState(!0),[v,g]=m.useState(""),[f,b]=m.useState(1),[w,_]=m.useState(0),[k,S]=m.useState(10),[y,E]=m.useState(!1),[A,U]=m.useState(null),[D,R]=m.useState({name:"",phone:"",email:"",address:"",customer_type:"regular",gender:""});m.useEffect(()=>{H()},[f,k,v]);const H=async()=>{try{N(!0);const T={page:f,size:k};v&&(T.search=v);const ce=await Ul.list(T);x(ce.data?.items||ce.data?.data||[]),_(ce.data?.total||0)}catch(T){console.error("Failed to fetch customers:",T),x([])}finally{N(!1)}},P=()=>{U(null),R({name:"",phone:"",email:"",address:"",customer_type:"regular",gender:""}),E(!0)},L=T=>{U(T),R({name:T.name,phone:T.phone,email:T.email||"",address:T.address||"",customer_type:T.customer_type||"regular",gender:T.gender||""}),E(!0)},re=async T=>{T.preventDefault();try{if(A)await Ul.update(A.id,D);else{let ce=r?.shop_id;i==="shop"&&c?.id&&(ce=c.id),!ce&&r?.role,await Ul.create({...D,shop_id:ce,customer_type:(D.customer_type||"regular").toLowerCase()})}E(!1),H()}catch(ce){console.error("Failed to save customer:",ce)}},G=T=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(T),I=[{header:"Customer",key:"name",render:T=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 font-semibold",children:T.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:T.name}),e.jsx("div",{className:"text-xs text-slate-500",children:T.phone})]})]})},{header:"Type",key:"customer_type",render:T=>e.jsx(Ye,{variant:T.customer_type==="premium"?"warning":"secondary",className:"capitalize",children:T.customer_type||"regular"})},{header:"Email / Address",key:"email",className:"hidden md:table-cell",render:T=>e.jsxs("div",{className:"text-sm",children:[T.email&&e.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:T.email}),T.address&&e.jsx("div",{className:"text-xs text-slate-500 truncate max-w-[200px]",children:T.address})]})},{header:"Total Spend",key:"total_purchases",align:"right",render:T=>e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:G(T.total_purchases||0)})},{header:"Last Visit",key:"last_visit",align:"right",render:T=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:T.last_visit?new Date(T.last_visit).toLocaleDateString():"-"})},{header:"Actions",key:"id",align:"right",render:T=>e.jsx(le,{variant:"ghost",onClick:()=>L(T),className:"!p-1.5 h-8 w-8 text-blue-600",title:"Edit Customer",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})})}];return e.jsxs(fe,{loading:n,children:[e.jsx(fe.Header,{title:"Customers",subtitle:"Manage customer profiles and history",actions:e.jsxs(le,{variant:"primary",onClick:P,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Customer"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Customers",value:w,icon:"group",isActive:!0}),e.jsx("div",{className:"hidden sm:block"}),e.jsx("div",{className:"hidden lg:block"})]}),e.jsx(fe.DataTable,{columns:I,data:u,loading:h,emptyMessage:"No customers found.",pagination:{currentPage:f,totalPages:Math.ceil(w/k),onPageChange:b,totalItems:w,pageSize:k,onPageSizeChange:T=>{S(T),b(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Customer List",count:w,searchProps:{value:v,onChange:T=>{g(T),b(1)},placeholder:"Search customers..."},embedded:!0})}),e.jsx(Tt,{isOpen:y,onClose:()=>E(!1),title:A?"Edit Customer":"Add Customer",children:e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:D.name,onChange:T=>R({...D,name:T.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",value:D.phone,onChange:T=>R({...D,phone:T.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Type"}),e.jsx(Uj,{value:D.customer_type,onChange:T=>R({...D,customer_type:T}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gender"}),e.jsx(_p,{value:D.gender,onChange:T=>R({...D,gender:T}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:D.email,onChange:T=>R({...D,email:T.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Address"}),e.jsx("textarea",{value:D.address,onChange:T=>R({...D,address:T.target.value}),rows:2,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{type:"button",variant:"ghost",onClick:()=>E(!1),className:"flex-1",children:"Cancel"}),e.jsx(le,{type:"submit",variant:"primary",className:"flex-1",children:A?"Update":"Create"})]})]})})]})}const k0={name:"",email:"",password:"",phone:"",employment_type:"full_time",salary:0,shop_id:"",date_of_joining:new Date().toISOString().split("T")[0],address:"",emergency_contact:"",gender:"",hra_percent:40,allowances_percent:20,pf_percent:12,esi_percent:.75,esi_applicable:!0};function Wj(){const{user:n}=Ke(),{isLoading:r}=dt(),[c,i]=m.useState([]),[u,x]=m.useState(!0),[h,N]=m.useState(""),[v,g]=m.useState(""),[f,b]=m.useState(1),[w,_]=m.useState(0),[k,S]=m.useState(10),[y,E]=m.useState(!1),[A,U]=m.useState(null),[D,R]=m.useState(k0),[H,P]=m.useState(!1),[L,re]=m.useState(""),[G,I]=m.useState(null),[T,ce]=m.useState(!1),[oe,ye]=m.useState(null),[z,$]=m.useState(!1),[te,me]=m.useState(""),B=n?.role==="warehouse_admin",p=n?.role==="super_admin";m.useEffect(()=>{M()},[v,f,k,h,te]);const M=async()=>{try{x(!0);const se={page:f,size:k};h&&(se.search=h),v&&(se.department=v),te&&(se.status=te);const W=await fa.list(se);i(W.data.items||W.data.data||W.data||[]),_(W.data.total||W.data.length||0)}catch(se){console.error(se),i([])}finally{x(!1)}},ne=()=>{U(null),R(k0),re(""),E(!0)},Y=async se=>{try{const ge=(await fa.get(se.id)).data;U(se),R({name:ge.name||"",email:ge.email||"",phone:ge.phone||"",employment_type:ge.employment_type||"full_time",salary:ge.basic_salary||0,shop_id:ge.shop_id||"",date_of_joining:ge.date_of_joining?.split("T")[0]||"",address:ge.address||"",emergency_contact:ge.emergency_contact||"",gender:ge.gender||"",hra_percent:ge.hra_percent||40,allowances_percent:ge.allowances_percent||20,pf_percent:ge.pf_percent||12,esi_percent:ge.esi_percent||.75,esi_applicable:ge.esi_applicable!==void 0?ge.esi_applicable:!0,password:""}),re(""),E(!0)}catch(W){console.error("Failed to fetch employee details:",W),alert("Failed to load employee details")}},Z=async se=>{if(se.preventDefault(),re(""),!D.name||!D.phone){re("Please fill in all required fields (Name, Phone)");return}if(!D.salary||D.salary<=0){re("Please enter a valid salary amount");return}P(!0);try{const W={name:D.name,phone:D.phone,employment_type:D.employment_type,date_of_joining:D.date_of_joining,basic_salary:Number(D.salary)||void 0,email:D.email||void 0,password:D.password||void 0,gender:D.gender||void 0,address:D.address||void 0,emergency_contact:D.emergency_contact||void 0,shop_id:D.shop_id||void 0,hra_percent:D.hra_percent,allowances_percent:D.allowances_percent,pf_percent:D.pf_percent,esi_percent:D.esi_percent,esi_applicable:D.esi_applicable};if(A)await fa.update(A.id,W),E(!1),M();else{const ge=await fa.create(W);ge.data?.data?.credentials&&I(ge.data.data.credentials),E(!1),M()}}catch(W){console.error("Failed to save employee:",W);let ge="Failed to save employee";if(W.response?.data?.detail){const xe=W.response.data.detail;Array.isArray(xe)?ge=xe.map(_e=>`${_e.loc?.join(".")||"Field"}: ${_e.msg}`).join(", "):typeof xe=="string"&&(ge=xe)}re(ge)}finally{P(!1)}},ve=async()=>{if(oe){$(!0);try{await fa.delete(oe.id),ce(!1),ye(null),M()}catch(se){console.error("Failed to delete employee:",se);let W="Failed to delete employee";se.response?.data?.detail&&(W=se.response.data.detail),alert(W)}finally{$(!1)}}},be=se=>{ye(se),ce(!0)},De=se=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(se),ae=[{header:"Employee",key:"name",render:se=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center text-violet-600 dark:text-violet-400 text-sm font-bold",children:se.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:se.name}),e.jsx("div",{className:"text-xs text-slate-500",children:se.phone})]})]})},{header:"Department",key:"department",render:se=>e.jsx(Ye,{variant:"secondary",className:"capitalize",children:se.department})},{header:"Designation",key:"designation",className:"hidden sm:table-cell"},{header:"Salary",key:"basic_salary",render:se=>e.jsx("span",{className:"font-medium font-mono text-slate-700 dark:text-slate-300",children:De(se.basic_salary||0)}),align:"right"},{header:"Status",key:"status",render:se=>e.jsx(Ye,{variant:se.status==="active"?"success":se.status==="on_leave"?"warning":"error",children:se.status||"Active"}),align:"center"},{header:"Actions",key:"id",render:se=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(le,{variant:"ghost",onClick:()=>Y(se),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-blue-600",title:"Edit Employee",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx(le,{variant:"ghost",onClick:()=>be(se),className:"!p-1.5 h-8 w-8 text-slate-500 hover:text-red-600",title:"Delete Employee",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}];return e.jsxs(fe,{loading:r,children:[e.jsx(fe.Header,{title:"Employees",subtitle:"Manage staff, payroll, and assignments",actions:e.jsxs(le,{variant:"primary",onClick:ne,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Employee"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"All Employees",value:te?"-":w,icon:"badge",onClick:()=>{me(""),g("")},isActive:!te&&!v}),e.jsx(Ne,{title:"Active",value:te==="active"?w:"-",icon:"check_circle",onClick:()=>me("active"),isActive:te==="active"}),e.jsx(Ne,{title:"On Leave",value:te==="on_leave"?w:"-",icon:"event_busy",onClick:()=>me("on_leave"),isActive:te==="on_leave"}),e.jsx(Ne,{title:"Inactive",value:te==="inactive"?w:"-",icon:"cancel",onClick:()=>me("inactive"),isActive:te==="inactive"}),p&&e.jsx(Ne,{title:"Terminated",value:te==="terminated"?w:"-",icon:"delete",onClick:()=>me("terminated"),isActive:te==="terminated",className:"!bg-red-50 dark:!bg-red-900/10 !border-red-200 dark:!border-red-800"})]}),e.jsx(fe.DataTable,{columns:ae,data:c,loading:u,emptyMessage:"No employees found. Add your first employee.",pagination:{currentPage:f,totalPages:Math.ceil(w/k),onPageChange:b,totalItems:w,pageSize:k,onPageSizeChange:se=>{S(se),b(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Employee List",count:w,searchProps:{value:h,onChange:se=>{N(se),b(1)},placeholder:"Search employees..."},actions:null,embedded:!0})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800 z-10",children:e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:A?"Edit Employee":"Add New Employee"})}),e.jsxs("form",{onSubmit:Z,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[L&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),L]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:D.name,onChange:se=>R({...D,name:se.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:D.phone,onChange:se=>R({...D,phone:se.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Email"}),e.jsx("input",{type:"email",value:D.email,onChange:se=>R({...D,email:se.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors"})]}),!A&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Password"}),e.jsx("input",{type:"password",value:D.password,onChange:se=>R({...D,password:se.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",placeholder:"Enter password for user account"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Join Date"}),e.jsx("input",{type:"date",value:D.date_of_joining,onChange:se=>R({...D,date_of_joining:se.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Employment Type"}),e.jsx(qj,{value:D.employment_type,onChange:se=>R({...D,employment_type:se}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Gender"}),e.jsx(_p,{value:D.gender,onChange:se=>R({...D,gender:se}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Salary ()"}),e.jsx("input",{type:"number",value:D.salary,onChange:se=>R({...D,salary:parseFloat(se.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono"})]}),!B&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Assigned Shop"}),e.jsx(Gd,{value:D.shop_id,onChange:se=>R({...D,shop_id:se}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"percent"}),"Salary Component Configuration"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"HRA %"}),e.jsx("input",{type:"number",value:D.hra_percent,onChange:se=>R({...D,hra_percent:parseFloat(se.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Allowances %"}),e.jsx("input",{type:"number",value:D.allowances_percent,onChange:se=>R({...D,allowances_percent:parseFloat(se.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"PF %"}),e.jsx("input",{type:"number",value:D.pf_percent,onChange:se=>R({...D,pf_percent:parseFloat(se.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"ESI %"}),e.jsx("input",{type:"number",value:D.esi_percent,onChange:se=>R({...D,esi_percent:parseFloat(se.target.value)||0}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors font-mono text-sm",step:"0.01",min:"0",max:"100",disabled:!D.esi_applicable})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.esi_applicable,onChange:se=>R({...D,esi_applicable:se.target.checked}),className:"rounded border-slate-300"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"ESI Applicable (only for salary < 21,000)"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Address"}),e.jsx("textarea",{value:D.address,onChange:se=>R({...D,address:se.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:bg-white transition-colors",rows:2})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx(le,{variant:"secondary",onClick:()=>E(!1),type:"button",children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",disabled:H,loading:H,children:A?"Update Employee":"Add Employee"})]})]})]})}),T&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400 text-2xl",children:"warning"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Delete Employee"}),e.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mt-0.5",children:"info"}),e.jsxs("span",{children:["Are you sure you want to delete ",e.jsx("strong",{children:oe.name}),'? The employee status will be set to "terminated".']})]})}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Employee Code:"}),e.jsx("span",{className:"font-mono font-semibold text-slate-900 dark:text-white",children:oe.employee_code||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Department:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:oe.department})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Phone:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:oe.phone})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx(le,{variant:"secondary",onClick:()=>{ce(!1),ye(null)},disabled:z,children:"Cancel"}),e.jsx(le,{variant:"primary",onClick:ve,disabled:z,loading:z,className:"!bg-red-600 hover:!bg-red-700",children:"Delete Employee"})]})]})}),G&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 animate-scaleIn",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400 text-2xl",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Employee Created!"}),e.jsx("p",{className:"text-sm text-slate-500",children:"User account credentials generated"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mt-0.5",children:"info"}),e.jsx("span",{children:"Please save these credentials securely and share them with the employee. They won't be shown again."})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:G.email,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 font-mono text-sm"}),e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(G.email),className:"!p-2",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Temporary Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:G.temporary_password,readOnly:!0,className:"flex-1 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 font-mono text-sm font-bold"}),e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(G.temporary_password),className:"!p-2",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})})]})]})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:e.jsx(le,{variant:"primary",onClick:()=>I(null),children:"Got It"})})]})})]})}function eN(){const[n,r]=m.useState(new Date().toISOString().split("T")[0]),[c,i]=m.useState({}),[u,x]=m.useState(null),[h,N]=m.useState(!0),[v,g]=m.useState(!1),[f,b]=m.useState({type:"",text:""}),[w,_]=m.useState("");m.useEffect(()=>{k()},[n]);const k=async()=>{try{N(!0);const R=(await fa.getDailyAttendance(n)).data;x(R);const H={};R.attendance.forEach(P=>{const L=P.check_in?P.check_in.split("T")[1]?.substr(0,5):"09:00",re=P.check_out?P.check_out.split("T")[1]?.substr(0,5):"18:00";H[P.employee_id]={employee_id:P.employee_id,date:n,status:P.status||"present",check_in:L,check_out:re}}),i(H)}catch(D){console.error("Error loading attendance:",D),b({type:"error",text:"Failed to load attendance records"})}finally{N(!1)}},S=(D,R,H)=>{i(P=>({...P,[D]:{...P[D],[R]:H}}))},y=async()=>{g(!0);try{const D=Object.values(c);for(const R of D){const H={employee_id:R.employee_id,date:R.date,status:R.status,check_in:R.check_in?`${R.date}T${R.check_in}:00`:void 0,check_out:R.check_out?`${R.date}T${R.check_out}:00`:void 0};await fa.markAttendance(H)}b({type:"success",text:"Attendance saved as draft!"}),await k()}catch(D){let R="Failed to save attendance";if(D.response?.data?.detail){const H=D.response.data.detail;Array.isArray(H)?R=H.map(P=>`${P.loc?.join(".")||"Unknown field"}: ${P.msg}`).join(", "):typeof H=="string"&&(R=H)}b({type:"error",text:R})}finally{g(!1)}},E=D=>{const R={not_marked:{icon:"",label:"Not Marked",color:"#f59e0b"},draft:{icon:"",label:"Draft",color:"#3b82f6"},submitted:{icon:"",label:"Submitted",color:"#10b981"},locked:{icon:"",label:"Locked",color:"#ef4444"}},{icon:H,label:P,color:L}=R[D]||R.not_marked;return e.jsxs("div",{style:{display:"inline-block",padding:"6px 16px",borderRadius:"20px",background:L+"20",color:L,fontWeight:"bold",fontSize:"14px"},children:[H," ",P]})},A=D=>{switch(D){case"present":return"#10b981";case"absent":return"#ef4444";case"half_day":return"#f59e0b";case"leave":return"#8b5cf6";default:return"#6b7280"}},U={present:Object.values(c).filter(D=>D.status==="present").length,absent:Object.values(c).filter(D=>D.status==="absent").length,half_day:Object.values(c).filter(D=>D.status==="half_day").length,leave:Object.values(c).filter(D=>D.status==="leave").length};return e.jsxs("div",{className:"attendance-marker",children:[e.jsxs("div",{className:"header",children:[e.jsx("h2",{children:"Attendance Marker"}),e.jsxs("div",{className:"header-controls",children:[e.jsx("input",{type:"date",value:n,onChange:D=>r(D.target.value),className:"date-picker"}),u&&E(u.date_status)]})]}),f.text&&e.jsx("div",{className:`message ${f.type}`,children:f.text}),e.jsx("div",{className:"controls-card",children:e.jsxs("div",{className:"stats-row",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#10b981"},children:U.present}),e.jsx("div",{className:"stat-label",children:"Present"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#ef4444"},children:U.absent}),e.jsx("div",{className:"stat-label",children:"Absent"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#f59e0b"},children:U.half_day}),e.jsx("div",{className:"stat-label",children:"Half Day"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",style:{color:"#8b5cf6"},children:U.leave}),e.jsx("div",{className:"stat-label",children:"Leave"})]})]})}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(qd,{value:w,onChange:_,placeholder:"Search employees by name or code..."})}),h?e.jsx("div",{className:"loading",children:"Loading employees..."}):e.jsxs("div",{className:"attendance-table",children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"})]})}),e.jsx("tbody",{children:u?.attendance.filter(D=>{if(!w)return!0;const R=w.toLowerCase();return D.employee_name.toLowerCase().includes(R)||D.employee_code.toLowerCase().includes(R)||D.department.toLowerCase().includes(R)}).map(D=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"employee-info",children:[e.jsx("div",{className:"employee-avatar",children:D.employee_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"employee-name",children:D.employee_name}),e.jsx("div",{className:"employee-code",children:D.employee_code})]})]})}),e.jsx("td",{children:D.employee_role}),e.jsx("td",{children:D.department}),e.jsx("td",{children:e.jsxs("select",{className:"status-select",value:c[D.employee_id]?.status||"present",onChange:R=>S(D.employee_id,"status",R.target.value),disabled:!1,style:{borderColor:A(c[D.employee_id]?.status||"present")},children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"half_day",children:"Half Day"}),e.jsx("option",{value:"leave",children:"Leave"})]})}),e.jsx("td",{children:e.jsx("input",{type:"time",className:"time-input",value:c[D.employee_id]?.check_in||"09:00",onChange:R=>S(D.employee_id,"check_in",R.target.value),disabled:c[D.employee_id]?.status==="absent"||c[D.employee_id]?.status==="leave"})}),e.jsx("td",{children:e.jsx("input",{type:"time",className:"time-input",value:c[D.employee_id]?.check_out||"18:00",onChange:R=>S(D.employee_id,"check_out",R.target.value),disabled:c[D.employee_id]?.status==="absent"||c[D.employee_id]?.status==="leave"})})]},D.employee_id))})]}),e.jsx("div",{className:"table-footer",children:e.jsx("button",{className:"btn-submit",onClick:y,disabled:v,children:v?"Saving...":"Save Attendance"})})]})]})}function tN(){const[n,r]=m.useState(new Date().toISOString().split("T")[0]),[c,i]=m.useState([]),[u,x]=m.useState(!0),[h,N]=m.useState("");m.useEffect(()=>{v()},[n]);const v=async()=>{try{x(!0);const b=(await fa.getDailyAttendance(n)).data.attendance.filter(w=>w.is_marked);i(b)}catch(f){console.error("Error loading attendance:",f)}finally{x(!1)}},g={present:c.filter(f=>f.status==="present").length,absent:c.filter(f=>f.status==="absent").length,half_day:c.filter(f=>f.status==="half_day").length,leave:c.filter(f=>f.status==="leave").length};return e.jsxs("div",{className:"attendance-marker",style:{padding:"24px"},children:[e.jsxs("div",{className:"header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{children:"Attendance Report"}),e.jsx("input",{type:"date",value:n,onChange:f=>r(f.target.value),className:"date-picker"})]}),e.jsxs("div",{className:"summary-cards",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{background:"#d4edda",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#155724"},children:g.present}),e.jsx("div",{style:{color:"#155724",marginTop:"8px"},children:"Present"})]}),e.jsxs("div",{style:{background:"#f8d7da",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#721c24"},children:g.absent}),e.jsx("div",{style:{color:"#721c24",marginTop:"8px"},children:"Absent"})]}),e.jsxs("div",{style:{background:"#fff3cd",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#856404"},children:g.half_day}),e.jsx("div",{style:{color:"#856404",marginTop:"8px"},children:"Half Day"})]}),e.jsxs("div",{style:{background:"#e2e3e5",padding:"20px",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#383d41"},children:g.leave}),e.jsx("div",{style:{color:"#383d41",marginTop:"8px"},children:"Leave"})]})]}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(qd,{value:h,onChange:N,placeholder:"Search by name, code, or department..."})}),u?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsx("div",{className:"attendance-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Check In"}),e.jsx("th",{children:"Check Out"}),e.jsx("th",{children:"Working Hours"})]})}),e.jsx("tbody",{children:c.filter(f=>{if(!h)return!0;const b=h.toLowerCase();return f.employee_name.toLowerCase().includes(b)||f.employee_code.toLowerCase().includes(b)||f.department.toLowerCase().includes(b)}).length>0?c.filter(f=>{if(!h)return!0;const b=h.toLowerCase();return f.employee_name.toLowerCase().includes(b)||f.employee_code.toLowerCase().includes(b)||f.department.toLowerCase().includes(b)}).map(f=>e.jsxs("tr",{children:[e.jsx("td",{children:f.employee_name}),e.jsx("td",{children:f.employee_code}),e.jsx("td",{children:f.employee_role}),e.jsx("td",{children:f.department}),e.jsx("td",{children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",background:f.status==="present"?"#d4edda":f.status==="absent"?"#f8d7da":f.status==="half_day"?"#fff3cd":"#e2e3e5",color:f.status==="present"?"#155724":f.status==="absent"?"#721c24":f.status==="half_day"?"#856404":"#383d41"},children:f.status?.replace("_"," ").toUpperCase()})}),e.jsx("td",{children:f.check_in?new Date(f.check_in).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{children:f.check_out?new Date(f.check_out).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"-"}),e.jsx("td",{children:f.working_hours?f.working_hours.toFixed(1)+"h":"-"})]},f.employee_id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:8,style:{textAlign:"center",padding:"40px",color:"#888"},children:["No attendance records found for ",n]})})})]})})]})}const Yn={HRA_PERCENTAGE:.4,ALLOWANCE_PERCENTAGE:.2,PF_PERCENTAGE:.12,ESI_PERCENTAGE:.0075,ESI_LIMIT:21e3};function aN(){const[n,r]=m.useState([]),[c,i]=m.useState([]),[u,x]=m.useState(new Date().getMonth()+1),[h,N]=m.useState(new Date().getFullYear()),[v,g]=m.useState(!0),[f,b]=m.useState(!1),[w,_]=m.useState(null),[k,S]=m.useState(!1),[y,E]=m.useState(!1),[A,U]=m.useState(""),[D,R]=m.useState("all"),[H,P]=m.useState(1),[L,re]=m.useState(new Set),[G,I]=m.useState(10);m.useEffect(()=>{T()},[]),m.useEffect(()=>{n.length>0&&ce()},[u,h,n]);const T=async()=>{try{const xe=await fa.list({size:500}),_e=xe.data.items||xe.data||[];r(_e.filter(Je=>Je.status==="active"))}catch(xe){console.error("Error loading employees:",xe),Ve.error("Failed to load employees")}finally{g(!1)}},ce=async()=>{try{const xe=await fa.getSalaryRecords({month:u,year:h});i(xe.data||[])}catch(xe){console.error("Error loading salary records:",xe),i([])}},oe=(xe,_e)=>{const Je=_e?.basic_salary||xe.basic_salary||0,Ra=_e?.hra||Je*Yn.HRA_PERCENTAGE,es=_e?.allowances||Je*Yn.ALLOWANCE_PERCENTAGE,Cs=Je+Ra+es,Ma=_e?.pf_deduction||Je*Yn.PF_PERCENTAGE,Bt=_e?.esi_deduction||(Je<Yn.ESI_LIMIT?Je*Yn.ESI_PERCENTAGE:0),ts=_e?.tax_deduction||0,Nt=Ma+Bt+ts,Ql=Cs-Nt;return{employee:xe,record:_e||null,basic:Je,hra:Ra,allowances:es,grossEarnings:Cs,pf:Ma,esi:Bt,tax:ts,totalDeductions:Nt,netSalary:Ql}},ye=()=>{const xe=new Map(c.map(_e=>[_e.employee_id,_e]));return n.map(_e=>oe(_e,xe.get(_e.id)))},z=()=>{if(L.size===0){Ve.error("Please select at least one employee to process salary");return}E(!0)},$=async()=>{E(!1),b(!0);try{await fa.processSalary({month:u,year:h,employee_ids:Array.from(L)}),Ve.success(`Salary processed for ${L.size} employee(s)`),re(new Set),ce()}catch(xe){Ve.error(xe.response?.data?.detail||"Failed to process salary")}finally{b(!1)}},te=xe=>{re(_e=>{const Je=new Set(_e);return Je.has(xe)?Je.delete(xe):Je.add(xe),Je})},me=()=>{L.size===Z.length?re(new Set):re(new Set(Z.map(xe=>xe.employee.id)))},B=xe=>{_(xe),S(!0)},p=xe=>new Date(2e3,xe-1).toLocaleString("default",{month:"long"}),M=xe=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(xe),ne=xe=>new Date(xe).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),Y=ye(),Z=Y.filter(xe=>{const _e=xe.employee.name.toLowerCase().includes(A.toLowerCase())||xe.employee.employee_code.toLowerCase().includes(A.toLowerCase()),Je=D==="all"||D==="paid"&&xe.record?.is_paid||D==="pending"&&!xe.record?.is_paid;return _e&&Je}),ve=Z.reduce((xe,_e)=>xe+_e.grossEarnings,0),be=Z.reduce((xe,_e)=>xe+_e.totalDeductions,0),De=Z.reduce((xe,_e)=>xe+_e.netSalary,0),ae=Z.filter(xe=>xe.record?.is_paid).length,se=Z.filter(xe=>!xe.record?.is_paid).length,W=Z.slice((H-1)*G,H*G),ge=[{header:e.jsx("input",{type:"checkbox",checked:L.size>0&&L.size===Z.length,onChange:me,className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),key:"select",width:"50px",render:xe=>e.jsx("input",{type:"checkbox",checked:L.has(xe.employee.id),onChange:()=>te(xe.employee.id),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"})},{header:"Employee",key:"employee",render:xe=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold text-sm",children:xe.employee.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:xe.employee.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[xe.employee.employee_code,"  ",xe.employee.designation]})]})]})},{header:"Basic",key:"basic",align:"right",render:xe=>e.jsx("span",{className:"font-mono text-sm text-slate-900 dark:text-white",children:M(xe.basic)})},{header:"HRA",key:"hra",align:"right",render:xe=>e.jsx("span",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-400",children:M(xe.hra)})},{header:"Allowances",key:"allowances",align:"right",render:xe=>e.jsx("span",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-400",children:M(xe.allowances)})},{header:"Gross",key:"grossEarnings",align:"right",render:xe=>e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900 dark:text-white",children:M(xe.grossEarnings)})},{header:"Deductions",key:"totalDeductions",align:"right",render:xe=>e.jsxs("span",{className:"font-mono text-sm text-red-600 dark:text-red-400",children:["-",M(xe.totalDeductions)]})},{header:"Net Salary",key:"netSalary",align:"right",render:xe=>e.jsx("span",{className:"font-mono text-base font-bold text-blue-600 dark:text-blue-400",children:M(xe.netSalary)})},{header:"Status",key:"status",align:"center",render:xe=>xe.record?.is_paid?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Paid"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Pending"]})},{header:"Actions",key:"actions",align:"center",render:xe=>e.jsx(le,{variant:"ghost",onClick:()=>B(xe),className:"!p-1.5 h-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"description"})})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Salary Management",subtitle:"Process and manage employee salaries",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[L.size>0&&e.jsxs("span",{className:"px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-lg",children:[L.size," selected"]}),e.jsx(le,{variant:"primary",onClick:z,loading:f,disabled:v||L.size===0,icon:f?"hourglass_empty":"calculate",className:"bg-gradient-to-r from-blue-600 to-indigo-600",children:f?"Processing...":`Process Salary${L.size>0?` (${L.size})`:""}`})]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Employees",value:Z.length,icon:"group",isActive:!0}),e.jsx(Ne,{title:"Gross Payroll",value:M(ve),icon:"trending_up",trend:"up",valueClassName:"text-emerald-600 dark:text-emerald-400"}),e.jsx(Ne,{title:"Total Deductions",value:M(be),icon:"trending_down",trend:"down",valueClassName:"text-red-600 dark:text-red-400"}),e.jsx(Ne,{title:"Net Payable",value:M(De),icon:"payments",isActive:!0,valueClassName:"text-blue-600 dark:text-blue-400"})]}),e.jsx(fe.DataTable,{columns:ge,data:W,loading:v,emptyMessage:"No employees found",pagination:{currentPage:H,totalPages:Math.ceil(Z.length/G),onPageChange:P,totalItems:Z.length,pageSize:G,onPageSizeChange:xe=>{I(xe),P(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Salary List",count:Z.length,searchProps:{value:A,onChange:xe=>{U(xe),P(1)},placeholder:"Search employees..."},actions:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400 text-xl",children:"calendar_month"}),e.jsx("select",{value:u,onChange:xe=>x(Number(xe.target.value)),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:Array.from({length:12},(xe,_e)=>e.jsx("option",{value:_e+1,children:p(_e+1)},_e+1))}),e.jsx("select",{value:h,onChange:xe=>N(Number(xe.target.value)),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:Array.from({length:5},(xe,_e)=>{const Je=new Date().getFullYear()-_e;return e.jsx("option",{value:Je,children:Je},Je)})})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>R("all"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${D==="all"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["All (",Y.length,")"]}),e.jsxs("button",{onClick:()=>R("paid"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${D==="paid"?"bg-white dark:bg-slate-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["Paid (",ae,")"]}),e.jsxs("button",{onClick:()=>R("pending"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${D==="pending"?"bg-white dark:bg-slate-600 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:["Pending (",se,")"]})]})]}),embedded:!0})}),k&&w&&e.jsx(Tt,{isOpen:k,onClose:()=>S(!1),title:"Salary Slip",maxWidth:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center pb-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-1",children:"Salary Slip"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[p(u)," ",h]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Employee Name"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Employee Code"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.employee_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Designation"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.designation})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Department"}),e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:w.employee.department})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-emerald-600 dark:text-emerald-400",children:"add_circle"}),"Earnings"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Basic Salary"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:M(w.basic)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"HRA (40%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:M(w.hra)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Allowances (20%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:M(w.allowances)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Gross Earnings"}),e.jsx("span",{className:"font-mono font-bold text-emerald-600 dark:text-emerald-400",children:M(w.grossEarnings)})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400",children:"remove_circle"}),"Deductions"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"PF (12%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:M(w.pf)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"ESI (0.75%)"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:M(w.esi)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tax"}),e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:M(w.tax)})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:"Total Deductions"}),e.jsx("span",{className:"font-mono font-bold text-red-600 dark:text-red-400",children:M(w.totalDeductions)})]})]})]})]}),e.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Net Salary"}),e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:M(w.netSalary)})]})}),w.record&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"info"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Payment Status:"})]}),w.record.is_paid?e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Paid"]}),w.record.paid_at&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["on ",ne(w.record.paid_at)]})]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),"Pending"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"print"}),"Print Slip"]}),e.jsx("button",{onClick:()=>S(!1),className:"px-6 py-2.5 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 font-medium rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Close"})]})]})}),e.jsx(Tt,{isOpen:y,onClose:()=>E(!1),title:"Confirm Salary Processing",maxWidth:"sm",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg",children:[e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"warning"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Attention Needed"}),e.jsx("p",{className:"text-sm opacity-90",children:"This action will generate salary records."})]})]}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-300 mb-6 text-center",children:["Are you sure you want to process salary for ",e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:L.size})," selected employee(s) for ",e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[p(u)," ",h]}),"?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(le,{variant:"secondary",onClick:()=>E(!1),className:"flex-1",children:"Cancel"}),e.jsx(le,{variant:"primary",onClick:$,loading:f,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600",children:"Confirm Process"})]})]})})]})}function S0(){const[n,r]=m.useState([]),[c,i]=m.useState(!0),[u,x]=m.useState(""),[h,N]=m.useState(""),[v,g]=m.useState(1),[f,b]=m.useState(0),[w,_]=m.useState(10);m.useEffect(()=>{k()},[v,w,h,u]);const k=async()=>{try{i(!0);const A={page:v,size:w,status:u||void 0};h&&(A.search=h);const U=await Xs.list(A);r(U.data?.items||U.data?.data||[]),b(U.data?.total||0)}catch(A){console.error(A),r([])}finally{i(!1)}},S=A=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(A),y={paid:n.filter(A=>A.payment_status==="paid").length,pending:n.filter(A=>A.payment_status==="pending").length,cancelled:n.filter(A=>A.payment_status==="cancelled").length},E=[{header:"Invoice #",key:"invoice_number",render:A=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"receipt_long"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:A.invoice_number}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(A.created_at).toLocaleDateString()})]})]})},{header:"Customer",key:"customer_name",render:A=>e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:A.customer_name||"Walk-in Customer"})},{header:"Shop",key:"shop_name",render:A=>A.shop_name||"N/A",className:"hidden md:table-cell"},{header:"Amount",key:"total_amount",align:"right",render:A=>e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:S(A.total_amount)})},{header:"Status",key:"payment_status",align:"center",render:A=>{const U=A.payment_status==="paid"?"success":A.payment_status==="cancelled"?"error":"warning";return e.jsx(Ye,{variant:U,className:"capitalize",children:A.payment_status})}},{header:"Actions",key:"id",align:"right",render:()=>e.jsx(le,{variant:"ghost",className:"!p-1.5 h-8 w-8 text-slate-500",title:"View Invoice",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Invoices",subtitle:"View and manage sales invoices"}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Invoices",value:f,icon:"receipt",onClick:()=>x(""),isActive:u===""}),e.jsx(Ne,{title:"Paid",value:y.paid,icon:"check_circle",onClick:()=>x("paid"),isActive:u==="paid",trend:"up"}),e.jsx(Ne,{title:"Pending",value:y.pending,icon:"pending",onClick:()=>x("pending"),isActive:u==="pending",trend:"neutral"}),e.jsx(Ne,{title:"Cancelled",value:y.cancelled,icon:"cancel",onClick:()=>x("cancelled"),isActive:u==="cancelled",trend:"down"})]}),e.jsx(fe.DataTable,{columns:E,data:n,loading:c,emptyMessage:"No invoices found.",pagination:{currentPage:v,totalPages:Math.ceil(f/w),onPageChange:g,totalItems:f,pageSize:w,onPageSizeChange:A=>{_(A),g(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Invoice List",count:f,searchProps:{value:h,onChange:A=>{N(A),g(1)},placeholder:"Search invoices..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:u,onChange:A=>{x(A.target.value),g(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),embedded:!0})})]})}function _0(){const n=He(),{activeEntity:r}=Da(),[c,i]=m.useState([]),[u,x]=m.useState(!0),[h,N]=m.useState(""),[v,g]=m.useState(""),[f,b]=m.useState(1),[w,_]=m.useState(0),[k,S]=m.useState(10),[y,E]=m.useState(null);m.useEffect(()=>{A()},[f,k,v,h]);const A=async()=>{try{x(!0);const H={page:f,size:k,status:h||void 0};v&&(H.search=v);const P=await Ks.list(H);i(P.data?.items||[]),_(P.data?.total||0)}catch(H){console.error(H),i([])}finally{x(!1)}},U=async(H,P)=>{try{E(H),await Ks.updateStatus(H,P),A()}catch(L){console.error(L),alert("Failed to update status")}finally{E(null)}},D={pending:c.filter(H=>H.status==="pending").length,inTransit:c.filter(H=>H.status==="in_transit").length,delivered:c.filter(H=>H.status==="delivered").length},R=[{header:"Dispatch #",key:"dispatch_number",render:H=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${H.status==="delivered"?"bg-green-100 text-green-600":H.status==="in_transit"?"bg-blue-100 text-blue-600":"bg-amber-100 text-amber-600"}`,children:e.jsx("span",{className:"material-symbols-outlined",children:H.status==="delivered"?"check_circle":H.status==="in_transit"?"local_shipping":"schedule"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:H.dispatch_number||H.id.slice(0,8)}),e.jsx("div",{className:"text-xs text-slate-500",children:H.dispatch_date?new Date(H.dispatch_date).toLocaleDateString():"Pending Date"})]})]})},{header:"From Warehouse",key:"warehouse_name",render:H=>H.warehouse_name||"N/A"},{header:"To Shop",key:"shop_name",render:H=>H.shop_name||"N/A"},{header:"Items",key:"total_items",render:H=>e.jsx("span",{className:"font-mono",children:H.total_items}),align:"center"},{header:"Status",key:"status",render:H=>{const P=H.status==="delivered"?"success":H.status==="cancelled"?"error":H.status==="in_transit"?"primary":"warning";return e.jsx(Ye,{variant:P,children:H.status.replace("_"," ")})},align:"center"},{header:"Actions",key:"id",align:"right",render:H=>e.jsxs("div",{className:"flex justify-end gap-2",children:[H.status==="pending"&&e.jsx(le,{variant:"primary",onClick:()=>U(H.id,"in_transit"),disabled:y===H.id,className:"!py-1 !px-2 !text-xs",children:"Start"}),r?.type==="shop"&&["pending","created","in_transit"].includes(H.status?.toLowerCase())&&e.jsx(le,{variant:"success",onClick:()=>n("/shops/stock",{state:{dispatchId:H.id}}),className:"!py-1 !px-2 !text-xs",children:"Receive Stock"}),e.jsx(le,{variant:"ghost",onClick:()=>n(`/dispatches/${H.id}`),className:"!p-1.5 h-8 w-8 text-slate-500",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"visibility"})})]})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Dispatch History",subtitle:"Track warehouse to shop deliveries and shipments",actions:e.jsxs(le,{variant:"primary",onClick:()=>n("/dispatches/create"),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"New Dispatch"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Dispatches",value:w,icon:"local_shipping",onClick:()=>N(""),isActive:h===""}),e.jsx(Ne,{title:"Pending",value:D.pending,icon:"schedule",onClick:()=>N("pending"),isActive:h==="pending",trend:"neutral"}),e.jsx(Ne,{title:"In Transit",value:D.inTransit,icon:"near_me",onClick:()=>N("in_transit"),isActive:h==="in_transit",trend:"up"}),e.jsx(Ne,{title:"Delivered",value:D.delivered,icon:"check_circle",onClick:()=>N("delivered"),isActive:h==="delivered",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:R,data:c,loading:u,emptyMessage:"No dispatches found.",pagination:{currentPage:f,totalPages:Math.ceil(w/k),onPageChange:b,totalItems:w,pageSize:k,onPageSizeChange:H=>{S(H),b(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Dispatch List",count:w,searchProps:{value:v,onChange:H=>{g(H),b(1)},placeholder:"Search dispatches..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:h,onChange:H=>{N(H.target.value),b(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),embedded:!0})})]})}function sN(){const n=He(),{user:r}=Ke(),[c,i]=m.useState(!1),[u,x]=m.useState(""),[h,N]=m.useState(""),[v,g]=m.useState(""),[f,b]=m.useState(""),[w,_]=m.useState([]),[k,S]=m.useState([]),[y,E]=m.useState([]),[A,U]=m.useState([]);m.useEffect(()=>{P(),L(),re()},[]);const[D]=Ty(),R=D.get("pr_id");m.useEffect(()=>{R&&H(R)},[R]);const H=async z=>{try{const $=await Vs.get(z),te=$.data||$;N(te.warehouse_id),g(te.shop_id),b(`Fulfilled from PR-${te.request_number}`);const me=[];for(const B of te.items||[]){let p=[];if(B.medicine_id)try{const M=await jt.getBatches(B.medicine_id);p=M.data?.batches||M.data||[]}catch(M){console.error(`Failed to fetch batches for ${B.medicine_id}`,M)}me.push({medicine_id:B.medicine_id,medicine_name:B.medicine_name,medicine_search:B.medicine_name,batch_id:"",batch_number:"",quantity:B.quantity_approved||B.quantity_requested||0,available_batches:p})}_(me)}catch($){console.error("Failed to load PR",$),x("Failed to load purchase request")}};m.useEffect(()=>{!h&&r?.role==="warehouse_admin"&&r?.warehouse_id&&N(r.warehouse_id)},[r,h]);const P=async()=>{try{const z=await Et.list({size:500});S(z.data?.items||z.data||[])}catch(z){console.error("Failed to fetch warehouses",z)}},L=async()=>{try{const z=await At.list({size:500});E(z.data?.items||z.data||[])}catch(z){console.error("Failed to fetch shops",z)}},re=async()=>{try{const z=await jt.list({size:500});U(z.data?.items||z.data||[])}catch(z){console.error("Failed to fetch medicines",z)}},G=()=>{_([...w,{medicine_id:"",batch_id:"",quantity:1,available_batches:[]}])},I=z=>{_(w.filter(($,te)=>te!==z))},T=async(z,$,te)=>{const me=[...w];if($==="medicine_id"){if(me[z]={...me[z],[$]:te,batch_id:"",batch_number:"",available_stock:0,available_batches:[]},te){const B=A.find(p=>p.id===te);me[z].medicine_name=B?.name,me[z].brand=B?.brand;try{const p=await jt.getBatches(te),M=p.data?.batches||p.data||[];me[z].available_batches=M.filter(ne=>(ne.quantity||0)>0)}catch(p){console.error("Failed to fetch batches",p)}}}else if($==="batch_id"){const B=me[z].available_batches?.find(p=>p.id===te);me[z].batch_id=te,me[z].batch_number=B?.batch_number||"",me[z].available_stock=B?.quantity||0,me[z].quantity>(B?.quantity||0)&&(me[z].quantity=B?.quantity||0)}else me[z]={...me[z],[$]:te};_(me)},ce=()=>{if(!h)return x("Please select a warehouse"),!1;if(!v)return x("Please select a shop"),!1;if(w.length===0)return x("Please add at least one item"),!1;for(let z=0;z<w.length;z++){const $=w[z];if(!$.medicine_id||!$.batch_id)return x(`Item ${z+1}: Please select medicine and batch`),!1;if($.quantity<=0)return x(`Item ${z+1}: Quantity must be greater than 0`),!1;if($.available_stock!==void 0&&$.quantity>$.available_stock)return x(`Item ${z+1}: Quantity (${$.quantity}) exceeds available stock (${$.available_stock})`),!1}return!0},oe=async z=>{if(z.preventDefault(),x(""),!!ce()){i(!0);try{const $={warehouse_id:h,shop_id:v,notes:f||void 0,items:w.map(te=>({medicine_id:te.medicine_id,batch_id:te.batch_id,quantity:te.quantity}))};await Ks.create($),n("/dispatches")}catch($){console.error("Failed to create dispatch:",$),x($.response?.data?.detail||"Failed to create dispatch")}finally{i(!1)}}},ye=r?.role==="warehouse_admin";return e.jsx(Zt,{title:"Create New Dispatch",subtitle:"Create a dispatch from warehouse to shop",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),u]}),e.jsxs("form",{onSubmit:oe,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"From Warehouse *"}),e.jsxs("select",{value:h,onChange:z=>N(z.target.value),disabled:ye,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 disabled:opacity-50",required:!0,children:[e.jsx("option",{value:"",children:"Select Warehouse"}),k.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"To Shop *"}),e.jsxs("select",{value:v,onChange:z=>g(z.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",required:!0,children:[e.jsx("option",{value:"",children:"Select Shop"}),y.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Dispatch Items"}),e.jsxs(le,{variant:"secondary",onClick:G,type:"button",disabled:!h,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-1",children:"add"}),"Add Item"]})]}),w.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:'No items added. Click "Add Item" to start.'}):e.jsx("div",{className:"space-y-3",children:w.map((z,$)=>{const te=z.available_stock||0,me=z.quantity||0;let B="bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700";return z.batch_id&&me>te?B="bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":z.batch_id&&me>0&&me>=te*.8&&(B="bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"),e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${B}`,children:[e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Medicine"}),e.jsx(Hl,{value:z.medicine_id,onChange:p=>T($,"medicine_id",p),options:A.map(p=>({value:p.id,label:p.name})),placeholder:"Type medicine name..."})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Brand"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-300 h-[38px] flex items-center",children:z.brand||"-"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Batch"}),e.jsxs("select",{value:z.batch_id,onChange:p=>T($,"batch_id",p.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 h-[38px]",required:!0,disabled:!z.medicine_id,children:[e.jsx("option",{value:"",children:"Select Batch"}),(z.available_batches||[]).map(p=>e.jsxs("option",{value:p.id,children:[p.batch_number," (Exp: ",new Date(p.expiry_date).toLocaleDateString(),") - Qty: ",p.quantity]},p.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",value:z.quantity,onChange:p=>T($,"quantity",parseInt(p.target.value)||0),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 h-[38px]",placeholder:"Qty",min:"1",required:!0}),z.available_stock!==void 0&&e.jsxs("div",{className:`text-xs mt-1 ${me>te?"text-red-600 font-bold":"text-slate-500"}`,children:["Max: ",z.available_stock,me>te&&" (Insufficient Stock!)"]})]})]}),e.jsx(le,{variant:"ghost",onClick:()=>I($),type:"button",className:"!p-1.5 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},$)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:f,onChange:z=>b(z.target.value),rows:3,className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",placeholder:"Add any special instructions or notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",onClick:()=>n("/dispatches"),type:"button",disabled:c,children:"Cancel"}),e.jsxs(le,{variant:"primary",type:"submit",disabled:c||w.length===0,loading:c,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] mr-2",children:"local_shipping"}),"Create Dispatch"]})]})]})]})})})}function lN(){const{id:n}=Kn(),r=He(),{activeEntity:c}=Da(),[i,u]=m.useState(null),[x,h]=m.useState(!0);m.useEffect(()=>{n&&N()},[n]);const N=async()=>{try{h(!0);const g=await Ks.get(n);u(g.data)}catch(g){console.error(g)}finally{h(!1)}};if(x)return e.jsx("div",{className:"p-8",children:"Loading..."});if(!i)return e.jsx("div",{className:"p-8",children:"Dispatch not found"});const v=c?.type==="shop"&&["pending","created","in_transit"].includes(i.status.toLowerCase());return e.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Dispatch #",i.dispatch_number||i.id.slice(0,8)]}),e.jsxs("p",{className:"text-slate-500",children:["From ",i.warehouse_name," to ",i.shop_name]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ye,{variant:i.status==="delivered"?"success":"primary",children:i.status.replace("_"," ")}),v&&e.jsx(le,{variant:"success",onClick:()=>r("/shops/stock",{state:{dispatchId:i.id}}),children:"Receive Stock"}),e.jsx(le,{variant:"ghost",onClick:()=>r(-1),children:"Back"})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase",children:"Quantity"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:i.items?.map((g,f)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-slate-900 dark:text-white font-medium",children:g.medicine_name}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:g.batch_number}),e.jsx("td",{className:"px-6 py-4 text-right font-mono text-slate-900 dark:text-white",children:g.quantity})]},f))})]})})]})}function nN(){const n=He(),{isLoading:r}=dt(),{user:c}=Ke(),i=c?.role,[u,x]=m.useState([]),[h,N]=m.useState(!0),[v,g]=m.useState(""),[f,b]=m.useState(""),[w,_]=m.useState(1),[k,S]=m.useState(0),[y,E]=m.useState(10),[A,U]=m.useState(!1),[D,R]=m.useState([]),[H,P]=m.useState(!1),[L,re]=m.useState({shop_id:"",warehouse_id:"",priority:"normal",items:[{medicine_id:"",quantity:1}]});m.useEffect(()=>{G()},[w,y,f,v]),m.useEffect(()=>{A&&D.length===0&&jt.list({size:5e3}).then(Y=>{R(Y.data?.items||Y.data||[])})},[A]);const G=async()=>{try{N(!0);const Y={page:w,size:y,status:v||void 0};f&&(Y.search=f);const Z=await Vs.list(Y);x(Z.data?.items||[]),S(Z.data?.total||0)}catch(Y){console.error(Y),x([])}finally{N(!1)}},I=async Y=>{try{await Vs.approve(Y,{}),G()}catch(Z){console.error(Z),alert("Failed to approve")}},T=async Y=>{try{await Vs.reject(Y),G()}catch(Z){console.error(Z),alert("Failed to reject")}},{activeEntity:ce}=Da(),oe=ce?.type==="shop";m.useEffect(()=>{A&&oe&&ce?.id&&re(Y=>({...Y,shop_id:ce.id}))},[A,oe,ce]);const ye=async()=>{if(!L.shop_id||!L.warehouse_id||L.items.length===0){alert("Please fill all required fields");return}try{P(!0),await Vs.create({shop_id:L.shop_id,warehouse_id:L.warehouse_id,urgency:L.priority,items:L.items.filter(Y=>Y.medicine_id&&Y.quantity>0).map(Y=>({medicine_id:Y.medicine_id,quantity_requested:Y.quantity}))}),U(!1),re({shop_id:"",warehouse_id:"",priority:"normal",items:[{medicine_id:"",quantity:1}]}),G()}catch(Y){console.error(Y),alert(Y.response?.data?.detail||"Failed to create request")}finally{P(!1)}},z=()=>{re(Y=>({...Y,items:[...Y.items,{medicine_id:"",quantity:1}]}))},$=Y=>{re(Z=>({...Z,items:Z.items.filter((ve,be)=>be!==Y)}))},te=(Y,Z,ve)=>{re(be=>({...be,items:be.items.map((De,ae)=>ae===Y?{...De,[Z]:ve}:De)}))},me={pending:u.filter(Y=>Y.status==="pending").length,approved:u.filter(Y=>Y.status==="approved").length,rejected:u.filter(Y=>Y.status==="rejected").length},B=[{header:"Request #",key:"request_number",render:Y=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"shopping_cart"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white font-mono",children:Y.request_number||Y.id.slice(0,8)}),e.jsx("div",{className:"text-xs text-slate-500",children:new Date(Y.created_at).toLocaleDateString()})]})]})},{header:"Shop",key:"shop_name",render:Y=>Y.shop_name||"N/A"},{header:"Warehouse",key:"warehouse_name",render:Y=>Y.warehouse_name||"N/A"},{header:"Items",key:"total_items",render:Y=>e.jsx("span",{className:"font-mono",children:Y.total_items}),align:"center"},{header:"Priority",key:"priority",render:Y=>e.jsx(Ye,{variant:Y.priority==="urgent"||Y.priority==="critical"?"error":Y.priority==="high"?"warning":"secondary",children:Y.priority||"Normal"}),align:"center"},{header:"Status",key:"status",render:Y=>{const Z=Y.status==="approved"?"success":Y.status==="rejected"?"error":Y.status==="dispatched"?"info":"warning";return e.jsx(Ye,{variant:Z,children:Y.status})},align:"center"},{header:"Actions",key:"id",align:"right",render:Y=>e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>M(Y.id),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-slate-500",title:"View Details",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"visibility"})}),Y.status==="pending"&&(i==="warehouse_admin"||i==="warehouse_employee")&&e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"success",onClick:()=>I(Y.id),className:"!py-1 !px-2 !text-xs",children:"Approve"}),e.jsx(le,{variant:"danger",onClick:()=>T(Y.id),className:"!py-1 !px-2 !text-xs",children:"Reject"})]}),Y.status==="approved"&&(i==="warehouse_admin"||i==="warehouse_employee")&&e.jsx(le,{variant:"primary",onClick:()=>n(`/dispatches/create?pr_id=${Y.id}`),className:"!py-1 !px-2 !text-xs",children:"Create Dispatch"})]})}],[p,M]=m.useState(null),ne=Y=>u.find(Z=>Z.id===Y)?.status;return e.jsxs(fe,{loading:r,children:[e.jsx(fe.Header,{title:"Purchase Requests",subtitle:"Manage stock requests from shops to warehouses",actions:i!=="warehouse_admin"&&i!=="warehouse_employee"&&e.jsxs(le,{variant:"primary",onClick:()=>U(!0),children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"New Request"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Requests",value:k,icon:"list_alt",onClick:()=>g(""),isActive:v===""}),e.jsx(Ne,{title:"Pending",value:me.pending,icon:"pending",onClick:()=>g("pending"),isActive:v==="pending",trend:"neutral"}),e.jsx(Ne,{title:"Approved",value:me.approved,icon:"check_circle",onClick:()=>g("approved"),isActive:v==="approved",trend:"up"}),e.jsx(Ne,{title:"Rejected",value:me.rejected,icon:"cancel",onClick:()=>g("rejected"),isActive:v==="rejected",trend:"down"})]}),e.jsx(fe.DataTable,{columns:B,data:u,loading:h,emptyMessage:"No purchase requests found.",pagination:{currentPage:w,totalPages:Math.ceil(k/y),onPageChange:_,totalItems:k,pageSize:y,onPageSizeChange:Y=>{E(Y),_(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Request List",count:k,searchProps:{value:f,onChange:Y=>{b(Y),_(1)},placeholder:"Search requests..."},actions:e.jsx("div",{className:"flex items-center",children:e.jsxs("select",{value:v,onChange:Y=>{g(Y.target.value),_(1)},className:"px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"dispatched",children:"Dispatched"})]})}),embedded:!0})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-scaleIn border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"New Purchase Request"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create a stock request from a shop to warehouse"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[!oe&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Shop *"}),e.jsx(Gd,{value:L.shop_id,onChange:Y=>re(Z=>({...Z,shop_id:Y})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Warehouse *"}),e.jsx(Hd,{value:L.warehouse_id,onChange:Y=>re(Z=>({...Z,warehouse_id:Y})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Priority"}),e.jsx(Bj,{value:L.priority,onChange:Y=>re(Z=>({...Z,priority:Y})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Items *"}),e.jsx("button",{onClick:z,className:"text-sm text-blue-600 font-medium hover:underline",children:"+ Add Item"})]}),e.jsx("div",{className:"space-y-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:L.items.map((Y,Z)=>e.jsxs("div",{className:"flex gap-2 items-start py-2 border-b border-slate-100 dark:border-slate-800 last:border-0",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Medicine"}),e.jsx(Hl,{value:Y.medicine_id,onChange:ve=>{const be=D.find(De=>De.id===ve);re(De=>({...De,items:De.items.map((ae,se)=>se===Z?{...ae,medicine_id:ve,brand:be?.brand}:ae)}))},options:D.map(ve=>({value:ve.id,label:ve.name})),placeholder:"Select Medicine",className:"w-full"})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Brand"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-300 h-[38px] flex items-center truncate",children:Y.brand||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:Y.quantity,onChange:ve=>te(Z,"quantity",parseInt(ve.target.value)),className:"w-full px-2 py-1.5 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 h-[38px]",placeholder:"Qty"})]})]}),e.jsx("div",{className:"mt-6",children:L.items.length>1&&e.jsx("button",{onClick:()=>$(Z),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg h-[38px] w-[38px] flex items-center justify-center transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})})})]},Z))})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300",children:"Cancel"}),e.jsx(le,{variant:"primary",onClick:ye,disabled:H,children:H?"Creating...":"Create Request"})]})]})}),p&&e.jsx(rN,{requestId:p,onClose:()=>M(null),onApprove:()=>{M(null),I(p)},onReject:()=>{M(null),T(p)},canAction:ne(p)==="pending"&&(i==="warehouse_admin"||i==="warehouse_employee")})]})}function rN({requestId:n,onClose:r,onApprove:c,onReject:i,canAction:u}){const[x,h]=m.useState(null),[N,v]=m.useState(!0);return m.useEffect(()=>{Vs.get(n).then(g=>{h(g.data)}).catch(console.error).finally(()=>v(!1))},[n]),n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-scaleIn border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["#",x?.request_number||n.slice(0,8)]})]}),e.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"p-6",children:N?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"From Shop"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white text-lg",children:x.shop_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"To Warehouse"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white text-lg",children:x.warehouse_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"Status"}),e.jsx(Ye,{variant:x.status==="approved"?"success":x.status==="rejected"?"error":"warning",children:x.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-slate-500",children:"Date"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:new Date(x.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white mb-3",children:"Requested Items"}),e.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qty"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:x.items?.map((g,f)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:g.medicine_name})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:g.quantity_requested})]},f))})]})})]})]}):e.jsx("div",{className:"text-center text-red-500",children:"Failed to load details"})}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Close"}),u&&x&&e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"danger",onClick:i,children:"Reject"}),e.jsx(le,{variant:"success",onClick:c,children:"Approve"})]})]})]})}):null}function iN({isOpen:n,onClose:r,medicineName:c,batches:i,onSelect:u}){const x=[...i].sort((f,b)=>new Date(f.expiry_date).getTime()-new Date(b.expiry_date).getTime()),h=f=>f?new Date(f).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"N/A",N=f=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(f),v=f=>new Date(f)<new Date,g=f=>{const b=new Date,_=new Date(f).getTime()-b.getTime(),k=Math.ceil(_/(1e3*60*60*24));return k>0&&k<=60};return e.jsx(Tt,{isOpen:n,onClose:r,title:`Select Batch - ${c}`,maxWidth:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Multiple batches found for this medicine. Please select one to proceed."}),e.jsx("div",{className:"max-h-96 overflow-y-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Batch #"}),e.jsx("th",{className:"px-4 py-3",children:"Expiry"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"MRP"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Stock"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:x.map(f=>{const b=v(f.expiry_date),w=g(f.expiry_date);return e.jsxs("tr",{className:`
                                            bg-white dark:bg-slate-800 
                                            ${b?"opacity-60 bg-slate-50 dark:bg-slate-900":"hover:bg-slate-50 dark:hover:bg-slate-700"}
                                        `,children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:f.batch_number}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-medium ${b?"text-red-500":w?"text-amber-500":"text-slate-700 dark:text-slate-300"}`,children:h(f.expiry_date)}),b&&e.jsx("span",{className:"text-[10px] text-red-500 font-bold uppercase",children:"Expired"}),w&&!b&&e.jsx("span",{className:"text-[10px] text-amber-500 font-bold uppercase",children:"Expiring Soon"})]})}),e.jsx("td",{className:"px-4 py-3 text-right text-slate-700 dark:text-slate-300",children:N(f.mrp)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium text-slate-900 dark:text-white",children:f.quantity}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx(le,{size:"sm",variant:b?"secondary":"primary",disabled:b||f.quantity<=0,onClick:()=>u(f),children:"Select"})})]},f.id)})})]})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(le,{variant:"ghost",onClick:r,children:"Cancel"})})]})})}function oN({onSelect:n,onNewCustomer:r,selectedCustomer:c}){const[i,u]=m.useState(""),[x,h]=m.useState([]),[N,v]=m.useState(!1),[g,f]=m.useState(!1),b=m.useRef(null);m.useEffect(()=>{function k(S){b.current&&!b.current.contains(S.target)&&f(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[b]),m.useEffect(()=>{const k=setTimeout(()=>{i.length>=2?w():h([])},300);return()=>clearTimeout(k)},[i]);const w=async()=>{v(!0);try{const k=await Ul.list({search:i,size:5});h(k.data?.items||k.data||[]),f(!0)}catch(k){console.error(k)}finally{v(!1)}},_=k=>{n(k),f(!1),u("")};return c?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-800 flex items-center justify-center text-blue-600 dark:text-blue-300 font-bold",children:c.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:c.name}),e.jsx("p",{className:"text-xs text-slate-500",children:c.phone})]})]}),e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>n(null),children:"Change"})]}):e.jsxs("div",{className:"relative",ref:b,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:"Search customer by name or phone...",value:i,onChange:k=>{u(k.target.value),f(!0)},onFocus:()=>i.length>=2&&f(!0),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none"}),N&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"})]}),e.jsxs(le,{onClick:r,className:"whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-1",children:"person_add"}),"New"]})]}),g&&i.length>=2&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto",children:x.length>0?e.jsx("div",{className:"py-1",children:x.map(k=>e.jsxs("button",{onClick:()=>_(k),className:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center gap-3 border-b border-slate-50 dark:border-slate-700 last:border-b-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500 text-xs font-bold",children:k.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:k.name}),e.jsx("p",{className:"text-xs text-slate-500",children:k.phone})]}),k.loyalty_points&&k.loyalty_points>0&&e.jsxs("div",{className:"ml-auto text-xs text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:[k.loyalty_points," pts"]})]},k.id))}):e.jsxs("div",{className:"p-4 text-center text-slate-500 text-sm",children:[e.jsx("p",{children:"No customers found."}),e.jsx("button",{onClick:r,className:"text-blue-600 font-medium mt-1 hover:underline",children:"Create new customer?"})]})})]})}function cN({isOpen:n,onClose:r,onSuccess:c,shopId:i}){const[u,x]=m.useState(!1),[h,N]=m.useState({name:"",phone:"",email:"",address:"",city:"",pincode:""}),v=async g=>{g.preventDefault(),x(!0);try{console.log("Creating customer with shop_id:",i);const f=await Ul.create({...h,shop_id:i,customer_type:"regular"});Ve.success("Customer created successfully");const b=f.data?.data?.id||f.data?.id;c({id:b,...h,shop_id:i}),r()}catch(f){console.error("Failed to save customer:",f),console.error("Error response:",f.response?.data);const b=f.response?.data?.detail;let w="Failed to create customer";typeof b=="string"?w=b:Array.isArray(b)?w=b.map(_=>_.msg||_.message||"Validation error").join(", "):b&&(w=JSON.stringify(b)),Ve.error(w)}finally{x(!1)}};return e.jsx(Tt,{isOpen:n,onClose:r,title:"Add New Customer",maxWidth:"md",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx(pe,{label:"Customer Name",value:h.name,onChange:g=>N({...h,name:g.target.value}),required:!0,placeholder:"Enter full name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Phone Number",value:h.phone,onChange:g=>N({...h,phone:g.target.value}),required:!0,placeholder:"10-digit mobile",type:"tel"}),e.jsx(pe,{label:"Email (Optional)",value:h.email,onChange:g=>N({...h,email:g.target.value}),placeholder:"email@example.com",type:"email"})]}),e.jsx(pe,{label:"Address",value:h.address,onChange:g=>N({...h,address:g.target.value}),placeholder:"Street, locality"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"City",value:h.city,onChange:g=>N({...h,city:g.target.value}),placeholder:"City"}),e.jsx(pe,{label:"Pincode",value:h.pincode,onChange:g=>N({...h,pincode:g.target.value}),placeholder:"Pincode"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(le,{type:"button",variant:"secondary",onClick:r,className:"flex-1",children:"Cancel"}),e.jsx(le,{type:"submit",variant:"primary",loading:u,className:"flex-1",children:"Create Customer"})]})]})})}const dN=({isOpen:n,onClose:r,title:c,children:i,width:u="w-96"})=>(m.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),n?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),e.jsxs("div",{className:`absolute inset-y-0 right-0 ${u} bg-white dark:bg-slate-800 shadow-xl flex flex-col`,children:[e.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:c}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i})]})]}):null);function uN(){const n=He(),{activeEntity:r}=Da(),{isLoading:c}=dt();if(m.useEffect(()=>{(!r||r.type!=="shop")&&n("/")},[r,n]),!r||r.type!=="shop")return null;if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-120px)]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})});const i=r.id,u=[{code:"cash",name:"Cash"},{code:"card",name:"Credit/Debit Card"},{code:"upi",name:"UPI / QR Code"},{code:"net_banking",name:"Net Banking"},{code:"cheque",name:"Cheque"},{code:"credit",name:"Credit (Postpaid)"}],[x,h]=m.useState([]),[N,v]=m.useState(""),[g,f]=m.useState([]),[b,w]=m.useState("cash"),[_,k]=m.useState(!1),[S,y]=m.useState(null),[E,A]=m.useState(!1),[U,D]=m.useState(!1),[R,H]=m.useState(null),[P,L]=m.useState([]),[re,G]=m.useState(!1),[I,T]=m.useState(null),[ce,oe]=m.useState(""),[ye,z]=m.useState(""),[$,te]=m.useState(""),[me,B]=m.useState(""),[p,M]=m.useState(""),ne=m.useRef(null);m.useEffect(()=>{const ue=setTimeout(()=>{N.length>=2?Y():h([])},300);return()=>clearTimeout(ue)},[N]);const Y=async()=>{try{const ue=new AbortController,Ee=setTimeout(()=>ue.abort(),1e4),Ae=await jt.list({search:N,shop_id:i});clearTimeout(Ee),h(Ae.data?.items||Ae.data||[])}catch(ue){console.error("Search error:",ue),ue.name==="AbortError"&&Ve.error("Search timed out. Please try again.")}},Z=async ue=>{try{const Pe=((await jt.getBatches(ue.id)).data?.batches||[]).filter(bt=>bt.quantity>0);if(Pe.length===0){Ve.error("No stock available for this medicine");return}Pe.length===1?be(ue,Pe[0]):(H(ue),L(Pe),D(!0))}catch(Ee){console.error(Ee),Ve.error("Failed to fetch batch details")}},ve=ue=>{R&&(be(R,ue),D(!1),H(null),L([]))},be=(ue,Ee)=>{if(ue.is_prescription_required&&!S){Ve.warning("Prescription required! Please select a customer first.");return}const Ae=g.findIndex(Pe=>Pe.medicine.id===ue.id&&Pe.batch.id===Ee.id);if(Ae>=0){if(g[Ae].quantity+1>Ee.quantity){Ve.warning(`Only ${Ee.quantity} units available in this batch`);return}const bt=[...g];bt[Ae].quantity+=1,f(bt)}else{const Pe={medicine:ue,batch:Ee,quantity:1,discount:0,tax_rate:ue.gst_rate||12};f([...g,Pe])}v(""),h([]),ne.current?.focus()},De=(ue,Ee)=>{const Ae=g[ue];if(Ee<=0){const Pe=g.filter((bt,Sa)=>Sa!==ue);f(Pe)}else{if(Ee>Ae.batch.quantity){Ve.warning(`Only ${Ae.batch.quantity} units available`);return}const Pe=[...g];Pe[ue].quantity=Ee,f(Pe)}},ae=(ue,Ee)=>{const Ae=[...g];Ae[ue].discount=Math.max(0,Ee),f(Ae)},se=ue=>{f(g.filter((Ee,Ae)=>Ae!==ue))},W=ue=>{const Ee=ue.batch?.selling_price||ue.batch?.mrp||0;return isNaN(Ee)?0:Ee},ge=ue=>{const Ee=W(ue)*(ue.quantity||0);return isNaN(Ee)?0:Ee},xe=ue=>{const Ee=ue.discount||0;return isNaN(Ee)?0:Ee},_e=ue=>{const Ee=ge(ue)-xe(ue);return isNaN(Ee)?0:Ee},Je=ue=>{const Ee=ue.tax_rate||0,Ae=_e(ue)*(Ee/100);return isNaN(Ae)?0:Ae},Ra=()=>{const ue=g.reduce((Ee,Ae)=>Ee+ge(Ae),0);return isNaN(ue)?0:ue},es=()=>{const ue=g.reduce((Ee,Ae)=>Ee+xe(Ae),0);return isNaN(ue)?0:ue},Cs=()=>{const ue=Ra()-es();return isNaN(ue)?0:ue},Ma=()=>{const ue=g.reduce((Ee,Ae)=>Ee+Je(Ae),0);return isNaN(ue)?0:ue},Bt=()=>{const ue=Cs()+Ma();return isNaN(ue)?0:ue},ts=()=>{const ue=parseFloat(ce||"0")-Bt();return isNaN(ue)?0:ue},Nt=ue=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(ue),Ql=()=>{const ue=Bt(),Ee=ce&&!isNaN(parseFloat(ce))?parseFloat(ce):ue;if(ue-Ee>1&&!S&&b!=="cash"&&b!=="credit")return{valid:!1,error:"Customer selection required for partial payment"};if(b==="credit")return S?p?{valid:!0}:{valid:!1,error:"Due date required for credit payment"}:{valid:!1,error:"Customer selection required for credit payment"};if(["upi","net_banking"].includes(b)&&!ye)return{valid:!1,error:`${b==="upi"?"UPI":"Net Banking"} reference number required`};if(b==="card"&&!ye)return{valid:!1,error:"Card transaction ID required"};if(b==="cheque"){if(!$)return{valid:!1,error:"Cheque number required"};if(!me)return{valid:!1,error:"Cheque date required"}}return{valid:!0}},Ot=async()=>{if(g.length===0)return Ve.warning("Cart is empty");const ue=Ql();if(!ue.valid){Ve.error(ue.error);return}if(g.some(Ae=>Ae.medicine.is_prescription_required)&&!S){Ve.error("Customer selection required for prescription medicines!");return}k(!0);try{const Ae=Bt(),Pe=ce&&!isNaN(parseFloat(ce))?parseFloat(ce):Ae,bt={shop_id:i,customer_id:S?.id,items:g.map(ya=>{const as=W(ya)*ya.quantity,Dt=as>0?ya.discount/as*100:0,va=ya.batch?.selling_price||ya.batch?.mrp||0,Rt=ya.tax_rate||12;return{medicine_id:ya.medicine.id,batch_id:ya.batch.id,quantity:Math.floor(ya.quantity)||1,unit_price:isNaN(va)?0:va,discount_percent:Number.isFinite(Dt)?Dt:0,tax_percent:isNaN(Rt)?12:Rt}}),payment_method:b,paid_amount:isNaN(Pe)?0:Pe,discount_percent:0,payment_reference:ye||void 0,cheque_number:$||void 0,cheque_date:me||void 0,due_date:p||void 0};console.log("=== Invoice Payload ==="),console.log("Total from getTotal():",Ae),console.log("Paid Amount:",Pe),console.log("Items count:",bt.items.length),console.log("Full Payload:",JSON.stringify(bt,null,2)),console.log("======================");const Sa=await Xs.create(bt),sr=Sa.data?.data||Sa.data;console.log("=== Invoice Response ==="),console.log("Full response:",Sa.data),console.log("Invoice data:",sr),console.log("========================"),T(sr),G(!0),f([]),y(null),oe(""),Ve.success("Invoice created successfully")}catch(Ae){console.error("Invoice creation error:",Ae);let Pe="Failed to create invoice";if(Ae.code==="ECONNABORTED"||Ae.message?.includes("timeout"))Pe="Request timed out. Please check your connection and try again.";else if(Ae.response?.data?.detail){const bt=Ae.response.data.detail;Array.isArray(bt)?Pe=bt.map(Sa=>Sa.msg||"Validation error").join(", "):typeof bt=="object"?Pe=bt.msg||JSON.stringify(bt):Pe=String(bt)}else Ae.response||(Pe="Network error. Please check your connection.");Ve.error(Pe)}finally{k(!1)}};return e.jsxs("div",{className:"flex h-[calc(100vh-120px)] gap-6",children:[e.jsx(iN,{isOpen:U,onClose:()=>D(!1),medicineName:R?.name||"",batches:P,onSelect:ve}),e.jsx(cN,{isOpen:E,onClose:()=>A(!1),onSuccess:ue=>{y(ue),Ve.success("Customer added to sale")},shopId:i}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"POS Billing"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"shopping_cart"}),g.length," items"]})]}),e.jsxs("div",{className:"relative z-[20]",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400",children:"search"}),e.jsx("input",{ref:ne,type:"text",placeholder:"Search medicine by name, generic or brand...",value:N,onChange:ue=>v(ue.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-lg shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all",autoFocus:!0}),x.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-96 overflow-auto z-50",children:x.map(ue=>e.jsxs("button",{onClick:()=>Z(ue),className:"w-full px-4 py-3 text-left hover:bg-slate-50 dark:hover:bg-slate-700 flex justify-between items-center border-b border-slate-50 dark:border-slate-700 last:border-b-0 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:ue.name}),e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400 font-medium",children:[ue.stock_quantity," in stock"]})]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:[ue.generic_name,ue.brand&&`  ${ue.brand}`,ue.manufacturer&&`  ${ue.manufacturer}`]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:Nt(ue.mrp)}),e.jsx("p",{className:"text-xs text-slate-400",children:"MRP"})]})]},ue.id))})]}),e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col shadow-sm",children:e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-500 uppercase w-32",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-24",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-24",children:"Disc"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase w-28",children:"Total"}),e.jsx("th",{className:"w-12"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:g.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-4 py-24 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-400",children:"shopping_cart"})}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium mb-1",children:"Your cart is empty"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto",children:"Search for medicines above to add them to your billing cart."})]})}):g.map((ue,Ee)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:ue.medicine.name}),e.jsx("p",{className:"text-xs text-slate-500",children:ue.medicine.generic_name})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:ue.batch.batch_number}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["Exp: ",new Date(ue.batch.expiry_date).toLocaleDateString()]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>De(Ee,ue.quantity-1),className:"w-7 h-7 rounded bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:"-"}),e.jsx("input",{type:"number",value:ue.quantity,onChange:Ae=>De(Ee,parseInt(Ae.target.value)||1),className:"w-12 text-center font-medium border border-slate-200 dark:border-slate-700 rounded py-1 bg-transparent text-slate-900 dark:text-white text-sm"}),e.jsx("button",{onClick:()=>De(Ee,ue.quantity+1),className:"w-7 h-7 rounded bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 text-slate-600 dark:text-slate-300 flex items-center justify-center",children:"+"})]})}),e.jsxs("td",{className:"px-4 py-3 text-right text-slate-700 dark:text-slate-300 text-sm",children:[ue.batch.selling_price&&ue.batch.selling_price!==ue.batch.mrp&&e.jsx("div",{className:"text-xs text-slate-400 line-through mr-1 inline-block",children:Nt(ue.batch.mrp)}),Nt(ue.batch.selling_price||ue.batch.mrp)]}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("input",{type:"number",value:ue.discount||"",onChange:Ae=>ae(Ee,parseFloat(Ae.target.value)||0),placeholder:"0",className:"w-16 text-right border border-slate-200 dark:border-slate-700 rounded py-1 px-2 bg-transparent text-sm focus:ring-1 focus:ring-blue-500 outline-none"})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold text-slate-900 dark:text-white text-sm",children:Nt((ue.batch.selling_price||ue.batch.mrp)*ue.quantity-ue.discount)}),e.jsx("td",{className:"px-2",children:e.jsx("button",{onClick:()=>se(Ee),className:"text-slate-400 hover:text-red-500 rounded p-1 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})})]},`${ue.medicine.id}-${ue.batch.id}`))})]})})})]}),e.jsxs("div",{className:"w-96 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col shadow-sm max-h-[calc(100vh-120px)] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Checkout Details"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full font-medium",children:"Running"})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Customer"}),e.jsx(oN,{onSelect:y,selectedCustomer:S,onNewCustomer:()=>A(!0)})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:u?.map(ue=>e.jsx("button",{onClick:()=>w(ue.code),className:`py-2 px-3 rounded-lg text-sm font-medium border transition-all duration-200 ${b===ue.code?"bg-blue-600 border-blue-600 text-white shadow-md":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:ue.name})},ue.code))||[e.jsx("button",{onClick:()=>w("cash"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${b==="cash"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"Cash"},"cash"),e.jsx("button",{onClick:()=>w("card"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${b==="card"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"Card"},"card"),e.jsx("button",{onClick:()=>w("upi"),className:`py-2 px-3 rounded-lg text-sm font-medium border ${b==="upi"?"bg-blue-600 text-white border-blue-600":"border-slate-200"}`,children:"UPI"},"upi")]})]}),["upi","card","net_banking"].includes(b)&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[b==="card"?"Transaction ID":"Reference Number"," *"]}),e.jsx("input",{type:"text",value:ye,onChange:ue=>z(ue.target.value),placeholder:`Enter ${b==="card"?"transaction ID":"reference number"}`,className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),b==="cheque"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Cheque Number *"}),e.jsx("input",{type:"text",value:$,onChange:ue=>te(ue.target.value),placeholder:"Enter cheque number",className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Cheque Date *"}),e.jsx("input",{type:"date",value:me,onChange:ue=>B(ue.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),b==="credit"&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Due Date *"}),e.jsx("input",{type:"date",value:p,onChange:ue=>M(ue.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[b==="cash"?"Amount Received":"Amount Paid",b==="credit"&&" (Optional)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-medium z-10 pointer-events-none",children:""}),e.jsx("input",{type:"number",value:ce,onChange:ue=>oe(ue.target.value),placeholder:Bt().toFixed(2),disabled:!["cash","credit"].includes(b),className:`w-full pl-8 pr-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 text-lg font-semibold text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none ${["cash","credit"].includes(b)?"bg-slate-50 dark:bg-slate-900":"bg-slate-100 dark:bg-slate-900/50 cursor-not-allowed"}`})]}),b==="cash"&&parseFloat(ce)>=Bt()&&Bt()>0&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 px-3 py-2 rounded-lg text-sm font-medium flex justify-between",children:[e.jsx("span",{children:"Change to Return:"}),e.jsx("span",{children:Nt(ts())})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"space-y-3 pt-6 border-t border-dashed border-slate-300 dark:border-slate-600",children:[e.jsxs("div",{className:"flex justify-between text-slate-600 dark:text-slate-400 text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:Nt(Ra())})]}),es()>0&&e.jsxs("div",{className:"flex justify-between text-green-600 text-sm",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-medium",children:["-",Nt(es())]})]}),e.jsxs("div",{className:"flex justify-between text-slate-600 dark:text-slate-400 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:["GST (12%)",e.jsx("span",{className:"text-[10px] text-slate-400",children:"(Auto)"})]}),e.jsx("span",{className:"font-medium",children:Nt(Ma())})]}),e.jsxs("div",{className:"flex justify-between items-end pt-2",children:[e.jsx("span",{className:"text-slate-900 dark:text-white font-bold text-lg",children:"Total Amount"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:Nt(Bt())})]})]}),e.jsx("button",{onClick:Ot,disabled:_||g.length===0,className:"mt-6 w-full py-4 bg-slate-900 hover:bg-slate-800 text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-xl active:scale-[0.98]",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Complete Sale"}),e.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]}),e.jsx(dN,{isOpen:re,onClose:()=>{G(!1),T(null)},title:"Payment Receipt",width:"w-[400px]",children:I&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-4xl text-green-600 dark:text-green-400",children:"check_circle"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-slate-500",children:["Invoice #",I.invoice_number||"N/A"]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-500",children:"Customer"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:I.customer_id?S?.name:"Walk-in Customer"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-slate-500",children:"Payment Method"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white capitalize",children:String(I.payment_method||"").replace("_"," ")})]}),e.jsxs("div",{className:"pt-2 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Total Amount"}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Nt(Number(I.total_amount)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Amount Paid"}),e.jsx("span",{className:"font-bold text-green-600",children:Nt(Number(I.paid_amount)||0)})]}),(Number(I.balance_amount)||0)>0&&e.jsxs("div",{className:"flex justify-between items-center text-lg text-red-600 font-bold",children:[e.jsx("span",{children:"Balance Due"}),e.jsx("span",{children:Nt(Number(I.balance_amount)||0)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center justify-center gap-2 px-4 py-3 border border-slate-200 dark:border-slate-700 rounded-xl font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"print"}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>{G(!1),T(null),f([]),y(null),oe(""),w("cash")},className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-blue-900/20",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"}),"New Sale"]})]})]})})]})}function mN(){const[n,r]=m.useState([]),[c,i]=m.useState(!0),[u,x]=m.useState("all"),[h,N]=m.useState("");m.useEffect(()=>{v()},[u,h]);const v=async()=>{i(!0);try{const y={size:50};u==="unread"&&(y.is_read=!1),u==="read"&&(y.is_read=!0),h&&(y.notification_type=h);const E=await Ni.list(y);r(E.data?.items||E.data||[])}catch(y){console.error("Error loading notifications:",y)}finally{i(!1)}},g=async y=>{try{await Ni.markRead(y),r(E=>E.map(A=>A.id===y?{...A,is_read:!0}:A))}catch(E){console.error("Error marking notification as read:",E)}},f=async()=>{try{await Ni.markAllRead(),r(y=>y.map(E=>({...E,is_read:!0})))}catch(y){console.error("Error marking all as read:",y)}},b=async y=>{try{await Ni.delete(y),r(E=>E.filter(A=>A.id!==y))}catch(E){console.error("Error deleting notification:",E)}},w=y=>{const E={low_stock:"",expiry_alert:"",order_received:"",dispatch_update:"",payment_received:"",system:"",default:""};return E[y]||E.default},_=y=>{const E={high:"#ef4444",medium:"#f59e0b",low:"#10b981"};return E[y]||E.medium},k=y=>{const E=new Date(y),U=new Date().getTime()-E.getTime();return U<6e4?"Just now":U<36e5?`${Math.floor(U/6e4)}m ago`:U<864e5?`${Math.floor(U/36e5)}h ago`:U<6048e5?`${Math.floor(U/864e5)}d ago`:E.toLocaleDateString()},S=Array.isArray(n)?n.filter(y=>!y.is_read).length:0;return e.jsxs("div",{className:"notifications-page",children:[e.jsx("style",{children:`
                .notifications-page {
                    padding: 24px;
                    max-width: 900px;
                    margin: 0 auto;
                }
                .page-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                .page-title {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                }
                .page-title h1 {
                    font-size: 24px;
                    font-weight: 600;
                    color: #1a1a2e;
                    margin: 0;
                }
                .unread-badge {
                    background: #ef4444;
                    color: white;
                    padding: 4px 12px;
                    border-radius: 20px;
                    font-size: 13px;
                    font-weight: 600;
                }
                .btn-mark-all {
                    padding: 10px 20px;
                    background: #4a6cf7;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                }
                .btn-mark-all:hover {
                    background: #3b5ce4;
                }
                .btn-mark-all:disabled {
                    opacity: 0.5;
                    cursor: not-allowed;
                }
                .filters {
                    display: flex;
                    gap: 16px;
                    margin-bottom: 24px;
                }
                .filter-tabs {
                    display: flex;
                    background: #f0f4ff;
                    border-radius: 8px;
                    padding: 4px;
                }
                .filter-tab {
                    padding: 8px 16px;
                    border: none;
                    background: transparent;
                    border-radius: 6px;
                    cursor: pointer;
                    font-weight: 500;
                    color: #666;
                    transition: all 0.2s;
                }
                .filter-tab.active {
                    background: white;
                    color: #4a6cf7;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                }
                .type-filter {
                    padding: 8px 12px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    font-size: 14px;
                }
                .notifications-list {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                }
                .notification-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 16px;
                    display: flex;
                    gap: 16px;
                    transition: all 0.2s;
                    cursor: pointer;
                }
                .notification-card:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
                }
                .notification-card.unread {
                    border-left: 4px solid #4a6cf7;
                    background: #f8faff;
                }
                .notification-icon {
                    width: 48px;
                    height: 48px;
                    border-radius: 12px;
                    background: #f0f4ff;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    flex-shrink: 0;
                }
                .notification-content {
                    flex: 1;
                    min-width: 0;
                }
                .notification-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 4px;
                }
                .notification-title {
                    font-weight: 600;
                    color: #1a1a2e;
                    font-size: 15px;
                }
                .notification-time {
                    font-size: 12px;
                    color: #999;
                    white-space: nowrap;
                }
                .notification-message {
                    color: #666;
                    font-size: 14px;
                    line-height: 1.5;
                }
                .notification-meta {
                    display: flex;
                    gap: 12px;
                    margin-top: 8px;
                    align-items: center;
                }
                .priority-badge {
                    padding: 2px 8px;
                    border-radius: 4px;
                    font-size: 11px;
                    font-weight: 600;
                    text-transform: uppercase;
                    color: white;
                }
                .type-badge {
                    padding: 2px 8px;
                    background: #e0e7ff;
                    color: #4a6cf7;
                    border-radius: 4px;
                    font-size: 11px;
                    font-weight: 500;
                }
                .notification-actions {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
                .action-btn {
                    padding: 6px 12px;
                    border: 1px solid #ddd;
                    background: white;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 12px;
                    transition: all 0.2s;
                }
                .action-btn:hover {
                    background: #f5f5f5;
                }
                .action-btn.delete:hover {
                    background: #fee2e2;
                    border-color: #ef4444;
                    color: #ef4444;
                }
                .empty-state {
                    text-align: center;
                    padding: 60px 20px;
                    color: #999;
                }
                .empty-state-icon {
                    font-size: 64px;
                    margin-bottom: 16px;
                }
                .loading {
                    text-align: center;
                    padding: 60px;
                    color: #666;
                }
            `}),e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"page-title",children:[e.jsx("h1",{children:" Notifications"}),S>0&&e.jsxs("span",{className:"unread-badge",children:[S," unread"]})]}),e.jsx("button",{className:"btn-mark-all",onClick:f,disabled:S===0,children:"Mark all as read"})]}),e.jsxs("div",{className:"filters",children:[e.jsxs("div",{className:"filter-tabs",children:[e.jsx("button",{className:`filter-tab ${u==="all"?"active":""}`,onClick:()=>x("all"),children:"All"}),e.jsx("button",{className:`filter-tab ${u==="unread"?"active":""}`,onClick:()=>x("unread"),children:"Unread"}),e.jsx("button",{className:`filter-tab ${u==="read"?"active":""}`,onClick:()=>x("read"),children:"Read"})]}),e.jsxs("select",{className:"type-filter",value:h,onChange:y=>N(y.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"low_stock",children:"Low Stock"}),e.jsx("option",{value:"expiry_alert",children:"Expiry Alert"}),e.jsx("option",{value:"order_received",children:"Orders"}),e.jsx("option",{value:"dispatch_update",children:"Dispatch"}),e.jsx("option",{value:"payment_received",children:"Payments"}),e.jsx("option",{value:"system",children:"System"})]})]}),c?e.jsx("div",{className:"loading",children:"Loading notifications..."}):!Array.isArray(n)||n.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:""}),e.jsx("h3",{children:"No notifications"}),e.jsx("p",{children:"You're all caught up!"})]}):e.jsx("div",{className:"notifications-list",children:n.map(y=>e.jsxs("div",{className:`notification-card ${y.is_read?"":"unread"}`,onClick:()=>!y.is_read&&g(y.id),children:[e.jsx("div",{className:"notification-icon",children:w(y.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsxs("div",{className:"notification-header",children:[e.jsx("span",{className:"notification-title",children:y.title}),e.jsx("span",{className:"notification-time",children:k(y.created_at)})]}),e.jsx("p",{className:"notification-message",children:y.message}),e.jsxs("div",{className:"notification-meta",children:[e.jsx("span",{className:"priority-badge",style:{backgroundColor:_(y.priority)},children:y.priority}),e.jsx("span",{className:"type-badge",children:y.type.replace(/_/g," ")})]})]}),e.jsxs("div",{className:"notification-actions",onClick:E=>E.stopPropagation(),children:[!y.is_read&&e.jsx("button",{className:"action-btn",onClick:()=>g(y.id),children:" Read"}),e.jsx("button",{className:"action-btn delete",onClick:()=>b(y.id),children:""})]})]},y.id))})]})}function fd(){const{activeEntity:n,scope:r}=Da(),[c,i]=m.useState("stock"),[u,x]=m.useState([]),[h,N]=m.useState([]),[v,g]=m.useState(!0),[f,b]=m.useState(""),[w,_]=m.useState(""),[k,S]=m.useState(""),[y,E]=m.useState(1),[A,U]=m.useState(0),[D,R]=m.useState(20);m.useEffect(()=>{c==="stock"?H():P()},[c,y,D,f,w,k,n]);const H=async()=>{g(!0);try{let T;const ce={page:y,size:D};if(k&&(ce.search=k),n?.type==="warehouse")T=await Et.getStock(n.id,ce);else if(n?.type==="shop")T=await At.getStock(n.id,ce);else if(r==="global")if(f)T=await Et.getStock(f,ce);else{N([]),U(0),g(!1);return}T?.data&&(N(T.data.items||[]),U(T.data.total||0))}catch(T){console.error("Failed to fetch stock:",T),N([])}finally{g(!1)}},P=async()=>{try{g(!0);const T={page:y,size:D};n?.type==="warehouse"?T.warehouse_id=n.id:n?.type==="shop"?T.shop_id=n.id:r==="global"&&f&&(T.warehouse_id=f),w&&(T.movement_type=w);const ce=await Bl.getMovements(T);let oe=[];ce.data&&(Array.isArray(ce.data)?oe=ce.data:ce.data.items&&Array.isArray(ce.data.items)?oe=ce.data.items:ce.data.data&&Array.isArray(ce.data.data)&&(oe=ce.data.data)),x(oe),U(ce.data?.total||oe.length)}catch(T){console.error("Failed to fetch movements:",T),x([]),U(0)}finally{g(!1)}},L=T=>{switch(T){case"in":return"success";case"out":return"error";case"transfer":return"info";case"adjustment":return"warning";default:return"secondary"}},re=T=>{switch(T){case"in":return"login";case"out":return"logout";case"transfer":return"swap_horiz";case"adjustment":return"tune";default:return"history"}},G=[{header:"Medicine Name",key:"medicine_name",render:T=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:T.medicine_name}),e.jsx("p",{className:"text-[11px] text-slate-500",children:T.medicine_code||"N/A"})]})},{header:"Brand",key:"brand",className:"hidden md:table-cell",render:T=>e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:T.brand||"-"})},{header:"Batch Info",key:"batch_number",render:T=>e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-xs bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:T.batch_number}),T.expiry_date&&e.jsxs("p",{className:"text-[10px] text-slate-500 mt-0.5",children:["Exp: ",new Date(T.expiry_date).toLocaleDateString()]})]})},{header:"Location",key:"rack_name",className:"hidden lg:table-cell",render:T=>e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:T.rack_name||T.rack_number?e.jsxs("span",{children:[T.rack_name," ",T.rack_number?`(${T.rack_number})`:""]}):e.jsx("span",{className:"italic text-slate-400",children:"No Rack"})})},{header:"Quantity",key:"quantity",align:"right",render:T=>e.jsx("span",{className:"font-mono font-medium text-slate-900 dark:text-white",children:T.quantity.toLocaleString()})}],I=[{header:"Details",key:"id",render:T=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[11px] font-mono text-slate-500",children:T.reference_type.toUpperCase()}),e.jsxs("span",{className:"text-[11px] text-slate-400",children:["By: ",T.performed_by||"System"]})]})},{header:"Product",key:"medicine_name",render:T=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:T.medicine_name}),e.jsxs("p",{className:"text-[11px] text-slate-500",children:["Batch: ",T.batch_number]})]})},{header:"Type",key:"movement_type",render:T=>e.jsxs(Ye,{variant:L(T.movement_type),className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:re(T.movement_type)}),e.jsx("span",{className:"capitalize",children:T.movement_type})]})},{header:"Qty",key:"quantity",align:"right",render:T=>e.jsxs("span",{className:`font-mono text-sm font-medium ${T.movement_type==="out"?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[T.movement_type==="out"?"-":"+",Math.abs(T.quantity)]})},{header:"Date",key:"created_at",align:"right",render:T=>e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:new Date(T.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-[10px] text-slate-400",children:new Date(T.created_at).toLocaleTimeString()})]})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Inventory Management",subtitle:`Manage stock and view history ${r==="global"?"across all locations":n?.name?`for ${n.name}`:""}`,actions:e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>{i("stock"),E(1)},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${c==="stock"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Current Stock"}),e.jsx("button",{onClick:()=>{i("movements"),E(1)},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${c==="movements"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"History"})]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:c==="stock"?"Total Stock Items":"Total Movements",value:A,icon:c==="stock"?"inventory_2":"history",onClick:()=>{},isActive:!0}),e.jsx(Ne,{title:"Stock In",value:"-",icon:"login",trend:"neutral"}),e.jsx(Ne,{title:"Stock Out",value:"-",icon:"logout",trend:"neutral"}),e.jsx(Ne,{title:"Transfers",value:"-",icon:"swap_horiz",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:c==="stock"?G:I,data:c==="stock"?h:u,loading:v,emptyMessage:c==="stock"?"No stock found in this location.":"No stock movements found.",pagination:{currentPage:y,totalPages:Math.ceil(A/D),onPageChange:E,totalItems:A,pageSize:D,onPageSizeChange:T=>{R(T),E(1)}},headerSlot:e.jsx(fe.ListControls,{title:c==="stock"?"Stock List":"Movement List",count:A,searchProps:c==="stock"?{value:k,onChange:T=>{S(T),E(1)},placeholder:"Search medicines..."}:void 0,actions:e.jsxs("div",{className:"flex items-center gap-2",children:[r==="global"&&e.jsxs("select",{value:f,onChange:T=>{b(T.target.value),E(1)},className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),e.jsx("option",{value:"WH001",children:"Central Warehouse"})]}),c==="movements"&&e.jsxs("select",{value:w,onChange:T=>{_(T.target.value),E(1)},className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"in",children:"Stock In"}),e.jsx("option",{value:"out",children:"Stock Out"}),e.jsx("option",{value:"transfer",children:"Transfer"}),e.jsx("option",{value:"adjustment",children:"Adjustment"})]})]}),embedded:!0})})]})}function hN(){const n=He(),{refresh:r}=dt(),[c,i]=m.useState({name:"",code:"",address:"",city:"",state:"",country:"India",pincode:"",phone:"",email:"",capacity:1e4}),[u,x]=m.useState(!1),[h,N]=m.useState(""),v=async g=>{if(g.preventDefault(),N(""),!c.name||!c.code||!c.city||!c.state){N("Please fill in all required fields (Name, Code, City, State)");return}x(!0);try{console.log("Sending warehouse data:",c),await Et.create(c),await r(),n("/warehouses")}catch(f){console.error("Failed to create warehouse:",f),N(f.response?.data?.detail||"Failed to create warehouse")}finally{x(!1)}};return e.jsx(Zt,{title:"Add New Warehouse",description:"Create a new distribution center",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:v,children:e.jsxs(Xe,{className:"space-y-6",children:[h&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:h}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Warehouse Name *",value:c.name,onChange:g=>i({...c,name:g.target.value}),placeholder:"Main Warehouse",required:!0}),e.jsx(pe,{label:"Code *",value:c.code,onChange:g=>i({...c,code:g.target.value.toUpperCase()}),placeholder:"WH001",required:!0,className:"font-mono"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:c.address,onChange:g=>i({...c,address:g.target.value}),className:"input min-h-[80px] py-2",placeholder:"Street address..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"City *",value:c.city,onChange:g=>i({...c,city:g.target.value}),placeholder:"Chennai",required:!0}),e.jsx(pe,{label:"State *",value:c.state,onChange:g=>i({...c,state:g.target.value}),placeholder:"Tamil Nadu",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(pe,{label:"Pincode",value:c.pincode,onChange:g=>i({...c,pincode:g.target.value}),placeholder:"600001"}),e.jsx(pe,{label:"Phone",type:"tel",value:c.phone,onChange:g=>i({...c,phone:g.target.value}),placeholder:"+91 9876543210"}),e.jsx(pe,{label:"Capacity",type:"number",value:c.capacity,onChange:g=>i({...c,capacity:parseInt(g.target.value)||0}),placeholder:"10000"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(pe,{label:"Email",type:"email",value:c.email,onChange:g=>i({...c,email:g.target.value}),placeholder:"warehouse@example.com"})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>n("/warehouses"),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:u,children:u?"Creating...":"Create Warehouse"})]})]})})})})}function xN(){const n=He(),{id:r}=Kn(),[c,i]=m.useState(!0),[u,x]=m.useState({name:"",code:"",address:"",city:"",state:"",country:"India",pincode:"",phone:"",email:"",capacity:1e4}),[h,N]=m.useState(!1),[v,g]=m.useState("");m.useEffect(()=>{f()},[r]);const f=async()=>{try{const _=(await Et.get(r)).data;x({name:_.name||"",code:_.code||"",address:_.address||"",city:_.city||"",state:_.state||"",country:_.country||"India",pincode:_.pincode||"",phone:_.phone||"",email:_.email||"",capacity:_.capacity||1e4})}catch(w){console.error("Failed to load warehouse:",w),g("Failed to load warehouse details")}finally{i(!1)}},b=async w=>{if(w.preventDefault(),g(""),!u.name||!u.code||!u.city||!u.state){g("Please fill in all required fields");return}N(!0);try{await Et.update(r,u),n("/warehouses")}catch(_){console.error("Failed to update warehouse:",_),g(_.response?.data?.detail||"Failed to update warehouse")}finally{N(!1)}};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):e.jsx(Zt,{title:"Edit Warehouse",description:"Update warehouse information",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("form",{onSubmit:b,children:e.jsxs(Xe,{className:"space-y-6",children:[v&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:v}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Warehouse Name *",value:u.name,onChange:w=>x({...u,name:w.target.value}),required:!0}),e.jsx(pe,{label:"Code *",value:u.code,className:"font-mono bg-slate-100 dark:bg-slate-800",disabled:!0,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Address"}),e.jsx("textarea",{value:u.address,onChange:w=>x({...u,address:w.target.value}),className:"input min-h-[80px] py-2",placeholder:"Address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pe,{label:"City *",value:u.city,onChange:w=>x({...u,city:w.target.value}),required:!0}),e.jsx(pe,{label:"State *",value:u.state,onChange:w=>x({...u,state:w.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(pe,{label:"Pincode",value:u.pincode,onChange:w=>x({...u,pincode:w.target.value})}),e.jsx(pe,{label:"Phone",type:"tel",value:u.phone,onChange:w=>x({...u,phone:w.target.value})}),e.jsx(pe,{label:"Capacity",type:"number",value:u.capacity,onChange:w=>x({...u,capacity:parseInt(w.target.value)||0})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Contact"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(pe,{label:"Email",type:"email",value:u.email,onChange:w=>x({...u,email:w.target.value})})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>n("/warehouses"),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:h,children:h?"Updating...":"Update Warehouse"})]})]})})})})}function pN(){const[n,r]=m.useState([]),[c,i]=m.useState([]),[u,x]=m.useState([]),[h,N]=m.useState(null),[v,g]=m.useState([]),[f,b]=m.useState(!0),[w,_]=m.useState(!1);m.useEffect(()=>{k()},[]),m.useEffect(()=>{if(h){const E=c.filter(A=>A.warehouse_id===h.id);g(E)}else g([])},[h,c]),m.useEffect(()=>{x(c.filter(E=>!E.warehouse_id))},[c]);const k=async()=>{try{b(!0);const[E,A]=await Promise.all([Et.list({size:500}),At.list({size:500})]);r(E.data.items||[]),i(A.data.items||[])}catch(E){console.error("Failed to load data:",E)}finally{b(!1)}},S=async E=>{if(h){_(!0);try{await At.update(E,{warehouse_id:h.id}),await k()}catch(A){console.error("Failed to assign shop:",A)}finally{_(!1)}}},y=async E=>{_(!0);try{await At.update(E,{warehouse_id:null}),await k()}catch(A){console.error("Failed to unassign shop:",A)}finally{_(!1)}};return f?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"spinner"})}):e.jsx(Zt,{title:"Warehouse  Shop Mapping",description:"Assign medical shops to warehouses",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(Xe,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"warehouse"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:n.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total Warehouses"})]})]}),e.jsxs(Xe,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"storefront"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:c.filter(E=>E.warehouse_id).length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Assigned Shops"})]})]}),e.jsxs(Xe,{padding:"16px",className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:e.jsx("span",{className:"material-symbols-outlined",children:"warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-none",children:u.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Unassigned Shops"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Xe,{title:"Select Warehouse",icon:"warehouse",padding:"0",children:e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 max-h-[500px] overflow-auto",children:n.map(E=>e.jsx("button",{onClick:()=>N(E),className:`w-full p-4 text-left transition-colors ${h?.id===E.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-primary":"hover:bg-slate-50 dark:hover:bg-slate-800/50 border-l-4 border-transparent"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:E.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[E.code,"  ",E.city]})]}),e.jsxs(Ye,{variant:"info",children:[E.shop_count||0," shops"]})]})},E.id))})}),e.jsx(Xe,{title:h?`Shops in ${h.name}`:"Select a Warehouse",icon:"storefront",padding:"0",children:h?e.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50",children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-3",children:["Assigned Shops (",v.length,")"]}),v.length===0?e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No shops assigned yet"}):e.jsx("div",{className:"space-y-2",children:v.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:E.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[E.code,"  ",E.city]})]}),e.jsx(le,{variant:"secondary",onClick:()=>y(E.id),disabled:w,className:"!p-1.5 !h-8 text-red-500 hover:text-red-600 hover:bg-red-50",title:"Unassign Shop",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:18},children:"link_off"})})]},E.id))})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 mb-3",children:["Available to Assign (",u.length,")"]}),u.length===0?e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"All shops are assigned"}):e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-auto pr-2",children:u.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/30 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:E.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[E.code,"  ",E.city]})]}),e.jsxs(le,{variant:"primary",onClick:()=>S(E.id),disabled:w,className:"!px-3 !py-1 !text-xs gap-1",children:[e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:14},children:"link"}),"Assign"]})]},E.id))})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"arrow_back"}),e.jsx("p",{children:"Select a warehouse to manage shops"})]})})]})]})})}function fN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState([]),[N,v]=m.useState(!0),[g,f]=m.useState(!1),[b,w]=m.useState(""),[_]=m.useState(""),[k,S]=m.useState({rack_name:"",rack_number:"",warehouse_id:""}),[y,E]=m.useState(!1),[A,U]=m.useState(""),[D,R]=m.useState(10),[H,P]=m.useState(1);m.useEffect(()=>{n&&!r("racks.view")&&c("/")},[n,c,r]),m.useEffect(()=>{L()},[]);const L=async()=>{v(!0);try{const[p,M]=await Promise.all([Et.list({size:500}),Di.list({size:500})]);h(p.data.items?.map(ne=>({id:ne.id,name:ne.name}))||[]),u(M.data.items||[])}catch(p){console.error("Failed to load data:",p)}finally{v(!1)}},re=()=>{S({rack_name:"",rack_number:"",warehouse_id:""}),U(""),f(!0)},G=async p=>{if(p.preventDefault(),U(""),!k.rack_name||!k.rack_number){U("Rack Name and Rack Number are required");return}E(!0);try{await Di.create({rack_name:k.rack_name,rack_number:k.rack_number.toUpperCase(),warehouse_id:k.warehouse_id||void 0}),await L(),f(!1)}catch(M){U(M.response?.data?.detail||"Failed to add rack")}finally{E(!1)}},[I,T]=m.useState(!1),[ce,oe]=m.useState(null),ye=p=>{oe(p),T(!0)},z=async()=>{if(ce)try{await Di.delete(ce.id),window.toast?.success("Rack deleted successfully"),await L()}catch(p){console.error("Failed to delete rack:",p),window.toast?.error(p.response?.data?.detail||"Failed to delete rack")}finally{T(!1),oe(null)}},$=i.filter(p=>{const M=!b||p.rack_name.toLowerCase().includes(b.toLowerCase())||p.rack_number.toLowerCase().includes(b.toLowerCase()),ne=!_||p.warehouse_id===_;return M&&ne}),te={total:i.length,warehouses:new Set(i.map(p=>p.warehouse_id).filter(Boolean)).size},me=[{header:"Rack Name",key:"rack_name",render:p=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600 text-[18px]",children:"view_column"})}),e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:p.rack_name})]})},{header:"Rack Number",key:"rack_number",render:p=>e.jsx("span",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:p.rack_number})},{header:"Warehouse",key:"warehouse_name",render:p=>e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:p.warehouse_name||"-"})},{header:"Created",key:"created_at",render:p=>e.jsx("span",{className:"text-sm text-slate-500",children:new Date(p.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:p=>e.jsx("div",{className:"flex justify-end gap-1",children:r("racks.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>ye(p),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})})}],B=$.slice((H-1)*D,H*D);return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Rack Master",subtitle:"Manage racks for physical stock location.",actions:r("racks.create")&&e.jsx(le,{variant:"primary",onClick:re,className:"bg-purple-600 hover:bg-purple-700 text-white shadow-purple-500/30",icon:"add",children:"Add Rack"})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Racks",value:te.total,icon:"view_column",isActive:!0}),e.jsx(Ne,{title:"Warehouses",value:te.warehouses,icon:"warehouse",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:me,data:B,loading:N,emptyMessage:"No racks found.",pagination:{currentPage:H,totalPages:Math.ceil($.length/D),onPageChange:P,totalItems:$.length,pageSize:D,onPageSizeChange:p=>{R(p),P(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Rack List",count:$.length,searchProps:{value:b,onChange:p=>{w(p),P(1)},placeholder:"Search racks..."},embedded:!0})}),e.jsx(Tt,{isOpen:g,onClose:()=>f(!1),title:"Add New Rack",size:"md",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[A&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:A}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Rack Name *",value:k.rack_name,onChange:p=>S({...k,rack_name:p.target.value}),placeholder:"e.g., Rack A1",required:!0}),e.jsx(pe,{label:"Rack Number *",value:k.rack_number,onChange:p=>S({...k,rack_number:p.target.value.toUpperCase()}),placeholder:"e.g., RA1",required:!0,className:"font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Warehouse"}),e.jsxs("select",{value:k.warehouse_id,onChange:p=>S({...k,warehouse_id:p.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Select Warehouse"}),x.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>f(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:y,className:"bg-purple-600 hover:bg-purple-700",children:y?"Adding...":"Add Rack"})]})]})}),e.jsx(qt,{isOpen:I,onClose:()=>T(!1),onConfirm:z,title:"Delete Rack",message:`Are you sure you want to delete "${ce?.rack_name}"? This action cannot be undone.`,confirmText:"Delete Rack"})]})}function Pn(){const n=ba(),{activeEntity:r,scope:c}=Da(),{isLoading:i}=dt(),u=()=>{const A=n.pathname;return A.includes("/expiry")?"expiry":A.includes("/dead-stock")?"dead-stock":A.includes("/shop")?"shop":"warehouse"},[x,h]=m.useState(u()),[N,v]=m.useState([]),[g,f]=m.useState(!0),[b,w]=m.useState(""),[_,k]=m.useState("");m.useEffect(()=>{h(u())},[n.pathname]),m.useEffect(()=>{r?.type==="warehouse"?w(r.id):r?.type==="shop"&&k(r.id)},[r]),m.useEffect(()=>{S()},[x,b,_,r]);const S=async()=>{f(!0);try{const D=((await Bl.getAlerts()).data?.alerts||[]).map(R=>({id:R.id||Math.random().toString(),medicine_name:R.medicine_name,brand:R.brand,batch_number:R.batch_number||"N/A",quantity:R.current_quantity||0,location_type:R.location_type||"warehouse",location_name:R.location_name||"Unknown",expiry_date:R.expiry_date||"",days_to_expiry:R.days_to_expiry||0,last_movement:R.last_movement_date}));v(D)}catch(A){console.error("Failed to load stock data:",A),v([])}finally{f(!1)}},y=[{id:"warehouse",label:"Warehouse Stock",icon:"warehouse",description:"All warehouse inventory"},{id:"shop",label:"Shop Stock (Derived)",icon:"storefront",description:"Stock derived from dispatches"},{id:"expiry",label:"Expiry Monitoring",icon:"schedule",description:"Items expiring soon"},{id:"dead-stock",label:"Dead Stock",icon:"block",description:"No movement in 90+ days"}],E={totalItems:N.length,totalQuantity:N.reduce((A,U)=>A+U.quantity,0),expiringSoon:N.filter(A=>A.days_to_expiry>0&&A.days_to_expiry<=30).length,expired:N.filter(A=>A.days_to_expiry<=0).length};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Loading Master Data..."})]})}):e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-2 py-1 text-xs font-bold bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:"READ-ONLY"})}),e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Inventory Oversight"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Global view of all inventory across warehouses and shops. This is a read-only view for Super Admin oversight."}),r&&c!=="global"&&e.jsxs("div",{className:"mt-2 text-sm text-slate-500",children:["Viewing as: ",e.jsx("span",{className:"font-semibold",children:r.name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"inventory_2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:E.totalItems}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Items"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"package_2"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:E.totalQuantity.toLocaleString()}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Quantity"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-orange-200 dark:border-orange-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-orange-600",children:"schedule"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:E.expiringSoon}),e.jsx("p",{className:"text-xs text-slate-500",children:"Expiring Soon"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:E.expired}),e.jsx("p",{className:"text-xs text-slate-500",children:"Expired"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"flex overflow-x-auto",children:y.map(A=>e.jsxs("button",{onClick:()=>h(A.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${x===A.id?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:A.icon}),A.label]},A.id))})}),e.jsx("div",{className:"px-6 py-3 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:y.find(A=>A.id===x)?.description})}),e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[(x==="warehouse"||x==="expiry"||x==="dead-stock")&&e.jsx(Hd,{value:b,onChange:w,placeholder:"All Warehouses",className:"w-[200px]",disabled:c!=="global"&&r?.type==="warehouse"}),x==="shop"&&e.jsx(Gd,{value:_,onChange:k,placeholder:"All Shops",className:"w-[200px]",disabled:c!=="global"&&r?.type==="shop"}),e.jsx("button",{onClick:S,className:"px-4 py-2.5 rounded-lg border border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"p-6",children:g?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):N.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:y.find(A=>A.id===x)?.icon}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No data available"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:x==="dead-stock"?"No dead stock items found. All items have recent movement.":"No inventory data matches your filters."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Medicine"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Brand"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase",children:"Quantity"}),(x==="expiry"||x==="dead-stock")&&e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-500 uppercase",children:x==="expiry"?"Expiry":"Last Movement"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:N.map((A,U)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${U*20}ms`},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:A.medicine_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:A.brand||"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:A.batch_number})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px] text-slate-400",children:A.location_type==="warehouse"?"warehouse":"storefront"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:A.location_name})]})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono font-medium text-slate-900 dark:text-white",children:A.quantity.toLocaleString()}),x==="expiry"&&e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A.days_to_expiry<=0?"bg-red-100 text-red-700":A.days_to_expiry<=30?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:A.days_to_expiry<=0?"Expired":`${A.days_to_expiry} days`})}),x==="dead-stock"&&e.jsx("td",{className:"px-4 py-3 text-center text-sm text-slate-500",children:A.last_movement?new Date(A.last_movement).toLocaleDateString():"Never"})]},A.id))})]})})}),e.jsx("div",{className:"px-6 py-4 bg-purple-50 dark:bg-purple-900/10 border-t border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 dark:text-purple-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"info"}),e.jsx("p",{className:"text-sm",children:"This is a read-only oversight view. To make inventory adjustments, use the operational modules."})]})})]})]})}function gN(){const n=He(),{activeEntity:r}=Da(),[c,i]=m.useState([]),[u,x]=m.useState([]),[h,N]=m.useState(!1),[v,g]=m.useState(""),[f,b]=m.useState(""),[w,_]=m.useState("decrease"),[k,S]=m.useState(""),[y,E]=m.useState(""),[A,U]=m.useState(!1),[D,R]=m.useState({type:"",text:""});m.useEffect(()=>{H()},[]),m.useEffect(()=>{v?(P(v),b("")):(x([]),N(!1))},[v]);const H=async()=>{try{const G=await jt.list({size:500});i(G.data.items||G.data)}catch(G){console.error("Error loading medicines:",G)}},P=async G=>{N(!0);try{console.log("Loading batches for medicine:",G);const I=await jt.getBatches(G);console.log("Batches API response:",I.data);const T=I.data?.batches||[];console.log("Extracted batches:",T),x(T),T.length===0?R({type:"error",text:"No batches found for this medicine. Please add stock first."}):D.type==="error"&&D.text.includes("No batches")&&R({type:"",text:""})}catch(I){console.error("Error loading batches:",I),console.error("Error details:",I.response?.data),x([]),R({type:"error",text:I.response?.data?.detail||"Failed to load batches"})}finally{N(!1)}},L=async G=>{if(G.preventDefault(),!v||!f||!k||!y){R({type:"error",text:"Please fill all required fields"});return}U(!0),R({type:"",text:""});try{await Bl.adjustStock({medicine_id:v,batch_id:f,adjustment_type:w,quantity:parseInt(k),reason:y}),R({type:"success",text:"Stock adjusted successfully"}),S(""),E(""),P(v)}catch(I){R({type:"error",text:I.response?.data?.detail||"Failed to adjust stock"})}finally{U(!1)}},re=u.find(G=>G.id===f);return e.jsxs("div",{className:"p-6 lg:p-8 max-w-4xl mx-auto animate-fadeIn",children:[e.jsxs("button",{onClick:()=>n("/inventory"),className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white mb-6 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back"}),e.jsx("span",{children:"Back to Inventory"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white",children:" Stock Adjustment"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Correct stock levels for damages, expiry, or corrections."}),r&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-sm font-medium text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:r.type==="warehouse"?"warehouse":"storefront"}),e.jsx("span",{children:r.name})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm p-6",children:[D.text&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-start gap-3 ${D.type==="error"?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mt-0.5",children:D.type==="error"?"error":"check_circle"}),e.jsx("p",{children:D.text})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(Hl,{label:"Medicine *",value:v,onChange:G=>g(G),required:!0,options:c.map(G=>({value:G.id,label:`${G.name} ${G.brand?`(${G.brand})`:""}`})),placeholder:"Select Medicine"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Batch *"}),e.jsxs("select",{value:f,onChange:G=>b(G.target.value),required:!0,disabled:!v||h,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50 disabled:opacity-50",children:[e.jsx("option",{value:"",children:v?h?"Loading batches...":u.length===0?"No batches available":"Select Batch":"Select medicine first"}),u.map(G=>e.jsxs("option",{value:G.id,children:[G.batch_number," (Stock: ",G.quantity,", Exp: ",new Date(G.expiry_date).toLocaleDateString(),")"]},G.id))]}),v&&u.length===0&&!h&&e.jsxs("p",{className:"mt-2 text-sm text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"info"}),"No batches found for this medicine. Add stock first."]})]})]}),re&&e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Current Stock"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:re.quantity})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Expiry Date"}),e.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mt-1",children:re.expiry_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Adjustment Type"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-xl",children:[e.jsx("button",{type:"button",onClick:()=>_("decrease"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${w==="decrease"?"bg-white dark:bg-slate-700 text-red-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Decrease (-)"}),e.jsx("button",{type:"button",onClick:()=>_("increase"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${w==="increase"?"bg-white dark:bg-slate-700 text-green-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Increase (+)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Quantity to Adjust *"}),e.jsx("input",{type:"number",value:k,onChange:G=>S(G.target.value),min:"1",placeholder:"Example: 5",required:!0,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Reason for Adjustment *"}),e.jsx("textarea",{value:y,onChange:G=>E(G.target.value),placeholder:"e.g. Broken in transit, Expired stock removal...",required:!0,rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary/50 resize-none"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:A,className:`w-full py-3 rounded-xl font-semibold text-white shadow-lg shadow-blue-500/20 transition-all active:scale-[0.98] ${A?"bg-slate-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"}`,children:A?"Processing Adjustment...":"Confirm Adjustment"})})]})]})]})}function bN(){const[n,r]=m.useState([]),[c,i]=m.useState(!0),[u,x]=m.useState({total:0,creates:0,updates:0,deletes:0}),[h,N]=m.useState(""),[v,g]=m.useState(""),[f,b]=m.useState("");m.useEffect(()=>{w()},[h,v]);const w=async()=>{i(!0);try{const[y,E]=await Promise.all([g0.list({size:100,action:h||void 0,entity_type:v||void 0}),g0.getStats()]);r(y.data.items?.map(A=>({...A,timestamp:A.created_at,details:A.new_values||""}))||[]),x(E.data)}catch(y){console.error("Failed to load audit logs:",y)}finally{i(!1)}},_=y=>{switch(y?.toUpperCase()){case"CREATE":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"UPDATE":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"DELETE":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"LOGIN":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"LOGOUT":return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400"}},k=y=>{switch(y?.toLowerCase()){case"warehouse":return"warehouse";case"shop":return"storefront";case"medicine":return"medication";case"user":return"person";case"invoice":return"receipt";case"dispatch":return"local_shipping";case"batch":return"inventory";case"rack":return"view_column";default:return"description"}},S=n.filter(y=>!f||y.entity_name?.toLowerCase().includes(f.toLowerCase())||y.user_name?.toLowerCase().includes(f.toLowerCase()));return e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Audit Logs"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Complete audit trail of all system activities. Track who did what and when."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-slate-600",children:"history"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.total}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Logs"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-green-200 dark:border-green-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"add_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.creates}),e.jsx("p",{className:"text-xs text-slate-500",children:"Creates"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"edit"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.updates}),e.jsx("p",{className:"text-xs text-slate-500",children:"Updates"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"delete"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.deletes}),e.jsx("p",{className:"text-xs text-slate-500",children:"Deletes"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{type:"text",placeholder:"Search logs...",value:f,onChange:y=>b(y.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})}),e.jsxs("select",{value:h,onChange:y=>N(y.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"CREATE",children:"Create"}),e.jsx("option",{value:"UPDATE",children:"Update"}),e.jsx("option",{value:"DELETE",children:"Delete"})]}),e.jsxs("select",{value:v,onChange:y=>g(y.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Entities"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"shop",children:"Shop"}),e.jsx("option",{value:"medicine",children:"Medicine"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"invoice",children:"Invoice"}),e.jsx("option",{value:"dispatch",children:"Dispatch"}),e.jsx("option",{value:"rack",children:"Rack"})]}),e.jsx("button",{onClick:w,className:"p-2.5 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Refresh",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:c?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):S.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"history"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No logs found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Adjust your filters to see more results"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Action"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Entity"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"IP"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:S.map((y,E)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${E*20}ms`},children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm text-slate-900 dark:text-white",children:new Date(y.timestamp||y.created_at).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(y.timestamp||y.created_at).toLocaleTimeString()})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:y.user_name||"System"}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:y.user_role?.replace("_"," ")||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${_(y.action)}`,children:y.action})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-slate-400",children:k(y.entity_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:y.entity_name||y.entity_id||"-"}),e.jsx("p",{className:"text-xs text-slate-500 capitalize",children:y.entity_type})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-xs text-slate-500",children:y.ip_address||"-"})})]},y.id))})]})})})]})}function yN(){const[n,r]=m.useState([]),[c,i]=m.useState(!0),[u,x]=m.useState({total:0,successful:0,failed:0}),[h,N]=m.useState(""),[v,g]=m.useState(""),[f,b]=m.useState("");m.useEffect(()=>{w()},[h]);const w=async()=>{i(!0);try{const[S,y]=await Promise.all([b0.list({size:100,status:h||void 0}),b0.getStats()]);r(S.data.items||[]),x(y.data)}catch(S){console.error("Failed to load login activity:",S)}finally{i(!1)}},_=n.filter(S=>{const y=!f||S.user_name?.toLowerCase().includes(f.toLowerCase())||S.user_email?.toLowerCase().includes(f.toLowerCase()),E=!v||S.user_role===v;return y&&E}),k=n.filter(S=>S.action==="login_success"&&new Date(S.created_at).toDateString()===new Date().toDateString()).length;return e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Login Activity"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Monitor user login activity and identify security issues."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"login"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.total}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Logins"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-green-200 dark:border-green-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"check_circle"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.successful}),e.jsx("p",{className:"text-xs text-slate-500",children:"Successful"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-red-200 dark:border-red-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-red-600",children:"error"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.failed}),e.jsx("p",{className:"text-xs text-slate-500",children:"Failed"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-purple-200 dark:border-purple-800 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"person"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:k}),e.jsx("p",{className:"text-xs text-slate-500",children:"Active Today"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"search"})}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:f,onChange:S=>b(S.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900"})]})}),e.jsxs("select",{value:h,onChange:S=>N(S.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"Successful"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:v,onChange:S=>g(S.target.value),className:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"warehouse_admin",children:"Warehouse Admin"}),e.jsx("option",{value:"shop_owner",children:"Shop Owner"}),e.jsx("option",{value:"pharmacist",children:"Pharmacist"})]}),e.jsx("button",{onClick:w,className:"p-2.5 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Refresh",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"refresh"})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:c?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):_.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"login"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No login records found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Adjust your filters to see more results"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Login Time"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"IP Address"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.map((S,y)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors animate-fadeIn",style:{animationDelay:`${y*20}ms`},children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:S.user_name||"Unknown"}),e.jsx("p",{className:"text-xs text-slate-500",children:S.user_email})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded-full capitalize",children:S.user_role?.replace("_"," ")||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-900 dark:text-white",children:new Date(S.created_at).toLocaleString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-slate-600 dark:text-slate-400",children:S.ip_address||"-"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${S.action==="login_success"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:S.action==="login_success"?"Success":"Failed"})})]},S.id))})]})})]})}function vN(){const{hasPermission:n}=It(),{user:r}=Ke(),c=n(y0.ROLES_VIEW),i=n(y0.ROLES_MANAGE),[u,x]=m.useState([]),[h,N]=m.useState([]),[v,g]=m.useState([]),[f,b]=m.useState(!0),[w,_]=m.useState(!1),[k,S]=m.useState(null),[y,E]=m.useState({name:"",description:"",entity_type:"",permission_ids:[]}),[A,U]=m.useState(!1),[D,R]=m.useState("");m.useEffect(()=>{c&&r?H():c||b(!1)},[c,r]);const H=async()=>{b(!0);try{const[B,p,M]=await Promise.all([Vn.list(),mj.list(),Qn.list({size:500})]);let ne=B.data.items||[];r?.role==="warehouse_admin"&&(ne=ne.filter(Y=>Y.name!=="super_admin"&&Y.entity_type!=="shop")),x(ne),N(p.data.items||[]),g(M.data.items||[])}catch(B){console.error("Failed to load data:",B)}finally{b(!1)}},P=()=>{S(null),E({name:"",description:"",entity_type:null,permission_ids:[]}),R(""),_(!0)},L=B=>{S(B),E({name:B.name,description:B.description||"",entity_type:B.entity_type,permission_ids:B.permissions.map(p=>p.id)}),R(""),_(!0)},re=async B=>{if(B.preventDefault(),!y.name.trim()){R("Role name is required");return}U(!0),R("");try{k?await Vn.update(k.id,y):await Vn.create(y),_(!1),H()}catch(p){R(p.response?.data?.detail||"Failed to save role")}finally{U(!1)}},[G,I]=m.useState(!1),[T,ce]=m.useState(null),oe=B=>{ce(B),I(!0)},ye=async()=>{if(T)try{await Vn.delete(T.id),window.toast?.success("Role deleted successfully"),H()}catch(B){console.error("Failed to delete role:",B),window.toast?.error(B.response?.data?.detail||"Failed to delete role")}finally{I(!1),ce(null)}},z=B=>{E(p=>({...p,permission_ids:p.permission_ids.includes(B)?p.permission_ids.filter(M=>M!==B):[...p.permission_ids,B]}))},$=B=>v.filter(p=>p.role===B),te=h.reduce((B,p)=>(B[p.module]||(B[p.module]=[]),B[p.module].push(p),B),{}),me=B=>{switch(B){case"global":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"warehouse":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"shop":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}};return c?e.jsxs("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Roles & Permissions"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Manage user roles and their permissions. System roles cannot be modified."})]}),i&&e.jsxs("button",{onClick:P,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-medium shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"add"}),"Create Role"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"admin_panel_settings"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"shield"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.filter(B=>B.is_system).length}),e.jsx("p",{className:"text-xs text-slate-500",children:"System Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"tune"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u.filter(B=>!B.is_system).length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Custom Roles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-amber-600",children:"key"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Permissions"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:f?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-600"})}):u.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"admin_panel_settings"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No roles found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create your first role to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:u.map((B,p)=>{const M=$(B.name);return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4 border border-slate-200 dark:border-slate-700 hover:border-purple-300 dark:hover:border-purple-700 transition-colors animate-fadeIn",style:{animationDelay:`${p*50}ms`},children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${B.is_system?"bg-blue-100 dark:bg-blue-900/30":"bg-purple-100 dark:bg-purple-900/30"}`,children:e.jsx("span",{className:`material-symbols-outlined ${B.is_system?"text-blue-600":"text-purple-600"}`,children:B.is_system?"shield":"badge"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:B.name.replace(/_/g," ")}),e.jsxs("div",{className:"flex gap-1 mt-0.5",children:[B.is_system&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",children:"System"}),B.entity_type&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded capitalize ${me(B.entity_type)}`,children:B.entity_type}),!B.entity_type&&!B.is_system&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400",children:"Custom"})]})]})]}),!B.is_system&&i&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>L(B),className:"p-1.5 text-slate-400 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),e.jsx("button",{onClick:()=>oe(B),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-3 line-clamp-2",children:B.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"key"}),e.jsxs("span",{children:[B.permissions?.length||0," permissions"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"group"}),e.jsxs("span",{children:[M.length," users"]})]})]}),B.permissions&&B.permissions.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[B.permissions.slice(0,4).map(ne=>e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${me(ne.scope)}`,title:ne.code,children:ne.action},ne.id)),B.permissions.length>4&&e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-600 rounded-full",children:["+",B.permissions.length-4," more"]})]})})]},B.id)})})}),w&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate-scaleIn",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:k?"Edit Role":"Create New Role"}),k?.is_system&&e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:" System roles have limited editing options"})]}),e.jsxs("form",{onSubmit:re,className:"p-6 space-y-6 max-h-[calc(90vh-180px)] overflow-y-auto",children:[D&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:D}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",value:y.name,onChange:B=>E({...y,name:B.target.value}),placeholder:"e.g., Sales Manager",disabled:k?.is_system,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Entity Type"}),e.jsxs("select",{value:y.entity_type||"",onChange:B=>E({...y,entity_type:B.target.value||null}),disabled:k?.is_system,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50",children:[e.jsx("option",{value:"",children:"None (Global)"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"shop",children:"Shop"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:y.description,onChange:B=>E({...y,description:B.target.value}),placeholder:"Brief description of this role...",rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:["Permissions (",y.permission_ids.length," selected)"]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2",children:Object.entries(te).map(([B,p])=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 capitalize",children:B.replace(/_/g," ")}),e.jsxs("span",{className:"text-xs text-slate-400",children:[p.length," permissions"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(M=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",title:M.description||M.code,children:[e.jsx("input",{type:"checkbox",checked:y.permission_ids.includes(M.id),onChange:()=>z(M.id),disabled:k?.is_system&&k?.name==="super_admin",className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 group-hover:text-slate-900 dark:group-hover:text-white",children:M.action}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${me(M.scope)}`,children:M.scope})]},M.id))})]},B))})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-5 py-2.5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:A||k?.is_system&&k?.name==="super_admin",className:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl font-medium shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:A?"Saving...":k?"Update Role":"Create Role"})]})]})}),e.jsx(qt,{isOpen:G,onClose:()=>I(!1),onConfirm:ye,title:"Delete Role",message:`Are you sure you want to delete "${T?.name}"? This action cannot be undone.`,confirmText:"Delete Role"})]}):e.jsx("div",{className:"p-6 lg:p-8 max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-12 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-red-500 mb-4",children:"block"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"You don't have permission to view roles and permissions."}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-2",children:"Contact your administrator if you need access."})]})})}function jN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState(null),[b,w]=m.useState({name:"",description:"",parent_id:""}),[_,k]=m.useState(!1),[S,y]=m.useState(""),[E,A]=m.useState(""),[U,D]=m.useState(10),[R,H]=m.useState(1);m.useEffect(()=>{n&&!r("categories.view")&&c("/")},[n,c,r]),m.useEffect(()=>{P()},[]);const P=async()=>{h(!0);try{const M=await Oe.listCategories();u(M.data.items||[])}catch(M){console.error("Failed to load categories:",M)}finally{h(!1)}},L=()=>{f(null),w({name:"",description:"",parent_id:""}),y(""),v(!0)},re=M=>{f(M),w({name:M.name,description:M.description||"",parent_id:M.parent_id||""}),y(""),v(!0)},G=async M=>{if(M.preventDefault(),!b.name.trim()){y("Category name is required");return}k(!0),y("");try{const ne={...b,parent_id:b.parent_id||null};g?await Oe.updateCategory(g.id,ne):await Oe.createCategory(ne),v(!1),P()}catch(ne){y(ne.response?.data?.detail||"Failed to save category")}finally{k(!1)}},[I,T]=m.useState(!1),[ce,oe]=m.useState(null),ye=M=>{oe(M),T(!0)},z=async()=>{if(ce)try{await Oe.deleteCategory(ce.id),window.toast?.success("Category deleted successfully"),P()}catch(M){console.error("Failed to delete category:",M),window.toast?.error(M.response?.data?.detail||"Failed to delete category")}finally{T(!1),oe(null)}},$=i.filter(M=>M.name.toLowerCase().includes(E.toLowerCase())||M.description?.toLowerCase().includes(E.toLowerCase())),te=M=>M?i.find(Y=>Y.id===M)?.name:null,me={total:i.length,active:i.filter(M=>M.is_active).length,subcategories:i.filter(M=>M.parent_id).length},B=[{header:"Category",key:"name",render:M=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-emerald-600 text-[18px]",children:"folder"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:M.name}),M.description&&e.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:M.description})]})]})},{header:"Parent",key:"parent_id",render:M=>{const ne=te(M.parent_id);return ne?e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:ne}):e.jsx("span",{className:"text-sm text-slate-400",children:""})}},{header:"Status",key:"is_active",align:"center",render:M=>e.jsx(Ye,{variant:M.is_active?"success":"secondary",children:M.is_active?"Active":"Inactive"})},{header:"Created",key:"created_at",render:M=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(M.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:M=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("categories.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>re(M),className:"!p-1.5 h-8 w-8 text-emerald-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("categories.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>ye(M),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],p=$.slice((R-1)*U,R*U);return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Categories",subtitle:"Manage medicine categories and subcategories.",actions:r("categories.create")&&e.jsx(le,{variant:"primary",onClick:L,className:"bg-gradient-to-r from-emerald-600 to-teal-600",icon:"add",children:"Add Category"})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Categories",value:me.total,icon:"category",isActive:!0}),e.jsx(Ne,{title:"Active",value:me.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Subcategories",value:me.subcategories,icon:"account_tree",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:B,data:p,loading:x,emptyMessage:"No categories found.",pagination:{currentPage:R,totalPages:Math.ceil($.length/U),onPageChange:H,totalItems:$.length,pageSize:U,onPageSizeChange:M=>{D(M),H(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Category List",count:$.length,searchProps:{value:E,onChange:M=>{A(M),H(1)},placeholder:"Search categories..."},embedded:!0})}),e.jsx(Tt,{isOpen:N,onClose:()=>v(!1),title:g?"Edit Category":"Add Category",size:"md",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsx(pe,{label:"Category Name *",value:b.name,onChange:M=>w({...b,name:M.target.value}),placeholder:"e.g., Antibiotics",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Parent Category"}),e.jsxs("select",{value:b.parent_id,onChange:M=>w({...b,parent_id:M.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),i.filter(M=>M.id!==g?.id&&!M.parent_id).map(M=>e.jsx("option",{value:M.id,children:M.name},M.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:M=>w({...b,description:M.target.value}),placeholder:"Brief description...",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:_,className:"bg-gradient-to-r from-emerald-600 to-teal-600",children:_?"Saving...":"Save"})]})]})}),e.jsx(qt,{isOpen:I,onClose:()=>T(!1),onConfirm:z,title:"Delete Category",message:`Are you sure you want to delete "${ce?.name}"? This action cannot be undone.`,confirmText:"Delete Category"})]})}function NN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState(null),[b,w]=m.useState({name:"",short_name:"",description:""}),[_,k]=m.useState(!1),[S,y]=m.useState(""),[E,A]=m.useState(""),[U,D]=m.useState(10),[R,H]=m.useState(1);m.useEffect(()=>{n&&!r("units.view")&&c("/")},[n,c,r]),m.useEffect(()=>{P()},[]);const P=async()=>{h(!0);try{const p=await Oe.listUnits();u(p.data.items||[])}catch(p){console.error("Failed to load units:",p)}finally{h(!1)}},L=()=>{f(null),w({name:"",short_name:"",description:""}),y(""),v(!0)},re=p=>{f(p),w({name:p.name,short_name:p.short_name,description:p.description||""}),y(""),v(!0)},G=async p=>{if(p.preventDefault(),!b.name.trim()||!b.short_name.trim()){y("Name and short name are required");return}k(!0),y("");try{g?await Oe.updateUnit(g.id,b):await Oe.createUnit(b),v(!1),P()}catch(M){y(M.response?.data?.detail||"Failed to save")}finally{k(!1)}},[I,T]=m.useState(!1),[ce,oe]=m.useState(null),ye=p=>{oe(p),T(!0)},z=async()=>{if(ce)try{await Oe.deleteUnit(ce.id),window.toast?.success("Unit deleted successfully"),P()}catch(p){console.error("Failed to delete unit:",p),window.toast?.error(p.response?.data?.detail||"Failed to delete unit")}finally{T(!1),oe(null)}},$=i.filter(p=>p.name.toLowerCase().includes(E.toLowerCase())),te={total:i.length,active:i.filter(p=>p.is_active).length},me=[{header:"Unit Name",key:"name",render:p=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-xs",children:p.short_name.slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:p.name}),p.description&&e.jsx("p",{className:"text-xs text-slate-500",children:p.description})]})]})},{header:"Short Name",key:"short_name",render:p=>e.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs",children:p.short_name})},{header:"Status",key:"is_active",align:"center",render:p=>e.jsx(Ye,{variant:p.is_active?"success":"secondary",children:p.is_active?"Active":"Inactive"})},{header:"Created",key:"created_at",render:p=>e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:new Date(p.created_at).toLocaleDateString()})},{header:"Actions",key:"id",align:"right",render:p=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("units.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>re(p),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("units.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>ye(p),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}],B=$.slice((R-1)*U,R*U);return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Units",subtitle:"Manage units of measurement.",actions:r("units.create")&&e.jsx(le,{variant:"primary",onClick:L,className:"bg-gradient-to-r from-blue-600 to-cyan-600",icon:"add",children:"Add Unit"})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Units",value:te.total,icon:"straighten",isActive:!0}),e.jsx(Ne,{title:"Active",value:te.active,icon:"check_circle",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:me,data:B,loading:x,emptyMessage:"No units found.",pagination:{currentPage:R,totalPages:Math.ceil($.length/U),onPageChange:H,totalItems:$.length,pageSize:U,onPageSizeChange:p=>{D(p),H(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Unit List",count:$.length,searchProps:{value:E,onChange:p=>{A(p),H(1)},placeholder:"Search units..."},embedded:!0})}),e.jsx(Tt,{isOpen:N,onClose:()=>v(!1),title:g?"Edit Unit":"Add Unit",size:"sm",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsx(pe,{label:"Name *",value:b.name,onChange:p=>w({...b,name:p.target.value}),placeholder:"e.g., Tablet",required:!0}),e.jsx(pe,{label:"Short Name *",value:b.short_name,onChange:p=>w({...b,short_name:p.target.value}),placeholder:"e.g., Tab",maxLength:10,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:p=>w({...b,description:p.target.value}),rows:2,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:_,className:"bg-gradient-to-r from-blue-600 to-cyan-600",children:_?"Saving...":"Save"})]})]})}),e.jsx(qt,{isOpen:I,onClose:()=>T(!1),onConfirm:z,title:"Delete Unit",message:`Are you sure you want to delete "${ce?.name}"? This action cannot be undone.`,confirmText:"Delete Unit"})]})}function wN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),{getMaster:i,isLoading:u}=dt(),x=i("gst_slabs");console.log("GST Slabs Debug:",{mastersLoading:u,gstSlabs:x,count:x?.length});const[h,N]=m.useState([]),[v,g]=m.useState(!0),[f,b]=m.useState(!1),[w,_]=m.useState(null),[k,S]=m.useState({hsn_code:"",description:"",gst_slab_id:"",gst_rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0}),[y,E]=m.useState(!1),[A,U]=m.useState(""),[D,R]=m.useState(""),[H,P]=m.useState(10),[L,re]=m.useState(1),[G,I]=m.useState(0);m.useEffect(()=>{n&&!r("hsn.view")&&c("/")},[n,c,r]),m.useEffect(()=>{T()},[L,H,D]);const T=async()=>{g(!0);try{const Z=await Oe.listHSN({page:L,size:H,search:D});Z.data&&Array.isArray(Z.data.items)?(N(Z.data.items),I(Z.data.total||0)):(N([]),I(0))}catch(Z){console.error("Failed to load HSN codes:",Z),N([])}finally{g(!1)}},ce=()=>{_(null),S({hsn_code:"",description:"",gst_slab_id:"",gst_rate:0,cgst_rate:0,sgst_rate:0,igst_rate:0}),U(""),b(!0)},oe=Z=>{_(Z),S({hsn_code:Z.hsn_code,description:Z.description,gst_slab_id:Z.gst_slab_id||"",gst_rate:Z.gst_rate,cgst_rate:Z.cgst_rate,sgst_rate:Z.sgst_rate,igst_rate:Z.igst_rate}),U(""),b(!0)},ye=Z=>{const ve=x.find(be=>be.id===Z);ve&&S({...k,gst_slab_id:Z,gst_rate:ve.rate,cgst_rate:ve.rate/2,sgst_rate:ve.rate/2,igst_rate:ve.rate})},z=async Z=>{if(Z.preventDefault(),!k.hsn_code.trim()||!k.description.trim()){U("HSN code and description are required");return}E(!0),U("");try{w?await Oe.updateHSN(w.id,k):await Oe.createHSN(k),b(!1),T()}catch(ve){U(ve.response?.data?.detail||"Failed to save")}finally{E(!1)}},[$,te]=m.useState(!1),[me,B]=m.useState(null),p=Z=>{B(Z),te(!0)},M=async()=>{if(me)try{await Oe.deleteHSN(me.id),window.toast?.success("HSN Code deleted successfully"),T()}catch(Z){console.error("Failed to delete HSN Code:",Z),window.toast?.error(Z.response?.data?.detail||"Failed to delete HSN Code")}finally{te(!1),B(null)}},ne={total:G,gst5:h.filter(Z=>Z.gst_rate===5).length,gst12:h.filter(Z=>Z.gst_rate===12).length},Y=[{header:"HSN Code",key:"hsn_code",render:Z=>e.jsx("span",{className:"font-mono font-semibold text-amber-600 dark:text-amber-500",children:Z.hsn_code})},{header:"Description",key:"description",render:Z=>e.jsx("span",{className:"text-slate-900 dark:text-white",children:Z.description})},{header:"GST %",key:"gst_rate",align:"center",render:Z=>e.jsxs(Ye,{variant:"warning",children:[Z.gst_rate,"%"]})},{header:"CGST",key:"cgst_rate",align:"center",render:Z=>e.jsxs("span",{className:"text-slate-500",children:[Z.cgst_rate,"%"]})},{header:"SGST",key:"sgst_rate",align:"center",render:Z=>e.jsxs("span",{className:"text-slate-500",children:[Z.sgst_rate,"%"]})},{header:"Status",key:"is_active",align:"center",render:Z=>e.jsx(Ye,{variant:Z.is_active?"success":"secondary",children:Z.is_active?"Active":"Inactive"})},{header:"Actions",key:"id",align:"right",render:Z=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("hsn.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>oe(Z),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("hsn.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>p(Z),className:"!p-1.5 h-8 w-8 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(fe,{loading:u,children:[e.jsx(fe.Header,{title:"HSN Codes",subtitle:"Manage HSN codes with GST rates.",actions:r("hsn.create")&&e.jsx(le,{variant:"primary",onClick:ce,className:"bg-gradient-to-r from-amber-600 to-orange-600",icon:"add",children:"Add HSN Code"})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total HSN Codes",value:ne.total,icon:"tag",isActive:!0}),e.jsx(Ne,{title:"5% GST Items",value:ne.gst5,icon:"percent",trend:"neutral"}),e.jsx(Ne,{title:"12% GST Items",value:ne.gst12,icon:"percent",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:Y,data:h,loading:v,emptyMessage:"No HSN codes found.",pagination:{currentPage:L,totalPages:Math.ceil(G/H),onPageChange:re,totalItems:G,pageSize:H,onPageSizeChange:Z=>{P(Z),re(1)}},headerSlot:e.jsx(fe.ListControls,{title:"HSN List",count:G,searchProps:{value:D,onChange:Z=>{R(Z),re(1)},placeholder:"Search HSN codes..."},embedded:!0})}),e.jsx(Tt,{isOpen:f,onClose:()=>b(!1),title:w?"Edit HSN Code":"Add HSN Code",size:"md",children:e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[A&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:A}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"HSN Code *",value:k.hsn_code,onChange:Z=>S({...k,hsn_code:Z.target.value}),placeholder:"e.g. 3004",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"GST Slab *"}),e.jsxs("select",{value:k.gst_slab_id,onChange:Z=>ye(Z.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Select GST Slab"}),x.map(Z=>e.jsxs("option",{value:Z.id,children:[Z.rate,"% GST",Z.description?` - ${Z.description}`:""]},Z.id))]})]})]}),e.jsx(pe,{label:"Description *",value:k.description,onChange:Z=>S({...k,description:Z.target.value}),placeholder:"e.g., Medicaments",required:!0}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-200 mb-3 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"Auto-calculated Tax Rates"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"Total"}),e.jsxs("div",{className:"mt-1 font-mono font-bold text-blue-600",children:[k.gst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"CGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.cgst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"SGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.sgst_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"IGST"}),e.jsxs("div",{className:"mt-1 font-mono text-slate-700 dark:text-slate-300",children:[k.igst_rate,"%"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>b(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:y,className:"bg-gradient-to-r from-amber-600 to-orange-600",children:y?"Saving...":"Save"})]})]})}),e.jsx(qt,{isOpen:$,onClose:()=>te(!1),onConfirm:M,title:"Delete HSN Code",message:`Are you sure you want to delete HSN Code "${me?.hsn_code}"? This action cannot be undone.`,confirmText:"Delete HSN Code"})]})}function kN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),{getMaster:i,isLoading:u}=dt(),x=i("gst_slabs"),[h,N]=m.useState({enable_gst:!0,default_gst_rate:12,enable_vat:!1,default_vat_rate:5,tax_inclusive_pricing:!1,round_off_tax:!0,gst_number:"",business_name:"",business_address:""}),[v,g]=m.useState(!0),[f,b]=m.useState(!1),[w,_]=m.useState(!1);m.useEffect(()=>{n&&!r("gst.view")&&c("/")},[n,c,r]),m.useEffect(()=>{k()},[]);const k=async()=>{g(!0);try{const y=await f0.getSettings();y.data&&N(y.data)}catch(y){console.error("Failed to load tax settings:",y)}finally{g(!1)}},S=async()=>{b(!0);try{await f0.updateSettings(h),_(!0),setTimeout(()=>_(!1),3e3)}catch(y){console.error("Failed to save:",y),alert("Failed to save settings")}finally{b(!1)}};return v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"spinner"})}):e.jsx(Zt,{title:"GST / VAT Settings",description:"Configure tax settings for your business",icon:"receipt_long",actions:w?e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),"Saved Successfully"]}):void 0,loading:v||u,children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(Xe,{title:"GST Configuration",icon:"receipt_long",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Enable GST"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Apply GST to all transactions"})]}),e.jsx("button",{onClick:()=>N({...h,enable_gst:!h.enable_gst}),className:`relative w-12 h-6 rounded-full transition-colors ${h.enable_gst?"bg-orange-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h.enable_gst?"left-7":"left-1"}`})})]}),h.enable_gst&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Default GST Rate"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.length>0?x.map(y=>e.jsxs("button",{onClick:()=>N({...h,default_gst_rate:y.rate}),className:`px-4 py-2 rounded-xl font-medium transition-all ${h.default_gst_rate===y.rate?"bg-orange-500 text-white shadow-lg shadow-orange-500/25":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200"}`,children:[y.rate,"%"]},y.id)):e.jsx("div",{className:"text-sm text-slate-500 italic",children:"No GST slabs found. Check master data."})})]}),e.jsx(pe,{label:"GST Number (GSTIN)",value:h.gst_number,onChange:y=>N({...h,gst_number:y.target.value}),placeholder:"e.g., 29ABCDE1234F1Z5",className:"font-mono"})]})]})}),e.jsx(Xe,{title:"VAT Configuration",icon:"percent",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Enable VAT"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Apply VAT in addition to or instead of GST"})]}),e.jsx("button",{onClick:()=>N({...h,enable_vat:!h.enable_vat}),className:`relative w-12 h-6 rounded-full transition-colors ${h.enable_vat?"bg-purple-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h.enable_vat?"left-7":"left-1"}`})})]}),h.enable_vat&&e.jsx(pe,{label:"Default VAT Rate (%)",type:"number",value:h.default_vat_rate,onChange:y=>N({...h,default_vat_rate:Number(y.target.value)}),className:"w-32"})]})}),e.jsx(Xe,{title:"Pricing Options",icon:"tune",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Tax Inclusive Pricing"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Product prices already include tax"})]}),e.jsx("button",{onClick:()=>N({...h,tax_inclusive_pricing:!h.tax_inclusive_pricing}),className:`relative w-12 h-6 rounded-full transition-colors ${h.tax_inclusive_pricing?"bg-blue-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h.tax_inclusive_pricing?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Round Off Tax"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Round tax amounts to nearest rupee"})]}),e.jsx("button",{onClick:()=>N({...h,round_off_tax:!h.round_off_tax}),className:`relative w-12 h-6 rounded-full transition-colors ${h.round_off_tax?"bg-blue-500":"bg-slate-300 dark:bg-slate-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h.round_off_tax?"left-7":"left-1"}`})})]})]})}),e.jsx(Xe,{title:"Business Details",icon:"business",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(pe,{label:"Business Name",value:h.business_name,onChange:y=>N({...h,business_name:y.target.value}),placeholder:"Your business name"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Business Address"}),e.jsx("textarea",{value:h.business_address,onChange:y=>N({...h,business_address:y.target.value}),placeholder:"Full business address",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 resize-none"})]})]})}),e.jsx("div",{className:"flex justify-end",children:r("gst.edit")&&e.jsxs(le,{variant:"primary",onClick:S,loading:f,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"save"}),f?"Saving...":"Save Settings"]})})]})})}function SN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),{refresh:i,isLoading:u}=dt(),[x,h]=m.useState([]),[N,v]=m.useState(!0),[g,f]=m.useState(!1),[b,w]=m.useState(null),[_,k]=m.useState({rate:0,description:""}),[S,y]=m.useState(!1),[E,A]=m.useState("");m.useEffect(()=>{n&&!r("gst.view")&&c("/")},[n,c,r]),m.useEffect(()=>{U()},[]);const U=async()=>{v(!0);try{const oe=await Oe.listGSTSlabs();h(oe.data.items||[])}catch(oe){console.error("Failed to load GST slabs:",oe)}finally{v(!1)}},D=()=>{w(null),k({rate:0,description:""}),A(""),f(!0)},R=oe=>{w(oe),k({rate:oe.rate,description:oe.description||""}),A(""),f(!0)},H=async oe=>{if(oe.preventDefault(),_.rate<=0){A("GST rate must be greater than 0");return}y(!0),A("");try{b?await Oe.updateGSTSlab(b.id,_):await Oe.createGSTSlab(_),f(!1),U(),i()}catch(ye){A(ye.response?.data?.detail||"Failed to save GST slab")}finally{y(!1)}},[P,L]=m.useState(!1),[re,G]=m.useState(null),I=oe=>{G(oe),L(!0)},T=async()=>{if(re)try{await Oe.deleteGSTSlab(re.id),window.toast?.success("GST Slab deleted successfully"),U(),i()}catch(oe){console.error("Failed to delete GST Slab:",oe),window.toast?.error(oe.response?.data?.detail||"Failed to delete GST Slab")}finally{L(!1),G(null)}},ce=[0,5,12,18,28];return e.jsxs(Zt,{title:"GST Slabs",description:"Manage GST tax rates for your products",actions:r("gst.create")&&e.jsxs(le,{variant:"primary",onClick:D,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add GST Slab"]}),loading:u,children:[e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"info"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"GST Slabs are Required"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"GST Slabs must be created before you can add HSN Codes or Medicines. Standard Indian GST rates are 0%, 5%, 12%, 18%, and 28%."})]})]})}),x.length===0&&!N&&r("gst.create")&&e.jsxs(Xe,{title:"Quick Setup",icon:"bolt",children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Click to quickly add standard GST slabs:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ce.map(oe=>e.jsxs(le,{variant:"secondary",onClick:async()=>{try{await Oe.createGSTSlab({rate:oe,description:`GST ${oe}%`}),U(),i()}catch(ye){console.error(ye)}},children:["Add ",oe,"%"]},oe))})]}),e.jsx(Xe,{className:"!p-0",children:N?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"spinner"})}):x.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 dark:text-slate-600 mb-3",children:"percent"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No GST Slabs"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create GST slabs to enable HSN codes and medicines"}),r("gst.create")&&e.jsx(le,{variant:"primary",className:"mt-4",onClick:D,children:"Add First GST Slab"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Rate"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"CGST"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase",children:"SGST"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:x.map(oe=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[oe.rate,"%"]})}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:oe.description||"-"}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:[(oe.rate/2).toFixed(1),"%"]}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400",children:[(oe.rate/2).toFixed(1),"%"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(Ye,{variant:oe.is_active?"success":"secondary",children:oe.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[r("gst.edit")&&e.jsx(le,{variant:"secondary",onClick:()=>R(oe),className:"!p-1.5",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("gst.delete")&&e.jsx(le,{variant:"secondary",onClick:()=>I(oe),className:"!p-1.5 text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},oe.id))})]})})]}),e.jsx(Tt,{isOpen:g,onClose:()=>f(!1),title:b?"Edit GST Slab":"Add GST Slab",children:e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[E&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:E}),e.jsx(pe,{label:"GST Rate (%)",type:"number",value:_.rate,onChange:oe=>k({..._,rate:Number(oe.target.value)}),placeholder:"e.g., 18",min:0,max:100,required:!0}),e.jsx(pe,{label:"Description (Optional)",value:_.description,onChange:oe=>k({..._,description:oe.target.value}),placeholder:"e.g., Standard GST Rate"}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase mb-2",children:"Tax Breakdown Preview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-primary",children:[_.rate,"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total GST"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[(_.rate/2).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"CGST"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[(_.rate/2).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"SGST"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>f(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:S,children:S?"Saving...":b?"Update":"Create"})]})]})}),e.jsx(qt,{isOpen:P,onClose:()=>L(!1),onConfirm:T,title:"Delete GST Slab",message:`Are you sure you want to delete GST Slab "${re?.rate}%"? This action cannot be undone.`,confirmText:"Delete Slab"})]})}function _N(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState(null),[b,w]=m.useState({name:"",code:"",contact_person:"",phone:"",email:"",gst_number:"",address:"",city:"",state:"",pincode:""}),[_,k]=m.useState(!1),[S,y]=m.useState(""),[E,A]=m.useState(""),[U,D]=m.useState(10),[R,H]=m.useState(1);m.useEffect(()=>{n&&!r("suppliers.view")&&c("/")},[n,c,r]),m.useEffect(()=>{P()},[]);const P=async()=>{h(!0);try{const p=await Oe.listSuppliers();u(p.data.items||[])}catch(p){console.error("Failed to load suppliers:",p),u([])}finally{h(!1)}},L=()=>{f(null),w({name:"",code:"",contact_person:"",phone:"",email:"",gst_number:"",address:"",city:"",state:"",pincode:""}),y(""),v(!0)},re=p=>{f(p),w({name:p.name,code:p.code,contact_person:p.contact_person||"",phone:p.phone||"",email:p.email||"",gst_number:p.gst_number||"",address:p.address||"",city:p.city||"",state:p.state||"",pincode:p.pincode||""}),y(""),v(!0)},G=async p=>{if(p.preventDefault(),!b.name.trim()||!b.code.trim()){y("Name and code are required");return}k(!0),y("");try{g?await Oe.updateSupplier(g.id,b):await Oe.createSupplier(b),v(!1),P()}catch(M){y(M.response?.data?.detail||"Failed to save supplier")}finally{k(!1)}},[I,T]=m.useState(!1),[ce,oe]=m.useState(null),ye=p=>{oe(p),T(!0)},z=async()=>{if(ce)try{await Oe.deleteSupplier(ce.id),window.toast?.success("Supplier deleted successfully"),P()}catch(p){console.error("Failed to delete supplier:",p),window.toast?.error(p.response?.data?.detail||"Failed to delete supplier")}finally{T(!1),oe(null)}},$=i.filter(p=>p.name.toLowerCase().includes(E.toLowerCase())||p.code.toLowerCase().includes(E.toLowerCase())),te={total:i.length,active:i.filter(p=>p.is_active).length,inactive:i.filter(p=>!p.is_active).length,cities:new Set(i.map(p=>p.city).filter(Boolean)).size},me=[{header:"Code",key:"code",render:p=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:p.code})},{header:"Supplier",key:"name",render:p=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:p.name}),e.jsx("div",{className:"text-xs text-slate-500",children:p.city||"No Location"})]})},{header:"Contact",key:"contact_person",render:p=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:p.contact_person}),e.jsx("div",{className:"text-xs text-slate-500",children:p.phone})]})},{header:"GST Number",key:"gst_number",render:p=>e.jsx("span",{className:"font-mono text-xs",children:p.gst_number||"-"}),className:"hidden md:table-cell"},{header:"Status",key:"is_active",render:p=>e.jsx(Ye,{variant:p.is_active?"success":"secondary",children:p.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",render:p=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("suppliers.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>re(p),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("suppliers.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>ye(p),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]}),align:"right"}],B=$.slice((R-1)*U,R*U);return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Suppliers",subtitle:"Manage suppliers for stock entry and purchase orders",actions:r("suppliers.create")&&e.jsxs(le,{variant:"primary",onClick:L,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Supplier"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Suppliers",value:te.total,icon:"local_shipping",isActive:!0}),e.jsx(Ne,{title:"Active",value:te.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Inactive",value:te.inactive,icon:"cancel",trend:"neutral"}),e.jsx(Ne,{title:"Cities",value:te.cities,icon:"location_city",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:me,data:B,loading:x,emptyMessage:"No suppliers found.",pagination:{currentPage:R,totalPages:Math.ceil($.length/U),onPageChange:H,totalItems:$.length,pageSize:U,onPageSizeChange:p=>{D(p),H(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Supplier List",count:$.length,searchProps:{value:E,onChange:p=>{A(p),H(1)},placeholder:"Search suppliers..."},embedded:!0})}),e.jsx(Tt,{isOpen:N,onClose:()=>v(!1),title:g?"Edit Supplier":"Add Supplier",size:"lg",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Supplier Code *",value:b.code,onChange:p=>w({...b,code:p.target.value}),placeholder:"SUP001",required:!0}),e.jsx(pe,{label:"Supplier Name *",value:b.name,onChange:p=>w({...b,name:p.target.value}),placeholder:"ABC Pharmaceuticals",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Contact Person",value:b.contact_person,onChange:p=>w({...b,contact_person:p.target.value}),placeholder:"John Doe"}),e.jsx(pe,{label:"Phone",value:b.phone,onChange:p=>w({...b,phone:p.target.value}),placeholder:"+91 9876543210"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Email",type:"email",value:b.email,onChange:p=>w({...b,email:p.target.value}),placeholder:"supplier@example.com"}),e.jsx(pe,{label:"GST Number",value:b.gst_number,onChange:p=>w({...b,gst_number:p.target.value}),placeholder:"29ABCDE1234F1Z5",className:"font-mono"})]}),e.jsx(pe,{label:"Address",value:b.address,onChange:p=>w({...b,address:p.target.value}),placeholder:"Street address"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(pe,{label:"City",value:b.city,onChange:p=>w({...b,city:p.target.value}),placeholder:"Mumbai"}),e.jsx(pe,{label:"State",value:b.state,onChange:p=>w({...b,state:p.target.value}),placeholder:"Maharashtra"}),e.jsx(pe,{label:"Pincode",value:b.pincode,onChange:p=>w({...b,pincode:p.target.value}),placeholder:"400001"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":"Save"})]})]})}),e.jsx(qt,{isOpen:I,onClose:()=>T(!1),onConfirm:z,title:"Delete Supplier",message:`Are you sure you want to delete "${ce?.name}"? This action cannot be undone.`,confirmText:"Delete Supplier"})]})}function CN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState(null),[b,w]=m.useState({name:"",code:"",description:"",adjustment_type:"decrease"}),[_,k]=m.useState(!1),[S,y]=m.useState(""),[E,A]=m.useState(""),[U,D]=m.useState(1),[R,H]=m.useState(10);m.useEffect(()=>{n&&!r("adjustment_reasons.view")&&c("/")},[n,c,r]),m.useEffect(()=>{P()},[]);const P=async()=>{h(!0);try{const p=await Oe.listAdjustmentReasons();u(p.data.items||[])}catch(p){console.error("Failed to load adjustment reasons:",p),i.length===0&&u([])}finally{h(!1)}},L=()=>{f(null),w({name:"",code:"",description:"",adjustment_type:"decrease"}),y(""),v(!0)},re=p=>{f(p),w({name:p.name,code:p.code,description:p.description||"",adjustment_type:p.adjustment_type}),y(""),v(!0)},G=async p=>{if(p.preventDefault(),!b.name.trim()||!b.code.trim()){y("Name and code are required");return}k(!0),y("");try{g?await Oe.updateAdjustmentReason(g.id,b):await Oe.createAdjustmentReason(b),v(!1),P()}catch(M){y(M.response?.data?.detail||"Failed to save")}finally{k(!1)}},[I,T]=m.useState(!1),[ce,oe]=m.useState(null),ye=p=>{oe(p),T(!0)},z=async()=>{if(ce)try{await Oe.deleteAdjustmentReason(ce.id),window.toast?.success("Adjustment reason deleted successfully"),P()}catch(p){console.error("Failed to delete adjustment reason:",p),window.toast?.error(p.response?.data?.detail||"Failed to delete adjustment reason")}finally{T(!1),oe(null)}},$=i.filter(p=>p.name.toLowerCase().includes(E.toLowerCase())||p.code.toLowerCase().includes(E.toLowerCase())),te=$.slice((U-1)*R,U*R),me={total:i.length,increase:i.filter(p=>p.adjustment_type==="increase").length,decrease:i.filter(p=>p.adjustment_type==="decrease").length},B=[{header:"Code",key:"code",render:p=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:p.code})},{header:"Reason Name",key:"name",render:p=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:p.name}),p.description&&e.jsx("div",{className:"text-xs text-slate-500",children:p.description})]})},{header:"Type",key:"adjustment_type",render:p=>e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full ${p.adjustment_type==="increase"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:p.adjustment_type==="increase"?"arrow_upward":"arrow_downward"}),p.adjustment_type==="increase"?"Increase":"Decrease"]})},{header:"Actions",key:"id",align:"right",render:p=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("adjustment_reasons.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>re(p),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("adjustment_reasons.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>ye(p),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Adjustment Reasons",subtitle:"Manage stock adjustment reasons",actions:r("adjustment_reasons.create")&&e.jsxs(le,{variant:"primary",onClick:L,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Reason"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Reasons",value:me.total,icon:"swap_vert",isActive:!0}),e.jsx(Ne,{title:"Increase Types",value:me.increase,icon:"trending_up",trend:"up",valueClassName:"text-green-600"}),e.jsx(Ne,{title:"Decrease Types",value:me.decrease,icon:"trending_down",trend:"down",valueClassName:"text-red-600"})]}),e.jsx(fe.DataTable,{columns:B,data:te,loading:x,emptyMessage:"No adjustment reasons found.",pagination:{currentPage:U,totalPages:Math.ceil($.length/R),onPageChange:D,totalItems:$.length,pageSize:R,onPageSizeChange:p=>{H(p),D(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Reason List",count:$.length,searchProps:{value:E,onChange:p=>{A(p),D(1)},placeholder:"Search reasons..."},embedded:!0})}),e.jsx(Tt,{isOpen:N,onClose:()=>v(!1),title:g?"Edit Reason":"Add Reason",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Code *",value:b.code,onChange:p=>w({...b,code:p.target.value}),placeholder:"DAMAGE",required:!0}),e.jsx(pe,{label:"Name *",value:b.name,onChange:p=>w({...b,name:p.target.value}),placeholder:"Damaged Goods",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Adjustment Type *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"radio",checked:b.adjustment_type==="decrease",onChange:()=>w({...b,adjustment_type:"decrease"}),className:"text-primary w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Decrease (Stock Out)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"radio",checked:b.adjustment_type==="increase",onChange:()=>w({...b,adjustment_type:"increase"}),className:"text-primary w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Increase (Stock In)"})]})]})]}),e.jsx(pe,{label:"Description",value:b.description,onChange:p=>w({...b,description:p.target.value}),placeholder:"Explain when this reason is used"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":"Save"})]})]})}),e.jsx(qt,{isOpen:I,onClose:()=>T(!1),onConfirm:z,title:"Delete Adjustment Reason",message:`Are you sure you want to delete "${ce?.name}"? This action cannot be undone.`,confirmText:"Delete Reason"})]})}function EN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState(null),[b,w]=m.useState({name:"",code:"",icon:"payments"}),[_,k]=m.useState(!1),[S,y]=m.useState("");m.useEffect(()=>{n&&!r("payment_methods.view")&&c("/")},[n,c,r]),m.useEffect(()=>{E()},[]);const E=async()=>{h(!0);try{const T=await Oe.listPaymentMethods();u(T.data.items||[])}catch(T){console.error("Failed to load payment methods:",T),u([{id:"1",code:"CASH",name:"Cash",icon:"payments",is_active:!0,created_at:new Date().toISOString()},{id:"2",code:"CARD",name:"Credit/Debit Card",icon:"credit_card",is_active:!0,created_at:new Date().toISOString()},{id:"3",code:"UPI",name:"UPI",icon:"qr_code_scanner",is_active:!0,created_at:new Date().toISOString()},{id:"4",code:"WALLET",name:"Digital Wallet",icon:"account_balance_wallet",is_active:!0,created_at:new Date().toISOString()},{id:"5",code:"CREDIT",name:"Store Credit",icon:"receipt",is_active:!0,created_at:new Date().toISOString()}])}finally{h(!1)}},A=()=>{f(null),w({name:"",code:"",icon:"payments"}),y(""),v(!0)},U=T=>{f(T),w({name:T.name,code:T.code,icon:T.icon||"payments"}),y(""),v(!0)},D=async T=>{if(T.preventDefault(),!b.name.trim()||!b.code.trim()){y("Name and code are required");return}k(!0),y("");try{g?await Oe.updatePaymentMethod(g.id,b):await Oe.createPaymentMethod(b),v(!1),E()}catch(ce){y(ce.response?.data?.detail||"Failed to save")}finally{k(!1)}},[R,H]=m.useState(!1),[P,L]=m.useState(null),re=T=>{L(T),H(!0)},G=async()=>{if(P)try{await Oe.deletePaymentMethod(P.id),window.toast?.success("Payment method deleted successfully"),E()}catch(T){console.error("Failed to delete payment method:",T),window.toast?.error(T.response?.data?.detail||"Failed to delete payment method")}finally{H(!1),L(null)}},I=["payments","credit_card","qr_code_scanner","account_balance_wallet","receipt","account_balance"];return e.jsxs(Zt,{title:"Payment Methods",description:"Manage payment methods for billing and POS",icon:"credit_card",actions:r("payment_methods.create")&&e.jsxs(le,{variant:"primary",onClick:A,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Method"]}),children:[e.jsx(Xe,{className:"space-y-6",children:x?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):i.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-slate-300 mb-3",children:"credit_card"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"No payment methods"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Add payment methods to enable billing"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(T=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:T.icon||"payments"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:T.name}),e.jsx("p",{className:"text-sm text-slate-500 font-mono",children:T.code})]}),e.jsxs("div",{className:"flex gap-1",children:[r("payment_methods.edit")&&e.jsx("button",{onClick:()=>U(T),className:"p-1.5 text-slate-400 hover:text-primary rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("payment_methods.delete")&&e.jsx("button",{onClick:()=>re(T),className:"p-1.5 text-slate-400 hover:text-red-600 rounded-lg",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})]},T.id))})}),e.jsx(Tt,{isOpen:N,onClose:()=>v(!1),title:g?"Edit Payment Method":"Add Payment Method",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-lg text-red-600 text-sm",children:S}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{label:"Code *",value:b.code,onChange:T=>w({...b,code:T.target.value}),placeholder:"CASH",required:!0}),e.jsx(pe,{label:"Name *",value:b.name,onChange:T=>w({...b,name:T.target.value}),placeholder:"Cash Payment",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Icon"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(T=>e.jsx("button",{type:"button",onClick:()=>w({...b,icon:T}),className:`p-3 rounded-lg border ${b.icon===T?"border-primary bg-primary/10":"border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:T})},T))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":"Save"})]})]})}),e.jsx(qt,{isOpen:R,onClose:()=>H(!1),onConfirm:G,title:"Delete Payment Method",message:`Are you sure you want to delete "${P?.name}"? This action cannot be undone.`,confirmText:"Delete Method"})]})}function AN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState(null),[b,w]=m.useState({code:"",name:"",description:""}),[_,k]=m.useState(!1),[S,y]=m.useState(""),[E,A]=m.useState(""),[U,D]=m.useState(1),[R,H]=m.useState(10);m.useEffect(()=>{n&&!r("medicine_types.view")&&c("/")},[n,c,r]),m.useEffect(()=>{P()},[]);const P=async()=>{h(!0);try{const p=await Oe.listMedicineTypes();u(p.data.items||[])}catch(p){console.error("Failed to load medicine types:",p)}finally{h(!1)}},L=()=>{f(null),w({code:"",name:"",description:""}),y(""),v(!0)},re=p=>{f(p),w({code:p.code,name:p.name,description:p.description||""}),y(""),v(!0)},G=async p=>{if(p.preventDefault(),!b.code||!b.name){y("Code and Name are required");return}k(!0),y("");try{g?await Oe.updateMedicineType(g.id,b):await Oe.createMedicineType(b),v(!1),P()}catch(M){y(M.response?.data?.detail||"Failed to save")}finally{k(!1)}},[I,T]=m.useState(!1),[ce,oe]=m.useState(null),ye=p=>{oe(p),T(!0)},z=async()=>{if(ce)try{await Oe.deleteMedicineType(ce.id),window.toast?.success("Medicine type deleted successfully"),P()}catch(p){console.error("Failed to delete medicine type:",p),window.toast?.error(p.response?.data?.detail||"Failed to delete medicine type")}finally{T(!1),oe(null)}},$=i.filter(p=>p.name.toLowerCase().includes(E.toLowerCase())||p.code.toLowerCase().includes(E.toLowerCase())),te=$.slice((U-1)*R,U*R),me={total:i.length,active:i.filter(p=>p.is_active).length,inactive:i.filter(p=>!p.is_active).length},B=[{header:"Code",key:"code",render:p=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:p.code})},{header:"Type Name",key:"name",render:p=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:p.name}),p.description&&e.jsx("div",{className:"text-xs text-slate-500",children:p.description})]})},{header:"Status",key:"is_active",render:p=>e.jsx(Ye,{variant:p.is_active?"success":"secondary",children:p.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:p=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("medicine_types.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>re(p),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("medicine_types.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>ye(p),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Medicine Types",subtitle:"Manage medicine form types (tablet, capsule, syrup, etc.)",actions:r("medicine_types.create")&&e.jsxs(le,{variant:"primary",onClick:L,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Type"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Types",value:me.total,icon:"medication",isActive:!0}),e.jsx(Ne,{title:"Active",value:me.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Inactive",value:me.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:B,data:te,loading:x,emptyMessage:"No medicine types found.",pagination:{currentPage:U,totalPages:Math.ceil($.length/R),onPageChange:D,totalItems:$.length,pageSize:R,onPageSizeChange:p=>{H(p),D(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Type List",count:$.length,searchProps:{value:E,onChange:p=>{A(p),D(1)},placeholder:"Search types..."},embedded:!0})}),e.jsx(Tt,{isOpen:N,onClose:()=>v(!1),title:g?"Edit Medicine Type":"Add Medicine Type",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsx(pe,{label:"Code",value:b.code,onChange:p=>w({...b,code:p.target.value.toLowerCase()}),placeholder:"e.g., tablet",required:!0}),e.jsx(pe,{label:"Name",value:b.name,onChange:p=>w({...b,name:p.target.value}),placeholder:"e.g., Tablet",required:!0}),e.jsx(pe,{label:"Description (Optional)",value:b.description,onChange:p=>w({...b,description:p.target.value}),placeholder:"e.g., Solid oral dosage form"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":g?"Update":"Create"})]})]})}),e.jsx(qt,{isOpen:I,onClose:()=>T(!1),onConfirm:z,title:"Delete Medicine Type",message:`Are you sure you want to delete "${ce?.name}"? This action cannot be undone.`,confirmText:"Delete Type"})]})}function TN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState(null),[b,w]=m.useState({code:"",name:"",description:""}),[_,k]=m.useState(!1),[S,y]=m.useState(""),[E,A]=m.useState(""),[U,D]=m.useState(1),[R,H]=m.useState(10);m.useEffect(()=>{n&&!r("brands.view")&&c("/")},[n,c,r]),m.useEffect(()=>{P()},[]);const P=async()=>{h(!0);try{const p=await Oe.listBrands();u(p.data.items||[])}catch(p){console.error("Failed to load brands:",p)}finally{h(!1)}},L=()=>{f(null),w({code:"",name:"",description:""}),y(""),v(!0)},re=p=>{f(p),w({code:p.code,name:p.name,description:p.description||""}),y(""),v(!0)},G=async p=>{if(p.preventDefault(),!b.code||!b.name){y("Code and Name are required");return}k(!0),y("");try{g?await Oe.updateBrand(g.id,b):await Oe.createBrand(b),v(!1),P()}catch(M){y(M.response?.data?.detail||"Failed to save")}finally{k(!1)}},[I,T]=m.useState(!1),[ce,oe]=m.useState(null),ye=p=>{oe(p),T(!0)},z=async()=>{if(ce)try{await Oe.deleteBrand(ce.id),window.toast?.success("Brand deleted successfully"),P()}catch(p){console.error("Failed to delete brand:",p),window.toast?.error(p.response?.data?.detail||"Failed to delete brand")}finally{T(!1),oe(null)}},$=i.filter(p=>p.name.toLowerCase().includes(E.toLowerCase())||p.code.toLowerCase().includes(E.toLowerCase())),te=$.slice((U-1)*R,U*R),me={total:i.length,active:i.filter(p=>p.is_active).length,inactive:i.filter(p=>!p.is_active).length},B=[{header:"Code",key:"code",render:p=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:p.code})},{header:"Brand Name",key:"name",render:p=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:p.name}),p.description&&e.jsx("div",{className:"text-xs text-slate-500",children:p.description})]})},{header:"Status",key:"is_active",render:p=>e.jsx(Ye,{variant:p.is_active?"success":"secondary",children:p.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:p=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("brands.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>re(p),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("brands.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>ye(p),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Brands",subtitle:"Manage medicine brand masters",actions:r("brands.create")&&e.jsxs(le,{variant:"primary",onClick:L,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Brand"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Brands",value:me.total,icon:"label",isActive:!0}),e.jsx(Ne,{title:"Active",value:me.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Inactive",value:me.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:B,data:te,loading:x,emptyMessage:"No brands found.",pagination:{currentPage:U,totalPages:Math.ceil($.length/R),onPageChange:D,totalItems:$.length,pageSize:R,onPageSizeChange:p=>{H(p),D(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Brand List",count:$.length,searchProps:{value:E,onChange:p=>{A(p),D(1)},placeholder:"Search brands..."},embedded:!0})}),e.jsx(Tt,{isOpen:N,onClose:()=>v(!1),title:g?"Edit Brand":"Add Brand",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsx(pe,{label:"Code",value:b.code,onChange:p=>w({...b,code:p.target.value.toLowerCase()}),placeholder:"e.g., cipla",required:!0}),e.jsx(pe,{label:"Name",value:b.name,onChange:p=>w({...b,name:p.target.value}),placeholder:"e.g., Cipla",required:!0}),e.jsx(pe,{label:"Description (Optional)",value:b.description,onChange:p=>w({...b,description:p.target.value}),placeholder:"Brand description"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":g?"Update":"Create"})]})]})}),e.jsx(qt,{isOpen:I,onClose:()=>T(!1),onConfirm:z,title:"Delete Brand",message:`Are you sure you want to delete "${ce?.name}"? This action cannot be undone.`,confirmText:"Delete Brand"})]})}function DN(){const{user:n}=Ke(),{hasPermission:r}=It(),c=He(),[i,u]=m.useState([]),[x,h]=m.useState(!0),[N,v]=m.useState(!1),[g,f]=m.useState(null),[b,w]=m.useState({code:"",name:"",description:""}),[_,k]=m.useState(!1),[S,y]=m.useState(""),[E,A]=m.useState(""),[U,D]=m.useState(1),[R,H]=m.useState(10);m.useEffect(()=>{n&&!r("manufacturers.view")&&c("/")},[n,c,r]),m.useEffect(()=>{P()},[]);const P=async()=>{h(!0);try{const p=await Oe.listManufacturers();u(p.data.items||[])}catch(p){console.error("Failed to load manufacturers:",p)}finally{h(!1)}},L=()=>{f(null),w({code:"",name:"",description:""}),y(""),v(!0)},re=p=>{f(p),w({code:p.code,name:p.name,description:p.description||""}),y(""),v(!0)},G=async p=>{if(p.preventDefault(),!b.code||!b.name){y("Code and Name are required");return}k(!0),y("");try{g?await Oe.updateManufacturer(g.id,b):await Oe.createManufacturer(b),v(!1),P()}catch(M){y(M.response?.data?.detail||"Failed to save")}finally{k(!1)}},[I,T]=m.useState(!1),[ce,oe]=m.useState(null),ye=p=>{oe(p),T(!0)},z=async()=>{if(ce)try{await Oe.deleteManufacturer(ce.id),window.toast?.success("Manufacturer deleted successfully"),P()}catch(p){console.error("Failed to delete manufacturer:",p),window.toast?.error(p.response?.data?.detail||"Failed to delete manufacturer")}finally{T(!1),oe(null)}},$=i.filter(p=>p.name.toLowerCase().includes(E.toLowerCase())||p.code.toLowerCase().includes(E.toLowerCase())),te=$.slice((U-1)*R,U*R),me={total:i.length,active:i.filter(p=>p.is_active).length,inactive:i.filter(p=>!p.is_active).length},B=[{header:"Code",key:"code",render:p=>e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:p.code})},{header:"Manufacturer",key:"name",render:p=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:p.name}),p.description&&e.jsx("div",{className:"text-xs text-slate-500",children:p.description})]})},{header:"Status",key:"is_active",render:p=>e.jsx(Ye,{variant:p.is_active?"success":"secondary",children:p.is_active?"Active":"Inactive"}),align:"center"},{header:"Actions",key:"id",align:"right",render:p=>e.jsxs("div",{className:"flex justify-end gap-1",children:[r("manufacturers.edit")&&e.jsx(le,{variant:"ghost",onClick:()=>re(p),className:"!p-1.5 h-8 w-8 text-blue-600",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),r("manufacturers.delete")&&e.jsx(le,{variant:"ghost",onClick:()=>ye(p),className:"!p-1.5 h-8 w-8 text-red-600 hover:bg-red-50",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})}];return e.jsxs(fe,{children:[e.jsx(fe.Header,{title:"Manufacturers",subtitle:"Manage medicine manufacturer masters",actions:r("manufacturers.create")&&e.jsxs(le,{variant:"primary",onClick:L,children:[e.jsx("span",{className:"material-symbols-outlined text-[20px] mr-2",children:"add"}),"Add Manufacturer"]})}),e.jsxs(fe.KPICards,{children:[e.jsx(Ne,{title:"Total Manufacturers",value:me.total,icon:"factory",isActive:!0}),e.jsx(Ne,{title:"Active",value:me.active,icon:"check_circle",trend:"neutral"}),e.jsx(Ne,{title:"Inactive",value:me.inactive,icon:"cancel",trend:"neutral"})]}),e.jsx(fe.DataTable,{columns:B,data:te,loading:x,emptyMessage:"No manufacturers found.",pagination:{currentPage:U,totalPages:Math.ceil($.length/R),onPageChange:D,totalItems:$.length,pageSize:R,onPageSizeChange:p=>{H(p),D(1)}},headerSlot:e.jsx(fe.ListControls,{title:"Manufacturer List",count:$.length,searchProps:{value:E,onChange:p=>{A(p),D(1)},placeholder:"Search manufacturers..."},embedded:!0})}),e.jsx(Tt,{isOpen:N,onClose:()=>v(!1),title:g?"Edit Manufacturer":"Add Manufacturer",children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 rounded-xl text-red-600 text-sm",children:S}),e.jsx(pe,{label:"Code",value:b.code,onChange:p=>w({...b,code:p.target.value.toLowerCase()}),placeholder:"e.g., sunpharma",required:!0}),e.jsx(pe,{label:"Name",value:b.name,onChange:p=>w({...b,name:p.target.value}),placeholder:"e.g., Sun Pharmaceutical",required:!0}),e.jsx(pe,{label:"Description (Optional)",value:b.description,onChange:p=>w({...b,description:p.target.value}),placeholder:"Manufacturer description"}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(le,{variant:"secondary",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(le,{variant:"primary",type:"submit",loading:_,children:_?"Saving...":g?"Update":"Create"})]})]})}),e.jsx(qt,{isOpen:I,onClose:()=>T(!1),onConfirm:z,title:"Delete Manufacturer",message:`Are you sure you want to delete "${ce?.name}"? This action cannot be undone.`,confirmText:"Delete Manufacturer"})]})}function RN(){const n=He(),{logout:r}=Ke();return m.useEffect(()=>{const c=()=>{console.log("Session expired - redirecting to login"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),r(),n("/login",{replace:!0})};return window.addEventListener("auth:session-expired",c),()=>window.removeEventListener("auth:session-expired",c)},[n,r]),null}function MN({children:n}){const{user:r,loading:c}=Ke();return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Initializing..."})]})}):r?e.jsx(e.Fragment,{children:n}):e.jsx(F0,{to:"/login",replace:!0})}function zN(){return e.jsx(Ej,{})}function ON(){return e.jsx(hj,{children:e.jsx(yj,{children:e.jsx(vj,{children:e.jsxs(jj,{children:[e.jsx(wj,{}),e.jsxs(_y,{children:[e.jsxs(ty,{children:[e.jsx(je,{path:"/login",element:e.jsx(Cj,{})}),e.jsxs(je,{path:"/",element:e.jsx(MN,{children:e.jsx(_j,{})}),children:[e.jsx(je,{index:!0,element:e.jsx(zN,{})}),e.jsx(je,{path:"users",element:e.jsx(Kj,{})}),e.jsx(je,{path:"roles",element:e.jsx(vN,{})}),e.jsx(je,{path:"login-activity",element:e.jsx(yN,{})}),e.jsx(je,{path:"warehouses",element:e.jsx(Oj,{})}),e.jsx(je,{path:"warehouses/add",element:e.jsx(hN,{})}),e.jsx(je,{path:"warehouses/edit/:id",element:e.jsx(xN,{})}),e.jsx(je,{path:"warehouses/stock",element:e.jsx(N0,{})}),e.jsx(je,{path:"shops",element:e.jsx(Gj,{})}),e.jsx(je,{path:"shops/add",element:e.jsx(Vj,{})}),e.jsx(je,{path:"shops/:id/edit",element:e.jsx(Qj,{})}),e.jsx(je,{path:"shops/stock",element:e.jsx(N0,{})}),e.jsx(je,{path:"warehouse-mapping",element:e.jsx(pN,{})}),e.jsx(je,{path:"medicines",element:e.jsx(Fj,{})}),e.jsx(je,{path:"medicines/add",element:e.jsx(Yj,{})}),e.jsx(je,{path:"medicines/:id",element:e.jsx($j,{})}),e.jsx(je,{path:"medicines/:id/edit",element:e.jsx(Pj,{})}),e.jsx(je,{path:"categories",element:e.jsx(jN,{})}),e.jsx(je,{path:"units",element:e.jsx(NN,{})}),e.jsx(je,{path:"hsn",element:e.jsx(wN,{})}),e.jsx(je,{path:"gst",element:e.jsx(kN,{})}),e.jsx(je,{path:"gst-slabs",element:e.jsx(SN,{})}),e.jsx(je,{path:"suppliers",element:e.jsx(_N,{})}),e.jsx(je,{path:"adjustment-reasons",element:e.jsx(CN,{})}),e.jsx(je,{path:"payment-methods",element:e.jsx(EN,{})}),e.jsx(je,{path:"medicine-types",element:e.jsx(AN,{})}),e.jsx(je,{path:"brands",element:e.jsx(TN,{})}),e.jsx(je,{path:"manufacturers",element:e.jsx(DN,{})}),e.jsx(je,{path:"racks",element:e.jsx(fN,{})}),e.jsx(je,{path:"inventory",element:e.jsx(fd,{})}),e.jsx(je,{path:"inventory/adjust",element:e.jsx(gN,{})}),e.jsx(je,{path:"inventory-oversight",element:e.jsx(Pn,{})}),e.jsx(je,{path:"inventory-oversight/warehouse",element:e.jsx(Pn,{})}),e.jsx(je,{path:"inventory-oversight/shop",element:e.jsx(Pn,{})}),e.jsx(je,{path:"inventory-oversight/expiry",element:e.jsx(Pn,{})}),e.jsx(je,{path:"inventory-oversight/dead-stock",element:e.jsx(Pn,{})}),e.jsx(je,{path:"analytics/dispatch",element:e.jsx(_0,{})})," ",e.jsx(je,{path:"analytics/demand",element:e.jsx(Si,{})})," ",e.jsx(je,{path:"customers",element:e.jsx(Jj,{})}),e.jsx(je,{path:"employees",element:e.jsx(Wj,{})}),e.jsx(je,{path:"employees/attendance",element:e.jsx(eN,{})}),e.jsx(je,{path:"employees/attendance/report",element:e.jsx(tN,{})}),e.jsx(je,{path:"employees/salary",element:e.jsx(aN,{})}),e.jsx(je,{path:"dispatches",element:e.jsx(_0,{})}),e.jsx(je,{path:"dispatches/create",element:e.jsx(sN,{})}),e.jsx(je,{path:"dispatches/:id",element:e.jsx(lN,{})}),e.jsx(je,{path:"purchase-requests",element:e.jsx(nN,{})}),e.jsx(je,{path:"sales",element:e.jsx(S0,{})}),e.jsx(je,{path:"sales/pos",element:e.jsx(uN,{})}),e.jsx(je,{path:"sales/invoices",element:e.jsx(S0,{})}),e.jsx(je,{path:"sales/returns",element:e.jsx(Ij,{})}),e.jsx(je,{path:"reports",element:e.jsx(Si,{})}),e.jsx(je,{path:"reports/sales",element:e.jsx(Si,{})}),e.jsx(je,{path:"reports/expiry",element:e.jsx(Xj,{})}),e.jsx(je,{path:"reports/tax",element:e.jsx(Zj,{})}),e.jsx(je,{path:"reports/inventory",element:e.jsx(fd,{})}),e.jsx(je,{path:"reports/inventory-aging",element:e.jsx(fd,{})})," ",e.jsx(je,{path:"reports/compliance",element:e.jsx(Si,{})})," ",e.jsx(je,{path:"notifications",element:e.jsx(mN,{})}),e.jsx(je,{path:"settings",element:e.jsx(w0,{})}),e.jsx(je,{path:"settings/application",element:e.jsx(w0,{})}),e.jsx(je,{path:"settings/system",element:e.jsx(pd,{})}),e.jsx(je,{path:"feature-flags",element:e.jsx(pd,{})})," ",e.jsx(je,{path:"audit-logs",element:e.jsx(bN,{})}),e.jsx(je,{path:"backup-restore",element:e.jsx(pd,{})})," "]}),e.jsx(je,{path:"*",element:e.jsx(F0,{to:"/",replace:!0})})]}),e.jsx(RN,{})]})]})})})})}const C0=localStorage.getItem("theme");C0==="dark"||!C0&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");tb.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(ON,{})}));
